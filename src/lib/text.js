(window['webpackJsonp'] = window['webpackJsonp'] || []).push([
	['chunk-d9164c10'],
	{
		'57be': function (e, t) {
			!(function (e, t) {
				for (var n in t) e[n] = t[n];
			})(
				t,
				(function (e) {
					var t = {};
					function n(r) {
						if (t[r]) return t[r].exports;
						var i = (t[r] = {
							i: r,
							l: !1,
							exports: {},
						});
						return e[r].call(i.exports, i, i.exports, n), (i.l = !0), i.exports;
					}
					return (
						(n.m = e),
						(n.c = t),
						(n.d = function (e, t, r) {
							n.o(e, t) ||
								Object.defineProperty(e, t, {
									enumerable: !0,
									get: r,
								});
						}),
						(n.r = function (e) {
							'undefined' != typeof Symbol &&
								Symbol.toStringTag &&
								Object.defineProperty(e, Symbol.toStringTag, {
									value: 'Module',
								}),
								Object.defineProperty(e, '__esModule', {
									value: !0,
								});
						}),
						(n.t = function (e, t) {
							if ((1 & t && (e = n(e)), 8 & t)) return e;
							if (4 & t && 'object' == typeof e && e && e.__esModule) return e;
							var r = Object.create(null);
							if (
								(n.r(r),
								Object.defineProperty(r, 'default', {
									enumerable: !0,
									value: e,
								}),
								2 & t && 'string' != typeof e)
							)
								for (var i in e)
									n.d(
										r,
										i,
										function (t) {
											return e[t];
										}.bind(null, i),
									);
							return r;
						}),
						(n.n = function (e) {
							var t =
								e && e.__esModule
									? function () {
											return e.default;
									  }
									: function () {
											return e;
									  };
							return n.d(t, 'a', t), t;
						}),
						(n.o = function (e, t) {
							return Object.prototype.hasOwnProperty.call(e, t);
						}),
						(n.p = ''),
						n((n.s = 123))
					);
				})([
					function (e, t, n) {
						'use strict';
						n.r(t),
							n.d(t, 'Arc', function () {
								return at;
							}),
							n.d(t, 'BOUNDARY', function () {
								return h;
							}),
							n.d(t, 'BooleanOperations', function () {
								return ie;
							}),
							n.d(t, 'Box', function () {
								return lt;
							}),
							n.d(t, 'CCW', function () {
								return r;
							}),
							n.d(t, 'CW', function () {
								return i;
							}),
							n.d(t, 'Circle', function () {
								return it;
							}),
							n.d(t, 'Distance', function () {
								return xt;
							}),
							n.d(t, 'Edge', function () {
								return ct;
							}),
							n.d(t, 'Errors', function () {
								return b;
							}),
							n.d(t, 'Face', function () {
								return pt;
							}),
							n.d(t, 'INSIDE', function () {
								return s;
							}),
							n.d(t, 'Inversion', function () {
								return _t;
							}),
							n.d(t, 'Line', function () {
								return nt;
							}),
							n.d(t, 'Matrix', function () {
								return Je;
							}),
							n.d(t, 'Multiline', function () {
								return Fe;
							}),
							n.d(t, 'ORIENTATION', function () {
								return o;
							}),
							n.d(t, 'OUTSIDE', function () {
								return l;
							}),
							n.d(t, 'PlanarSet', function () {
								return Ke;
							}),
							n.d(t, 'Point', function () {
								return Ye;
							}),
							n.d(t, 'Polygon', function () {
								return gt;
							}),
							n.d(t, 'Ray', function () {
								return ft;
							}),
							n.d(t, 'Relations', function () {
								return Ue;
							}),
							n.d(t, 'Segment', function () {
								return $e;
							}),
							n.d(t, 'Utils', function () {
								return v;
							}),
							n.d(t, 'Vector', function () {
								return Xe;
							}),
							n.d(t, 'arc', function () {
								return st;
							}),
							n.d(t, 'box', function () {
								return ht;
							}),
							n.d(t, 'circle', function () {
								return ot;
							}),
							n.d(t, 'inversion', function () {
								return Pt;
							}),
							n.d(t, 'line', function () {
								return rt;
							}),
							n.d(t, 'matrix', function () {
								return Ve;
							}),
							n.d(t, 'multiline', function () {
								return je;
							}),
							n.d(t, 'point', function () {
								return Qe;
							}),
							n.d(t, 'polygon', function () {
								return yt;
							}),
							n.d(t, 'ray', function () {
								return dt;
							}),
							n.d(t, 'ray_shoot', function () {
								return Ae;
							}),
							n.d(t, 'segment', function () {
								return et;
							}),
							n.d(t, 'vector', function () {
								return Ze;
							});
						const r = !0,
							i = !1,
							o = {
								CCW: -1,
								CW: 1,
								NOT_ORIENTABLE: 0,
							},
							a = 2 * Math.PI,
							s = 1,
							l = 0,
							h = 2;
						var c = Object.freeze({
							CCW: r,
							CW: i,
							ORIENTATION: o,
							PIx2: a,
							INSIDE: s,
							OUTSIDE: l,
							BOUNDARY: h,
							CONTAINS: 3,
							INTERLACE: 4,
							OVERLAP_SAME: 1,
							OVERLAP_OPPOSITE: 2,
							NOT_VERTEX: 0,
							START_VERTEX: 1,
							END_VERTEX: 2,
						});
						let u = 1e-6;
						function p(e) {
							u = e;
						}
						function f() {
							return u;
						}
						function d(e) {
							return e < u && e > -u;
						}
						function g(e, t) {
							return e - t < u && e - t > -u;
						}
						function y(e, t) {
							return e - t > u;
						}
						function m(e, t) {
							return e - t < -u;
						}
						var v = Object.freeze({
							setTolerance: p,
							getTolerance: f,
							DECIMALS: 3,
							EQ_0: d,
							EQ: g,
							GT: y,
							GE: function (e, t) {
								return e - t > -u;
							},
							LT: m,
							LE: function (e, t) {
								return e - t < u;
							},
						});
						class w {
							static get ILLEGAL_PARAMETERS() {
								return new ReferenceError('Illegal Parameters');
							}
							static get ZERO_DIVISION() {
								return new Error('Zero division');
							}
							static get UNRESOLVED_BOUNDARY_CONFLICT() {
								return new Error('Unresolved boundary conflict in boolean operation');
							}
							static get INFINITE_LOOP() {
								return new Error('Infinite loop');
							}
						}
						var b = Object.freeze({
							default: w,
						});
						let S = {
							Utils: v,
							Errors: w,
							Matrix: void 0,
							Planar_set: void 0,
							Point: void 0,
							Vector: void 0,
							Line: void 0,
							Circle: void 0,
							Segment: void 0,
							Arc: void 0,
							Box: void 0,
							Edge: void 0,
							Face: void 0,
							Ray: void 0,
							Ray_shooting: void 0,
							Multiline: void 0,
							Polygon: void 0,
							Distance: void 0,
							Inversion: void 0,
						};
						for (let Dt in c) S[Dt] = c[Dt];
						Object.defineProperty(S, 'DP_TOL', {
							get: function () {
								return f();
							},
							set: function (e) {
								p(e);
							},
						});
						class _ {
							constructor(e, t) {
								(this.first = e), (this.last = t || this.first);
							}
							static testInfiniteLoop(e) {
								let t = e,
									n = e;
								do {
									if (t != e && t === n) throw S.Errors.INFINITE_LOOP;
									(t = t.next), (n = n.next.next);
								} while (t != e);
							}
							get size() {
								let e = 0;
								for (let t of this) e++;
								return e;
							}
							toArray(e, t) {
								let n = [],
									r = e || this.first,
									i = t || this.last,
									o = r;
								if (void 0 === o) return n;
								do {
									n.push(o), (o = o.next);
								} while (o !== i.next);
								return n;
							}
							append(e) {
								return (
									this.isEmpty() ? (this.first = e) : ((e.prev = this.last), (this.last.next = e)),
									(this.last = e),
									(this.last.next = void 0),
									(this.first.prev = void 0),
									this
								);
							}
							insert(e, t) {
								if (this.isEmpty()) (this.first = e), (this.last = e);
								else if (null == t) (e.next = this.first), (this.first.prev = e), (this.first = e);
								else {
									let n = t.next;
									(t.next = e),
										n && (n.prev = e),
										(e.prev = t),
										(e.next = n),
										this.last === t && (this.last = e);
								}
								return (this.last.next = void 0), (this.first.prev = void 0), this;
							}
							remove(e) {
								return (
									e === this.first && e === this.last
										? ((this.first = void 0), (this.last = void 0))
										: (e.prev && (e.prev.next = e.next),
										  e.next && (e.next.prev = e.prev),
										  e === this.first && (this.first = e.next),
										  e === this.last && (this.last = e.prev)),
									this
								);
							}
							isEmpty() {
								return void 0 === this.first;
							}
							[Symbol.iterator]() {
								let e = void 0;
								return {
									next: () => (
										(e = e ? e.next : this.first),
										{
											value: e,
											done: void 0 === e,
										}
									),
								};
							}
						}
						function P(e, t, n) {
							let r = n.length,
								i = e.shape.split(t);
							if (0 === i.length) return;
							let o = 0;
							o = null === i[0] ? 0 : null === i[1] ? e.shape.length : i[0].length;
							let a = 0;
							g(o, 0) && (a |= 1), g(o, e.shape.length) && (a |= 2);
							let s = 2 & a && 0 === e.next.arc_length ? 0 : e.arc_length + o;
							n.push({
								id: r,
								pt: t,
								arc_length: s,
								edge_before: e,
								edge_after: void 0,
								face: e.face,
								is_vertex: a,
							});
						}
						function x(e) {
							(e.int_points1_sorted = D(e.int_points1)), (e.int_points2_sorted = D(e.int_points2));
						}
						function D(e) {
							let t = new Map(),
								n = 0;
							for (let r of e) t.has(r.face) || (t.set(r.face, n), n++);
							for (let r of e) r.faceId = t.get(r.face);
							return e.slice().sort(T);
						}
						function T(e, t) {
							return e.faceId < t.faceId
								? -1
								: e.faceId > t.faceId
								? 1
								: e.arc_length < t.arc_length
								? -1
								: e.arc_length > t.arc_length
								? 1
								: 0;
						}
						function O(e, t) {
							return t
								.slice()
								.sort((t, n) =>
									e.coord(t.pt) < e.coord(n.pt) ? -1 : e.coord(t.pt) > e.coord(n.pt) ? 1 : 0,
								);
						}
						function M(e) {
							if (e.int_points1.length < 2) return;
							let t,
								n,
								r,
								i,
								o = !1;
							for (let a = 0; a < e.int_points1_sorted.length; a++)
								if (-1 !== e.int_points1_sorted[a].id) {
									(t = e.int_points1_sorted[a]), (n = e.int_points2[t.id]);
									for (
										let s = a + 1;
										s < e.int_points1_sorted.length &&
										((r = e.int_points1_sorted[s]), g(r.arc_length, t.arc_length));
										s++
									)
										-1 !== r.id &&
											((i = e.int_points2[r.id]),
											-1 !== i.id &&
												r.edge_before === t.edge_before &&
												r.edge_after === t.edge_after &&
												i.edge_before === n.edge_before &&
												i.edge_after === n.edge_after &&
												((r.id = -1), (i.id = -1), (o = !0)));
								}
							(n = e.int_points2_sorted[0]), (t = e.int_points1[n.id]);
							for (let a = 1; a < e.int_points2_sorted.length; a++) {
								let r = e.int_points2_sorted[a];
								if (-1 == r.id) continue;
								if (-1 == n.id || !g(r.arc_length, n.arc_length)) {
									(n = r), (t = e.int_points1[n.id]);
									continue;
								}
								let i = e.int_points1[r.id];
								i.edge_before === t.edge_before &&
									i.edge_after === t.edge_after &&
									r.edge_before === n.edge_before &&
									r.edge_after === n.edge_after &&
									((i.id = -1), (r.id = -1), (o = !0));
							}
							o &&
								((e.int_points1 = e.int_points1.filter((e) => e.id >= 0)),
								(e.int_points2 = e.int_points2.filter((e) => e.id >= 0)),
								e.int_points1.forEach((e, t) => (e.id = t)),
								e.int_points2.forEach((e, t) => (e.id = t)));
						}
						function E(e) {
							for (let t of e)
								(t.edge_before.bvStart = void 0),
									(t.edge_before.bvEnd = void 0),
									(t.edge_before.bv = void 0),
									(t.edge_before.overlap = void 0),
									(t.edge_after.bvStart = void 0),
									(t.edge_after.bvEnd = void 0),
									(t.edge_after.bv = void 0),
									(t.edge_after.overlap = void 0);
							for (let t of e) (t.edge_before.bvEnd = h), (t.edge_after.bvStart = h);
						}
						function I(e, t) {
							for (let n of e) n.edge_before.setInclusion(t), n.edge_after.setInclusion(t);
						}
						function C(e, t, n) {
							let r,
								i,
								o = 1;
							if (1 == e.length) return 1;
							r = e[t];
							for (
								let a = t + 1;
								a < e.length &&
								r.face == n &&
								((i = e[a]),
								i.pt.equalTo(r.pt) &&
									i.edge_before === r.edge_before &&
									i.edge_after === r.edge_after);
								a++
							)
								o++;
							return o;
						}
						function k(e, t) {
							if (t) {
								for (let n of t) {
									let t = n.edge_before;
									if (
										((n.is_vertex = 0),
										t.shape.start && t.shape.start.equalTo(n.pt) && (n.is_vertex |= 1),
										t.shape.end && t.shape.end.equalTo(n.pt) && (n.is_vertex |= 2),
										1 & n.is_vertex)
									) {
										(n.edge_before = t.prev), (n.is_vertex = 2);
										continue;
									}
									if (2 & n.is_vertex) continue;
									let r = e.addVertex(n.pt, t);
									n.edge_before = r;
								}
								for (let e of t) e.edge_after = e.edge_before.next;
							}
						}
						function F(e, t, n) {
							let r = e.edge_before,
								i = t.edge_after;
							(r.next = n), (n.prev = r), (n.next = i), (i.prev = n);
						}
						const { INSIDE: j, OUTSIDE: A, BOUNDARY: L, OVERLAP_SAME: H, OVERLAP_OPPOSITE: R } = c,
							{ NOT_VERTEX: B, START_VERTEX: W, END_VERTEX: z } = c;
						function N(e, t) {
							let n = t.clone().reverse(),
								[r, i] = Y(e, n, 3, !0);
							return r;
						}
						function U(e, t) {
							let [n, r] = Y(e, t, 2, !0);
							return n;
						}
						function J(e, t) {
							let [n, r] = Y(e, t, 2, !1),
								i = [];
							for (let a of n.faces) i = [...i, ...[...a.edges].map((e) => e.shape)];
							let o = [];
							for (let a of r.faces) o = [...o, ...[...a.edges].map((e) => e.shape)];
							return [i, o];
						}
						function V(e, t) {
							let [n, r] = Y(e, t, 3, !1),
								i = [];
							for (let o of n.faces) i = [...i, ...[...o.edges].map((e) => e.shape)];
							return i;
						}
						function G(e, t) {
							let n = e.clone(),
								r = t.clone(),
								i = Q(n, r);
							return (
								x(i),
								k(n, i.int_points1_sorted),
								k(r, i.int_points2_sorted),
								M(i),
								x(i),
								[i.int_points1_sorted.map((e) => e.pt), i.int_points2_sorted.map((e) => e.pt)]
							);
						}
						function q(e, t, n, r) {
							let i = X(e, n.int_points1),
								o = X(t, n.int_points2);
							for (
								Z(i, t),
									Z(o, e),
									E(n.int_points1),
									E(n.int_points2),
									I(n.int_points1, t),
									I(n.int_points2, e);
								$(e, t, n.int_points1, n.int_points1_sorted, n.int_points2, n);

							);
							!(function (e) {
								let t = void 0,
									n = void 0,
									r = void 0,
									i = e.int_points1.length;
								for (let o = 0; o < i; o++) {
									let a = e.int_points1_sorted[o];
									a.face !== t && ((n = o), (t = a.face));
									let s,
										l = o,
										c = C(e.int_points1_sorted, o, t);
									s = l + c < i && e.int_points1_sorted[l + c].face === t ? l + c : n;
									let u = C(e.int_points1_sorted, s, t);
									r = null;
									for (let n = s; n < s + u; n++) {
										let i = e.int_points1_sorted[n];
										if (i.face === t && e.int_points2[i.id].face === e.int_points2[a.id].face) {
											r = i;
											break;
										}
									}
									if (null === r) continue;
									let p = a.edge_after,
										f = r.edge_before;
									if (p.bv !== h || f.bv !== h) continue;
									if (p !== f) continue;
									let d = e.int_points2[a.id],
										g = e.int_points2[r.id],
										y = d.edge_after,
										m = g.edge_before;
									(y.bv === h && m.bv === h && y === m) ||
										((d = e.int_points2[r.id]),
										(g = e.int_points2[a.id]),
										(y = d.edge_after),
										(m = g.edge_before)),
										y.bv === h && m.bv === h && y === m && p.setOverlap(y);
								}
							})(n),
								ee(e, r, n.int_points1_sorted, !0),
								ee(t, r, n.int_points2_sorted, !1),
								re(e, i, r, !0),
								re(t, o, r, !1);
						}
						function K(e, t, n, r) {
							!(function (e, t, n, r) {
								for (let i of t.faces) {
									for (let t of i) e.edges.add(t);
									void 0 === r.find((e) => e.face === i) && e.addFace(i.first, i.last);
								}
							})(e, t, 0, n.int_points2),
								(function (e, t, n) {
									if (0 !== n.int_points1.length)
										for (let r = 0; r < n.int_points1.length; r++) {
											let e = n.int_points1[r],
												t = n.int_points2[r];
											if (
												(void 0 !== e.edge_before &&
													void 0 === e.edge_after &&
													void 0 === t.edge_before &&
													void 0 !== t.edge_after &&
													((e.edge_before.next = t.edge_after),
													(t.edge_after.prev = e.edge_before),
													(e.edge_after = t.edge_after),
													(t.edge_before = e.edge_before)),
												void 0 !== t.edge_before &&
													void 0 === t.edge_after &&
													void 0 === e.edge_before &&
													void 0 !== e.edge_after &&
													((t.edge_before.next = e.edge_after),
													(e.edge_after.prev = t.edge_before),
													(t.edge_after = e.edge_after),
													(e.edge_before = t.edge_before)),
												void 0 !== e.edge_before && void 0 === e.edge_after)
											)
												for (let r of n.int_points1_sorted)
													r !== e &&
														void 0 === r.edge_before &&
														void 0 !== r.edge_after &&
														r.pt.equalTo(e.pt) &&
														((e.edge_before.next = r.edge_after),
														(r.edge_after.prev = e.edge_before),
														(e.edge_after = r.edge_after),
														(r.edge_before = e.edge_before));
											if (void 0 !== t.edge_before && void 0 === t.edge_after)
												for (let r of n.int_points2_sorted)
													r !== t &&
														void 0 === r.edge_before &&
														void 0 !== r.edge_after &&
														r.pt.equalTo(t.pt) &&
														((t.edge_before.next = r.edge_after),
														(r.edge_after.prev = t.edge_before),
														(t.edge_after = r.edge_after),
														(r.edge_before = t.edge_before));
										}
								})(0, 0, n),
								te(e, n.int_points1),
								te(t, n.int_points2),
								ne(e, n.int_points1, n.int_points2),
								ne(e, n.int_points2, n.int_points1);
						}
						function Y(e, t, n, r) {
							let i = e.clone(),
								o = t.clone(),
								a = Q(i, o);
							return (
								x(a),
								k(i, a.int_points1_sorted),
								k(o, a.int_points2_sorted),
								M(a),
								x(a),
								q(i, o, a, n),
								r && K(i, o, a),
								[i, o]
							);
						}
						function Q(e, t) {
							let n = {
								int_points1: [],
								int_points2: [],
							};
							for (let r of e.edges) {
								let e = t.edges.search(r.box);
								for (let t of e) {
									let e = r.shape.intersect(t.shape);
									for (let i of e) P(r, i, n.int_points1), P(t, i, n.int_points2);
								}
							}
							return n;
						}
						function X(e, t) {
							let n = [];
							for (let r of e.faces) t.find((e) => e.face === r) || n.push(r);
							return n;
						}
						function Z(e, t) {
							for (let n of e)
								(n.first.bv = n.first.bvStart = n.first.bvEnd = void 0), n.first.setInclusion(t);
						}
						function $(e, t, n, r, i, o) {
							let a,
								s,
								l,
								h = r.length,
								c = !1;
							for (let u = 0; u < h; u++) {
								let p = r[u];
								p.face !== a && ((s = u), (a = p.face));
								let f,
									d = u,
									g = C(r, u, a);
								f = d + g < h && r[d + g].face === a ? d + g : s;
								let y = C(r, f, a);
								l = null;
								for (let e = f; e < f + y; e++) {
									let t = r[e];
									if (t.face === a && i[t.id].face === i[p.id].face) {
										l = t;
										break;
									}
								}
								if (null === l) continue;
								let m = p.edge_after,
									v = l.edge_before;
								if (m.bv !== L || v.bv == L)
									if (m.bv == L || v.bv !== L) {
										if (
											(m.bv === L && v.bv === L && m != v) ||
											(m.bv === j && v.bv === A) ||
											(m.bv === A && v.bv === j)
										) {
											let e = m.next;
											for (; e != v; )
												(e.bvStart = void 0),
													(e.bvEnd = void 0),
													(e.bv = void 0),
													e.setInclusion(t),
													(e = e.next);
										}
										if (m.bv !== L || v.bv !== L || m == v) {
											if ((m.bv === j && v.bv === A) || (m.bv === A && v.bv === j)) {
												let r = m;
												for (; r != v; ) {
													if (r.bvStart === m.bv && r.bvEnd === v.bv) {
														let [a, s] = r.shape.distanceTo(t);
														if (a < 10 * S.DP_TOL) {
															P(r, s.ps, n);
															let a = n[n.length - 1];
															if (a.is_vertex & W)
																(a.edge_after = r),
																	(a.edge_before = r.prev),
																	(r.bvStart = L),
																	(r.bv = void 0),
																	r.setInclusion(t);
															else if (a.is_vertex & z)
																(a.edge_after = r.next),
																	(r.bvEnd = L),
																	(r.bv = void 0),
																	r.setInclusion(t);
															else {
																let e = t.addVertex(a.pt, r);
																(a.edge_before = e),
																	(a.edge_after = e.next),
																	e.setInclusion(t),
																	(e.next.bvStart = L),
																	(e.next.bvEnd = void 0),
																	(e.next.bv = void 0),
																	e.next.setInclusion(t);
															}
															let l = t.findEdgeByPoint(s.pe);
															P(l, s.pe, i);
															let h = i[i.length - 1];
															if (h.is_vertex & W) (h.edge_after = l), (h.edge_before = l.prev);
															else if (h.is_vertex & z) h.edge_after = l.next;
															else {
																let n = i.find((e) => e.edge_after === l),
																	r = t.addVertex(h.pt, l);
																(h.edge_before = r),
																	(h.edge_after = r.next),
																	n && (n.edge_after = r),
																	(r.bvStart = void 0),
																	(r.bvEnd = L),
																	(r.bv = void 0),
																	r.setInclusion(e),
																	(r.next.bvStart = L),
																	(r.next.bvEnd = void 0),
																	(r.next.bv = void 0),
																	r.next.setInclusion(e);
															}
															x(o), (c = !0);
															break;
														}
													}
													r = r.next;
												}
												if (c) break;
												throw w.UNRESOLVED_BOUNDARY_CONFLICT;
											}
										} else {
											let e,
												t = m.next;
											for (; t != v; ) {
												if (t.bv != L)
													if (void 0 === e) e = t.bv;
													else if (t.bv != e) throw w.UNRESOLVED_BOUNDARY_CONFLICT;
												t = t.next;
											}
											null != e && ((m.bv = e), (v.bv = e));
										}
									} else v.bv = m.bv;
								else m.bv = v.bv;
							}
							return c;
						}
						function ee(e, t, n, r) {
							if (!n) return;
							let i,
								o,
								a = void 0,
								s = void 0;
							for (let l = 0; l < n.length; l++) {
								if (((i = n[l]), i.face !== a && ((s = l), (a = i.face)), a.isEmpty())) continue;
								let h,
									c = l,
									u = C(n, l, a);
								(h = c + u < n.length && n[c + u].face === i.face ? c + u : s), (o = n[h]);
								let p = h,
									f = C(n, p, a),
									d = i.edge_after,
									g = o.edge_before;
								if (
									(d.bv === j && g.bv === j && 1 === t) ||
									(d.bv === A && g.bv === A && 2 === t) ||
									((d.bv === A || g.bv === A) && 3 === t && !r) ||
									((d.bv === j || g.bv === j) && 3 === t && r) ||
									(d.bv === L && g.bv === L && d.overlap & H && r) ||
									(d.bv === L && g.bv === L && d.overlap & R)
								) {
									e.removeChain(a, d, g);
									for (let e = c; e < c + u; e++) n[e].edge_after = void 0;
									for (let e = p; e < p + f; e++) n[e].edge_before = void 0;
								}
								l += u - 1;
							}
						}
						function te(e, t) {
							for (let n of t)
								e.faces.delete(n.face),
									(n.face = void 0),
									n.edge_before && (n.edge_before.face = void 0),
									n.edge_after && (n.edge_after.face = void 0);
						}
						function ne(e, t, n) {
							for (let r of t) {
								if (void 0 === r.edge_before || void 0 === r.edge_after) continue;
								if (r.face) continue;
								if (r.edge_after.face || r.edge_before.face) continue;
								let i = r.edge_after,
									o = r.edge_before;
								_.testInfiniteLoop(i);
								let a = e.addFace(i, o);
								for (let e of t)
									e.edge_before &&
										e.edge_after &&
										e.edge_before.face === a &&
										e.edge_after.face === a &&
										(e.face = a);
								for (let e of n)
									e.edge_before &&
										e.edge_after &&
										e.edge_before.face === a &&
										e.edge_after.face === a &&
										(e.face = a);
							}
						}
						function re(e, t, n, r) {
							for (let i of t) {
								let t = i.first.bv;
								((1 === n && t === j) ||
									(3 === n && t === j && r) ||
									(3 === n && t === A && !r) ||
									(2 === n && t === A)) &&
									e.deleteFace(i);
							}
						}
						var ie = Object.freeze({
							BOOLEAN_UNION: 1,
							BOOLEAN_INTERSECT: 2,
							BOOLEAN_SUBTRACT: 3,
							unify: function (e, t) {
								let [n, r] = Y(e, t, 1, !0);
								return n;
							},
							subtract: N,
							intersect: U,
							innerClip: J,
							outerClip: V,
							calculateIntersections: G,
							removeNotRelevantChains: ee,
							removeOldFaces: te,
							restoreFaces: ne,
						});
						const oe = RegExp('T.F..FFF.|T.F...F..'),
							ae = RegExp('T........|.T.......|...T.....|....T....'),
							se = RegExp('FT.......|F..T.....|F...T....'),
							le = RegExp('T.F..F...'),
							he = RegExp('T.F..F...|.TF..F...|..FT.F...|..F.TF...');
						class ce {
							constructor() {
								this.m = new Array(9).fill(void 0);
							}
							get I2I() {
								return this.m[0];
							}
							set I2I(e) {
								this.m[0] = e;
							}
							get I2B() {
								return this.m[1];
							}
							set I2B(e) {
								this.m[1] = e;
							}
							get I2E() {
								return this.m[2];
							}
							set I2E(e) {
								this.m[2] = e;
							}
							get B2I() {
								return this.m[3];
							}
							set B2I(e) {
								this.m[3] = e;
							}
							get B2B() {
								return this.m[4];
							}
							set B2B(e) {
								this.m[4] = e;
							}
							get B2E() {
								return this.m[5];
							}
							set B2E(e) {
								this.m[5] = e;
							}
							get E2I() {
								return this.m[6];
							}
							set E2I(e) {
								this.m[6] = e;
							}
							get E2B() {
								return this.m[7];
							}
							set E2B(e) {
								this.m[7] = e;
							}
							get E2E() {
								return this.m[8];
							}
							set E2E(e) {
								this.m[8] = e;
							}
							toString() {
								return this.m
									.map((e) =>
										e instanceof Array && e.length > 0
											? 'T'
											: e instanceof Array && 0 === e.length
											? 'F'
											: '*',
									)
									.join('');
							}
							equal() {
								return oe.test(this.toString());
							}
							intersect() {
								return ae.test(this.toString());
							}
							touch() {
								return se.test(this.toString());
							}
							inside() {
								return le.test(this.toString());
							}
							covered() {
								return he.test(this.toString());
							}
						}
						function ue(e, t) {
							let n = [],
								[r, i, o] = e.standard,
								[a, s, l] = t.standard,
								h = r * s - i * a,
								c = o * s - i * l,
								u = r * l - o * a;
							if (!S.Utils.EQ_0(h)) {
								let e, t;
								0 === i
									? ((e = o / r), (t = u / h))
									: 0 === s
									? ((e = l / a), (t = u / h))
									: 0 === r
									? ((e = c / h), (t = o / i))
									: 0 === a
									? ((e = c / h), (t = l / s))
									: ((e = c / h), (t = u / h)),
									n.push(new S.Point(e, t));
							}
							return n;
						}
						function pe(e, t) {
							let n = [],
								r = t.pc.projectionOn(e),
								i = t.pc.distanceTo(r)[0];
							if (S.Utils.EQ(i, t.r)) n.push(r);
							else if (S.Utils.LT(i, t.r)) {
								let o,
									a,
									s = Math.sqrt(t.r * t.r - i * i);
								(o = e.norm.rotate90CCW().multiply(s)),
									(a = r.translate(o)),
									n.push(a),
									(o = e.norm.rotate90CW().multiply(s)),
									(a = r.translate(o)),
									n.push(a);
							}
							return n;
						}
						function fe(e, t) {
							let n = [];
							for (let r of t.toSegments()) {
								let t = ge(r, e);
								for (let e of t) ke(e, n) || n.push(e);
							}
							return n;
						}
						function de(e, t) {
							let n = [];
							if (0 === fe(e, t.box).length) return n;
							let r = pe(e, new S.Circle(t.pc, t.r));
							for (let i of r) i.on(t) && n.push(i);
							return n;
						}
						function ge(e, t) {
							let n = [];
							return (
								e.ps.on(t) && n.push(e.ps),
								e.pe.on(t) && !e.isZeroLength() && n.push(e.pe),
								n.length > 0 ||
								e.isZeroLength() ||
								(e.ps.leftTo(t) && e.pe.leftTo(t)) ||
								(!e.ps.leftTo(t) && !e.pe.leftTo(t))
									? n
									: ue(new S.Line(e.ps, e.pe), t)
							);
						}
						function ye(e, t) {
							let n = [];
							if (e.box.not_intersect(t.box)) return n;
							if (e.isZeroLength()) return e.ps.on(t) && n.push(e.ps), n;
							if (t.isZeroLength()) return t.ps.on(e) && n.push(t.ps), n;
							let r = new S.Line(e.ps, e.pe),
								i = new S.Line(t.ps, t.pe);
							if (r.incidentTo(i))
								e.ps.on(t) && n.push(e.ps),
									e.pe.on(t) && n.push(e.pe),
									!t.ps.on(e) || t.ps.equalTo(e.ps) || t.ps.equalTo(e.pe) || n.push(t.ps),
									!t.pe.on(e) || t.pe.equalTo(e.ps) || t.pe.equalTo(e.pe) || n.push(t.pe);
							else {
								let o = ue(r, i);
								o.length > 0 && o[0].on(e) && o[0].on(t) && n.push(o[0]);
							}
							return n;
						}
						function me(e, t) {
							let n = [];
							if (e.box.not_intersect(t.box)) return n;
							if (e.isZeroLength()) {
								let [r, i] = e.ps.distanceTo(t.pc);
								return S.Utils.EQ(r, t.r) && n.push(e.ps), n;
							}
							let r = pe(new S.Line(e.ps, e.pe), t);
							for (let i of r) i.on(e) && n.push(i);
							return n;
						}
						function ve(e, t) {
							let n = [];
							if (e.box.not_intersect(t.box)) return n;
							if (e.isZeroLength()) return e.ps.on(t) && n.push(e.ps), n;
							let r = pe(new S.Line(e.ps, e.pe), new S.Circle(t.pc, t.r));
							for (let i of r) i.on(e) && i.on(t) && n.push(i);
							return n;
						}
						function we(e, t) {
							let n = [];
							if (e.box.not_intersect(t.box)) return n;
							let r = new S.Vector(e.pc, t.pc),
								i = e.r,
								o = t.r;
							if (S.Utils.EQ_0(i) || S.Utils.EQ_0(o)) return n;
							if (S.Utils.EQ_0(r.x) && S.Utils.EQ_0(r.y) && S.Utils.EQ(i, o))
								return n.push(e.pc.translate(-i, 0)), n;
							let a,
								s = e.pc.distanceTo(t.pc)[0];
							if (S.Utils.GT(s, i + o)) return n;
							if (S.Utils.LT(s, Math.abs(i - o))) return n;
							if (((r.x /= s), (r.y /= s), S.Utils.EQ(s, i + o) || S.Utils.EQ(s, Math.abs(i - o))))
								return (a = e.pc.translate(i * r.x, i * r.y)), n.push(a), n;
							let l = (i * i) / (2 * s) - (o * o) / (2 * s) + s / 2,
								h = e.pc.translate(l * r.x, l * r.y),
								c = Math.sqrt(i * i - l * l);
							return (
								(a = h.translate(r.rotate90CCW().multiply(c))),
								n.push(a),
								(a = h.translate(r.rotate90CW().multiply(c))),
								n.push(a),
								n
							);
						}
						function be(e, t) {
							var n = [];
							if (e.box.not_intersect(t.box)) return n;
							if (e.pc.equalTo(t.pc) && S.Utils.EQ(e.r, t.r)) {
								let r;
								return (
									(r = e.start),
									r.on(t) && n.push(r),
									(r = e.end),
									r.on(t) && n.push(r),
									(r = t.start),
									r.on(e) && n.push(r),
									(r = t.end),
									r.on(e) && n.push(r),
									n
								);
							}
							let r = new S.Circle(e.pc, e.r),
								i = new S.Circle(t.pc, t.r),
								o = r.intersect(i);
							for (let a of o) a.on(e) && a.on(t) && n.push(a);
							return n;
						}
						function Se(e, t) {
							let n = [];
							if (e.box.not_intersect(t.box)) return n;
							if (t.pc.equalTo(e.pc) && S.Utils.EQ(t.r, e.r))
								return n.push(e.start), n.push(e.end), n;
							let r = we(t, new S.Circle(e.pc, e.r));
							for (let i of r) i.on(e) && n.push(i);
							return n;
						}
						function _e(e, t) {
							return e.isSegment() ? ye(e.shape, t) : ve(t, e.shape);
						}
						function Pe(e, t) {
							return e.isSegment() ? ve(e.shape, t) : be(e.shape, t);
						}
						function xe(e, t) {
							return e.isSegment() ? ge(e.shape, t) : de(t, e.shape);
						}
						function De(e, t) {
							return e.isSegment() ? me(e.shape, t) : Se(e.shape, t);
						}
						function Te(e, t) {
							let n = [];
							for (let r of t.edges) for (let t of _e(r, e)) n.push(t);
							return n;
						}
						function Oe(e, t) {
							let n = [];
							for (let r of t.edges) for (let t of Pe(r, e)) n.push(t);
							return n;
						}
						function Me(e, t) {
							let n = [];
							if (t.isEmpty()) return n;
							for (let r of t.edges) for (let t of xe(r, e)) ke(t, n) || n.push(t);
							return e.sortPoints(n);
						}
						function Ee(e, t) {
							let n = [];
							if (t.isEmpty()) return n;
							for (let r of t.edges) for (let t of De(r, e)) n.push(t);
							return n;
						}
						function Ie(e, t) {
							const n = e.shape,
								r = t.shape;
							return e.isSegment()
								? t.isSegment()
									? ye(n, r)
									: ve(n, r)
								: t.isSegment()
								? ve(r, n)
								: be(n, r);
						}
						function Ce(e, t) {
							let n = [];
							if (t.isEmpty() || e.shape.box.not_intersect(t.box)) return n;
							let r = t.edges.search(e.shape.box);
							for (let i of r) for (let t of Ie(e, i)) n.push(t);
							return n;
						}
						function ke(e, t) {
							return t.some((t) => t.equalTo(e));
						}
						class Fe extends _ {
							constructor(...e) {
								if ((super(), 0 !== e.length && 1 == e.length && e[0] instanceof Array)) {
									let t = e[0];
									if (0 == t.length) return;
									t.every(
										(e) =>
											e instanceof S.Segment ||
											e instanceof S.Arc ||
											e instanceof S.Ray ||
											e instanceof S.Line,
									);
									for (let e of t) {
										let t = new S.Edge(e);
										this.append(t);
									}
								}
							}
							get edges() {
								return [...this];
							}
							get box() {
								return this.edges.reduce((e, t) => e.merge(t.box), new S.Box());
							}
							get vertices() {
								let e = this.edges.map((e) => e.start);
								return e.push(this.last.end), e;
							}
							clone() {
								return new Fe(this.toShapes());
							}
							addVertex(e, t) {
								let n = t.shape.split(e);
								if (null === n[0]) return t.prev;
								if (null === n[1]) return t;
								let r = new S.Edge(n[0]),
									i = t.prev;
								return this.insert(r, i), (t.shape = n[1]), r;
							}
							split(e) {
								for (let t of e) {
									let e = this.findEdgeByPoint(t);
									this.addVertex(t, e);
								}
								return this;
							}
							findEdgeByPoint(e) {
								let t;
								for (let n of this)
									if (n.shape.contains(e)) {
										t = n;
										break;
									}
								return t;
							}
							translate(e) {
								return new Fe(this.edges.map((t) => t.shape.translate(e)));
							}
							rotate(e = 0, t = new S.Point()) {
								return new Fe(this.edges.map((n) => n.shape.rotate(e, t)));
							}
							transform(e = new S.Matrix()) {
								return new Fe(this.edges.map((t) => t.shape.transform(e)));
							}
							toShapes() {
								return this.edges.map((e) => e.shape.clone());
							}
							toJSON() {
								return this.edges.map((e) => e.toJSON());
							}
							svg(e = {}) {
								let {
										stroke: t,
										strokeWidth: n,
										fill: r,
										fillRule: i,
										fillOpacity: o,
										id: a,
										className: s,
									} = e,
									l = `\n<path stroke="${t || 'black'}" stroke-width="${n || 1}" fill="${
										r || 'none'
									}" fill-opacity="${o || 1}" ${a && a.length > 0 ? `id="${a}"` : ''} ${
										s && s.length > 0 ? `class="${s}"` : ''
									} d="`;
								l += `\nM${this.first.start.x},${this.first.start.y}`;
								for (let h of this) l += h.svg();
								return (l += '" >\n</path>'), l;
							}
						}
						S.Multiline = Fe;
						const je = (...e) => new S.Multiline(...e);
						function Ae(e, t) {
							let n = void 0,
								r = new S.Ray(t),
								i = new S.Line(r.pt, r.norm);
							const o = new S.Box(
								r.box.xmin - S.DP_TOL,
								r.box.ymin - S.DP_TOL,
								r.box.xmax,
								r.box.ymax + S.DP_TOL,
							);
							if (e.box.not_intersect(o)) return S.OUTSIDE;
							let a = e.edges.search(o);
							if (0 == a.length) return S.OUTSIDE;
							for (let s of a) if (s.shape.contains(t)) return S.BOUNDARY;
							let h = [];
							for (let s of a)
								for (let e of r.intersect(s.shape)) {
									if (e.equalTo(t)) return S.BOUNDARY;
									h.push({
										pt: e,
										edge: s,
									});
								}
							h.sort((e, t) => (m(e.pt.x, t.pt.x) ? -1 : y(e.pt.x, t.pt.x) ? 1 : 0));
							let c = 0;
							for (let s = 0; s < h.length; s++) {
								let e = h[s];
								if (e.pt.equalTo(e.edge.shape.start)) {
									if (s > 0 && e.pt.equalTo(h[s - 1].pt) && e.edge.prev === h[s - 1].edge) continue;
									let t = e.edge.prev;
									for (; d(t.length); ) t = t.prev;
									let n = t.shape.tangentInEnd(),
										r = e.pt.translate(n),
										o = e.edge.shape.tangentInStart(),
										a = e.pt.translate(o),
										l = r.leftTo(i),
										u = a.leftTo(i);
									((l && !u) || (!l && u)) && c++;
								} else if (e.pt.equalTo(e.edge.shape.end)) {
									if (s > 0 && e.pt.equalTo(h[s - 1].pt) && e.edge.next === h[s - 1].edge) continue;
									let t = e.edge.next;
									for (; d(t.length); ) t = t.next;
									let n = t.shape.tangentInStart(),
										r = e.pt.translate(n),
										o = e.edge.shape.tangentInEnd(),
										a = e.pt.translate(o),
										l = r.leftTo(i),
										u = a.leftTo(i);
									((l && !u) || (!l && u)) && c++;
								} else if (e.edge.shape instanceof S.Segment) c++;
								else {
									let t = e.edge.shape.box;
									g(e.pt.y, t.ymin) || g(e.pt.y, t.ymax) || c++;
								}
							}
							return (n = c % 2 == 1 ? s : l), n;
						}
						function Le(e, t) {
							return We(e, t).intersect();
						}
						function He(e, t) {
							return We(e, t).inside();
						}
						function Re(e, t) {
							return We(e, t).covered();
						}
						function Be(e, t) {
							return Re(t, e);
						}
						function We(e, t) {
							return e instanceof S.Line && t instanceof S.Line
								? (function (e, t) {
										let n = new ce(),
											r = ue(e, t);
										return (
											0 === r.length
												? e.contains(t.pt) && t.contains(e.pt)
													? ((n.I2I = [e]), (n.I2E = []), (n.E2I = []))
													: ((n.I2I = []), (n.I2E = [e]), (n.E2I = [t]))
												: ((n.I2I = r), (n.I2E = e.split(r)), (n.E2I = t.split(r))),
											n
										);
								  })(e, t)
								: e instanceof S.Line && t instanceof S.Circle
								? (function (e, t) {
										let n = new ce(),
											r = pe(e, t);
										if (0 === r.length) (n.I2I = []), (n.I2B = []), (n.I2E = [e]), (n.E2I = [t]);
										else if (1 === r.length)
											(n.I2I = []), (n.I2B = r), (n.I2E = e.split(r)), (n.E2I = [t]);
										else {
											let i = new Fe([e]),
												o = e.sortPoints(r);
											i.split(o);
											let a = i.toShapes();
											(n.I2I = [a[1]]),
												(n.I2B = o),
												(n.I2E = [a[0], a[2]]),
												(n.E2I = new S.Polygon([t.toArc()]).cut(i));
										}
										return n;
								  })(e, t)
								: e instanceof S.Line && t instanceof S.Box
								? (function (e, t) {
										let n = new ce(),
											r = fe(e, t);
										if (0 === r.length) (n.I2I = []), (n.I2B = []), (n.I2E = [e]), (n.E2I = [t]);
										else if (1 === r.length)
											(n.I2I = []), (n.I2B = r), (n.I2E = e.split(r)), (n.E2I = [t]);
										else {
											let i = new Fe([e]),
												o = e.sortPoints(r);
											i.split(o);
											let a = i.toShapes();
											t.toSegments().some((e) => e.contains(r[0]) && e.contains(r[1]))
												? ((n.I2I = []), (n.I2B = [a[1]]), (n.I2E = [a[0], a[2]]), (n.E2I = [t]))
												: ((n.I2I = [a[1]]),
												  (n.I2B = o),
												  (n.I2E = [a[0], a[2]]),
												  (n.E2I = new S.Polygon(t.toSegments()).cut(i)));
										}
										return n;
								  })(e, t)
								: e instanceof S.Line && t instanceof S.Polygon
								? (function (e, t) {
										let n = new ce(),
											r = Me(e, t),
											i = new Fe([e]),
											o = r.length > 0 ? r.slice() : e.sortPoints(r);
										return (
											i.split(o),
											[...i].forEach((e) => e.setInclusion(t)),
											(n.I2I = [...i].filter((e) => e.bv === S.INSIDE).map((e) => e.shape)),
											(n.I2B = [...i]
												.slice(1)
												.map((e) => (e.bv === S.BOUNDARY ? e.shape : e.shape.start))),
											(n.I2E = [...i].filter((e) => e.bv === S.OUTSIDE).map((e) => e.shape)),
											(n.E2I = t.cut(i)),
											n
										);
								  })(e, t)
								: (e instanceof S.Segment || e instanceof S.Arc) && t instanceof S.Polygon
								? ze(e, t)
								: (e instanceof S.Segment || e instanceof S.Arc) &&
								  (t instanceof S.Circle || t instanceof S.Box)
								? ze(e, new S.Polygon(t))
								: e instanceof S.Polygon && t instanceof S.Polygon
								? Ne(e, t)
								: (e instanceof S.Circle || e instanceof S.Box) &&
								  (t instanceof S.Circle || t instanceof S.Box)
								? Ne(new S.Polygon(e), new S.Polygon(t))
								: (e instanceof S.Circle || e instanceof S.Box) && t instanceof S.Polygon
								? Ne(new S.Polygon(e), t)
								: e instanceof S.Polygon && (t instanceof S.Circle || t instanceof S.Box)
								? Ne(e, new S.Polygon(t))
								: void 0;
						}
						function ze(e, t) {
							let n = new ce(),
								r = (function (e, t) {
									return e instanceof S.Line
										? Me(e, t)
										: e instanceof S.Segment
										? Te(e, t)
										: e instanceof S.Arc
										? Oe(e, t)
										: [];
								})(e, t),
								i = r.length > 0 ? r.slice() : e.sortPoints(r),
								o = new Fe([e]);
							o.split(i),
								[...o].forEach((e) => e.setInclusion(t)),
								(n.I2I = [...o].filter((e) => e.bv === S.INSIDE).map((e) => e.shape)),
								(n.I2B = [...o]
									.slice(1)
									.map((e) => (e.bv === S.BOUNDARY ? e.shape : e.shape.start))),
								(n.I2E = [...o].filter((e) => e.bv === S.OUTSIDE).map((e) => e.shape)),
								(n.B2I = []),
								(n.B2B = []),
								(n.B2E = []);
							for (let a of [e.start, e.end])
								switch (Ae(t, a)) {
									case S.INSIDE:
										n.B2I.push(a);
										break;
									case S.BOUNDARY:
										n.B2B.push(a);
										break;
									case S.OUTSIDE:
										n.B2E.push(a);
								}
							return n;
						}
						function Ne(e, t) {
							let n = new ce(),
								[r, i] = G(e, t),
								o = U(e, t),
								a = N(e, t),
								s = N(t, e),
								[l, h] = J(e, t),
								c = V(e, t),
								u = V(t, e);
							return (
								(n.I2I = o.isEmpty() ? [] : [o]),
								(n.I2B = h),
								(n.I2E = a.isEmpty() ? [] : [a]),
								(n.B2I = l),
								(n.B2B = r),
								(n.B2E = c),
								(n.E2I = s.isEmpty() ? [] : [s]),
								(n.E2B = u),
								n
							);
						}
						S.multiline = je;
						var Ue = Object.freeze({
							equal: function (e, t) {
								return We(e, t).equal();
							},
							intersect: Le,
							touch: function (e, t) {
								return We(e, t).touch();
							},
							disjoint: function (e, t) {
								return !Le(e, t);
							},
							inside: He,
							covered: Re,
							contain: function (e, t) {
								return He(t, e);
							},
							cover: Be,
							relate: We,
						});
						class Je {
							constructor(e = 1, t = 0, n = 0, r = 1, i = 0, o = 0) {
								(this.a = e),
									(this.b = t),
									(this.c = n),
									(this.d = r),
									(this.tx = i),
									(this.ty = o);
							}
							clone() {
								return new Je(this.a, this.b, this.c, this.d, this.tx, this.ty);
							}
							transform(e) {
								return [
									e[0] * this.a + e[1] * this.c + this.tx,
									e[0] * this.b + e[1] * this.d + this.ty,
								];
							}
							multiply(e) {
								return new Je(
									this.a * e.a + this.c * e.b,
									this.b * e.a + this.d * e.b,
									this.a * e.c + this.c * e.d,
									this.b * e.c + this.d * e.d,
									this.a * e.tx + this.c * e.ty + this.tx,
									this.b * e.tx + this.d * e.ty + this.ty,
								);
							}
							translate(...e) {
								let t, n;
								if (1 == e.length && e[0] instanceof S.Vector) (t = e[0].x), (n = e[0].y);
								else {
									if (2 != e.length || 'number' != typeof e[0] || 'number' != typeof e[1])
										throw S.Errors.ILLEGAL_PARAMETERS;
									(t = e[0]), (n = e[1]);
								}
								return this.multiply(new Je(1, 0, 0, 1, t, n));
							}
							rotate(e) {
								let t = Math.cos(e),
									n = Math.sin(e);
								return this.multiply(new Je(t, n, -n, t, 0, 0));
							}
							scale(e, t) {
								return this.multiply(new Je(e, 0, 0, t, 0, 0));
							}
							equalTo(e) {
								return (
									!!S.Utils.EQ(this.tx, e.tx) &&
									!!S.Utils.EQ(this.ty, e.ty) &&
									!!S.Utils.EQ(this.a, e.a) &&
									!!S.Utils.EQ(this.b, e.b) &&
									!!S.Utils.EQ(this.c, e.c) &&
									!!S.Utils.EQ(this.d, e.d)
								);
							}
						}
						S.Matrix = Je;
						const Ve = (...e) => new S.Matrix(...e);
						S.matrix = Ve;
						class Ge {
							constructor(e, t, n = null, r = null, i = null, o = 1) {
								(this.left = n),
									(this.right = r),
									(this.parent = i),
									(this.color = o),
									(this.item = {
										key: e,
										value: t,
									}),
									e &&
										e instanceof Array &&
										2 == e.length &&
										(Number.isNaN(e[0]) ||
											Number.isNaN(e[1]) ||
											(this.item.key = new (class e {
												constructor(e, t) {
													(this.low = e), (this.high = t);
												}
												clone() {
													return new e(this.low, this.high);
												}
												get max() {
													return this.clone();
												}
												less_than(e) {
													return this.low < e.low || (this.low == e.low && this.high < e.high);
												}
												equal_to(e) {
													return this.low == e.low && this.high == e.high;
												}
												intersect(e) {
													return !this.not_intersect(e);
												}
												not_intersect(e) {
													return this.high < e.low || e.high < this.low;
												}
												merge(t) {
													return new e(
														void 0 === this.low ? t.low : Math.min(this.low, t.low),
														void 0 === this.high ? t.high : Math.max(this.high, t.high),
													);
												}
												output() {
													return [this.low, this.high];
												}
												static comparable_max(e, t) {
													return e.merge(t);
												}
												static comparable_less_than(e, t) {
													return e < t;
												}
											})(Math.min(e[0], e[1]), Math.max(e[0], e[1])))),
									(this.max = this.item.key ? this.item.key.max : void 0);
							}
							isNil() {
								return (
									void 0 === this.item.key &&
									void 0 === this.item.value &&
									null === this.left &&
									null === this.right &&
									1 === this.color
								);
							}
							less_than(e) {
								if (this.item.value === this.item.key && e.item.value === e.item.key)
									return this.item.key.less_than(e.item.key);
								{
									let t =
										this.item.value && e.item.value && this.item.value.less_than
											? this.item.value.less_than(e.item.value)
											: this.item.value < e.item.value;
									return (
										this.item.key.less_than(e.item.key) || (this.item.key.equal_to(e.item.key) && t)
									);
								}
							}
							equal_to(e) {
								if (this.item.value === this.item.key && e.item.value === e.item.key)
									return this.item.key.equal_to(e.item.key);
								{
									let t =
										this.item.value && e.item.value && this.item.value.equal_to
											? this.item.value.equal_to(e.item.value)
											: this.item.value == e.item.value;
									return this.item.key.equal_to(e.item.key) && t;
								}
							}
							intersect(e) {
								return this.item.key.intersect(e.item.key);
							}
							copy_data(e) {
								(this.item.key = e.item.key.clone()),
									(this.item.value =
										e.item.value && e.item.value.clone ? e.item.value.clone() : e.item.value);
							}
							update_max() {
								if (
									((this.max = this.item.key ? this.item.key.max : void 0),
									this.right && this.right.max)
								) {
									const e = this.item.key.constructor.comparable_max;
									this.max = e(this.max, this.right.max);
								}
								if (this.left && this.left.max) {
									const e = this.item.key.constructor.comparable_max;
									this.max = e(this.max, this.left.max);
								}
							}
							not_intersect_left_subtree(e) {
								return (0, this.item.key.constructor.comparable_less_than)(
									void 0 !== this.left.max.high ? this.left.max.high : this.left.max,
									e.item.key.low,
								);
							}
							not_intersect_right_subtree(e) {
								const t = this.item.key.constructor.comparable_less_than;
								let n =
									void 0 !== this.right.max.low ? this.right.max.low : this.right.item.key.low;
								return t(e.item.key.high, n);
							}
						}
						class qe {
							constructor() {
								(this.root = null), (this.nil_node = new Ge());
							}
							get size() {
								let e = 0;
								return this.tree_walk(this.root, () => e++), e;
							}
							get keys() {
								let e = [];
								return (
									this.tree_walk(this.root, (t) =>
										e.push(t.item.key.output ? t.item.key.output() : t.item.key),
									),
									e
								);
							}
							get values() {
								let e = [];
								return this.tree_walk(this.root, (t) => e.push(t.item.value)), e;
							}
							get items() {
								let e = [];
								return (
									this.tree_walk(this.root, (t) =>
										e.push({
											key: t.item.key.output ? t.item.key.output() : t.item.key,
											value: t.item.value,
										}),
									),
									e
								);
							}
							isEmpty() {
								return null == this.root || this.root == this.nil_node;
							}
							insert(e, t = e) {
								if (void 0 === e) return;
								let n = new Ge(e, t, this.nil_node, this.nil_node, null, 0);
								return this.tree_insert(n), this.recalc_max(n), n;
							}
							exist(e, t = e) {
								let n = new Ge(e, t);
								return !!this.tree_search(this.root, n);
							}
							remove(e, t = e) {
								let n = new Ge(e, t),
									r = this.tree_search(this.root, n);
								return r && this.tree_delete(r), r;
							}
							search(e, t = (e, t) => (e === t ? t.output() : e)) {
								let n = new Ge(e),
									r = [];
								return (
									this.tree_search_interval(this.root, n, r),
									r.map((e) => t(e.item.value, e.item.key))
								);
							}
							intersect_any(e) {
								let t = new Ge(e);
								return this.tree_find_any_interval(this.root, t);
							}
							forEach(e) {
								this.tree_walk(this.root, (t) => e(t.item.key, t.item.value));
							}
							map(e) {
								const t = new qe();
								return (
									this.tree_walk(this.root, (n) =>
										t.insert(n.item.key, e(n.item.value, n.item.key)),
									),
									t
								);
							}
							recalc_max(e) {
								let t = e;
								for (; null != t.parent; ) t.parent.update_max(), (t = t.parent);
							}
							tree_insert(e) {
								let t = this.root,
									n = null;
								if (null == this.root || this.root == this.nil_node) this.root = e;
								else {
									for (; t != this.nil_node; ) (n = t), (t = e.less_than(t) ? t.left : t.right);
									(e.parent = n), e.less_than(n) ? (n.left = e) : (n.right = e);
								}
								this.insert_fixup(e);
							}
							insert_fixup(e) {
								let t, n;
								for (t = e; t != this.root && 0 == t.parent.color; )
									t.parent == t.parent.parent.left
										? ((n = t.parent.parent.right),
										  0 == n.color
												? ((t.parent.color = 1),
												  (n.color = 1),
												  (t.parent.parent.color = 0),
												  (t = t.parent.parent))
												: (t == t.parent.right && ((t = t.parent), this.rotate_left(t)),
												  (t.parent.color = 1),
												  (t.parent.parent.color = 0),
												  this.rotate_right(t.parent.parent)))
										: ((n = t.parent.parent.left),
										  0 == n.color
												? ((t.parent.color = 1),
												  (n.color = 1),
												  (t.parent.parent.color = 0),
												  (t = t.parent.parent))
												: (t == t.parent.left && ((t = t.parent), this.rotate_right(t)),
												  (t.parent.color = 1),
												  (t.parent.parent.color = 0),
												  this.rotate_left(t.parent.parent)));
								this.root.color = 1;
							}
							tree_delete(e) {
								let t, n;
								(t =
									e.left == this.nil_node || e.right == this.nil_node ? e : this.tree_successor(e)),
									(n = t.left != this.nil_node ? t.left : t.right),
									(n.parent = t.parent),
									t == this.root
										? (this.root = n)
										: (t == t.parent.left ? (t.parent.left = n) : (t.parent.right = n),
										  t.parent.update_max()),
									this.recalc_max(n),
									t != e && (e.copy_data(t), e.update_max(), this.recalc_max(e)),
									1 == t.color && this.delete_fixup(n);
							}
							delete_fixup(e) {
								let t,
									n = e;
								for (; n != this.root && null != n.parent && 1 == n.color; )
									n == n.parent.left
										? ((t = n.parent.right),
										  0 == t.color &&
												((t.color = 1),
												(n.parent.color = 0),
												this.rotate_left(n.parent),
												(t = n.parent.right)),
										  1 == t.left.color && 1 == t.right.color
												? ((t.color = 0), (n = n.parent))
												: (1 == t.right.color &&
														((t.color = 0),
														(t.left.color = 1),
														this.rotate_right(t),
														(t = n.parent.right)),
												  (t.color = n.parent.color),
												  (n.parent.color = 1),
												  (t.right.color = 1),
												  this.rotate_left(n.parent),
												  (n = this.root)))
										: ((t = n.parent.left),
										  0 == t.color &&
												((t.color = 1),
												(n.parent.color = 0),
												this.rotate_right(n.parent),
												(t = n.parent.left)),
										  1 == t.left.color && 1 == t.right.color
												? ((t.color = 0), (n = n.parent))
												: (1 == t.left.color &&
														((t.color = 0),
														(t.right.color = 1),
														this.rotate_left(t),
														(t = n.parent.left)),
												  (t.color = n.parent.color),
												  (n.parent.color = 1),
												  (t.left.color = 1),
												  this.rotate_right(n.parent),
												  (n = this.root)));
								n.color = 1;
							}
							tree_search(e, t) {
								if (null != e && e != this.nil_node)
									return t.equal_to(e)
										? e
										: t.less_than(e)
										? this.tree_search(e.left, t)
										: this.tree_search(e.right, t);
							}
							tree_search_interval(e, t, n) {
								null != e &&
									e != this.nil_node &&
									(e.left == this.nil_node ||
										e.not_intersect_left_subtree(t) ||
										this.tree_search_interval(e.left, t, n),
									e.intersect(t) && n.push(e),
									e.right == this.nil_node ||
										e.not_intersect_right_subtree(t) ||
										this.tree_search_interval(e.right, t, n));
							}
							tree_find_any_interval(e, t) {
								let n = !1;
								return (
									null != e &&
										e != this.nil_node &&
										(e.left == this.nil_node ||
											e.not_intersect_left_subtree(t) ||
											(n = this.tree_find_any_interval(e.left, t)),
										n || (n = e.intersect(t)),
										n ||
											e.right == this.nil_node ||
											e.not_intersect_right_subtree(t) ||
											(n = this.tree_find_any_interval(e.right, t))),
									n
								);
							}
							local_minimum(e) {
								let t = e;
								for (; null != t.left && t.left != this.nil_node; ) t = t.left;
								return t;
							}
							local_maximum(e) {
								let t = e;
								for (; null != t.right && t.right != this.nil_node; ) t = t.right;
								return t;
							}
							tree_successor(e) {
								let t, n, r;
								if (e.right != this.nil_node) t = this.local_minimum(e.right);
								else {
									for (n = e, r = e.parent; null != r && r.right == n; ) (n = r), (r = r.parent);
									t = r;
								}
								return t;
							}
							rotate_left(e) {
								let t = e.right;
								(e.right = t.left),
									t.left != this.nil_node && (t.left.parent = e),
									(t.parent = e.parent),
									e == this.root
										? (this.root = t)
										: e == e.parent.left
										? (e.parent.left = t)
										: (e.parent.right = t),
									(t.left = e),
									(e.parent = t),
									null != e && e != this.nil_node && e.update_max(),
									(t = e.parent),
									null != t && t != this.nil_node && t.update_max();
							}
							rotate_right(e) {
								let t = e.left;
								(e.left = t.right),
									t.right != this.nil_node && (t.right.parent = e),
									(t.parent = e.parent),
									e == this.root
										? (this.root = t)
										: e == e.parent.left
										? (e.parent.left = t)
										: (e.parent.right = t),
									(t.right = e),
									(e.parent = t),
									null != e && e != this.nil_node && e.update_max(),
									(t = e.parent),
									null != t && t != this.nil_node && t.update_max();
							}
							tree_walk(e, t) {
								null != e &&
									e != this.nil_node &&
									(this.tree_walk(e.left, t), t(e), this.tree_walk(e.right, t));
							}
							testRedBlackProperty() {
								let e = !0;
								return (
									this.tree_walk(this.root, function (t) {
										0 == t.color && ((1 == t.left.color && 1 == t.right.color) || (e = !1));
									}),
									e
								);
							}
							testBlackHeightProperty(e) {
								let t = 0,
									n = 0,
									r = 0;
								if (
									(1 == e.color && t++,
									(n = e.left != this.nil_node ? this.testBlackHeightProperty(e.left) : 1),
									(r = e.right != this.nil_node ? this.testBlackHeightProperty(e.right) : 1),
									n != r)
								)
									throw new Error('Red-black height property violated');
								return (t += n), t;
							}
						}
						class Ke extends Set {
							constructor(e) {
								super(e), (this.index = new qe()), this.forEach((e) => this.index.insert(e));
							}
							add(e) {
								let t = this.size;
								return super.add(e), this.size > t && this.index.insert(e.box, e), this;
							}
							delete(e) {
								let t = super.delete(e);
								return t && this.index.remove(e.box, e), t;
							}
							clear() {
								super.clear(), (this.index = new qe());
							}
							search(e) {
								return this.index.search(e);
							}
							hit(e) {
								let t = new S.Box(e.x - 1, e.y - 1, e.x + 1, e.y + 1);
								return this.index.search(t).filter((t) => e.on(t));
							}
							svg() {
								return [...this].reduce((e, t) => e + t.svg(), '');
							}
						}
						S.PlanarSet = Ke;
						class Ye {
							constructor(...e) {
								if (((this.x = 0), (this.y = 0), 0 !== e.length)) {
									if (1 === e.length && e[0] instanceof Array && 2 === e[0].length) {
										let t = e[0];
										if ('number' == typeof t[0] && 'number' == typeof t[1])
											return (this.x = t[0]), void (this.y = t[1]);
									}
									if (1 === e.length && e[0] instanceof Object && 'point' === e[0].name) {
										let { x: t, y: n } = e[0];
										return (this.x = t), void (this.y = n);
									}
									if (2 === e.length && 'number' == typeof e[0] && 'number' == typeof e[1])
										return (this.x = e[0]), void (this.y = e[1]);
									throw S.Errors.ILLEGAL_PARAMETERS;
								}
							}
							get box() {
								return new S.Box(this.x, this.y, this.x, this.y);
							}
							clone() {
								return new S.Point(this.x, this.y);
							}
							get vertices() {
								return [this.clone()];
							}
							equalTo(e) {
								return S.Utils.EQ(this.x, e.x) && S.Utils.EQ(this.y, e.y);
							}
							lessThan(e) {
								return (
									!!S.Utils.LT(this.y, e.y) ||
									!(!S.Utils.EQ(this.y, e.y) || !S.Utils.LT(this.x, e.x))
								);
							}
							rotate(
								e,
								t = {
									x: 0,
									y: 0,
								},
							) {
								var n = t.x + (this.x - t.x) * Math.cos(e) - (this.y - t.y) * Math.sin(e),
									r = t.y + (this.x - t.x) * Math.sin(e) + (this.y - t.y) * Math.cos(e);
								return new S.Point(n, r);
							}
							translate(...e) {
								if (
									1 == e.length &&
									(e[0] instanceof S.Vector || (!isNaN(e[0].x) && !isNaN(e[0].y)))
								)
									return new S.Point(this.x + e[0].x, this.y + e[0].y);
								if (2 == e.length && 'number' == typeof e[0] && 'number' == typeof e[1])
									return new S.Point(this.x + e[0], this.y + e[1]);
								throw S.Errors.ILLEGAL_PARAMETERS;
							}
							transform(e) {
								return new S.Point(e.transform([this.x, this.y]));
							}
							projectionOn(e) {
								if (this.equalTo(e.pt)) return this.clone();
								let t = new S.Vector(this, e.pt);
								if (S.Utils.EQ_0(t.cross(e.norm))) return e.pt.clone();
								let n = t.dot(e.norm),
									r = e.norm.multiply(n);
								return this.translate(r);
							}
							leftTo(e) {
								let t = new S.Vector(e.pt, this);
								return S.Utils.GT(t.dot(e.norm), 0);
							}
							distanceTo(e) {
								if (e instanceof Ye) {
									let t = e.x - this.x,
										n = e.y - this.y;
									return [Math.sqrt(t * t + n * n), new S.Segment(this, e)];
								}
								return e instanceof S.Line
									? S.Distance.point2line(this, e)
									: e instanceof S.Circle
									? S.Distance.point2circle(this, e)
									: e instanceof S.Segment
									? S.Distance.point2segment(this, e)
									: e instanceof S.Arc
									? S.Distance.point2arc(this, e)
									: e instanceof S.Polygon
									? S.Distance.point2polygon(this, e)
									: e instanceof S.PlanarSet
									? S.Distance.shape2planarSet(this, e)
									: void 0;
							}
							on(e) {
								return e instanceof S.Point
									? this.equalTo(e)
									: e instanceof S.Line ||
									  e instanceof S.Circle ||
									  e instanceof S.Segment ||
									  e instanceof S.Arc ||
									  e instanceof S.Polygon
									? e.contains(this)
									: void 0;
							}
							toJSON() {
								return Object.assign({}, this, {
									name: 'point',
								});
							}
							svg(e = {}) {
								let { r: t, stroke: n, strokeWidth: r, fill: i, id: o, className: a } = e,
									s = o && o.length > 0 ? `id="${o}"` : '',
									l = a && a.length > 0 ? `class="${a}"` : '';
								return `\n<circle cx="${this.x}" cy="${this.y}" r="${t || 3}" stroke="${
									n || 'black'
								}" stroke-width="${r || 1}" fill="${i || 'red'}" ${s} ${l} />`;
							}
						}
						S.Point = Ye;
						const Qe = (...e) => new S.Point(...e);
						S.point = Qe;
						class Xe {
							constructor(...e) {
								if (((this.x = 0), (this.y = 0), 0 !== e.length)) {
									if (1 === e.length && e[0] instanceof Array && 2 === e[0].length) {
										let t = e[0];
										if ('number' == typeof t[0] && 'number' == typeof t[1])
											return (this.x = t[0]), void (this.y = t[1]);
									}
									if (1 === e.length && e[0] instanceof Object && 'vector' === e[0].name) {
										let { x: t, y: n } = e[0];
										return (this.x = t), void (this.y = n);
									}
									if (2 === e.length) {
										let t = e[0],
											n = e[1];
										if ('number' == typeof t && 'number' == typeof n)
											return (this.x = t), void (this.y = n);
										if (t instanceof S.Point && n instanceof S.Point)
											return (this.x = n.x - t.x), void (this.y = n.y - t.y);
									}
									throw S.Errors.ILLEGAL_PARAMETERS;
								}
							}
							clone() {
								return new S.Vector(this.x, this.y);
							}
							get slope() {
								let e = Math.atan2(this.y, this.x);
								return e < 0 && (e = 2 * Math.PI + e), e;
							}
							get length() {
								return Math.sqrt(this.dot(this));
							}
							equalTo(e) {
								return S.Utils.EQ(this.x, e.x) && S.Utils.EQ(this.y, e.y);
							}
							multiply(e) {
								return new S.Vector(e * this.x, e * this.y);
							}
							dot(e) {
								return this.x * e.x + this.y * e.y;
							}
							cross(e) {
								return this.x * e.y - this.y * e.x;
							}
							normalize() {
								if (!S.Utils.EQ_0(this.length))
									return new S.Vector(this.x / this.length, this.y / this.length);
								throw S.Errors.ZERO_DIVISION;
							}
							rotate(e) {
								let t = new S.Point(this.x, this.y).rotate(e);
								return new S.Vector(t.x, t.y);
							}
							rotate90CCW() {
								return new S.Vector(-this.y, this.x);
							}
							rotate90CW() {
								return new S.Vector(this.y, -this.x);
							}
							invert() {
								return new S.Vector(-this.x, -this.y);
							}
							add(e) {
								return new S.Vector(this.x + e.x, this.y + e.y);
							}
							subtract(e) {
								return new S.Vector(this.x - e.x, this.y - e.y);
							}
							angleTo(e) {
								let t = this.normalize(),
									n = e.normalize(),
									r = Math.atan2(t.cross(n), t.dot(n));
								return r < 0 && (r += 2 * Math.PI), r;
							}
							projectionOn(e) {
								let t = e.normalize(),
									n = this.dot(t);
								return t.multiply(n);
							}
							toJSON() {
								return Object.assign({}, this, {
									name: 'vector',
								});
							}
						}
						S.Vector = Xe;
						const Ze = (...e) => new S.Vector(...e);
						S.vector = Ze;
						class $e {
							constructor(...e) {
								if (((this.ps = new S.Point()), (this.pe = new S.Point()), 0 !== e.length)) {
									if (1 === e.length && e[0] instanceof Array && 4 === e[0].length) {
										let t = e[0];
										return (
											(this.ps = new S.Point(t[0], t[1])), void (this.pe = new S.Point(t[2], t[3]))
										);
									}
									if (1 === e.length && e[0] instanceof Object && 'segment' === e[0].name) {
										let { ps: t, pe: n } = e[0];
										return (
											(this.ps = new S.Point(t.x, t.y)), void (this.pe = new S.Point(n.x, n.y))
										);
									}
									if (!(1 === e.length && e[0] instanceof S.Point)) {
										if (2 === e.length && e[0] instanceof S.Point && e[1] instanceof S.Point)
											return (this.ps = e[0].clone()), void (this.pe = e[1].clone());
										if (4 === e.length)
											return (
												(this.ps = new S.Point(e[0], e[1])),
												void (this.pe = new S.Point(e[2], e[3]))
											);
										throw S.Errors.ILLEGAL_PARAMETERS;
									}
									this.ps = e[0].clone();
								}
							}
							clone() {
								return new S.Segment(this.start, this.end);
							}
							get start() {
								return this.ps;
							}
							get end() {
								return this.pe;
							}
							get vertices() {
								return [this.ps.clone(), this.pe.clone()];
							}
							get length() {
								return this.start.distanceTo(this.end)[0];
							}
							get slope() {
								return new S.Vector(this.start, this.end).slope;
							}
							get box() {
								return new S.Box(
									Math.min(this.start.x, this.end.x),
									Math.min(this.start.y, this.end.y),
									Math.max(this.start.x, this.end.x),
									Math.max(this.start.y, this.end.y),
								);
							}
							equalTo(e) {
								return this.ps.equalTo(e.ps) && this.pe.equalTo(e.pe);
							}
							contains(e) {
								return S.Utils.EQ_0(this.distanceToPoint(e));
							}
							intersect(e) {
								return e instanceof S.Point
									? this.contains(e)
										? [e]
										: []
									: e instanceof S.Line
									? ge(this, e)
									: e instanceof S.Segment
									? ye(this, e)
									: e instanceof S.Circle
									? me(this, e)
									: e instanceof S.Box
									? (function (e, t) {
											let n = [];
											for (let r of t.toSegments()) {
												let t = ye(r, e);
												for (let e of t) n.push(e);
											}
											return n;
									  })(this, e)
									: e instanceof S.Arc
									? ve(this, e)
									: e instanceof S.Polygon
									? Te(this, e)
									: void 0;
							}
							distanceTo(e) {
								if (e instanceof S.Point) {
									let [t, n] = S.Distance.point2segment(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (e instanceof S.Circle) {
									let [t, n] = S.Distance.segment2circle(this, e);
									return [t, n];
								}
								if (e instanceof S.Line) {
									let [t, n] = S.Distance.segment2line(this, e);
									return [t, n];
								}
								if (e instanceof S.Segment) {
									let [t, n] = S.Distance.segment2segment(this, e);
									return [t, n];
								}
								if (e instanceof S.Arc) {
									let [t, n] = S.Distance.segment2arc(this, e);
									return [t, n];
								}
								if (e instanceof S.Polygon) {
									let [t, n] = S.Distance.shape2polygon(this, e);
									return [t, n];
								}
								if (e instanceof S.PlanarSet) {
									let [t, n] = S.Distance.shape2planarSet(this, e);
									return [t, n];
								}
							}
							tangentInStart() {
								return new S.Vector(this.start, this.end).normalize();
							}
							tangentInEnd() {
								return new S.Vector(this.end, this.start).normalize();
							}
							reverse() {
								return new $e(this.end, this.start);
							}
							split(e) {
								return this.start.equalTo(e)
									? [null, this.clone()]
									: this.end.equalTo(e)
									? [this.clone(), null]
									: [new S.Segment(this.start, e), new S.Segment(e, this.end)];
							}
							middle() {
								return new S.Point(
									(this.start.x + this.end.x) / 2,
									(this.start.y + this.end.y) / 2,
								);
							}
							pointAtLength(e) {
								if (e > this.length || e < 0) return null;
								if (0 == e) return this.start;
								if (e == this.length) return this.end;
								let t = e / this.length;
								return new S.Point(
									(this.end.x - this.start.x) * t + this.start.x,
									(this.end.y - this.start.y) * t + this.start.y,
								);
							}
							distanceToPoint(e) {
								let [t, ...n] = S.Distance.point2segment(e, this);
								return t;
							}
							definiteIntegral(e = 0) {
								return ((this.end.x - this.start.x) * (this.start.y - e + (this.end.y - e))) / 2;
							}
							translate(...e) {
								return new $e(this.ps.translate(...e), this.pe.translate(...e));
							}
							rotate(e = 0, t = new S.Point()) {
								let n = new S.Matrix();
								return (
									(n = n.translate(t.x, t.y).rotate(e).translate(-t.x, -t.y)), this.transform(n)
								);
							}
							transform(e = new S.Matrix()) {
								return new $e(this.ps.transform(e), this.pe.transform(e));
							}
							isZeroLength() {
								return this.ps.equalTo(this.pe);
							}
							sortPoints(e) {
								return new S.Line(this.start, this.end).sortPoints(e);
							}
							toJSON() {
								return Object.assign({}, this, {
									name: 'segment',
								});
							}
							svg(e = {}) {
								let { stroke: t, strokeWidth: n, id: r, className: i } = e,
									o = r && r.length > 0 ? `id="${r}"` : '',
									a = i && i.length > 0 ? `class="${i}"` : '';
								return `\n<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${
									this.end.y
								}" stroke="${t || 'black'}" stroke-width="${n || 1}" ${o} ${a} />`;
							}
						}
						S.Segment = $e;
						const et = (...e) => new S.Segment(...e);
						S.segment = et;
						let { vector: tt } = S;
						class nt {
							constructor(...e) {
								if (((this.pt = new S.Point()), (this.norm = new S.Vector(0, 1)), 0 != e.length)) {
									if (1 == e.length && e[0] instanceof Object && 'line' === e[0].name) {
										let { pt: t, norm: n } = e[0];
										return (this.pt = new S.Point(t)), void (this.norm = new S.Vector(n));
									}
									if (2 == e.length) {
										let t = e[0],
											n = e[1];
										if (t instanceof S.Point && n instanceof S.Point)
											return (
												(this.pt = t),
												(this.norm = nt.points2norm(t, n)),
												void (this.norm.dot(tt(this.pt.x, this.pt.y)) >= 0 && this.norm.invert())
											);
										if (t instanceof S.Point && n instanceof S.Vector) {
											if (S.Utils.EQ_0(n.x) && S.Utils.EQ_0(n.y)) throw S.Errors.ILLEGAL_PARAMETERS;
											return (
												(this.pt = t.clone()),
												(this.norm = n.clone()),
												(this.norm = this.norm.normalize()),
												void (this.norm.dot(tt(this.pt.x, this.pt.y)) >= 0 && this.norm.invert())
											);
										}
										if (t instanceof S.Vector && n instanceof S.Point) {
											if (S.Utils.EQ_0(t.x) && S.Utils.EQ_0(t.y)) throw S.Errors.ILLEGAL_PARAMETERS;
											return (
												(this.pt = n.clone()),
												(this.norm = t.clone()),
												(this.norm = this.norm.normalize()),
												void (this.norm.dot(tt(this.pt.x, this.pt.y)) >= 0 && this.norm.invert())
											);
										}
									}
									throw S.Errors.ILLEGAL_PARAMETERS;
								}
							}
							clone() {
								return new S.Line(this.pt, this.norm);
							}
							get start() {}
							get end() {}
							get length() {
								return Number.POSITIVE_INFINITY;
							}
							get box() {
								return new S.Box(
									Number.NEGATIVE_INFINITY,
									Number.NEGATIVE_INFINITY,
									Number.POSITIVE_INFINITY,
									Number.POSITIVE_INFINITY,
								);
							}
							get middle() {}
							get slope() {
								return new S.Vector(this.norm.y, -this.norm.x).slope;
							}
							get standard() {
								return [this.norm.x, this.norm.y, this.norm.dot(this.pt)];
							}
							parallelTo(e) {
								return S.Utils.EQ_0(this.norm.cross(e.norm));
							}
							incidentTo(e) {
								return this.parallelTo(e) && this.pt.on(e);
							}
							contains(e) {
								if (this.pt.equalTo(e)) return !0;
								let t = new S.Vector(this.pt, e);
								return S.Utils.EQ_0(this.norm.dot(t));
							}
							coord(e) {
								return tt(e.x, e.y).cross(this.norm);
							}
							intersect(e) {
								return e instanceof S.Point
									? this.contains(e)
										? [e]
										: []
									: e instanceof S.Line
									? ue(this, e)
									: e instanceof S.Circle
									? pe(this, e)
									: e instanceof S.Box
									? fe(this, e)
									: e instanceof S.Segment
									? ge(e, this)
									: e instanceof S.Arc
									? de(this, e)
									: e instanceof S.Polygon
									? Me(this, e)
									: void 0;
							}
							distanceTo(e) {
								if (e instanceof S.Point) {
									let [t, n] = S.Distance.point2line(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (e instanceof S.Circle) {
									let [t, n] = S.Distance.circle2line(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (e instanceof S.Segment) {
									let [t, n] = S.Distance.segment2line(e, this);
									return [t, n.reverse()];
								}
								if (e instanceof S.Arc) {
									let [t, n] = S.Distance.arc2line(e, this);
									return [t, n.reverse()];
								}
								if (e instanceof S.Polygon) {
									let [t, n] = S.Distance.shape2polygon(this, e);
									return [t, n];
								}
							}
							split(e) {
								if (e instanceof S.Point)
									return [new S.Ray(e, this.norm.invert()), new S.Ray(e, this.norm)];
								{
									let t = new S.Multiline([this]),
										n = this.sortPoints(e);
									return t.split(n), t.toShapes();
								}
							}
							sortPoints(e) {
								return e
									.slice()
									.sort((e, t) =>
										this.coord(e) < this.coord(t) ? -1 : this.coord(e) > this.coord(t) ? 1 : 0,
									);
							}
							toJSON() {
								return Object.assign({}, this, {
									name: 'line',
								});
							}
							svg(e, t = {}) {
								let n = fe(this, e);
								if (0 === n.length) return '';
								let r = n[0],
									i = 2 == n.length ? n[1] : n.find((e) => !e.equalTo(r));
								return void 0 === i && (i = r), new S.Segment(r, i).svg(t);
							}
							static points2norm(e, t) {
								if (e.equalTo(t)) throw S.Errors.ILLEGAL_PARAMETERS;
								return new S.Vector(e, t).normalize().rotate90CCW();
							}
						}
						S.Line = nt;
						const rt = (...e) => new S.Line(...e);
						S.line = rt;
						class it {
							constructor(...e) {
								if (
									((this.pc = new S.Point()),
									(this.r = 1),
									1 == e.length && e[0] instanceof Object && 'circle' === e[0].name)
								) {
									let { pc: t, r: n } = e[0];
									return (this.pc = new S.Point(t)), void (this.r = n);
								}
								{
									let [t, n] = [...e];
									return (
										t && t instanceof S.Point && (this.pc = t.clone()),
										void (void 0 !== n && (this.r = n))
									);
								}
							}
							clone() {
								return new S.Circle(this.pc.clone(), this.r);
							}
							get center() {
								return this.pc;
							}
							get box() {
								return new S.Box(
									this.pc.x - this.r,
									this.pc.y - this.r,
									this.pc.x + this.r,
									this.pc.y + this.r,
								);
							}
							contains(e) {
								return e instanceof S.Point
									? S.Utils.LE(e.distanceTo(this.center)[0], this.r)
									: e instanceof S.Segment
									? S.Utils.LE(e.start.distanceTo(this.center)[0], this.r) &&
									  S.Utils.LE(e.end.distanceTo(this.center)[0], this.r)
									: e instanceof S.Arc
									? 0 === this.intersect(e).length &&
									  S.Utils.LE(e.start.distanceTo(this.center)[0], this.r) &&
									  S.Utils.LE(e.end.distanceTo(this.center)[0], this.r)
									: e instanceof S.Circle
									? 0 === this.intersect(e).length &&
									  S.Utils.LE(e.r, this.r) &&
									  S.Utils.LE(e.center.distanceTo(this.center)[0], this.r)
									: void 0;
							}
							toArc(e = !0) {
								return new S.Arc(this.center, this.r, Math.PI, -Math.PI, e);
							}
							intersect(e) {
								return e instanceof S.Point
									? this.contains(e)
										? [e]
										: []
									: e instanceof S.Line
									? pe(e, this)
									: e instanceof S.Segment
									? me(e, this)
									: e instanceof S.Circle
									? we(e, this)
									: e instanceof S.Box
									? (function (e, t) {
											let n = [];
											for (let r of t.toSegments()) {
												let t = me(r, e);
												for (let e of t) n.push(e);
											}
											return n;
									  })(this, e)
									: e instanceof S.Arc
									? Se(e, this)
									: e instanceof S.Polygon
									? Ee(this, e)
									: void 0;
							}
							distanceTo(e) {
								if (e instanceof S.Point) {
									let [t, n] = S.Distance.point2circle(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (e instanceof S.Circle) {
									let [t, n] = S.Distance.circle2circle(this, e);
									return [t, n];
								}
								if (e instanceof S.Line) {
									let [t, n] = S.Distance.circle2line(this, e);
									return [t, n];
								}
								if (e instanceof S.Segment) {
									let [t, n] = S.Distance.segment2circle(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (e instanceof S.Arc) {
									let [t, n] = S.Distance.arc2circle(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (e instanceof S.Polygon) {
									let [t, n] = S.Distance.shape2polygon(this, e);
									return [t, n];
								}
								if (e instanceof S.PlanarSet) {
									let [t, n] = S.Distance.shape2planarSet(this, e);
									return [t, n];
								}
							}
							toJSON() {
								return Object.assign({}, this, {
									name: 'circle',
								});
							}
							svg(e = {}) {
								let { stroke: t, strokeWidth: n, fill: r, fillOpacity: i, id: o, className: a } = e,
									s = o && o.length > 0 ? `id="${o}"` : '',
									l = a && a.length > 0 ? `class="${a}"` : '';
								return `\n<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}" stroke="${
									t || 'black'
								}" stroke-width="${n || 1}" fill="${r || 'none'}" fill-opacity="${
									i || 1
								}" ${s} ${l} />`;
							}
						}
						S.Circle = it;
						const ot = (...e) => new S.Circle(...e);
						S.circle = ot;
						class at {
							constructor(...e) {
								if (
									((this.pc = new S.Point()),
									(this.r = 1),
									(this.startAngle = 0),
									(this.endAngle = 2 * Math.PI),
									(this.counterClockwise = S.CCW),
									0 != e.length)
								) {
									if (1 == e.length && e[0] instanceof Object && 'arc' === e[0].name) {
										let { pc: t, r: n, startAngle: r, endAngle: i, counterClockwise: o } = e[0];
										return (
											(this.pc = new S.Point(t.x, t.y)),
											(this.r = n),
											(this.startAngle = r),
											(this.endAngle = i),
											void (this.counterClockwise = o)
										);
									}
									{
										let [t, n, r, i, o] = [...e];
										return (
											t && t instanceof S.Point && (this.pc = t.clone()),
											void 0 !== n && (this.r = n),
											void 0 !== r && (this.startAngle = r),
											void 0 !== i && (this.endAngle = i),
											void (void 0 !== o && (this.counterClockwise = o))
										);
									}
								}
							}
							clone() {
								return new S.Arc(
									this.pc.clone(),
									this.r,
									this.startAngle,
									this.endAngle,
									this.counterClockwise,
								);
							}
							get sweep() {
								if (S.Utils.EQ(this.startAngle, this.endAngle)) return 0;
								if (S.Utils.EQ(Math.abs(this.startAngle - this.endAngle), S.PIx2)) return S.PIx2;
								let e;
								return (
									(e = this.counterClockwise
										? S.Utils.GT(this.endAngle, this.startAngle)
											? this.endAngle - this.startAngle
											: this.endAngle - this.startAngle + S.PIx2
										: S.Utils.GT(this.startAngle, this.endAngle)
										? this.startAngle - this.endAngle
										: this.startAngle - this.endAngle + S.PIx2),
									S.Utils.GT(e, S.PIx2) && (e -= S.PIx2),
									S.Utils.LT(e, 0) && (e += S.PIx2),
									e
								);
							}
							get start() {
								return new S.Point(this.pc.x + this.r, this.pc.y).rotate(this.startAngle, this.pc);
							}
							get end() {
								return new S.Point(this.pc.x + this.r, this.pc.y).rotate(this.endAngle, this.pc);
							}
							get center() {
								return this.pc.clone();
							}
							get vertices() {
								return [this.start.clone(), this.end.clone()];
							}
							get length() {
								return Math.abs(this.sweep * this.r);
							}
							get box() {
								let e = this.breakToFunctional().reduce(
									(e, t) => e.merge(t.start.box),
									new S.Box(),
								);
								return (e = e.merge(this.end.box)), e;
							}
							contains(e) {
								if (!S.Utils.EQ(this.pc.distanceTo(e)[0], this.r)) return !1;
								if (e.equalTo(this.start)) return !0;
								let t = new S.Vector(this.pc, e).slope,
									n = new S.Arc(this.pc, this.r, this.startAngle, t, this.counterClockwise);
								return S.Utils.LE(n.length, this.length);
							}
							split(e) {
								if (this.start.equalTo(e)) return [null, this.clone()];
								if (this.end.equalTo(e)) return [this.clone(), null];
								let t = new S.Vector(this.pc, e).slope;
								return [
									new S.Arc(this.pc, this.r, this.startAngle, t, this.counterClockwise),
									new S.Arc(this.pc, this.r, t, this.endAngle, this.counterClockwise),
								];
							}
							middle() {
								let e = this.counterClockwise
									? this.startAngle + this.sweep / 2
									: this.startAngle - this.sweep / 2;
								return new S.Arc(this.pc, this.r, this.startAngle, e, this.counterClockwise).end;
							}
							pointAtLength(e) {
								if (e > this.length || e < 0) return null;
								if (0 == e) return this.start;
								if (e == this.length) return this.end;
								let t = e / this.length,
									n = this.counterClockwise
										? this.startAngle + this.sweep * t
										: this.startAngle - this.sweep * t;
								return new S.Arc(this.pc, this.r, this.startAngle, n, this.counterClockwise).end;
							}
							chordHeight() {
								return (1 - Math.cos(Math.abs(this.sweep / 2))) * this.r;
							}
							intersect(e) {
								return e instanceof S.Point
									? this.contains(e)
										? [e]
										: []
									: e instanceof S.Line
									? de(e, this)
									: e instanceof S.Circle
									? Se(this, e)
									: e instanceof S.Segment
									? ve(e, this)
									: e instanceof S.Box
									? (function (e, t) {
											let n = [];
											for (let r of t.toSegments()) {
												let t = ve(r, e);
												for (let e of t) n.push(e);
											}
											return n;
									  })(this, e)
									: e instanceof S.Arc
									? be(this, e)
									: e instanceof S.Polygon
									? Oe(this, e)
									: void 0;
							}
							distanceTo(e) {
								if (e instanceof S.Point) {
									let [t, n] = S.Distance.point2arc(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (e instanceof S.Circle) {
									let [t, n] = S.Distance.arc2circle(this, e);
									return [t, n];
								}
								if (e instanceof S.Line) {
									let [t, n] = S.Distance.arc2line(this, e);
									return [t, n];
								}
								if (e instanceof S.Segment) {
									let [t, n] = S.Distance.segment2arc(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (e instanceof S.Arc) {
									let [t, n] = S.Distance.arc2arc(this, e);
									return [t, n];
								}
								if (e instanceof S.Polygon) {
									let [t, n] = S.Distance.shape2polygon(this, e);
									return [t, n];
								}
								if (e instanceof S.PlanarSet) {
									let [t, n] = S.Distance.shape2planarSet(this, e);
									return [t, n];
								}
							}
							breakToFunctional() {
								let e = [],
									t = [0, Math.PI / 2, (2 * Math.PI) / 2, (3 * Math.PI) / 2],
									n = [
										this.pc.translate(this.r, 0),
										this.pc.translate(0, this.r),
										this.pc.translate(-this.r, 0),
										this.pc.translate(0, -this.r),
									],
									r = [];
								for (let i = 0; i < 4; i++)
									n[i].on(this) &&
										r.push(
											new S.Arc(this.pc, this.r, this.startAngle, t[i], this.counterClockwise),
										);
								if (0 == r.length) e.push(this.clone());
								else {
									r.sort((e, t) => e.length - t.length);
									for (let i = 0; i < r.length; i++) {
										let t,
											n = e.length > 0 ? e[e.length - 1] : void 0;
										(t = n
											? new S.Arc(this.pc, this.r, n.endAngle, r[i].endAngle, this.counterClockwise)
											: new S.Arc(
													this.pc,
													this.r,
													this.startAngle,
													r[i].endAngle,
													this.counterClockwise,
											  )),
											S.Utils.EQ_0(t.length) || e.push(t.clone());
									}
									let t,
										n = e.length > 0 ? e[e.length - 1] : void 0;
									(t = n
										? new S.Arc(this.pc, this.r, n.endAngle, this.endAngle, this.counterClockwise)
										: new S.Arc(
												this.pc,
												this.r,
												this.startAngle,
												this.endAngle,
												this.counterClockwise,
										  )),
										S.Utils.EQ_0(t.length) || S.Utils.EQ(t.sweep, 2 * Math.PI) || e.push(t.clone());
								}
								return e;
							}
							tangentInStart() {
								let e = new S.Vector(this.pc, this.start),
									t = this.counterClockwise ? Math.PI / 2 : -Math.PI / 2;
								return e.rotate(t).normalize();
							}
							tangentInEnd() {
								let e = new S.Vector(this.pc, this.end),
									t = this.counterClockwise ? -Math.PI / 2 : Math.PI / 2;
								return e.rotate(t).normalize();
							}
							reverse() {
								return new S.Arc(
									this.pc,
									this.r,
									this.endAngle,
									this.startAngle,
									!this.counterClockwise,
								);
							}
							translate(...e) {
								let t = this.clone();
								return (t.pc = this.pc.translate(...e)), t;
							}
							rotate(e = 0, t = new S.Point()) {
								let n = new S.Matrix();
								return (
									(n = n.translate(t.x, t.y).rotate(e).translate(-t.x, -t.y)), this.transform(n)
								);
							}
							scale(e = 1, t = 1) {
								let n = new S.Matrix();
								return (n = n.scale(e, t)), this.transform(n);
							}
							transform(e = new S.Matrix()) {
								let t = this.start.transform(e),
									n = this.end.transform(e),
									r = this.pc.transform(e),
									i = this.counterClockwise;
								return e.a * e.d < 0 && (i = !i), S.Arc.arcSE(r, t, n, i);
							}
							static arcSE(e, t, n, r) {
								let { vector: i } = S,
									o = i(e, t).slope,
									a = i(e, n).slope;
								S.Utils.EQ(o, a) && ((a += 2 * Math.PI), (r = !0));
								let s = i(e, t).length;
								return new S.Arc(e, s, o, a, r);
							}
							definiteIntegral(e = 0) {
								return this.breakToFunctional().reduce(
									(t, n) => t + n.circularSegmentDefiniteIntegral(e),
									0,
								);
							}
							circularSegmentDefiniteIntegral(e) {
								let t = new S.Line(this.start, this.end),
									n = this.pc.leftTo(t),
									r = new S.Segment(this.start, this.end).definiteIntegral(e),
									i = this.circularSegmentArea();
								return n ? r - i : r + i;
							}
							circularSegmentArea() {
								return 0.5 * this.r * this.r * (this.sweep - Math.sin(this.sweep));
							}
							sortPoints(e) {
								let { vector: t } = S;
								return e.slice().sort((e, n) => {
									let r = t(this.pc, e).slope,
										i = t(this.pc, n).slope;
									return r < i ? -1 : r > i ? 1 : 0;
								});
							}
							toJSON() {
								return Object.assign({}, this, {
									name: 'arc',
								});
							}
							svg(e = {}) {
								let t = this.sweep <= Math.PI ? '0' : '1',
									n = this.counterClockwise ? '1' : '0',
									{ stroke: r, strokeWidth: i, fill: o, id: a, className: s } = e,
									l = a && a.length > 0 ? `id="${a}"` : '',
									h = s && s.length > 0 ? `class="${s}"` : '';
								return S.Utils.EQ(this.sweep, 2 * Math.PI)
									? new S.Circle(this.pc, this.r).svg(e)
									: `\n<path d="M${this.start.x},${this.start.y}\n                             A${
											this.r
									  },${this.r} 0 ${t},${n} ${this.end.x},${
											this.end.y
									  }"\n                    stroke="${r || 'black'}" stroke-width="${
											i || 1
									  }" fill="${o || 'none'}" ${l} ${h} />`;
							}
						}
						S.Arc = at;
						const st = (...e) => new S.Arc(...e);
						S.arc = st;
						class lt {
							constructor(e, t, n, r) {
								(this.xmin = e), (this.ymin = t), (this.xmax = n), (this.ymax = r);
							}
							clone() {
								return new lt(this.xmin, this.ymin, this.xmax, this.ymax);
							}
							get low() {
								return new S.Point(this.xmin, this.ymin);
							}
							get high() {
								return new S.Point(this.xmax, this.ymax);
							}
							get max() {
								return this.clone();
							}
							get center() {
								return new S.Point((this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2);
							}
							get box() {
								return this.clone();
							}
							not_intersect(e) {
								return (
									this.xmax < e.xmin ||
									this.xmin > e.xmax ||
									this.ymax < e.ymin ||
									this.ymin > e.ymax
								);
							}
							intersect(e) {
								return !this.not_intersect(e);
							}
							merge(e) {
								return new lt(
									void 0 === this.xmin ? e.xmin : Math.min(this.xmin, e.xmin),
									void 0 === this.ymin ? e.ymin : Math.min(this.ymin, e.ymin),
									void 0 === this.xmax ? e.xmax : Math.max(this.xmax, e.xmax),
									void 0 === this.ymax ? e.ymax : Math.max(this.ymax, e.ymax),
								);
							}
							less_than(e) {
								return (
									!!this.low.lessThan(e.low) ||
									!(!this.low.equalTo(e.low) || !this.high.lessThan(e.high))
								);
							}
							equal_to(e) {
								return this.low.equalTo(e.low) && this.high.equalTo(e.high);
							}
							output() {
								return this.clone();
							}
							static comparable_max(e, t) {
								return e.merge(t);
							}
							static comparable_less_than(e, t) {
								return e.lessThan(t);
							}
							set(e, t, n, r) {
								(this.xmin = e), (this.ymin = t), (this.xmax = n), (this.ymax = r);
							}
							toPoints() {
								return [
									new S.Point(this.xmin, this.ymin),
									new S.Point(this.xmax, this.ymin),
									new S.Point(this.xmax, this.ymax),
									new S.Point(this.xmin, this.ymax),
								];
							}
							toSegments() {
								let e = this.toPoints();
								return [
									new S.Segment(e[0], e[1]),
									new S.Segment(e[1], e[2]),
									new S.Segment(e[2], e[3]),
									new S.Segment(e[3], e[0]),
								];
							}
							svg(e = {}) {
								let { stroke: t, strokeWidth: n, fill: r, id: i, className: o } = e,
									a = i && i.length > 0 ? `id="${i}"` : '',
									s = o && o.length > 0 ? `class="${o}"` : '',
									l = this.xmax - this.xmin,
									h = this.ymax - this.ymin;
								return `\n<rect x="${this.xmin}" y="${this.ymin}" width=${l} height=${h} stroke="${
									t || 'black'
								}" stroke-width="${n || 1}" fill="${r || 'none'}" ${a} ${s} />`;
							}
						}
						S.Box = lt;
						const ht = (...e) => new S.Box(...e);
						S.box = ht;
						class ct {
							constructor(e) {
								(this.shape = e),
									(this.next = void 0),
									(this.prev = void 0),
									(this.face = void 0),
									(this.arc_length = 0),
									(this.bvStart = void 0),
									(this.bvEnd = void 0),
									(this.bv = void 0),
									(this.overlap = void 0);
							}
							get start() {
								return this.shape.start;
							}
							get end() {
								return this.shape.end;
							}
							get length() {
								return this.shape.length;
							}
							get box() {
								return this.shape.box;
							}
							isSegment() {
								return this.shape instanceof S.Segment;
							}
							isArc() {
								return this.shape instanceof S.Arc;
							}
							middle() {
								return this.shape.middle();
							}
							pointAtLength(e) {
								return this.shape.pointAtLength(e);
							}
							contains(e) {
								return this.shape.contains(e);
							}
							setInclusion(e) {
								if (void 0 !== this.bv) return this.bv;
								if (this.shape instanceof S.Line || this.shape instanceof S.Ray)
									return (this.bv = S.OUTSIDE), this.bv;
								if (
									(void 0 === this.bvStart && (this.bvStart = Ae(e, this.start)),
									void 0 === this.bvEnd && (this.bvEnd = Ae(e, this.end)),
									this.bvStart === S.OUTSIDE || this.bvEnd == S.OUTSIDE)
								)
									this.bv = S.OUTSIDE;
								else if (this.bvStart === S.INSIDE || this.bvEnd == S.INSIDE) this.bv = S.INSIDE;
								else {
									let t = Ae(e, this.middle());
									this.bv = t;
								}
								return this.bv;
							}
							setOverlap(e) {
								let t = void 0,
									n = this.shape,
									r = e.shape;
								n instanceof S.Segment && r instanceof S.Segment
									? n.start.equalTo(r.start) && n.end.equalTo(r.end)
										? (t = S.OVERLAP_SAME)
										: n.start.equalTo(r.end) && n.end.equalTo(r.start) && (t = S.OVERLAP_OPPOSITE)
									: ((n instanceof S.Arc && r instanceof S.Arc) ||
											(n instanceof S.Segment && r instanceof S.Arc) ||
											(n instanceof S.Arc && r instanceof S.Segment)) &&
									  (n.start.equalTo(r.start) &&
									  n.end.equalTo(r.end) &&
									  n.middle().equalTo(r.middle())
											? (t = S.OVERLAP_SAME)
											: n.start.equalTo(r.end) &&
											  n.end.equalTo(r.start) &&
											  n.middle().equalTo(r.middle()) &&
											  (t = S.OVERLAP_OPPOSITE)),
									void 0 === this.overlap && (this.overlap = t),
									void 0 === e.overlap && (e.overlap = t);
							}
							svg() {
								if (this.shape instanceof S.Segment)
									return ` L${this.shape.end.x},${this.shape.end.y}`;
								if (this.shape instanceof S.Arc) {
									let e,
										t = this.shape,
										n = t.counterClockwise ? '1' : '0';
									if (S.Utils.EQ(t.sweep, 2 * Math.PI)) {
										let r = t.counterClockwise ? 1 : -1,
											i = new S.Arc(
												t.pc,
												t.r,
												t.startAngle,
												t.startAngle + r * Math.PI,
												t.counterClockwise,
											),
											o = new S.Arc(
												t.pc,
												t.r,
												t.startAngle + r * Math.PI,
												t.endAngle,
												t.counterClockwise,
											);
										return (
											(e = '0'),
											` A${i.r},${i.r} 0 ${e},${n} ${i.end.x},${i.end.y}\n                    A${o.r},${o.r} 0 ${e},${n} ${o.end.x},${o.end.y}`
										);
									}
									return (
										(e = t.sweep <= Math.PI ? '0' : '1'),
										` A${t.r},${t.r} 0 ${e},${n} ${t.end.x},${t.end.y}`
									);
								}
							}
							toJSON() {
								return this.shape.toJSON();
							}
						}
						S.Edge = ct;
						class ut extends _ {
							constructor(e, t) {
								super(e, t), this.setCircularLinks();
							}
							setCircularLinks() {
								this.isEmpty() || ((this.last.next = this.first), (this.first.prev = this.last));
							}
							[Symbol.iterator]() {
								let e = void 0;
								return {
									next: () => {
										let t = e || this.first,
											n = !this.first || (!!e && e === this.first);
										return (
											(e = t ? t.next : void 0),
											{
												value: t,
												done: n,
											}
										);
									},
								};
							}
							append(e) {
								return super.append(e), this.setCircularLinks(), this;
							}
							insert(e, t) {
								return super.insert(e, t), this.setCircularLinks(), this;
							}
							remove(e) {
								return super.remove(e), this;
							}
						}
						class pt extends ut {
							constructor(e, ...t) {
								if ((super(), (this._box = void 0), (this._orientation = void 0), 0 != t.length)) {
									if (1 == t.length)
										if (t[0] instanceof Array) {
											let n = t[0];
											if (0 == n.length) return;
											if (n.every((e) => e instanceof S.Point)) {
												let t = pt.points2segments(n);
												this.shapes2face(e.edges, t);
											} else if (n.every((e) => e instanceof Array && 2 === e.length)) {
												let t = n.map((e) => new S.Point(e[0], e[1])),
													r = pt.points2segments(t);
												this.shapes2face(e.edges, r);
											} else if (n.every((e) => e instanceof S.Segment || e instanceof S.Arc))
												this.shapes2face(e.edges, n);
											else if (n.every((e) => 'segment' === e.name || 'arc' === e.name)) {
												let t = [];
												for (let e of n) {
													let n;
													(n = 'segment' === e.name ? new S.Segment(e) : new S.Arc(e)), t.push(n);
												}
												this.shapes2face(e.edges, t);
											}
										} else if (t[0] instanceof pt) {
											let n = t[0];
											(this.first = n.first), (this.last = n.last);
											for (let t of n) e.edges.add(t);
										} else if (t[0] instanceof S.Circle)
											this.shapes2face(e.edges, [t[0].toArc(S.CCW)]);
										else if (t[0] instanceof S.Box) {
											let n = t[0];
											this.shapes2face(e.edges, [
												new S.Segment(new S.Point(n.xmin, n.ymin), new S.Point(n.xmax, n.ymin)),
												new S.Segment(new S.Point(n.xmax, n.ymin), new S.Point(n.xmax, n.ymax)),
												new S.Segment(new S.Point(n.xmax, n.ymax), new S.Point(n.xmin, n.ymax)),
												new S.Segment(new S.Point(n.xmin, n.ymax), new S.Point(n.xmin, n.ymin)),
											]);
										}
									2 == t.length &&
										t[0] instanceof S.Edge &&
										t[1] instanceof S.Edge &&
										((this.first = t[0]),
										(this.last = t[1]),
										(this.last.next = this.first),
										(this.first.prev = this.last),
										this.setArcLength());
								}
							}
							get edges() {
								return this.toArray();
							}
							get shapes() {
								return this.edges.map((e) => e.shape.clone());
							}
							get box() {
								if (void 0 === this._box) {
									let e = new S.Box();
									for (let t of this) e = e.merge(t.box);
									this._box = e;
								}
								return this._box;
							}
							get perimeter() {
								return this.last.arc_length + this.last.length;
							}
							pointAtLength(e) {
								if (e > this.perimeter || e < 0) return null;
								let t = null;
								for (let n of this)
									if (e >= n.arc_length && (n === this.last || e < n.next.arc_length)) {
										t = n.pointAtLength(e - n.arc_length);
										break;
									}
								return t;
							}
							static points2segments(e) {
								let t = [];
								for (let n = 0; n < e.length; n++)
									e[n].equalTo(e[(n + 1) % e.length]) ||
										t.push(new S.Segment(e[n], e[(n + 1) % e.length]));
								return t;
							}
							shapes2face(e, t) {
								for (let n of t) {
									let t = new S.Edge(n);
									this.append(t), e.add(t);
								}
							}
							append(e) {
								return super.append(e), this.setOneEdgeArcLength(e), (e.face = this), this;
							}
							insert(e, t) {
								return super.insert(e, t), this.setOneEdgeArcLength(e), (e.face = this), this;
							}
							remove(e) {
								return super.remove(e), this.setArcLength(), this;
							}
							reverse() {
								let e = [],
									t = this.last;
								do {
									(t.shape = t.shape.reverse()), e.push(t), (t = t.prev);
								} while (t !== this.last);
								(this.first = void 0), (this.last = void 0);
								for (let n of e)
									void 0 === this.first
										? ((n.prev = n), (n.next = n), (this.first = n), (this.last = n))
										: ((n.prev = this.last),
										  (this.last.next = n),
										  (this.last = n),
										  (this.last.next = this.first),
										  (this.first.prev = this.last)),
										this.setOneEdgeArcLength(n);
								void 0 !== this._orientation &&
									((this._orientation = void 0), (this._orientation = this.orientation()));
							}
							setArcLength() {
								for (let e of this) this.setOneEdgeArcLength(e), (e.face = this);
							}
							setOneEdgeArcLength(e) {
								e === this.first
									? (e.arc_length = 0)
									: (e.arc_length = e.prev.arc_length + e.prev.length);
							}
							area() {
								return Math.abs(this.signedArea());
							}
							signedArea() {
								let e = 0,
									t = this.box.ymin;
								for (let n of this) e += n.shape.definiteIntegral(t);
								return e;
							}
							orientation() {
								if (void 0 === this._orientation) {
									let e = this.signedArea();
									S.Utils.EQ_0(e)
										? (this._orientation = S.ORIENTATION.NOT_ORIENTABLE)
										: S.Utils.LT(e, 0)
										? (this._orientation = S.ORIENTATION.CCW)
										: (this._orientation = S.ORIENTATION.CW);
								}
								return this._orientation;
							}
							isSimple(e) {
								return 0 == pt.getSelfIntersections(this, e, !0).length;
							}
							static getSelfIntersections(e, t, n = !1) {
								let r = [];
								for (let i of e) {
									let o = t.search(i.box);
									for (let t of o) {
										if (i === t) continue;
										if (t.face !== e) continue;
										if (
											i.shape instanceof S.Segment &&
											t.shape instanceof S.Segment &&
											(i.next === t || i.prev === t)
										)
											continue;
										let o = i.shape.intersect(t.shape);
										for (let e of o)
											if (
												(!e.equalTo(i.start) || !e.equalTo(t.end) || t !== i.prev) &&
												(!e.equalTo(i.end) || !e.equalTo(t.start) || t !== i.next) &&
												(r.push(e), n)
											)
												break;
										if (r.length > 0 && n) break;
									}
									if (r.length > 0 && n) break;
								}
								return r;
							}
							findEdgeByPoint(e) {
								let t;
								for (let n of this)
									if (n.shape.contains(e)) {
										t = n;
										break;
									}
								return t;
							}
							toPolygon() {
								return new S.Polygon(this.shapes);
							}
							toJSON() {
								return this.edges.map((e) => e.toJSON());
							}
							svg() {
								let e = `\nM${this.first.start.x},${this.first.start.y}`;
								for (let t of this) e += t.svg();
								return (e += ' z'), e;
							}
						}
						S.Face = pt;
						class ft {
							constructor(...e) {
								if (
									((this.pt = new S.Point()),
									(this.norm = new S.Vector(0, 1)),
									0 != e.length &&
										(e.length >= 1 && e[0] instanceof S.Point && (this.pt = e[0].clone()),
										1 !== e.length))
								) {
									if (!(2 === e.length && e[1] instanceof S.Vector))
										throw S.Errors.ILLEGAL_PARAMETERS;
									this.norm = e[1].clone();
								}
							}
							clone() {
								return new ft(this.pt, this.norm);
							}
							get slope() {
								return new S.Vector(this.norm.y, -this.norm.x).slope;
							}
							get box() {
								let e = this.slope;
								return new S.Box(
									e > Math.PI / 2 && e < (3 * Math.PI) / 2 ? Number.NEGATIVE_INFINITY : this.pt.x,
									e >= 0 && e <= Math.PI ? this.pt.y : Number.NEGATIVE_INFINITY,
									e >= Math.PI / 2 && e <= (3 * Math.PI) / 2 ? this.pt.x : Number.POSITIVE_INFINITY,
									(e >= Math.PI && e <= 2 * Math.PI) || 0 == e
										? this.pt.y
										: Number.POSITIVE_INFINITY,
								);
							}
							get start() {
								return this.pt;
							}
							get end() {}
							get length() {
								return Number.POSITIVE_INFINITY;
							}
							contains(e) {
								if (this.pt.equalTo(e)) return !0;
								let t = new S.Vector(this.pt, e);
								return S.Utils.EQ_0(this.norm.dot(t)) && S.Utils.GE(t.cross(this.norm), 0);
							}
							split(e) {
								return this.contains(e)
									? this.pt.equalTo(e)
										? [this]
										: [new S.Segment(this.pt, e), new S.Ray(e, this.norm)]
									: [];
							}
							intersect(e) {
								return e instanceof S.Segment
									? this.intersectRay2Segment(this, e)
									: e instanceof S.Arc
									? this.intersectRay2Arc(this, e)
									: void 0;
							}
							intersectRay2Segment(e, t) {
								let n = [],
									r = new S.Line(e.start, e.norm),
									i = r.intersect(t);
								for (let o of i) e.contains(o) && n.push(o);
								return 2 == i.length && 1 == n.length && e.start.on(r) && n.push(e.start), n;
							}
							intersectRay2Arc(e, t) {
								let n = [],
									r = new S.Line(e.start, e.norm).intersect(t);
								for (let i of r) e.contains(i) && n.push(i);
								return n;
							}
							svg(e, t = {}) {
								let n = fe(new S.Line(this.pt, this.norm), e);
								return (
									(n = n.filter((e) => this.contains(e))),
									0 === n.length || 2 === n.length ? '' : new S.Segment(this.pt, n[0]).svg(t)
								);
							}
						}
						S.Ray = ft;
						const dt = (...e) => new S.Ray(...e);
						S.ray = dt;
						class gt {
							constructor() {
								(this.faces = new S.PlanarSet()), (this.edges = new S.PlanarSet());
								let e = [...arguments];
								if (
									1 === e.length &&
									((e[0] instanceof Array && e[0].length > 0) ||
										e[0] instanceof S.Circle ||
										e[0] instanceof S.Box)
								) {
									let t = e[0];
									if (e[0] instanceof Array && e[0].every((e) => e instanceof Array))
										if (
											t.every(
												(e) =>
													e instanceof Array &&
													2 === e.length &&
													'number' == typeof e[0] &&
													'number' == typeof e[1],
											)
										)
											this.faces.add(new S.Face(this, t));
										else
											for (let e of t)
												if (
													e instanceof Array &&
													e[0] instanceof Array &&
													e[0].every(
														(e) =>
															e instanceof Array &&
															2 === e.length &&
															'number' == typeof e[0] &&
															'number' == typeof e[1],
													)
												)
													for (let t of e) this.faces.add(new S.Face(this, t));
												else this.faces.add(new S.Face(this, e));
									else this.faces.add(new S.Face(this, t));
								}
							}
							get box() {
								return [...this.faces].reduce((e, t) => e.merge(t.box), new S.Box());
							}
							get vertices() {
								return [...this.edges].map((e) => e.start);
							}
							clone() {
								let e = new gt();
								for (let t of this.faces) e.addFace(t.shapes);
								return e;
							}
							isEmpty() {
								return 0 === this.edges.size;
							}
							isValid() {
								let e = !0;
								for (let t of this.faces)
									if (!t.isSimple(this.edges)) {
										e = !1;
										break;
									}
								return e;
							}
							area() {
								let e = [...this.faces].reduce((e, t) => e + t.signedArea(), 0);
								return Math.abs(e);
							}
							addFace(...e) {
								let t = new S.Face(this, ...e);
								return this.faces.add(t), t;
							}
							deleteFace(e) {
								for (let t of e) this.edges.delete(t);
								return this.faces.delete(e);
							}
							recreateFaces() {
								this.faces.clear();
								for (let n of this.edges) n.face = null;
								let e,
									t = !0;
								for (; t; ) {
									t = !1;
									for (let n of this.edges)
										if (null === n.face) {
											(e = n), (t = !0);
											break;
										}
									if (t) {
										let t = e;
										do {
											t = t.next;
										} while (t.next !== e);
										this.addFace(e, t);
									}
								}
							}
							removeChain(e, t, n) {
								if (n.next !== t) {
									for (let r = t; r !== n.next; r = r.next)
										if ((e.remove(r), this.edges.delete(r), e.isEmpty())) {
											this.deleteFace(e);
											break;
										}
								} else this.deleteFace(e);
							}
							addVertex(e, t) {
								let n = t.shape.split(e);
								if (null === n[0]) return t.prev;
								if (null === n[1]) return t;
								let r = new S.Edge(n[0]),
									i = t.prev;
								return (
									t.face.insert(r, i),
									this.edges.delete(t),
									this.edges.add(r),
									(t.shape = n[1]),
									this.edges.add(t),
									r
								);
							}
							cut(e) {
								let t = [this.clone()];
								for (let n of e) {
									if (n.setInclusion(this) !== s) continue;
									let e = n.shape.start,
										r = n.shape.end,
										i = [];
									for (let n of t)
										if (void 0 === n.findEdgeByPoint(e)) i.push(n);
										else {
											let [t, o] = n.cutFace(e, r);
											i.push(t, o);
										}
									t = i;
								}
								return t;
							}
							cutFace(e, t) {
								let n = this.findEdgeByPoint(e),
									r = this.findEdgeByPoint(t);
								if (n.face !== r.face) return [];
								let i = this.addVertex(e, n);
								r = this.findEdgeByPoint(t);
								let o = this.addVertex(t, r),
									a = i.face,
									s = new S.Edge(new S.Segment(i.end, o.end)),
									l = new S.Edge(new S.Segment(o.end, i.end));
								(i.next.prev = l),
									(l.next = i.next),
									(i.next = s),
									(s.prev = i),
									(o.next.prev = s),
									(s.next = o.next),
									(o.next = l),
									(l.prev = o),
									this.edges.add(s),
									this.edges.add(l);
								let h = this.addFace(s, i),
									c = this.addFace(l, o);
								return this.faces.delete(a), [h.toPolygon(), c.toPolygon()];
							}
							cutWithLine(e) {
								let t = this.clone(),
									n = new Fe([e]),
									r = {
										int_points1: [],
										int_points2: [],
										int_points1_sorted: [],
										int_points2_sorted: [],
									};
								for (let a of t.edges) {
									let t = xe(a, e);
									for (let e of t) P(n.first, e, r.int_points1), P(a, e, r.int_points2);
								}
								if (0 === r.int_points1.length) return t;
								(r.int_points1_sorted = O(e, r.int_points1)),
									(r.int_points2_sorted = D(r.int_points2)),
									k(n, r.int_points1_sorted),
									k(t, r.int_points2_sorted),
									M(r),
									(r.int_points1_sorted = O(e, r.int_points1)),
									(r.int_points2_sorted = D(r.int_points2)),
									E(r.int_points1),
									I(r.int_points1, t);
								for (let a of r.int_points1_sorted)
									a.edge_before.bv === a.edge_after.bv && ((r.int_points2[a.id] = -1), (a.id = -1));
								if (
									((r.int_points1 = r.int_points1.filter((e) => e.id >= 0)),
									(r.int_points2 = r.int_points2.filter((e) => e.id >= 0)),
									0 === r.int_points1.length)
								)
									return t;
								(r.int_points1_sorted = O(e, r.int_points1)),
									(r.int_points2_sorted = D(r.int_points2));
								let i,
									o = r.int_points1[0];
								for (let a of r.int_points1_sorted)
									a.edge_before.bv === s &&
										((i = new S.Edge(new S.Segment(o.pt, a.pt))),
										F(r.int_points2[o.id], r.int_points2[a.id], i),
										t.edges.add(i),
										(i = new S.Edge(new S.Segment(a.pt, o.pt))),
										F(r.int_points2[a.id], r.int_points2[o.id], i),
										t.edges.add(i)),
										(o = a);
								return t.recreateFaces(), t;
							}
							findEdgeByPoint(e) {
								let t;
								for (let n of this.faces) if (((t = n.findEdgeByPoint(e)), void 0 !== t)) break;
								return t;
							}
							splitToIslands() {
								let e = this.toArray();
								e.sort((e, t) => t.area() - e.area());
								let t = [...e[0].faces][0].orientation(),
									n = e.filter((e) => [...e.faces][0].orientation() === t);
								for (let r of e) {
									let e = [...r.faces][0];
									if (e.orientation() !== t)
										for (let t of n)
											if (e.shapes.every((e) => t.contains(e))) {
												t.addFace(e.shapes);
												break;
											}
								}
								return n;
							}
							reverse() {
								for (let e of this.faces) e.reverse();
								return this;
							}
							contains(e) {
								if (e instanceof S.Point) {
									let t = Ae(this, e);
									return t === s || t === h;
								}
								return Be(this, e);
							}
							distanceTo(e) {
								if (e instanceof S.Point) {
									let [t, n] = S.Distance.point2polygon(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (
									e instanceof S.Circle ||
									e instanceof S.Line ||
									e instanceof S.Segment ||
									e instanceof S.Arc
								) {
									let [t, n] = S.Distance.shape2polygon(e, this);
									return (n = n.reverse()), [t, n];
								}
								if (e instanceof S.Polygon) {
									let t,
										n,
										r = [Number.POSITIVE_INFINITY, new S.Segment()];
									for (let i of this.edges) {
										let o = r[0];
										([t, n] = S.Distance.shape2planarSet(i.shape, e.edges, o)),
											S.Utils.LT(t, o) && (r = [t, n]);
									}
									return r;
								}
							}
							intersect(e) {
								return e instanceof S.Point
									? this.contains(e)
										? [e]
										: []
									: e instanceof S.Line
									? Me(e, this)
									: e instanceof S.Circle
									? Ee(e, this)
									: e instanceof S.Segment
									? Te(e, this)
									: e instanceof S.Arc
									? Oe(e, this)
									: e instanceof S.Polygon
									? (function (e, t) {
											let n = [];
											if (e.isEmpty() || t.isEmpty()) return n;
											if (e.box.not_intersect(t.box)) return n;
											for (let r of e.edges) for (let e of Ce(r, t)) n.push(e);
											return n;
									  })(e, this)
									: void 0;
							}
							translate(e) {
								let t = new gt();
								for (let n of this.faces) t.addFace(n.shapes.map((t) => t.translate(e)));
								return t;
							}
							rotate(e = 0, t = new S.Point()) {
								let n = new gt();
								for (let r of this.faces) n.addFace(r.shapes.map((n) => n.rotate(e, t)));
								return n;
							}
							transform(e = new S.Matrix()) {
								let t = new gt();
								for (let n of this.faces) t.addFace(n.shapes.map((t) => t.transform(e)));
								return t;
							}
							toJSON() {
								return [...this.faces].map((e) => e.toJSON());
							}
							toArray() {
								return [...this.faces].map((e) => e.toPolygon());
							}
							svg(e = {}) {
								let {
										stroke: t,
										strokeWidth: n,
										fill: r,
										fillRule: i,
										fillOpacity: o,
										id: a,
										className: s,
									} = e,
									l = `\n<path stroke="${t || 'black'}" stroke-width="${n || 1}" fill="${
										r || 'lightcyan'
									}" fill-rule="${i || 'evenodd'}" fill-opacity="${o || 1}" ${
										a && a.length > 0 ? `id="${a}"` : ''
									} ${s && s.length > 0 ? `class="${s}"` : ''} d="`;
								for (let h of this.faces) l += h.svg();
								return (l += '" >\n</path>'), l;
							}
						}
						S.Polygon = gt;
						const yt = (...e) => new S.Polygon(...e);
						S.polygon = yt;
						const { Circle: mt, Line: vt, Point: wt, Vector: bt, Utils: St } = S;
						class _t {
							constructor(e) {
								this.circle = e;
							}
							get inversion_circle() {
								return this.circle;
							}
							static inversePoint(e, t) {
								const n = new bt(e.pc, t),
									r = e.r * e.r,
									i = n.dot(n);
								return St.EQ_0(i)
									? new wt(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY)
									: e.pc.translate(n.multiply(r / i));
							}
							static inverseCircle(e, t) {
								const n = e.pc.distanceTo(t.pc)[0];
								if (St.EQ(n, t.r)) {
									let n = (e.r * e.r) / (2 * t.r),
										r = new bt(e.pc, t.pc);
									r = r.normalize();
									let i = e.pc.translate(r.multiply(n));
									return new vt(i, r);
								}
								{
									let n = new bt(e.pc, t.pc),
										r = (e.r * e.r) / (n.dot(n) - t.r * t.r),
										i = e.pc.translate(n.multiply(r)),
										o = Math.abs(r) * t.r;
									return new mt(i, o);
								}
							}
							static inverseLine(e, t) {
								const [n, r] = e.pc.distanceTo(t);
								if (St.EQ_0(n)) return t.clone();
								{
									let t = (e.r * e.r) / (2 * n),
										i = new bt(e.pc, r.end);
									return (i = i.multiply(t / n)), new mt(e.pc.translate(i), t);
								}
							}
							inverse(e) {
								return e instanceof wt
									? _t.inversePoint(this.circle, e)
									: e instanceof mt
									? _t.inverseCircle(this.circle, e)
									: e instanceof vt
									? _t.inverseLine(this.circle, e)
									: void 0;
							}
						}
						S.Inversion = _t;
						const Pt = (e) => new S.Inversion(e);
						S.inversion = Pt;
						class xt {
							static point2point(e, t) {
								return e.distanceTo(t);
							}
							static point2line(e, t) {
								let n = e.projectionOn(t);
								return [new S.Vector(e, n).length, new S.Segment(e, n)];
							}
							static point2circle(e, t) {
								let [n, r] = e.distanceTo(t.center);
								if (S.Utils.EQ_0(n)) return [t.r, new S.Segment(e, t.toArc().start)];
								{
									let r = Math.abs(n - t.r),
										i = new S.Vector(t.pc, e).normalize().multiply(t.r),
										o = t.pc.translate(i);
									return [r, new S.Segment(e, o)];
								}
							}
							static point2segment(e, t) {
								if (t.start.equalTo(t.end)) return xt.point2point(e, t.start);
								let n,
									r,
									i = new S.Vector(t.start, t.end),
									o = new S.Vector(t.start, e),
									a = new S.Vector(t.end, e),
									s = i.dot(o),
									l = -i.dot(a);
								if (S.Utils.GE(s, 0) && S.Utils.GE(l, 0)) {
									let i = t.tangentInStart();
									return (
										(n = Math.abs(i.cross(o))),
										(r = t.start.translate(i.multiply(i.dot(o)))),
										[n, new S.Segment(e, r)]
									);
								}
								return s < 0 ? e.distanceTo(t.start) : e.distanceTo(t.end);
							}
							static point2arc(e, t) {
								let n,
									r,
									i = new S.Circle(t.pc, t.r),
									o = [];
								return (
									([n, r] = xt.point2circle(e, i)),
									r.end.on(t) && o.push(xt.point2circle(e, i)),
									o.push(xt.point2point(e, t.start)),
									o.push(xt.point2point(e, t.end)),
									xt.sort(o),
									o[0]
								);
							}
							static segment2line(e, t) {
								let n = e.intersect(t);
								if (n.length > 0) return [0, new S.Segment(n[0], n[0])];
								let r = [];
								return (
									r.push(xt.point2line(e.start, t)),
									r.push(xt.point2line(e.end, t)),
									xt.sort(r),
									r[0]
								);
							}
							static segment2segment(e, t) {
								let n = ye(e, t);
								if (n.length > 0) return [0, new S.Segment(n[0], n[0])];
								let r,
									i,
									o = [];
								return (
									([r, i] = xt.point2segment(t.start, e)),
									o.push([r, i.reverse()]),
									([r, i] = xt.point2segment(t.end, e)),
									o.push([r, i.reverse()]),
									o.push(xt.point2segment(e.start, t)),
									o.push(xt.point2segment(e.end, t)),
									xt.sort(o),
									o[0]
								);
							}
							static segment2circle(e, t) {
								let n = e.intersect(t);
								if (n.length > 0) return [0, new S.Segment(n[0], n[0])];
								let r = new S.Line(e.ps, e.pe),
									[i, o] = xt.point2line(t.center, r);
								if (S.Utils.GE(i, t.r) && o.end.on(e)) return xt.point2circle(o.end, t);
								{
									let [n, r] = xt.point2circle(e.start, t),
										[i, o] = xt.point2circle(e.end, t);
									return S.Utils.LT(n, i) ? [n, r] : [i, o];
								}
							}
							static segment2arc(e, t) {
								let n = e.intersect(t);
								if (n.length > 0) return [0, new S.Segment(n[0], n[0])];
								let r = new S.Line(e.ps, e.pe),
									i = new S.Circle(t.pc, t.r),
									[o, a] = xt.point2line(i.center, r);
								if (S.Utils.GE(o, i.r) && a.end.on(e)) {
									let [e, n] = xt.point2circle(a.end, i);
									if (n.end.on(t)) return [e, n];
								}
								let s,
									l,
									h = [];
								return (
									h.push(xt.point2arc(e.start, t)),
									h.push(xt.point2arc(e.end, t)),
									([s, l] = xt.point2segment(t.start, e)),
									h.push([s, l.reverse()]),
									([s, l] = xt.point2segment(t.end, e)),
									h.push([s, l.reverse()]),
									xt.sort(h),
									h[0]
								);
							}
							static circle2circle(e, t) {
								let n = e.intersect(t);
								if (n.length > 0) return [0, new S.Segment(n[0], n[0])];
								if (e.center.equalTo(t.center)) {
									let n = e.toArc(),
										r = t.toArc();
									return xt.point2point(n.start, r.start);
								}
								{
									let n = new S.Line(e.center, t.center),
										r = n.intersect(e),
										i = n.intersect(t),
										o = [];
									return (
										o.push(xt.point2point(r[0], i[0])),
										o.push(xt.point2point(r[0], i[1])),
										o.push(xt.point2point(r[1], i[0])),
										o.push(xt.point2point(r[1], i[1])),
										xt.sort(o),
										o[0]
									);
								}
							}
							static circle2line(e, t) {
								let n = e.intersect(t);
								if (n.length > 0) return [0, new S.Segment(n[0], n[0])];
								let [r, i] = xt.point2line(e.center, t),
									[o, a] = xt.point2circle(i.end, e);
								return (a = a.reverse()), [o, a];
							}
							static arc2line(e, t) {
								let n = t.intersect(e);
								if (n.length > 0) return [0, new S.Segment(n[0], n[0])];
								let r = new S.Circle(e.center, e.r),
									[i, o] = xt.point2line(r.center, t);
								if (!S.Utils.GE(i, r.r)) {
									let n = [];
									return (
										n.push(xt.point2line(e.start, t)),
										n.push(xt.point2line(e.end, t)),
										xt.sort(n),
										n[0]
									);
								}
								{
									let [t, n] = xt.point2circle(o.end, r);
									if (n.end.on(e)) return [t, n];
								}
							}
							static arc2circle(e, t) {
								let n = e.intersect(t);
								if (n.length > 0) return [0, new S.Segment(n[0], n[0])];
								let r = new S.Circle(e.center, e.r),
									[i, o] = xt.circle2circle(r, t);
								if (o.start.on(e)) return [i, o];
								{
									let n = [];
									return (
										n.push(xt.point2circle(e.start, t)),
										n.push(xt.point2circle(e.end, t)),
										xt.sort(n),
										n[0]
									);
								}
							}
							static arc2arc(e, t) {
								let n = e.intersect(t);
								if (n.length > 0) return [0, new S.Segment(n[0], n[0])];
								let r = new S.Circle(e.center, e.r),
									i = new S.Circle(t.center, t.r),
									[o, a] = xt.circle2circle(r, i);
								if (a.start.on(e) && a.end.on(t)) return [o, a];
								{
									let n,
										r,
										i = [];
									return (
										([n, r] = xt.point2arc(e.start, t)),
										r.end.on(t) && i.push([n, r]),
										([n, r] = xt.point2arc(e.end, t)),
										r.end.on(t) && i.push([n, r]),
										([n, r] = xt.point2arc(t.start, e)),
										r.end.on(e) && i.push([n, r.reverse()]),
										([n, r] = xt.point2arc(t.end, e)),
										r.end.on(e) && i.push([n, r.reverse()]),
										([n, r] = xt.point2point(e.start, t.start)),
										i.push([n, r]),
										([n, r] = xt.point2point(e.start, t.end)),
										i.push([n, r]),
										([n, r] = xt.point2point(e.end, t.start)),
										i.push([n, r]),
										([n, r] = xt.point2point(e.end, t.end)),
										i.push([n, r]),
										xt.sort(i),
										i[0]
									);
								}
							}
							static point2polygon(e, t) {
								let n = [Number.POSITIVE_INFINITY, new S.Segment()];
								for (let r of t.edges) {
									let [t, i] =
										r.shape instanceof S.Segment
											? xt.point2segment(e, r.shape)
											: xt.point2arc(e, r.shape);
									S.Utils.LT(t, n[0]) && (n = [t, i]);
								}
								return n;
							}
							static shape2polygon(e, t) {
								let n = [Number.POSITIVE_INFINITY, new S.Segment()];
								for (let r of t.edges) {
									let [t, i] = e.distanceTo(r.shape);
									S.Utils.LT(t, n[0]) && (n = [t, i]);
								}
								return n;
							}
							static polygon2polygon(e, t) {
								let n = [Number.POSITIVE_INFINITY, new S.Segment()];
								for (let r of e.edges)
									for (let e of t.edges) {
										let [t, i] = r.shape.distanceTo(e.shape);
										S.Utils.LT(t, n[0]) && (n = [t, i]);
									}
								return n;
							}
							static box2box_minmax(e, t) {
								let n = Math.max(Math.max(e.xmin - t.xmax, 0), Math.max(t.xmin - e.xmax, 0)),
									r = Math.max(Math.max(e.ymin - t.ymax, 0), Math.max(t.ymin - e.ymax, 0)),
									i = n * n + r * r,
									o = e.merge(t),
									a = o.xmax - o.xmin,
									s = o.ymax - o.ymin;
								return [i, a * a + s * s];
							}
							static minmax_tree_process_level(e, t, n, r) {
								let i, o;
								for (let s of t)
									([i, o] = xt.box2box_minmax(e.box, s.item.key)),
										s.item.value instanceof S.Edge
											? r.insert([i, o], s.item.value.shape)
											: r.insert([i, o], s.item.value),
										S.Utils.LT(o, n) && (n = o);
								if (0 === t.length) return n;
								let a = [
									...t.map((e) => (e.left.isNil() ? void 0 : e.left)).filter((e) => void 0 !== e),
									...t.map((e) => (e.right.isNil() ? void 0 : e.right)).filter((e) => void 0 !== e),
								].filter((t) => {
									let [r, i] = xt.box2box_minmax(e.box, t.max);
									return S.Utils.LE(r, n);
								});
								return (n = xt.minmax_tree_process_level(e, a, n, r));
							}
							static minmax_tree(e, t, n) {
								let r = new qe(),
									i = [t.index.root],
									o = n < Number.POSITIVE_INFINITY ? n * n : Number.POSITIVE_INFINITY;
								return (o = xt.minmax_tree_process_level(e, i, o, r)), r;
							}
							static minmax_tree_calc_distance(e, t, n) {
								let r, i;
								if (null != t && !t.isNil()) {
									if ((([r, i] = xt.minmax_tree_calc_distance(e, t.left, n)), i)) return [r, i];
									if (S.Utils.LT(r[0], Math.sqrt(t.item.key.low))) return [r, !0];
									let [o, a] = xt.distance(e, t.item.value);
									return (
										S.Utils.LT(o, r[0]) && (r = [o, a]),
										([r, i] = xt.minmax_tree_calc_distance(e, t.right, r)),
										[r, i]
									);
								}
								return [n, !1];
							}
							static shape2planarSet(e, t, n = Number.POSITIVE_INFINITY) {
								let r = [n, new S.Segment()],
									i = !1;
								if (t instanceof S.PlanarSet) {
									let o = xt.minmax_tree(e, t, n);
									[r, i] = xt.minmax_tree_calc_distance(e, o.root, r);
								}
								return r;
							}
							static sort(e) {
								e.sort((e, t) => (S.Utils.LT(e[0], t[0]) ? -1 : S.Utils.GT(e[0], t[0]) ? 1 : 0));
							}
							static distance(e, t) {
								return e.distanceTo(t);
							}
						}
						(S.Distance = xt), (S.BooleanOperations = ie), (S.Relations = Ue), (t.default = S);
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(59), t),
							i(n(133), t),
							i(n(16), t),
							i(n(353), t),
							i(n(119), t),
							i(n(354), t),
							i(n(359), t),
							i(n(360), t),
							i(n(82), t),
							i(n(361), t),
							i(n(362), t),
							i(n(363), t),
							i(n(364), t),
							i(n(365), t),
							i(n(366), t),
							i(n(367), t),
							i(n(368), t),
							i(n(369), t),
							i(n(370), t),
							i(n(371), t),
							i(n(372), t),
							i(n(373), t),
							i(n(374), t),
							i(n(375), t),
							i(n(376), t),
							i(n(377), t),
							i(n(378), t),
							i(n(379), t),
							i(n(380), t),
							i(n(381), t),
							i(n(382), t),
							i(n(383), t),
							i(n(384), t),
							i(n(385), t),
							i(n(386), t),
							i(n(387), t),
							i(n(388), t),
							i(n(389), t),
							i(n(390), t),
							i(n(391), t),
							i(n(392), t),
							i(n(393), t),
							i(n(394), t),
							i(n(395), t),
							i(n(396), t),
							i(n(397), t),
							i(n(398), t),
							i(n(399), t),
							i(n(400), t),
							i(n(401), t),
							i(n(402), t),
							i(n(403), t),
							i(n(404), t),
							i(n(405), t),
							i(n(406), t),
							i(n(407), t),
							i(n(408), t),
							i(n(409), t),
							i(n(416), t),
							i(n(417), t),
							i(n(418), t),
							i(n(419), t),
							i(n(420), t),
							i(n(421), t),
							i(n(422), t),
							i(n(423), t),
							i(n(424), t),
							i(n(425), t),
							i(n(426), t),
							i(n(427), t),
							i(n(428), t),
							i(n(429), t),
							i(n(430), t),
							i(n(431), t),
							i(n(432), t),
							i(n(433), t),
							i(n(434), t),
							i(n(435), t),
							i(n(436), t),
							i(n(437), t),
							i(n(438), t),
							i(n(31), t),
							i(n(439), t),
							i(n(440), t),
							i(n(441), t);
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(132), t),
							i(n(112), t),
							i(n(442), t),
							i(n(443), t),
							i(n(444), t),
							i(n(113), t),
							i(n(445), t),
							i(n(446), t),
							i(n(447), t),
							i(n(107), t),
							i(n(448), t),
							i(n(449), t),
							i(n(450), t),
							i(n(451), t),
							i(n(452), t),
							i(n(453), t),
							i(n(454), t);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
						var r = function (e, t) {
							return (r =
								Object.setPrototypeOf ||
								({
									__proto__: [],
								} instanceof Array &&
									function (e, t) {
										e.__proto__ = t;
									}) ||
								function (e, t) {
									for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
								})(e, t);
						};
						function i(e, t) {
							function n() {
								this.constructor = e;
							}
							r(e, t),
								(e.prototype =
									null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
						}
					},
					function (e, t, n) {
						'use strict';
						n.r(t),
							n.d(t, 'Transform', function () {
								return i;
							}),
							n.d(t, 'Util', function () {
								return u;
							});
						var r = n(14);
						class i {
							constructor(e = [1, 0, 0, 1, 0, 0]) {
								(this.dirty = !1), (this.m = (e && e.slice()) || [1, 0, 0, 1, 0, 0]);
							}
							reset() {
								(this.m[0] = 1),
									(this.m[1] = 0),
									(this.m[2] = 0),
									(this.m[3] = 1),
									(this.m[4] = 0),
									(this.m[5] = 0);
							}
							copy() {
								return new i(this.m);
							}
							copyInto(e) {
								(e.m[0] = this.m[0]),
									(e.m[1] = this.m[1]),
									(e.m[2] = this.m[2]),
									(e.m[3] = this.m[3]),
									(e.m[4] = this.m[4]),
									(e.m[5] = this.m[5]);
							}
							point(e) {
								var t = this.m;
								return {
									x: t[0] * e.x + t[2] * e.y + t[4],
									y: t[1] * e.x + t[3] * e.y + t[5],
								};
							}
							translate(e, t) {
								return (
									(this.m[4] += this.m[0] * e + this.m[2] * t),
									(this.m[5] += this.m[1] * e + this.m[3] * t),
									this
								);
							}
							scale(e, t) {
								return (this.m[0] *= e), (this.m[1] *= e), (this.m[2] *= t), (this.m[3] *= t), this;
							}
							rotate(e) {
								var t = Math.cos(e),
									n = Math.sin(e),
									r = this.m[0] * t + this.m[2] * n,
									i = this.m[1] * t + this.m[3] * n,
									o = this.m[0] * -n + this.m[2] * t,
									a = this.m[1] * -n + this.m[3] * t;
								return (this.m[0] = r), (this.m[1] = i), (this.m[2] = o), (this.m[3] = a), this;
							}
							getTranslation() {
								return {
									x: this.m[4],
									y: this.m[5],
								};
							}
							skew(e, t) {
								var n = this.m[0] + this.m[2] * t,
									r = this.m[1] + this.m[3] * t,
									i = this.m[2] + this.m[0] * e,
									o = this.m[3] + this.m[1] * e;
								return (this.m[0] = n), (this.m[1] = r), (this.m[2] = i), (this.m[3] = o), this;
							}
							multiply(e) {
								var t = this.m[0] * e.m[0] + this.m[2] * e.m[1],
									n = this.m[1] * e.m[0] + this.m[3] * e.m[1],
									r = this.m[0] * e.m[2] + this.m[2] * e.m[3],
									i = this.m[1] * e.m[2] + this.m[3] * e.m[3],
									o = this.m[0] * e.m[4] + this.m[2] * e.m[5] + this.m[4],
									a = this.m[1] * e.m[4] + this.m[3] * e.m[5] + this.m[5];
								return (
									(this.m[0] = t),
									(this.m[1] = n),
									(this.m[2] = r),
									(this.m[3] = i),
									(this.m[4] = o),
									(this.m[5] = a),
									this
								);
							}
							invert() {
								var e = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]),
									t = this.m[3] * e,
									n = -this.m[1] * e,
									r = -this.m[2] * e,
									i = this.m[0] * e,
									o = e * (this.m[2] * this.m[5] - this.m[3] * this.m[4]),
									a = e * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);
								return (
									(this.m[0] = t),
									(this.m[1] = n),
									(this.m[2] = r),
									(this.m[3] = i),
									(this.m[4] = o),
									(this.m[5] = a),
									this
								);
							}
							getMatrix() {
								return this.m;
							}
							setAbsolutePosition(e, t) {
								var n = this.m[0],
									r = this.m[1],
									i = this.m[2],
									o = this.m[3],
									a = this.m[4],
									s = (n * (t - this.m[5]) - r * (e - a)) / (n * o - r * i),
									l = (e - a - i * s) / n;
								return this.translate(l, s);
							}
							decompose() {
								var e = this.m[0],
									t = this.m[1],
									n = this.m[2],
									r = this.m[3],
									i = e * r - t * n;
								let o = {
									x: this.m[4],
									y: this.m[5],
									rotation: 0,
									scaleX: 0,
									scaleY: 0,
									skewX: 0,
									skewY: 0,
								};
								if (0 != e || 0 != t) {
									var a = Math.sqrt(e * e + t * t);
									(o.rotation = t > 0 ? Math.acos(e / a) : -Math.acos(e / a)),
										(o.scaleX = a),
										(o.scaleY = i / a),
										(o.skewX = (e * n + t * r) / i),
										(o.skewY = 0);
								} else if (0 != n || 0 != r) {
									var s = Math.sqrt(n * n + r * r);
									(o.rotation = Math.PI / 2 - (r > 0 ? Math.acos(-n / s) : -Math.acos(n / s))),
										(o.scaleX = i / s),
										(o.scaleY = s),
										(o.skewX = 0),
										(o.skewY = (e * n + t * r) / i);
								}
								return (o.rotation = u._getRotation(o.rotation)), o;
							}
						}
						var o = Math.PI / 180,
							a = 180 / Math.PI,
							s = {
								aliceblue: [240, 248, 255],
								antiquewhite: [250, 235, 215],
								aqua: [0, 255, 255],
								aquamarine: [127, 255, 212],
								azure: [240, 255, 255],
								beige: [245, 245, 220],
								bisque: [255, 228, 196],
								black: [0, 0, 0],
								blanchedalmond: [255, 235, 205],
								blue: [0, 0, 255],
								blueviolet: [138, 43, 226],
								brown: [165, 42, 42],
								burlywood: [222, 184, 135],
								cadetblue: [95, 158, 160],
								chartreuse: [127, 255, 0],
								chocolate: [210, 105, 30],
								coral: [255, 127, 80],
								cornflowerblue: [100, 149, 237],
								cornsilk: [255, 248, 220],
								crimson: [220, 20, 60],
								cyan: [0, 255, 255],
								darkblue: [0, 0, 139],
								darkcyan: [0, 139, 139],
								darkgoldenrod: [184, 132, 11],
								darkgray: [169, 169, 169],
								darkgreen: [0, 100, 0],
								darkgrey: [169, 169, 169],
								darkkhaki: [189, 183, 107],
								darkmagenta: [139, 0, 139],
								darkolivegreen: [85, 107, 47],
								darkorange: [255, 140, 0],
								darkorchid: [153, 50, 204],
								darkred: [139, 0, 0],
								darksalmon: [233, 150, 122],
								darkseagreen: [143, 188, 143],
								darkslateblue: [72, 61, 139],
								darkslategray: [47, 79, 79],
								darkslategrey: [47, 79, 79],
								darkturquoise: [0, 206, 209],
								darkviolet: [148, 0, 211],
								deeppink: [255, 20, 147],
								deepskyblue: [0, 191, 255],
								dimgray: [105, 105, 105],
								dimgrey: [105, 105, 105],
								dodgerblue: [30, 144, 255],
								firebrick: [178, 34, 34],
								floralwhite: [255, 255, 240],
								forestgreen: [34, 139, 34],
								fuchsia: [255, 0, 255],
								gainsboro: [220, 220, 220],
								ghostwhite: [248, 248, 255],
								gold: [255, 215, 0],
								goldenrod: [218, 165, 32],
								gray: [128, 128, 128],
								green: [0, 128, 0],
								greenyellow: [173, 255, 47],
								grey: [128, 128, 128],
								honeydew: [240, 255, 240],
								hotpink: [255, 105, 180],
								indianred: [205, 92, 92],
								indigo: [75, 0, 130],
								ivory: [255, 255, 240],
								khaki: [240, 230, 140],
								lavender: [230, 230, 250],
								lavenderblush: [255, 240, 245],
								lawngreen: [124, 252, 0],
								lemonchiffon: [255, 250, 205],
								lightblue: [173, 216, 230],
								lightcoral: [240, 128, 128],
								lightcyan: [224, 255, 255],
								lightgoldenrodyellow: [250, 250, 210],
								lightgray: [211, 211, 211],
								lightgreen: [144, 238, 144],
								lightgrey: [211, 211, 211],
								lightpink: [255, 182, 193],
								lightsalmon: [255, 160, 122],
								lightseagreen: [32, 178, 170],
								lightskyblue: [135, 206, 250],
								lightslategray: [119, 136, 153],
								lightslategrey: [119, 136, 153],
								lightsteelblue: [176, 196, 222],
								lightyellow: [255, 255, 224],
								lime: [0, 255, 0],
								limegreen: [50, 205, 50],
								linen: [250, 240, 230],
								magenta: [255, 0, 255],
								maroon: [128, 0, 0],
								mediumaquamarine: [102, 205, 170],
								mediumblue: [0, 0, 205],
								mediumorchid: [186, 85, 211],
								mediumpurple: [147, 112, 219],
								mediumseagreen: [60, 179, 113],
								mediumslateblue: [123, 104, 238],
								mediumspringgreen: [0, 250, 154],
								mediumturquoise: [72, 209, 204],
								mediumvioletred: [199, 21, 133],
								midnightblue: [25, 25, 112],
								mintcream: [245, 255, 250],
								mistyrose: [255, 228, 225],
								moccasin: [255, 228, 181],
								navajowhite: [255, 222, 173],
								navy: [0, 0, 128],
								oldlace: [253, 245, 230],
								olive: [128, 128, 0],
								olivedrab: [107, 142, 35],
								orange: [255, 165, 0],
								orangered: [255, 69, 0],
								orchid: [218, 112, 214],
								palegoldenrod: [238, 232, 170],
								palegreen: [152, 251, 152],
								paleturquoise: [175, 238, 238],
								palevioletred: [219, 112, 147],
								papayawhip: [255, 239, 213],
								peachpuff: [255, 218, 185],
								peru: [205, 133, 63],
								pink: [255, 192, 203],
								plum: [221, 160, 203],
								powderblue: [176, 224, 230],
								purple: [128, 0, 128],
								rebeccapurple: [102, 51, 153],
								red: [255, 0, 0],
								rosybrown: [188, 143, 143],
								royalblue: [65, 105, 225],
								saddlebrown: [139, 69, 19],
								salmon: [250, 128, 114],
								sandybrown: [244, 164, 96],
								seagreen: [46, 139, 87],
								seashell: [255, 245, 238],
								sienna: [160, 82, 45],
								silver: [192, 192, 192],
								skyblue: [135, 206, 235],
								slateblue: [106, 90, 205],
								slategray: [119, 128, 144],
								slategrey: [119, 128, 144],
								snow: [255, 255, 250],
								springgreen: [0, 255, 127],
								steelblue: [70, 130, 180],
								tan: [210, 180, 140],
								teal: [0, 128, 128],
								thistle: [216, 191, 216],
								transparent: [255, 255, 255, 0],
								tomato: [255, 99, 71],
								turquoise: [64, 224, 208],
								violet: [238, 130, 238],
								wheat: [245, 222, 179],
								white: [255, 255, 255],
								whitesmoke: [245, 245, 245],
								yellow: [255, 255, 0],
								yellowgreen: [154, 205, 5],
							},
							l = /rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,
							h = [];
						const c =
								('undefined' != typeof requestAnimationFrame && requestAnimationFrame) ||
								function (e) {
									setTimeout(e, 60);
								},
							u = {
								_isElement: (e) => !(!e || 1 != e.nodeType),
								_isFunction: (e) => !!(e && e.constructor && e.call && e.apply),
								_isPlainObject: (e) => !!e && e.constructor === Object,
								_isArray: (e) => '[object Array]' === Object.prototype.toString.call(e),
								_isNumber: (e) =>
									'[object Number]' === Object.prototype.toString.call(e) &&
									!isNaN(e) &&
									isFinite(e),
								_isString: (e) => '[object String]' === Object.prototype.toString.call(e),
								_isBoolean: (e) => '[object Boolean]' === Object.prototype.toString.call(e),
								isObject: (e) => e instanceof Object,
								isValidSelector(e) {
									if ('string' != typeof e) return !1;
									var t = e[0];
									return '#' === t || '.' === t || t === t.toUpperCase();
								},
								_sign: (e) => (0 === e || e > 0 ? 1 : -1),
								requestAnimFrame(e) {
									h.push(e),
										1 === h.length &&
											c(function () {
												const e = h;
												(h = []),
													e.forEach(function (e) {
														e();
													});
											});
								},
								createCanvasElement() {
									var e = document.createElement('canvas');
									try {
										e.style = e.style || {};
									} catch (e) {}
									return e;
								},
								createImageElement: () => document.createElement('img'),
								_isInDocument(e) {
									for (; (e = e.parentNode); ) if (e == document) return !0;
									return !1;
								},
								_urlToImage(e, t) {
									var n = u.createImageElement();
									(n.onload = function () {
										t(n);
									}),
										(n.src = e);
								},
								_rgbToHex: (e, t, n) =>
									((1 << 24) + (e << 16) + (t << 8) + n).toString(16).slice(1),
								_hexToRgb(e) {
									e = e.replace('#', '');
									var t = parseInt(e, 16);
									return {
										r: (t >> 16) & 255,
										g: (t >> 8) & 255,
										b: 255 & t,
									};
								},
								getRandomColor() {
									for (var e = ((16777215 * Math.random()) << 0).toString(16); e.length < 6; )
										e = '0' + e;
									return '#' + e;
								},
								getRGB(e) {
									var t;
									return e in s
										? {
												r: (t = s[e])[0],
												g: t[1],
												b: t[2],
										  }
										: '#' === e[0]
										? this._hexToRgb(e.substring(1))
										: 'rgb(' === e.substr(0, 4)
										? ((t = l.exec(e.replace(/ /g, ''))),
										  {
												r: parseInt(t[1], 10),
												g: parseInt(t[2], 10),
												b: parseInt(t[3], 10),
										  })
										: {
												r: 0,
												g: 0,
												b: 0,
										  };
								},
								colorToRGBA: (e) => (
									(e = e || 'black'),
									u._namedColorToRBA(e) ||
										u._hex3ColorToRGBA(e) ||
										u._hex6ColorToRGBA(e) ||
										u._rgbColorToRGBA(e) ||
										u._rgbaColorToRGBA(e) ||
										u._hslColorToRGBA(e)
								),
								_namedColorToRBA(e) {
									var t = s[e.toLowerCase()];
									return t
										? {
												r: t[0],
												g: t[1],
												b: t[2],
												a: 1,
										  }
										: null;
								},
								_rgbColorToRGBA(e) {
									if (0 === e.indexOf('rgb(')) {
										var t = (e = e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);
										return {
											r: t[0],
											g: t[1],
											b: t[2],
											a: 1,
										};
									}
								},
								_rgbaColorToRGBA(e) {
									if (0 === e.indexOf('rgba(')) {
										var t = (e = e.match(/rgba\(([^)]+)\)/)[1])
											.split(/ *, */)
											.map((e, t) =>
												'%' === e.slice(-1)
													? 3 === t
														? parseInt(e) / 100
														: (parseInt(e) / 100) * 255
													: Number(e),
											);
										return {
											r: t[0],
											g: t[1],
											b: t[2],
											a: t[3],
										};
									}
								},
								_hex6ColorToRGBA(e) {
									if ('#' === e[0] && 7 === e.length)
										return {
											r: parseInt(e.slice(1, 3), 16),
											g: parseInt(e.slice(3, 5), 16),
											b: parseInt(e.slice(5, 7), 16),
											a: 1,
										};
								},
								_hex3ColorToRGBA(e) {
									if ('#' === e[0] && 4 === e.length)
										return {
											r: parseInt(e[1] + e[1], 16),
											g: parseInt(e[2] + e[2], 16),
											b: parseInt(e[3] + e[3], 16),
											a: 1,
										};
								},
								_hslColorToRGBA(e) {
									if (/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)) {
										const [t, ...n] = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),
											r = Number(n[0]) / 360,
											i = Number(n[1]) / 100,
											o = Number(n[2]) / 100;
										let a, s, l;
										if (0 === i)
											return (
												(l = 255 * o),
												{
													r: Math.round(l),
													g: Math.round(l),
													b: Math.round(l),
													a: 1,
												}
											);
										a = o < 0.5 ? o * (1 + i) : o + i - o * i;
										const h = 2 * o - a,
											c = [0, 0, 0];
										for (let e = 0; e < 3; e++)
											(s = r + (1 / 3) * -(e - 1)),
												s < 0 && s++,
												s > 1 && s--,
												(l =
													6 * s < 1
														? h + 6 * (a - h) * s
														: 2 * s < 1
														? a
														: 3 * s < 2
														? h + (a - h) * (2 / 3 - s) * 6
														: h),
												(c[e] = 255 * l);
										return {
											r: Math.round(c[0]),
											g: Math.round(c[1]),
											b: Math.round(c[2]),
											a: 1,
										};
									}
								},
								haveIntersection: (e, t) =>
									!(
										t.x > e.x + e.width ||
										t.x + t.width < e.x ||
										t.y > e.y + e.height ||
										t.y + t.height < e.y
									),
								cloneObject(e) {
									var t = {};
									for (var n in e)
										this._isPlainObject(e[n])
											? (t[n] = this.cloneObject(e[n]))
											: this._isArray(e[n])
											? (t[n] = this.cloneArray(e[n]))
											: (t[n] = e[n]);
									return t;
								},
								cloneArray: (e) => e.slice(0),
								degToRad: (e) => e * o,
								radToDeg: (e) => e * a,
								_degToRad: (e) => (
									u.warn('Util._degToRad is removed. Please use public Util.degToRad instead.'),
									u.degToRad(e)
								),
								_radToDeg: (e) => (
									u.warn('Util._radToDeg is removed. Please use public Util.radToDeg instead.'),
									u.radToDeg(e)
								),
								_getRotation: (e) => (r.a.angleDeg ? u.radToDeg(e) : e),
								_capitalize: (e) => e.charAt(0).toUpperCase() + e.slice(1),
								throw(e) {
									throw new Error('Konva error: ' + e);
								},
								error(e) {
									console.error('Konva error: ' + e);
								},
								warn(e) {
									r.a.showWarnings && console.warn('Konva warning: ' + e);
								},
								each(e, t) {
									for (var n in e) t(n, e[n]);
								},
								_inRange: (e, t, n) => t <= e && e < n,
								_getProjectionToSegment(e, t, n, r, i, o) {
									var a,
										s,
										l,
										h = (e - n) * (e - n) + (t - r) * (t - r);
									if (0 == h) (a = e), (s = t), (l = (i - n) * (i - n) + (o - r) * (o - r));
									else {
										var c = ((i - e) * (n - e) + (o - t) * (r - t)) / h;
										c < 0
											? ((a = e), (s = t), (l = (e - i) * (e - i) + (t - o) * (t - o)))
											: c > 1
											? ((a = n), (s = r), (l = (n - i) * (n - i) + (r - o) * (r - o)))
											: (l =
													((a = e + c * (n - e)) - i) * (a - i) +
													((s = t + c * (r - t)) - o) * (s - o));
									}
									return [a, s, l];
								},
								_getProjectionToLine(e, t, n) {
									var r = u.cloneObject(e),
										i = Number.MAX_VALUE;
									return (
										t.forEach(function (o, a) {
											if (n || a !== t.length - 1) {
												var s = t[(a + 1) % t.length],
													l = u._getProjectionToSegment(o.x, o.y, s.x, s.y, e.x, e.y),
													h = l[0],
													c = l[1],
													p = l[2];
												p < i && ((r.x = h), (r.y = c), (i = p));
											}
										}),
										r
									);
								},
								_prepareArrayForTween(e, t, n) {
									var r,
										i = [],
										o = [];
									if (e.length > t.length) {
										var a = t;
										(t = e), (e = a);
									}
									for (r = 0; r < e.length; r += 2)
										i.push({
											x: e[r],
											y: e[r + 1],
										});
									for (r = 0; r < t.length; r += 2)
										o.push({
											x: t[r],
											y: t[r + 1],
										});
									var s = [];
									return (
										o.forEach(function (e) {
											var t = u._getProjectionToLine(e, i, n);
											s.push(t.x), s.push(t.y);
										}),
										s
									);
								},
								_prepareToStringify(e) {
									var t;
									for (var n in ((e.visitedByCircularReferenceRemoval = !0), e))
										if (e.hasOwnProperty(n) && e[n] && 'object' == typeof e[n])
											if (
												((t = Object.getOwnPropertyDescriptor(e, n)),
												e[n].visitedByCircularReferenceRemoval || u._isElement(e[n]))
											) {
												if (!t.configurable) return null;
												delete e[n];
											} else if (null === u._prepareToStringify(e[n])) {
												if (!t.configurable) return null;
												delete e[n];
											}
									return delete e.visitedByCircularReferenceRemoval, e;
								},
								_assign(e, t) {
									for (var n in t) e[n] = t[n];
									return e;
								},
								_getFirstPointerId: (e) =>
									e.touches ? e.changedTouches[0].identifier : e.pointerId || 999,
							};
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(137), t),
							i(n(49), t),
							i(n(50), t),
							i(n(138), t),
							i(n(139), t),
							i(n(140), t),
							i(n(141), t),
							i(n(142), t),
							i(n(143), t),
							i(n(144), t),
							i(n(145), t),
							i(n(146), t),
							i(n(115), t),
							i(n(147), t),
							i(n(148), t),
							i(n(106), t),
							i(n(149), t),
							i(n(150), t),
							i(n(151), t),
							i(n(152), t),
							i(n(153), t),
							i(n(154), t),
							i(n(155), t),
							i(n(156), t),
							i(n(157), t),
							i(n(158), t),
							i(n(159), t),
							i(n(160), t),
							i(n(161), t),
							i(n(162), t),
							i(n(64), t),
							i(n(163), t),
							i(n(215), t),
							i(n(216), t),
							i(n(217), t),
							i(n(218), t),
							i(n(219), t),
							i(n(220), t),
							i(n(221), t),
							i(n(222), t),
							i(n(223), t),
							i(n(224), t),
							i(n(225), t),
							i(n(226), t),
							i(n(227), t),
							i(n(228), t),
							i(n(229), t),
							i(n(230), t),
							i(n(231), t),
							i(n(232), t),
							i(n(233), t),
							i(n(234), t),
							i(n(235), t),
							i(n(236), t),
							i(n(237), t),
							i(n(238), t),
							i(n(239), t),
							i(n(240), t),
							i(n(241), t),
							i(n(242), t),
							i(n(243), t),
							i(n(244), t),
							i(n(245), t),
							i(n(246), t),
							i(n(247), t),
							i(n(248), t),
							i(n(249), t),
							i(n(250), t),
							i(n(251), t),
							i(n(252), t),
							i(n(253), t),
							i(n(254), t),
							i(n(272), t),
							i(n(273), t),
							i(n(274), t),
							i(n(275), t),
							i(n(276), t),
							i(n(277), t);
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(111), t),
							i(n(129), t),
							i(n(476), t),
							i(n(477), t),
							i(n(109), t),
							i(n(478), t),
							i(n(479), t),
							i(n(480), t),
							i(n(481), t),
							i(n(482), t),
							i(n(483), t),
							i(n(484), t),
							i(n(485), t),
							i(n(486), t),
							i(n(487), t),
							i(n(488), t),
							i(n(489), t),
							i(n(490), t),
							i(n(491), t),
							i(n(492), t),
							i(n(493), t),
							i(n(494), t),
							i(n(495), t),
							i(n(496), t),
							i(n(497), t),
							i(n(498), t),
							i(n(499), t),
							i(n(500), t),
							i(n(501), t),
							i(n(502), t),
							i(n(503), t),
							i(n(504), t),
							i(n(505), t),
							i(n(506), t),
							i(n(507), t),
							i(n(508), t),
							i(n(509), t),
							i(n(510), t),
							i(n(511), t),
							i(n(512), t),
							i(n(513), t),
							i(n(514), t),
							i(n(515), t),
							i(n(516), t),
							i(n(517), t),
							i(n(518), t),
							i(n(519), t),
							i(n(520), t),
							i(n(521), t),
							i(n(522), t),
							i(n(523), t);
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(131), t),
							i(n(455), t),
							i(n(456), t),
							i(n(457), t),
							i(n(83), t),
							i(n(121), t);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return c;
						});
						var r = n(3),
							i = n(47),
							o = n(79),
							a = n(19),
							s = n(62),
							l = n(34),
							h = n(57),
							c = (function (e) {
								function t(n, r, i) {
									var a = e.call(this) || this;
									switch (
										((a.syncErrorValue = null),
										(a.syncErrorThrown = !1),
										(a.syncErrorThrowable = !1),
										(a.isStopped = !1),
										(a._parentSubscription = null),
										arguments.length)
									) {
										case 0:
											a.destination = o.a;
											break;
										case 1:
											if (!n) {
												a.destination = o.a;
												break;
											}
											if ('object' == typeof n) {
												n instanceof t
													? ((a.syncErrorThrowable = n.syncErrorThrowable),
													  (a.destination = n),
													  n.add(a))
													: ((a.syncErrorThrowable = !0), (a.destination = new u(a, n)));
												break;
											}
										default:
											(a.syncErrorThrowable = !0), (a.destination = new u(a, n, r, i));
									}
									return a;
								}
								return (
									r.a(t, e),
									(t.prototype[s.a] = function () {
										return this;
									}),
									(t.create = function (e, n, r) {
										var i = new t(e, n, r);
										return (i.syncErrorThrowable = !1), i;
									}),
									(t.prototype.next = function (e) {
										this.isStopped || this._next(e);
									}),
									(t.prototype.error = function (e) {
										this.isStopped || ((this.isStopped = !0), this._error(e));
									}),
									(t.prototype.complete = function () {
										this.isStopped || ((this.isStopped = !0), this._complete());
									}),
									(t.prototype.unsubscribe = function () {
										this.closed || ((this.isStopped = !0), e.prototype.unsubscribe.call(this));
									}),
									(t.prototype._next = function (e) {
										this.destination.next(e);
									}),
									(t.prototype._error = function (e) {
										this.destination.error(e), this.unsubscribe();
									}),
									(t.prototype._complete = function () {
										this.destination.complete(), this.unsubscribe();
									}),
									(t.prototype._unsubscribeAndRecycle = function () {
										var e = this._parent,
											t = this._parents;
										return (
											(this._parent = null),
											(this._parents = null),
											this.unsubscribe(),
											(this.closed = !1),
											(this.isStopped = !1),
											(this._parent = e),
											(this._parents = t),
											(this._parentSubscription = null),
											this
										);
									}),
									t
								);
							})(a.a),
							u = (function (e) {
								function t(t, n, r, a) {
									var s,
										l = e.call(this) || this;
									l._parentSubscriber = t;
									var h = l;
									return (
										Object(i.a)(n)
											? (s = n)
											: n &&
											  ((s = n.next),
											  (r = n.error),
											  (a = n.complete),
											  n !== o.a &&
													((h = Object.create(n)),
													Object(i.a)(h.unsubscribe) && l.add(h.unsubscribe.bind(h)),
													(h.unsubscribe = l.unsubscribe.bind(l)))),
										(l._context = h),
										(l._next = s),
										(l._error = r),
										(l._complete = a),
										l
									);
								}
								return (
									r.a(t, e),
									(t.prototype.next = function (e) {
										if (!this.isStopped && this._next) {
											var t = this._parentSubscriber;
											l.a.useDeprecatedSynchronousErrorHandling && t.syncErrorThrowable
												? this.__tryOrSetError(t, this._next, e) && this.unsubscribe()
												: this.__tryOrUnsub(this._next, e);
										}
									}),
									(t.prototype.error = function (e) {
										if (!this.isStopped) {
											var t = this._parentSubscriber,
												n = l.a.useDeprecatedSynchronousErrorHandling;
											if (this._error)
												n && t.syncErrorThrowable
													? (this.__tryOrSetError(t, this._error, e), this.unsubscribe())
													: (this.__tryOrUnsub(this._error, e), this.unsubscribe());
											else if (t.syncErrorThrowable)
												n ? ((t.syncErrorValue = e), (t.syncErrorThrown = !0)) : Object(h.a)(e),
													this.unsubscribe();
											else {
												if ((this.unsubscribe(), n)) throw e;
												Object(h.a)(e);
											}
										}
									}),
									(t.prototype.complete = function () {
										var e = this;
										if (!this.isStopped) {
											var t = this._parentSubscriber;
											if (this._complete) {
												var n = function () {
													return e._complete.call(e._context);
												};
												l.a.useDeprecatedSynchronousErrorHandling && t.syncErrorThrowable
													? (this.__tryOrSetError(t, n), this.unsubscribe())
													: (this.__tryOrUnsub(n), this.unsubscribe());
											} else this.unsubscribe();
										}
									}),
									(t.prototype.__tryOrUnsub = function (e, t) {
										try {
											e.call(this._context, t);
										} catch (e) {
											if ((this.unsubscribe(), l.a.useDeprecatedSynchronousErrorHandling)) throw e;
											Object(h.a)(e);
										}
									}),
									(t.prototype.__tryOrSetError = function (e, t, n) {
										if (!l.a.useDeprecatedSynchronousErrorHandling) throw new Error('bad call');
										try {
											t.call(this._context, n);
										} catch (t) {
											return l.a.useDeprecatedSynchronousErrorHandling
												? ((e.syncErrorValue = t), (e.syncErrorThrown = !0), !0)
												: (Object(h.a)(t), !0);
										}
										return !1;
									}),
									(t.prototype._unsubscribe = function () {
										var e = this._parentSubscriber;
										(this._context = null), (this._parentSubscriber = null), e.unsubscribe();
									}),
									t
								);
							})(c);
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(86), t),
							i(n(116), t),
							i(n(164), t),
							i(n(165), t),
							i(n(166), t),
							i(n(167), t),
							i(n(58), t),
							i(n(168), t),
							i(n(169), t),
							i(n(170), t),
							i(n(117), t),
							i(n(171), t),
							i(n(172), t),
							i(n(173), t),
							i(n(29), t),
							i(n(200), t),
							i(n(201), t),
							i(n(202), t),
							i(n(203), t),
							i(n(204), t),
							i(n(118), t),
							i(n(205), t),
							i(n(206), t),
							i(n(207), t),
							i(n(208), t),
							i(n(209), t),
							i(n(210), t),
							i(n(211), t),
							i(n(212), t),
							i(n(213), t),
							i(n(214), t);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return o;
						});
						var r = n(4),
							i = n(18);
						const o = {
							addGetterSetter(e, t, n, r, i) {
								o.addGetter(e, t, n), o.addSetter(e, t, r, i), o.addOverloadedGetterSetter(e, t);
							},
							addGetter(e, t, n) {
								var i = 'get' + r.Util._capitalize(t);
								e.prototype[i] =
									e.prototype[i] ||
									function () {
										var e = this.attrs[t];
										return void 0 === e ? n : e;
									};
							},
							addSetter(e, t, n, i) {
								var a = 'set' + r.Util._capitalize(t);
								e.prototype[a] || o.overWriteSetter(e, t, n, i);
							},
							overWriteSetter(e, t, n, i) {
								var o = 'set' + r.Util._capitalize(t);
								e.prototype[o] = function (e) {
									return (
										n && null != e && (e = n.call(this, e, t)),
										this._setAttr(t, e),
										i && i.call(this),
										this
									);
								};
							},
							addComponentsGetterSetter(e, t, n, a, s) {
								var l,
									h,
									c = n.length,
									u = r.Util._capitalize,
									p = 'get' + u(t),
									f = 'set' + u(t);
								e.prototype[p] = function () {
									var e = {};
									for (l = 0; l < c; l++) e[(h = n[l])] = this.getAttr(t + u(h));
									return e;
								};
								var d = Object(i.b)(n);
								(e.prototype[f] = function (e) {
									var n,
										r = this.attrs[t];
									for (n in (a && (e = a.call(this, e)), d && d.call(this, e, t), e))
										e.hasOwnProperty(n) && this._setAttr(t + u(n), e[n]);
									return this._fireChangeEvent(t, r, e), s && s.call(this), this;
								}),
									o.addOverloadedGetterSetter(e, t);
							},
							addOverloadedGetterSetter(e, t) {
								var n = r.Util._capitalize(t),
									i = 'set' + n,
									o = 'get' + n;
								e.prototype[t] = function () {
									return arguments.length ? (this[i](arguments[0]), this) : this[o]();
								};
							},
							addDeprecatedGetterSetter(e, t, n, i) {
								r.Util.error('Adding deprecated ' + t);
								var a = 'get' + r.Util._capitalize(t),
									s =
										t +
										' property is deprecated and will be removed soon. Look at Konva change log for more information.';
								(e.prototype[a] = function () {
									r.Util.error(s);
									var e = this.attrs[t];
									return void 0 === e ? n : e;
								}),
									o.addSetter(e, t, i, function () {
										r.Util.error(s);
									}),
									o.addOverloadedGetterSetter(e, t);
							},
							backCompat(e, t) {
								r.Util.each(t, function (t, n) {
									var i = e.prototype[n],
										o = 'get' + r.Util._capitalize(t),
										a = 'set' + r.Util._capitalize(t);
									function s() {
										i.apply(this, arguments),
											r.Util.error(
												'"' +
													t +
													'" method is deprecated and will be removed soon. Use ""' +
													n +
													'" instead.',
											);
									}
									(e.prototype[t] = s), (e.prototype[o] = s), (e.prototype[a] = s);
								});
							},
							afterSetFilter() {
								this._filterUpToDate = !1;
							},
						};
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(136), t),
							i(n(81), t),
							i(n(278), t),
							i(n(279), t),
							i(n(280), t),
							i(n(281), t),
							i(n(282), t),
							i(n(283), t),
							i(n(284), t),
							i(n(285), t),
							i(n(286), t),
							i(n(287), t),
							i(n(288), t),
							i(n(300), t),
							i(n(301), t),
							i(n(302), t),
							i(n(303), t),
							i(n(304), t),
							i(n(305), t),
							i(n(307), t),
							i(n(308), t),
							i(n(309), t),
							i(n(310), t),
							i(n(311), t),
							i(n(312), t);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return c;
						});
						var r = n(75),
							i = n(8),
							o = n(62),
							a = n(79),
							s = n(42),
							l = n(60),
							h = n(34),
							c = (function () {
								function e(e) {
									(this._isScalar = !1), e && (this._subscribe = e);
								}
								return (
									(e.prototype.lift = function (t) {
										var n = new e();
										return (n.source = this), (n.operator = t), n;
									}),
									(e.prototype.subscribe = function (e, t, n) {
										var r = this.operator,
											s = (function (e, t, n) {
												if (e) {
													if (e instanceof i.a) return e;
													if (e[o.a]) return e[o.a]();
												}
												return e || t || n ? new i.a(e, t, n) : new i.a(a.a);
											})(e, t, n);
										if (
											(r
												? r.call(s, this.source)
												: s.add(
														this.source ||
															(h.a.useDeprecatedSynchronousErrorHandling && !s.syncErrorThrowable)
															? this._subscribe(s)
															: this._trySubscribe(s),
												  ),
											h.a.useDeprecatedSynchronousErrorHandling &&
												s.syncErrorThrowable &&
												((s.syncErrorThrowable = !1), s.syncErrorThrown))
										)
											throw s.syncErrorValue;
										return s;
									}),
									(e.prototype._trySubscribe = function (e) {
										try {
											return this._subscribe(e);
										} catch (t) {
											h.a.useDeprecatedSynchronousErrorHandling &&
												((e.syncErrorThrown = !0), (e.syncErrorValue = t)),
												Object(r.a)(e) ? e.error(t) : console.warn(t);
										}
									}),
									(e.prototype.forEach = function (e, t) {
										var n = this;
										return new (t = u(t))(function (t, r) {
											var i;
											i = n.subscribe(
												function (t) {
													try {
														e(t);
													} catch (e) {
														r(e), i && i.unsubscribe();
													}
												},
												r,
												t,
											);
										});
									}),
									(e.prototype._subscribe = function (e) {
										var t = this.source;
										return t && t.subscribe(e);
									}),
									(e.prototype[s.a] = function () {
										return this;
									}),
									(e.prototype.pipe = function () {
										for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
										return 0 === e.length ? this : Object(l.b)(e)(this);
									}),
									(e.prototype.toPromise = function (e) {
										var t = this;
										return new (e = u(e))(function (e, n) {
											var r;
											t.subscribe(
												function (e) {
													return (r = e);
												},
												function (e) {
													return n(e);
												},
												function () {
													return e(r);
												},
											);
										});
									}),
									(e.create = function (t) {
										return new e(t);
									}),
									e
								);
							})();
						function u(e) {
							if ((e || (e = h.a.Promise || Promise), !e)) throw new Error('no Promise impl found');
							return e;
						}
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(130), t),
							i(n(458), t),
							i(n(459), t),
							i(n(122), t),
							i(n(460), t),
							i(n(461), t),
							i(n(462), t),
							i(n(463), t),
							i(n(464), t),
							i(n(465), t),
							i(n(466), t),
							i(n(467), t),
							i(n(468), t),
							i(n(469), t),
							i(n(470), t),
							i(n(471), t),
							i(n(472), t),
							i(n(473), t),
							i(n(108), t),
							i(n(474), t),
							i(n(475), t);
					},
					function (e, t, n) {
						'use strict';
						(function (e) {
							n.d(t, 'a', function () {
								return o;
							}),
								n.d(t, 'b', function () {
									return a;
								});
							var r = Math.PI / 180;
							const i =
									void 0 !== e
										? e
										: 'undefined' != typeof window
										? window
										: 'undefined' != typeof WorkerGlobalScope
										? self
										: {},
								o = {
									_global: i,
									version: '8.3.2',
									isBrowser:
										'undefined' != typeof window &&
										('[object Window]' === {}.toString.call(window) ||
											'[object global]' === {}.toString.call(window)),
									isUnminified: /param/.test(function (e) {}.toString()),
									dblClickWindow: 400,
									getAngle: (e) => (o.angleDeg ? e * r : e),
									enableTrace: !1,
									pointerEventsEnabled: !0,
									autoDrawEnabled: !0,
									hitOnDragEnabled: !1,
									capturePointerEventsEnabled: !1,
									_mouseListenClick: !1,
									_touchListenClick: !1,
									_pointerListenClick: !1,
									_mouseInDblClickWindow: !1,
									_touchInDblClickWindow: !1,
									_pointerInDblClickWindow: !1,
									_mouseDblClickPointerId: null,
									_touchDblClickPointerId: null,
									_pointerDblClickPointerId: null,
									pixelRatio: ('undefined' != typeof window && window.devicePixelRatio) || 1,
									dragDistance: 3,
									angleDeg: !0,
									showWarnings: !0,
									dragButtons: [0, 1],
									isDragging: () => o.DD.isDragging,
									isDragReady: () => !!o.DD.node,
									document: i.document,
									_injectGlobal(e) {
										i.Konva = e;
									},
								},
								a = (e) => {
									o[e.prototype.getClassName()] = e;
								};
							o._injectGlobal(o);
						}).call(this, n(125));
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return o;
						});
						var r = n(33),
							i = n(100);
						function o(e, t, n, o, a) {
							if ((void 0 === a && (a = new r.a(e, n, o)), !a.closed)) return Object(i.a)(t)(a);
						}
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(134), t),
							i(n(135), t),
							i(n(313), t),
							i(n(314), t),
							i(n(315), t),
							i(n(316), t),
							i(n(317), t),
							i(n(318), t),
							i(n(319), t),
							i(n(320), t),
							i(n(321), t),
							i(n(322), t),
							i(n(323), t),
							i(n(324), t),
							i(n(325), t),
							i(n(326), t),
							i(n(327), t),
							i(n(328), t),
							i(n(329), t),
							i(n(330), t),
							i(n(87), t),
							i(n(331), t),
							i(n(332), t),
							i(n(333), t),
							i(n(334), t),
							i(n(335), t),
							i(n(336), t),
							i(n(337), t),
							i(n(338), t),
							i(n(339), t),
							i(n(340), t),
							i(n(341), t),
							i(n(342), t),
							i(n(343), t),
							i(n(344), t),
							i(n(345), t),
							i(n(346), t),
							i(n(347), t),
							i(n(348), t),
							i(n(349), t),
							i(n(350), t),
							i(n(351), t),
							i(n(352), t);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(3),
							i = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									r.a(t, e),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.destination.next(t);
									}),
									(t.prototype.notifyError = function (e, t) {
										this.destination.error(e);
									}),
									(t.prototype.notifyComplete = function (e) {
										this.destination.complete();
									}),
									t
								);
							})(n(8).a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'd', function () {
							return a;
						}),
							n.d(t, 'c', function () {
								return s;
							}),
							n.d(t, 'f', function () {
								return l;
							}),
							n.d(t, 'e', function () {
								return h;
							}),
							n.d(t, 'a', function () {
								return c;
							}),
							n.d(t, 'b', function () {
								return u;
							});
						var r = n(14),
							i = n(4);
						function o(e) {
							return i.Util._isString(e)
								? '"' + e + '"'
								: '[object Number]' === Object.prototype.toString.call(e) || i.Util._isBoolean(e)
								? e
								: Object.prototype.toString.call(e);
						}
						function a() {
							if (r.a.isUnminified)
								return function (e, t) {
									return (
										i.Util._isNumber(e) ||
											i.Util.warn(
												o(e) +
													' is a not valid value for "' +
													t +
													'" attribute. The value should be a number.',
											),
										e
									);
								};
						}
						function s() {
							if (r.a.isUnminified)
								return function (e, t) {
									return (
										i.Util._isNumber(e) ||
											'auto' === e ||
											i.Util.warn(
												o(e) +
													' is a not valid value for "' +
													t +
													'" attribute. The value should be a number or "auto".',
											),
										e
									);
								};
						}
						function l() {
							if (r.a.isUnminified)
								return function (e, t) {
									return (
										i.Util._isString(e) ||
											i.Util.warn(
												o(e) +
													' is a not valid value for "' +
													t +
													'" attribute. The value should be a string.',
											),
										e
									);
								};
						}
						function h() {
							if (r.a.isUnminified)
								return function (e, t) {
									const n = i.Util._isString(e),
										r =
											'[object CanvasGradient]' === Object.prototype.toString.call(e) ||
											(e && e.addColorStop);
									return (
										n ||
											r ||
											i.Util.warn(
												o(e) +
													' is a not valid value for "' +
													t +
													'" attribute. The value should be a string or a native gradient.',
											),
										e
									);
								};
						}
						function c() {
							if (r.a.isUnminified)
								return function (e, t) {
									return (
										!0 === e ||
											!1 === e ||
											i.Util.warn(
												o(e) +
													' is a not valid value for "' +
													t +
													'" attribute. The value should be a boolean.',
											),
										e
									);
								};
						}
						function u(e) {
							if (r.a.isUnminified)
								return function (t, n) {
									return (
										i.Util.isObject(t) ||
											i.Util.warn(
												o(t) +
													' is a not valid value for "' +
													n +
													'" attribute. The value should be an object with properties ' +
													e,
											),
										t
									);
								};
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return h;
						});
						var r = n(24),
							i = n(97),
							o = n(47),
							a = n(27),
							s = n(20),
							l = n(63),
							h = (function () {
								function e(e) {
									(this.closed = !1),
										(this._parent = null),
										(this._parents = null),
										(this._subscriptions = null),
										e && (this._unsubscribe = e);
								}
								var t;
								return (
									(e.prototype.unsubscribe = function () {
										var e,
											t = !1;
										if (!this.closed) {
											var n = this._parent,
												h = this._parents,
												u = this._unsubscribe,
												p = this._subscriptions;
											(this.closed = !0),
												(this._parent = null),
												(this._parents = null),
												(this._subscriptions = null);
											for (var f = -1, d = h ? h.length : 0; n; )
												n.remove(this), (n = (++f < d && h[f]) || null);
											if (
												(Object(o.a)(u) &&
													Object(a.a)(u).call(this) === s.a &&
													((t = !0), (e = e || (s.a.e instanceof l.a ? c(s.a.e.errors) : [s.a.e]))),
												Object(r.a)(p))
											)
												for (f = -1, d = p.length; ++f < d; ) {
													var g = p[f];
													if (Object(i.a)(g) && Object(a.a)(g.unsubscribe).call(g) === s.a) {
														(t = !0), (e = e || []);
														var y = s.a.e;
														y instanceof l.a ? (e = e.concat(c(y.errors))) : e.push(y);
													}
												}
											if (t) throw new l.a(e);
										}
									}),
									(e.prototype.add = function (t) {
										if (!t || t === e.EMPTY) return e.EMPTY;
										if (t === this) return this;
										var n = t;
										switch (typeof t) {
											case 'function':
												n = new e(t);
											case 'object':
												if (n.closed || 'function' != typeof n.unsubscribe) return n;
												if (this.closed) return n.unsubscribe(), n;
												if ('function' != typeof n._addParent) {
													var r = n;
													(n = new e())._subscriptions = [r];
												}
												break;
											default:
												throw new Error('unrecognized teardown ' + t + ' added to Subscription.');
										}
										return (
											(this._subscriptions || (this._subscriptions = [])).push(n),
											n._addParent(this),
											n
										);
									}),
									(e.prototype.remove = function (e) {
										var t = this._subscriptions;
										if (t) {
											var n = t.indexOf(e);
											-1 !== n && t.splice(n, 1);
										}
									}),
									(e.prototype._addParent = function (e) {
										var t = this._parent,
											n = this._parents;
										t && t !== e
											? n
												? -1 === n.indexOf(e) && n.push(e)
												: (this._parents = [e])
											: (this._parent = e);
									}),
									(e.EMPTY = (((t = new e()).closed = !0), t)),
									e
								);
							})();
						function c(e) {
							return e.reduce(function (e, t) {
								return e.concat(t instanceof l.a ? t.errors : t);
							}, []);
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return r;
						});
						var r = {
							e: {},
						};
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'b', function () {
							return c;
						}),
							n.d(t, 'a', function () {
								return u;
							});
						var r = n(3),
							i = n(12),
							o = n(8),
							a = n(19),
							s = n(43),
							l = n(98),
							h = n(62),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.destination = t), n;
								}
								return r.a(t, e), t;
							})(o.a),
							u = (function (e) {
								function t() {
									var t = e.call(this) || this;
									return (
										(t.observers = []),
										(t.closed = !1),
										(t.isStopped = !1),
										(t.hasError = !1),
										(t.thrownError = null),
										t
									);
								}
								return (
									r.a(t, e),
									(t.prototype[h.a] = function () {
										return new c(this);
									}),
									(t.prototype.lift = function (e) {
										var t = new p(this, this);
										return (t.operator = e), t;
									}),
									(t.prototype.next = function (e) {
										if (this.closed) throw new s.a();
										if (!this.isStopped)
											for (var t = this.observers, n = t.length, r = t.slice(), i = 0; i < n; i++)
												r[i].next(e);
									}),
									(t.prototype.error = function (e) {
										if (this.closed) throw new s.a();
										(this.hasError = !0), (this.thrownError = e), (this.isStopped = !0);
										for (var t = this.observers, n = t.length, r = t.slice(), i = 0; i < n; i++)
											r[i].error(e);
										this.observers.length = 0;
									}),
									(t.prototype.complete = function () {
										if (this.closed) throw new s.a();
										this.isStopped = !0;
										for (var e = this.observers, t = e.length, n = e.slice(), r = 0; r < t; r++)
											n[r].complete();
										this.observers.length = 0;
									}),
									(t.prototype.unsubscribe = function () {
										(this.isStopped = !0), (this.closed = !0), (this.observers = null);
									}),
									(t.prototype._trySubscribe = function (t) {
										if (this.closed) throw new s.a();
										return e.prototype._trySubscribe.call(this, t);
									}),
									(t.prototype._subscribe = function (e) {
										if (this.closed) throw new s.a();
										return this.hasError
											? (e.error(this.thrownError), a.a.EMPTY)
											: this.isStopped
											? (e.complete(), a.a.EMPTY)
											: (this.observers.push(e), new l.a(this, e));
									}),
									(t.prototype.asObservable = function () {
										var e = new i.a();
										return (e.source = this), e;
									}),
									(t.create = function (e, t) {
										return new p(e, t);
									}),
									t
								);
							})(i.a),
							p = (function (e) {
								function t(t, n) {
									var r = e.call(this) || this;
									return (r.destination = t), (r.source = n), r;
								}
								return (
									r.a(t, e),
									(t.prototype.next = function (e) {
										var t = this.destination;
										t && t.next && t.next(e);
									}),
									(t.prototype.error = function (e) {
										var t = this.destination;
										t && t.error && this.destination.error(e);
									}),
									(t.prototype.complete = function () {
										var e = this.destination;
										e && e.complete && this.destination.complete();
									}),
									(t.prototype._subscribe = function (e) {
										return this.source ? this.source.subscribe(e) : a.a.EMPTY;
									}),
									t
								);
							})(u);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						}),
							n.d(t, 'b', function () {
								return o;
							});
						var r = n(12),
							i = new r.a(function (e) {
								return e.complete();
							});
						function o(e) {
							return e
								? (function (e) {
										return new r.a(function (t) {
											return e.schedule(function () {
												return t.complete();
											});
										});
								  })(e)
								: i;
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(54),
							i = new (n(52).a)(r.a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return r;
						});
						var r =
							Array.isArray ||
							function (e) {
								return e && 'number' == typeof e.length;
							};
					},
					function (e, t, n) {
						'use strict';
						function r(e) {
							return e && 'function' == typeof e.schedule;
						}
						n.d(t, 'a', function () {
							return r;
						});
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return o;
						});
						var r = n(3),
							i = n(8);
						function o(e, t) {
							return function (n) {
								if ('function' != typeof e)
									throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');
								return n.lift(new a(e, t));
							};
						}
						var a = (function () {
								function e(e, t) {
									(this.project = e), (this.thisArg = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new s(e, this.project, this.thisArg));
									}),
									e
								);
							})(),
							s = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (i.project = n), (i.count = 0), (i.thisArg = r || i), i;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t;
										try {
											t = this.project.call(this.thisArg, e, this.count++);
										} catch (e) {
											return void this.destination.error(e);
										}
										this.destination.next(t);
									}),
									t
								);
							})(i.a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return a;
						});
						var r,
							i = n(20);
						function o() {
							try {
								return r.apply(this, arguments);
							} catch (e) {
								return (i.a.e = e), i.a;
							}
						}
						function a(e) {
							return (r = e), o;
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return o;
						});
						var r = n(14),
							i = n(4);
						const o = {
							get isDragging() {
								var e = !1;
								return (
									o._dragElements.forEach((t) => {
										'dragging' === t.dragStatus && (e = !0);
									}),
									e
								);
							},
							justDragged: !1,
							get node() {
								var e;
								return (
									o._dragElements.forEach((t) => {
										e = t.node;
									}),
									e
								);
							},
							_dragElements: new Map(),
							_drag(e) {
								const t = [];
								o._dragElements.forEach((n, r) => {
									const { node: o } = n,
										a = o.getStage();
									a.setPointersPositions(e),
										void 0 === n.pointerId && (n.pointerId = i.Util._getFirstPointerId(e));
									const s = a._changedPointerPositions.find((e) => e.id === n.pointerId);
									if (s) {
										if ('dragging' !== n.dragStatus) {
											var l = o.dragDistance();
											if (
												Math.max(
													Math.abs(s.x - n.startPointerPos.x),
													Math.abs(s.y - n.startPointerPos.y),
												) < l
											)
												return;
											if (
												(o.startDrag({
													evt: e,
												}),
												!o.isDragging())
											)
												return;
										}
										o._setDragPosition(e, n), t.push(o);
									}
								}),
									t.forEach((t) => {
										t.fire(
											'dragmove',
											{
												type: 'dragmove',
												target: t,
												evt: e,
											},
											!0,
										);
									});
							},
							_endDragBefore(e) {
								o._dragElements.forEach((t) => {
									const { node: n } = t,
										i = n.getStage();
									if (
										(e && i.setPointersPositions(e),
										!i._changedPointerPositions.find((e) => e.id === t.pointerId))
									)
										return;
									('dragging' !== t.dragStatus && 'stopped' !== t.dragStatus) ||
										((o.justDragged = !0),
										(r.a._mouseListenClick = !1),
										(r.a._touchListenClick = !1),
										(r.a._pointerListenClick = !1),
										(t.dragStatus = 'stopped'));
									const a = t.node.getLayer() || (t.node instanceof r.a.Stage && t.node);
									a && a.batchDraw();
								});
							},
							_endDragAfter(e) {
								o._dragElements.forEach((t, n) => {
									'stopped' === t.dragStatus &&
										t.node.fire(
											'dragend',
											{
												type: 'dragend',
												target: t.node,
												evt: e,
											},
											!0,
										),
										'dragging' !== t.dragStatus && o._dragElements.delete(n);
								});
							},
						};
						r.a.isBrowser &&
							(window.addEventListener('mouseup', o._endDragBefore, !0),
							window.addEventListener('touchend', o._endDragBefore, !0),
							window.addEventListener('mousemove', o._drag),
							window.addEventListener('touchmove', o._drag),
							window.addEventListener('mouseup', o._endDragAfter, !1),
							window.addEventListener('touchend', o._endDragAfter, !1));
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CutLineType = void 0),
							i(n(116), t),
							i(n(174), t),
							i(n(175), t),
							i(n(176), t),
							i(n(177), t),
							i(n(178), t),
							i(n(179), t),
							i(n(180), t),
							i(n(181), t),
							i(n(182), t),
							i(n(183), t),
							i(n(184), t),
							i(n(185), t),
							i(n(186), t),
							i(n(187), t),
							i(n(188), t),
							i(n(189), t),
							i(n(190), t),
							i(n(191), t),
							i(n(192), t),
							i(n(193), t),
							i(n(194), t),
							i(n(195), t),
							i(n(196), t),
							i(n(197), t),
							i(n(198), t),
							i(n(199), t),
							(function (e) {
								(e.line = 'line'),
									(e.arc = 'arc'),
									(e.compoundLine = 'compoundLine'),
									(e.compoundLineCircle = 'compoundLineCircle'),
									(e.simpleLine = 'simpleLine'),
									(e.simpleInnerArc = 'simpleInnerArc'),
									(e.spinLine = 'spinLine'),
									(e.simpleHexagon = 'simpleHexagon'),
									(e.compoundDoubleOctagon = 'compoundDoubleOctagon'),
									(e.compoundLongOctagon = 'compoundLongOctagon'),
									(e.simpleWave = 'simpleWave'),
									(e.halfWheel = 'halfWheel'),
									(e.semiArc = 'semiArc'),
									(e.semiArcPro = 'semiArcPro'),
									(e.semiArcPro2 = 'semiArcPro2'),
									(e.semiSegmentPro = 'semiSegmentPro'),
									(e.frametifyLike = 'frametifyLike'),
									(e.innerEqSplit = 'innerEqSplit');
							})(t.CutLineType || (t.CutLineType = {}));
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return d;
						});
						var r = n(12),
							i = n(103),
							o = n(102),
							a = n(42),
							s = n(41),
							l = n(32),
							h = n(19),
							c = n(104),
							u = n(105),
							p = n(101),
							f = n(100);
						function d(e, t) {
							if (!t) return e instanceof r.a ? e : new r.a(Object(f.a)(e));
							if (null != e) {
								if (
									(function (e) {
										return e && 'function' == typeof e[a.a];
									})(e)
								)
									return (function (e, t) {
										return t
											? new r.a(function (n) {
													var r = new h.a();
													return (
														r.add(
															t.schedule(function () {
																var i = e[a.a]();
																r.add(
																	i.subscribe({
																		next: function (e) {
																			r.add(
																				t.schedule(function () {
																					return n.next(e);
																				}),
																			);
																		},
																		error: function (e) {
																			r.add(
																				t.schedule(function () {
																					return n.error(e);
																				}),
																			);
																		},
																		complete: function () {
																			r.add(
																				t.schedule(function () {
																					return n.complete();
																				}),
																			);
																		},
																	}),
																);
															}),
														),
														r
													);
											  })
											: new r.a(Object(p.a)(e));
									})(e, t);
								if (Object(i.a)(e))
									return (function (e, t) {
										return t
											? new r.a(function (n) {
													var r = new h.a();
													return (
														r.add(
															t.schedule(function () {
																return e.then(
																	function (e) {
																		r.add(
																			t.schedule(function () {
																				n.next(e),
																					r.add(
																						t.schedule(function () {
																							return n.complete();
																						}),
																					);
																			}),
																		);
																	},
																	function (e) {
																		r.add(
																			t.schedule(function () {
																				return n.error(e);
																			}),
																		);
																	},
																);
															}),
														),
														r
													);
											  })
											: new r.a(Object(c.a)(e));
									})(e, t);
								if (Object(o.a)(e)) return Object(l.a)(e, t);
								if (
									(function (e) {
										return e && 'function' == typeof e[s.a];
									})(e) ||
									'string' == typeof e
								)
									return (function (e, t) {
										if (!e) throw new Error('Iterable cannot be null');
										return t
											? new r.a(function (n) {
													var r,
														i = new h.a();
													return (
														i.add(function () {
															r && 'function' == typeof r.return && r.return();
														}),
														i.add(
															t.schedule(function () {
																(r = e[s.a]()),
																	i.add(
																		t.schedule(function () {
																			if (!n.closed) {
																				var e, t;
																				try {
																					var i = r.next();
																					(e = i.value), (t = i.done);
																				} catch (e) {
																					return void n.error(e);
																				}
																				t ? n.complete() : (n.next(e), this.schedule());
																			}
																		}),
																	);
															}),
														),
														i
													);
											  })
											: new r.a(Object(u.a)(e));
									})(e, t);
							}
							throw new TypeError(((null !== e && typeof e) || e) + ' is not observable');
						}
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarType = t.DecorationComponentType = void 0),
							i(n(255), t),
							i(n(256), t),
							i(n(257), t),
							i(n(258), t),
							i(n(259), t),
							i(n(260), t),
							i(n(261), t),
							i(n(262), t),
							i(n(263), t),
							i(n(264), t),
							i(n(265), t),
							i(n(266), t),
							i(n(267), t),
							i(n(268), t),
							i(n(269), t),
							i(n(270), t),
							i(n(271), t),
							(function (e) {
								(e.decorationEdge = 'decorationEdge'),
									(e.dcorationCorner = 'dcorationCorner'),
									(e.decorationPoly = 'decorationPoly'),
									(e.decorationLine = 'decorationLine'),
									(e.decorationLineArbitrary = 'decorationLineArbitrary');
							})(t.DecorationComponentType || (t.DecorationComponentType = {})),
							(function (e) {
								(e.decorationSimple = 'decorationSimple'),
									(e.decorationChinese = 'decorationChinese'),
									(e.decorationChinese2 = 'decorationChinese2'),
									(e.decorationChinese3 = 'decorationChinese3'),
									(e.decorationChinese4 = 'decorationChinese4'),
									(e.decorationSemiArc = 'decorationSemiArc'),
									(e.decorationPrairie = 'decorationPrairie'),
									(e.decorationColonial = 'decorationColonial'),
									(e.decorationDiamond = 'decorationDiamond'),
									(e.decorationSemiArcPro = 'decorationSemiArcPro');
							})(t.DecorationBarType || (t.DecorationBarType = {}));
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return a;
						});
						var r = n(12),
							i = n(19),
							o = n(99);
						function a(e, t) {
							return t
								? new r.a(function (n) {
										var r = new i.a(),
											o = 0;
										return (
											r.add(
												t.schedule(function () {
													o !== e.length
														? (n.next(e[o++]), n.closed || r.add(this.schedule()))
														: n.complete();
												}),
											),
											r
										);
								  })
								: new r.a(Object(o.a)(e));
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(3),
							i = (function (e) {
								function t(t, n, r) {
									var i = e.call(this) || this;
									return (i.parent = t), (i.outerValue = n), (i.outerIndex = r), (i.index = 0), i;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.parent.notifyNext(this.outerValue, e, this.outerIndex, this.index++, this);
									}),
									(t.prototype._error = function (e) {
										this.parent.notifyError(e, this), this.unsubscribe();
									}),
									(t.prototype._complete = function () {
										this.parent.notifyComplete(this), this.unsubscribe();
									}),
									t
								);
							})(n(8).a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = !1,
							i = {
								Promise: void 0,
								set useDeprecatedSynchronousErrorHandling(e) {
									e && new Error().stack, (r = e);
								},
								get useDeprecatedSynchronousErrorHandling() {
									return r;
								},
							};
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return u;
						});
						var r = n(4),
							i = n(10),
							o = n(37),
							a = n(14),
							s = n(28),
							l = n(18),
							h = [
								'xChange.konva',
								'yChange.konva',
								'scaleXChange.konva',
								'scaleYChange.konva',
								'skewXChange.konva',
								'skewYChange.konva',
								'rotationChange.konva',
								'offsetXChange.konva',
								'offsetYChange.konva',
								'transformsEnabledChange.konva',
							].join(' ');
						let c = 1;
						class u {
							constructor(e) {
								(this._id = c++),
									(this.eventListeners = {}),
									(this.attrs = {}),
									(this.index = 0),
									(this._allEventListeners = null),
									(this.parent = null),
									(this._cache = new Map()),
									(this._attachedDepsListeners = new Map()),
									(this._lastPos = null),
									(this._batchingTransformChange = !1),
									(this._needClearTransformCache = !1),
									(this._filterUpToDate = !1),
									(this._isUnderCache = !1),
									(this._dragEventId = null),
									(this._shouldFireChangeEvents = !1),
									this.setAttrs(e),
									(this._shouldFireChangeEvents = !0);
							}
							hasChildren() {
								return !1;
							}
							_clearCache(e) {
								('transform' !== e && 'absoluteTransform' !== e) || !this._cache.get(e)
									? e
										? this._cache.delete(e)
										: this._cache.clear()
									: (this._cache.get(e).dirty = !0);
							}
							_getCache(e, t) {
								var n = this._cache.get(e);
								return (
									(void 0 === n ||
										(('transform' === e || 'absoluteTransform' === e) && !0 === n.dirty)) &&
										((n = t.call(this)), this._cache.set(e, n)),
									n
								);
							}
							_calculate(e, t, n) {
								if (!this._attachedDepsListeners.get(e)) {
									const n = t.map((e) => e + 'Change.konva').join(' ');
									this.on(n, () => {
										this._clearCache(e);
									}),
										this._attachedDepsListeners.set(e, !0);
								}
								return this._getCache(e, n);
							}
							_getCanvasCache() {
								return this._cache.get('canvas');
							}
							_clearSelfAndDescendantCache(e) {
								this._clearCache(e),
									'absoluteTransform' === e && this.fire('absoluteTransformChange');
							}
							clearCache() {
								return (
									this._cache.delete('canvas'),
									this._clearSelfAndDescendantCache(),
									this._requestDraw(),
									this
								);
							}
							cache(e) {
								var t = e || {},
									n = {};
								(void 0 !== t.x && void 0 !== t.y && void 0 !== t.width && void 0 !== t.height) ||
									(n = this.getClientRect({
										skipTransform: !0,
										relativeTo: this.getParent(),
									}));
								var i = Math.ceil(t.width || n.width),
									a = Math.ceil(t.height || n.height),
									s = t.pixelRatio,
									l = void 0 === t.x ? n.x : t.x,
									h = void 0 === t.y ? n.y : t.y,
									c = t.offset || 0,
									u = t.drawBorder || !1,
									p = t.hitCanvasPixelRatio || 1;
								if (i && a) {
									(i += 2 * c), (a += 2 * c), (l -= c), (h -= c);
									var f = new o.b({
											pixelRatio: s,
											width: i,
											height: a,
										}),
										d = new o.b({
											pixelRatio: s,
											width: 0,
											height: 0,
										}),
										g = new o.a({
											pixelRatio: p,
											width: i,
											height: a,
										}),
										y = f.getContext(),
										m = g.getContext();
									return (
										(g.isCache = !0),
										(f.isCache = !0),
										this._cache.delete('canvas'),
										(this._filterUpToDate = !1),
										!1 === t.imageSmoothingEnabled &&
											((f.getContext()._context.imageSmoothingEnabled = !1),
											(d.getContext()._context.imageSmoothingEnabled = !1)),
										y.save(),
										m.save(),
										y.translate(-l, -h),
										m.translate(-l, -h),
										(this._isUnderCache = !0),
										this._clearSelfAndDescendantCache('absoluteOpacity'),
										this._clearSelfAndDescendantCache('absoluteScale'),
										this.drawScene(f, this),
										this.drawHit(g, this),
										(this._isUnderCache = !1),
										y.restore(),
										m.restore(),
										u &&
											(y.save(),
											y.beginPath(),
											y.rect(0, 0, i, a),
											y.closePath(),
											y.setAttr('strokeStyle', 'red'),
											y.setAttr('lineWidth', 5),
											y.stroke(),
											y.restore()),
										this._cache.set('canvas', {
											scene: f,
											filter: d,
											hit: g,
											x: l,
											y: h,
										}),
										this._requestDraw(),
										this
									);
								}
								r.Util.error(
									'Can not cache the node. Width or height of the node equals 0. Caching is skipped.',
								);
							}
							isCached() {
								return this._cache.has('canvas');
							}
							getClientRect(e) {
								throw new Error('abstract "getClientRect" method call');
							}
							_transformedRect(e, t) {
								var n,
									r,
									i,
									o,
									a = [
										{
											x: e.x,
											y: e.y,
										},
										{
											x: e.x + e.width,
											y: e.y,
										},
										{
											x: e.x + e.width,
											y: e.y + e.height,
										},
										{
											x: e.x,
											y: e.y + e.height,
										},
									],
									s = this.getAbsoluteTransform(t);
								return (
									a.forEach(function (e) {
										var t = s.point(e);
										void 0 === n && ((n = i = t.x), (r = o = t.y)),
											(n = Math.min(n, t.x)),
											(r = Math.min(r, t.y)),
											(i = Math.max(i, t.x)),
											(o = Math.max(o, t.y));
									}),
									{
										x: n,
										y: r,
										width: i - n,
										height: o - r,
									}
								);
							}
							_drawCachedSceneCanvas(e) {
								e.save(), e._applyOpacity(this), e._applyGlobalCompositeOperation(this);
								const t = this._getCanvasCache();
								e.translate(t.x, t.y);
								var n = this._getCachedSceneCanvas(),
									r = n.pixelRatio;
								e.drawImage(n._canvas, 0, 0, n.width / r, n.height / r), e.restore();
							}
							_drawCachedHitCanvas(e) {
								var t = this._getCanvasCache(),
									n = t.hit;
								e.save(),
									e.translate(t.x, t.y),
									e.drawImage(n._canvas, 0, 0, n.width / n.pixelRatio, n.height / n.pixelRatio),
									e.restore();
							}
							_getCachedSceneCanvas() {
								var e,
									t,
									n,
									i,
									o = this.filters(),
									a = this._getCanvasCache(),
									s = a.scene,
									l = a.filter,
									h = l.getContext();
								if (o) {
									if (!this._filterUpToDate) {
										var c = s.pixelRatio;
										l.setSize(s.width / s.pixelRatio, s.height / s.pixelRatio);
										try {
											for (
												e = o.length,
													h.clear(),
													h.drawImage(s._canvas, 0, 0, s.getWidth() / c, s.getHeight() / c),
													t = h.getImageData(0, 0, l.getWidth(), l.getHeight()),
													n = 0;
												n < e;
												n++
											)
												'function' == typeof (i = o[n])
													? (i.call(this, t), h.putImageData(t, 0, 0))
													: r.Util.error(
															'Filter should be type of function, but got ' +
																typeof i +
																' instead. Please check correct filters',
													  );
										} catch (e) {
											r.Util.error(
												'Unable to apply filter. ' +
													e.message +
													' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.',
											);
										}
										this._filterUpToDate = !0;
									}
									return l;
								}
								return s;
							}
							on(e, t) {
								if (
									(this._cache && this._cache.delete('allEventListeners'), 3 === arguments.length)
								)
									return this._delegate.apply(this, arguments);
								var n,
									r,
									i,
									o,
									a = e.split(' '),
									s = a.length;
								for (n = 0; n < s; n++)
									(i = (r = a[n].split('.'))[0]),
										(o = r[1] || ''),
										this.eventListeners[i] || (this.eventListeners[i] = []),
										this.eventListeners[i].push({
											name: o,
											handler: t,
										});
								return this;
							}
							off(e, t) {
								var n,
									r,
									i,
									o,
									a,
									s = (e || '').split(' '),
									l = s.length;
								if ((this._cache && this._cache.delete('allEventListeners'), !e))
									for (r in this.eventListeners) this._off(r);
								for (n = 0; n < l; n++)
									if (((o = (i = s[n].split('.'))[0]), (a = i[1]), o))
										this.eventListeners[o] && this._off(o, a, t);
									else for (r in this.eventListeners) this._off(r, a, t);
								return this;
							}
							dispatchEvent(e) {
								var t = {
									target: this,
									type: e.type,
									evt: e,
								};
								return this.fire(e.type, t), this;
							}
							addEventListener(e, t) {
								return (
									this.on(e, function (e) {
										t.call(this, e.evt);
									}),
									this
								);
							}
							removeEventListener(e) {
								return this.off(e), this;
							}
							_delegate(e, t, n) {
								var i = this;
								this.on(e, function (e) {
									for (var o = e.target.findAncestors(t, !0, i), a = 0; a < o.length; a++)
										((e = r.Util.cloneObject(e)).currentTarget = o[a]), n.call(o[a], e);
								});
							}
							remove() {
								return (
									this.isDragging() && this.stopDrag(),
									s.a._dragElements.delete(this._id),
									this._remove(),
									this
								);
							}
							_clearCaches() {
								this._clearSelfAndDescendantCache('absoluteTransform'),
									this._clearSelfAndDescendantCache('absoluteOpacity'),
									this._clearSelfAndDescendantCache('absoluteScale'),
									this._clearSelfAndDescendantCache('stage'),
									this._clearSelfAndDescendantCache('visible'),
									this._clearSelfAndDescendantCache('listening');
							}
							_remove() {
								this._clearCaches();
								var e = this.getParent();
								e &&
									e.children &&
									(e.children.splice(this.index, 1), e._setChildrenIndices(), (this.parent = null));
							}
							destroy() {
								return this.remove(), this;
							}
							getAttr(e) {
								var t = 'get' + r.Util._capitalize(e);
								return r.Util._isFunction(this[t]) ? this[t]() : this.attrs[e];
							}
							getAncestors() {
								for (var e = this.getParent(), t = []; e; ) t.push(e), (e = e.getParent());
								return t;
							}
							getAttrs() {
								return this.attrs || {};
							}
							setAttrs(e) {
								return (
									this._batchTransformChanges(() => {
										var t, n;
										if (!e) return this;
										for (t in e)
											'children' !== t &&
												((n = 'set' + r.Util._capitalize(t)),
												r.Util._isFunction(this[n]) ? this[n](e[t]) : this._setAttr(t, e[t]));
									}),
									this
								);
							}
							isListening() {
								return this._getCache('listening', this._isListening);
							}
							_isListening(e) {
								if (!this.listening()) return !1;
								const t = this.getParent();
								return !t || t === e || this === e || t._isListening(e);
							}
							isVisible() {
								return this._getCache('visible', this._isVisible);
							}
							_isVisible(e) {
								if (!this.visible()) return !1;
								const t = this.getParent();
								return !t || t === e || this === e || t._isVisible(e);
							}
							shouldDrawHit(e, t = !1) {
								if (e) return this._isVisible(e) && this._isListening(e);
								var n = this.getLayer(),
									r = !1;
								s.a._dragElements.forEach((e) => {
									'dragging' === e.dragStatus &&
										('Stage' === e.node.nodeType || e.node.getLayer() === n) &&
										(r = !0);
								});
								var i = !t && !a.a.hitOnDragEnabled && r;
								return this.isListening() && this.isVisible() && !i;
							}
							show() {
								return this.visible(!0), this;
							}
							hide() {
								return this.visible(!1), this;
							}
							getZIndex() {
								return this.index || 0;
							}
							getAbsoluteZIndex() {
								var e,
									t,
									n,
									r,
									i = this.getDepth(),
									o = this,
									a = 0;
								return (
									'Stage' !== o.nodeType &&
										(function s(l) {
											for (e = [], t = l.length, n = 0; n < t; n++)
												(r = l[n]),
													a++,
													'Shape' !== r.nodeType && (e = e.concat(r.getChildren().slice())),
													r._id === o._id && (n = t);
											e.length > 0 && e[0].getDepth() <= i && s(e);
										})(o.getStage().getChildren()),
									a
								);
							}
							getDepth() {
								for (var e = 0, t = this.parent; t; ) e++, (t = t.parent);
								return e;
							}
							_batchTransformChanges(e) {
								(this._batchingTransformChange = !0),
									e(),
									(this._batchingTransformChange = !1),
									this._needClearTransformCache &&
										(this._clearCache('transform'),
										this._clearSelfAndDescendantCache('absoluteTransform')),
									(this._needClearTransformCache = !1);
							}
							setPosition(e) {
								return (
									this._batchTransformChanges(() => {
										this.x(e.x), this.y(e.y);
									}),
									this
								);
							}
							getPosition() {
								return {
									x: this.x(),
									y: this.y(),
								};
							}
							getRelativePointerPosition() {
								if (!this.getStage()) return null;
								var e = this.getStage().getPointerPosition();
								if (!e) return null;
								var t = this.getAbsoluteTransform().copy();
								return t.invert(), t.point(e);
							}
							getAbsolutePosition(e) {
								let t = !1,
									n = this.parent;
								for (; n; ) {
									if (n.isCached()) {
										t = !0;
										break;
									}
									n = n.parent;
								}
								t && !e && (e = !0);
								var i = this.getAbsoluteTransform(e).getMatrix(),
									o = new r.Transform(),
									a = this.offset();
								return (o.m = i.slice()), o.translate(a.x, a.y), o.getTranslation();
							}
							setAbsolutePosition(e) {
								var t = this._clearTransform();
								(this.attrs.x = t.x),
									(this.attrs.y = t.y),
									delete t.x,
									delete t.y,
									this._clearCache('transform');
								var n = this._getAbsoluteTransform().copy();
								return (
									n.invert(),
									n.translate(e.x, e.y),
									(e = {
										x: this.attrs.x + n.getTranslation().x,
										y: this.attrs.y + n.getTranslation().y,
									}),
									this._setTransform(t),
									this.setPosition({
										x: e.x,
										y: e.y,
									}),
									this._clearCache('transform'),
									this._clearSelfAndDescendantCache('absoluteTransform'),
									this
								);
							}
							_setTransform(e) {
								var t;
								for (t in e) this.attrs[t] = e[t];
							}
							_clearTransform() {
								var e = {
									x: this.x(),
									y: this.y(),
									rotation: this.rotation(),
									scaleX: this.scaleX(),
									scaleY: this.scaleY(),
									offsetX: this.offsetX(),
									offsetY: this.offsetY(),
									skewX: this.skewX(),
									skewY: this.skewY(),
								};
								return (
									(this.attrs.x = 0),
									(this.attrs.y = 0),
									(this.attrs.rotation = 0),
									(this.attrs.scaleX = 1),
									(this.attrs.scaleY = 1),
									(this.attrs.offsetX = 0),
									(this.attrs.offsetY = 0),
									(this.attrs.skewX = 0),
									(this.attrs.skewY = 0),
									e
								);
							}
							move(e) {
								var t = e.x,
									n = e.y,
									r = this.x(),
									i = this.y();
								return (
									void 0 !== t && (r += t),
									void 0 !== n && (i += n),
									this.setPosition({
										x: r,
										y: i,
									}),
									this
								);
							}
							_eachAncestorReverse(e, t) {
								var n,
									r,
									i = [],
									o = this.getParent();
								if (!t || t._id !== this._id) {
									for (i.unshift(this); o && (!t || o._id !== t._id); )
										i.unshift(o), (o = o.parent);
									for (n = i.length, r = 0; r < n; r++) e(i[r]);
								}
							}
							rotate(e) {
								return this.rotation(this.rotation() + e), this;
							}
							moveToTop() {
								if (!this.parent)
									return r.Util.warn('Node has no parent. moveToTop function is ignored.'), !1;
								var e = this.index;
								return (
									e < this.parent.getChildren().length - 1 &&
									(this.parent.children.splice(e, 1),
									this.parent.children.push(this),
									this.parent._setChildrenIndices(),
									!0)
								);
							}
							moveUp() {
								if (!this.parent)
									return r.Util.warn('Node has no parent. moveUp function is ignored.'), !1;
								var e = this.index;
								return (
									e < this.parent.getChildren().length - 1 &&
									(this.parent.children.splice(e, 1),
									this.parent.children.splice(e + 1, 0, this),
									this.parent._setChildrenIndices(),
									!0)
								);
							}
							moveDown() {
								if (!this.parent)
									return r.Util.warn('Node has no parent. moveDown function is ignored.'), !1;
								var e = this.index;
								return (
									e > 0 &&
									(this.parent.children.splice(e, 1),
									this.parent.children.splice(e - 1, 0, this),
									this.parent._setChildrenIndices(),
									!0)
								);
							}
							moveToBottom() {
								if (!this.parent)
									return r.Util.warn('Node has no parent. moveToBottom function is ignored.'), !1;
								var e = this.index;
								return (
									e > 0 &&
									(this.parent.children.splice(e, 1),
									this.parent.children.unshift(this),
									this.parent._setChildrenIndices(),
									!0)
								);
							}
							setZIndex(e) {
								if (!this.parent)
									return r.Util.warn('Node has no parent. zIndex parameter is ignored.'), this;
								(e < 0 || e >= this.parent.children.length) &&
									r.Util.warn(
										'Unexpected value ' +
											e +
											' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' +
											(this.parent.children.length - 1) +
											'.',
									);
								var t = this.index;
								return (
									this.parent.children.splice(t, 1),
									this.parent.children.splice(e, 0, this),
									this.parent._setChildrenIndices(),
									this
								);
							}
							getAbsoluteOpacity() {
								return this._getCache('absoluteOpacity', this._getAbsoluteOpacity);
							}
							_getAbsoluteOpacity() {
								var e = this.opacity(),
									t = this.getParent();
								return t && !t._isUnderCache && (e *= t.getAbsoluteOpacity()), e;
							}
							moveTo(e) {
								return this.getParent() !== e && (this._remove(), e.add(this)), this;
							}
							toObject() {
								var e,
									t,
									n,
									i,
									o = {},
									a = this.getAttrs();
								for (e in ((o.attrs = {}), a))
									(t = a[e]),
										(r.Util.isObject(t) && !r.Util._isPlainObject(t) && !r.Util._isArray(t)) ||
											((n = 'function' == typeof this[e] && this[e]),
											delete a[e],
											(i = n ? n.call(this) : null),
											(a[e] = t),
											i !== t && (o.attrs[e] = t));
								return (o.className = this.getClassName()), r.Util._prepareToStringify(o);
							}
							toJSON() {
								return JSON.stringify(this.toObject());
							}
							getParent() {
								return this.parent;
							}
							findAncestors(e, t, n) {
								var r = [];
								t && this._isMatch(e) && r.push(this);
								for (var i = this.parent; i; ) {
									if (i === n) return r;
									i._isMatch(e) && r.push(i), (i = i.parent);
								}
								return r;
							}
							isAncestorOf(e) {
								return !1;
							}
							findAncestor(e, t, n) {
								return this.findAncestors(e, t, n)[0];
							}
							_isMatch(e) {
								if (!e) return !1;
								if ('function' == typeof e) return e(this);
								var t,
									n,
									i = e.replace(/ /g, '').split(','),
									o = i.length;
								for (t = 0; t < o; t++)
									if (
										((n = i[t]),
										r.Util.isValidSelector(n) ||
											(r.Util.warn(
												'Selector "' +
													n +
													'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".',
											),
											r.Util.warn(
												'If you have a custom shape with such className, please change it to start with upper letter like "Triangle".',
											),
											r.Util.warn('Konva is awesome, right?')),
										'#' === n.charAt(0))
									) {
										if (this.id() === n.slice(1)) return !0;
									} else if ('.' === n.charAt(0)) {
										if (this.hasName(n.slice(1))) return !0;
									} else if (this.className === n || this.nodeType === n) return !0;
								return !1;
							}
							getLayer() {
								var e = this.getParent();
								return e ? e.getLayer() : null;
							}
							getStage() {
								return this._getCache('stage', this._getStage);
							}
							_getStage() {
								var e = this.getParent();
								return e ? e.getStage() : void 0;
							}
							fire(e, t = {}, n) {
								return (
									(t.target = t.target || this),
									n ? this._fireAndBubble(e, t) : this._fire(e, t),
									this
								);
							}
							getAbsoluteTransform(e) {
								return e
									? this._getAbsoluteTransform(e)
									: this._getCache('absoluteTransform', this._getAbsoluteTransform);
							}
							_getAbsoluteTransform(e) {
								var t;
								if (e)
									return (
										(t = new r.Transform()),
										this._eachAncestorReverse(function (e) {
											var n = e.transformsEnabled();
											'all' === n
												? t.multiply(e.getTransform())
												: 'position' === n && t.translate(e.x() - e.offsetX(), e.y() - e.offsetY());
										}, e),
										t
									);
								(t = this._cache.get('absoluteTransform') || new r.Transform()),
									this.parent ? this.parent.getAbsoluteTransform().copyInto(t) : t.reset();
								var n = this.transformsEnabled();
								if ('all' === n) t.multiply(this.getTransform());
								else if ('position' === n) {
									const e = this.attrs.x || 0,
										n = this.attrs.y || 0,
										r = this.attrs.offsetX || 0,
										i = this.attrs.offsetY || 0;
									t.translate(e - r, n - i);
								}
								return (t.dirty = !1), t;
							}
							getAbsoluteScale(e) {
								for (var t = this; t; ) t._isUnderCache && (e = t), (t = t.getParent());
								const n = this.getAbsoluteTransform(e).decompose();
								return {
									x: n.scaleX,
									y: n.scaleY,
								};
							}
							getAbsoluteRotation() {
								return this.getAbsoluteTransform().decompose().rotation;
							}
							getTransform() {
								return this._getCache('transform', this._getTransform);
							}
							_getTransform() {
								var e,
									t,
									n = this._cache.get('transform') || new r.Transform();
								n.reset();
								var i = this.x(),
									o = this.y(),
									s = a.a.getAngle(this.rotation()),
									l = null !== (e = this.attrs.scaleX) && void 0 !== e ? e : 1,
									h = null !== (t = this.attrs.scaleY) && void 0 !== t ? t : 1,
									c = this.attrs.skewX || 0,
									u = this.attrs.skewY || 0,
									p = this.attrs.offsetX || 0,
									f = this.attrs.offsetY || 0;
								return (
									(0 === i && 0 === o) || n.translate(i, o),
									0 !== s && n.rotate(s),
									(0 === c && 0 === u) || n.skew(c, u),
									(1 === l && 1 === h) || n.scale(l, h),
									(0 === p && 0 === f) || n.translate(-1 * p, -1 * f),
									(n.dirty = !1),
									n
								);
							}
							clone(e) {
								var t,
									n,
									i,
									o,
									a,
									s = r.Util.cloneObject(this.attrs);
								for (t in e) s[t] = e[t];
								var l = new this.constructor(s);
								for (t in this.eventListeners)
									for (i = (n = this.eventListeners[t]).length, o = 0; o < i; o++)
										(a = n[o]).name.indexOf('konva') < 0 &&
											(l.eventListeners[t] || (l.eventListeners[t] = []),
											l.eventListeners[t].push(a));
								return l;
							}
							_toKonvaCanvas(e) {
								e = e || {};
								var t = this.getClientRect(),
									n = this.getStage(),
									r = void 0 !== e.x ? e.x : t.x,
									i = void 0 !== e.y ? e.y : t.y,
									a = e.pixelRatio || 1,
									s = new o.b({
										width: e.width || t.width || (n ? n.width() : 0),
										height: e.height || t.height || (n ? n.height() : 0),
										pixelRatio: a,
									}),
									l = s.getContext();
								return (
									l.save(),
									(r || i) && l.translate(-1 * r, -1 * i),
									this.drawScene(s),
									l.restore(),
									s
								);
							}
							toCanvas(e) {
								return this._toKonvaCanvas(e)._canvas;
							}
							toDataURL(e) {
								var t = (e = e || {}).mimeType || null,
									n = e.quality || null,
									r = this._toKonvaCanvas(e).toDataURL(t, n);
								return e.callback && e.callback(r), r;
							}
							toImage(e) {
								if (!e || !e.callback) throw 'callback required for toImage method config argument';
								var t = e.callback;
								delete e.callback,
									r.Util._urlToImage(this.toDataURL(e), function (e) {
										t(e);
									});
							}
							setSize(e) {
								return this.width(e.width), this.height(e.height), this;
							}
							getSize() {
								return {
									width: this.width(),
									height: this.height(),
								};
							}
							getClassName() {
								return this.className || this.nodeType;
							}
							getType() {
								return this.nodeType;
							}
							getDragDistance() {
								return void 0 !== this.attrs.dragDistance
									? this.attrs.dragDistance
									: this.parent
									? this.parent.getDragDistance()
									: a.a.dragDistance;
							}
							_off(e, t, n) {
								var r,
									i,
									o,
									a = this.eventListeners[e];
								for (r = 0; r < a.length; r++)
									if (
										((i = a[r].name),
										(o = a[r].handler),
										!(('konva' === i && 'konva' !== t) || (t && i !== t) || (n && n !== o)))
									) {
										if ((a.splice(r, 1), 0 === a.length)) {
											delete this.eventListeners[e];
											break;
										}
										r--;
									}
							}
							_fireChangeEvent(e, t, n) {
								this._fire(e + 'Change', {
									oldVal: t,
									newVal: n,
								});
							}
							addName(e) {
								if (!this.hasName(e)) {
									var t = this.name(),
										n = t ? t + ' ' + e : e;
									this.name(n);
								}
								return this;
							}
							hasName(e) {
								if (!e) return !1;
								const t = this.name();
								return !!t && -1 !== (t || '').split(/\s/g).indexOf(e);
							}
							removeName(e) {
								var t = (this.name() || '').split(/\s/g),
									n = t.indexOf(e);
								return -1 !== n && (t.splice(n, 1), this.name(t.join(' '))), this;
							}
							setAttr(e, t) {
								var n = this['set' + r.Util._capitalize(e)];
								return r.Util._isFunction(n) ? n.call(this, t) : this._setAttr(e, t), this;
							}
							_requestDraw() {
								if (a.a.autoDrawEnabled) {
									const e = this.getLayer() || this.getStage();
									null == e || e.batchDraw();
								}
							}
							_setAttr(e, t) {
								var n = this.attrs[e];
								(n !== t || r.Util.isObject(t)) &&
									(null == t ? delete this.attrs[e] : (this.attrs[e] = t),
									this._shouldFireChangeEvents && this._fireChangeEvent(e, n, t),
									this._requestDraw());
							}
							_setComponentAttr(e, t, n) {
								var r;
								void 0 !== n &&
									((r = this.attrs[e]) || (this.attrs[e] = this.getAttr(e)),
									(this.attrs[e][t] = n),
									this._fireChangeEvent(e, r, n));
							}
							_fireAndBubble(e, t, n) {
								if (
									(t && 'Shape' === this.nodeType && (t.target = this),
									('mouseenter' !== e && 'mouseleave' !== e) ||
										!(
											(n && (this === n || (this.isAncestorOf && this.isAncestorOf(n)))) ||
											('Stage' === this.nodeType && !n)
										))
								) {
									this._fire(e, t);
									var r =
										('mouseenter' === e || 'mouseleave' === e) &&
										n &&
										n.isAncestorOf &&
										n.isAncestorOf(this) &&
										!n.isAncestorOf(this.parent);
									((t && !t.cancelBubble) || !t) &&
										this.parent &&
										this.parent.isListening() &&
										!r &&
										(n && n.parent
											? this._fireAndBubble.call(this.parent, e, t, n)
											: this._fireAndBubble.call(this.parent, e, t));
								}
							}
							_getProtoListeners(e) {
								let t = this._cache.get('allEventListeners');
								if (!t) {
									t = {};
									let e = Object.getPrototypeOf(this);
									for (; e; )
										if (e.eventListeners) {
											for (var n in e.eventListeners) {
												const r = e.eventListeners[n],
													i = t[n] || [];
												t[n] = r.concat(i);
											}
											e = Object.getPrototypeOf(e);
										} else e = Object.getPrototypeOf(e);
									this._cache.set('allEventListeners', t);
								}
								return t[e];
							}
							_fire(e, t) {
								((t = t || {}).currentTarget = this), (t.type = e);
								const n = this._getProtoListeners(e);
								if (n) for (var r = 0; r < n.length; r++) n[r].handler.call(this, t);
								const i = this.eventListeners[e];
								if (i) for (r = 0; r < i.length; r++) i[r].handler.call(this, t);
							}
							draw() {
								return this.drawScene(), this.drawHit(), this;
							}
							_createDragElement(e) {
								var t = e ? e.pointerId : void 0,
									n = this.getStage(),
									r = this.getAbsolutePosition(),
									i = n._getPointerById(t) || n._changedPointerPositions[0] || r;
								s.a._dragElements.set(this._id, {
									node: this,
									startPointerPos: i,
									offset: {
										x: i.x - r.x,
										y: i.y - r.y,
									},
									dragStatus: 'ready',
									pointerId: t,
								});
							}
							startDrag(e, t = !0) {
								s.a._dragElements.has(this._id) || this._createDragElement(e),
									(s.a._dragElements.get(this._id).dragStatus = 'dragging'),
									this.fire(
										'dragstart',
										{
											type: 'dragstart',
											target: this,
											evt: e && e.evt,
										},
										t,
									);
							}
							_setDragPosition(e, t) {
								const n = this.getStage()._getPointerById(t.pointerId);
								if (n) {
									var i = {
											x: n.x - t.offset.x,
											y: n.y - t.offset.y,
										},
										o = this.dragBoundFunc();
									if (void 0 !== o) {
										const t = o.call(this, i, e);
										t
											? (i = t)
											: r.Util.warn(
													'dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.',
											  );
									}
									(this._lastPos && this._lastPos.x === i.x && this._lastPos.y === i.y) ||
										(this.setAbsolutePosition(i), this._requestDraw()),
										(this._lastPos = i);
								}
							}
							stopDrag(e) {
								const t = s.a._dragElements.get(this._id);
								t && (t.dragStatus = 'stopped'), s.a._endDragBefore(e), s.a._endDragAfter(e);
							}
							setDraggable(e) {
								this._setAttr('draggable', e), this._dragChange();
							}
							isDragging() {
								const e = s.a._dragElements.get(this._id);
								return !!e && 'dragging' === e.dragStatus;
							}
							_listenDrag() {
								this._dragCleanup(),
									this.on('mousedown.konva touchstart.konva', function (e) {
										if (
											(void 0 === e.evt.button || a.a.dragButtons.indexOf(e.evt.button) >= 0) &&
											!this.isDragging()
										) {
											var t = !1;
											s.a._dragElements.forEach((e) => {
												this.isAncestorOf(e.node) && (t = !0);
											}),
												t || this._createDragElement(e);
										}
									});
							}
							_dragChange() {
								if (this.attrs.draggable) this._listenDrag();
								else {
									if ((this._dragCleanup(), !this.getStage())) return;
									const e = s.a._dragElements.get(this._id),
										t = e && 'dragging' === e.dragStatus,
										n = e && 'ready' === e.dragStatus;
									t ? this.stopDrag() : n && s.a._dragElements.delete(this._id);
								}
							}
							_dragCleanup() {
								this.off('mousedown.konva'), this.off('touchstart.konva');
							}
							isClientRectOnScreen(
								e = {
									x: 0,
									y: 0,
								},
							) {
								const t = this.getStage();
								if (!t) return !1;
								const n = {
									x: -e.x,
									y: -e.y,
									width: t.width() + e.x,
									height: t.height() + e.y,
								};
								return r.Util.haveIntersection(n, this.getClientRect());
							}
							static create(e, t) {
								return r.Util._isString(e) && (e = JSON.parse(e)), this._createNode(e, t);
							}
							static _createNode(e, t) {
								var n,
									i,
									o,
									s = u.prototype.getClassName.call(e),
									l = e.children;
								if (
									(t && (e.attrs.container = t),
									a.a[s] ||
										(r.Util.warn(
											'Can not find a node with class name "' + s + '". Fallback to "Shape".',
										),
										(s = 'Shape')),
									(n = new (0, a.a[s])(e.attrs)),
									l)
								)
									for (i = l.length, o = 0; o < i; o++) n.add(u._createNode(l[o]));
								return n;
							}
						}
						(u.prototype.nodeType = 'Node'),
							(u.prototype._attrsAffectingSize = []),
							(u.prototype.eventListeners = {}),
							u.prototype.on.call(u.prototype, h, function () {
								this._batchingTransformChange
									? (this._needClearTransformCache = !0)
									: (this._clearCache('transform'),
									  this._clearSelfAndDescendantCache('absoluteTransform'));
							}),
							u.prototype.on.call(u.prototype, 'visibleChange.konva', function () {
								this._clearSelfAndDescendantCache('visible');
							}),
							u.prototype.on.call(u.prototype, 'listeningChange.konva', function () {
								this._clearSelfAndDescendantCache('listening');
							}),
							u.prototype.on.call(u.prototype, 'opacityChange.konva', function () {
								this._clearSelfAndDescendantCache('absoluteOpacity');
							});
						const p = i.a.addGetterSetter;
						p(u, 'zIndex'),
							p(u, 'absolutePosition'),
							p(u, 'position'),
							p(u, 'x', 0, Object(l.d)()),
							p(u, 'y', 0, Object(l.d)()),
							p(u, 'globalCompositeOperation', 'source-over', Object(l.f)()),
							p(u, 'opacity', 1, Object(l.d)()),
							p(u, 'name', '', Object(l.f)()),
							p(u, 'id', '', Object(l.f)()),
							p(u, 'rotation', 0, Object(l.d)()),
							i.a.addComponentsGetterSetter(u, 'scale', ['x', 'y']),
							p(u, 'scaleX', 1, Object(l.d)()),
							p(u, 'scaleY', 1, Object(l.d)()),
							i.a.addComponentsGetterSetter(u, 'skew', ['x', 'y']),
							p(u, 'skewX', 0, Object(l.d)()),
							p(u, 'skewY', 0, Object(l.d)()),
							i.a.addComponentsGetterSetter(u, 'offset', ['x', 'y']),
							p(u, 'offsetX', 0, Object(l.d)()),
							p(u, 'offsetY', 0, Object(l.d)()),
							p(u, 'dragDistance', null, Object(l.d)()),
							p(u, 'width', 0, Object(l.d)()),
							p(u, 'height', 0, Object(l.d)()),
							p(u, 'listening', !0, Object(l.a)()),
							p(u, 'preventDefault', !0, Object(l.a)()),
							p(u, 'filters', null, function (e) {
								return (this._filterUpToDate = !1), e;
							}),
							p(u, 'visible', !0, Object(l.a)()),
							p(u, 'transformsEnabled', 'all', Object(l.f)()),
							p(u, 'size'),
							p(u, 'dragBoundFunc'),
							p(u, 'draggable', !1, Object(l.a)()),
							i.a.backCompat(u, {
								rotateDeg: 'rotate',
								setRotationDeg: 'setRotation',
								getRotationDeg: 'getRotation',
							});
					},
					function (e, t, n) {
						'use strict';
						function r() {}
						n.d(t, 'a', function () {
							return r;
						});
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'b', function () {
							return d;
						}),
							n.d(t, 'a', function () {
								return g;
							});
						var r = n(4),
							i = n(14);
						function o(e) {
							var t,
								n,
								i = [],
								o = e.length,
								a = r.Util;
							for (t = 0; t < o; t++)
								(n = e[t]),
									a._isNumber(n) ? (n = Math.round(1e3 * n) / 1e3) : a._isString(n) || (n += ''),
									i.push(n);
							return i;
						}
						var a = [
							'arc',
							'arcTo',
							'beginPath',
							'bezierCurveTo',
							'clearRect',
							'clip',
							'closePath',
							'createLinearGradient',
							'createPattern',
							'createRadialGradient',
							'drawImage',
							'ellipse',
							'fill',
							'fillText',
							'getImageData',
							'createImageData',
							'lineTo',
							'moveTo',
							'putImageData',
							'quadraticCurveTo',
							'rect',
							'restore',
							'rotate',
							'save',
							'scale',
							'setLineDash',
							'setTransform',
							'stroke',
							'strokeText',
							'transform',
							'translate',
						];
						class s {
							constructor(e) {
								(this.canvas = e),
									(this._context = e._canvas.getContext('2d')),
									i.a.enableTrace && ((this.traceArr = []), this._enableTrace());
							}
							fillShape(e) {
								e.fillEnabled() && this._fill(e);
							}
							_fill(e) {}
							strokeShape(e) {
								e.hasStroke() && this._stroke(e);
							}
							_stroke(e) {}
							fillStrokeShape(e) {
								e.attrs.fillAfterStrokeEnabled
									? (this.strokeShape(e), this.fillShape(e))
									: (this.fillShape(e), this.strokeShape(e));
							}
							getTrace(e, t) {
								var n,
									i,
									o,
									a,
									s = this.traceArr,
									l = s.length,
									h = '';
								for (n = 0; n < l; n++)
									(o = (i = s[n]).method)
										? ((a = i.args),
										  (h += o),
										  e
												? (h += '()')
												: r.Util._isArray(a[0])
												? (h += '([' + a.join(',') + '])')
												: (t && (a = a.map((e) => ('number' == typeof e ? Math.floor(e) : e))),
												  (h += '(' + a.join(',') + ')')))
										: ((h += i.property), e || (h += '=' + i.val)),
										(h += ';');
								return h;
							}
							clearTrace() {
								this.traceArr = [];
							}
							_trace(e) {
								var t = this.traceArr;
								t.push(e), t.length >= 100 && t.shift();
							}
							reset() {
								var e = this.getCanvas().getPixelRatio();
								this.setTransform(1 * e, 0, 0, 1 * e, 0, 0);
							}
							getCanvas() {
								return this.canvas;
							}
							clear(e) {
								var t = this.getCanvas();
								e
									? this.clearRect(e.x || 0, e.y || 0, e.width || 0, e.height || 0)
									: this.clearRect(0, 0, t.getWidth() / t.pixelRatio, t.getHeight() / t.pixelRatio);
							}
							_applyLineCap(e) {
								var t = e.getLineCap();
								t && this.setAttr('lineCap', t);
							}
							_applyOpacity(e) {
								var t = e.getAbsoluteOpacity();
								1 !== t && this.setAttr('globalAlpha', t);
							}
							_applyLineJoin(e) {
								var t = e.attrs.lineJoin;
								t && this.setAttr('lineJoin', t);
							}
							setAttr(e, t) {
								this._context[e] = t;
							}
							arc(e, t, n, r, i, o) {
								this._context.arc(e, t, n, r, i, o);
							}
							arcTo(e, t, n, r, i) {
								this._context.arcTo(e, t, n, r, i);
							}
							beginPath() {
								this._context.beginPath();
							}
							bezierCurveTo(e, t, n, r, i, o) {
								this._context.bezierCurveTo(e, t, n, r, i, o);
							}
							clearRect(e, t, n, r) {
								this._context.clearRect(e, t, n, r);
							}
							clip() {
								this._context.clip();
							}
							closePath() {
								this._context.closePath();
							}
							createImageData(e, t) {
								var n = arguments;
								return 2 === n.length
									? this._context.createImageData(e, t)
									: 1 === n.length
									? this._context.createImageData(e)
									: void 0;
							}
							createLinearGradient(e, t, n, r) {
								return this._context.createLinearGradient(e, t, n, r);
							}
							createPattern(e, t) {
								return this._context.createPattern(e, t);
							}
							createRadialGradient(e, t, n, r, i, o) {
								return this._context.createRadialGradient(e, t, n, r, i, o);
							}
							drawImage(e, t, n, r, i, o, a, s, l) {
								var h = arguments,
									c = this._context;
								3 === h.length
									? c.drawImage(e, t, n)
									: 5 === h.length
									? c.drawImage(e, t, n, r, i)
									: 9 === h.length && c.drawImage(e, t, n, r, i, o, a, s, l);
							}
							ellipse(e, t, n, r, i, o, a, s) {
								this._context.ellipse(e, t, n, r, i, o, a, s);
							}
							isPointInPath(e, t) {
								return this._context.isPointInPath(e, t);
							}
							fill(e) {
								e ? this._context.fill(e) : this._context.fill();
							}
							fillRect(e, t, n, r) {
								this._context.fillRect(e, t, n, r);
							}
							strokeRect(e, t, n, r) {
								this._context.strokeRect(e, t, n, r);
							}
							fillText(e, t, n, r) {
								r ? this._context.fillText(e, t, n, r) : this._context.fillText(e, t, n);
							}
							measureText(e) {
								return this._context.measureText(e);
							}
							getImageData(e, t, n, r) {
								return this._context.getImageData(e, t, n, r);
							}
							lineTo(e, t) {
								this._context.lineTo(e, t);
							}
							moveTo(e, t) {
								this._context.moveTo(e, t);
							}
							rect(e, t, n, r) {
								this._context.rect(e, t, n, r);
							}
							putImageData(e, t, n) {
								this._context.putImageData(e, t, n);
							}
							quadraticCurveTo(e, t, n, r) {
								this._context.quadraticCurveTo(e, t, n, r);
							}
							restore() {
								this._context.restore();
							}
							rotate(e) {
								this._context.rotate(e);
							}
							save() {
								this._context.save();
							}
							scale(e, t) {
								this._context.scale(e, t);
							}
							setLineDash(e) {
								this._context.setLineDash
									? this._context.setLineDash(e)
									: 'mozDash' in this._context
									? (this._context.mozDash = e)
									: 'webkitLineDash' in this._context && (this._context.webkitLineDash = e);
							}
							getLineDash() {
								return this._context.getLineDash();
							}
							setTransform(e, t, n, r, i, o) {
								this._context.setTransform(e, t, n, r, i, o);
							}
							stroke(e) {
								e ? this._context.stroke(e) : this._context.stroke();
							}
							strokeText(e, t, n, r) {
								this._context.strokeText(e, t, n, r);
							}
							transform(e, t, n, r, i, o) {
								this._context.transform(e, t, n, r, i, o);
							}
							translate(e, t) {
								this._context.translate(e, t);
							}
							_enableTrace() {
								var e,
									t,
									n = this,
									r = a.length,
									i = this.setAttr,
									s = function (e) {
										var r,
											i = n[e];
										n[e] = function () {
											return (
												(t = o(Array.prototype.slice.call(arguments, 0))),
												(r = i.apply(n, arguments)),
												n._trace({
													method: e,
													args: t,
												}),
												r
											);
										};
									};
								for (e = 0; e < r; e++) s(a[e]);
								n.setAttr = function () {
									i.apply(n, arguments);
									var e = arguments[0],
										t = arguments[1];
									('shadowOffsetX' !== e && 'shadowOffsetY' !== e && 'shadowBlur' !== e) ||
										(t /= this.canvas.getPixelRatio()),
										n._trace({
											property: e,
											val: t,
										});
								};
							}
							_applyGlobalCompositeOperation(e) {
								const t = e.attrs.globalCompositeOperation;
								!t || 'source-over' === t || this.setAttr('globalCompositeOperation', t);
							}
						}
						[
							'fillStyle',
							'strokeStyle',
							'shadowColor',
							'shadowBlur',
							'shadowOffsetX',
							'shadowOffsetY',
							'lineCap',
							'lineDashOffset',
							'lineJoin',
							'lineWidth',
							'miterLimit',
							'font',
							'textAlign',
							'textBaseline',
							'globalAlpha',
							'globalCompositeOperation',
							'imageSmoothingEnabled',
						].forEach(function (e) {
							Object.defineProperty(s.prototype, e, {
								get() {
									return this._context[e];
								},
								set(t) {
									this._context[e] = t;
								},
							});
						});
						class l extends s {
							_fillColor(e) {
								var t = e.fill();
								this.setAttr('fillStyle', t), e._fillFunc(this);
							}
							_fillPattern(e) {
								this.setAttr('fillStyle', e._getFillPattern()), e._fillFunc(this);
							}
							_fillLinearGradient(e) {
								var t = e._getLinearGradient();
								t && (this.setAttr('fillStyle', t), e._fillFunc(this));
							}
							_fillRadialGradient(e) {
								var t = e._getRadialGradient();
								t && (this.setAttr('fillStyle', t), e._fillFunc(this));
							}
							_fill(e) {
								var t = e.fill(),
									n = e.getFillPriority();
								if (t && 'color' === n) this._fillColor(e);
								else {
									var r = e.getFillPatternImage();
									if (r && 'pattern' === n) this._fillPattern(e);
									else {
										var i = e.getFillLinearGradientColorStops();
										if (i && 'linear-gradient' === n) this._fillLinearGradient(e);
										else {
											var o = e.getFillRadialGradientColorStops();
											o && 'radial-gradient' === n
												? this._fillRadialGradient(e)
												: t
												? this._fillColor(e)
												: r
												? this._fillPattern(e)
												: i
												? this._fillLinearGradient(e)
												: o && this._fillRadialGradient(e);
										}
									}
								}
							}
							_strokeLinearGradient(e) {
								var t = e.getStrokeLinearGradientStartPoint(),
									n = e.getStrokeLinearGradientEndPoint(),
									r = e.getStrokeLinearGradientColorStops(),
									i = this.createLinearGradient(t.x, t.y, n.x, n.y);
								if (r) {
									for (var o = 0; o < r.length; o += 2) i.addColorStop(r[o], r[o + 1]);
									this.setAttr('strokeStyle', i);
								}
							}
							_stroke(e) {
								var t = e.dash(),
									n = e.getStrokeScaleEnabled();
								if (e.hasStroke()) {
									if (!n) {
										this.save();
										var r = this.getCanvas().getPixelRatio();
										this.setTransform(r, 0, 0, r, 0, 0);
									}
									this._applyLineCap(e),
										t &&
											e.dashEnabled() &&
											(this.setLineDash(t), this.setAttr('lineDashOffset', e.dashOffset())),
										this.setAttr('lineWidth', e.strokeWidth()),
										e.getShadowForStrokeEnabled() || this.setAttr('shadowColor', 'rgba(0,0,0,0)'),
										e.getStrokeLinearGradientColorStops()
											? this._strokeLinearGradient(e)
											: this.setAttr('strokeStyle', e.stroke()),
										e._strokeFunc(this),
										n || this.restore();
								}
							}
							_applyShadow(e) {
								var t,
									n,
									r,
									i = null !== (t = e.getShadowRGBA()) && void 0 !== t ? t : 'black',
									o = null !== (n = e.getShadowBlur()) && void 0 !== n ? n : 5,
									a =
										null !== (r = e.getShadowOffset()) && void 0 !== r
											? r
											: {
													x: 0,
													y: 0,
											  },
									s = e.getAbsoluteScale(),
									l = this.canvas.getPixelRatio(),
									h = s.x * l,
									c = s.y * l;
								this.setAttr('shadowColor', i),
									this.setAttr('shadowBlur', o * Math.min(Math.abs(h), Math.abs(c))),
									this.setAttr('shadowOffsetX', a.x * h),
									this.setAttr('shadowOffsetY', a.y * c);
							}
						}
						class h extends s {
							_fill(e) {
								this.save(),
									this.setAttr('fillStyle', e.colorKey),
									e._fillFuncHit(this),
									this.restore();
							}
							strokeShape(e) {
								e.hasHitStroke() && this._stroke(e);
							}
							_stroke(e) {
								if (e.hasHitStroke()) {
									var t = e.getStrokeScaleEnabled();
									if (!t) {
										this.save();
										var n = this.getCanvas().getPixelRatio();
										this.setTransform(n, 0, 0, n, 0, 0);
									}
									this._applyLineCap(e);
									var r = e.hitStrokeWidth(),
										i = 'auto' === r ? e.strokeWidth() : r;
									this.setAttr('lineWidth', i),
										this.setAttr('strokeStyle', e.colorKey),
										e._strokeFuncHit(this),
										t || this.restore();
								}
							}
						}
						var c,
							u = n(10),
							p = n(18);
						class f {
							constructor(e) {
								(this.pixelRatio = 1), (this.width = 0), (this.height = 0), (this.isCache = !1);
								var t =
									(e || {}).pixelRatio ||
									i.a.pixelRatio ||
									(function () {
										if (c) return c;
										var e = r.Util.createCanvasElement().getContext('2d');
										return (c =
											(i.a._global.devicePixelRatio || 1) /
											(e.webkitBackingStorePixelRatio ||
												e.mozBackingStorePixelRatio ||
												e.msBackingStorePixelRatio ||
												e.oBackingStorePixelRatio ||
												e.backingStorePixelRatio ||
												1));
									})();
								(this.pixelRatio = t),
									(this._canvas = r.Util.createCanvasElement()),
									(this._canvas.style.padding = '0'),
									(this._canvas.style.margin = '0'),
									(this._canvas.style.border = '0'),
									(this._canvas.style.background = 'transparent'),
									(this._canvas.style.position = 'absolute'),
									(this._canvas.style.top = '0'),
									(this._canvas.style.left = '0');
							}
							getContext() {
								return this.context;
							}
							getPixelRatio() {
								return this.pixelRatio;
							}
							setPixelRatio(e) {
								var t = this.pixelRatio;
								(this.pixelRatio = e), this.setSize(this.getWidth() / t, this.getHeight() / t);
							}
							setWidth(e) {
								(this.width = this._canvas.width = e * this.pixelRatio),
									(this._canvas.style.width = e + 'px');
								var t = this.pixelRatio;
								this.getContext()._context.scale(t, t);
							}
							setHeight(e) {
								(this.height = this._canvas.height = e * this.pixelRatio),
									(this._canvas.style.height = e + 'px');
								var t = this.pixelRatio;
								this.getContext()._context.scale(t, t);
							}
							getWidth() {
								return this.width;
							}
							getHeight() {
								return this.height;
							}
							setSize(e, t) {
								this.setWidth(e || 0), this.setHeight(t || 0);
							}
							toDataURL(e, t) {
								try {
									return this._canvas.toDataURL(e, t);
								} catch (e) {
									try {
										return this._canvas.toDataURL();
									} catch (e) {
										return (
											r.Util.error(
												'Unable to get data URL. ' +
													e.message +
													' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.',
											),
											''
										);
									}
								}
							}
						}
						u.a.addGetterSetter(f, 'pixelRatio', void 0, Object(p.d)());
						class d extends f {
							constructor(
								e = {
									width: 0,
									height: 0,
								},
							) {
								super(e), (this.context = new l(this)), this.setSize(e.width, e.height);
							}
						}
						class g extends f {
							constructor(
								e = {
									width: 0,
									height: 0,
								},
							) {
								super(e),
									(this.hitCanvas = !0),
									(this.context = new h(this)),
									this.setSize(e.width, e.height);
							}
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'b', function () {
							return a;
						}),
							n.d(t, 'a', function () {
								return s;
							}),
							n.d(t, 'c', function () {
								return l;
							}),
							n.d(t, 'e', function () {
								return h;
							}),
							n.d(t, 'd', function () {
								return c;
							});
						var r = n(14);
						const i = new Map(),
							o = void 0 !== r.a._global.PointerEvent;
						function a(e) {
							return i.get(e);
						}
						function s(e) {
							return {
								evt: e,
								pointerId: e.pointerId,
							};
						}
						function l(e, t) {
							return i.get(e) === t;
						}
						function h(e, t) {
							c(e),
								t.getStage() &&
									(i.set(e, t),
									o && t._fire('gotpointercapture', s(new PointerEvent('gotpointercapture'))));
						}
						function c(e, t) {
							const n = i.get(e);
							if (!n) return;
							const r = n.getStage();
							r && r.content,
								i.delete(e),
								o && n._fire('lostpointercapture', s(new PointerEvent('lostpointercapture')));
						}
					},
					function (e, t, n) {
						'use strict';
						function r(e) {
							return e;
						}
						n.d(t, 'a', function () {
							return r;
						});
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return a;
						});
						var r = n(22),
							i = n(69),
							o = n(70),
							a = (function () {
								function e(e, t, n) {
									(this.kind = e), (this.value = t), (this.error = n), (this.hasValue = 'N' === e);
								}
								return (
									(e.prototype.observe = function (e) {
										switch (this.kind) {
											case 'N':
												return e.next && e.next(this.value);
											case 'E':
												return e.error && e.error(this.error);
											case 'C':
												return e.complete && e.complete();
										}
									}),
									(e.prototype.do = function (e, t, n) {
										switch (this.kind) {
											case 'N':
												return e && e(this.value);
											case 'E':
												return t && t(this.error);
											case 'C':
												return n && n();
										}
									}),
									(e.prototype.accept = function (e, t, n) {
										return e && 'function' == typeof e.next ? this.observe(e) : this.do(e, t, n);
									}),
									(e.prototype.toObservable = function () {
										switch (this.kind) {
											case 'N':
												return Object(i.a)(this.value);
											case 'E':
												return Object(o.a)(this.error);
											case 'C':
												return Object(r.b)();
										}
										throw new Error('unexpected notification kind value');
									}),
									(e.createNext = function (t) {
										return void 0 !== t ? new e('N', t) : e.undefinedValueNotification;
									}),
									(e.createError = function (t) {
										return new e('E', void 0, t);
									}),
									(e.createComplete = function () {
										return e.completeNotification;
									}),
									(e.completeNotification = new e('C')),
									(e.undefinedValueNotification = new e('N', void 0)),
									e
								);
							})();
					},
					function (e, t, n) {
						'use strict';
						function r() {
							return 'function' == typeof Symbol && Symbol.iterator
								? Symbol.iterator
								: '@@iterator';
						}
						n.d(t, 'a', function () {
							return i;
						});
						var i = r();
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return r;
						});
						var r = ('function' == typeof Symbol && Symbol.observable) || '@@observable';
					},
					function (e, t, n) {
						'use strict';
						function r() {
							return (
								Error.call(this),
								(this.message = 'object unsubscribed'),
								(this.name = 'ObjectUnsubscribedError'),
								this
							);
						}
						n.d(t, 'a', function () {
							return i;
						}),
							(r.prototype = Object.create(Error.prototype));
						var i = r;
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return s;
						});
						var r = n(25),
							i = n(69),
							o = n(30),
							a = n(92);
						function s() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return 1 === e.length || (2 === e.length && Object(r.a)(e[1]))
								? Object(o.a)(e[0])
								: Object(a.a)()(i.a.apply(void 0, e));
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return h;
						});
						var r = n(3),
							i = n(15),
							o = n(17),
							a = n(33),
							s = n(26),
							l = n(30);
						function h(e, t, n) {
							return (
								void 0 === n && (n = Number.POSITIVE_INFINITY),
								'function' == typeof t
									? function (r) {
											return r.pipe(
												h(function (n, r) {
													return Object(l.a)(e(n, r)).pipe(
														Object(s.a)(function (e, i) {
															return t(n, e, r, i);
														}),
													);
												}, n),
											);
									  }
									: ('number' == typeof t && (n = t),
									  function (t) {
											return t.lift(new c(e, n));
									  })
							);
						}
						var c = (function () {
								function e(e, t) {
									void 0 === t && (t = Number.POSITIVE_INFINITY),
										(this.project = e),
										(this.concurrent = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new u(e, this.project, this.concurrent));
									}),
									e
								);
							})(),
							u = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = Number.POSITIVE_INFINITY);
									var i = e.call(this, t) || this;
									return (
										(i.project = n),
										(i.concurrent = r),
										(i.hasCompleted = !1),
										(i.buffer = []),
										(i.active = 0),
										(i.index = 0),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.active < this.concurrent ? this._tryNext(e) : this.buffer.push(e);
									}),
									(t.prototype._tryNext = function (e) {
										var t,
											n = this.index++;
										try {
											t = this.project(e, n);
										} catch (e) {
											return void this.destination.error(e);
										}
										this.active++, this._innerSub(t, e, n);
									}),
									(t.prototype._innerSub = function (e, t, n) {
										var r = new a.a(this, void 0, void 0);
										this.destination.add(r), Object(i.a)(this, e, t, n, r);
									}),
									(t.prototype._complete = function () {
										(this.hasCompleted = !0),
											0 === this.active && 0 === this.buffer.length && this.destination.complete(),
											this.unsubscribe();
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.destination.next(t);
									}),
									(t.prototype.notifyComplete = function (e) {
										var t = this.buffer;
										this.remove(e),
											this.active--,
											t.length > 0
												? this._next(t.shift())
												: 0 === this.active && this.hasCompleted && this.destination.complete();
									}),
									t
								);
							})(o.a);
					},
					function (e, t, n) {
						'use strict';
						function r() {
							return (
								Error.call(this),
								(this.message = 'argument out of range'),
								(this.name = 'ArgumentOutOfRangeError'),
								this
							);
						}
						n.d(t, 'a', function () {
							return i;
						}),
							(r.prototype = Object.create(Error.prototype));
						var i = r;
					},
					function (e, t, n) {
						'use strict';
						function r(e) {
							return 'function' == typeof e;
						}
						n.d(t, 'a', function () {
							return r;
						});
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return a;
						});
						var r = n(10),
							i = n(35),
							o = n(18);
						class a extends i.a {
							constructor() {
								super(...arguments), (this.children = []);
							}
							getChildren(e) {
								if (!e) return this.children || [];
								const t = this.children || [];
								var n = [];
								return (
									t.forEach(function (t) {
										e(t) && n.push(t);
									}),
									n
								);
							}
							hasChildren() {
								return this.getChildren().length > 0;
							}
							removeChildren() {
								return (
									this.getChildren().forEach((e) => {
										(e.parent = null), (e.index = 0), e.remove();
									}),
									(this.children = []),
									this._requestDraw(),
									this
								);
							}
							destroyChildren() {
								return (
									this.getChildren().forEach((e) => {
										(e.parent = null), (e.index = 0), e.destroy();
									}),
									(this.children = []),
									this._requestDraw(),
									this
								);
							}
							add(...e) {
								if (arguments.length > 1) {
									for (var t = 0; t < arguments.length; t++) this.add(arguments[t]);
									return this;
								}
								var n = e[0];
								return n.getParent()
									? (n.moveTo(this), this)
									: (this._validateAdd(n),
									  (n.index = this.getChildren().length),
									  (n.parent = this),
									  n._clearCaches(),
									  this.getChildren().push(n),
									  this._fire('add', {
											child: n,
									  }),
									  this._requestDraw(),
									  this);
							}
							destroy() {
								return this.hasChildren() && this.destroyChildren(), super.destroy(), this;
							}
							find(e) {
								return this._generalFind(e, !1);
							}
							findOne(e) {
								var t = this._generalFind(e, !0);
								return t.length > 0 ? t[0] : void 0;
							}
							_generalFind(e, t) {
								var n = [];
								return (
									this._descendants((r) => {
										const i = r._isMatch(e);
										return i && n.push(r), !(!i || !t);
									}),
									n
								);
							}
							_descendants(e) {
								let t = !1;
								const n = this.getChildren();
								for (const r of n) {
									if (((t = e(r)), t)) return !0;
									if (r.hasChildren() && ((t = r._descendants(e)), t)) return !0;
								}
								return !1;
							}
							toObject() {
								var e = i.a.prototype.toObject.call(this);
								return (
									(e.children = []),
									this.getChildren().forEach((t) => {
										e.children.push(t.toObject());
									}),
									e
								);
							}
							isAncestorOf(e) {
								for (var t = e.getParent(); t; ) {
									if (t._id === this._id) return !0;
									t = t.getParent();
								}
								return !1;
							}
							clone(e) {
								var t = i.a.prototype.clone.call(this, e);
								return (
									this.getChildren().forEach(function (e) {
										t.add(e.clone());
									}),
									t
								);
							}
							getAllIntersections(e) {
								var t = [];
								return (
									this.find('Shape').forEach(function (n) {
										n.isVisible() && n.intersects(e) && t.push(n);
									}),
									t
								);
							}
							_clearSelfAndDescendantCache(e) {
								var t;
								super._clearSelfAndDescendantCache(e),
									this.isCached() ||
										null === (t = this.children) ||
										void 0 === t ||
										t.forEach(function (t) {
											t._clearSelfAndDescendantCache(e);
										});
							}
							_setChildrenIndices() {
								var e;
								null === (e = this.children) ||
									void 0 === e ||
									e.forEach(function (e, t) {
										e.index = t;
									}),
									this._requestDraw();
							}
							drawScene(e, t) {
								var n = this.getLayer(),
									r = e || (n && n.getCanvas()),
									i = r && r.getContext(),
									o = this._getCanvasCache(),
									a = o && o.scene,
									s = r && r.isCache;
								if (!this.isVisible() && !s) return this;
								if (a) {
									i.save();
									var l = this.getAbsoluteTransform(t).getMatrix();
									i.transform(l[0], l[1], l[2], l[3], l[4], l[5]),
										this._drawCachedSceneCanvas(i),
										i.restore();
								} else this._drawChildren('drawScene', r, t);
								return this;
							}
							drawHit(e, t) {
								if (!this.shouldDrawHit(t)) return this;
								var n = this.getLayer(),
									r = e || (n && n.hitCanvas),
									i = r && r.getContext(),
									o = this._getCanvasCache();
								if (o && o.hit) {
									i.save();
									var a = this.getAbsoluteTransform(t).getMatrix();
									i.transform(a[0], a[1], a[2], a[3], a[4], a[5]),
										this._drawCachedHitCanvas(i),
										i.restore();
								} else this._drawChildren('drawHit', r, t);
								return this;
							}
							_drawChildren(e, t, n) {
								var r,
									i = t && t.getContext(),
									o = this.clipWidth(),
									a = this.clipHeight(),
									s = this.clipFunc(),
									l = (o && a) || s;
								const h = n === this;
								if (l) {
									i.save();
									var c = this.getAbsoluteTransform(n),
										u = c.getMatrix();
									if ((i.transform(u[0], u[1], u[2], u[3], u[4], u[5]), i.beginPath(), s))
										s.call(this, i, this);
									else {
										var p = this.clipX(),
											f = this.clipY();
										i.rect(p, f, o, a);
									}
									i.clip(),
										(u = c.copy().invert().getMatrix()),
										i.transform(u[0], u[1], u[2], u[3], u[4], u[5]);
								}
								var d =
									!h && 'source-over' !== this.globalCompositeOperation() && 'drawScene' === e;
								d && (i.save(), i._applyGlobalCompositeOperation(this)),
									null === (r = this.children) ||
										void 0 === r ||
										r.forEach(function (r) {
											r[e](t, n);
										}),
									d && i.restore(),
									l && i.restore();
							}
							getClientRect(e) {
								var t,
									n,
									r,
									i,
									o,
									a = (e = e || {}).skipTransform,
									s = e.relativeTo,
									l = {
										x: 1 / 0,
										y: 1 / 0,
										width: 0,
										height: 0,
									},
									h = this;
								null === (t = this.children) ||
									void 0 === t ||
									t.forEach(function (t) {
										if (t.visible()) {
											var a = t.getClientRect({
												relativeTo: h,
												skipShadow: e.skipShadow,
												skipStroke: e.skipStroke,
											});
											(0 === a.width && 0 === a.height) ||
												(void 0 === n
													? ((n = a.x), (r = a.y), (i = a.x + a.width), (o = a.y + a.height))
													: ((n = Math.min(n, a.x)),
													  (r = Math.min(r, a.y)),
													  (i = Math.max(i, a.x + a.width)),
													  (o = Math.max(o, a.y + a.height))));
										}
									});
								for (var c = this.find('Shape'), u = !1, p = 0; p < c.length; p++)
									if (c[p]._isVisible(this)) {
										u = !0;
										break;
									}
								return (
									(l =
										u && void 0 !== n
											? {
													x: n,
													y: r,
													width: i - n,
													height: o - r,
											  }
											: {
													x: 0,
													y: 0,
													width: 0,
													height: 0,
											  }),
									a ? l : this._transformedRect(l, s)
								);
							}
						}
						r.a.addComponentsGetterSetter(a, 'clip', ['x', 'y', 'width', 'height']),
							r.a.addGetterSetter(a, 'clipX', void 0, Object(o.d)()),
							r.a.addGetterSetter(a, 'clipY', void 0, Object(o.d)()),
							r.a.addGetterSetter(a, 'clipWidth', void 0, Object(o.d)()),
							r.a.addGetterSetter(a, 'clipHeight', void 0, Object(o.d)()),
							r.a.addGetterSetter(a, 'clipFunc');
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DragDrawTool = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(5),
							h = n(2),
							c = n(1),
							u = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (
										(r.auxDrawing = !1), (r.aux = new c.WinPolygon()), n.canvas.draggable(!1), r
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'defaultColor', {
										get: function () {
											return h.ShapeColor.darkMode ? 'yellow' : 'blue';
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fillColor', {
										get: function () {
											return 'none';
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'strokeColor', {
										get: function () {
											return this.defaultColor;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'strokeWidth', {
										get: function () {
											return 15;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dashed', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'shouldRelease', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.restart = function () {
										e.prototype.restart.call(this),
											this.shouldRelease &&
												!h.SystemParam.isMobileDevice &&
												this.view.toolManager.releaseTool();
									}),
									(t.prototype.mousedown = function (t) {
										e.prototype.mousedown.call(this, t),
											(this.auxDrawing = !0),
											(this.firstPt = this.curPt),
											this.view.shapeManager.hideAssist();
									}),
									(t.prototype.mousemove = function (t) {
										e.prototype.mousemove.call(this, t),
											this.auxDrawing && (this.makeAux(), this.drawAux());
									}),
									(t.prototype.mouseup = function (t) {
										if ((e.prototype.mouseup.call(this, t), this.auxDrawing)) {
											this.makeAux(!0),
												this.finishDrag(this.aux),
												(this.auxDrawing = !1),
												this.recyleAux();
											var n = this.view.toolManager.presetQueue.shift();
											n
												? this.view.toolManager.takeTool(n)
												: (this.shouldRelease && this.view.toolManager.releaseTool(),
												  this.restart()),
												this.view.mometoManager.checkPoint();
										}
									}),
									(t.prototype.cleanup = function () {
										this.recyleAux(), this.view.canvas.draggable(!0);
									}),
									Object.defineProperty(t.prototype, 'clickShape', {
										get: function () {
											return new c.WinPolygon([
												a.default.segment(
													this.curPt,
													a.default.point(this.curPt.x + 1, this.curPt.y),
												),
											]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.makeAux = function (e) {
										void 0 === e && (e = !1);
										var t = e ? 500 : 0.001;
										if (this.firstPt.distanceTo(this.curPt)[0] < t) this.aux = this.clickShape;
										else {
											var n = a.default.segment(this.firstPt, this.curPt).middle(),
												r = Math.ceil(Math.abs(this.firstPt.x - this.curPt.x)),
												i = Math.ceil(Math.abs(this.firstPt.y - this.curPt.y));
											this.aux = c.PolygonCreator.Ins.rectangleShape(n, r, i);
										}
									}),
									(t.prototype.drawAux = function () {
										void 0 === this.vshapeOfAux &&
											((this.vshapeOfAux = s.Artisan.recycleShape(this.aux, this.view)),
											this.view.activeLayer.add(this.vshapeOfAux)),
											this.vshapeOfAux.setAttr('data', {
												poly: this.aux,
												fcolor: this.fillColor,
												stroke: this.strokeColor,
												strokeWidth: this.strokeWidth,
												dashed: this.dashed,
											}),
											this.vshapeOfAux.moveToTop(),
											this.view.refresh();
									}),
									(t.prototype.recyleAux = function () {
										this.vshapeOfAux &&
											(this.vshapeOfAux.hide(),
											(this.vshapeOfAux = void 0),
											(this.aux = new c.WinPolygon())),
											this.view.refresh();
									}),
									t
								);
							})(l.Tool);
						t.DragDrawTool = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FenesTool = void 0);
						var o = n(2),
							a = n(6),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {}),
									(t.prototype.finishDrag = function (e) {
										var t = this,
											n = !1;
										this.view.shapeManager.shapem.forEach(function (r) {
											r.avaiablePoly.forEach(function (r) {
												(r.polygon.intersect(e.polygon).length > 0 ||
													r.polygon.contains(e.polygon)) &&
													(t.addFenes(o.Utils.centroidOfPolygon(r)), (n = !0));
											});
										}),
											this.view.eventBus.emit({
												type: a.EventType.drag_in_process,
												payload: {
													moving: !0,
												},
											}),
											n || this.view.toolManager.releaseTool();
									}),
									t
								);
							})(n(5).DragDrawTool);
						t.FenesTool = s;
					},
					function (e, t, n) {
						'use strict';
						function r() {
							return (
								Error.call(this),
								(this.message = 'no elements in sequence'),
								(this.name = 'EmptyError'),
								this
							);
						}
						n.d(t, 'a', function () {
							return i;
						}),
							(r.prototype = Object.create(Error.prototype));
						var i = r;
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return o;
						});
						var r = n(3),
							i = n(84),
							o = (function (e) {
								function t(n, r) {
									void 0 === r && (r = i.a.now);
									var o =
										e.call(this, n, function () {
											return t.delegate && t.delegate !== o ? t.delegate.now() : r();
										}) || this;
									return (o.actions = []), (o.active = !1), (o.scheduled = void 0), o;
								}
								return (
									r.a(t, e),
									(t.prototype.schedule = function (n, r, i) {
										return (
											void 0 === r && (r = 0),
											t.delegate && t.delegate !== this
												? t.delegate.schedule(n, r, i)
												: e.prototype.schedule.call(this, n, r, i)
										);
									}),
									(t.prototype.flush = function (e) {
										var t = this.actions;
										if (this.active) t.push(e);
										else {
											var n;
											this.active = !0;
											do {
												if ((n = e.execute(e.state, e.delay))) break;
											} while ((e = t.shift()));
											if (((this.active = !1), n)) {
												for (; (e = t.shift()); ) e.unsubscribe();
												throw n;
											}
										}
									}),
									t
								);
							})(i.a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return a;
						});
						var r = n(3),
							i = n(21),
							o = n(19),
							a = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (t.value = null), (t.hasNext = !1), (t.hasCompleted = !1), t;
								}
								return (
									r.a(t, e),
									(t.prototype._subscribe = function (t) {
										return this.hasError
											? (t.error(this.thrownError), o.a.EMPTY)
											: this.hasCompleted && this.hasNext
											? (t.next(this.value), t.complete(), o.a.EMPTY)
											: e.prototype._subscribe.call(this, t);
									}),
									(t.prototype.next = function (e) {
										this.hasCompleted || ((this.value = e), (this.hasNext = !0));
									}),
									(t.prototype.error = function (t) {
										this.hasCompleted || e.prototype.error.call(this, t);
									}),
									(t.prototype.complete = function () {
										(this.hasCompleted = !0),
											this.hasNext && e.prototype.next.call(this, this.value),
											e.prototype.complete.call(this);
									}),
									t
								);
							})(i.a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(3),
							i = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.scheduler = t), (r.work = n), (r.pending = !1), r;
								}
								return (
									r.a(t, e),
									(t.prototype.schedule = function (e, t) {
										if ((void 0 === t && (t = 0), this.closed)) return this;
										this.state = e;
										var n = this.id,
											r = this.scheduler;
										return (
											null != n && (this.id = this.recycleAsyncId(r, n, t)),
											(this.pending = !0),
											(this.delay = t),
											(this.id = this.id || this.requestAsyncId(r, this.id, t)),
											this
										);
									}),
									(t.prototype.requestAsyncId = function (e, t, n) {
										return void 0 === n && (n = 0), setInterval(e.flush.bind(e, this), n);
									}),
									(t.prototype.recycleAsyncId = function (e, t, n) {
										if (
											(void 0 === n && (n = 0),
											null !== n && this.delay === n && !1 === this.pending)
										)
											return t;
										clearInterval(t);
									}),
									(t.prototype.execute = function (e, t) {
										if (this.closed) return new Error('executing a cancelled action');
										this.pending = !1;
										var n = this._execute(e, t);
										if (n) return n;
										!1 === this.pending &&
											null != this.id &&
											(this.id = this.recycleAsyncId(this.scheduler, this.id, null));
									}),
									(t.prototype._execute = function (e, t) {
										var n = !1,
											r = void 0;
										try {
											this.work(e);
										} catch (e) {
											(n = !0), (r = (!!e && e) || new Error(e));
										}
										if (n) return this.unsubscribe(), r;
									}),
									(t.prototype._unsubscribe = function () {
										var e = this.id,
											t = this.scheduler,
											n = t.actions,
											r = n.indexOf(this);
										(this.work = null),
											(this.state = null),
											(this.pending = !1),
											(this.scheduler = null),
											-1 !== r && n.splice(r, 1),
											null != e && (this.id = this.recycleAsyncId(t, e, null)),
											(this.delay = null);
									}),
									t
								);
							})(
								(function (e) {
									function t(t, n) {
										return e.call(this) || this;
									}
									return (
										r.a(t, e),
										(t.prototype.schedule = function (e, t) {
											return void 0 === t && (t = 0), this;
										}),
										t
									);
								})(n(19).a),
							);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(24);
						function i(e) {
							return !Object(r.a)(e) && e - parseFloat(e) + 1 >= 0;
						}
					},
					function (e, t, n) {
						'use strict';
						n.r(t);
						var r = n(14),
							i = n(4),
							o = n(35),
							a = n(48),
							s = n(10),
							l = n(37),
							h = n(28),
							c = n(38),
							u = [
								['mouseenter', '_pointerenter'],
								['mousedown', '_pointerdown'],
								['mousemove', '_pointermove'],
								['mouseup', '_pointerup'],
								['mouseleave', '_pointerleave'],
								['touchstart', '_pointerdown'],
								['touchmove', '_pointermove'],
								['touchend', '_pointerup'],
								['touchcancel', '_pointercancel'],
								['mouseover', '_pointerover'],
								['wheel', '_wheel'],
								['contextmenu', '_contextmenu'],
								['pointerdown', '_pointerdown'],
								['pointermove', '_pointermove'],
								['pointerup', '_pointerup'],
								['pointercancel', '_pointercancel'],
								['lostpointercapture', '_lostpointercapture'],
							];
						const p = {
								mouse: {
									pointerout: 'mouseout',
									pointerleave: 'mouseleave',
									pointerover: 'mouseover',
									pointerenter: 'mouseenter',
									pointermove: 'mousemove',
									pointerdown: 'mousedown',
									pointerup: 'mouseup',
									pointercancel: 'mousecancel',
									pointerclick: 'click',
									pointerdblclick: 'dblclick',
								},
								touch: {
									pointerout: 'touchout',
									pointerleave: 'touchleave',
									pointerover: 'touchover',
									pointerenter: 'touchenter',
									pointermove: 'touchmove',
									pointerdown: 'touchstart',
									pointerup: 'touchend',
									pointercancel: 'touchcancel',
									pointerclick: 'tap',
									pointerdblclick: 'dbltap',
								},
								pointer: {
									pointerout: 'pointerout',
									pointerleave: 'pointerleave',
									pointerover: 'pointerover',
									pointerenter: 'pointerenter',
									pointermove: 'pointermove',
									pointerdown: 'pointerdown',
									pointerup: 'pointerup',
									pointercancel: 'pointercancel',
									pointerclick: 'pointerclick',
									pointerdblclick: 'pointerdblclick',
								},
							},
							f = (e) =>
								e.indexOf('pointer') >= 0 ? 'pointer' : e.indexOf('touch') >= 0 ? 'touch' : 'mouse',
							d = (e) => {
								const t = f(e);
								return 'pointer' === t
									? r.a.pointerEventsEnabled && p.pointer
									: 'touch' === t
									? p.touch
									: 'mouse' === t
									? p.mouse
									: void 0;
							};
						function g(e = {}) {
							return (
								(e.clipFunc || e.clipWidth || e.clipHeight) &&
									i.Util.warn(
										'Stage does not support clipping. Please use clip for Layers or Groups.',
									),
								e
							);
						}
						const y = [];
						class m extends a.a {
							constructor(e) {
								super(g(e)),
									(this._pointerPositions = []),
									(this._changedPointerPositions = []),
									this._buildDOM(),
									this._bindContentEvents(),
									y.push(this),
									this.on('widthChange.konva heightChange.konva', this._resizeDOM),
									this.on('visibleChange.konva', this._checkVisibility),
									this.on(
										'clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva',
										() => {
											g(this.attrs);
										},
									),
									this._checkVisibility();
							}
							_validateAdd(e) {
								const t = 'Layer' === e.getType(),
									n = 'FastLayer' === e.getType();
								t || n || i.Util.throw('You may only add layers to the stage.');
							}
							_checkVisibility() {
								if (!this.content) return;
								const e = this.visible() ? '' : 'none';
								this.content.style.display = e;
							}
							setContainer(e) {
								if ('string' == typeof e) {
									if ('.' === e.charAt(0)) {
										var t = e.slice(1);
										e = document.getElementsByClassName(t)[0];
									} else {
										var n;
										(n = '#' !== e.charAt(0) ? e : e.slice(1)), (e = document.getElementById(n));
									}
									if (!e) throw 'Can not find container in document with id ' + n;
								}
								return (
									this._setAttr('container', e),
									this.content &&
										(this.content.parentElement &&
											this.content.parentElement.removeChild(this.content),
										e.appendChild(this.content)),
									this
								);
							}
							shouldDrawHit() {
								return !0;
							}
							clear() {
								var e,
									t = this.children,
									n = t.length;
								for (e = 0; e < n; e++) t[e].clear();
								return this;
							}
							clone(e) {
								return (
									e || (e = {}),
									(e.container = 'undefined' != typeof document && document.createElement('div')),
									a.a.prototype.clone.call(this, e)
								);
							}
							destroy() {
								super.destroy();
								var e = this.content;
								e && i.Util._isInDocument(e) && this.container().removeChild(e);
								var t = y.indexOf(this);
								return t > -1 && y.splice(t, 1), this;
							}
							getPointerPosition() {
								const e = this._pointerPositions[0] || this._changedPointerPositions[0];
								return e
									? {
											x: e.x,
											y: e.y,
									  }
									: (i.Util.warn(
											'Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);',
									  ),
									  null);
							}
							_getPointerById(e) {
								return this._pointerPositions.find((t) => t.id === e);
							}
							getPointersPositions() {
								return this._pointerPositions;
							}
							getStage() {
								return this;
							}
							getContent() {
								return this.content;
							}
							_toKonvaCanvas(e) {
								((e = e || {}).x = e.x || 0),
									(e.y = e.y || 0),
									(e.width = e.width || this.width()),
									(e.height = e.height || this.height());
								var t = new l.b({
										width: e.width,
										height: e.height,
										pixelRatio: e.pixelRatio || 1,
									}),
									n = t.getContext()._context,
									r = this.children;
								return (
									(e.x || e.y) && n.translate(-1 * e.x, -1 * e.y),
									r.forEach(function (t) {
										if (t.isVisible()) {
											var r = t._toKonvaCanvas(e);
											n.drawImage(
												r._canvas,
												e.x,
												e.y,
												r.getWidth() / r.getPixelRatio(),
												r.getHeight() / r.getPixelRatio(),
											);
										}
									}),
									t
								);
							}
							getIntersection(e) {
								if (!e) return null;
								var t,
									n = this.children;
								for (t = n.length - 1; t >= 0; t--) {
									const r = n[t].getIntersection(e);
									if (r) return r;
								}
								return null;
							}
							_resizeDOM() {
								var e = this.width(),
									t = this.height();
								this.content &&
									((this.content.style.width = e + 'px'), (this.content.style.height = t + 'px')),
									this.bufferCanvas.setSize(e, t),
									this.bufferHitCanvas.setSize(e, t),
									this.children.forEach((n) => {
										n.setSize({
											width: e,
											height: t,
										}),
											n.draw();
									});
							}
							add(e, ...t) {
								if (arguments.length > 1) {
									for (var n = 0; n < arguments.length; n++) this.add(arguments[n]);
									return this;
								}
								super.add(e);
								var o = this.children.length;
								return (
									o > 5 &&
										i.Util.warn(
											'The stage has ' +
												o +
												' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.',
										),
									e.setSize({
										width: this.width(),
										height: this.height(),
									}),
									e.draw(),
									r.a.isBrowser && this.content.appendChild(e.canvas._canvas),
									this
								);
							}
							getParent() {
								return null;
							}
							getLayer() {
								return null;
							}
							hasPointerCapture(e) {
								return c.c(e, this);
							}
							setPointerCapture(e) {
								c.e(e, this);
							}
							releaseCapture(e) {
								c.d(e, this);
							}
							getLayers() {
								return this.children;
							}
							_bindContentEvents() {
								r.a.isBrowser &&
									u.forEach(([e, t]) => {
										this.content.addEventListener(e, (e) => {
											this[t](e);
										});
									});
							}
							_pointerenter(e) {
								this.setPointersPositions(e);
								const t = d(e.type);
								this._fire(t.pointerenter, {
									evt: e,
									target: this,
									currentTarget: this,
								});
							}
							_pointerover(e) {
								this.setPointersPositions(e);
								const t = d(e.type);
								this._fire(t.pointerover, {
									evt: e,
									target: this,
									currentTarget: this,
								});
							}
							_getTargetShape(e) {
								let t = this[e + 'targetShape'];
								return t && !t.getStage() && (t = null), t;
							}
							_pointerleave(e) {
								const t = d(e.type),
									n = f(e.type);
								if (t) {
									this.setPointersPositions(e);
									var i = this._getTargetShape(n),
										o = !h.a.isDragging || r.a.hitOnDragEnabled;
									i && o
										? (i._fireAndBubble(t.pointerout, {
												evt: e,
										  }),
										  i._fireAndBubble(t.pointerleave, {
												evt: e,
										  }),
										  this._fire(t.pointerleave, {
												evt: e,
												target: this,
												currentTarget: this,
										  }),
										  (this[n + 'targetShape'] = null))
										: o &&
										  (this._fire(t.pointerleave, {
												evt: e,
												target: this,
												currentTarget: this,
										  }),
										  this._fire(t.pointerout, {
												evt: e,
												target: this,
												currentTarget: this,
										  })),
										(this.pointerPos = void 0),
										(this._pointerPositions = []);
								}
							}
							_pointerdown(e) {
								const t = d(e.type),
									n = f(e.type);
								if (t) {
									this.setPointersPositions(e);
									var i = !1;
									this._changedPointerPositions.forEach((o) => {
										var a = this.getIntersection(o);
										if (
											((h.a.justDragged = !1),
											(r.a['_' + n + 'ListenClick'] = !0),
											!a || !a.isListening())
										)
											return;
										r.a.capturePointerEventsEnabled && a.setPointerCapture(o.id),
											(this[n + 'ClickStartShape'] = a),
											a._fireAndBubble(t.pointerdown, {
												evt: e,
												pointerId: o.id,
											}),
											(i = !0);
										const s = e.type.indexOf('touch') >= 0;
										a.preventDefault() && e.cancelable && s && e.preventDefault();
									}),
										i ||
											this._fire(t.pointerdown, {
												evt: e,
												target: this,
												currentTarget: this,
												pointerId: this._pointerPositions[0].id,
											});
								}
							}
							_pointermove(e) {
								const t = d(e.type),
									n = f(e.type);
								if (!t) return;
								if (
									(h.a.isDragging &&
										h.a.node.preventDefault() &&
										e.cancelable &&
										e.preventDefault(),
									this.setPointersPositions(e),
									h.a.isDragging && !r.a.hitOnDragEnabled)
								)
									return;
								var i = {};
								let o = !1;
								var a = this._getTargetShape(n);
								this._changedPointerPositions.forEach((r) => {
									const s = c.b(r.id) || this.getIntersection(r),
										l = r.id,
										h = {
											evt: e,
											pointerId: l,
										};
									var u = a !== s;
									if (
										(u &&
											a &&
											(a._fireAndBubble(t.pointerout, Object.assign({}, h), s),
											a._fireAndBubble(t.pointerleave, Object.assign({}, h), s)),
										s)
									) {
										if (i[s._id]) return;
										i[s._id] = !0;
									}
									s && s.isListening()
										? ((o = !0),
										  u &&
												(s._fireAndBubble(t.pointerover, Object.assign({}, h), a),
												s._fireAndBubble(t.pointerenter, Object.assign({}, h), a),
												(this[n + 'targetShape'] = s)),
										  s._fireAndBubble(t.pointermove, Object.assign({}, h)))
										: a &&
										  (this._fire(t.pointerover, {
												evt: e,
												target: this,
												currentTarget: this,
												pointerId: l,
										  }),
										  (this[n + 'targetShape'] = null));
								}),
									o ||
										this._fire(t.pointermove, {
											evt: e,
											target: this,
											currentTarget: this,
											pointerId: this._changedPointerPositions[0].id,
										});
							}
							_pointerup(e) {
								const t = d(e.type),
									n = f(e.type);
								if (!t) return;
								this.setPointersPositions(e);
								const i = this[n + 'ClickStartShape'],
									o = this[n + 'ClickEndShape'];
								var a = {};
								let s = !1;
								this._changedPointerPositions.forEach((l) => {
									const u = c.b(l.id) || this.getIntersection(l);
									if (u) {
										if ((u.releaseCapture(l.id), a[u._id])) return;
										a[u._id] = !0;
									}
									const p = l.id,
										f = {
											evt: e,
											pointerId: p,
										};
									let d = !1;
									r.a['_' + n + 'InDblClickWindow']
										? ((d = !0), clearTimeout(this[n + 'DblTimeout']))
										: h.a.justDragged ||
										  ((r.a['_' + n + 'InDblClickWindow'] = !0),
										  clearTimeout(this[n + 'DblTimeout'])),
										(this[n + 'DblTimeout'] = setTimeout(function () {
											r.a['_' + n + 'InDblClickWindow'] = !1;
										}, r.a.dblClickWindow)),
										u && u.isListening()
											? ((s = !0),
											  (this[n + 'ClickEndShape'] = u),
											  u._fireAndBubble(t.pointerup, Object.assign({}, f)),
											  r.a['_' + n + 'ListenClick'] &&
													i &&
													i === u &&
													(u._fireAndBubble(t.pointerclick, Object.assign({}, f)),
													d &&
														o &&
														o === u &&
														u._fireAndBubble(t.pointerdblclick, Object.assign({}, f))))
											: ((this[n + 'ClickEndShape'] = null),
											  r.a['_' + n + 'ListenClick'] &&
													this._fire(t.pointerclick, {
														evt: e,
														target: this,
														currentTarget: this,
														pointerId: p,
													}),
											  d &&
													this._fire(t.pointerdblclick, {
														evt: e,
														target: this,
														currentTarget: this,
														pointerId: p,
													}));
								}),
									s ||
										this._fire(t.pointerup, {
											evt: e,
											target: this,
											currentTarget: this,
											pointerId: this._changedPointerPositions[0].id,
										}),
									(r.a['_' + n + 'ListenClick'] = !1),
									e.cancelable && e.preventDefault();
							}
							_contextmenu(e) {
								this.setPointersPositions(e);
								var t = this.getIntersection(this.getPointerPosition());
								t && t.isListening()
									? t._fireAndBubble('contextmenu', {
											evt: e,
									  })
									: this._fire('contextmenu', {
											evt: e,
											target: this,
											currentTarget: this,
									  });
							}
							_wheel(e) {
								this.setPointersPositions(e);
								var t = this.getIntersection(this.getPointerPosition());
								t && t.isListening()
									? t._fireAndBubble('wheel', {
											evt: e,
									  })
									: this._fire('wheel', {
											evt: e,
											target: this,
											currentTarget: this,
									  });
							}
							_pointercancel(e) {
								this.setPointersPositions(e);
								const t = c.b(e.pointerId) || this.getIntersection(this.getPointerPosition());
								t && t._fireAndBubble('pointerup', c.a(e)), c.d(e.pointerId);
							}
							_lostpointercapture(e) {
								c.d(e.pointerId);
							}
							setPointersPositions(e) {
								var t = this._getContentPosition(),
									n = null,
									r = null;
								void 0 !== (e = e || window.event).touches
									? ((this._pointerPositions = []),
									  (this._changedPointerPositions = []),
									  Array.prototype.forEach.call(e.touches, (e) => {
											this._pointerPositions.push({
												id: e.identifier,
												x: (e.clientX - t.left) / t.scaleX,
												y: (e.clientY - t.top) / t.scaleY,
											});
									  }),
									  Array.prototype.forEach.call(e.changedTouches || e.touches, (e) => {
											this._changedPointerPositions.push({
												id: e.identifier,
												x: (e.clientX - t.left) / t.scaleX,
												y: (e.clientY - t.top) / t.scaleY,
											});
									  }))
									: ((n = (e.clientX - t.left) / t.scaleX),
									  (r = (e.clientY - t.top) / t.scaleY),
									  (this.pointerPos = {
											x: n,
											y: r,
									  }),
									  (this._pointerPositions = [
											{
												x: n,
												y: r,
												id: i.Util._getFirstPointerId(e),
											},
									  ]),
									  (this._changedPointerPositions = [
											{
												x: n,
												y: r,
												id: i.Util._getFirstPointerId(e),
											},
									  ]));
							}
							_setPointerPosition(e) {
								i.Util.warn(
									'Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.',
								),
									this.setPointersPositions(e);
							}
							_getContentPosition() {
								if (!this.content || !this.content.getBoundingClientRect)
									return {
										top: 0,
										left: 0,
										scaleX: 1,
										scaleY: 1,
									};
								var e = this.content.getBoundingClientRect();
								return {
									top: e.top,
									left: e.left,
									scaleX: e.width / this.content.clientWidth || 1,
									scaleY: e.height / this.content.clientHeight || 1,
								};
							}
							_buildDOM() {
								if (
									((this.bufferCanvas = new l.b({
										width: this.width(),
										height: this.height(),
									})),
									(this.bufferHitCanvas = new l.a({
										pixelRatio: 1,
										width: this.width(),
										height: this.height(),
									})),
									r.a.isBrowser)
								) {
									var e = this.container();
									if (!e) throw 'Stage has no container. A container is required.';
									(e.innerHTML = ''),
										(this.content = document.createElement('div')),
										(this.content.style.position = 'relative'),
										(this.content.style.userSelect = 'none'),
										(this.content.className = 'konvajs-content'),
										this.content.setAttribute('role', 'presentation'),
										e.appendChild(this.content),
										this._resizeDOM();
								}
							}
							cache() {
								return (
									i.Util.warn(
										'Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.',
									),
									this
								);
							}
							clearCache() {
								return this;
							}
							batchDraw() {
								return (
									this.getChildren().forEach(function (e) {
										e.batchDraw();
									}),
									this
								);
							}
						}
						(m.prototype.nodeType = 'Stage'), Object(r.b)(m), s.a.addGetterSetter(m, 'container');
						var v = n(61);
						class w extends v.Layer {
							constructor(e) {
								super(e);
							}
							drawHit(e, t) {
								const n = super.drawHit(e, t);
								return (
									this._fire('drawhit_webcc', {
										node: this,
										can: e,
										top: t,
									}),
									n
								);
							}
							drawScene(e, t) {
								return (
									this.on('draw', (n) => {
										this._fire('drawscene_webcc', {
											node: this,
											can: e,
											top: t,
										}),
											this.off('draw');
									}),
									super.drawScene(e, t)
								);
							}
						}
						class b extends v.Layer {
							constructor(e) {
								super(e),
									this.listening(!1),
									i.Util.warn(
										'Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.',
									);
							}
						}
						(b.prototype.nodeType = 'FastLayer'), Object(r.b)(b);
						class S extends a.a {
							_validateAdd(e) {
								var t = e.getType();
								'Group' !== t &&
									'Shape' !== t &&
									i.Util.throw('You may only add groups and shapes to groups.');
							}
						}
						(S.prototype.nodeType = 'Group'), Object(r.b)(S);
						var _ = n(77);
						const P = i.Util._assign(r.a, {
							Util: i.Util,
							Transform: i.Transform,
							Node: o.a,
							Container: a.a,
							Stage: m,
							stages: y,
							Layer: v.Layer,
							CustomLayer: w,
							HitCanvas: l.a,
							FastLayer: b,
							Group: S,
							DD: h.a,
							Shape: _.Shape,
							shapes: _.shapes,
						});
						t.default = P;
					},
					function (e, t, n) {
						'use strict';
						function r(e) {
							setTimeout(function () {
								throw e;
							});
						}
						n.d(t, 'a', function () {
							return r;
						});
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Frametify = void 0);
						var i = r(n(0)),
							o = n(86),
							a = n(1),
							s = n(2),
							l = (function () {
								function e(e) {
									(this.poly = e), (this.innerPolys = []), (this.barPolys = []);
								}
								return (
									(e.prototype.run = function (e, t) {
										return this.poly.isEmpty
											? {
													barPolys: [],
													innerPolys: [this.poly],
											  }
											: ((this.innerPolys = this.innerPolygons(e)),
											  (this.barPolys = this.barPolygons(e, t)),
											  {
													barPolys: this.barPolys,
													innerPolys: this.innerPolys,
											  });
									}),
									(e.prototype.innerPolygons = function (t) {
										return [e.findPoly(this.poly, t, !0)];
									}),
									(e.prototype.barPolygons = function (e, t) {
										var n = this.poly.circlePolygon();
										return void 0 === n
											? this.createBar(this.poly.edges, this.innerPolys[0].edges, t)
											: this.createRing(n, e[0]);
									}),
									(e.prototype.createDefaultBar = function (e, t) {
										for (var n = [], r = 0; r < e.length; r++) {
											var o = e[r],
												l = t[r],
												h = new a.WinPolygon();
											h.add(o.clone()),
												h.add(i.default.segment(o.end, l.end)),
												h.add(l.reverse()),
												h.add(i.default.segment(l.start, o.start)),
												h.done(),
												(h.polyId.idx = r),
												(h.spLine.line = s.Utils.edgeToLine(o)),
												(h.mulShape = o),
												h.epDock.setDock(!0, s.Dock.None()),
												h.epDock.setDock(!1, s.Dock.None()),
												n.push(h);
										}
										return n;
									}),
									(e.prototype.createRing = function (e, t) {
										var n = new a.WinPolygon(),
											r = e.r.valueOf();
										return (
											n.addRing(e.center, r - t, r),
											(n.polyId.idx = 0),
											(n.mulShape = i.default.arc(e.center, r)),
											[n]
										);
									}),
									(e.prototype.checkHv = function (e, t) {
										var n = 0,
											r = 0;
										e instanceof i.default.Segment && (n = e.slope),
											e instanceof i.default.Arc &&
												(n = i.default.segment(e.start, e.middle()).slope),
											t instanceof i.default.Segment && (r = t.slope),
											t instanceof i.default.Arc &&
												(r = i.default.segment(t.start, t.middle()).slope);
										var o = n > Math.PI ? n - Math.PI : n,
											a = r > Math.PI ? r - Math.PI : r;
										return Math.abs(o - Math.PI / 2) > Math.abs(a - Math.PI / 2)
											? {
													fst: 'h',
													scd: 'v',
											  }
											: {
													fst: 'v',
													scd: 'h',
											  };
									}),
									(e.prototype.fixHvForHollowFrame = function (e, t) {
										if (t) {
											var n = e.scd;
											(e.scd = e.fst), (e.fst = n);
										}
									}),
									(e.prototype.oppositeToward = function (e, t) {
										e instanceof i.default.Arc && (e = i.default.segment(e.start, e.end)),
											t instanceof i.default.Arc && (t = i.default.segment(t.start, t.end));
										var n = this.poly.orientation,
											r = new a.WinPolygon([e, t, i.default.segment(t.end, e.start)]).orientation;
										return r !== i.default.ORIENTATION.NOT_ORIENTABLE && r !== n;
									}),
									(e.prototype.createBar = function (e, t, n) {
										for (var r = n.length; r < e.length; r++) n.push(s.EdgeJointWay.Default);
										if (
											n.every(function (e) {
												return e === s.EdgeJointWay.Default;
											})
										)
											return this.createDefaultBar(e, t);
										for (var l = e.length, h = [], c = 0; c < l; c++) {
											var u = new a.WinPolygon(),
												p = {
													fst: '',
													scd: '',
												},
												f = e[c],
												d = (c + l - 1) % l,
												g = e[d],
												y = t[c],
												m = t[d],
												v = y.start,
												w = f.start;
											this.invalidEjw(n[c], f, g) && (n[c] = s.EdgeJointWay.Default),
												n[c] !== s.EdgeJointWay.Default && (p = this.checkHv(f, g)),
												n[c] === s.EdgeJointWay.Horizontal &&
													'v' === p.fst &&
													m instanceof i.default.Arc &&
													f instanceof i.default.Segment &&
													(o.ArcUtils.edgeCrossPt(m, f) || (n[c] = s.EdgeJointWay.Default));
											var b = n[c],
												S = s.Dock.None(),
												_ = s.Dock.None();
											if (b !== s.EdgeJointWay.Default) {
												var P = this.oppositeToward(g, f);
												this.fixHvForHollowFrame(p, P),
													'v' === p.fst
														? b === s.EdgeJointWay.Vertical
															? ((v = o.ArcUtils.edgeCrossPt(g, y)),
															  P && (S = s.Dock.Frame(new s.PolyId(d))))
															: b === s.EdgeJointWay.Horizontal
															? ((w = o.ArcUtils.edgeCrossPt(m, f)),
															  P || (S = s.Dock.Frame(new s.PolyId(d))))
															: b === s.EdgeJointWay.Separated && (w = o.ArcUtils.edgeCrossPt(m, f))
														: b === s.EdgeJointWay.Vertical
														? ((w = o.ArcUtils.edgeCrossPt(m, f)),
														  P || (S = s.Dock.Frame(new s.PolyId(d))))
														: b === s.EdgeJointWay.Horizontal
														? ((v = o.ArcUtils.edgeCrossPt(g, y)),
														  P && (S = s.Dock.Frame(new s.PolyId(d))))
														: b === s.EdgeJointWay.Separated && (w = o.ArcUtils.edgeCrossPt(m, f));
											}
											var x = (c + 1) % l,
												D = e[x],
												T = t[x],
												O = f.end,
												M = y.end;
											if (
												(this.invalidEjw(n[x], f, D) && (n[x] = s.EdgeJointWay.Default),
												n[x] !== s.EdgeJointWay.Default && (p = this.checkHv(f, D)),
												n[x] === s.EdgeJointWay.Horizontal &&
													'v' === p.fst &&
													T instanceof i.default.Arc &&
													f instanceof i.default.Segment &&
													(o.ArcUtils.edgeCrossPt(T, f) || (n[x] = s.EdgeJointWay.Default)),
												n[x] === s.EdgeJointWay.Horizontal &&
													'h' === p.fst &&
													y instanceof i.default.Arc &&
													D instanceof i.default.Segment &&
													(o.ArcUtils.edgeCrossPt(y, D) || (n[x] = s.EdgeJointWay.Default)),
												(b = n[x]) !== s.EdgeJointWay.Default &&
													((P = this.oppositeToward(f, D)),
													this.fixHvForHollowFrame(p, P),
													'v' === p.fst
														? b === s.EdgeJointWay.Vertical
															? ((M = o.ArcUtils.edgeCrossPt(y, D)),
															  P && (_ = s.Dock.Frame(new s.PolyId(x))))
															: b === s.EdgeJointWay.Horizontal
															? ((O = o.ArcUtils.edgeCrossPt(f, T)),
															  P || (_ = s.Dock.Frame(new s.PolyId(x))))
															: b === s.EdgeJointWay.Separated && (O = o.ArcUtils.edgeCrossPt(f, T))
														: b === s.EdgeJointWay.Vertical
														? ((O = o.ArcUtils.edgeCrossPt(f, T)),
														  P || (_ = s.Dock.Frame(new s.PolyId(x))))
														: b === s.EdgeJointWay.Horizontal
														? ((M = o.ArcUtils.edgeCrossPt(y, D)),
														  P && (_ = s.Dock.Frame(new s.PolyId(x))))
														: b === s.EdgeJointWay.Separated && (O = o.ArcUtils.edgeCrossPt(f, T))),
												g instanceof i.default.Arc && n[c] !== s.EdgeJointWay.Default)
											) {
												(p = this.checkHv(g, f)),
													(P = this.oppositeToward(g, f)),
													this.fixHvForHollowFrame(p, P);
												var E = g.r.valueOf();
												'h' === p.fst
													? n[c] === s.EdgeJointWay.Horizontal && (E = m.r.valueOf())
													: n[c] === s.EdgeJointWay.Vertical && (E = m.r.valueOf());
												var I = i.default.vector(g.center, v).slope,
													C = i.default.vector(g.center, w).slope,
													k = i.default.arc(g.center, E, I, C, g.counterClockwise),
													F = i.default.arc(g.center, E, I, C, !g.counterClockwise);
												k.length > F.length ? u.add(F) : u.add(k);
											} else u.add(i.default.segment(v, w));
											if (
												(f instanceof i.default.Arc
													? ((I = i.default.vector(f.center, w).slope),
													  (C = i.default.vector(f.center, O).slope),
													  (k = i.default.arc(f.center, f.r.valueOf(), I, C, f.counterClockwise)),
													  u.add(k))
													: u.add(i.default.segment(w, O)),
												D instanceof i.default.Arc && n[(c + 1) % l] !== s.EdgeJointWay.Default
													? ((p = this.checkHv(f, D)),
													  (P = this.oppositeToward(f, D)),
													  this.fixHvForHollowFrame(p, P),
													  (E = D.r.valueOf()),
													  'h' === p.fst
															? n[(c + 1) % l] === s.EdgeJointWay.Vertical && (E = T.r.valueOf())
															: n[(c + 1) % l] === s.EdgeJointWay.Horizontal && (E = T.r.valueOf()),
													  (I = i.default.vector(D.center, O).slope),
													  (C = i.default.vector(D.center, M).slope),
													  (k = i.default.arc(D.center, E, I, C, D.counterClockwise)),
													  (F = i.default.arc(D.center, E, I, C, !D.counterClockwise)),
													  k.length > F.length ? u.add(F) : u.add(k))
													: u.add(i.default.segment(O, M)),
												y instanceof i.default.Arc)
											) {
												var j = y.reverse();
												(I = i.default.vector(j.center, M).slope),
													(C = i.default.vector(j.center, v).slope),
													(k = i.default.arc(j.center, j.r.valueOf(), I, C, j.counterClockwise)),
													u.add(k);
											} else u.add(i.default.segment(M, v));
											u.done(),
												(u.polyId.idx = c),
												(u.spLine.line = s.Utils.edgeToLine(f)),
												(u.mulShape = f),
												u.epDock.setDock(!0, S),
												u.epDock.setDock(!1, _),
												h.push(u);
										}
										return h;
									}),
									(e.prototype.invalidEjw = function (e, t, n) {
										return (
											!![s.EdgeJointWay.Horizontal, s.EdgeJointWay.Vertical].some(function (t) {
												return t === e;
											}) && this.isTangentToArc(t, n)
										);
									}),
									(e.prototype.isTangentToArc = function (e, t) {
										var n = [e, t].find(function (e) {
												return e instanceof i.default.Arc;
											}),
											r = [e, t].find(function (e) {
												return e instanceof i.default.Segment;
											});
										if (!n || !r) return !1;
										var o = i.default.line(r.start, r.end);
										return i.default.Utils.EQ_0(n.center.distanceTo(o)[0] - n.r.valueOf());
									}),
									(e.checkSmallArc = function (e, t) {
										for (var n = 0; n < e.length; n++) {
											var r = e[n],
												o = t[n];
											r instanceof i.default.Arc &&
												o instanceof i.default.Arc &&
												i.default.vector(r.start, r.end).dot(i.default.vector(o.start, o.end)) <
													0 &&
												(t[n] = i.default.segment(o.start, o.end));
										}
										return t;
									}),
									(e.findPoly = function (t, n, r) {
										var o = n.filter(function (e) {
											return !i.default.Utils.EQ_0(e);
										});
										if (o.length !== t.edges.length) return t;
										var s = t.circlePolygon();
										if (void 0 !== s && 1 === o.length) {
											var l = s.r.valueOf(),
												h = new a.WinPolygon();
											return h.addCircle(s.center, r ? l - o[0] : l + o[0]), h;
										}
										var c = e._findParallelEdges(t.edges, o, r, t.orientation, !0);
										return new a.WinPolygon(c);
									}),
									(e.findParallelEdges = function (t, n, r, o, a) {
										return (
											void 0 === o && (o = i.default.ORIENTATION.CCW),
											void 0 === a && (a = !1),
											e._findParallelEdges(t, n, r, o, a)
										);
									}),
									(e._findParallelEdges = function (t, n, r, o, a) {
										void 0 === o && (o = i.default.ORIENTATION.CCW), void 0 === a && (a = !1);
										for (var s = [], l = 0; l < t.length; l++) {
											var h = t[l];
											if (h instanceof i.default.Segment) {
												var c = i.default.vector(h.start, h.end).normalize();
												o === i.default.ORIENTATION.CCW
													? (c = r ? c.rotate90CCW() : c.rotate90CW())
													: o === i.default.ORIENTATION.CW &&
													  (c = r ? c.rotate90CW() : c.rotate90CCW()),
													(c = c.multiply(n[l])),
													s.push(h.translate(c));
											} else if (h instanceof i.default.Arc) {
												var u = o === i.default.ORIENTATION.CCW && h.counterClockwise,
													p = o === i.default.ORIENTATION.CW && !h.counterClockwise,
													f = u || p,
													d = (f = r ? f : !f) ? h.r.valueOf() - n[l] : h.r.valueOf() + n[l];
												d = d < 0 ? 0.1 : d;
												var g = i.default.arc(
													h.center,
													d,
													h.startAngle,
													h.endAngle,
													h.counterClockwise,
												);
												s.push(g);
											}
										}
										for (var y = a ? s.length : s.length - 1, m = 0; m < y; m++)
											e.edgeIntersection(s, m);
										return r ? e.checkSmallArc(t, s) : s;
									}),
									(e.edgeIntersection = function (e, t) {
										var n = e.length,
											r = e[t],
											a = e[(t + 1) % n];
										if (r instanceof i.default.Segment && a instanceof i.default.Segment)
											if (0 === r.length) {
												var s = r.ps.projectionOn(i.default.line(a.ps, a.pe));
												(r.pe = s.clone()), (a.ps = s.clone());
											} else
												(s = i.default.line(r.ps, r.pe).intersect(i.default.line(a.ps, a.pe))[0]),
													(r.pe = s.clone()),
													(a.ps = s.clone());
										else if (r instanceof i.default.Segment && a instanceof i.default.Arc) {
											if (void 0 === (s = o.ArcUtils.edgeCrossPt(r, a)))
												throw new Error('invalid polygon no intersection!');
											r.pe = s.clone();
											var l = i.default.line(a.center, s).slope;
											i.default.Utils.GE(l, 2 * Math.PI) && (l -= 2 * Math.PI),
												(e[(t + 1) % n] = i.default.arc(
													a.center,
													a.r.valueOf(),
													l,
													a.endAngle,
													a.counterClockwise,
												));
										} else if (r instanceof i.default.Arc && a instanceof i.default.Segment) {
											if (void 0 === (s = o.ArcUtils.edgeCrossPt(r, a)))
												throw new Error('invalid polygon no intersection!');
											(a.ps = s.clone()),
												(l = i.default.line(r.center, s).slope),
												i.default.Utils.GE(l, 2 * Math.PI) && (l -= 2 * Math.PI),
												(e[t] = i.default.arc(
													r.center,
													r.r.valueOf(),
													r.startAngle,
													l,
													r.counterClockwise,
												));
										} else if (r instanceof i.default.Arc && a instanceof i.default.Arc) {
											if (void 0 === (s = o.ArcUtils.edgeCrossPt(r, a)))
												throw new Error('invalid polygon no intersection!');
											var h = i.default.line(r.center, s).slope;
											(e[t] = i.default.arc(
												r.center,
												r.r.valueOf(),
												r.startAngle,
												h,
												r.counterClockwise,
											)),
												(l = i.default.line(a.center, s).slope),
												i.default.Utils.GE(l, 2 * Math.PI) && (l -= 2 * Math.PI),
												(e[(t + 1) % n] = i.default.arc(
													a.center,
													a.r.valueOf(),
													l,
													a.endAngle,
													a.counterClockwise,
												));
										}
									}),
									e
								);
							})();
						t.Frametify = l;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShapeType = void 0),
							(function (e) {
								(e.None = 'None'),
									(e.Hole = 'Hole'),
									(e.Wall = 'Wall'),
									(e.Frame = 'Frame'),
									(e.SubFrame = 'SubFrame'),
									(e.InnerFrame = 'InnerFrame'),
									(e.PartialSubFrame = 'PartialSubFrame'),
									(e.Bar = 'Bar'),
									(e.Sash = 'Sash'),
									(e.GuardSash = 'GuardSash'),
									(e.CircleSash = 'CircleSash'),
									(e.KfcSash = 'KfcSash'),
									(e.DoubleKfcSash = 'DoubleKfcSash'),
									(e.Screen = 'Screen'),
									(e.DoubleSash = 'DoubleSash'),
									(e.DoubleScreen = 'DoubleScreen'),
									(e.Glass = 'Glass'),
									(e.Panel = 'Panel'),
									(e.Bead = 'Bead'),
									(e.Handle = 'Handle'),
									(e.Hinge = 'Hinge'),
									(e.Lock = 'Lock'),
									(e.Indicator = 'Indicator'),
									(e.FrameMullion = 'FrameMullion'),
									(e.SashMullion = 'SashMullion'),
									(e.KfcWaist = 'KfcWaist'),
									(e.ScreenMullion = 'ScreenMullion'),
									(e.Dim = 'Dim'),
									(e.DecorationBar = 'DecorationBar'),
									(e.ExtraDim = 'ExtraDim'),
									(e.ExtraPersonImage = 'ExtraPersonImage'),
									(e.TextDim = 'TextDim'),
									(e.AntiTheft = 'AntiTheft'),
									(e.AntiTheftMullion = 'AntiTheftMullion'),
									(e.AntiTheftHoleHeight = 'AntiTheftHoleHeight'),
									(e.AntiTheftGap = 'AntiTheftGap'),
									(e.AntiTheftHandleW = 'AntiTheftHandleW'),
									(e.FoldSash = 'FoldSash'),
									(e.FoldScreen = 'FoldScreen'),
									(e.FoldShade = 'FoldShade'),
									(e.Slide = 'Slide'),
									(e.UpTrack = 'UpTrack'),
									(e.FixedUpTrack = 'FixedUpTrack'),
									(e.DownTrack = 'DownTrack'),
									(e.FixedDownTrack = 'FixedDownTrack'),
									(e.UpDownTrack = 'UpDownTrack'),
									(e.SideTrack = 'SideTrack'),
									(e.DoubleSideTrack = 'DoubleSideTrack'),
									(e.TopView = 'TopView'),
									(e.CornerJoiner = 'CornerJoiner'),
									(e.WallCornerJoiner = 'WallCornerJoiner'),
									(e.PanoramicCornerJoiner = 'PanoramicCornerJoiner'),
									(e.Connector = 'Connector'),
									(e.Note = 'Note'),
									(e.Shade = 'Shade'),
									(e.ShadeMullion = 'ShadeMullion'),
									(e.ShadePushSash = 'ShadePushSash'),
									(e.ShadePushSashMullion = 'ShadePushSashMullion'),
									(e.DoubleShadePushSash = 'DoubleShadePushSash'),
									(e.SlideSashUpBar = 'SlideSashUpBar'),
									(e.SlideSashDownBar = 'SlideSashDownBar'),
									(e.SlideSashCollisionLeftBar = 'SlideSashCollisionLeftBar'),
									(e.SlideSashCollisionRightBar = 'SlideSashCollisionRightBar'),
									(e.SlideSashEdgeBar = 'SlideSashEdgeBar'),
									(e.SlideSashSingleBar = 'SlideSashSingleBar'),
									(e.SlideSashDoubleBar = 'SlideSashDoubleBar'),
									(e.SlideSashNoneBar = 'SlideSashNoneBar'),
									(e.GLassHole = 'GLassHole'),
									(e.KfcSashUpBar = 'KfcSashUpBar'),
									(e.KfcSashDownBar = 'KfcSashDownBar'),
									(e.KfcSashLeftBar = 'KfcSashLeftBar'),
									(e.KfcSashRightBar = 'KfcSashRightBar'),
									(e.MillingFrame = 'MillingFrame'),
									(e.MillingSash = 'MillingSash'),
									(e.GlassGap = 'GlassGap');
							})(t.ShapeType || (t.ShapeType = {}));
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						}),
							n.d(t, 'b', function () {
								return o;
							});
						var r = n(36);
						function i() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return o(e);
						}
						function o(e) {
							return e
								? 1 === e.length
									? e[0]
									: function (t) {
											return e.reduce(function (e, t) {
												return t(e);
											}, t);
									  }
								: r.a;
						}
					},
					function (e, t, n) {
						'use strict';
						n.r(t),
							n.d(t, 'Layer', function () {
								return f;
							});
						var r = n(4),
							i = n(48),
							o = n(35),
							a = n(10),
							s = n(37),
							l = n(18),
							h = n(77),
							c = n(14),
							u = [
								{
									x: 0,
									y: 0,
								},
								{
									x: -1,
									y: -1,
								},
								{
									x: 1,
									y: -1,
								},
								{
									x: 1,
									y: 1,
								},
								{
									x: -1,
									y: 1,
								},
							],
							p = u.length;
						class f extends i.a {
							constructor(e) {
								super(e),
									(this.canvas = new s.b()),
									(this.hitCanvas = new s.a({
										pixelRatio: 1,
									})),
									(this._waitingForDraw = !1),
									this.on('visibleChange.konva', this._checkVisibility),
									this._checkVisibility(),
									this.on('imageSmoothingEnabledChange.konva', this._setSmoothEnabled),
									this._setSmoothEnabled();
							}
							createPNGStream() {
								return this.canvas._canvas.createPNGStream();
							}
							getCanvas() {
								return this.canvas;
							}
							getNativeCanvasElement() {
								return this.canvas._canvas;
							}
							getHitCanvas() {
								return this.hitCanvas;
							}
							getContext() {
								return this.getCanvas().getContext();
							}
							clear(e) {
								return this.getContext().clear(e), this.getHitCanvas().getContext().clear(e), this;
							}
							setZIndex(e) {
								super.setZIndex(e);
								var t = this.getStage();
								return (
									t &&
										t.content &&
										(t.content.removeChild(this.getNativeCanvasElement()),
										e < t.children.length - 1
											? t.content.insertBefore(
													this.getNativeCanvasElement(),
													t.children[e + 1].getCanvas()._canvas,
											  )
											: t.content.appendChild(this.getNativeCanvasElement())),
									this
								);
							}
							moveToTop() {
								o.a.prototype.moveToTop.call(this);
								var e = this.getStage();
								return (
									e &&
										e.content &&
										(e.content.removeChild(this.getNativeCanvasElement()),
										e.content.appendChild(this.getNativeCanvasElement())),
									!0
								);
							}
							moveUp() {
								if (!o.a.prototype.moveUp.call(this)) return !1;
								var e = this.getStage();
								return (
									!(!e || !e.content) &&
									(e.content.removeChild(this.getNativeCanvasElement()),
									this.index < e.children.length - 1
										? e.content.insertBefore(
												this.getNativeCanvasElement(),
												e.children[this.index + 1].getCanvas()._canvas,
										  )
										: e.content.appendChild(this.getNativeCanvasElement()),
									!0)
								);
							}
							moveDown() {
								if (o.a.prototype.moveDown.call(this)) {
									var e = this.getStage();
									if (e) {
										var t = e.children;
										e.content &&
											(e.content.removeChild(this.getNativeCanvasElement()),
											e.content.insertBefore(
												this.getNativeCanvasElement(),
												t[this.index + 1].getCanvas()._canvas,
											));
									}
									return !0;
								}
								return !1;
							}
							moveToBottom() {
								if (o.a.prototype.moveToBottom.call(this)) {
									var e = this.getStage();
									if (e) {
										var t = e.children;
										e.content &&
											(e.content.removeChild(this.getNativeCanvasElement()),
											e.content.insertBefore(
												this.getNativeCanvasElement(),
												t[1].getCanvas()._canvas,
											));
									}
									return !0;
								}
								return !1;
							}
							getLayer() {
								return this;
							}
							remove() {
								var e = this.getNativeCanvasElement();
								return (
									o.a.prototype.remove.call(this),
									e && e.parentNode && r.Util._isInDocument(e) && e.parentNode.removeChild(e),
									this
								);
							}
							getStage() {
								return this.parent;
							}
							setSize({ width: e, height: t }) {
								return (
									this.canvas.setSize(e, t),
									this.hitCanvas.setSize(e, t),
									this._setSmoothEnabled(),
									this
								);
							}
							_validateAdd(e) {
								var t = e.getType();
								'Group' !== t &&
									'Shape' !== t &&
									r.Util.throw('You may only add groups and shapes to a layer.');
							}
							_toKonvaCanvas(e) {
								return (
									((e = e || {}).width = e.width || this.getWidth()),
									(e.height = e.height || this.getHeight()),
									(e.x = void 0 !== e.x ? e.x : this.x()),
									(e.y = void 0 !== e.y ? e.y : this.y()),
									o.a.prototype._toKonvaCanvas.call(this, e)
								);
							}
							_checkVisibility() {
								const e = this.visible();
								this.canvas._canvas.style.display = e ? 'block' : 'none';
							}
							_setSmoothEnabled() {
								this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();
							}
							getWidth() {
								if (this.parent) return this.parent.width();
							}
							setWidth() {
								r.Util.warn(
									'Can not change width of layer. Use "stage.width(value)" function instead.',
								);
							}
							getHeight() {
								if (this.parent) return this.parent.height();
							}
							setHeight() {
								r.Util.warn(
									'Can not change height of layer. Use "stage.height(value)" function instead.',
								);
							}
							batchDraw() {
								return (
									this._waitingForDraw ||
										((this._waitingForDraw = !0),
										r.Util.requestAnimFrame(() => {
											this.draw(), (this._waitingForDraw = !1);
										})),
									this
								);
							}
							getIntersection(e) {
								if (!this.isListening() || !this.isVisible()) return null;
								for (var t = 1, n = !1; ; ) {
									for (let r = 0; r < p; r++) {
										const i = u[r],
											o = this._getIntersection({
												x: e.x + i.x * t,
												y: e.y + i.y * t,
											}),
											a = o.shape;
										if (a) return a;
										if (((n = !!o.antialiased), !o.antialiased)) break;
									}
									if (!n) return null;
									t += 1;
								}
							}
							_getIntersection(e) {
								const t = this.hitCanvas.pixelRatio,
									n = this.hitCanvas.context.getImageData(
										Math.round(e.x * t),
										Math.round(e.y * t),
										1,
										1,
									).data,
									i = n[3];
								if (255 === i) {
									const e = r.Util._rgbToHex(n[0], n[1], n[2]),
										t = h.shapes['#' + e];
									return t
										? {
												shape: t,
										  }
										: {
												antialiased: !0,
										  };
								}
								return i > 0
									? {
											antialiased: !0,
									  }
									: {};
							}
							drawScene(e, t) {
								var n = this.getLayer(),
									r = e || (n && n.getCanvas());
								return (
									this._fire('beforeDraw', {
										node: this,
									}),
									this.clearBeforeDraw() && r.getContext().clear(),
									i.a.prototype.drawScene.call(this, r, t),
									this._fire('draw', {
										node: this,
									}),
									this
								);
							}
							drawHit(e, t) {
								var n = this.getLayer(),
									r = e || (n && n.hitCanvas);
								return (
									n && n.clearBeforeDraw() && n.getHitCanvas().getContext().clear(),
									i.a.prototype.drawHit.call(this, r, t),
									this
								);
							}
							enableHitGraph() {
								return this.hitGraphEnabled(!0), this;
							}
							disableHitGraph() {
								return this.hitGraphEnabled(!1), this;
							}
							setHitGraphEnabled(e) {
								r.Util.warn(
									'hitGraphEnabled method is deprecated. Please use layer.listening() instead.',
								),
									this.listening(e);
							}
							getHitGraphEnabled(e) {
								return (
									r.Util.warn(
										'hitGraphEnabled method is deprecated. Please use layer.listening() instead.',
									),
									this.listening()
								);
							}
							toggleHitCanvas() {
								if (this.parent && this.parent.content) {
									var e = this.parent;
									this.hitCanvas._canvas.parentNode
										? e.content.removeChild(this.hitCanvas._canvas)
										: e.content.appendChild(this.hitCanvas._canvas);
								}
							}
						}
						(f.prototype.nodeType = 'Layer'),
							Object(c.b)(f),
							a.a.addGetterSetter(f, 'imageSmoothingEnabled', !0),
							a.a.addGetterSetter(f, 'clearBeforeDraw', !0),
							a.a.addGetterSetter(f, 'hitGraphEnabled', !0, Object(l.a)());
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return r;
						});
						var r =
							'function' == typeof Symbol
								? Symbol('rxSubscriber')
								: '@@rxSubscriber_' + Math.random();
					},
					function (e, t, n) {
						'use strict';
						function r(e) {
							return (
								Error.call(this),
								(this.message = e
									? e.length +
									  ' errors occurred during unsubscription:\n' +
									  e
											.map(function (e, t) {
												return t + 1 + ') ' + e.toString();
											})
											.join('\n  ')
									: ''),
								(this.name = 'UnsubscriptionError'),
								(this.errors = e),
								this
							);
						}
						n.d(t, 'a', function () {
							return i;
						}),
							(r.prototype = Object.create(Error.prototype));
						var i = r;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ToolType = t.ToolManager = void 0);
						var i,
							o = r(n(56)),
							a = r(n(0)),
							s = n(77),
							l = n(7),
							h = n(114),
							c = n(2),
							u = n(1),
							p = n(5),
							f = (function () {
								function e(e) {
									(this.view = e),
										(this.tools = {}),
										(this.presetQueue = []),
										(this.mousePosition = a.default.point()),
										(this.clientPosition = a.default.point()),
										(this.curTool = i.pan),
										this.registerTool(),
										(this.defaultTool = i.pan),
										this.initTool(),
										(this.keyHelper = new h.ShortkeyHelper()),
										this.hookEvent();
								}
								return (
									(e.prototype.initTool = function () {
										var e = this.presetQueue.shift(),
											t = e || this.defaultTool;
										(this.tool = this.tools[t]()), (this.curTool = t);
									}),
									(e.prototype.plugMenu = function (e) {}),
									(e.prototype.hookEvent = function () {
										var e = this;
										this.view.canvas.on('contextmenu', function (e) {
											return e.evt.preventDefault();
										}),
											this.view.canvas.on('click tap', function (t) {
												if (!(e.tool instanceof p.DragDrawTool)) {
													var n = e.tool.getPosition();
													(!l.DrawParams.Ins.readonly &&
														e.view.shapeManager.hitBar(n, e.tool.isFrameTool)) ||
														(e.view.shapeManager.hideAssist(), e.view.refresh());
												}
											});
										var t = function (t) {
											var n = e.curTool;
											t.target instanceof o.default.Shape &&
												t.target.attrs.tool &&
												t.target.attrs.tool !== i.none &&
												(e.takeTool(t.target.attrs.tool), e.tool.dbclick(t)),
												e.takeTool(n),
												e.view.refresh();
										};
										this.view.canvas.on('dblclick dbltap', t),
											this.view.canvas.on('mousedown', function (t) {
												e.tool.mousedown(t.evt), t.evt.preventDefault(), e.view.refresh();
											}),
											this.view.canvas.on('touchstart', function (n) {
												if ('stylus' === n.evt.touches[0].touchType)
													if (void 0 === e.clickTimer) {
														var r = e;
														(e.clickTimer = setTimeout(function () {
															r.clickTimer = void 0;
														}, 600)),
															e.tool.mousedown(n.evt),
															n.evt.preventDefault();
													} else
														clearTimeout(e.clickTimer),
															(e.clickTimer = void 0),
															t({
																evt: n.evt,
																target: n.target,
															}),
															n.evt.preventDefault();
												else e.tool.mousedown(n.evt), n.evt.preventDefault();
											}),
											this.view.canvas.on('mousemove touchmove', function (t) {
												e.tool.mousemove(t.evt), t.evt.preventDefault();
											}),
											this.view.canvas.on('mouseup touchend', function (t) {
												e.tool.mouseup(t.evt), t.evt.preventDefault(), e.view.refresh();
											}),
											this.view.canvas.on('wheel', function (t) {
												(l.DrawParams.Ins.strictWheel && !t.evt.altKey) ||
													l.DrawParams.Ins.preventScale ||
													(t.evt.preventDefault(), e.tool.mousewheel(t.evt), e.view.refresh());
											}),
											this.view.canvas.getContent().addEventListener(
												'touchmove',
												function (t) {
													if (2 === t.touches.length) {
														if (l.DrawParams.Ins.preventScale) return;
														t.preventDefault(), e.tool.touchwheel(t);
													}
												},
												!!c.SystemParam.supportsPassive && {
													passive: !1,
												},
											),
											this.view.canvas.getContent().addEventListener('touchend', function (t) {
												e.tool.touchend(t), e.view.refresh();
											}),
											this.view.canvas.on('dragstart', function (t) {
												if (l.DrawParams.Ins.disableDrag)
													t.target instanceof s.Shape && c.ShapeHelper.restoreShapeMatrix(t.target);
												else if (t.target !== e.view.canvas) {
													var n = t.target.attrs.tool;
													void 0 !== n &&
														(n === i.editDragRobot && e.view.shapeManager.hideAssist(!1),
														n === i.editSplitter && e.view.shapeManager.hideAssist(),
														n === i.editSash && e.view.shapeManager.hideAssist(),
														e.takeTool(n),
														e.tool.dragstart(t));
												}
											}),
											this.view.canvas.on('dragmove', function (t) {
												l.DrawParams.Ins.disableDrag
													? t.target instanceof s.Shape &&
													  c.ShapeHelper.restoreShapeMatrix(t.target)
													: t.target !== e.view.canvas
													? void 0 !== t.target.attrs.tool && e.tool.dragmove(t)
													: e.view.postDraw(void 0, void 0);
											}),
											this.view.canvas.on('dragend', function (t) {
												l.DrawParams.Ins.disableDrag
													? t.target instanceof s.Shape &&
													  c.ShapeHelper.restoreShapeMatrix(t.target)
													: t.target !== e.view.canvas
													? void 0 !== t.target.attrs.tool &&
													  (e.tool.mousedone(t.evt), e.view.refresh())
													: e.view.refresh();
											});
									}),
									(e.prototype.handleKey = function (e) {
										if ('del' !== e) {
											'undo' === e && this.view.mometoManager.undo();
											var t = this.keyHelper.getKey(e);
											t !== i.none && (this.takeTool(t, !0), this.view.refresh());
										} else this.view.shapeManager.remove();
									}),
									Object.defineProperty(e.prototype, 'currentToolText', {
										get: function () {
											return this.curTool;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.registerTool = function () {
										var e = this;
										(this.tools[i.pan] = function () {
											return new p.PanTool(e.view);
										}),
											(this.tools[i.squareSelect] = function () {
												return new p.SquareSelectTool(e.view);
											}),
											(this.tools[i.wall] = function () {
												return new p.WallTool(e.view);
											}),
											(this.tools[i.frame_scalable] = function () {
												return new p.ScalableFrame(e.view);
											}),
											(this.tools[i.frame_rectangle] = function () {
												return new p.FrameTool(i.frame_rectangle, e.view);
											}),
											(this.tools[i.frame_circle] = function () {
												return new p.FrameTool(i.frame_circle, e.view);
											}),
											(this.tools[i.frame_triangle] = function () {
												return new p.FrameTool(i.frame_triangle, e.view);
											}),
											(this.tools[i.frame_half_circle] = function () {
												return new p.FrameTool(i.frame_half_circle, e.view);
											}),
											(this.tools[i.frame_quarter_circle] = function () {
												return new p.FrameTool(i.frame_quarter_circle, e.view);
											}),
											(this.tools[i.frame_left_quarter_circle] = function () {
												return new p.FrameTool(i.frame_left_quarter_circle, e.view);
											}),
											(this.tools[i.frame_gothic] = function () {
												return new p.FrameTool(i.frame_gothic, e.view);
											}),
											(this.tools[i.frame_onion] = function () {
												return new p.FrameTool(i.frame_onion, e.view);
											}),
											(this.tools[i.frame_octagon] = function () {
												return new p.FrameTool(i.frame_octagon, e.view);
											}),
											(this.tools[i.frame_springline] = function () {
												return new p.FrameTool(i.frame_springline, e.view);
											}),
											(this.tools[i.frame_springline_flanker] = function () {
												return new p.FrameTool(i.frame_springline_flanker, e.view);
											}),
											(this.tools[i.frame_springline_flanker_left] = function () {
												return new p.FrameTool(i.frame_springline_flanker_left, e.view);
											}),
											(this.tools[i.frame_isosceles_triangle] = function () {
												return new p.FrameTool(i.frame_isosceles_triangle, e.view);
											}),
											(this.tools[i.frame_isosceles_trapezoid] = function () {
												return new p.FrameTool(i.frame_isosceles_trapezoid, e.view);
											}),
											(this.tools[i.frame_hexagon] = function () {
												return new p.FrameTool(i.frame_hexagon, e.view);
											}),
											(this.tools[i.frame_hexagon2] = function () {
												return new p.FrameTool(i.frame_hexagon2, e.view);
											}),
											(this.tools[i.frame_hexagon3] = function () {
												return new p.FrameTool(i.frame_hexagon3, e.view);
											}),
											(this.tools[i.frame_rounded_rectangle] = function () {
												return new p.FrameTool(i.frame_rounded_rectangle, e.view);
											}),
											(this.tools[i.frame_parallelogram] = function () {
												return new p.FrameTool(i.frame_parallelogram, e.view);
											}),
											(this.tools[i.frame_diamond] = function () {
												return new p.FrameTool(i.frame_diamond, e.view);
											}),
											(this.tools[i.frame_trapezoid] = function () {
												return new p.FrameTool(i.frame_trapezoid, e.view);
											}),
											(this.tools[i.frame_trapezoid_right] = function () {
												return new p.FrameTool(i.frame_trapezoid_right, e.view);
											}),
											(this.tools[i.frame_trapezoid_down] = function () {
												return new p.FrameTool(i.frame_trapezoid_down, e.view);
											}),
											(this.tools[i.frame_trapezoid_left] = function () {
												return new p.FrameTool(i.frame_trapezoid_left, e.view);
											}),
											(this.tools[i.frame_peak_pentagon] = function () {
												return new p.FrameTool(i.frame_peak_pentagon, e.view);
											}),
											(this.tools[i.frame_angled_pentagon] = function () {
												return new p.FrameTool(i.frame_angled_pentagon, e.view);
											}),
											(this.tools[i.frame_angled_pentagon_right] = function () {
												return new p.FrameTool(i.frame_angled_pentagon_right, e.view);
											}),
											(this.tools[i.frame_angled_pentagon_down] = function () {
												return new p.FrameTool(i.frame_angled_pentagon_down, e.view);
											}),
											(this.tools[i.frame_angled_pentagon_left] = function () {
												return new p.FrameTool(i.frame_angled_pentagon_left, e.view);
											}),
											(this.tools[i.frame_hollow_side] = function () {
												return new p.FrameTool(i.frame_hollow_side, e.view);
											}),
											(this.tools[i.frame_hollow_side_down] = function () {
												return new p.FrameTool(i.frame_hollow_side_down, e.view);
											}),
											(this.tools[i.frame_hollow_side_left] = function () {
												return new p.FrameTool(i.frame_hollow_side_left, e.view);
											}),
											(this.tools[i.frame_hollow_side_up] = function () {
												return new p.FrameTool(i.frame_hollow_side_up, e.view);
											}),
											(this.tools[i.frame_hollow] = function () {
												return new p.FrameTool(i.frame_hollow, e.view);
											}),
											(this.tools[i.frame_hollow2] = function () {
												return new p.FrameTool(i.frame_hollow2, e.view);
											}),
											(this.tools[i.frame_hollow_left] = function () {
												return new p.FrameTool(i.frame_hollow_left, e.view);
											}),
											(this.tools[i.frame_hollow_down] = function () {
												return new p.FrameTool(i.frame_hollow_down, e.view);
											}),
											(this.tools[i.frame_hollow_right] = function () {
												return new p.FrameTool(i.frame_hollow_right, e.view);
											}),
											(this.tools[i.frame_convex] = function () {
												return new p.FrameTool(i.frame_convex, e.view);
											}),
											(this.tools[i.frame_convex_left] = function () {
												return new p.FrameTool(i.frame_convex_left, e.view);
											}),
											(this.tools[i.frame_convex_down] = function () {
												return new p.FrameTool(i.frame_convex_down, e.view);
											}),
											(this.tools[i.frame_convex_right] = function () {
												return new p.FrameTool(i.frame_convex_right, e.view);
											}),
											(this.tools[i.frame_quarter_arch] = function () {
												return new p.FrameTool(i.frame_quarter_arch, e.view);
											}),
											(this.tools[i.frame_extended_partial_arch] = function () {
												return new p.FrameTool(i.frame_extended_partial_arch, e.view);
											}),
											(this.tools[i.frame_quatrefoil] = function () {
												return new p.FrameTool(i.frame_quatrefoil, e.view);
											}),
											(this.tools[i.frame_polygon] = function () {
												return new p.CustomPolygonTool(e.view);
											}),
											(this.tools[i.frame_three_dimensional_arc] = function () {
												return new p.FrameTool(i.frame_three_dimensional_arc, e.view);
											}),
											(this.tools[i.frame_ear] = function () {
												return new p.FrameTool(i.frame_ear, e.view);
											}),
											(this.tools[i.frame_ear_left] = function () {
												return new p.FrameTool(i.frame_ear_left, e.view);
											}),
											(this.tools[i.frame_ear_up] = function () {
												return new p.FrameTool(i.frame_ear_up, e.view);
											}),
											(this.tools[i.frame_ear_down] = function () {
												return new p.FrameTool(i.frame_ear_down, e.view);
											}),
											(this.tools[i.frame_pointed_ear] = function () {
												return new p.FrameTool(i.frame_pointed_ear, e.view);
											}),
											(this.tools[i.frame_pointed_ear_left] = function () {
												return new p.FrameTool(i.frame_pointed_ear_left, e.view);
											}),
											(this.tools[i.frame_pointed_ear_up] = function () {
												return new p.FrameTool(i.frame_pointed_ear_up, e.view);
											}),
											(this.tools[i.frame_pointed_ear_down] = function () {
												return new p.FrameTool(i.frame_pointed_ear_down, e.view);
											}),
											(this.tools[i.frame_single_track] = function () {
												return new p.FrameTool(i.frame_single_track, e.view);
											}),
											(this.tools[i.frame_single_track_left] = function () {
												return new p.FrameTool(i.frame_single_track_left, e.view);
											}),
											(this.tools[i.frame_single_track_down] = function () {
												return new p.FrameTool(i.frame_single_track_down, e.view);
											}),
											(this.tools[i.frame_single_track_up] = function () {
												return new p.FrameTool(i.frame_single_track_up, e.view);
											}),
											(this.tools[i.frame_single_track_left_right] = function () {
												return new p.FrameTool(i.frame_single_track_left_right, e.view);
											}),
											(this.tools[i.frame_single_track_left_down] = function () {
												return new p.FrameTool(i.frame_single_track_left_down, e.view);
											}),
											(this.tools[i.frame_single_track_right_down] = function () {
												return new p.FrameTool(i.frame_single_track_right_down, e.view);
											}),
											(this.tools[i.frame_single_track_left_right_down] = function () {
												return new p.FrameTool(i.frame_single_track_left_right_down, e.view);
											}),
											(this.tools[i.frame_double_ears] = function () {
												return new p.FrameTool(i.frame_double_ears, e.view);
											}),
											(this.tools[i.frame_double_ears_down] = function () {
												return new p.FrameTool(i.frame_double_ears_down, e.view);
											}),
											(this.tools[i.frame_double_ears_left] = function () {
												return new p.FrameTool(i.frame_double_ears_left, e.view);
											}),
											(this.tools[i.frame_double_ears_right] = function () {
												return new p.FrameTool(i.frame_double_ears_right, e.view);
											}),
											(this.tools[i.frame_wave] = function () {
												return new p.FrameTool(i.frame_wave, e.view);
											}),
											(this.tools[i.frame_mosque] = function () {
												return new p.FrameTool(i.frame_mosque, e.view);
											}),
											(this.tools[i.frame_half_kfc] = function () {
												return new p.FrameTool(i.frame_half_kfc, e.view);
											}),
											(this.tools[i.frame_half_kfc2] = function () {
												return new p.FrameTool(i.frame_half_kfc2, e.view);
											}),
											(this.tools[i.frame_kfc] = function () {
												return new p.FrameTool(i.frame_kfc, e.view);
											}),
											(this.tools[i.frame_kfc2] = function () {
												return new p.FrameTool(i.frame_kfc2, e.view);
											}),
											(this.tools[i.frame_kfc3] = function () {
												return new p.FrameTool(i.frame_kfc3, e.view);
											}),
											(this.tools[i.frame_kfc4] = function () {
												return new p.FrameTool(i.frame_kfc4, e.view);
											}),
											(this.tools[i.frame_ear2] = function () {
												return new p.FrameTool(i.frame_ear2, e.view);
											}),
											(this.tools[i.frame_ear2_vertical] = function () {
												return new p.FrameTool(i.frame_ear2_vertical, e.view);
											}),
											(this.tools[i.frame_ear3] = function () {
												return new p.FrameTool(i.frame_ear3, e.view);
											}),
											(this.tools[i.decoration_bar_semi_arc] = function () {
												return new p.DecorationBarTool(i.decoration_bar_semi_arc, e.view);
											}),
											(this.tools[i.decoration_bar_semi_arc_pro] = function () {
												return new p.DecorationBarTool(i.decoration_bar_semi_arc_pro, e.view);
											}),
											(this.tools[i.decoration_bar_semi_arc_pro2] = function () {
												return new p.DecorationBarTool(i.decoration_bar_semi_arc_pro2, e.view);
											}),
											(this.tools[i.decoration_bar_semi_arc_pro3] = function () {
												return new p.DecorationBarTool(i.decoration_bar_semi_arc_pro3, e.view);
											}),
											(this.tools[i.decoration_bar_chinese] = function () {
												return new p.DecorationBarTool(i.decoration_bar_chinese, e.view);
											}),
											(this.tools[i.decoration_bar_chinese2] = function () {
												return new p.DecorationBarTool(i.decoration_bar_chinese2, e.view);
											}),
											(this.tools[i.decoration_bar_chinese3] = function () {
												return new p.DecorationBarTool(i.decoration_bar_chinese3, e.view);
											}),
											(this.tools[i.decoration_bar_chinese4] = function () {
												return new p.DecorationBarTool(i.decoration_bar_chinese4, e.view);
											}),
											(this.tools[i.decoration_bar_prairie] = function () {
												return new p.DecorationBarTool(i.decoration_bar_prairie, e.view);
											}),
											(this.tools[i.decoration_bar_colonial] = function () {
												return new p.DecorationBarTool(i.decoration_bar_colonial, e.view);
											}),
											(this.tools[i.decoration_bar_diamond] = function () {
												return new p.DecorationBarTool(i.decoration_bar_diamond, e.view);
											}),
											(this.tools[i.mullion_cross_line] = function () {
												return new p.MullionCrossLine(e.view);
											}),
											(this.tools[i.mullion_cross_line_equal_two] = function () {
												return new p.MullionCrossLineEqual(e.view, 2);
											}),
											(this.tools[i.mullion_cross_line_equal_three] = function () {
												return new p.MullionCrossLineEqual(e.view, 3);
											}),
											(this.tools[i.mullion_cross_line_equal_four] = function () {
												return new p.MullionCrossLineEqual(e.view, 4);
											}),
											(this.tools[i.mullion_horizontal] = function () {
												return new p.LineTool(e.view, a.default.vector(0, 1));
											}),
											(this.tools[i.mullion_vertical] = function () {
												return new p.LineTool(e.view, a.default.vector(-1, 0));
											}),
											(this.tools[i.mullion_diagnoal] = function () {
												return new p.LineTool(e.view, a.default.vector(-1, -1));
											}),
											(this.tools[i.mullion_counterdiagnoal] = function () {
												return new p.LineTool(e.view, a.default.vector(-1, 1));
											}),
											(this.tools[i.mullion_half_wheel] = function () {
												return new p.SemiArcTool(i.mullion_half_wheel, e.view);
											}),
											(this.tools[i.mullion_semi_arc] = function () {
												return new p.SemiArcTool(i.mullion_semi_arc, e.view);
											}),
											(this.tools[i.mullion_semi_arc_pro] = function () {
												return new p.SemiArcTool(i.mullion_semi_arc_pro, e.view);
											}),
											(this.tools[i.mullion_semi_arc_pro2] = function () {
												return new p.SemiArcTool(i.mullion_semi_arc_pro2, e.view);
											}),
											(this.tools[i.mullion_semi_segment_pro] = function () {
												return new p.SemiArcTool(i.mullion_semi_segment_pro, e.view);
											}),
											(this.tools[i.mullion_spin] = function () {
												return new p.SpecialMulTool(i.mullion_spin, e.view);
											}),
											(this.tools[i.mullion_frametify_like] = function () {
												return new p.SpecialMulTool(i.mullion_frametify_like, e.view);
											}),
											(this.tools[i.mullion_inner_eq_split] = function () {
												return new p.SpecialMulTool(i.mullion_inner_eq_split, e.view, {
													count: 1,
												});
											}),
											(this.tools[i.mullion_inner_121_split] = function () {
												return new p.SpecialMulTool(i.mullion_inner_eq_split, e.view, {
													ratio: [1, 2, 1],
													count: 2,
												});
											}),
											(this.tools[i.mullion_compound_square] = function () {
												return new p.CompoundLineTool(i.mullion_compound_square, e.view);
											}),
											(this.tools[i.mullion_compound_diamond] = function () {
												return new p.CompoundLineTool(i.mullion_compound_diamond, e.view);
											}),
											(this.tools[i.mullion_compound_circle] = function () {
												return new p.CompoundLineTool(i.mullion_compound_circle, e.view);
											}),
											(this.tools[i.mullion_compound_hexagon] = function () {
												return new p.CompoundLineTool(i.mullion_compound_hexagon, e.view);
											}),
											(this.tools[i.mullion_compound_x_square] = function () {
												return new p.CompoundLineTool(i.mullion_compound_x_square, e.view);
											}),
											(this.tools[i.mullion_compound_rectangle_single] = function () {
												return new p.CompoundLineTool(i.mullion_compound_rectangle_single, e.view);
											}),
											(this.tools[i.mullion_compound_rectangle_double] = function () {
												return new p.CompoundLineTool(i.mullion_compound_rectangle_double, e.view);
											}),
											(this.tools[i.mullion_compound_long_octagon] = function () {
												return new p.CompoundLineTool(i.mullion_compound_long_octagon, e.view);
											}),
											(this.tools[i.mullion_compound_double_octagon] = function () {
												return new p.CompoundLineTool(i.mullion_compound_double_octagon, e.view);
											}),
											(this.tools[i.mullion_wave] = function () {
												return new p.SimpleLineTool(i.mullion_wave, e.view);
											}),
											(this.tools[i.mullion_inner_arc] = function () {
												return new p.SimpleLineTool(i.mullion_inner_arc, e.view);
											}),
											(this.tools[i.mullion_half_hexagon] = function () {
												return new p.SimpleLineTool(i.mullion_half_hexagon, e.view);
											}),
											(this.tools[i.editSplitter] = function () {
												return new p.EditSplitterTool(e.view);
											}),
											(this.tools[i.editDragRobot] = function () {
												return new p.EditDragRobotTool(e.view);
											}),
											(this.tools[i.editWallDragRobot] = function () {
												return new p.EditWallDragRobotTool(e.view);
											}),
											(this.tools[i.editTopViewDragRobot] = function () {
												return new p.EditTopViewDragRobotTool(e.view);
											}),
											(this.tools[i.editEdgeRobot] = function () {
												return new p.EditEdgeRobotTool(e.view);
											}),
											(this.tools[i.editWallEdgeRobot] = function () {
												return new p.EditWallEdgeRobotTool(e.view);
											}),
											(this.tools[i.editMullionRobot] = function () {
												return new p.EditMullionRobotTool(e.view);
											}),
											(this.tools[i.sash] = function () {
												return new p.SashTool(i.sash, e.view);
											}),
											(this.tools[i.guardSash] = function () {
												return new p.SashTool(i.guardSash, e.view);
											}),
											(this.tools[i.commercialSash] = function () {
												return new p.SashTool(
													i.doubleSash,
													e.view,
													u.HardwareShape.CommercialHandle2,
													u.HardwareShape.EndpointHinge,
												);
											}),
											(this.tools[i.sashScreenIntegrated] = function () {
												return new p.SashScreenIntegratedTool(i.sashScreenIntegrated, e.view);
											}),
											(this.tools[i.innerSashAndScreen] = function () {
												return new p.InnerSashAndScreenTool(i.innerSashAndScreen, e.view);
											}),
											(this.tools[i.downWithSlideSash] = function () {
												return new p.DownWithSlideSashTool(i.downWithSlideSash, e.view);
											}),
											(this.tools[i.kfcSash] = function () {
												return new p.KfcSashTool(i.kfcSash, e.view);
											}),
											(this.tools[i.doubleKfcSash] = function () {
												return new p.DoubleKfcSashTool(i.doubleKfcSash, e.view);
											}),
											(this.tools[i.doubleSash] = function () {
												return new p.DoubleSashTool(i.doubleSash, e.view);
											}),
											(this.tools[i.doubleCommercialSash] = function () {
												return new p.DoubleSashTool(
													i.doubleSash,
													e.view,
													u.HardwareShape.CommercialHandle2,
													u.HardwareShape.EndpointHinge,
												);
											}),
											(this.tools[i.screen] = function () {
												return new p.SashTool(i.screen, e.view);
											}),
											(this.tools[i.doubleScreen] = function () {
												return new p.DoubleSashTool(i.doubleScreen, e.view, void 0);
											}),
											(this.tools[i.shadePushSash] = function () {
												return new p.ShadePushSashTool(i.shadePushSash, e.view);
											}),
											(this.tools[i.doubleShadePushSash] = function () {
												return new p.ShadePushSashTool(i.doubleShadePushSash, e.view);
											}),
											(this.tools[i.foldDouble] = function () {
												return new p.FoldDoubleTool(i.foldDouble, e.view);
											}),
											(this.tools[i.antiTheft] = function () {
												return new p.ShutterTool(i.antiTheft, e.view);
											}),
											(this.tools[i.innerSash] = function () {
												return new p.InnerSashTool(e.view);
											}),
											(this.tools[i.editDim] = function () {
												return new p.EditDimTool(e.view);
											}),
											(this.tools[i.editExtraDim] = function () {
												return new p.EditExtraDimTool(e.view);
											}),
											(this.tools[i.editDimension] = function () {
												return new p.EditDimensionTool(e.view);
											}),
											(this.tools[i.editLabel] = function () {
												return new p.EditLabelTool(e.view);
											}),
											(this.tools[i.editSash] = function () {
												return new p.EditSashTool(e.view);
											}),
											(this.tools[i.editHinge] = function () {
												return new p.EditHingeTool(e.view);
											}),
											(this.tools[i.editHandle] = function () {
												return new p.EditHandleTool(e.view);
											}),
											(this.tools[i.editCommercialHandle] = function () {
												return new p.EditCommercialHandleTool(e.view);
											}),
											(this.tools[i.editCrossHandle] = function () {
												return new p.EditCrossHandleTool(e.view);
											}),
											(this.tools[i.editHardwareOnFrame] = function () {
												return new p.EditHardwareOnFrameTool(void 0, e.view);
											}),
											(this.tools[i.editHardwareOnMullion] = function () {
												return new p.EditHardwareOnMullionTool(void 0, e.view);
											}),
											(this.tools[i.foldSash] = function () {
												return new p.FoldTool(i.foldSash, e.view);
											}),
											(this.tools[i.foldScreen] = function () {
												return new p.FoldTool(i.foldScreen, e.view);
											}),
											(this.tools[i.foldShade] = function () {
												return new p.FoldTool(i.foldShade, e.view);
											}),
											(this.tools[i.editInnerSplitter] = function () {
												return new p.EditInnerSplitter(e.view);
											}),
											(this.tools[i.slide] = function () {
												return new p.SlideTool(i.slide, e.view);
											}),
											(this.tools[i.shadeSlide] = function () {
												return new p.SlideTool(i.shadeSlide, e.view);
											}),
											(this.tools[i.connerJoiner] = function () {
												return new p.CornerJoinerTool(
													i.connerJoiner,
													e.view,
													u.ShapeType.CornerJoiner,
												);
											}),
											(this.tools[i.wallCornerJoiner] = function () {
												return new p.CornerJoinerTool(
													i.wallCornerJoiner,
													e.view,
													u.ShapeType.WallCornerJoiner,
												);
											}),
											(this.tools[i.panoramicCornerJoiner] = function () {
												return new p.CornerJoinerTool(
													i.panoramicCornerJoiner,
													e.view,
													u.ShapeType.PanoramicCornerJoiner,
												);
											}),
											(this.tools[i.editCornerRobot] = function () {
												return new p.EditCornerRobot(e.view);
											}),
											(this.tools[i.editCornerJoiner] = function () {
												return new p.EditCornerJoiner(e.view);
											}),
											(this.tools[i.connector] = function () {
												return new p.ConnectorTool(i.connector, e.view);
											}),
											(this.tools[i.editConnector] = function () {
												return new p.EditConnector(e.view);
											}),
											(this.tools[i.editConnectorRobot] = function () {
												return new p.EditConnectorRobot(e.view);
											}),
											(this.tools[i.extraManImage] = function () {
												return new p.ExtraPersonImageTool(i.extraManImage, e.view);
											}),
											(this.tools[i.extraWomenImage] = function () {
												return new p.ExtraPersonImageTool(i.extraWomenImage, e.view);
											}),
											(this.tools[i.extraDimArbitrary] = function () {
												return new p.ExtraDimArbitraryTool(i.extraDimArbitrary, e.view);
											}),
											(this.tools[i.extraDimHorizontal] = function () {
												return new p.ExtraDimHorizontalTool(i.extraDimHorizontal, e.view);
											}),
											(this.tools[i.extraDimVertical] = function () {
												return new p.ExtraDimVerticalTool(i.extraDimVertical, e.view);
											}),
											(this.tools[i.extraDimRadius] = function () {
												return new p.ExtraDimRadiusTool(i.extraDimRadius, e.view);
											}),
											(this.tools[i.extraDimAngle] = function () {
												return new p.ExtraDimAngleTool(i.extraDimAngle, e.view);
											}),
											(this.tools[i.note] = function () {
												return new p.NoteTool(e.view);
											}),
											(this.tools[i.multilineNote] = function () {
												return new p.NoteTool(e.view, !0);
											}),
											(this.tools[i.editNote] = function () {
												return new p.EditNoteTool(e.view);
											}),
											(this.tools[i.door] = function () {
												return new p.FrameTool(i.door, e.view);
											}),
											(this.tools[i.editSkewText] = function () {
												return new p.EditSkewTextTool(e.view);
											}),
											(this.tools[i.editCornerJoinerProfileSizeTextTool] = function () {
												return new p.EditCornerJoinerProfileSizeTextTool(e.view);
											}),
											(this.tools[i.editThreedArcText] = function () {
												return new p.EditThreedArcTextTool(e.view);
											}),
											(this.tools[i.fillerGlass] = function () {
												return new p.FillerGlassTool(i.fillerGlass, e.view);
											}),
											(this.tools[i.fillerPanel] = function () {
												return new p.FillerPanelTool(i.fillerPanel, e.view);
											}),
											(this.tools[i.fillerEmpty] = function () {
												return new p.FillerEmptyTool(i.fillerEmpty, e.view);
											}),
											(this.tools[i.fillerShade] = function () {
												return new p.FillerShadeTool(i.fillerShade, e.view);
											}),
											(this.tools[i.editExtraPersonImage] = function () {
												return new p.EditExtraPersonImageTool(e.view);
											}),
											(this.tools[i.fillerScreen] = function () {
												return new p.FillerScreenTool(i.fillerScreen, e.view);
											}),
											(this.tools[i.glassHole] = function () {
												return new p.GlassHoleTool(e.view);
											}),
											(this.tools[i.editGlassHole] = function () {
												return new p.EditGlassHoleTool(e.view);
											}),
											(this.tools[i.editGlassHoleDim] = function () {
												return new p.EditGlassHoleDimTool(e.view);
											}),
											(this.tools[i.profileStruct] = function () {
												return new p.ProfileStructTool(e.view);
											});
									}),
									(e.prototype.switchTool = function (e) {
										(this.tool = this.tools[e]()), this.tool.initialTool(), (this.curTool = e);
									}),
									(e.prototype.takeTool = function (e, t) {
										void 0 === t && (t = !1),
											this.view.keys.ca(e),
											this.tool.cleanup(),
											(l.DrawParams.Ins.readonly && e !== i.pan) ||
												(this.switchTool(e), t || this.keyHelper.syncCounter(e));
									}),
									(e.prototype.releaseTool = function () {
										this.takeTool(this.defaultTool);
									}),
									e
								);
							})();
						(t.ToolManager = f),
							(function (e) {
								(e.none = 'none'),
									(e.pan = 'pan'),
									(e.squareSelect = 'squareSelect'),
									(e.wall = 'wall'),
									(e.frame_scalable = 'frame_scalable'),
									(e.frame_rectangle = 'frame_rectangle'),
									(e.frame_circle = 'frame_circle'),
									(e.frame_polygon = 'frame_polygon'),
									(e.frame_triangle = 'frame_triangle'),
									(e.frame_half_circle = 'frame_half_circle'),
									(e.frame_quarter_circle = 'frame_quarter_circle'),
									(e.frame_left_quarter_circle = 'frame_left_quarter_circle'),
									(e.frame_gothic = 'frame_gothic'),
									(e.frame_octagon = 'frame_octagon'),
									(e.frame_springline = 'frame_springline'),
									(e.frame_springline_flanker = 'frame_springline_flanker'),
									(e.frame_springline_flanker_left = 'frame_springline_flanker_left'),
									(e.frame_isosceles_triangle = 'frame_isosceles_triangle'),
									(e.frame_hexagon = 'frame_hexagon'),
									(e.frame_hexagon2 = 'frame_hexagon2'),
									(e.frame_hexagon3 = 'frame_hexagon3'),
									(e.frame_rounded_rectangle = 'frame_rounded_rectangle'),
									(e.frame_parallelogram = 'frame_parallelogram'),
									(e.frame_diamond = 'frame_diamond'),
									(e.frame_trapezoid = 'frame_trapezoid'),
									(e.frame_trapezoid_right = 'frame_trapezoid_right'),
									(e.frame_trapezoid_down = 'frame_trapezoid_down'),
									(e.frame_trapezoid_left = 'frame_trapezoid_left'),
									(e.frame_peak_pentagon = 'frame_peak_pentagon'),
									(e.frame_angled_pentagon = 'frame_angled_pentagon'),
									(e.frame_angled_pentagon_right = 'frame_angled_pentagon_right'),
									(e.frame_angled_pentagon_down = 'frame_angled_pentagon_down'),
									(e.frame_angled_pentagon_left = 'frame_angled_pentagon_left'),
									(e.frame_hollow_side = 'frame_hollow_side'),
									(e.frame_hollow_side_down = 'frame_hollow_side_down'),
									(e.frame_hollow_side_left = 'frame_hollow_side_left'),
									(e.frame_hollow_side_up = 'frame_hollow_side_up'),
									(e.frame_hollow = 'frame_hollow'),
									(e.frame_hollow2 = 'frame_hollow2'),
									(e.frame_hollow_left = 'frame_hollow_left'),
									(e.frame_hollow_down = 'frame_hollow_down'),
									(e.frame_hollow_right = 'frame_hollow_right'),
									(e.frame_convex = 'frame_convex'),
									(e.frame_convex_left = 'frame_convex_left'),
									(e.frame_convex_down = 'frame_convex_down'),
									(e.frame_convex_right = 'frame_convex_right'),
									(e.frame_isosceles_trapezoid = 'frame_isosceles_trapezoid'),
									(e.frame_quarter_arch = 'frame_quarter_arch'),
									(e.frame_extended_partial_arch = 'frame_extended_partial_arch'),
									(e.frame_quatrefoil = 'frame_quatrefoil'),
									(e.frame_three_dimensional_arc = 'frame_three_dimensional_arc'),
									(e.frame_ear = 'frame_ear'),
									(e.frame_ear_left = 'frame_ear_left'),
									(e.frame_ear_up = 'frame_ear_up'),
									(e.frame_ear_down = 'frame_ear_down'),
									(e.frame_ear2 = 'frame_ear2'),
									(e.frame_ear2_vertical = 'frame_ear2_vertical'),
									(e.frame_ear3 = 'frame_ear3'),
									(e.frame_pointed_ear = 'frame_pointed_ear'),
									(e.frame_pointed_ear_left = 'frame_pointed_ear_left'),
									(e.frame_pointed_ear_up = 'frame_pointed_ear_up'),
									(e.frame_pointed_ear_down = 'frame_pointed_ear_down'),
									(e.frame_double_ears = 'frame_double_ears'),
									(e.frame_double_ears_down = 'frame_double_ears_down'),
									(e.frame_double_ears_left = 'frame_double_ears_left'),
									(e.frame_double_ears_right = 'frame_double_ears_right'),
									(e.frame_single_track = 'frame_single_track'),
									(e.frame_single_track_left = 'frame_single_track_left'),
									(e.frame_single_track_up = 'frame_single_track_up'),
									(e.frame_single_track_down = 'frame_single_track_down'),
									(e.frame_single_track_left_right = 'frame_single_track_left_right'),
									(e.frame_single_track_left_down = 'frame_single_track_left_down'),
									(e.frame_single_track_right_down = 'frame_single_track_right_down'),
									(e.frame_single_track_left_right_down = 'frame_single_track_left_right_down'),
									(e.frame_half_kfc = 'frame_half_kfc'),
									(e.frame_half_kfc2 = 'frame_half_kfc2'),
									(e.frame_kfc = 'frame_kfc'),
									(e.frame_kfc2 = 'frame_kfc2'),
									(e.frame_kfc3 = 'frame_kfc3'),
									(e.frame_kfc4 = 'frame_kfc4'),
									(e.frame_wave = 'frame_wave'),
									(e.frame_onion = 'frame_onion'),
									(e.frame_mosque = 'frame_mosque'),
									(e.mullion_cross_line = 'mullion_cross_line'),
									(e.mullion_cross_line_equal_two = 'mullion_cross_line_equal_two'),
									(e.mullion_cross_line_equal_three = 'mullion_cross_line_equal_three'),
									(e.mullion_cross_line_equal_four = 'mullion_cross_line_equal_four'),
									(e.mullion_horizontal = 'mullion_horizontal'),
									(e.mullion_vertical = 'mullion_vertical'),
									(e.mullion_diagnoal = 'mullion_diagnoal'),
									(e.mullion_counterdiagnoal = 'mullion_counterdiagnoal'),
									(e.mullion_spin = 'mullion_spin'),
									(e.mullion_compound_square = 'mullion_compound_square'),
									(e.mullion_compound_diamond = 'mullion_compound_diamond'),
									(e.mullion_compound_circle = 'mullion_compound_circle'),
									(e.mullion_compound_hexagon = 'mullion_compound_hexagon'),
									(e.mullion_compound_x_square = 'mullion_compound_x_square'),
									(e.mullion_inner_arc = 'mullion_inner_arc'),
									(e.mullion_half_hexagon = 'mullion_half_hexagon'),
									(e.mullion_compound_rectangle_single = 'mullion_compound_rectangle_single'),
									(e.mullion_compound_rectangle_double = 'mullion_compound_rectangle_double'),
									(e.mullion_compound_long_octagon = 'mullion_compound_long_octagon'),
									(e.mullion_compound_double_octagon = 'mullion_compound_double_octagon'),
									(e.mullion_wave = 'mullion_wave'),
									(e.mullion_half_wheel = 'mullion_half_wheel'),
									(e.mullion_semi_arc = 'mullion_semi_arc'),
									(e.mullion_semi_arc_pro = 'mullion_semi_arc_pro'),
									(e.mullion_semi_arc_pro2 = 'mullion_semi_arc_pro2'),
									(e.mullion_semi_segment_pro = 'mullion_semi_segment_pro'),
									(e.mullion_frametify_like = 'mullion_frametify_like'),
									(e.mullion_inner_eq_split = 'mullion_inner_eq_split'),
									(e.mullion_inner_121_split = 'mullion_inner_121_split'),
									(e.decoration_bar_semi_arc = 'decoration_bar_semi_arc'),
									(e.decoration_bar_semi_arc_pro = 'decoration_bar_semi_arc_pro'),
									(e.decoration_bar_semi_arc_pro2 = 'decoration_bar_semi_arc_pro2'),
									(e.decoration_bar_semi_arc_pro3 = 'decoration_bar_semi_arc_pro3'),
									(e.decoration_bar_chinese = 'decoration_bar_chinese'),
									(e.decoration_bar_chinese2 = 'decoration_bar_chinese2'),
									(e.decoration_bar_chinese3 = 'decoration_bar_chinese3'),
									(e.decoration_bar_chinese4 = 'decoration_bar_chinese4'),
									(e.decoration_bar_prairie = 'decoration_bar_prairie'),
									(e.decoration_bar_colonial = 'decoration_bar_colonial'),
									(e.decoration_bar_diamond = 'decoration_bar_diamond'),
									(e.editSplitter = 'editSplitter'),
									(e.editExtraPersonImage = 'editExtraPersonImage'),
									(e.editInnerSplitter = 'editInnerSplitter'),
									(e.editDragRobot = 'editDragRobot'),
									(e.editWallDragRobot = 'editWallDragRobot'),
									(e.editTopViewDragRobot = 'editTopViewDragRobot'),
									(e.editEdgeRobot = 'editEdgeRobot'),
									(e.editWallEdgeRobot = 'editWallEdgeRobot'),
									(e.editMullionRobot = 'editMullionRobot'),
									(e.editDoubleSashSpliterRobot = 'editDoubleSashSpliterRobot'),
									(e.sash = 'sash'),
									(e.guardSash = 'guardSash'),
									(e.commercialSash = 'commercialSash'),
									(e.kfcSash = 'kfcSash'),
									(e.innerSash = 'innerSash'),
									(e.doubleKfcSash = 'doubleKfcSash'),
									(e.doubleSash = 'doubleSash'),
									(e.doubleCommercialSash = 'doubleCommercialSash'),
									(e.screen = 'screen'),
									(e.doubleScreen = 'doubleScreen'),
									(e.antiTheft = 'antiTheft'),
									(e.sashScreenIntegrated = 'sashScreenIntegrated'),
									(e.innerSashAndScreen = 'innerSashAndScreen'),
									(e.downWithSlideSash = 'downWithSlideSash'),
									(e.shadePushSash = 'shadePushSash'),
									(e.doubleShadePushSash = 'doubleShadePushSash'),
									(e.foldDouble = 'foldDouble'),
									(e.editDim = 'editDim'),
									(e.editDimension = 'editDimension'),
									(e.extraManImage = 'extraManImage'),
									(e.extraWomenImage = 'extraWomenImage'),
									(e.editExtraDim = 'editExtraDim'),
									(e.extraDimArbitrary = 'extraDimArbitrary'),
									(e.extraDimHorizontal = 'extraDimHorizontal'),
									(e.extraDimVertical = 'extraDimVertical'),
									(e.extraDimRadius = 'extraDimRadius'),
									(e.extraDimAngle = 'extraDimAngle'),
									(e.editNote = 'editNote'),
									(e.editGlassHole = 'editGlassHole'),
									(e.editLabel = 'editSerial'),
									(e.editSash = 'editSash'),
									(e.editHinge = 'editHinge'),
									(e.editHandle = 'editHandle'),
									(e.editHardware = 'editHardware'),
									(e.editHardwareOnFrame = 'editHardwareOnFrame'),
									(e.editHardwareOnMullion = 'editHardwareOnMullion'),
									(e.editCommercialHandle = 'editCommercialHandle'),
									(e.editCrossHandle = 'editCrossHandle'),
									(e.foldSash = 'foldSash'),
									(e.foldScreen = 'foldScreen'),
									(e.foldShade = 'foldShade'),
									(e.slide = 'slide'),
									(e.shadeSlide = 'shadeSlide'),
									(e.dim = 'dim'),
									(e.editCornerRobot = 'editCornerRobot'),
									(e.connerJoiner = 'connerJoiner'),
									(e.editCornerJoiner = 'editCornerJoiner'),
									(e.wallCornerJoiner = 'wallCornerJoiner'),
									(e.panoramicCornerJoiner = 'panoramicCornerJoiner'),
									(e.note = 'note'),
									(e.multilineNote = 'multilineNote'),
									(e.connector = 'connector'),
									(e.editConnector = 'editConnector'),
									(e.editConnectorRobot = 'editConnectorRobot'),
									(e.door = 'door'),
									(e.editSkewText = 'editSkewText'),
									(e.editCornerJoinerProfileSizeTextTool = 'editCornerJoinerProfileSizeTextTool'),
									(e.editThreedArcText = 'editThreedArcText'),
									(e.fillerGlass = 'fillerGlass'),
									(e.fillerPanel = 'fillerPanel'),
									(e.fillerEmpty = 'fillerEmpty'),
									(e.fillerShade = 'fillerShade'),
									(e.fillerScreen = 'fillerScreen'),
									(e.glassHole = 'glassHole'),
									(e.editGlassHoleDim = 'editGlassHoleDim'),
									(e.profileStruct = 'profileStruct');
							})((i = t.ToolType || (t.ToolType = {})));
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(410), t),
							i(n(411), t),
							i(n(412), t),
							i(n(413), t),
							i(n(414), t),
							i(n(415), t);
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.BaseRobot = void 0);
						var r = n(7),
							i = n(2),
							o = n(13),
							a = (function () {
								function e(e) {
									(this.view = e),
										(this.shapes = []),
										(this.vshapes = []),
										(this.rsize = 1.5 * r.DrawParams.Ins.robotSize);
								}
								return (
									(e.prototype.checkEnable = function () {
										return this.view.dimManager.mode === o.dimModeEnum.normal;
									}),
									(e.prototype.attachTo = function (e) {
										this.checkEnable() && this.attach(e);
									}),
									(e.prototype.attach = function (e) {}),
									(e.prototype.hide = function () {
										this.vshapes.length > 0 &&
											(this.vshapes.forEach(function (e) {
												e.hide(), i.ShapeHelper.restoreShapeMatrix(e);
											}),
											(this.vshapes = []));
									}),
									e
								);
							})();
						t.BaseRobot = a;
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return o;
						});
						var r = n(3),
							i = n(8);
						function o() {
							return function (e) {
								return e.lift(new a(e));
							};
						}
						var a = (function () {
								function e(e) {
									this.connectable = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										var n = this.connectable;
										n._refCount++;
										var r = new s(e, n),
											i = t.subscribe(r);
										return r.closed || (r.connection = n.connect()), i;
									}),
									e
								);
							})(),
							s = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.connectable = n), r;
								}
								return (
									r.a(t, e),
									(t.prototype._unsubscribe = function () {
										var e = this.connectable;
										if (e) {
											this.connectable = null;
											var t = e._refCount;
											if (t <= 0) this.connection = null;
											else if (((e._refCount = t - 1), t > 1)) this.connection = null;
											else {
												var n = this.connection,
													r = e._connection;
												(this.connection = null), !r || (n && r !== n) || r.unsubscribe();
											}
										} else this.connection = null;
									}),
									t
								);
							})(i.a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return c;
						});
						var r = n(3),
							i = n(21),
							o = n(96),
							a = n(19),
							s = n(90),
							l = n(43),
							h = n(98),
							c = (function (e) {
								function t(t, n, r) {
									void 0 === t && (t = Number.POSITIVE_INFINITY),
										void 0 === n && (n = Number.POSITIVE_INFINITY);
									var i = e.call(this) || this;
									return (
										(i.scheduler = r),
										(i._events = []),
										(i._infiniteTimeWindow = !1),
										(i._bufferSize = t < 1 ? 1 : t),
										(i._windowTime = n < 1 ? 1 : n),
										n === Number.POSITIVE_INFINITY
											? ((i._infiniteTimeWindow = !0), (i.next = i.nextInfiniteTimeWindow))
											: (i.next = i.nextTimeWindow),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype.nextInfiniteTimeWindow = function (t) {
										var n = this._events;
										n.push(t),
											n.length > this._bufferSize && n.shift(),
											e.prototype.next.call(this, t);
									}),
									(t.prototype.nextTimeWindow = function (t) {
										this._events.push(new u(this._getNow(), t)),
											this._trimBufferThenGetEvents(),
											e.prototype.next.call(this, t);
									}),
									(t.prototype._subscribe = function (e) {
										var t,
											n = this._infiniteTimeWindow,
											r = n ? this._events : this._trimBufferThenGetEvents(),
											i = this.scheduler,
											o = r.length;
										if (this.closed) throw new l.a();
										if (
											(this.isStopped || this.hasError
												? (t = a.a.EMPTY)
												: (this.observers.push(e), (t = new h.a(this, e))),
											i && e.add((e = new s.a(e, i))),
											n)
										)
											for (var c = 0; c < o && !e.closed; c++) e.next(r[c]);
										else for (c = 0; c < o && !e.closed; c++) e.next(r[c].value);
										return (
											this.hasError ? e.error(this.thrownError) : this.isStopped && e.complete(), t
										);
									}),
									(t.prototype._getNow = function () {
										return (this.scheduler || o.a).now();
									}),
									(t.prototype._trimBufferThenGetEvents = function () {
										for (
											var e = this._getNow(),
												t = this._bufferSize,
												n = this._windowTime,
												r = this._events,
												i = r.length,
												o = 0;
											o < i && !(e - r[o].time < n);

										)
											o++;
										return i > t && (o = Math.max(o, i - t)), o > 0 && r.splice(0, o), r;
									}),
									t
								);
							})(i.a),
							u = (function () {
								return function (e, t) {
									(this.time = e), (this.value = t);
								};
							})();
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return s;
						});
						var r = n(25),
							i = n(32),
							o = n(22),
							a = n(76);
						function s() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							var n = e[e.length - 1];
							switch ((Object(r.a)(n) ? e.pop() : (n = void 0), e.length)) {
								case 0:
									return Object(o.b)(n);
								case 1:
									return n ? Object(i.a)(e, n) : Object(a.a)(e[0]);
								default:
									return Object(i.a)(e, n);
							}
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(12);
						function i(e, t) {
							return t
								? new r.a(function (n) {
										return t.schedule(o, 0, {
											error: e,
											subscriber: n,
										});
								  })
								: new r.a(function (t) {
										return t.error(e);
								  });
						}
						function o(e) {
							var t = e.error;
							e.subscriber.error(t);
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'b', function () {
							return c;
						}),
							n.d(t, 'a', function () {
								return u;
							});
						var r = n(3),
							i = n(25),
							o = n(24),
							a = n(17),
							s = n(15),
							l = n(32),
							h = {};
						function c() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							var n = null,
								r = null;
							return (
								Object(i.a)(e[e.length - 1]) && (r = e.pop()),
								'function' == typeof e[e.length - 1] && (n = e.pop()),
								1 === e.length && Object(o.a)(e[0]) && (e = e[0]),
								Object(l.a)(e, r).lift(new u(n))
							);
						}
						var u = (function () {
								function e(e) {
									this.resultSelector = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new p(e, this.resultSelector));
									}),
									e
								);
							})(),
							p = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (
										(r.resultSelector = n), (r.active = 0), (r.values = []), (r.observables = []), r
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.values.push(h), this.observables.push(e);
									}),
									(t.prototype._complete = function () {
										var e = this.observables,
											t = e.length;
										if (0 === t) this.destination.complete();
										else {
											(this.active = t), (this.toRespond = t);
											for (var n = 0; n < t; n++) {
												var r = e[n];
												this.add(Object(s.a)(this, r, r, n));
											}
										}
									}),
									(t.prototype.notifyComplete = function (e) {
										0 == (this.active -= 1) && this.destination.complete();
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										var o = this.values,
											a = o[n],
											s = this.toRespond ? (a === h ? --this.toRespond : this.toRespond) : 0;
										(o[n] = t),
											0 === s &&
												(this.resultSelector
													? this._tryResultSelector(o)
													: this.destination.next(o.slice()));
									}),
									(t.prototype._tryResultSelector = function (e) {
										var t;
										try {
											t = this.resultSelector.apply(this, e);
										} catch (e) {
											return void this.destination.error(e);
										}
										this.destination.next(t);
									}),
									t
								);
							})(a.a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return o;
						});
						var r = n(45),
							i = n(39);
						function o(e) {
							return void 0 === e && (e = Number.POSITIVE_INFINITY), Object(r.a)(i.a, e);
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return a;
						});
						var r = n(12),
							i = n(30),
							o = n(22);
						function a(e) {
							return new r.a(function (t) {
								var n;
								try {
									n = e();
								} catch (e) {
									return void t.error(e);
								}
								return (n ? Object(i.a)(n) : Object(o.b)()).subscribe(t);
							});
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'b', function () {
							return c;
						}),
							n.d(t, 'a', function () {
								return u;
							});
						var r = n(3),
							i = n(32),
							o = n(24),
							a = n(8),
							s = n(17),
							l = n(15),
							h = n(41);
						function c() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							var n = e[e.length - 1];
							return 'function' == typeof n && e.pop(), Object(i.a)(e, void 0).lift(new u(n));
						}
						var u = (function () {
								function e(e) {
									this.resultSelector = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new p(e, this.resultSelector));
									}),
									e
								);
							})(),
							p = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = Object.create(null));
									var i = e.call(this, t) || this;
									return (
										(i.iterators = []),
										(i.active = 0),
										(i.resultSelector = 'function' == typeof n ? n : null),
										(i.values = r),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t = this.iterators;
										Object(o.a)(e)
											? t.push(new d(e))
											: 'function' == typeof e[h.a]
											? t.push(new f(e[h.a]()))
											: t.push(new g(this.destination, this, e));
									}),
									(t.prototype._complete = function () {
										var e = this.iterators,
											t = e.length;
										if ((this.unsubscribe(), 0 !== t)) {
											this.active = t;
											for (var n = 0; n < t; n++) {
												var r = e[n];
												r.stillUnsubscribed
													? this.destination.add(r.subscribe(r, n))
													: this.active--;
											}
										} else this.destination.complete();
									}),
									(t.prototype.notifyInactive = function () {
										this.active--, 0 === this.active && this.destination.complete();
									}),
									(t.prototype.checkIterators = function () {
										for (
											var e = this.iterators, t = e.length, n = this.destination, r = 0;
											r < t;
											r++
										)
											if ('function' == typeof (a = e[r]).hasValue && !a.hasValue()) return;
										var i = !1,
											o = [];
										for (r = 0; r < t; r++) {
											var a,
												s = (a = e[r]).next();
											if ((a.hasCompleted() && (i = !0), s.done)) return void n.complete();
											o.push(s.value);
										}
										this.resultSelector ? this._tryresultSelector(o) : n.next(o), i && n.complete();
									}),
									(t.prototype._tryresultSelector = function (e) {
										var t;
										try {
											t = this.resultSelector.apply(this, e);
										} catch (e) {
											return void this.destination.error(e);
										}
										this.destination.next(t);
									}),
									t
								);
							})(a.a),
							f = (function () {
								function e(e) {
									(this.iterator = e), (this.nextResult = e.next());
								}
								return (
									(e.prototype.hasValue = function () {
										return !0;
									}),
									(e.prototype.next = function () {
										var e = this.nextResult;
										return (this.nextResult = this.iterator.next()), e;
									}),
									(e.prototype.hasCompleted = function () {
										var e = this.nextResult;
										return e && e.done;
									}),
									e
								);
							})(),
							d = (function () {
								function e(e) {
									(this.array = e), (this.index = 0), (this.length = 0), (this.length = e.length);
								}
								return (
									(e.prototype[h.a] = function () {
										return this;
									}),
									(e.prototype.next = function (e) {
										var t = this.index++,
											n = this.array;
										return t < this.length
											? {
													value: n[t],
													done: !1,
											  }
											: {
													value: null,
													done: !0,
											  };
									}),
									(e.prototype.hasValue = function () {
										return this.array.length > this.index;
									}),
									(e.prototype.hasCompleted = function () {
										return this.array.length === this.index;
									}),
									e
								);
							})(),
							g = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.parent = n),
										(i.observable = r),
										(i.stillUnsubscribed = !0),
										(i.buffer = []),
										(i.isComplete = !1),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype[h.a] = function () {
										return this;
									}),
									(t.prototype.next = function () {
										var e = this.buffer;
										return 0 === e.length && this.isComplete
											? {
													value: null,
													done: !0,
											  }
											: {
													value: e.shift(),
													done: !1,
											  };
									}),
									(t.prototype.hasValue = function () {
										return this.buffer.length > 0;
									}),
									(t.prototype.hasCompleted = function () {
										return 0 === this.buffer.length && this.isComplete;
									}),
									(t.prototype.notifyComplete = function () {
										this.buffer.length > 0
											? ((this.isComplete = !0), this.parent.notifyInactive())
											: this.destination.complete();
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.buffer.push(t), this.parent.checkIterators();
									}),
									(t.prototype.subscribe = function (e, t) {
										return Object(l.a)(this, this.observable, this, t);
									}),
									t
								);
							})(s.a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(8);
						function i(e) {
							for (; e; ) {
								var t = e,
									n = t.closed,
									i = t.destination,
									o = t.isStopped;
								if (n || o) return !1;
								e = i && i instanceof r.a ? i : null;
							}
							return !0;
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(12);
						function i(e) {
							var t = new r.a(function (t) {
								t.next(e), t.complete();
							});
							return (t._isScalar = !0), (t.value = e), t;
						}
					},
					function (e, t, n) {
						'use strict';
						n.r(t),
							n.d(t, 'shapes', function () {
								return u;
							}),
							n.d(t, 'Shape', function () {
								return p;
							});
						var r = n(14),
							i = n(4),
							o = n(10),
							a = n(35),
							s = n(18),
							l = n(38);
						let h;
						function c() {
							return h || ((h = i.Util.createCanvasElement().getContext('2d')), h);
						}
						const u = {};
						class p extends a.a {
							constructor(e) {
								let t;
								for (super(e); (t = i.Util.getRandomColor()), !t || t in u; );
								(this.colorKey = t), (u[t] = this);
							}
							getContext() {
								return (
									i.Util.warn('shape.getContext() method is deprecated. Please do not use it.'),
									this.getLayer().getContext()
								);
							}
							getCanvas() {
								return (
									i.Util.warn('shape.getCanvas() method is deprecated. Please do not use it.'),
									this.getLayer().getCanvas()
								);
							}
							getSceneFunc() {
								return this.attrs.sceneFunc || this._sceneFunc;
							}
							getHitFunc() {
								return this.attrs.hitFunc || this._hitFunc;
							}
							hasShadow() {
								return this._getCache('hasShadow', this._hasShadow);
							}
							_hasShadow() {
								return (
									this.shadowEnabled() &&
									0 !== this.shadowOpacity() &&
									!!(
										this.shadowColor() ||
										this.shadowBlur() ||
										this.shadowOffsetX() ||
										this.shadowOffsetY()
									)
								);
							}
							_getFillPattern() {
								return this._getCache('patternImage', this.__getFillPattern);
							}
							__getFillPattern() {
								if (this.fillPatternImage()) {
									const e = c().createPattern(
										this.fillPatternImage(),
										this.fillPatternRepeat() || 'repeat',
									);
									if (e && e.setTransform) {
										const t = new i.Transform();
										t.translate(this.fillPatternX(), this.fillPatternY()),
											t.rotate(r.a.getAngle(this.fillPatternRotation())),
											t.scale(this.fillPatternScaleX(), this.fillPatternScaleY()),
											t.translate(-1 * this.fillPatternOffsetX(), -1 * this.fillPatternOffsetY());
										const n = t.getMatrix();
										e.setTransform({
											a: n[0],
											b: n[1],
											c: n[2],
											d: n[3],
											e: n[4],
											f: n[5],
										});
									}
									return e;
								}
							}
							_getLinearGradient() {
								return this._getCache('linearGradient', this.__getLinearGradient);
							}
							__getLinearGradient() {
								var e = this.fillLinearGradientColorStops();
								if (e) {
									for (
										var t = c(),
											n = this.fillLinearGradientStartPoint(),
											r = this.fillLinearGradientEndPoint(),
											i = t.createLinearGradient(n.x, n.y, r.x, r.y),
											o = 0;
										o < e.length;
										o += 2
									)
										i.addColorStop(e[o], e[o + 1]);
									return i;
								}
							}
							_getRadialGradient() {
								return this._getCache('radialGradient', this.__getRadialGradient);
							}
							__getRadialGradient() {
								var e = this.fillRadialGradientColorStops();
								if (e) {
									for (
										var t = c(),
											n = this.fillRadialGradientStartPoint(),
											r = this.fillRadialGradientEndPoint(),
											i = t.createRadialGradient(
												n.x,
												n.y,
												this.fillRadialGradientStartRadius(),
												r.x,
												r.y,
												this.fillRadialGradientEndRadius(),
											),
											o = 0;
										o < e.length;
										o += 2
									)
										i.addColorStop(e[o], e[o + 1]);
									return i;
								}
							}
							getShadowRGBA() {
								return this._getCache('shadowRGBA', this._getShadowRGBA);
							}
							_getShadowRGBA() {
								if (this.hasShadow()) {
									var e = i.Util.colorToRGBA(this.shadowColor());
									return (
										'rgba(' +
										e.r +
										',' +
										e.g +
										',' +
										e.b +
										',' +
										e.a * (this.shadowOpacity() || 1) +
										')'
									);
								}
							}
							hasFill() {
								return this._calculate(
									'hasFill',
									[
										'fillEnabled',
										'fill',
										'fillPatternImage',
										'fillLinearGradientColorStops',
										'fillRadialGradientColorStops',
									],
									() =>
										this.fillEnabled() &&
										!!(
											this.fill() ||
											this.fillPatternImage() ||
											this.fillLinearGradientColorStops() ||
											this.fillRadialGradientColorStops()
										),
								);
							}
							hasStroke() {
								return this._calculate(
									'hasStroke',
									['strokeEnabled', 'strokeWidth', 'stroke', 'strokeLinearGradientColorStops'],
									() =>
										this.strokeEnabled() &&
										this.strokeWidth() &&
										!(!this.stroke() && !this.strokeLinearGradientColorStops()),
								);
							}
							hasHitStroke() {
								const e = this.hitStrokeWidth();
								return 'auto' === e ? this.hasStroke() : this.strokeEnabled() && !!e;
							}
							intersects(e) {
								var t = this.getStage().bufferHitCanvas;
								return (
									t.getContext().clear(),
									this.drawHit(t, null, !0),
									t.context.getImageData(Math.round(e.x), Math.round(e.y), 1, 1).data[3] > 0
								);
							}
							destroy() {
								return (
									a.a.prototype.destroy.call(this),
									delete u[this.colorKey],
									delete this.colorKey,
									this
								);
							}
							_useBufferCanvas(e) {
								var t;
								if (!this.getStage()) return !1;
								if (null !== (t = this.attrs.perfectDrawEnabled) && void 0 !== t && !t) return !1;
								const n = e || this.hasFill(),
									r = this.hasStroke(),
									i = 1 !== this.getAbsoluteOpacity();
								if (n && r && i) return !0;
								const o = this.hasShadow(),
									a = this.shadowForStrokeEnabled();
								return !!(n && r && o && a);
							}
							setStrokeHitEnabled(e) {
								i.Util.warn(
									'strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.',
								),
									e ? this.hitStrokeWidth('auto') : this.hitStrokeWidth(0);
							}
							getStrokeHitEnabled() {
								return 0 !== this.hitStrokeWidth();
							}
							getSelfRect() {
								var e = this.size();
								return {
									x: this._centroid ? -e.width / 2 : 0,
									y: this._centroid ? -e.height / 2 : 0,
									width: e.width,
									height: e.height,
								};
							}
							getClientRect(e = {}) {
								const t = e.skipTransform,
									n = e.relativeTo,
									r = this.getSelfRect(),
									i = (!e.skipStroke && this.hasStroke() && this.strokeWidth()) || 0,
									o = r.width + i,
									a = r.height + i,
									s = !e.skipShadow && this.hasShadow(),
									l = s ? this.shadowOffsetX() : 0,
									h = s ? this.shadowOffsetY() : 0,
									c = o + Math.abs(l),
									u = a + Math.abs(h),
									p = (s && this.shadowBlur()) || 0,
									f = c + 2 * p,
									d = u + 2 * p;
								let g = 0;
								Math.round(i / 2) !== i / 2 && (g = 1);
								const y = {
									width: f + g,
									height: d + g,
									x: -Math.round(i / 2 + p) + Math.min(l, 0) + r.x,
									y: -Math.round(i / 2 + p) + Math.min(h, 0) + r.y,
								};
								return t ? y : this._transformedRect(y, n);
							}
							drawScene(e, t) {
								var n,
									r,
									i = this.getLayer(),
									o = e || i.getCanvas(),
									a = o.getContext(),
									s = this._getCanvasCache(),
									l = this.getSceneFunc(),
									h = this.hasShadow(),
									c = o.isCache,
									u = t === this;
								if (!this.isVisible() && !u) return this;
								if (s) {
									a.save();
									var p = this.getAbsoluteTransform(t).getMatrix();
									return (
										a.transform(p[0], p[1], p[2], p[3], p[4], p[5]),
										this._drawCachedSceneCanvas(a),
										a.restore(),
										this
									);
								}
								if (!l) return this;
								if ((a.save(), this._useBufferCanvas() && !c)) {
									(r = (n = this.getStage().bufferCanvas).getContext()).clear(),
										r.save(),
										r._applyLineJoin(this);
									var f = this.getAbsoluteTransform(t).getMatrix();
									r.transform(f[0], f[1], f[2], f[3], f[4], f[5]),
										l.call(this, r, this),
										r.restore();
									var d = n.pixelRatio;
									h && a._applyShadow(this),
										a._applyOpacity(this),
										a._applyGlobalCompositeOperation(this),
										a.drawImage(n._canvas, 0, 0, n.width / d, n.height / d);
								} else
									a._applyLineJoin(this),
										u ||
											((f = this.getAbsoluteTransform(t).getMatrix()),
											a.transform(f[0], f[1], f[2], f[3], f[4], f[5]),
											a._applyOpacity(this),
											a._applyGlobalCompositeOperation(this)),
										h && a._applyShadow(this),
										l.call(this, a, this);
								return a.restore(), this;
							}
							drawHit(e, t, n = !1) {
								if (!this.shouldDrawHit(t, n)) return this;
								var r = this.getLayer(),
									o = e || r.hitCanvas,
									a = o && o.getContext(),
									s = this.hitFunc() || this.sceneFunc(),
									l = this._getCanvasCache(),
									h = l && l.hit;
								if (
									(this.colorKey ||
										i.Util.warn(
											'Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()',
										),
									h)
								) {
									a.save();
									var c = this.getAbsoluteTransform(t).getMatrix();
									return (
										a.transform(c[0], c[1], c[2], c[3], c[4], c[5]),
										this._drawCachedHitCanvas(a),
										a.restore(),
										this
									);
								}
								if (!s) return this;
								if ((a.save(), a._applyLineJoin(this), this !== t)) {
									var u = this.getAbsoluteTransform(t).getMatrix();
									a.transform(u[0], u[1], u[2], u[3], u[4], u[5]);
								}
								return s.call(this, a, this), a.restore(), this;
							}
							drawHitFromCache(e = 0) {
								var t,
									n,
									r,
									o,
									a,
									s = this._getCanvasCache(),
									l = this._getCachedSceneCanvas(),
									h = s.hit,
									c = h.getContext(),
									u = h.getWidth(),
									p = h.getHeight();
								c.clear(), c.drawImage(l._canvas, 0, 0, u, p);
								try {
									for (
										r = (n = (t = c.getImageData(0, 0, u, p)).data).length,
											o = i.Util._hexToRgb(this.colorKey),
											a = 0;
										a < r;
										a += 4
									)
										n[a + 3] > e
											? ((n[a] = o.r), (n[a + 1] = o.g), (n[a + 2] = o.b), (n[a + 3] = 255))
											: (n[a + 3] = 0);
									c.putImageData(t, 0, 0);
								} catch (e) {
									i.Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);
								}
								return this;
							}
							hasPointerCapture(e) {
								return l.c(e, this);
							}
							setPointerCapture(e) {
								l.e(e, this);
							}
							releaseCapture(e) {
								l.d(e, this);
							}
						}
						(p.prototype._fillFunc = function (e) {
							e.fill();
						}),
							(p.prototype._strokeFunc = function (e) {
								e.stroke();
							}),
							(p.prototype._fillFuncHit = function (e) {
								e.fill();
							}),
							(p.prototype._strokeFuncHit = function (e) {
								e.stroke();
							}),
							(p.prototype._centroid = !1),
							(p.prototype.nodeType = 'Shape'),
							Object(r.b)(p),
							(p.prototype.eventListeners = {}),
							p.prototype.on.call(
								p.prototype,
								'shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva',
								function () {
									this._clearCache('hasShadow');
								},
							),
							p.prototype.on.call(
								p.prototype,
								'shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva',
								function () {
									this._clearCache('shadowRGBA');
								},
							),
							p.prototype.on.call(
								p.prototype,
								'fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva',
								function () {
									this._clearCache('patternImage');
								},
							),
							p.prototype.on.call(
								p.prototype,
								'fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva',
								function () {
									this._clearCache('linearGradient');
								},
							),
							p.prototype.on.call(
								p.prototype,
								'fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva',
								function () {
									this._clearCache('radialGradient');
								},
							),
							o.a.addGetterSetter(p, 'stroke', void 0, Object(s.e)()),
							o.a.addGetterSetter(p, 'strokeWidth', 2, Object(s.d)()),
							o.a.addGetterSetter(p, 'fillAfterStrokeEnabled', !1),
							o.a.addGetterSetter(p, 'hitStrokeWidth', 'auto', Object(s.c)()),
							o.a.addGetterSetter(p, 'strokeHitEnabled', !0, Object(s.a)()),
							o.a.addGetterSetter(p, 'perfectDrawEnabled', !0, Object(s.a)()),
							o.a.addGetterSetter(p, 'shadowForStrokeEnabled', !0, Object(s.a)()),
							o.a.addGetterSetter(p, 'lineJoin'),
							o.a.addGetterSetter(p, 'lineCap'),
							o.a.addGetterSetter(p, 'sceneFunc'),
							o.a.addGetterSetter(p, 'hitFunc'),
							o.a.addGetterSetter(p, 'dash'),
							o.a.addGetterSetter(p, 'dashOffset', 0, Object(s.d)()),
							o.a.addGetterSetter(p, 'shadowColor', void 0, Object(s.f)()),
							o.a.addGetterSetter(p, 'shadowBlur', 0, Object(s.d)()),
							o.a.addGetterSetter(p, 'shadowOpacity', 1, Object(s.d)()),
							o.a.addComponentsGetterSetter(p, 'shadowOffset', ['x', 'y']),
							o.a.addGetterSetter(p, 'shadowOffsetX', 0, Object(s.d)()),
							o.a.addGetterSetter(p, 'shadowOffsetY', 0, Object(s.d)()),
							o.a.addGetterSetter(p, 'fillPatternImage'),
							o.a.addGetterSetter(p, 'fill', void 0, Object(s.e)()),
							o.a.addGetterSetter(p, 'fillPatternX', 0, Object(s.d)()),
							o.a.addGetterSetter(p, 'fillPatternY', 0, Object(s.d)()),
							o.a.addGetterSetter(p, 'fillLinearGradientColorStops'),
							o.a.addGetterSetter(p, 'strokeLinearGradientColorStops'),
							o.a.addGetterSetter(p, 'fillRadialGradientStartRadius', 0),
							o.a.addGetterSetter(p, 'fillRadialGradientEndRadius', 0),
							o.a.addGetterSetter(p, 'fillRadialGradientColorStops'),
							o.a.addGetterSetter(p, 'fillPatternRepeat', 'repeat'),
							o.a.addGetterSetter(p, 'fillEnabled', !0),
							o.a.addGetterSetter(p, 'strokeEnabled', !0),
							o.a.addGetterSetter(p, 'shadowEnabled', !0),
							o.a.addGetterSetter(p, 'dashEnabled', !0),
							o.a.addGetterSetter(p, 'strokeScaleEnabled', !0),
							o.a.addGetterSetter(p, 'fillPriority', 'color'),
							o.a.addComponentsGetterSetter(p, 'fillPatternOffset', ['x', 'y']),
							o.a.addGetterSetter(p, 'fillPatternOffsetX', 0, Object(s.d)()),
							o.a.addGetterSetter(p, 'fillPatternOffsetY', 0, Object(s.d)()),
							o.a.addComponentsGetterSetter(p, 'fillPatternScale', ['x', 'y']),
							o.a.addGetterSetter(p, 'fillPatternScaleX', 1, Object(s.d)()),
							o.a.addGetterSetter(p, 'fillPatternScaleY', 1, Object(s.d)()),
							o.a.addComponentsGetterSetter(p, 'fillLinearGradientStartPoint', ['x', 'y']),
							o.a.addComponentsGetterSetter(p, 'strokeLinearGradientStartPoint', ['x', 'y']),
							o.a.addGetterSetter(p, 'fillLinearGradientStartPointX', 0),
							o.a.addGetterSetter(p, 'strokeLinearGradientStartPointX', 0),
							o.a.addGetterSetter(p, 'fillLinearGradientStartPointY', 0),
							o.a.addGetterSetter(p, 'strokeLinearGradientStartPointY', 0),
							o.a.addComponentsGetterSetter(p, 'fillLinearGradientEndPoint', ['x', 'y']),
							o.a.addComponentsGetterSetter(p, 'strokeLinearGradientEndPoint', ['x', 'y']),
							o.a.addGetterSetter(p, 'fillLinearGradientEndPointX', 0),
							o.a.addGetterSetter(p, 'strokeLinearGradientEndPointX', 0),
							o.a.addGetterSetter(p, 'fillLinearGradientEndPointY', 0),
							o.a.addGetterSetter(p, 'strokeLinearGradientEndPointY', 0),
							o.a.addComponentsGetterSetter(p, 'fillRadialGradientStartPoint', ['x', 'y']),
							o.a.addGetterSetter(p, 'fillRadialGradientStartPointX', 0),
							o.a.addGetterSetter(p, 'fillRadialGradientStartPointY', 0),
							o.a.addComponentsGetterSetter(p, 'fillRadialGradientEndPoint', ['x', 'y']),
							o.a.addGetterSetter(p, 'fillRadialGradientEndPointX', 0),
							o.a.addGetterSetter(p, 'fillRadialGradientEndPointY', 0),
							o.a.addGetterSetter(p, 'fillPatternRotation', 0),
							o.a.backCompat(p, {
								dashArray: 'dash',
								getDashArray: 'getDash',
								setDashArray: 'getDash',
								drawFunc: 'sceneFunc',
								getDrawFunc: 'getSceneFunc',
								setDrawFunc: 'setSceneFunc',
								drawHitFunc: 'hitFunc',
								getDrawHitFunc: 'getHitFunc',
								setDrawHitFunc: 'setHitFunc',
							});
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return h;
						});
						var r = n(3),
							i = 1,
							o = {},
							a = function (e) {
								var t = i++;
								return (
									(o[t] = e),
									Promise.resolve().then(function () {
										return (function (e) {
											var t = o[e];
											t && t();
										})(t);
									}),
									t
								);
							},
							s = function (e) {
								delete o[e];
							},
							l = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.scheduler = t), (r.work = n), r;
								}
								return (
									r.a(t, e),
									(t.prototype.requestAsyncId = function (t, n, r) {
										return (
											void 0 === r && (r = 0),
											null !== r && r > 0
												? e.prototype.requestAsyncId.call(this, t, n, r)
												: (t.actions.push(this),
												  t.scheduled || (t.scheduled = a(t.flush.bind(t, null))))
										);
									}),
									(t.prototype.recycleAsyncId = function (t, n, r) {
										if (
											(void 0 === r && (r = 0),
											(null !== r && r > 0) || (null === r && this.delay > 0))
										)
											return e.prototype.recycleAsyncId.call(this, t, n, r);
										0 === t.actions.length && (s(n), (t.scheduled = void 0));
									}),
									t
								);
							})(n(54).a),
							h = new ((function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									r.a(t, e),
									(t.prototype.flush = function (e) {
										(this.active = !0), (this.scheduled = void 0);
										var t,
											n = this.actions,
											r = -1,
											i = n.length;
										e = e || n.shift();
										do {
											if ((t = e.execute(e.state, e.delay))) break;
										} while (++r < i && (e = n.shift()));
										if (((this.active = !1), t)) {
											for (; ++r < i && (e = n.shift()); ) e.unsubscribe();
											throw t;
										}
									}),
									t
								);
							})(n(52).a))(l);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return o;
						});
						var r = n(34),
							i = n(57),
							o = {
								closed: !0,
								next: function (e) {},
								error: function (e) {
									if (r.a.useDeprecatedSynchronousErrorHandling) throw e;
									Object(i.a)(e);
								},
								complete: function () {},
							};
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillersTool = void 0);
						var o = n(5),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.invalidFixedArea = function (e, t) {
										return t.usedPoly.some(function (t) {
											return e.polyId.equalTo(t);
										});
									}),
									(t.prototype.changeFillerType = function (e, t) {}),
									(t.prototype.finishDrag = function (e) {
										var t = this,
											n = !1;
										this.view.shapeManager.shapem.forEach(function (r) {
											r.avaiablePoly.forEach(function (i) {
												t.invalidFixedArea(i, r) ||
													((i.polygon.intersect(e.polygon).length > 0 ||
														i.polygon.contains(e.polygon)) &&
														(t.changeFillerType(r.mulManager.fillerManager, i), (n = !0)));
											}),
												r.sashManager.allSashes.forEach(function (r) {
													r.avaiablePoly.forEach(function (i) {
														(i.polygon.intersect(e.polygon).length > 0 ||
															i.polygon.contains(e.polygon)) &&
															(t.changeFillerType(r.mulManager.fillerManager, i), (n = !0));
													});
												});
										}),
											n
												? a.Area.calcSerial(this.view.shapeManager.shapem)
												: this.view.toolManager.releaseTool();
									}),
									t
								);
							})(o.DragDrawTool);
						t.FillersTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Direction = t.EdgeFinder = void 0);
						var o,
							a = i(n(0)),
							s = n(2),
							l = n(13),
							h = (function () {
								function e() {}
								return (
									Object.defineProperty(e, 'Instance', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.findIndex = function (e, t, n) {
										var r = n || t.edges,
											i = this.find(e, r, t.orientation);
										return i ? t.findIndex(i) : -1;
									}),
									(e.prototype.findIndex2 = function (e, t) {
										e === o.Up ? (e = o.Down) : e === o.Down && (e = o.Up);
										var n = this.find(e, t.edges, t.orientation);
										return n ? t.findIndex(n) : -1;
									}),
									(e.prototype.find = function (e, t, n) {
										var r;
										if (0 !== t.length)
											return (
												(r =
													n === a.default.ORIENTATION.CW
														? this.slopeInCWRect.get(e)
														: this.slopeInCCWRect.get(e)),
												(t = t.sort(function (t, n) {
													var i =
															t instanceof a.default.Segment
																? t
																: a.default.segment(t.start, t.end),
														s =
															n instanceof a.default.Segment
																? n
																: a.default.segment(n.start, n.end),
														l = a.default.Utils.EQ_0(i.slope - 2 * Math.PI) ? 0 : i.slope,
														h = a.default.Utils.EQ_0(s.slope - 2 * Math.PI) ? 0 : s.slope;
													r = void 0 !== r ? r : 0;
													var c = Math.abs(l - r) - Math.abs(h - r);
													if (a.default.Utils.EQ_0(c))
														switch (e) {
															case o.Up:
																return s.start.y - i.start.y;
															case o.Down:
																return i.start.y - s.start.y;
															case o.Left:
																return i.start.x - s.start.x;
															default:
																return s.start.x - i.start.x;
														}
													return c;
												}))[0]
											);
									}),
									(e.prototype.findDirection = function (t, n, r) {
										void 0 === r && (r = !1);
										var i = [o.Left, o.Right, o.Up, o.Down].find(function (r) {
											return e.Instance.findIndex(r, t) === n;
										});
										return r && (i === o.Up ? (i = o.Down) : i === o.Down && (i = o.Up)), i;
									}),
									(e.prototype.findConnectedEdge = function (e, t) {
										var n = -1;
										return {
											bar: t.find(function (t, r) {
												return t.polygon.edges.some(function (t, r) {
													var i = t;
													if (2 === e.intersect(i).length) return (n = r), !0;
												});
											}),
											edgeIndex: n,
										};
									}),
									(e.prototype.isPolygonConnected = function (e, t) {
										var n,
											i,
											o,
											a,
											s = e.edges,
											l = t.edges;
										try {
											for (var h = r(s), c = h.next(); !c.done; c = h.next()) {
												var u = c.value;
												try {
													for (var p = ((o = void 0), r(l)), f = p.next(); !f.done; f = p.next()) {
														var d = f.value;
														if (2 === u.intersect(d).length) return !0;
													}
												} catch (e) {
													o = {
														error: e,
													};
												} finally {
													try {
														f && !f.done && (a = p.return) && a.call(p);
													} finally {
														if (o) throw o.error;
													}
												}
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												c && !c.done && (i = h.return) && i.call(h);
											} finally {
												if (n) throw n.error;
											}
										}
										return !1;
									}),
									(e.prototype.isPolygonConnectedWithEdge = function (e, t) {
										var n,
											i,
											o = t.edges;
										try {
											for (var l = r(o), h = l.next(); !h.done; h = l.next()) {
												var c = h.value;
												if (!(c instanceof a.default.Arc) && s.Utils.segCoincide(e, c)) return !0;
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												h && !h.done && (i = l.return) && i.call(l);
											} finally {
												if (n) throw n.error;
											}
										}
										return !1;
									}),
									(e.prototype.connectedEdgeIndex = function (e, t) {
										for (var n, i, o = e.edges, a = t.edges, s = 0; s < o.length; s++) {
											var l = o[s];
											try {
												for (var h = ((n = void 0), r(a)), c = h.next(); !c.done; c = h.next()) {
													var u = c.value;
													if (2 === l.intersect(u).length) return s;
												}
											} catch (e) {
												n = {
													error: e,
												};
											} finally {
												try {
													c && !c.done && (i = h.return) && i.call(h);
												} finally {
													if (n) throw n.error;
												}
											}
										}
										return -1;
									}),
									Object.defineProperty(e.prototype, 'slopeInCWRect', {
										get: function () {
											return new Map([
												[o.Up, 0],
												[o.Down, Math.PI],
												[o.Left, Math.PI / 2],
												[o.Right, (Math.PI / 2) * 3],
											]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'slopeInCCWRect', {
										get: function () {
											return new Map([
												[o.Down, 0],
												[o.Up, Math.PI],
												[o.Right, Math.PI / 2],
												[o.Left, (Math.PI / 2) * 3],
											]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.getOppositeDirection = function (e) {
										return e === o.Left
											? o.Right
											: e === o.Right
											? o.Left
											: e === o.Up
											? o.Down
											: e === o.Down
											? o.Up
											: o.None;
									}),
									(e.prototype.getOpenDirectionToDirection = function (e) {
										return e === l.OpenDirection.Left
											? o.Left
											: e === l.OpenDirection.Right
											? o.Right
											: e === l.OpenDirection.Up
											? o.Up
											: e === l.OpenDirection.Down
											? o.Down
											: o.None;
									}),
									e
								);
							})();
						(t.EdgeFinder = h),
							(function (e) {
								(e.Left = 'left'),
									(e.Right = 'right'),
									(e.Up = 'up'),
									(e.Down = 'down'),
									(e.None = 'None');
							})((o = t.Direction || (t.Direction = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DimType =
								t.DimInfoManager =
								t.InnerSpaceDimInfo =
								t.InnerSpaceDimRefType =
								t.InnerMullionDimInfo =
								t.MullionProjectionDimInfo =
								t.MulChordHeightDimInfo =
								t.MullionDimInfo =
								t.ChordDimInfo =
								t.DimInfo =
								t.AlignTypeEnum =
									void 0);
						var l,
							h = s(n(0)),
							c = n(83),
							u = n(5),
							p = n(13),
							f = n(2),
							d = n(1);
						!(function (e) {
							(e[(e.center = 0)] = 'center'),
								(e[(e.left = 1)] = 'left'),
								(e[(e.right = 2)] = 'right');
						})((l = t.AlignTypeEnum || (t.AlignTypeEnum = {})));
						var g = (function () {
							function e(e, t) {
								void 0 === e && (e = -1),
									void 0 === t && (t = P.Line),
									(this.edgeIdx = e),
									(this.type = t),
									(this.mulDimIdx = -1),
									(this.name = ''),
									(this.value = 0),
									(this.dimShow = !1),
									(this.offvec = h.default.vector()),
									(this.dir = h.default.vector()),
									(this.isArc = !1),
									(this.mulStart = !1),
									(this.alignType = l.center),
									(this.manualConfirmed = !1),
									(this.segs = []);
							}
							return (
								Object.defineProperty(e.prototype, 'frameDim', {
									get: function () {
										return !0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'mullionDim', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'innerMullionDim', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'mullionProjectionDim', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'innerSpace', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'lines', {
									get: function () {
										var e = this;
										return this.segs.map(function (t) {
											return t.translate(e.offvec);
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'obj', {
									get: function () {
										return this;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.createDim = function (e, t, n, r, i, o) {
									if (h.default.Utils.EQ_0(t.length))
										(this.targetBar = e),
											(this.dir = n),
											(this.value = 0),
											(this.segs = []),
											(this.mulStart = o);
									else {
										(this.targetBar = e), (this.dir = n), (this.value = t.length);
										var a = t.slope;
										a = i === h.default.ORIENTATION.CCW ? a - Math.PI / 2 : a + Math.PI / 2;
										var s = f.Utils.slopeDirPt(t.start, 0.5 * r, a),
											l = f.Utils.slopeDirPt(t.end, 0.5 * r, a),
											u = c.DrawParams.Ins.dimLineH,
											p = f.Utils.slopeDirPt(s, u, a),
											d = f.Utils.slopeDirPt(l, u, a),
											g = f.Utils.slopeDirPt(s, -u, a),
											y = f.Utils.slopeDirPt(l, -u, a);
										(this.segs = [
											h.default.segment(g, p),
											h.default.segment(y, d),
											h.default.segment(s, l),
										]),
											(this.mulStart = o);
									}
								}),
								(e.prototype.applyDiff = function (e, t) {
									if (
										(void 0 === t && (t = h.default.point()),
										!h.default.Utils.EQ_0(e - this.value) && this.targetBar)
									) {
										var n = this.targetBar.topFrame.view;
										this.frameDim ? this.applyFrame(e) : this.applyMullion(this.targetBar, e, t),
											p.ShapeActor.emitStructureChanged(n);
									}
								}),
								(e.prototype.applyMullion = function (e, t, n) {
									var r = e.topFrame.view,
										i = t - this.value,
										o = this.dir.multiply(i),
										a = e.parentId,
										s = new Map();
									if (
										(p.MullionManager.allBarsAlignedWith(e).forEach(function (t) {
											(t.bar.where === d.ShapeType.FrameMullion &&
												e.where === d.ShapeType.SashMullion) ||
												(t.iHost.mulManager.splitter.transSplitter(
													t.bar.polygon.polyId.idx,
													o,
													t.bar,
												),
												t.bar.parentId !== a && s.set(t.iHost.id, t.iHost));
										}),
										s.forEach(function (e) {
											e.updatePoly(), e.draw(r);
										}),
										e.editTool && e.editTool === u.ToolType.editInnerSplitter)
									)
										r.shapeManager.dragInner(e, o, n);
									else {
										var l = e.parent;
										l.mulManager.splitter.transSplitter(e.polygon.polyId.idx, o, e),
											l.mulManager.dockMgr.forDoTask(function (t, n) {
												return (
													n.forEach(function (t) {
														t.idx.equalTo(e.polyId) && (t.pt = t.pt.translate(o));
													}),
													f.DockTaskStatus.Continue
												);
											}),
											l.updatePoly(),
											l.draw(r);
									}
								}),
								(e.prototype.applyFrame = function (e, t) {
									void 0 === t && (t = u.ExpandDirection.LeftOrUp);
									var n = this.targetBar.parent;
									this.isArc
										? n.editArcDim(this.edgeIdx, e)
										: this instanceof y
										? n.editChordDim(this.edgeIdx, e)
										: n.editDimInfo(this, e, this.value, t),
										n.updateFrame(!0),
										n.draw(n.view),
										n.view.shapeManager.couples.forEach(function (e) {
											e.updatePoly(e.polygon), e.draw(n.view);
										});
									var r = d.SubFrame.findBy(n);
									r && (r.updatePoly(), r.draw()), n.view.refresh();
								}),
								(e.prototype.translate = function (e) {
									var t = this;
									this.segs.forEach(function (n, r) {
										return (t.segs[r] = n.translate(e));
									});
								}),
								(e.prototype.toJSON = function () {
									return {
										type: this.type,
										eidx: this.edgeIdx,
										midx: this.mulDimIdx,
										name: this.name,
										ds: this.dimShow,
										ov: this.offvec.toJSON(),
										at: this.alignType,
									};
								}),
								(e.prototype.deserialize = function (e) {
									return (
										(this.type = e.type),
										(this.edgeIdx = e.eidx),
										(this.mulDimIdx = e.midx),
										(this.name = e.name),
										(this.dimShow = e.ds),
										(this.offvec = h.default.vector(e.ov.x, e.ov.y)),
										(this.alignType = e.at ? e.at : 0),
										this
									);
								}),
								Object.defineProperty(e.prototype, 'dimSeg', {
									get: function () {
										return this.segs.length < 3 ? void 0 : this.segs[2];
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.likeTo = function (e) {
									if (this === e) return !1;
									var t = this.dimSeg,
										n = e.dimSeg;
									if (!t || !n) return !1;
									if (f.Utils.isSegVertical(t)) {
										if (!f.Utils.isParallel(t, n)) return !1;
										var r =
												h.default.Utils.EQ_0(t.start.y - n.start.y) &&
												h.default.Utils.EQ_0(t.end.y - n.end.y),
											i =
												h.default.Utils.EQ_0(t.start.y - n.end.y) &&
												h.default.Utils.EQ_0(t.end.y - n.start.y);
										return r || i;
									}
									return (
										!!f.Utils.isSegHorizontal(t) &&
										!!f.Utils.isParallel(t, n) &&
										((r =
											h.default.Utils.EQ_0(t.start.x - n.start.x) &&
											h.default.Utils.EQ_0(t.end.x - n.end.x)),
										(i =
											h.default.Utils.EQ_0(t.start.x - n.end.x) &&
											h.default.Utils.EQ_0(t.end.x - n.start.x)),
										r || i)
									);
								}),
								(e.deDim = function (t) {
									return t.type === P.Line
										? new e().deserialize(t)
										: t.type === P.Chord
										? new y().deserialize(t)
										: t.type === P.InnerMullion
										? new S().deserialize(t)
										: t.type === P.MullionProjection
										? new w().deserialize(t)
										: t.type === P.InnerSpace
										? new _().deserialize(t)
										: t.type === P.MullionChordHeight
										? new v().deserialize(t)
										: new m().deserialize(t);
								}),
								(e.isUp = function (e) {
									return e > 225 && e < 315;
								}),
								(e.isDown = function (e) {
									return e > 45 && e < 135;
								}),
								(e.isLeft = function (e) {
									return e >= 135 && e <= 225;
								}),
								(e.isRight = function (e) {
									return (e >= 0 && e <= 45) || (e >= 315 && e <= 360);
								}),
								(e.prototype.isReverse = function (t) {
									var n = !0,
										r = Math.round((180 * this.dir.slope) / Math.PI);
									return (
										(((e.isRight(r) || e.isDown(r)) && t === u.ExpandDirection.RightOrDown) ||
											((e.isLeft(r) || e.isUp(r)) && t === u.ExpandDirection.LeftOrUp)) &&
											(n = !1),
										n
									);
								}),
								e
							);
						})();
						t.DimInfo = g;
						var y = (function (e) {
							function t(t) {
								return void 0 === t && (t = -1), e.call(this, t, P.Chord) || this;
							}
							return i(t, e), t;
						})(g);
						t.ChordDimInfo = y;
						var m = (function (e) {
							function t(t, n) {
								void 0 === t && (t = -1), void 0 === n && (n = -1);
								var r = e.call(this, t, P.Mullion) || this;
								return (r.mulDimIdx = n), (r.dimShow = !1), r;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'frameDim', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'mullionDim', {
									get: function () {
										return !0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(g);
						t.MullionDimInfo = m;
						var v = (function (e) {
							function t(t) {
								void 0 === t && (t = new f.PolyId());
								var n = e.call(this, t.idx, P.MullionChordHeight) || this;
								return (n.mulDimIdx = t.pos), n;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'frameDim', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'mullionDim', {
									get: function () {
										return !0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(g);
						t.MulChordHeightDimInfo = v;
						var w = (function (e) {
							function t(t, n) {
								void 0 === t && (t = -1), void 0 === n && (n = -1);
								var r = e.call(this, t, P.MullionProjection) || this;
								return (r.mulDimIdx = n), (r.dimShow = !1), r;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'frameDim', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'mullionProjectionDim', {
									get: function () {
										return !0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(g);
						t.MullionProjectionDimInfo = w;
						var b,
							S = (function (e) {
								function t(t, n) {
									void 0 === t && (t = -1), void 0 === n && (n = -1);
									var r = e.call(this, t, P.InnerMullion) || this;
									return (r.mulDimIdx = n), (r.dimShow = !0), r;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'frameDim', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'innerMullionDim', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(g);
						(t.InnerMullionDimInfo = S),
							(function (e) {
								(e.frame = 'frame'), (e.mullion = 'mullion'), (e.innermullion = 'innermullion');
							})((b = t.InnerSpaceDimRefType || (t.InnerSpaceDimRefType = {})));
						var _ = (function (e) {
							function t(t, n, r) {
								void 0 === t && (t = -1), void 0 === n && (n = -1), void 0 === r && (r = b.frame);
								var i = e.call(this, t, P.InnerSpace) || this;
								return (i.mulDimIdx = n), (i.refType = r), (i.dimShow = !0), i;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'frameDim', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'innerMullionDim', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'innerSpace', {
									get: function () {
										return !0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.toJSON = function () {
									var t = e.prototype.toJSON.call(this);
									return (t.rt = this.refType), t;
								}),
								(t.prototype.deserialize = function (t) {
									return e.prototype.deserialize.call(this, t), (this.refType = t.rt), this;
								}),
								(t.prototype.applyDiff = function (e, t) {
									if (
										(void 0 === t && (t = h.default.point()),
										!h.default.Utils.EQ_0(e - this.value) && this.targetBar)
									) {
										var n = this.targetBar.topFrame.view;
										if (this.refType === b.frame) {
											var r = this.targetBar.topFrame.dim.diMgr.findFrameDim(this.edgeIdx);
											if (r) {
												var i = e - this.value;
												r.applyDiff(r.value + i, t);
											}
										} else this.applyMullion(this.targetBar, e, t);
										p.ShapeActor.emitStructureChanged(n);
									}
								}),
								t
							);
						})(g);
						t.InnerSpaceDimInfo = _;
						var P,
							x = (function () {
								function e() {
									this._dimInfos = [];
								}
								return (
									(e.prototype.add = function (e) {
										this._dimInfos.indexOf(e) >= 0 || this._dimInfos.push(e);
									}),
									(e.prototype.remove = function (e) {
										var t = this._dimInfos.indexOf(e);
										t < 0 || this._dimInfos.splice(t, 1);
									}),
									(e.prototype.clear = function () {
										this._dimInfos.splice(0, this._dimInfos.length);
									}),
									(e.prototype.findFrameDim = function (e) {
										return this._dimInfos.find(function (t) {
											return t.type === P.Line && t.edgeIdx === e;
										});
									}),
									(e.prototype.findChordDim = function (e) {
										return this._dimInfos.find(function (t) {
											return t.type === P.Chord && t.edgeIdx === e;
										});
									}),
									(e.prototype.findMulDim = function (e, t) {
										return this._dimInfos.find(function (n) {
											return n.type === P.Mullion && n.edgeIdx === e && n.mulDimIdx === t;
										});
									}),
									(e.prototype.findMulChordHeightDim = function (e) {
										return this._dimInfos.find(function (t) {
											return (
												t.type === P.MullionChordHeight &&
												t.edgeIdx === e.idx &&
												t.mulDimIdx === e.pos
											);
										});
									}),
									(e.prototype.findMulProjectionDim = function (e, t) {
										return this._dimInfos.find(function (n) {
											return n.type === P.MullionProjection && n.edgeIdx === e && n.mulDimIdx === t;
										});
									}),
									(e.prototype.findInnerSpaceDim = function (e, t, n) {
										return this._dimInfos.find(function (r) {
											return (
												r.type === P.InnerSpace &&
												r.edgeIdx === e &&
												r.mulDimIdx === t &&
												r.refType === n
											);
										});
									}),
									(e.prototype.findInnerMulDim = function (e, t) {
										return this._dimInfos.find(function (n) {
											return n.type === P.InnerMullion && n.edgeIdx === e && n.mulDimIdx === t;
										});
									}),
									Object.defineProperty(e.prototype, 'visualDims', {
										get: function () {
											return c.DrawParams.Ins.withoutDims
												? []
												: this._dimInfos.filter(function (e) {
														return e.dimShow && e.value > 0;
												  });
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allDims', {
										get: function () {
											return this._dimInfos;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.toJSON = function () {
										var e = [];
										return (
											this.visualDims.forEach(function (t) {
												return e.push(t.toJSON());
											}),
											e
										);
									}),
									(e.prototype.translate = function (e) {
										this._dimInfos.forEach(function (t) {
											return t.translate(e);
										});
									}),
									(e.prototype.forEach = function (e) {
										this._dimInfos.forEach(function (t) {
											return e(t);
										});
									}),
									Object.defineProperty(e.prototype, 'frameCount', {
										get: function () {
											var e = 0;
											return (
												this._dimInfos.forEach(function (t) {
													t.type === P.Line && e++;
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.filterDuplicate = function (e) {
										var t = this;
										if (-1 !== e.id) {
											var n,
												r = e.view.shapeManager.shapem.filter(function (e) {
													return e.id >= 0;
												}),
												i = e.view.shapeManager.couples,
												o = [];
											r.find(function (t) {
												return t.id === e.id;
											}) || r.push(e),
												r.forEach(function (n) {
													return o.push.apply(o, a(t.fdims(n, e)));
												}),
												(n = r.some(function (e) {
													return e.atTCorner;
												})
													? this.calcDimTCornerWeight(o, r, i, e.view)
													: this.calcDimWeight(o, r, i, e.view)),
												this.hideDim(o, n);
										}
									}),
									(e.prototype.fdims = function (e, t) {
										var n;
										if (e.id === t.id) n = this._dimInfos;
										else {
											if (!e.dim || !e.dim.diMgr) return [];
											n = e.dim.diMgr.allDims;
										}
										return n.filter(function (e) {
											return (
												(e.type === P.Line ||
													e.type === P.Mullion ||
													e.type === P.InnerMullion ||
													e.type === P.MullionProjection ||
													e.type === P.InnerSpace) &&
												!e.isArc &&
												e.lines.length > 0 &&
												f.Utils.isHorizOrVer(e.lines[2])
											);
										});
									}),
									(e.prototype.inArea = function (e, t, n, r) {
										return (
											t.some(function (t) {
												return t.polygon.contains(e);
											}) ||
											n.some(function (t) {
												return t.polygon.contains(e);
											}) ||
											r.some(function (t) {
												return t.polygon.contains(e);
											})
										);
									}),
									(e.prototype.calcDimTCornerWeight = function (e, t, n, r) {
										var i = this,
											o = [];
										return (
											e
												.filter(function (e) {
													return e.type !== P.InnerMullion;
												})
												.forEach(function (a, s) {
													if (a.dimSeg && f.Utils.isSegHorizontal(a.dimSeg)) {
														var l = a.targetBar.topFrame;
														if (!l.atTCorner && a.dimSeg.middle().y > l.polygon.box.center.y)
															return void o.push({
																isUsed: !1,
																dim: a,
																val: s + 1 * e.length,
															});
													}
													var h = a.dimSeg.middle(),
														c = i.inArea(h, t, n, r.shapeManager.walls) ? 1 : 0;
													o.push({
														isUsed: !1,
														dim: a,
														val: s + e.length * c,
													});
												}),
											o
										);
									}),
									(e.prototype.calcDimWeight = function (e, t, n, r) {
										var i = this,
											o = [];
										return (
											e
												.filter(function (e) {
													return e.type !== P.InnerMullion;
												})
												.forEach(function (a, s) {
													var l = a.dimSeg.middle(),
														h = i.inArea(l, t, n, r.shapeManager.walls) ? 1 : 0;
													o.push({
														isUsed: !1,
														dim: a,
														val: s + e.length * h,
													});
												}),
											o
										);
									}),
									(e.prototype.hideDim = function (e, t) {
										t ||
											(t = e.map(function (e, t) {
												return {
													isUsed: !1,
													dim: e,
													val: t,
												};
											})),
											t.forEach(function (e) {
												if (!e.isUsed) {
													var n = a(
														[e],
														t.filter(function (t) {
															return !1 === t.isUsed && t.dim.likeTo(e.dim);
														}),
													);
													n.sort(function (e, t) {
														return e.val - t.val;
													}),
														n.forEach(function (e, t) {
															(e.dim.dimShow = 0 === t), (e.isUsed = !0);
														});
												}
											}),
											e
												.filter(function (e) {
													return e.type === P.InnerMullion;
												})
												.forEach(function (t) {
													t.dimShow &&
														e.filter(function (e) {
															return t.likeTo(e) && e.dimShow;
														}).length > 0 &&
														(t.dimShow = !1);
												}),
											e.forEach(function (t) {
												if (
													t.type === P.InnerSpace &&
													t instanceof _ &&
													t.refType === b.innermullion
												) {
													var n = e.find(function (e) {
														return (
															e.type === P.InnerMullion &&
															e.edgeIdx === t.edgeIdx &&
															e.mulDimIdx === t.mulDimIdx
														);
													});
													t.dimShow = !!n && n.dimShow;
												}
											});
									}),
									(e.prototype.filterDuplicateInner = function (e) {
										var t = this;
										e.mulManager.dockMgrForDim.forDoTask(function (n, r) {
											return -1 === n.pos
												? f.DockTaskStatus.Continue
												: (r.forEach(function (i, o) {
														var a = e.mulManager.bars[i.idx.idx];
														if (a) {
															var s = a.polygon.mulShape;
															if (s instanceof h.default.Segment && f.Utils.isHorizOrVer(s)) {
																var l = !1;
																if (
																	(e.mulManager.dockMgrForDim.forDoTask(function (t, n) {
																		return -1 !== t.pos
																			? f.DockTaskStatus.Continue
																			: e.polygon.edges[t.idx] instanceof h.default.Segment
																			? n.find(function (e) {
																					return e.idx.equalTo(i.idx);
																			  })
																				? ((l = !0), f.DockTaskStatus.Return)
																				: f.DockTaskStatus.OK
																			: f.DockTaskStatus.Continue;
																	}),
																	e.polygon.isRectangle() && l && 0 !== o && o !== r.length - 1)
																) {
																	var c = t.findInnerMulDim(n.idx, o);
																	c && c.dimShow && (c.dimShow = !1);
																	var u = t.findInnerMulDim(n.idx, o + 1);
																	u && u.dimShow && (u.dimShow = !1);
																}
															}
														}
												  }),
												  f.DockTaskStatus.OK);
										});
									}),
									(e.prototype.sortMulDimInfo = function () {
										var e = this._dimInfos.filter(function (e) {
												return e.type === P.Mullion;
											}),
											t = this._dimInfos.filter(function (e) {
												return e.type === P.MullionProjection;
											}),
											n = this._dimInfos.filter(function (e) {
												return e.type === P.InnerMullion;
											}),
											r = this._dimInfos.filter(function (e) {
												return e.type === P.InnerSpace;
											}),
											i = this._dimInfos.filter(function (e) {
												return (
													e.type !== P.Mullion &&
													e.type !== P.InnerMullion &&
													e.type !== P.MullionProjection &&
													e.type !== P.InnerSpace
												);
											});
										this._dimInfos = a(
											i,
											e.sort(function (e, t) {
												return e.edgeIdx < t.edgeIdx ||
													(e.edgeIdx === t.edgeIdx && e.mulDimIdx <= t.mulDimIdx)
													? -1
													: 1;
											}),
											t.sort(function (e, t) {
												return e.edgeIdx < t.edgeIdx ||
													(e.edgeIdx === t.edgeIdx && e.mulDimIdx <= t.mulDimIdx)
													? -1
													: 1;
											}),
											n.sort(function (e, t) {
												return e.edgeIdx < t.edgeIdx ||
													(e.edgeIdx === t.edgeIdx && e.mulDimIdx <= t.mulDimIdx)
													? -1
													: 1;
											}),
											r.sort(function (e, t) {
												return e.edgeIdx < t.edgeIdx ||
													(e.edgeIdx === t.edgeIdx && e.mulDimIdx <= t.mulDimIdx)
													? -1
													: 1;
											}),
										);
									}),
									e
								);
							})();
						(t.DimInfoManager = x),
							(function (e) {
								(e.Line = 'line'),
									(e.Chord = 'chord'),
									(e.Mullion = 'mullion'),
									(e.MullionChordHeight = 'mullionChordHeight'),
									(e.MullionProjection = 'mullionProjection'),
									(e.InnerMullion = 'innermullion'),
									(e.InnerSpace = 'innerSpace');
							})((P = t.DimType || (t.DimType = {})));
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.TopViewStyle = t.langMode = t.DrawParams = void 0);
						var i,
							o,
							a = r(n(355)),
							s = n(6),
							l = n(1),
							h = n(7),
							c = n(2),
							u = (function () {
								function e() {
									(this.roundUpShadeCounts = !1),
										(this.pullingHeightMigrate = !1),
										(this.disableDrag = !1),
										(this.InnerEmptyTrackDetect = !1),
										(this.sashMullionFixedToSashBottom = !0),
										(this.slideDefaultOption = 15),
										(this.slideLockType = s.LockType.Default),
										(this.slideLockCode = ''),
										(this.slideLockName = ''),
										(this.displayTurningFrame = !1),
										(this.withTurningFrame = !0),
										(this.displayTurningFrameForSash = !1),
										(this.withTurningFrameForSash = !0),
										(this.fixedBeadShown = !0),
										(this.sashBeadShown = !0),
										(this.topViewHidden = !1),
										(this.topViewStyle = o.default),
										(this.shadeDescHidden = !1),
										(this.fixedBeadJointWay = c.EdgeJointWay.Default),
										(this.frameEdgeJointWay = c.EdgeJointWay.Default),
										(this.slideFrameEdgeJointWay = c.EdgeJointWay.Vertical),
										(this.sashEdgeJointWay = c.EdgeJointWay.Default),
										(this.proUpDownOpenTopView = !0),
										(this.reverseInnerOuter = !1),
										(this.unitDigits = 1),
										(this.useBoxArea = !1),
										(this.reverseOpenTowardIndicator = !1),
										(this.cornerJoinersAreaX2 = !1),
										(this.kfcWaistDimShown = !1),
										(this.kfcHingesHidden = !1),
										(this.dimToGroundShown = !0),
										(this.dimToSashShown = !1),
										(this.handleRelativeSet = !1),
										(this.narrowScreenStyle = !0),
										(this.sashOutwardOpen = !0),
										(this.sashDoubleWayOpen = !1),
										(this.withoutGlassSerial = !1),
										(this.readonly = !1),
										(this.customDimEditor = !1),
										(this.customNoteEditor = !1),
										(this.europeanStandard = !1),
										(this.strictWheel = !1),
										(this.withoutDims = !1),
										(this.asSimpleView = !1),
										(this.preventScale = !1),
										(this.enLangMode = !1),
										(this.langMode = i.zh_cn),
										(this.strokeWidth = 3),
										(this.windowStrokeWidth = 3),
										(this.fontFamilyForText = 'Arial'),
										(this.fontFamilyForNum = 'Arial'),
										(this.dimFontSize = 120),
										(this.dimFontH = 90),
										(this.dimLineH = 30),
										(this.dimPrintSizeFixed = !1),
										(this.dimPrintSize = 80),
										(this.dimFontBold = !0),
										(this.labelFontSize = 60),
										(this.hingeRatio = 3),
										(this.handleRatio = 3),
										(this.tvOpenDegree = 10),
										(this.tvTrackMargin = 40),
										(this.tvProfileSize = 40),
										(this.tvMarginTop = 600),
										(this.showInnerSpaceDim = !1),
										(this.drawPolyType = l.DrawPolyType.standard),
										(this.sashOpen = !1),
										(this.sashAsDoor = !1),
										(this.frameSerialShown = !1),
										(this.glassSpec = new c.GlassSpec()),
										(this.scriptGlassSpecBased = !0),
										(this.fixedSashToFixedGlass = !1),
										(this.dragModifyOnFrame = !0),
										(this.dragModifyOnHardware = !0),
										(this.nonGapFrame = !1),
										(this.nonGapFixedBead = !1),
										(this.nonGapSash = !1),
										(this.nonGapSashBead = !1),
										(this.nonGapRound = 15),
										(this.serials = {
											sashGlass: 'A',
											screenNet: 'S',
											fixedGlass: 'F',
										}),
										(this.showThreedArcFrameRadiusText = !1),
										(this.screenLineStyle = c.ScreenLineStyle.Medium),
										(this.screenLineWidth = 1.6),
										(this.kfcHandleType = l.HardwareShape.KfcHandle),
										(this._robotSize = 40),
										(this._arcDummy = 20),
										(this._snapVertex = 60),
										(this._snapEdge = 60),
										(this._unit = h.Unit.Millimeters);
								}
								return (
									Object.defineProperty(e, 'Ins', {
										get: function () {
											return e._ins || (e._ins = new e()), e._ins;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'unit', {
										get: function () {
											return this._unit;
										},
										set: function (e) {
											var t = h.UnitConvertion.Ins.defaultDigits.get(e);
											t && ((this._unit = e), (this.unitDigits = t));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'textFont', {
										get: function () {
											return (
												(this.asSimpleView ? '' : this.dimFontBold ? 'bold ' : '') +
												this.dimFontSize +
												'px ' +
												this.fontFamilyForText
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'numFont', {
										get: function () {
											return (
												(this.asSimpleView ? '' : this.dimFontBold ? 'bold ' : '') +
												this.dimFontSize +
												'px ' +
												this.fontFamilyForNum
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'robotSize', {
										get: function () {
											return c.SystemParam.isMobileDevice ? 2 * this._robotSize : this._robotSize;
										},
										set: function (e) {
											this._robotSize = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'arcDummy', {
										get: function () {
											return c.SystemParam.isMobileDevice ? 2 * this._arcDummy : this._arcDummy;
										},
										set: function (e) {
											this._arcDummy = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'snapVertex', {
										get: function () {
											return c.SystemParam.isMobileDevice ? 2 * this._snapVertex : this._snapVertex;
										},
										set: function (e) {
											this._snapVertex = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'snapEdge', {
										get: function () {
											return c.SystemParam.isMobileDevice ? 2 * this._snapEdge : this._snapEdge;
										},
										set: function (e) {
											this._snapVertex = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.lang = function (e) {
										var t = a.default[this.langMode].get(e);
										return this.enLangMode || !t ? a.default[i.en_us].get(e) : t;
									}),
									e
								);
							})();
						(t.DrawParams = u),
							(function (e) {
								(e.zh_cn = 'zh-CN'), (e.en_us = 'en-US'), (e.vi_vn = 'vi-VN');
							})((i = t.langMode || (t.langMode = {}))),
							(function (e) {
								(e.default = 'default'), (e.dim = 'dim');
							})((o = t.TopViewStyle || (t.TopViewStyle = {})));
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return r;
						});
						var r = (function () {
							function e(t, n) {
								void 0 === n && (n = e.now), (this.SchedulerAction = t), (this.now = n);
							}
							return (
								(e.prototype.schedule = function (e, t, n) {
									return void 0 === t && (t = 0), new this.SchedulerAction(this, e).schedule(n, t);
								}),
								(e.now = function () {
									return Date.now();
								}),
								e
							);
						})();
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'b', function () {
							return l;
						}),
							n.d(t, 'a', function () {
								return p;
							});
						var r = n(3),
							i = n(8),
							o = n(19),
							a = n(12),
							s = n(21);
						function l(e, t, n, r) {
							return function (i) {
								return i.lift(new h(e, t, n, r));
							};
						}
						var h = (function () {
								function e(e, t, n, r) {
									(this.keySelector = e),
										(this.elementSelector = t),
										(this.durationSelector = n),
										(this.subjectSelector = r);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(
											new c(
												e,
												this.keySelector,
												this.elementSelector,
												this.durationSelector,
												this.subjectSelector,
											),
										);
									}),
									e
								);
							})(),
							c = (function (e) {
								function t(t, n, r, i, o) {
									var a = e.call(this, t) || this;
									return (
										(a.keySelector = n),
										(a.elementSelector = r),
										(a.durationSelector = i),
										(a.subjectSelector = o),
										(a.groups = null),
										(a.attemptedToUnsubscribe = !1),
										(a.count = 0),
										a
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t;
										try {
											t = this.keySelector(e);
										} catch (e) {
											return void this.error(e);
										}
										this._group(e, t);
									}),
									(t.prototype._group = function (e, t) {
										var n = this.groups;
										n || (n = this.groups = new Map());
										var r,
											i = n.get(t);
										if (this.elementSelector)
											try {
												r = this.elementSelector(e);
											} catch (e) {
												this.error(e);
											}
										else r = e;
										if (!i) {
											(i = this.subjectSelector ? this.subjectSelector() : new s.a()), n.set(t, i);
											var o = new p(t, i, this);
											if ((this.destination.next(o), this.durationSelector)) {
												var a = void 0;
												try {
													a = this.durationSelector(new p(t, i));
												} catch (e) {
													return void this.error(e);
												}
												this.add(a.subscribe(new u(t, i, this)));
											}
										}
										i.closed || i.next(r);
									}),
									(t.prototype._error = function (e) {
										var t = this.groups;
										t &&
											(t.forEach(function (t, n) {
												t.error(e);
											}),
											t.clear()),
											this.destination.error(e);
									}),
									(t.prototype._complete = function () {
										var e = this.groups;
										e &&
											(e.forEach(function (e, t) {
												e.complete();
											}),
											e.clear()),
											this.destination.complete();
									}),
									(t.prototype.removeGroup = function (e) {
										this.groups.delete(e);
									}),
									(t.prototype.unsubscribe = function () {
										this.closed ||
											((this.attemptedToUnsubscribe = !0),
											0 === this.count && e.prototype.unsubscribe.call(this));
									}),
									t
								);
							})(i.a),
							u = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, n) || this;
									return (i.key = t), (i.group = n), (i.parent = r), i;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.complete();
									}),
									(t.prototype._unsubscribe = function () {
										var e = this.parent,
											t = this.key;
										(this.key = this.parent = null), e && e.removeGroup(t);
									}),
									t
								);
							})(i.a),
							p = (function (e) {
								function t(t, n, r) {
									var i = e.call(this) || this;
									return (i.key = t), (i.groupSubject = n), (i.refCountSubscription = r), i;
								}
								return (
									r.a(t, e),
									(t.prototype._subscribe = function (e) {
										var t = new o.a(),
											n = this.refCountSubscription,
											r = this.groupSubject;
										return n && !n.closed && t.add(new f(n)), t.add(r.subscribe(e)), t;
									}),
									t
								);
							})(a.a),
							f = (function (e) {
								function t(t) {
									var n = e.call(this) || this;
									return (n.parent = t), t.count++, n;
								}
								return (
									r.a(t, e),
									(t.prototype.unsubscribe = function () {
										var t = this.parent;
										t.closed ||
											this.closed ||
											(e.prototype.unsubscribe.call(this),
											(t.count -= 1),
											0 === t.count && t.attemptedToUnsubscribe && t.unsubscribe());
									}),
									t
								);
							})(o.a);
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ArcUtils = void 0);
						var i = r(n(0)),
							o = n(2),
							a = (function () {
								function e() {}
								return (
									(e.CreateArcFrom3Points = function (e, t, n) {
										var r = e.x * (t.y - n.y) - e.y * (t.x - n.x) + t.x * n.y - n.x * t.y,
											o =
												(e.x * e.x + e.y * e.y) * (n.y - t.y) +
												(t.x * t.x + t.y * t.y) * (e.y - n.y) +
												(n.x * n.x + n.y * n.y) * (t.y - e.y),
											a =
												(e.x * e.x + e.y * e.y) * (t.x - n.x) +
												(t.x * t.x + t.y * t.y) * (n.x - e.x) +
												(n.x * n.x + n.y * n.y) * (e.x - t.x),
											s =
												(e.x * e.x + e.y * e.y) * (n.x * t.y - t.x * n.y) +
												(t.x * t.x + t.y * t.y) * (e.x * n.y - n.x * e.y) +
												(n.x * n.x + n.y * n.y) * (t.x * e.y - e.x * t.y),
											l =
												(Math.sqrt((o * o + a * a - 4 * r * s) / (4 * r * r)),
												i.default.point(-o / (2 * r), -a / (2 * r))),
											h = i.default.Arc.arcSE(l, e, t, !0);
										return h.contains(n) || (h = i.default.Arc.arcSE(l, e, t, !1)), h;
									}),
									(e.edgeCrossPt = function (t, n, r) {
										return t instanceof i.default.Segment && n instanceof i.default.Segment
											? e.segmentSegmentPt(t, n)
											: t instanceof i.default.Segment && n instanceof i.default.Arc
											? e.segmentArcPt(t, n, r)
											: t instanceof i.default.Arc && n instanceof i.default.Segment
											? e.segmentArcPt(n, t, r, !1)
											: t instanceof i.default.Arc && n instanceof i.default.Arc
											? e.arcArcPt(t, n, r)
											: void 0;
									}),
									(e.segmentSegmentPt = function (e, t) {
										var n = i.default.line(e.start, e.end),
											r = i.default.line(t.start, t.end),
											o = n.intersect(r);
										if (1 === o.length) return o[0];
									}),
									(e.segmentArcPt = function (e, t, n, r) {
										void 0 === r && (r = !0);
										var o = i.default.arc(
												t.center,
												t.r.valueOf(),
												0,
												2 * Math.PI,
												t.counterClockwise,
											),
											a = i.default.line(e.start, e.end).intersect(o);
										if (0 !== a.length) {
											var s = a[0];
											if (a.length > 1) {
												var l = r ? e.end : e.start;
												n && (l = n),
													i.default.segment(l, a[0]).length > i.default.segment(l, a[1]).length &&
														(s = a[1]);
											}
											return s;
										}
									}),
									(e.arcArcPt = function (e, t, n) {
										var r = i.default.arc(
												e.center,
												e.r.valueOf(),
												0,
												2 * Math.PI,
												e.counterClockwise,
											),
											o = i.default.arc(
												t.center,
												t.r.valueOf(),
												0,
												2 * Math.PI,
												t.counterClockwise,
											),
											a = e.center.distanceTo(t.center)[0],
											s = e.r.valueOf() + t.r.valueOf();
										if (i.default.Utils.EQ_0(a - s))
											return i.default.segment(e.center, t.center).intersect(r)[0];
										var l = r.intersect(o);
										if (0 !== l.length) {
											var h = l[0];
											if (l.length > 1) {
												var c = n || e.end;
												i.default.segment(c, l[0]).length > i.default.segment(c, l[1]).length &&
													(h = l[1]);
											}
											return h;
										}
									}),
									(e.getArcWithSameChord = function (t, n, r) {
										var a,
											s,
											l = t.chordHeight(),
											h = i.default.segment(t.start, t.end).middle(),
											c = t.middle(),
											u = i.default.vector(h, c).normalize();
										r ? ((a = n), (s = t.end)) : ((a = t.start), (s = n));
										var p = i.default.segment(a, s).middle(),
											f = o.Utils.vecDirPt(u, l, p);
										return e.CreateArcFrom3Points(a, s, f);
									}),
									e
								);
							})();
						t.ArcUtils = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PolygonCreator = void 0);
						var o = i(n(0)),
							a = n(9),
							s = n(5),
							l = n(11),
							h = n(16),
							c = (function () {
								function e() {
									var e = this;
									(this.sizeConst = 800),
										(this.shapes = {}),
										(this.shapes[s.ToolType.frame_circle] = function (t) {
											return e.circleShape(t);
										}),
										(this.shapes[s.ToolType.frame_rectangle] = function (t) {
											return e.rectangleShape(t);
										}),
										(this.shapes[s.ToolType.door] = function (t) {
											return e.doorShape(t);
										}),
										(this.shapes[s.ToolType.frame_triangle] = function (t) {
											return e.triangleShape(t);
										}),
										(this.shapes[s.ToolType.frame_half_circle] = function (t) {
											return e.halfCircleShape(t);
										}),
										(this.shapes[s.ToolType.frame_quarter_circle] = function (t) {
											return e.quarterCircleShape(t, l.Direction.Right);
										}),
										(this.shapes[s.ToolType.frame_left_quarter_circle] = function (t) {
											return e.quarterCircleShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_gothic] = function (t) {
											return e.gothicShape(t);
										}),
										(this.shapes[s.ToolType.frame_octagon] = function (t) {
											return e.octagonShape(t);
										}),
										(this.shapes[s.ToolType.frame_springline] = function (t) {
											return e.springlineShape(t);
										}),
										(this.shapes[s.ToolType.frame_springline_flanker] = function (t) {
											return e.springlineFlankerShape(t);
										}),
										(this.shapes[s.ToolType.frame_springline_flanker_left] = function (t) {
											return e.springlineFlankerShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_isosceles_triangle] = function (t) {
											return e.isoscelesTriangleShape(t);
										}),
										(this.shapes[s.ToolType.frame_isosceles_trapezoid] = function (t) {
											return e.isoscelesTrapezoidShape(t);
										}),
										(this.shapes[s.ToolType.frame_hexagon] = function (t) {
											return e.hexagonShape(t);
										}),
										(this.shapes[s.ToolType.frame_hexagon2] = function (t) {
											return e.angledHexagonShape(t);
										}),
										(this.shapes[s.ToolType.frame_hexagon3] = function (t) {
											return e.angledHexagonShape2(t);
										}),
										(this.shapes[s.ToolType.frame_rounded_rectangle] = function (t) {
											return e.roundedRectangleShape(t);
										}),
										(this.shapes[s.ToolType.frame_parallelogram] = function (t) {
											return e.parallelogramShape(t);
										}),
										(this.shapes[s.ToolType.frame_diamond] = function (t) {
											return e.diamondShape(t);
										}),
										(this.shapes[s.ToolType.frame_trapezoid] = function (t) {
											return e.trapezoidShape(t, l.Direction.Up);
										}),
										(this.shapes[s.ToolType.frame_trapezoid_left] = function (t) {
											return e.trapezoidShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_trapezoid_down] = function (t) {
											return e.trapezoidShape(t, l.Direction.Down);
										}),
										(this.shapes[s.ToolType.frame_trapezoid_right] = function (t) {
											return e.trapezoidShape(t, l.Direction.Right);
										}),
										(this.shapes[s.ToolType.frame_peak_pentagon] = function (t) {
											return e.peakPentagonShape(t);
										}),
										(this.shapes[s.ToolType.frame_angled_pentagon] = function (t) {
											return e.angledPentagonShape(t);
										}),
										(this.shapes[s.ToolType.frame_angled_pentagon_right] = function (t) {
											return e.angledPentagonShape(t, l.Direction.Right);
										}),
										(this.shapes[s.ToolType.frame_angled_pentagon_down] = function (t) {
											return e.angledPentagonShape(t, l.Direction.Down);
										}),
										(this.shapes[s.ToolType.frame_angled_pentagon_left] = function (t) {
											return e.angledPentagonShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_hollow_side] = function (t) {
											return e.hollowSideShape(t, l.Direction.Right);
										}),
										(this.shapes[s.ToolType.frame_hollow_side_down] = function (t) {
											return e.hollowSideShape(t, l.Direction.Down);
										}),
										(this.shapes[s.ToolType.frame_hollow_side_left] = function (t) {
											return e.hollowSideShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_hollow_side_up] = function (t) {
											return e.hollowSideShape(t, l.Direction.Up);
										}),
										(this.shapes[s.ToolType.frame_hollow] = function (t) {
											return e.hollowShape(t, l.Direction.Up);
										}),
										(this.shapes[s.ToolType.frame_hollow2] = function (t) {
											return e.hollow2Shape(t);
										}),
										(this.shapes[s.ToolType.frame_hollow_left] = function (t) {
											return e.hollowShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_hollow_down] = function (t) {
											return e.hollowShape(t, l.Direction.Down);
										}),
										(this.shapes[s.ToolType.frame_hollow_right] = function (t) {
											return e.hollowShape(t, l.Direction.Right);
										}),
										(this.shapes[s.ToolType.frame_convex] = function (t) {
											return e.convexShape(t, l.Direction.Up);
										}),
										(this.shapes[s.ToolType.frame_convex_left] = function (t) {
											return e.convexShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_convex_down] = function (t) {
											return e.convexShape(t, l.Direction.Down);
										}),
										(this.shapes[s.ToolType.frame_convex_right] = function (t) {
											return e.convexShape(t, l.Direction.Right);
										}),
										(this.shapes[s.ToolType.frame_quarter_arch] = function (t) {
											return e.quarterArchShape(t);
										}),
										(this.shapes[s.ToolType.frame_extended_partial_arch] = function (t) {
											return e.extendedPartialArchShape(t);
										}),
										(this.shapes[s.ToolType.frame_quatrefoil] = function (t) {
											return e.quatrefoilShape(t);
										}),
										(this.shapes[s.ToolType.frame_three_dimensional_arc] = function (t) {
											return e.threeDimensionalArcShape(t);
										}),
										(this.shapes[s.ToolType.frame_ear] = function (t) {
											return e.earShape(t);
										}),
										(this.shapes[s.ToolType.frame_ear_left] = function (t) {
											return e.earShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_ear_up] = function (t) {
											return e.earShape(t, l.Direction.Up);
										}),
										(this.shapes[s.ToolType.frame_ear_down] = function (t) {
											return e.earShape(t, l.Direction.Down);
										}),
										(this.shapes[s.ToolType.frame_pointed_ear] = function (t) {
											return e.pointedEarShape(t);
										}),
										(this.shapes[s.ToolType.frame_pointed_ear_left] = function (t) {
											return e.pointedEarShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_pointed_ear_up] = function (t) {
											return e.pointedEarShape(t, l.Direction.Up);
										}),
										(this.shapes[s.ToolType.frame_pointed_ear_down] = function (t) {
											return e.pointedEarShape(t, l.Direction.Down);
										}),
										(this.shapes[s.ToolType.frame_single_track] = function (t) {
											return e.singleTrackShape(t);
										}),
										(this.shapes[s.ToolType.frame_single_track_left] = function (t) {
											return e.singleTrackShape(t, [l.Direction.Left]);
										}),
										(this.shapes[s.ToolType.frame_single_track_up] = function (t) {
											return e.singleTrackShape(t, [l.Direction.Up]);
										}),
										(this.shapes[s.ToolType.frame_single_track_down] = function (t) {
											return e.singleTrackShape(t, [l.Direction.Down]);
										}),
										(this.shapes[s.ToolType.frame_single_track_left_right] = function (t) {
											return e.singleTrackShape(t, [l.Direction.Left, l.Direction.Right]);
										}),
										(this.shapes[s.ToolType.frame_single_track_left_down] = function (t) {
											return e.singleTrackShape(t, [l.Direction.Left, l.Direction.Down]);
										}),
										(this.shapes[s.ToolType.frame_single_track_right_down] = function (t) {
											return e.singleTrackShape(t, [l.Direction.Right, l.Direction.Down]);
										}),
										(this.shapes[s.ToolType.frame_single_track_left_right_down] = function (t) {
											return e.singleTrackShape(t, [
												l.Direction.Left,
												l.Direction.Right,
												l.Direction.Down,
											]);
										}),
										(this.shapes[s.ToolType.frame_double_ears] = function (t) {
											return e.doubleEarsShape(t);
										}),
										(this.shapes[s.ToolType.frame_double_ears_down] = function (t) {
											return e.doubleEarsShape(t, l.Direction.Down);
										}),
										(this.shapes[s.ToolType.frame_double_ears_left] = function (t) {
											return e.doubleEarsShape(t, l.Direction.Left);
										}),
										(this.shapes[s.ToolType.frame_double_ears_right] = function (t) {
											return e.doubleEarsShape(t, l.Direction.Right);
										}),
										(this.shapes[s.ToolType.frame_wave] = function (t) {
											return e.waveShape(t);
										}),
										(this.shapes[s.ToolType.frame_onion] = function (t) {
											return e.gothicRectangleShape(t);
										}),
										(this.shapes[s.ToolType.frame_mosque] = function (t) {
											return e.mosqueShape(t);
										}),
										(this.shapes[s.ToolType.frame_half_kfc] = function (t) {
											return e.halfKfcShape(t);
										}),
										(this.shapes[s.ToolType.frame_half_kfc2] = function (t) {
											return e.halfKfc2Shape(t);
										}),
										(this.shapes[s.ToolType.frame_kfc] = function (t) {
											return e.kfcShape(t);
										}),
										(this.shapes[s.ToolType.frame_kfc2] = function (t) {
											return e.kfc2Shape(t);
										}),
										(this.shapes[s.ToolType.frame_kfc3] = function (t) {
											return e.kfc3Shape(t);
										}),
										(this.shapes[s.ToolType.frame_kfc4] = function (t) {
											return e.kfc4Shape(t);
										}),
										(this.shapes[s.ToolType.frame_ear2] = function (t) {
											return e.ear2Shape(t);
										}),
										(this.shapes[s.ToolType.frame_ear2_vertical] = function (t) {
											return e.ear2VerticalShape(t);
										}),
										(this.shapes[s.ToolType.frame_ear3] = function (t) {
											return e.ear3Shape(t);
										});
								}
								return (
									Object.defineProperty(e, 'Ins', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.create = function (e, t) {
										return this.shapes[e](t);
									}),
									(e.prototype.circleShape = function (e) {
										return new h.CirclePoly(e, this.sizeConst);
									}),
									(e.prototype.rectangleShape = function (e, t, n) {
										return (
											void 0 === t && (t = 3 * this.sizeConst),
											void 0 === n && (n = 2 * this.sizeConst),
											this.joinRelative(e, [
												o.default.vector(-t / 2, -n / 2),
												o.default.vector(0, n),
												o.default.vector(t, 0),
												o.default.vector(0, -n),
											])
										);
									}),
									(e.prototype.doorShape = function (e) {
										return new h.DoorPolygon(e, [l.Direction.Down]);
									}),
									(e.prototype.triangleShape = function (e) {
										var t = 2 * this.sizeConst;
										return this.joinRelative(e, [
											o.default.vector(-t / 2, -t / 2),
											o.default.vector(0, t),
											o.default.vector(t, 0),
										]);
									}),
									(e.prototype.halfCircleShape = function (e) {
										var t = this.sizeConst;
										return new h.HalfCirclePoly(e, t);
									}),
									(e.prototype.quarterCircleShape = function (e, t) {
										var n = this.sizeConst;
										return new h.QuarterCirclePoly(e, n, t);
									}),
									(e.prototype.gothicShape = function (e) {
										var t = 3 * this.sizeConst;
										return new h.GothicPoly(e, t);
									}),
									(e.prototype.gothicRectangleShape = function (e) {
										var t = 2 * this.sizeConst;
										return new h.OnionPoly(e, t);
									}),
									(e.prototype.octagonShape = function (e) {
										var t = 1.2 * this.sizeConst;
										return new h.RegularPoly(e, t, 8);
									}),
									(e.prototype.springlineShape = function (e) {
										var t = 1.5 * this.sizeConst;
										return new h.SpringlinePoly(e, (t / 3) * 5, t, t / 3);
									}),
									(e.prototype.springlineFlankerShape = function (e, t) {
										void 0 === t && (t = l.Direction.Right);
										var n = 2 * this.sizeConst,
											r = n / 1.5,
											i = r;
										if (t === l.Direction.Left)
											return this.joinRelativePro(
												[
													o.default.vector(0, n - i),
													o.default.vector(r, 0),
													o.default.vector(0, -n),
													[o.default.vector(-r, i), -(i - i / Math.SQRT2)],
												],
												e.translate(o.default.vector(-r / 2, -n / 2 + i)),
												!1,
											);
										var a = e.translate(o.default.vector(-r / 2, i - n / 2));
										return this.joinRelative(
											e,
											[
												o.default.vector(-r / 2, -n / 2),
												o.default.vector(0, n),
												o.default.vector(r, 0),
												o.default.vector(0, -(n - i)),
												o.default.arc(a, i, 0, -Math.PI / 2, !1),
											],
											!1,
										);
									}),
									(e.prototype.isoscelesTriangleShape = function (e) {
										var t = 2 * this.sizeConst,
											n = t;
										return new h.IsoscelesTrianglePoly(e, t, n);
									}),
									(e.prototype.isoscelesTrapezoidShape = function (e) {
										return new h.IsoscelesTrapezoidPoly(e);
									}),
									(e.prototype.hexagonShape = function (e) {
										var t = 1.5 * this.sizeConst;
										return new h.RegularPoly(e, t, 6);
									}),
									(e.prototype.angledHexagonShape = function (e) {
										var t = 3 * this.sizeConst,
											n = 2.4 * this.sizeConst,
											r = t / 4;
										return new h.AngledHexagonPoly(e, t, n, r, r);
									}),
									(e.prototype.angledHexagonShape2 = function (e) {
										var t = 3 * this.sizeConst,
											n = 2.4 * this.sizeConst,
											r = t / 4,
											i = r - (r / 2) * Math.sqrt(2),
											o = r - (r / 2) * Math.sqrt(2);
										return new h.AngledHexagon2Poly(e, t, n, r, r, i, o);
									}),
									(e.prototype.roundedRectangleShape = function (e) {
										var t = 3 * this.sizeConst,
											n = 2.4 * this.sizeConst,
											r = t / 4;
										return new h.RoundedRectanglePolygon(e, t, n, r);
									}),
									(e.prototype.parallelogramShape = function (e) {
										return new h.ParallelogramPoly(e, 2 * this.sizeConst);
									}),
									(e.prototype.diamondShape = function (e) {
										var t = 1.3 * this.sizeConst,
											n = 2 * t;
										return new h.DiamondPoly(e, t, n);
									}),
									(e.prototype.trapezoidShape = function (e, t) {
										return new h.TrapezoidPoly(e, t);
									}),
									(e.prototype.peakPentagonShape = function (e) {
										var t = 1.5 * this.sizeConst,
											n = 1.1 * t,
											r = t / 2;
										return new h.PeakPentagonPoly(e, t, n, r);
									}),
									(e.prototype.angledPentagonShape = function (e, t) {
										void 0 === t && (t = l.Direction.Up);
										var n = 1.5 * this.sizeConst,
											r = 1.6 * n,
											i = n / 2;
										return h.AngledPentagonPoly.create(e, n, r, n - i, r - i, t);
									}),
									(e.prototype.hollowSideShape = function (e, t) {
										return new h.HollowSidePoly(e, t, 3 * this.sizeConst, 2 * this.sizeConst);
									}),
									(e.prototype.hollowShape = function (e, t) {
										return new h.HollowPoly(e, t, 3 * this.sizeConst, 2 * this.sizeConst);
									}),
									(e.prototype.convexShape = function (e, t) {
										return new h.ConvexPoly(e, t, 3 * this.sizeConst, 1.5 * this.sizeConst);
									}),
									(e.prototype.quarterArchShape = function (e) {
										var t = 2 * this.sizeConst,
											n = (t / 4) * 3 * Math.sin(Math.PI / 4),
											r = e.translate(o.default.vector(-n, n));
										return this.joinAbsolute(
											r,
											[
												o.default.vector(0, -t),
												o.default.vector(0, -t / 2),
												o.default.arc(r, t / 2, -Math.PI / 2, 0),
												o.default.vector(t / 2, 0),
												o.default.vector(t, 0),
												o.default.arc(r, t, 0, -Math.PI / 2, !1),
											],
											!1,
										);
									}),
									(e.prototype.extendedPartialArchShape = function (e) {
										var t = 2.5 * this.sizeConst,
											n = t / 2,
											r = t - n,
											i = (Math.PI / 180) * 60,
											a = e.translate(
												o.default.vector(
													(r / 2 + n) * Math.sin(i / 2),
													(r / 2 + n) * Math.cos(i / 2),
												),
											),
											s = r * Math.cos(Math.PI / 2 - i),
											l = r * Math.sin(Math.PI / 2 - i),
											h = o.default.vector(-n * Math.sin(i), -n * Math.cos(i));
										return this.joinAbsolute(
											a,
											[
												h.subtract(o.default.vector(s, l)),
												h.subtract(o.default.vector(s, 0)),
												h,
												o.default.arc(a, n, 1.5 * Math.PI - i, 1.5 * Math.PI),
												o.default.vector(0, -n),
												o.default.vector(0, -t),
												o.default.arc(a, t, 1.5 * Math.PI, 1.5 * Math.PI - i, !1),
											],
											!1,
										);
									}),
									(e.prototype.quatrefoilShape = function (e) {
										return new h.QuatrefoilPoly(e, 2 * this.sizeConst);
									}),
									(e.prototype.threeDimensionalArcShape = function (e) {
										return new h.ThreeDimensionalArcPoly(e, 2 * this.sizeConst);
									}),
									(e.prototype.earShape = function (e, t) {
										void 0 === t && (t = l.Direction.Right);
										var n = t === l.Direction.Up || t === l.Direction.Down,
											r = new h.EarPolygon(e, n);
										return (
											t === l.Direction.Left
												? (r = r.flipX())
												: t === l.Direction.Down && (r = r.flipY()),
											r
										);
									}),
									(e.prototype.pointedEarShape = function (e, t) {
										return void 0 === t && (t = l.Direction.Right), new h.PointedEarPolygon(e, t);
									}),
									(e.prototype.singleTrackShape = function (e, t) {
										return (
											void 0 === t && (t = [l.Direction.Right]), new h.SingleTrackPolygon(e, t)
										);
									}),
									(e.prototype.doubleEarsShape = function (e, t) {
										return void 0 === t && (t = l.Direction.Up), new h.DoubleEarsPolygon(e, t);
									}),
									(e.prototype.halfKfcShape = function (e) {
										return new h.HalfKfcPolygon(e);
									}),
									(e.prototype.halfKfc2Shape = function (e) {
										return new h.HalfKfc2Polygon(e);
									}),
									(e.prototype.kfcShape = function (e) {
										return new h.KfcPolygon(e);
									}),
									(e.prototype.kfc2Shape = function (e) {
										return new h.Kfc2Polygon(e);
									}),
									(e.prototype.kfc3Shape = function (e) {
										return new h.Kfc3Polygon(e);
									}),
									(e.prototype.kfc4Shape = function (e) {
										return new h.Kfc4Polygon(h.Kfc4Polygon.initEdges(e, 2500, 600, 1600, 500));
									}),
									(e.prototype.hollow2Shape = function (e) {
										return new h.Hollow2Polygon(
											h.Hollow2Polygon.initEdges(e, 2400, 880, -1600, -960),
										);
									}),
									(e.prototype.ear2Shape = function (e) {
										return new h.Ear2Polygon(e);
									}),
									(e.prototype.ear2VerticalShape = function (e) {
										return new h.Ear2Polygon(e, !0);
									}),
									(e.prototype.ear3Shape = function (e) {
										return new h.Ear3Polygon(e);
									}),
									(e.prototype.waveShape = function (e) {
										return new h.WavePoly(
											e,
											e.translate(-this.sizeConst, (-this.sizeConst / 2) * 3),
											3 * this.sizeConst,
											2 * this.sizeConst,
										);
									}),
									(e.prototype.mosqueShape = function (e) {
										var t = this.sizeConst / 8;
										return new h.MosquePoly(
											e,
											e.translate(-10 * t, -7 * t),
											24 * t,
											10 * t,
											12 * t,
										);
									}),
									(e.prototype.joinRelative = function (e, t, n) {
										void 0 === n && (n = !0);
										for (
											var r = new h.WinPolygon(), i = e.translate(t[0]), a = 1;
											a < t.length;
											a++
										)
											if (t[a] instanceof o.default.Arc) r.add(t[a]);
											else {
												var s = i.translate(t[a]);
												r.add(o.default.segment(i, s)), (i = s);
											}
										return n ? r.doneSmart() : r.done(), r;
									}),
									(e.prototype.joinRelativePro = function (e, t, n) {
										var i, s;
										void 0 === t && (t = o.default.point()), void 0 === n && (n = !0);
										var l = new h.WinPolygon(),
											c = t,
											u = o.default.point();
										try {
											for (var p = r(e), f = p.next(); !f.done; f = p.next()) {
												var d = f.value,
													g = d instanceof o.default.Vector ? [d, void 0] : d;
												u = c.translate(g[0]);
												var y = o.default.segment(c, u);
												if (void 0 === g[1] || 0 === g[1]) l.add(y);
												else {
													var m = y.tangentInStart(),
														v = c.translate(
															m.multiply(y.length / 2).add(m.rotate90CW().multiply(g[1])),
														);
													l.add(a.ArcUtils.CreateArcFrom3Points(c, u, v));
												}
												c = u;
											}
										} catch (e) {
											i = {
												error: e,
											};
										} finally {
											try {
												f && !f.done && (s = p.return) && s.call(p);
											} finally {
												if (i) throw i.error;
											}
										}
										return n ? l.doneSmart() : l.done(), l;
									}),
									(e.prototype.joinAbsolute = function (e, t, n) {
										void 0 === n && (n = !0);
										for (var r, i = new h.WinPolygon(), a = 0; a < t.length; a++)
											if (t[a] instanceof o.default.Arc)
												i.add(t[a]), ++a < t.length && (r = e.translate(t[a]));
											else {
												var s = e.translate(t[a]);
												r ? (i.add(o.default.segment(r, s)), (r = s)) : (r = s);
											}
										return n ? i.doneSmart() : i.done(), i;
									}),
									(e.prototype.joinPointsWithSegment = function (e, t, n) {
										if (
											(void 0 === t && (t = o.default.vector(0, 0)),
											void 0 === n && (n = !0),
											e.length < 2)
										)
											throw new Error('cannot join a single point');
										var r = [];
										n && e.push(e[0]);
										for (var i = 1; i < e.length; i++) r.push(o.default.segment(e[i - 1], e[i]));
										return r.map(function (e) {
											return e.translate(t);
										});
									}),
									e
								);
							})();
						t.PolygonCreator = c;
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return h;
						}),
							n.d(t, 'b', function () {
								return u;
							});
						var r = n(3),
							i = n(21),
							o = n(12),
							a = n(8),
							s = n(19),
							l = n(67),
							h = (function (e) {
								function t(t, n) {
									var r = e.call(this) || this;
									return (
										(r.source = t),
										(r.subjectFactory = n),
										(r._refCount = 0),
										(r._isComplete = !1),
										r
									);
								}
								return (
									r.a(t, e),
									(t.prototype._subscribe = function (e) {
										return this.getSubject().subscribe(e);
									}),
									(t.prototype.getSubject = function () {
										var e = this._subject;
										return (
											(e && !e.isStopped) || (this._subject = this.subjectFactory()), this._subject
										);
									}),
									(t.prototype.connect = function () {
										var e = this._connection;
										return (
											e ||
												((this._isComplete = !1),
												(e = this._connection = new s.a()).add(
													this.source.subscribe(new p(this.getSubject(), this)),
												),
												e.closed
													? ((this._connection = null), (e = s.a.EMPTY))
													: (this._connection = e)),
											e
										);
									}),
									(t.prototype.refCount = function () {
										return Object(l.a)()(this);
									}),
									t
								);
							})(o.a),
							c = h.prototype,
							u = {
								operator: {
									value: null,
								},
								_refCount: {
									value: 0,
									writable: !0,
								},
								_subject: {
									value: null,
									writable: !0,
								},
								_connection: {
									value: null,
									writable: !0,
								},
								_subscribe: {
									value: c._subscribe,
								},
								_isComplete: {
									value: c._isComplete,
									writable: !0,
								},
								getSubject: {
									value: c.getSubject,
								},
								connect: {
									value: c.connect,
								},
								refCount: {
									value: c.refCount,
								},
							},
							p = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.connectable = n), r;
								}
								return (
									r.a(t, e),
									(t.prototype._error = function (t) {
										this._unsubscribe(), e.prototype._error.call(this, t);
									}),
									(t.prototype._complete = function () {
										(this.connectable._isComplete = !0),
											this._unsubscribe(),
											e.prototype._complete.call(this);
									}),
									(t.prototype._unsubscribe = function () {
										var e = this.connectable;
										if (e) {
											this.connectable = null;
											var t = e._connection;
											(e._refCount = 0),
												(e._subject = null),
												(e._connection = null),
												t && t.unsubscribe();
										}
									}),
									t
								);
							})(i.b);
						a.a;
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return a;
						});
						var r = n(3),
							i = n(21),
							o = n(43),
							a = (function (e) {
								function t(t) {
									var n = e.call(this) || this;
									return (n._value = t), n;
								}
								return (
									r.a(t, e),
									Object.defineProperty(t.prototype, 'value', {
										get: function () {
											return this.getValue();
										},
										enumerable: !0,
										configurable: !0,
									}),
									(t.prototype._subscribe = function (t) {
										var n = e.prototype._subscribe.call(this, t);
										return n && !n.closed && t.next(this._value), n;
									}),
									(t.prototype.getValue = function () {
										if (this.hasError) throw this.thrownError;
										if (this.closed) throw new o.a();
										return this._value;
									}),
									(t.prototype.next = function (t) {
										e.prototype.next.call(this, (this._value = t));
									}),
									t
								);
							})(i.a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'b', function () {
							return a;
						}),
							n.d(t, 'a', function () {
								return l;
							});
						var r = n(3),
							i = n(8),
							o = n(40);
						function a(e, t) {
							return (
								void 0 === t && (t = 0),
								function (n) {
									return n.lift(new s(e, t));
								}
							);
						}
						var s = (function () {
								function e(e, t) {
									void 0 === t && (t = 0), (this.scheduler = e), (this.delay = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new l(e, this.scheduler, this.delay));
									}),
									e
								);
							})(),
							l = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = 0);
									var i = e.call(this, t) || this;
									return (i.scheduler = n), (i.delay = r), i;
								}
								return (
									r.a(t, e),
									(t.dispatch = function (e) {
										var t = e.notification,
											n = e.destination;
										t.observe(n), this.unsubscribe();
									}),
									(t.prototype.scheduleMessage = function (e) {
										this.destination.add(
											this.scheduler.schedule(t.dispatch, this.delay, new h(e, this.destination)),
										);
									}),
									(t.prototype._next = function (e) {
										this.scheduleMessage(o.a.createNext(e));
									}),
									(t.prototype._error = function (e) {
										this.scheduleMessage(o.a.createError(e)), this.unsubscribe();
									}),
									(t.prototype._complete = function () {
										this.scheduleMessage(o.a.createComplete()), this.unsubscribe();
									}),
									t
								);
							})(i.a),
							h = (function () {
								return function (e, t) {
									(this.notification = e), (this.destination = t);
								};
							})();
					},
					function (e, t, n) {
						'use strict';
						function r() {
							return (
								Error.call(this),
								(this.message = 'Timeout has occurred'),
								(this.name = 'TimeoutError'),
								this
							);
						}
						n.d(t, 'a', function () {
							return i;
						}),
							(r.prototype = Object.create(Error.prototype));
						var i = r;
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(72);
						function i() {
							return Object(r.a)(1);
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return s;
						});
						var r = n(12),
							i = n(25),
							o = n(72),
							a = n(32);
						function s() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							var n = Number.POSITIVE_INFINITY,
								s = null,
								l = e[e.length - 1];
							return (
								Object(i.a)(l)
									? ((s = e.pop()),
									  e.length > 1 && 'number' == typeof e[e.length - 1] && (n = e.pop()))
									: 'number' == typeof l && (n = e.pop()),
								null === s && 1 === e.length && e[0] instanceof r.a
									? e[0]
									: Object(o.a)(n)(Object(a.a)(e, s))
							);
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return l;
						});
						var r = n(3),
							i = n(24),
							o = n(32),
							a = n(17),
							s = n(15);
						function l() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							if (1 === e.length) {
								if (!Object(i.a)(e[0])) return e[0];
								e = e[0];
							}
							return Object(o.a)(e, void 0).lift(new h());
						}
						var h = (function () {
								function e() {}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new c(e));
									}),
									e
								);
							})(),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.hasFirst = !1), (n.observables = []), (n.subscriptions = []), n;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.observables.push(e);
									}),
									(t.prototype._complete = function () {
										var e = this.observables,
											t = e.length;
										if (0 === t) this.destination.complete();
										else {
											for (var n = 0; n < t && !this.hasFirst; n++) {
												var r = e[n],
													i = Object(s.a)(this, r, r, n);
												this.subscriptions && this.subscriptions.push(i), this.add(i);
											}
											this.observables = null;
										}
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										if (!this.hasFirst) {
											this.hasFirst = !0;
											for (var o = 0; o < this.subscriptions.length; o++)
												if (o !== n) {
													var a = this.subscriptions[o];
													a.unsubscribe(), this.remove(a);
												}
											this.subscriptions = null;
										}
										this.destination.next(t);
									}),
									t
								);
							})(a.a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return s;
						});
						var r = n(12),
							i = n(23),
							o = n(55),
							a = n(25);
						function s(e, t, n) {
							void 0 === e && (e = 0);
							var s = -1;
							return (
								Object(o.a)(t) ? (s = Number(t) < 1 ? 1 : Number(t)) : Object(a.a)(t) && (n = t),
								Object(a.a)(n) || (n = i.a),
								new r.a(function (t) {
									var r = Object(o.a)(e) ? e : +e - n.now();
									return n.schedule(l, r, {
										index: 0,
										period: s,
										subscriber: t,
									});
								})
							);
						}
						function l(e) {
							var t = e.index,
								n = e.period,
								r = e.subscriber;
							if ((r.next(t), !r.closed)) {
								if (-1 === n) return r.complete();
								(e.index = t + 1), this.schedule(e, n);
							}
						}
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return o;
						});
						var r = n(3),
							i = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.scheduler = t), (r.work = n), r;
								}
								return (
									r.a(t, e),
									(t.prototype.schedule = function (t, n) {
										return (
											void 0 === n && (n = 0),
											n > 0
												? e.prototype.schedule.call(this, t, n)
												: ((this.delay = n), (this.state = t), this.scheduler.flush(this), this)
										);
									}),
									(t.prototype.execute = function (t, n) {
										return n > 0 || this.closed
											? e.prototype.execute.call(this, t, n)
											: this._execute(t, n);
									}),
									(t.prototype.requestAsyncId = function (t, n, r) {
										return (
											void 0 === r && (r = 0),
											(null !== r && r > 0) || (null === r && this.delay > 0)
												? e.prototype.requestAsyncId.call(this, t, n, r)
												: t.flush(this)
										);
									}),
									t
								);
							})(n(54).a),
							o = new ((function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return r.a(t, e), t;
							})(n(52).a))(i);
					},
					function (e, t, n) {
						'use strict';
						function r(e) {
							return null != e && 'object' == typeof e;
						}
						n.d(t, 'a', function () {
							return r;
						});
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(3),
							i = (function (e) {
								function t(t, n) {
									var r = e.call(this) || this;
									return (r.subject = t), (r.subscriber = n), (r.closed = !1), r;
								}
								return (
									r.a(t, e),
									(t.prototype.unsubscribe = function () {
										if (!this.closed) {
											this.closed = !0;
											var e = this.subject,
												t = e.observers;
											if (
												((this.subject = null), t && 0 !== t.length && !e.isStopped && !e.closed)
											) {
												var n = t.indexOf(this.subscriber);
												-1 !== n && t.splice(n, 1);
											}
										}
									}),
									t
								);
							})(n(19).a);
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return r;
						});
						var r = function (e) {
							return function (t) {
								for (var n = 0, r = e.length; n < r && !t.closed; n++) t.next(e[n]);
								t.closed || t.complete();
							};
						};
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return f;
						});
						var r = n(12),
							i = n(99),
							o = n(104),
							a = n(105),
							s = n(101),
							l = n(102),
							h = n(103),
							c = n(97),
							u = n(41),
							p = n(42),
							f = function (e) {
								if (e instanceof r.a)
									return function (t) {
										return e._isScalar ? (t.next(e.value), void t.complete()) : e.subscribe(t);
									};
								if (e && 'function' == typeof e[p.a]) return Object(s.a)(e);
								if (Object(l.a)(e)) return Object(i.a)(e);
								if (Object(h.a)(e)) return Object(o.a)(e);
								if (e && 'function' == typeof e[u.a]) return Object(a.a)(e);
								var t = Object(c.a)(e) ? 'an invalid object' : "'" + e + "'";
								throw new TypeError(
									'You provided ' +
										t +
										' where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.',
								);
							};
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(42),
							i = function (e) {
								return function (t) {
									var n = e[r.a]();
									if ('function' != typeof n.subscribe)
										throw new TypeError(
											'Provided object does not correctly implement Symbol.observable',
										);
									return n.subscribe(t);
								};
							};
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return r;
						});
						var r = function (e) {
							return e && 'number' == typeof e.length && 'function' != typeof e;
						};
					},
					function (e, t, n) {
						'use strict';
						function r(e) {
							return e && 'function' != typeof e.subscribe && 'function' == typeof e.then;
						}
						n.d(t, 'a', function () {
							return r;
						});
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(57),
							i = function (e) {
								return function (t) {
									return (
										e
											.then(
												function (e) {
													t.closed || (t.next(e), t.complete());
												},
												function (e) {
													return t.error(e);
												},
											)
											.then(null, r.a),
										t
									);
								};
							};
					},
					function (e, t, n) {
						'use strict';
						n.d(t, 'a', function () {
							return i;
						});
						var r = n(41),
							i = function (e) {
								return function (t) {
									for (var n = e[r.a](); ; ) {
										var i = n.next();
										if (i.done) {
											t.complete();
											break;
										}
										if ((t.next(i.value), t.closed)) break;
									}
									return (
										'function' == typeof n.return &&
											t.add(function () {
												n.return && n.return();
											}),
										t
									);
								};
							};
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditSplitterTool = void 0);
						var s = a(n(0)),
							l = n(5),
							h = n(6),
							c = n(11),
							u = n(2),
							p = n(13),
							f = n(1),
							d = (function (e) {
								function t(t) {
									var n = e.call(this, l.ToolType.editSplitter, t) || this;
									return (
										(n.view = t),
										(n.prevPt = new s.default.Point()),
										(n.dragOffset = s.default.vector()),
										(n.initOffset = s.default.vector()),
										(n.barEdgeIdx = -1),
										(n.viewUtil = new c.FrameUtil(t)),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'bar', {
										get: function () {
											return this.vshape.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										if (
											(e.prototype.dragstart.call(this, t),
											(this.vshape = t.target),
											(this.prevPt = this.curPt),
											(this.frame = this.bar.top),
											this.bar.where === f.ShapeType.Frame && this.bar.topFrame.lockDragSize)
										)
											this.vshape.draggable(!1);
										else {
											this.bar.where === f.ShapeType.Frame &&
												(this.barEdgeIdx = this.bar.polygon.polyId.idx);
											var n = this.bar.polygon.spLine.line;
											if (n instanceof s.default.Line) {
												var r = this.curPt.projectionOn(n);
												this.initOffset = s.default.vector(this.curPt, r);
											}
										}
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											requestAnimationFrame(function () {
												void 0 !== n.vshape &&
													((n.magneticPoint = n.detectSnaps(n.bar.polygon.mulShape, n.bar)),
													n.doTask());
											});
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.vshape &&
											(this.magneticPoint && (this.hideSnaps(), (this.curPt = this.magneticPoint)),
											this.doTask(!0),
											this.view.mometoManager.checkPoint(),
											u.ShapeHelper.restoreShapeMatrix(this.vshape),
											(this.vshape = void 0),
											p.ShapeActor.emitStructureChanged(this.view),
											e.prototype.mousedone.call(this, t));
									}),
									(t.prototype.doTask = function (e) {
										void 0 === e && (e = !1),
											e && this.magneticPoint
												? ((this.dragOffset = s.default.vector(this.prevPt, this.magneticPoint)),
												  (this.dragOffset = this.dragOffset.subtract(this.initOffset)))
												: this.roundDragOffset();
										try {
											this.view.shapeManager.drag(this.bar, this.dragOffset, this.prevPt, !e),
												t.handleExtraDim(this.frame, this.view),
												this.handleCornerJoiner(e),
												(this.prevPt = this.curPt),
												this.view.eventBus.emit({
													type: h.EventType.drag_in_process,
													payload: {
														moving: e,
													},
												});
										} catch (t) {
											if (u.Utils.isFlattenError(t))
												return void (
													e &&
													(this.view.mometoManager.checkPoint(), this.view.mometoManager.undo(!0))
												);
											throw t;
										}
									}),
									(t.prototype.roundDragOffset = function () {
										this.frame.polygon instanceof f.CirclePoly &&
										this.bar.where === f.ShapeType.Frame
											? this.roundDragOffsetForCircle()
											: this.roundDragOffsetForNormal();
									}),
									(t.prototype.roundDragOffsetForNormal = function () {
										(this.dragOffset = s.default.vector(this.prevPt, this.curPt)),
											(this.dragOffset = s.default.vector(
												Math.round(this.dragOffset.x),
												Math.round(this.dragOffset.y),
											)),
											(this.curPt = this.prevPt.translate(this.dragOffset));
									}),
									(t.prototype.roundDragOffsetForCircle = function () {
										var e = this.frame.polygon,
											t = e.cpt,
											n = s.default.vector(t, this.curPt),
											r = Math.round(2 * n.length - 2 * e.radius);
										(this.dragOffset = n.normalize().multiply(r / 2)),
											(this.prevPt = t.translate(n.normalize().multiply(e.radius))),
											(this.curPt = this.prevPt.translate(this.dragOffset));
									}),
									(t.handleExtraDim = function (e, t) {
										if (void 0 !== e) {
											var n = e.view.shapeManager.shapem.findIndex(function (t) {
												return t.id === e.id;
											});
											e.view.shapeManager.shapem.forEach(function (e, r) {
												var i, a;
												if (r !== n) {
													var s = [];
													try {
														for (
															var l = o(e.extraDimManager.extraDims), h = l.next();
															!h.done;
															h = l.next()
														) {
															var c = h.value;
															2 === c.frameRelation.length &&
																c.frameRelation[0].frameIdx !== c.frameRelation[1].frameIdx &&
																((c.frameRelation[0].frameIdx === n &&
																	c.frameRelation[1].frameIdx === r) ||
																	(c.frameRelation[0].frameIdx === r &&
																		c.frameRelation[1].frameIdx === n)) &&
																s.push(c);
														}
													} catch (e) {
														i = {
															error: e,
														};
													} finally {
														try {
															h && !h.done && (a = l.return) && a.call(l);
														} finally {
															if (i) throw i.error;
														}
													}
													s.forEach(function (n) {
														n.updatePoly(e.polygon), n.draw(t);
													});
												}
											});
										}
									}),
									(t.prototype.handleCornerJoiner = function (e) {
										if (e && this.frame) {
											var t = this.viewUtil.getOneCoincidedCornerJoiner(this.frame);
											if (t) return t.draw(this.view), void t.skewFrame(this.view);
											var n = this.frame.gshape.parent;
											if (n) {
												var r = n.getAttr('data');
												if (r && r.hasOwnProperty('cornerJoiner')) {
													var i = r.cornerJoiner.topViewGShape;
													if (!i) return;
													if (!i.getAttr('data')) return;
													u.ShapeHelper.restoreShapeMatrix(i),
														i.children.forEach(function (e) {
															var t = e.getAttr('data');
															t && t.parent && t.parent.gshape && e.moveTo(t.parent.gshape);
														}),
														r.cornerJoiner.draw(this.view),
														r.cornerJoiner.skewFrame(this.view);
												}
											}
										}
									}),
									t
								);
							})(l.Tool);
						t.EditSplitterTool = d;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PolyId = void 0);
						var r = n(112),
							i = (function () {
								function e(e, t) {
									void 0 === e && (e = -1),
										void 0 === t && (t = -1),
										(this.idx = e),
										(this.pos = t);
								}
								return (
									(e.prototype.posBySide = function (e) {
										e === r.LineSide.Left && (this.pos = 0),
											e === r.LineSide.Right && (this.pos = 1);
									}),
									(e.createByJson = function (t) {
										return new e(t.idx, t.pos);
									}),
									(e.prototype.equalTo = function (e) {
										return this.idx === e.idx && this.pos === e.pos;
									}),
									(e.prototype.clone = function () {
										return new e(this.idx, this.pos);
									}),
									(e.prototype.toJSON = function () {
										return {
											idx: this.idx,
											pos: this.pos,
										};
									}),
									(e.prototype.deserialize = function (e) {
										return (this.idx = e.idx), (this.pos = e.pos), this;
									}),
									e
								);
							})();
						t.PolyId = i;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.IDimInfoManager = t.dimModeEnum = void 0);
						var r,
							i = n(1),
							o = n(1);
						!(function (e) {
							(e.normal = 'normal'), (e.calculate = 'calculate'), (e.order = 'order');
						})((r = t.dimModeEnum || (t.dimModeEnum = {})));
						var a = (function () {
							function e(e) {
								(this.view = e), (this._mode = r.normal);
							}
							return (
								Object.defineProperty(e.prototype, 'mode', {
									get: function () {
										return this._mode;
									},
									set: function (e) {
										e !== this._mode &&
											(e === r.calculate &&
												(this.initDimName(), this.view.mometoManager.checkPoint()),
											(this._mode = e),
											this.view.shapeManager.shapem.forEach(function (e) {
												e instanceof i.ThreedArcFrame && (e.updatePoly(), e.draw(e.view));
											}),
											this.view.centerShapes());
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.initDimName = function () {
									var e = this,
										t = this.IDimInfos;
									t.forEach(function (n) {
										return e.initName(n, t);
									});
								}),
								(e.prototype.getIDimInfoValue = function (e) {
									var t = this.IDimInfos.find(function (t) {
										return t.name === e;
									});
									return void 0 === t ? 0 : t.value;
								}),
								(e.prototype.updateDimByName = function (e, t) {
									'' !== e.trim() &&
										(t <= 0 ||
											this.IDimInfos.filter(function (t) {
												return t.name === e;
											}).forEach(function (e) {
												e.dimShow && e.applyDiff(t);
											}));
								}),
								(e.prototype.initName = function (e, t) {
									(e.name = e.name.trim()),
										'' === e.name &&
											(e instanceof o.ExtraDim
												? (e.name = this.getName('e', e, t))
												: e instanceof o.DimInfo
												? ((e.type !== o.DimType.Line && e.type !== o.DimType.Chord) ||
														(e.name = this.getName('f', e, t)),
												  e.type === o.DimType.Mullion && (e.name = this.getName('m', e, t)),
												  e.type === o.DimType.MullionProjection &&
														(e.name = this.getName('p', e, t)),
												  e.type === o.DimType.InnerMullion && (e.name = this.getName('i', e, t)),
												  e.type === o.DimType.InnerSpace && (e.name = this.getName('s', e, t)))
												: e instanceof i.TextDim
												? (e.name = this.getName('t', e, t))
												: (e.name = this.getName('h', e, t)));
								}),
								Object.defineProperty(e.prototype, 'IDimInfos', {
									get: function () {
										var e = new Set();
										return (
											this.view.shapeManager.shapem.forEach(function (t) {
												t.getIDimInfo(!0).forEach(function (t) {
													return e.add(t);
												});
											}),
											this.view.shapeManager.walls.forEach(function (t) {
												return t.dims.forEach(function (t) {
													return e.add(t);
												});
											}),
											this.view.shapeManager.couples.forEach(function (t) {
												return e.add(t.dimForWidth);
											}),
											Array.from(e)
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'visualIDimInfos', {
									get: function () {
										var e = [];
										return (
											this.IDimInfos.filter(function (e) {
												return e.dimShow && e.value > 0;
											}).forEach(function (t) {
												e.findIndex(function (e) {
													return e.name === t.name;
												}) >= 0 || ((t.value = Math.round(100 * t.value) / 100), e.push(t));
											}),
											e
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.getName = function (e, t, n) {
									if ('' !== t.name) return t.name;
									var r = new RegExp(e + '(\\d+)'),
										i = n.filter(function (e) {
											return r.test(e.name);
										}),
										o = 0;
									return (
										i.forEach(function (e) {
											var t = +r.exec(e.name)[1];
											t > o && (o = t);
										}),
										'' + e + (o + 1)
									);
								}),
								e
							);
						})();
						t.IDimInfoManager = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrameSettings = void 0);
						var s = a(n(0)),
							l = n(5),
							h = n(2),
							c = n(11),
							u = n(1),
							p = (function () {
								function e(e, t) {
									(this.frame = e), (this.view = t);
								}
								return (
									(e.prototype.copyAndPaste = function () {
										var e = this.frame.toJSON(),
											t = new u.Frame(new u.WinPolygon(), this.view);
										this.view.shapeManager.shapem.push(t), t.deserialize(e, this.view);
										var n = Number.MIN_VALUE;
										this.view.shapeManager.shapem.forEach(function (e) {
											var t = e.polygon.box.xmax;
											t > n && (n = t);
										});
										var r = t.polygon.box.xmin;
										t.translate(s.default.vector(n - r + 300, 0)),
											t.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									}),
									Object.defineProperty(e.prototype, 'jointWay', {
										get: function () {
											return this.frame.frameManager.getJointWay(0);
										},
										set: function (e) {
											var t = this;
											this.frame.polygon.edges.forEach(function (n, r) {
												t.frame.frameManager.ejw[r] = e;
											}),
												this.frame.frameManager.recreated(this.frame.polygon, this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'turned', {
										get: function () {
											return this.frame.turned;
										},
										set: function (e) {
											(this.frame.turned = e),
												this.frame.updateLabel(),
												this.frame.label.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'topViewHidden', {
										get: function () {
											return this.frame.topView.hidden;
										},
										set: function (e) {
											(this.frame.topView.hidden = e),
												this.frame.topView.updatePoly(),
												u.TopView.optimize(this.view.shapeManager.shapem),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lockDragSize', {
										get: function () {
											return this.frame.lockDragSize;
										},
										set: function (e) {
											this.frame.lockDragSize !== e &&
												((this.frame.lockDragSize = e), this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.generateSingleFrameWall = function (e) {
										var t = this;
										if (e.polygon.isRectangle()) {
											var n,
												i,
												o = e.polygon.box.center,
												a = [];
											this.view.shapeManager.shapem
												.filter(function (t) {
													return t.id !== e.id;
												})
												.forEach(function (e) {
													e.polygon.edges.forEach(function (e) {
														e instanceof s.default.Segment && a.push(e);
													});
												}),
												this.view.shapeManager.couples.forEach(function (e) {
													e.polygon.edges.forEach(function (e) {
														e instanceof s.default.Segment && a.push(e);
													});
												});
											var u = !1,
												p = !1;
											e.polygon.edges.forEach(function (s, f) {
												if (
													!(function (e, t) {
														var n, i;
														try {
															for (var o = r(t), a = o.next(); !a.done; a = o.next()) {
																var s = a.value;
																if (h.Utils.segCoincide(e, s)) return !0;
															}
														} catch (e) {
															n = {
																error: e,
															};
														} finally {
															try {
																a && !a.done && (i = o.return) && i.call(o);
															} finally {
																if (n) throw n.error;
															}
														}
														return !1;
													})(s, a)
												) {
													var d = {
															based: o,
															edge: s,
															distance: 100,
															orientation: e.polygon.orientation,
														},
														g = l.WallTool.generateWall(t.view.shapeManager.walls, d);
													if (void 0 !== g)
														if (h.Utils.isSegVertical(d.edge))
															d.edge.middle().x < d.based.x ? (n = g) : (i = g);
														else {
															if (
																c.EdgeFinder.Instance.findDirection(e.polygon, f) === c.Direction.Up
															)
																return;
															t.view.shapeManager.addWall(g),
																d.edge.middle().y < d.based.y ? (u = !0) : (p = !0);
														}
													else
														h.Utils.isSegHorizontal(d.edge) &&
															(d.edge.middle().y < d.based.y ? (u = !0) : (p = !0));
												}
											}),
												u &&
													(n && (n = n.dragEdge(3, s.default.vector(0, -500))),
													i && (i = i.dragEdge(1, s.default.vector(0, -500))));
											var f,
												d = 500;
											if (p) {
												var g = c.EdgeFinder.Instance.find(
													c.Direction.Up,
													e.polygon.edges,
													e.polygon.orientation,
												);
												if (g) {
													var y = this.view.shapeManager.walls.find(function (e) {
														return e.polygon.edges.some(function (e) {
															return 2 === e.intersect(g).length;
														});
													});
													y && (d = y.polygon.box.ymax - y.box.ymin);
												}
												n && (n = n.dragEdge(1, s.default.vector(0, d))),
													i && (i = i.dragEdge(3, s.default.vector(0, d)));
											}
											n &&
												(this.view.shapeManager.addWall(n),
												((f =
													this.view.shapeManager.walls[
														this.view.shapeManager.walls.length - 1
													]).dimForHeight.hidden = !0),
												f.dimForHeight.updatePoly(),
												f.dimForHeight.draw(this.view)),
												i &&
													(this.view.shapeManager.addWall(i),
													((f =
														this.view.shapeManager.walls[
															this.view.shapeManager.walls.length - 1
														]).dimForHeight.hidden = !0),
													f.dimForHeight.updatePoly(),
													f.dimForHeight.draw(this.view));
										}
									}),
									(e.prototype.generateWall = function () {
										var e = this,
											t = new c.FrameUtil(this.view)
												.getFrameConnectedComponents(this.frame)
												.filter(function (e) {
													return e instanceof u.Frame;
												});
										t.push(this.frame),
											t.forEach(function (t) {
												e.generateSingleFrameWall(t);
											}),
											this.view.mometoManager.checkPoint();
									}),
									Object.defineProperty(e.prototype, 'isRectangle', {
										get: function () {
											return this.frame.polygon.isRectangle();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isKfcPoly', {
										get: function () {
											return this.frame.polygon instanceof u.KfcPolygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'bottomInnerDim', {
										get: function () {
											return (
												this.frame.polygon instanceof u.KfcPolygon &&
												this.frame.polygon.bottomInnerDim
											);
										},
										set: function (e) {
											this.frame.polygon instanceof u.KfcPolygon &&
												this.frame.polygon.bottomInnerDim !== e &&
												((this.frame.polygon.bottomInnerDim = e),
												this.frame.updatePoly(),
												this.frame.draw(this.frame.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'equalSplitRatios', {
										get: function () {
											return this.frame.equalSplitRatios.join('-');
										},
										set: function (e) {
											var t = e.split('-').map(function (e) {
												return parseFloat(e);
											});
											(this.frame.equalSplitRatios = t.some(function (e) {
												return isNaN(e);
											})
												? []
												: t),
												this.frame.updatePoly(),
												this.frame.hideAssist(),
												this.frame.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openToward', {
										get: function () {
											return this.frame.openToward;
										},
										set: function (e) {
											(this.frame.openToward = e), this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'subFrameAdded', {
										get: function () {
											return !!u.SubFrame.findBy(this.frame);
										},
										set: function (e) {
											var t = u.SubFrame.findBy(this.frame);
											if (e) {
												if (t) return;
												var n = new c.FrameUtil(this.view)
													.getFrameConnectedComponents(this.frame)
													.filter(function (e) {
														return !(e instanceof u.Wall);
													});
												this.view.shapeManager.addSubFrame(o([this.frame], n));
											} else if (t) {
												t.clear();
												var r = this.view.shapeManager.subFrames,
													i = r.findIndex(function (e) {
														return e === t;
													});
												r.splice(i, 1);
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'width', {
										get: function () {
											return this.frame.profileSizeManager.frame;
										},
										set: function (e) {
											var t = this.frame.profileSizeManager;
											t.frame !== e &&
												((t.frame = e),
												this.frame.updatePoly(),
												this.frame.hideAssist(),
												this.frame.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowResetBarsVirtual', {
										get: function () {
											var e = this.frame.polygon;
											return (
												!(
													e instanceof u.KfcPolygon ||
													e instanceof u.Kfc2Polygon ||
													e instanceof u.Kfc3Polygon ||
													e instanceof u.Kfc4Polygon ||
													e instanceof u.HalfKfcPolygon ||
													e instanceof u.HalfKfc2Polygon
												) && this.frame.frameManager._virtuals.length > 0
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.resetBarsVirtual = function () {
										(this.frame.frameManager._virtuals = []),
											this.frame.updateFrame(),
											this.frame.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									}),
									e
								);
							})();
						t.FrameSettings = p;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.View = void 0);
						var i = r(n(124)),
							o = r(n(56)),
							a = r(n(0)),
							s = n(126),
							l = n(128),
							h = n(6),
							c = n(65),
							u = n(5),
							p = n(13),
							f = n(524),
							d = n(108),
							g = n(1),
							y = n(2),
							m = n(7),
							v = (function () {
								function e(e, t) {
									var n = this;
									void 0 === t && (t = 'webcc'),
										(this.token = e),
										(this.containerId = t),
										(this.className = 'wikywin-js'),
										(this.standardCanvas = [1e3, 2e3, 0.29]),
										l.Polyfill.initialize(),
										(this.keys = new s.Tk(e)),
										this.keys.v();
									var r = document.getElementById(this.containerId);
									if (!r) throw new Error('container not found');
									var a = r.clientWidth ? r.clientWidth : 400,
										h = r.clientHeight ? r.clientHeight : 400,
										g =
											this.standardCanvas[2] *
											this.getCanvasScale(a, h, this.standardCanvas[0], this.standardCanvas[1]);
									this.stage = new o.default.Stage({
										container: t,
										width: a,
										height: h,
										scale: {
											x: g,
											y: g,
										},
										draggable: !0,
									});
									var v = this.stage.getContent();
									(v.className = this.className),
										(v.style.touchAction = 'none'),
										window.addEventListener(
											'resize',
											function (e) {
												e.isTrusted && n.centerShapes();
											},
											!1,
										),
										(this.layer = new o.default.CustomLayer()),
										(this.tLayer = new o.default.CustomLayer()),
										this.stage.add(this.layer),
										this.stage.add(this.tLayer),
										(this.params = new y.Param()),
										(this.eventBus = new i.default()),
										(this.toolManager = new u.ToolManager(this)),
										(this.shapeManager = new p.ShapeManager(this)),
										(this.mometoManager = new f.MometoManager(this)),
										(this.dimManager = new d.IDimInfoManager(this)),
										(this.dragRob = new c.DragRobot(this)),
										y.FillPattern.Instance.Prepare(),
										(m.DrawParams.Ins.glassSpec = new y.GlassSpec());
								}
								return (
									Object.defineProperty(e.prototype, 'canvas', {
										get: function () {
											return this.stage;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'activeLayer', {
										get: function () {
											return this.layer;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'tmpLayer', {
										get: function () {
											return this.tLayer;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isDragging', {
										get: function () {
											return o.default.isDragging();
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.serialize = function () {
										return this.shapeManager.serialize();
									}),
									(e.prototype.deserialize = function (e) {
										this.shapeManager.deserialize(e);
									}),
									(e.prototype.postDraw = function (e, t, n) {
										void 0 === n && (n = !0),
											(m.DimCraft.canDraw = !0),
											this.activeLayer
												.find(function (e) {
													return (
														e instanceof o.default.Shape &&
														((function (e) {
															return (
																e.getAttr('data') &&
																e.getAttr('data').hasOwnProperty('segs') &&
																e.isVisible()
															);
														})(e) ||
															(function (e) {
																return (
																	e.getAttr('robot') instanceof g.Hinge ||
																	e.getAttr('robot') instanceof g.HingeOnCircle
																);
															})(e))
													);
												})
												.forEach(function (r) {
													r.drawScene(e, t), n && r.drawHit(e, t);
												});
									}),
									(e.prototype.onPostDraw = function () {
										var e = this;
										this.layer.on(h.EventType.drawhit_webcc, function (t) {
											e.layer.off(h.EventType.drawhit_webcc), e.postDraw(void 0, void 0);
										});
									}),
									(e.prototype.refresh = function () {
										(m.DimCraft.canDraw = !1), this.onPostDraw(), this.stage.batchDraw();
									}),
									(e.prototype.destoryAll = function () {
										var e = this;
										this.tLayer.destroyChildren();
										var t = [];
										this.layer.children.forEach(function (n) {
											n !== e.dragRob.visualObj && t.push(n);
										}),
											t.forEach(function (e) {
												return e.destroy();
											});
									}),
									(e.prototype.toScreen = function (e) {
										var t = this.stage.scaleX(),
											n = t * e.x + this.stage.x(),
											r = t * e.y + this.stage.y();
										return a.default.point(n, r);
									}),
									(e.prototype.centerShapes = function () {
										var e = document.getElementById(this.containerId);
										e && (this.shapeManager.moveShapeToCenter(e), this.stage.batchDraw());
									}),
									(e.prototype.getCanvasScale = function (e, t, n, r) {
										return (
											void 0 === n && (n = 1e3),
											void 0 === r && (r = 2e3),
											e / t > r / n ? e / r : t / n
										);
									}),
									Object.defineProperty(e.prototype, 'enLangMode', {
										set: function (e) {
											var t = this;
											m.DrawParams.Ins.enLangMode !== e &&
												((m.DrawParams.Ins.langMode = e ? m.langMode.en_us : m.langMode.zh_cn),
												(m.DrawParams.Ins.enLangMode = e),
												this.shapeManager.shapem.forEach(function (e) {
													e.topView.updatePoly(), e.topView.draw(t);
												}),
												this.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'langMode', {
										set: function (e) {
											var t = this;
											m.DrawParams.Ins.langMode !== e &&
												(e === m.langMode.en_us
													? (m.DrawParams.Ins.enLangMode = !0)
													: (m.DrawParams.Ins.enLangMode = !1),
												(m.DrawParams.Ins.langMode = e),
												this.shapeManager.shapem.forEach(function (e) {
													e.topView.updatePoly(), e.topView.draw(t);
												}),
												this.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.lang = function (e) {
										return m.DrawParams.Ins.lang(e);
									}),
									Object.defineProperty(e.prototype, 'lenUnit', {
										get: function () {
											return m.DrawParams.Ins.unit;
										},
										set: function (e) {
											m.DrawParams.Ins.unit = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lenUnitDigits', {
										get: function () {
											return m.DrawParams.Ins.unitDigits;
										},
										set: function (e) {
											m.DrawParams.Ins.unitDigits = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.View = v;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EventType = void 0),
							(function (e) {
								(e.sub_frame_settings = 'sub_frame_settings'),
									(e.half_kfc_frame_settings = 'half_kfc_frame_settings'),
									(e.half_kfc2_frame_settings = 'half_kfc2_frame_settings'),
									(e.kfc_frame_settings = 'kfc_frame_settings'),
									(e.isosceles_triangle_frame_settings = 'isosceles_triangle_frame_settings'),
									(e.isosceles_trapezoid_frame_settings = 'isosceles_trapezoid_frame_settings'),
									(e.ear_frame_settings = 'ear_frame_settings'),
									(e.ear2_frame_settings = 'ear2_frame_settings'),
									(e.pointed_ear_frame_settings = 'pointed_ear_frame_settings'),
									(e.trapezoid_frame_settings = 'trapezoid_frame_settings'),
									(e.single_track_frame_settings = 'single_track_frame_settings'),
									(e.double_ears_frame_settings = 'double_ears_frame_settings'),
									(e.regular_frame_settings = 'regular_frame_settings'),
									(e.frame_settings = 'frame_settings'),
									(e.peak_pentagon_frame_settings = 'peak_pentagon_frame_settings'),
									(e.half_circle_frame_settings = 'half_circle_frame_settings'),
									(e.frame_joint_way = 'frame_joint_way'),
									(e.bead_settings = 'bead_settings'),
									(e.bar_endpoint = 'bar_endpoint'),
									(e.bar_modifier = 'bar_modifier'),
									(e.sash_settings = 'sash_settings'),
									(e.kfc_sash_settings = 'kfc_sash_settings'),
									(e.wall_settings = 'wall_settings'),
									(e.sash_group_settings = 'sash_group_settings'),
									(e.sash_bar_settings = 'sash_bar_settings'),
									(e.handle_position_change = 'handle_position_change'),
									(e.wall_shape_change = 'wall_shape_change'),
									(e.antitheft_setting = 'antitheft_setting'),
									(e.frame_bar_dim = 'frame_bar_dim'),
									(e.filler_settings = 'filler_settings'),
									(e.decoration_bar_chinese = 'decoration_bar_chinese'),
									(e.decoration_bar_chinese4 = 'decoration_bar_chinese4'),
									(e.decoration_bar_semi_arc = 'decoration_bar_semi_arc'),
									(e.decoration_bar_semi_arc_pro = 'decoration_bar_semi_arc_pro'),
									(e.decoration_bar_prairie = 'decoration_bar_prairie'),
									(e.decoration_bar_colonial = 'decoration_bar_colonial'),
									(e.decoration_bar_diamond = 'decoration_bar_diamond'),
									(e.top_view_change = 'top_view_change'),
									(e.corner_joiner_settings = 'corner_joiner_settings'),
									(e.edit_skew_text = 'edit_skew_text'),
									(e.edit_cornerJoiner_faceWidth_text = 'edit_cornerJoiner_faceWidth_text'),
									(e.edit_threed_arc_text = 'edit_threed_arc_text'),
									(e.connector_settings = 'connector_settings'),
									(e.dim_setting = 'dim_setting'),
									(e.dim_name_modified = 'dim_name_modified'),
									(e.structure_changed = 'structure_changed'),
									(e.dim_edit = 'dim_edit'),
									(e.note_settings = 'note_settings'),
									(e.note_edit = 'note_edit'),
									(e.glass_hole_settings = 'glass_hole_settings'),
									(e.threed_arc_frame_settings = 'threed_arc_frame_settings'),
									(e.drawhit_webcc = 'drawhit_webcc'),
									(e.drawscene_webcc = 'drawscene_webcc'),
									(e.profile_struct = 'profile_struct'),
									(e.frame_hit = 'frame_hit'),
									(e.turning_detect = 'turning_detect'),
									(e.angled_frame_settings = 'angled_frame_settings'),
									(e.angled_frame2_settings = 'angled_frame2_settings'),
									(e.drag_in_process = 'drag_in_process'),
									(e.rounded_rectang_frame_settings = 'rounded_rectang_frame_settings'),
									(e.prompt = 'prompt'),
									(e.selected_component = 'selected_component'),
									(e.unselected_component = 'unselected_component');
							})(t.EventType || (t.EventType = {}));
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.LineSide =
								t.SplitterObj =
								t.EpObj =
								t.EndpointSplitWay =
								t.EqualSplitSide =
								t.EqualSplitType =
									void 0);
						var i,
							o,
							a,
							s = r(n(0)),
							l = n(113),
							h = n(107),
							c = n(7),
							u = n(9),
							p = n(1);
						!(function (e) {
							(e[(e.None = 0)] = 'None'),
								(e[(e.Outter = 1)] = 'Outter'),
								(e[(e.Inner = 2)] = 'Inner');
						})((i = t.EqualSplitType || (t.EqualSplitType = {}))),
							(function (e) {
								(e[(e.Both = 0)] = 'Both'),
									(e[(e.LeftOrTop = 1)] = 'LeftOrTop'),
									(e[(e.RightOrBottom = 2)] = 'RightOrBottom');
							})((o = t.EqualSplitSide || (t.EqualSplitSide = {}))),
							(function (e) {
								(e[(e.None = 0)] = 'None'),
									(e[(e.Through = 1)] = 'Through'),
									(e[(e.LeftOrTopJoin = 2)] = 'LeftOrTopJoin'),
									(e[(e.RightOrBottomJoin = 3)] = 'RightOrBottomJoin');
							})((a = t.EndpointSplitWay || (t.EndpointSplitWay = {})));
						var f = function () {
							(this.steel = c.DrawParams.Ins.drawPolyType === p.DrawPolyType.steelPlastic),
								(this.split = 0),
								(this.fixed = !1);
						};
						t.EpObj = f;
						var d = (function () {
							function e() {
								(this.polyId = new h.PolyId()),
									(this.start = new f()),
									(this.end = new f()),
									(this.equalSplit = i.None),
									(this.equalSplitSide = 0),
									(this.equalSplitMaxCount = -1),
									(this.drawPolyType = p.DrawPolyType.standard),
									(this.alignType = p.AlignTypeEnum.center),
									(this.reinforced = !1),
									(this.kfcWaist = !1);
							}
							return (
								Object.defineProperty(e.prototype, 'split', {
									get: function () {
										return this.start.split !== a.None || this.end.split !== a.None;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'steel', {
									get: function () {
										return this.start.steel || this.end.steel;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'steelsCount', {
									get: function () {
										var e = 0;
										return this.start.steel && e++, this.end.steel && e++, e;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.translate = function (e) {
									void 0 !== this.line &&
										(this.line instanceof s.default.Line
											? (this.line.pt = this.line.pt.translate(e))
											: this.line instanceof s.default.Arc
											? (this.line = this.line.translate(e))
											: this.line.translate(e));
								}),
								Object.defineProperty(e.prototype, 'position', {
									get: function () {
										return this.line instanceof s.default.Line
											? this.line.pt
											: this.line instanceof s.default.Arc
											? this.line.middle()
											: this.line instanceof u.CutLine
											? this.line.pt
											: s.default.point();
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.drag = function (e, t, n) {
									void 0 !== this.line &&
										(this.line instanceof s.default.Line ||
										this.line instanceof s.default.Segment ||
										this.line instanceof s.default.Arc
											? this.translate(t)
											: this.line.drag(e, t, n));
								}),
								(e.prototype.clone = function () {
									var t = new e();
									return (
										(t.polyId = this.polyId.clone()),
										(t.start.split = this.start.split),
										(t.end.split = this.end.split),
										(t.equalSplit = this.equalSplit),
										(t.start.fixed = this.start.fixed),
										(t.end.fixed = this.end.fixed),
										(t.start.steel = this.start.steel),
										(t.end.steel = this.end.steel),
										(t.line = void 0 === this.line ? void 0 : this.line.clone()),
										(t.alignType = this.alignType),
										(t.kfcWaist = this.kfcWaist),
										t
									);
								}),
								(e.prototype.toJSON = function () {
									var e = this.line ? this.line.toJSON() : void 0;
									return {
										polyId: this.polyId.toJSON(),
										sts: this.start.split,
										eds: this.end.split,
										equalSplit: this.equalSplit,
										ess: this.equalSplitSide,
										ss: this.start.steel,
										es: this.end.steel,
										sFd: this.start.fixed,
										eFd: this.end.fixed,
										line: e,
										alignType: this.alignType,
										reinforced: this.reinforced,
										kw: this.kfcWaist,
									};
								}),
								(e.deserialize = function (t) {
									var n = new e();
									return (
										n.polyId.deserialize(t.polyId),
										(n.start.split = t.sts),
										(n.end.split = t.eds),
										!0 === t.startSplit || 1 === t.startSplit
											? (n.start.split = a.Through)
											: (!1 !== t.startSplit && 0 !== t.startSplit) || (n.start.split = a.None),
										!0 === t.endSplit || 1 === t.endSplit
											? (n.end.split = a.Through)
											: (!1 !== t.endSplit && 0 !== t.endSplit) || (n.end.split = a.None),
										(n.equalSplit = t.equalSplit ? t.equalSplit : i.None),
										(n.equalSplitSide = t.ess ? t.ess : o.Both),
										(n.start.fixed = !!t.sFd && t.sFd),
										(n.end.fixed = !!t.eFd && t.eFd),
										(n.start.steel = t.ss),
										(n.end.steel = t.es),
										(n.alignType = void 0 === t.alignType ? p.AlignTypeEnum.center : t.alignType),
										(n.reinforced = !!t.reinforced && t.reinforced),
										(n.kfcWaist = void 0 !== t.kw && t.kw),
										t.line.name === u.CutLineType.line
											? (n.line = l.Utils.parseLine(t.line))
											: t.line.name === u.CutLineType.arc
											? (n.line = l.Utils.parseArc(t.line))
											: t.line.name === u.CutLineType.compoundLine
											? (n.line = u.CutLine.parseCompoundLine(t.line))
											: t.line.name === u.CutLineType.compoundLineCircle
											? (n.line = u.CutLine.parseCompoundLineCircle(t.line))
											: t.line.name === u.CutLineType.simpleLine
											? (n.line = u.CutLine.parseSimpleLine(t.line))
											: t.line.name === u.CutLineType.simpleInnerArc
											? (n.line = u.CutLine.parseSimpleInnerArc(t.line))
											: t.line.name === u.CutLineType.spinLine
											? (n.line = u.CutLine.parseSpinLine(t.line))
											: t.line.name === u.CutLineType.simpleHexagon
											? (n.line = u.CutLine.parseHalfHexagon(t.line))
											: t.line.name === u.CutLineType.compoundDoubleOctagon
											? (n.line = u.CutLine.parseDoubleOctagon(t.line))
											: t.line.name === u.CutLineType.simpleWave
											? (n.line = u.CutLine.parseSimpleArc(t.line))
											: t.line.name === u.CutLineType.compoundLongOctagon
											? (n.line = u.CutLine.parseLongOctagon(t.line))
											: t.line.name === u.CutLineType.semiArcPro
											? (n.line = u.CutLine.parseSemiArcPro(t.line))
											: t.line.name === u.CutLineType.semiArcPro2
											? (n.line = u.CutLine.parseSemiArcPro2(t.line))
											: t.line.name === u.CutLineType.semiArc
											? (n.line = u.CutLine.parseSemiArc(t.line))
											: t.line.name === u.CutLineType.halfWheel
											? (n.line = u.CutLine.parseHalfWheel(t.line))
											: t.line.name === u.CutLineType.semiSegmentPro
											? (n.line = u.CutLine.parseSemiSegmentPro(t.line))
											: t.line.name === u.CutLineType.frametifyLike
											? (n.line = u.CutLine.parseFrametifyLike(t.line))
											: t.line.name === u.CutLineType.innerEqSplit &&
											  (n.line = u.CutLine.parseInnerEqSplit(t.line)),
										n
									);
								}),
								Object.defineProperty(e.prototype, 'angle', {
									get: function () {
										if (!this.line) return 0;
										var t = 0;
										return (
											(t =
												this.line instanceof s.default.Line
													? this.line.slope
													: s.default.line(this.line.start, this.line.end).slope),
											e.angleToWorld(t)
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.rotateTo = function (t, n) {
									if (!this.line) return 0;
									if (((t = e.angleToScreen(t)), this.line instanceof s.default.Line)) {
										if (((t -= this.line.slope), s.default.Utils.EQ_0(t))) return 0;
										this.line = s.default.line(this.line.pt.rotate(t, n), this.line.norm.rotate(t));
									} else {
										if (
											((t -= s.default.line(this.line.start, this.line.end).slope),
											s.default.Utils.EQ_0(t))
										)
											return 0;
										this.line = this.line.rotate(t, n);
									}
									return t;
								}),
								(e.prototype.rotate = function (e, t) {
									s.default.Utils.EQ_0(e) ||
										(this.line &&
											(this.line instanceof s.default.Line
												? (this.line = s.default.line(
														this.line.pt.rotate(e, t),
														this.line.norm.rotate(e),
												  ))
												: (this.line = this.line.rotate(e, t))));
								}),
								(e.angleToWorld = function (e) {
									return e > Math.PI && (e -= 2 * Math.PI), (e = -e) < 0 ? 2 * Math.PI + e : e;
								}),
								(e.angleToScreen = function (e) {
									return e > Math.PI && (e -= 2 * Math.PI), -e;
								}),
								e
							);
						})();
						(t.SplitterObj = d),
							(function (e) {
								(e[(e.None = 0)] = 'None'),
									(e[(e.Left = 1)] = 'Left'),
									(e[(e.On = 2)] = 'On'),
									(e[(e.Right = 3)] = 'Right');
							})(t.LineSide || (t.LineSide = {}));
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Utils = void 0);
						var s = a(n(0)),
							l = n(7),
							h = n(1),
							c = (function () {
								function e() {}
								return (
									(e.furthestTwoPoints = function (e) {
										var t,
											n,
											i,
											o,
											a = 0,
											l = s.default.point(),
											h = s.default.point();
										try {
											for (var c = r(e), u = c.next(); !u.done; u = c.next()) {
												var p = u.value;
												try {
													for (var f = ((i = void 0), r(e)), d = f.next(); !d.done; d = f.next()) {
														var g = d.value,
															y = p.distanceTo(g)[0];
														y > a && ((l = p), (h = g), (a = y));
													}
												} catch (e) {
													i = {
														error: e,
													};
												} finally {
													try {
														d && !d.done && (o = f.return) && o.call(f);
													} finally {
														if (i) throw i.error;
													}
												}
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												u && !u.done && (n = c.return) && n.call(c);
											} finally {
												if (t) throw t.error;
											}
										}
										return [l, h];
									}),
									(e.rightLine = function (e, t) {
										var n = e.slope > Math.PI ? e.slope - 2 * Math.PI : e.slope;
										return (
											n >= -Math.PI / 8 && n < Math.PI / 8
												? (e = s.default.line(t, s.default.vector(0, 1)))
												: n >= Math.PI / 8 && n < (3 * Math.PI) / 8
												? (e = s.default.line(t, s.default.vector(-1, 1)))
												: n >= (3 * Math.PI) / 8 && n < (5 * Math.PI) / 8
												? (e = s.default.line(t, s.default.vector(-1, 0)))
												: n >= (5 * Math.PI) / 8 && n < (7 * Math.PI) / 8
												? (e = s.default.line(t, s.default.vector(-1, -1)))
												: (n >= (7 * Math.PI) / 8 && n < Math.PI) ||
												  (n >= -Math.PI && n < (-7 * Math.PI) / 8)
												? (e = s.default.line(t, s.default.vector(0, -1)))
												: n >= (-7 * Math.PI) / 8 && n < (-5 * Math.PI) / 8
												? (e = s.default.line(t, s.default.vector(1, -1)))
												: n >= (-5 * Math.PI) / 8 && n < (-3 * Math.PI) / 8
												? (e = s.default.line(t, s.default.vector(1, 0)))
												: n >= (-3 * Math.PI) / 8 &&
												  n < -Math.PI / 8 &&
												  (e = s.default.line(t, s.default.vector(1, 1))),
											e
										);
									}),
									(e.rightLinePoint = function (e, t) {
										return this.rightLine(s.default.line(e, t), e).distanceTo(t)[1].start;
									}),
									(e.edgeDirPt = function (e, t, n) {
										return e instanceof s.default.Arc
											? this.arcDirPt(e, t, n)
											: this.lineDirPt(e, t, n);
									}),
									(e.lineDirPt = function (e, t, n) {
										return this.slopeDirPt(n, t, e.slope);
									}),
									(e.getParallelVec = function (e, t) {
										var n = e.pt,
											r = n.projectionOn(t);
										return s.default.vector(n, r);
									}),
									(e.vecDirPt = function (e, t, n) {
										var r = s.default.segment(n, n.translate(e));
										return this.slopeDirPt(n, t, r.slope);
									}),
									(e.vecDirVec = function (t, n) {
										var r = e.vecDirPt(t, n, s.default.point());
										return s.default.vector(r.x, r.y);
									}),
									(e.slopeDirPt = function (e, t, n) {
										var r = e.x + t * Math.cos(n),
											i = e.y + t * Math.sin(n);
										return s.default.point(r, i);
									}),
									(e.arcDirPt = function (e, t, n) {
										var r = t / e.r.valueOf();
										return e.counterClockwise || (r = -r), n.rotate(r, e.center);
									}),
									(e.polyCoincide = function (e, t, n, i, o) {
										var a, l, h, c;
										void 0 === n && (n = !0), void 0 === i && (i = 5), void 0 === o && (o = !0);
										var u = e.edges.filter(function (e) {
												return e instanceof s.default.Segment;
											}),
											p = t.edges.filter(function (e) {
												return e instanceof s.default.Segment;
											});
										try {
											for (var f = r(u), d = f.next(); !d.done; d = f.next()) {
												var g = d.value;
												try {
													for (var y = ((h = void 0), r(p)), m = y.next(); !m.done; m = y.next()) {
														var v = m.value;
														if (this.segCoincide(g, v, n, i, o)) return !0;
													}
												} catch (e) {
													h = {
														error: e,
													};
												} finally {
													try {
														m && !m.done && (c = y.return) && c.call(y);
													} finally {
														if (h) throw h.error;
													}
												}
											}
										} catch (e) {
											a = {
												error: e,
											};
										} finally {
											try {
												d && !d.done && (l = f.return) && l.call(f);
											} finally {
												if (a) throw a.error;
											}
										}
										return !1;
									}),
									(e.segCoincide = function (t, n, r, i, o) {
										void 0 === r && (r = !0), void 0 === i && (i = 5), void 0 === o && (o = !0);
										var a = o ? e.roundSeg(t, i) : t,
											l = o ? e.roundSeg(n, i) : n,
											h = a.tangentInStart(),
											c = l.tangentInStart(),
											u = a.intersect(l);
										return r
											? !(u.length < 2) && s.default.Utils.EQ_0(h.cross(c))
											: u.length >= 1 && s.default.Utils.EQ_0(h.cross(c));
									}),
									(e.roundSeg = function (t, n) {
										return (
											void 0 === n && (n = 5),
											s.default.segment(
												s.default.point(e.maxDigits(t.start.x, n), e.maxDigits(t.start.y, n)),
												s.default.point(e.maxDigits(t.end.x, n), e.maxDigits(t.end.y, n)),
											)
										);
									}),
									(e.polyConcideSeg = function (t, n, i) {
										var o, a;
										void 0 === i && (i = !0);
										var l = !1,
											h = t.edges;
										try {
											for (var c = r(h), u = c.next(); !u.done; u = c.next()) {
												var p = u.value;
												p instanceof s.default.Segment && e.segCoincide(p, n, !0, 5, i) && (l = !0);
											}
										} catch (e) {
											o = {
												error: e,
											};
										} finally {
											try {
												u && !u.done && (a = c.return) && a.call(c);
											} finally {
												if (o) throw o.error;
											}
										}
										return l;
									}),
									(e.edgeDistance = function (e, t) {
										if (e instanceof s.default.Line) {
											var n = e.pt.distanceTo(t)[0];
											return s.default.line(e.pt, t).norm.equalTo(e.norm) || (n = -n), n;
										}
										if (e instanceof s.default.Segment)
											return (
												(n = e.start.distanceTo(t)[0]),
												s.default
													.line(e.start, t)
													.norm.equalTo(s.default.line(e.start, e.end).norm) || (n = -n),
												n
											);
										var r = s.default.vector(e.center, t).slope;
										return s.default.arc(
											e.center,
											e.r.valueOf(),
											e.startAngle,
											r,
											e.counterClockwise,
										).length;
									}),
									(e.distinct = function (e) {
										var t = e,
											n = -1;
										return (
											e.forEach(function (t, r) {
												e.forEach(function (e, i) {
													r !== i && s.default.Utils.EQ_0(t.distanceTo(e)[0]) && (n = r);
												});
											}),
											-1 !== n && (t = o(e.slice(0, n), e.slice(n + 1))),
											t
										);
									}),
									(e.edgeToLine = function (e) {
										return e instanceof s.default.Arc ? e : s.default.line(e.start, e.end);
									}),
									(e.indexOfClosestEdge = function (e, t) {
										var n = this,
											r = t.map(function (t) {
												var r = n.projectionOnEdge(e, t);
												if (r) return e.distanceTo(r)[0];
											}),
											i = r.filter(function (e) {
												return 'number' == typeof e;
											});
										return r.indexOf(Math.min.apply(Math, o(i)));
									}),
									(e.projectionOnEdge = function (e, t) {
										var n = t instanceof s.default.Segment ? t : s.default.segment(t.start, t.end),
											r = s.default.line(e, n.tangentInStart());
										return t.intersect(r)[0];
									}),
									(e.distanceFromEdgeStart = function (e, t) {
										if (t instanceof s.default.Segment) return e.distanceTo(t.start)[0];
										var n = s.default.vector(t.center, t.start),
											r = s.default.vector(t.center, e),
											i = t.counterClockwise ? n.angleTo(r) : r.angleTo(n);
										return t.r.valueOf() * i;
									}),
									(e.isSameEdge = function (e, t) {
										if (e instanceof s.default.Segment && t instanceof s.default.Segment) {
											if (e.start.equalTo(t.start) && e.end.equalTo(t.end)) return !0;
											if (e.end.equalTo(t.start) && e.start.equalTo(t.end)) return !0;
										}
										return !1;
									}),
									(e.canSnap = function (t, n, r, i) {
										void 0 === i && (i = l.DrawParams.Ins.snapEdge);
										var o = s.default.line(t.start, t.end);
										if (n.start.equalTo(n.end)) return !1;
										var a = s.default.line(n.start, n.end);
										if (n instanceof s.default.Arc) {
											var h = s.default.line(r, t.tangentInStart().rotate90CW());
											return [n.start, n.end].some(function (e) {
												return e.distanceTo(h)[0] <= i;
											});
										}
										return e.isParallel(a, o) && s.default.Utils.LE(r.distanceTo(a)[0], i);
									}),
									(e.parsePoly = function (t) {
										var n,
											i,
											o = [];
										try {
											for (var a = r(t[0]), s = a.next(); !s.done; s = a.next()) {
												var l = s.value;
												'segment' === l.name
													? o.push(e.parseSegment(l))
													: 'arc' === l.name && o.push(e.parseArc(l));
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												s && !s.done && (i = a.return) && i.call(a);
											} finally {
												if (n) throw n.error;
											}
										}
										return new h.WinPolygon(o);
									}),
									(e.parseLine = function (e) {
										var t = s.default.point(e.pt.x, e.pt.y),
											n = s.default.vector(e.norm.x, e.norm.y);
										return s.default.line(t, n);
									}),
									(e.parseSegment = function (e) {
										var t = s.default.point(e.ps.x, e.ps.y),
											n = s.default.point(e.pe.x, e.pe.y);
										return s.default.segment(t, n);
									}),
									(e.parseArc = function (e) {
										var t = s.default.point(e.pc.x, e.pc.y);
										return s.default.arc(t, e.r, e.startAngle, e.endAngle, e.counterClockwise);
									}),
									(e.parseVector = function (e) {
										return s.default.vector(e.x, e.y);
									}),
									(e.stringifyMatrix = function (e) {
										return [e.a, e.b, e.c, e.d, e.tx, e.ty];
									}),
									(e.parseMatrix = function (e) {
										return s.default.matrix(e[0], e[1], e[2], e[3], e[4], e[5]);
									}),
									(e.stringifyBox = function (e) {
										return [e.xmin, e.ymin, e.xmax, e.ymax];
									}),
									(e.parseBox = function (e) {
										return new s.default.Box(e[0], e[1], e[2], e[3]);
									}),
									(e.splitArcToPoints = function (e, t) {
										for (var n = [], r = t - 1, i = 0; i < r; i++) {
											var o = (e.startAngle + 2 * Math.PI) % (2 * Math.PI),
												a = (e.endAngle + 2 * Math.PI) % (2 * Math.PI);
											e.counterClockwise && o >= a
												? (o -= 2 * Math.PI)
												: !e.counterClockwise && a >= o && (a -= 2 * Math.PI);
											var s = ((a - o) / r) * i;
											n.push(e.start.clone().rotate(s, e.center));
										}
										return n.push(e.end.clone()), n;
									}),
									(e.isSegHorizontal = function (t) {
										return e.isParallel(
											s.default.line(t.ps, t.pe),
											s.default.line(s.default.point(), s.default.point(1, 0)),
										);
									}),
									(e.isSegVertical = function (t) {
										return e.isParallel(
											s.default.line(t.ps, t.pe),
											s.default.line(s.default.point(), s.default.point(0, 1)),
										);
									}),
									(e.isHorizOrVer = function (t) {
										return e.isSegVertical(t) || e.isSegHorizontal(t);
									}),
									(e.applyMatrixMultiply = function (e) {
										var t = e.length;
										if (1 === t) return e[0];
										if (0 === t) return s.default.matrix(1, 0, 0, 1, 0, 0);
										if (t < 2) throw Error('matrix arr < 2');
										for (var n = e[t - 1], r = t - 2; r >= 0; r--) {
											var i = e[r];
											n = n.multiply(i);
										}
										return n;
									}),
									(e.mirrorLine = function (t, n) {
										if (t.on(n)) return t.clone();
										var r = t.projectionOn(n);
										return e.mirrorPoint(t, r);
									}),
									(e.mirrorPoint = function (e, t) {
										return s.default.point(2 * t.x - e.x, 2 * t.y - e.y);
									}),
									(e.getNextIdx = function (e, t, n) {
										if ((void 0 === n && (n = 1), t <= 0)) throw new Error('loopElement<=0');
										return (e + n) % t;
									}),
									(e.getPrevIdx = function (e, t, n) {
										if ((void 0 === n && (n = 1), t <= 0)) throw new Error('loopElement<=0');
										return (e - n + t) % t;
									}),
									(e.sortPoints = function (e, t, n, r) {
										void 0 === r && (r = !1);
										var i = s.default.vector(e, t).slope;
										r
											? n.sort(function (t, n) {
													var r = s.default.vector(e, t).slope,
														o = s.default.vector(e, n).slope;
													return (
														r < i && (r += 2 * Math.PI), o < i && (o += 2 * Math.PI), r < o ? -1 : 1
													);
											  })
											: n.sort(function (t, n) {
													var r = s.default.vector(e, t).slope,
														o = s.default.vector(e, n).slope;
													return (
														r > i && (r -= 2 * Math.PI), o > i && (o -= 2 * Math.PI), r > o ? -1 : 1
													);
											  });
									}),
									(e.isParallel = function (t, n, r) {
										void 0 === r && (r = 1e-4);
										var i = t instanceof s.default.Segment ? s.default.line(t.start, t.end) : t,
											o = n instanceof s.default.Segment ? s.default.line(n.start, n.end) : n;
										return e.isZero(i.norm.cross(o.norm), r);
									}),
									(e.isParallelOrSameCenter = function (t, n, r) {
										if (
											(void 0 === r && (r = 1e-4),
											(t instanceof s.default.Segment || t instanceof s.default.Line) &&
												(n instanceof s.default.Segment || n instanceof s.default.Line))
										) {
											var i = t instanceof s.default.Segment ? s.default.line(t.start, t.end) : t,
												o = n instanceof s.default.Segment ? s.default.line(n.start, n.end) : n;
											return e.isZero(i.norm.cross(o.norm), r);
										}
										return (
											t instanceof s.default.Arc &&
											n instanceof s.default.Arc &&
											e.isZero(t.center.x - n.center.x, r) &&
											e.isZero(t.center.y - n.center.y, r)
										);
									}),
									(e.isSameLine = function (e, t) {
										return e.pt.equalTo(t.pt) && e.norm.equalTo(t.norm);
									}),
									(e.isZero = function (e, t) {
										return void 0 === t && (t = 1e-7), Math.abs(e) < t;
									}),
									(e.edgeCoincidedPolyEdges = function (e, t) {
										var n, i;
										try {
											for (var o = r(t), a = o.next(); !a.done; a = o.next()) {
												var s = a.value;
												if (e.contains(s.middle())) return !0;
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (i = o.return) && i.call(o);
											} finally {
												if (n) throw n.error;
											}
										}
										return !1;
									}),
									(e.centroidOfPolygon = function (e) {
										var t = e.circlePolygon();
										if (t) return t.center;
										var n = e.edges
											.map(function (e) {
												return [e.start, e.middle()];
											})
											.flat();
										if (0 === n.length) return s.default.point();
										for (
											var r, i, o, a = n.length, l = n[0], h = 0, c = 0, u = 0, p = 0, f = a - 1;
											p < a;
											f = p++
										)
											(r = n[p]),
												(i = n[f]),
												(h += o = (r.x - l.x) * (i.y - l.y) - (i.x - l.x) * (r.y - l.y)),
												(c += (r.x + i.x - 2 * l.x) * o),
												(u += (r.y + i.y - 2 * l.y) * o);
										return (o = 3 * h), s.default.point(c / o + l.x, u / o + l.y);
									}),
									(e.isFlattenError = function (e) {
										return (
											(e instanceof ReferenceError && 'Illegal Parameters' === e.message) ||
											(e instanceof Error && 'Zero division' === e.message)
										);
									}),
									(e.cliffSlope = function (e) {
										return e >= Math.PI && (e -= Math.PI), e;
									}),
									(e.maxDigits = function (e, t) {
										if (t > 8) throw new Error('digits not support');
										var n = Math.pow(10, t);
										return Math.round(e * n) / n;
									}),
									(e.scalePoint = function (t, n, r) {
										var i = e.applyMatrixMultiply([
											s.default.matrix(1, 0, 0, 1, -n.x, -n.y),
											s.default.matrix(r, 0, 0, r, 0, 0),
											s.default.matrix(1, 0, 0, 1, n.x, n.y),
										]);
										return t.transform(i);
									}),
									(e.getMovedEdge = function (t, n, r) {
										if (t instanceof s.default.Segment && n instanceof s.default.Segment) {
											var i = s.default.line(t.start, t.end),
												o = s.default.line(n.start, n.end);
											if (!e.isParallel(i, o, 0.01)) throw new Error('not parallel');
											var a = i.norm;
											return (
												o.pt.leftTo(i) || (a = a.invert()), (a = a.multiply(r)), t.translate(a)
											);
										}
										if (t instanceof s.default.Arc && n instanceof s.default.Arc) {
											if (!t.center.equalTo(n.center)) throw new Error('not parallel circle');
											var l = t.r.valueOf() + r;
											return (
												n.r.valueOf() <= t.r.valueOf() && (l = t.r.valueOf() - r),
												s.default.arc(t.center, l, t.startAngle, t.endAngle, t.counterClockwise)
											);
										}
										throw new Error('not support');
									}),
									(e.optimizePolygon = function (e) {
										return new h.WinPolygon(this.optimizeEdges(e.edges, !0));
									}),
									(e.optimizeEdges = function (e, t) {
										var n = e,
											r = e;
										do {
											(r = this.detectParallelEdgesMerging(r, t)) && (n = r);
										} while (void 0 !== r);
										return n;
									}),
									(e.detectParallelEdgesMerging = function (t, n) {
										for (var r = t.length, i = 0; i < r; ) {
											if (!n && i === r - 1) return;
											var o = t[i],
												a = t[(i + 1) % r];
											if (
												o instanceof s.default.Segment &&
												a instanceof s.default.Segment &&
												e.isParallel(o, a) &&
												!e.segCoincide(o, a)
											)
												return this.mergeParallelEdges(t, i, s.default.segment(o.start, a.end));
											i++;
										}
									}),
									(e.mergeParallelEdges = function (e, t, n) {
										var r = 2 - e.splice(t, 2).length;
										return e.splice(0, r), e.splice(t, 0, n), e;
									}),
									(e.sideMirror = function (e, t, n) {
										return (
											void 0 === n && (n = !1),
											e instanceof s.default.Arc ? this.sideArc(e, t, n) : this.sideSeg(e, t, n)
										);
									}),
									(e.sideSeg = function (e, t, n) {
										void 0 === n && (n = !1);
										var r = e.tangentInStart();
										return (r = n ? r.rotate90CCW() : r.rotate90CW()), e.translate(r.multiply(t));
									}),
									(e.sideArc = function (e, t, n) {
										void 0 === n && (n = !1);
										var r = s.default.segment(e.start, e.end).tangentInStart();
										r = n ? r.rotate90CCW() : r.rotate90CW();
										var i = s.default.segment(e.middle(), e.center).tangentInStart().equalTo(r)
											? -t
											: t;
										return s.default.arc(
											e.center,
											e.r.valueOf() + i,
											e.startAngle,
											e.endAngle,
											e.counterClockwise,
										);
									}),
									(e.smoothingEdges = function (e, t) {
										var n = [],
											r = [];
										return (
											e.forEach(function (n, i) {
												if (i !== e.length - 1) {
													var o = (i + 1) % e.length,
														a = e[o],
														l = n.end.translate(n.tangentInEnd().multiply(t)),
														h = s.default.line(l, n.tangentInStart()),
														c = s.default.segment(n.start, l),
														u = a.start.translate(a.tangentInStart().multiply(t)),
														p = s.default.line(u, a.tangentInStart()),
														f = s.default.segment(u, a.end),
														d = h.intersect(p)[0],
														g = s.default.Arc.arcSE(d, l, u, !1);
													(e[i] = c), (e[o] = f), (r[i] = g);
												}
											}),
											e.forEach(function (e, t) {
												n.push(e), r[t] && n.push(r[t]);
											}),
											n
										);
									}),
									(e.totalAngleOfArc = function (e) {
										var t = e.startAngle,
											n = e.endAngle;
										return e.counterClockwise
											? n < t
												? n - t + 2 * Math.PI
												: n - t
											: t < n
											? t - n + 2 * Math.PI
											: t - n;
									}),
									e
								);
							})();
						t.Utils = c;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShortkeyHelper = void 0);
						var r = n(64),
							i = (function () {
								function e() {
									(this.keyMap = new Map()),
										(this.prevKey = 'p'),
										(this.isTempToolPrev = !1),
										(this.keyCounter = 0),
										(this.currentTool = r.ToolType.pan),
										this.setDefault();
								}
								return (
									(e.prototype.setDefault = function () {
										this.keyMap.clear(),
											this.keyMap.set('p', [r.ToolType.pan, r.ToolType.squareSelect]),
											this.keyMap.set('f', [
												r.ToolType.frame_scalable,
												r.ToolType.frame_springline,
												r.ToolType.door,
												r.ToolType.frame_half_kfc,
												r.ToolType.frame_kfc,
												r.ToolType.frame_kfc2,
												r.ToolType.frame_kfc4,
												r.ToolType.frame_circle,
												r.ToolType.frame_three_dimensional_arc,
												r.ToolType.frame_parallelogram,
												r.ToolType.frame_half_circle,
												r.ToolType.frame_quarter_circle,
												r.ToolType.frame_gothic,
												r.ToolType.frame_onion,
												r.ToolType.frame_octagon,
												r.ToolType.frame_springline_flanker,
												r.ToolType.frame_isosceles_triangle,
												r.ToolType.frame_hexagon,
												r.ToolType.frame_hexagon2,
												r.ToolType.frame_diamond,
												r.ToolType.frame_angled_pentagon,
												r.ToolType.frame_peak_pentagon,
												r.ToolType.frame_trapezoid,
												r.ToolType.frame_quarter_arch,
												r.ToolType.frame_hollow_side,
												r.ToolType.frame_hollow,
												r.ToolType.frame_convex,
												r.ToolType.frame_quatrefoil,
												r.ToolType.frame_extended_partial_arch,
												r.ToolType.frame_triangle,
												r.ToolType.frame_ear,
												r.ToolType.frame_pointed_ear,
												r.ToolType.frame_double_ears,
												r.ToolType.frame_ear2,
												r.ToolType.frame_wave,
												r.ToolType.frame_mosque,
												r.ToolType.frame_polygon,
											]),
											this.keyMap.set('s', [
												r.ToolType.sash,
												r.ToolType.screen,
												r.ToolType.antiTheft,
												r.ToolType.innerSashAndScreen,
												r.ToolType.downWithSlideSash,
												r.ToolType.doubleSash,
												r.ToolType.doubleScreen,
												r.ToolType.kfcSash,
												r.ToolType.doubleKfcSash,
												r.ToolType.shadePushSash,
												r.ToolType.doubleShadePushSash,
												r.ToolType.guardSash,
												r.ToolType.foldDouble,
												r.ToolType.innerSash,
											]),
											this.keyMap.set('w', [r.ToolType.wall]),
											this.keyMap.set('v', [
												r.ToolType.mullion_cross_line,
												r.ToolType.mullion_cross_line_equal_two,
												r.ToolType.mullion_half_wheel,
												r.ToolType.mullion_semi_arc,
												r.ToolType.mullion_inner_arc,
												r.ToolType.mullion_semi_arc_pro,
												r.ToolType.mullion_semi_segment_pro,
												r.ToolType.mullion_spin,
												r.ToolType.mullion_compound_square,
												r.ToolType.mullion_compound_x_square,
												r.ToolType.mullion_compound_diamond,
												r.ToolType.mullion_compound_circle,
												r.ToolType.mullion_compound_hexagon,
												r.ToolType.mullion_half_hexagon,
												r.ToolType.mullion_compound_rectangle_single,
												r.ToolType.mullion_compound_rectangle_double,
												r.ToolType.mullion_compound_long_octagon,
												r.ToolType.mullion_compound_double_octagon,
												r.ToolType.mullion_wave,
												r.ToolType.mullion_inner_121_split,
											]),
											this.keyMap.set('d', [
												r.ToolType.slide,
												r.ToolType.foldSash,
												r.ToolType.foldScreen,
												r.ToolType.foldShade,
											]),
											this.keyMap.set('c', [
												r.ToolType.connerJoiner,
												r.ToolType.connector,
												r.ToolType.wallCornerJoiner,
												r.ToolType.panoramicCornerJoiner,
											]),
											this.keyMap.set('e', [
												r.ToolType.extraDimHorizontal,
												r.ToolType.extraDimVertical,
												r.ToolType.extraDimArbitrary,
												r.ToolType.extraDimRadius,
												r.ToolType.extraDimAngle,
												r.ToolType.note,
												r.ToolType.multilineNote,
												r.ToolType.extraManImage,
												r.ToolType.extraWomenImage,
											]),
											this.keyMap.set('t', [
												r.ToolType.fillerGlass,
												r.ToolType.fillerScreen,
												r.ToolType.fillerPanel,
												r.ToolType.fillerShade,
												r.ToolType.fillerEmpty,
												r.ToolType.glassHole,
											]),
											this.keyMap.set('b', [
												r.ToolType.decoration_bar_chinese,
												r.ToolType.decoration_bar_chinese2,
												r.ToolType.decoration_bar_prairie,
												r.ToolType.decoration_bar_colonial,
												r.ToolType.decoration_bar_diamond,
												r.ToolType.decoration_bar_semi_arc,
												r.ToolType.decoration_bar_chinese3,
												r.ToolType.decoration_bar_chinese4,
												r.ToolType.decoration_bar_semi_arc_pro,
											]),
											this.keyMap.set('x', [r.ToolType.profileStruct]);
									}),
									(e.prototype.getKey = function (e) {
										var t = e;
										t === this.prevKey
											? this.isTempToolPrev || this.keyCounter++
											: ((this.keyCounter = 0), (this.prevKey = t));
										var n = this.keyMap.get(t);
										if (void 0 === n) return r.ToolType.none;
										this.isTempToolPrev = !1;
										var i = this.keyCounter % n.length;
										return (this.currentTool = n[i]), n[i];
									}),
									(e.prototype.syncCounter = function (e) {
										var t = this;
										(this.currentTool = e),
											this.isTempTool(e)
												? (this.isTempToolPrev = !0)
												: ((this.isTempToolPrev = !1),
												  this.keyMap.forEach(function (n, r) {
														var i = n.findIndex(function (t) {
															return t === e;
														});
														-1 !== i && ((t.prevKey = r), (t.keyCounter = i));
												  }));
									}),
									(e.prototype.isTempTool = function (e) {
										if (e === r.ToolType.pan) return !0;
										var t = !1;
										return (
											this.keyMap.forEach(function (n, r) {
												-1 !==
													n.findIndex(function (t) {
														return t === e;
													}) && (t = !0);
											}),
											!t
										);
									}),
									Object.defineProperty(e, 'shortKeys', {
										get: function () {
											return {
												p: ['p'],
												del: ['del'],
												f: ['f'],
												s: ['s'],
												v: ['v'],
												w: ['w'],
												d: ['d'],
												c: ['c'],
												e: ['e'],
												t: ['t'],
												b: ['b'],
												x: ['x'],
												undo: ['ctrl', 'z'],
											};
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.ShortkeyHelper = i;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditHardwareTool = void 0);
						var o = n(2),
							a = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.view = n), r;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'manager', {
										get: function () {
											return this.hardware.manager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sash', {
										get: function () {
											return this.manager.sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.vshape = t.target),
											(this.hardware = this.vshape.attrs.robot);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											this.vshape && o.ShapeHelper.restoreShapeMatrix(this.vshape),
											requestAnimationFrame(function () {
												n.vshape && void 0 !== n.hardware && (n.detectHardwareSnap(), n.doTask(!0));
											});
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.hardware &&
											(this.magneticPoint && (this.hideSnaps(), (this.curPt = this.magneticPoint)),
											this.doTask(!1),
											this.view.mometoManager.checkPoint(),
											this.vshape && o.ShapeHelper.restoreShapeMatrix(this.vshape),
											(this.hardware = void 0),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t));
									}),
									(t.prototype.detectHardwareSnap = function () {
										var e = this;
										this.hideSnaps(), (this.magneticPoint = void 0);
										var t = this.hardware
											.allSameHardwares()
											.map(function (t) {
												return t.snapHardware(e.hardware, e.curPt);
											})
											.filter(function (e) {
												return void 0 !== e;
											});
										0 !== t.length &&
											(this.displaySnap(t[0].snapLine.start, t[0].snapLine.end),
											(this.magneticPoint = t[0].snapLine.end));
									}),
									t
								);
							})(n(5).Tool);
						t.EditHardwareTool = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PointCut = void 0);
						var i = r(n(0)),
							o = n(2),
							a = n(1),
							s = n(9),
							l = (function () {
								function e(e) {
									(this.polygon = e), (this.splitPoly = []), (this.edgesOnLine = []);
								}
								return (
									Object.defineProperty(e.prototype, 'crossCount', {
										get: function () {
											return this.edgesOnLine.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.cloneElement = function () {
										var e = this,
											t = [],
											n = [];
										return (
											this.splitPoly.forEach(function (r) {
												var i = r.clone();
												t.push(i),
													e.edgesOnLine.findIndex(function (e) {
														return e === r;
													}) >= 0 && n.push(i);
											}),
											s.Splitter.doubleLinked(t),
											n
										);
									}),
									(e.prototype.feedData = function (e, t) {
										var n = this;
										e.splice(0, e.length),
											t.splice(0, t.length),
											this.splitPoly.forEach(function (r) {
												e.push(r),
													n.edgesOnLine.findIndex(function (e) {
														return e === r;
													}) >= 0 && t.push(r);
											}),
											s.Splitter.doubleLinked(e);
									}),
									(e.prototype.splitEdges = function (e) {
										var t = this,
											n = this.polygon;
										(this.splitPoly = []),
											(this.edgesOnLine = []),
											void 0 === n.circlePolygon()
												? void 0 === n.ringPolygon()
													? n.edges.forEach(function (n) {
															var r = n.clone(),
																i = new s.ShapeElement(r),
																a = e.filter(function (e) {
																	return n.contains(e) && !n.end.equalTo(e);
																});
															if (0 !== a.length) {
																if (1 === a.length && n.start.equalTo(a[0]))
																	return t.splitPoly.push(i), void t.edgesOnLine.push(i);
																a.sort(function (e, t) {
																	return o.Utils.edgeDistance(n, e) - o.Utils.edgeDistance(n, t);
																}),
																	a.forEach(function (e) {
																		var n = r.split(e);
																		2 === n.length &&
																			((i = new s.ShapeElement(n[0])),
																			t.splitPoly.push(i),
																			e !== a[0] && t.edgesOnLine.push(i),
																			e === a[a.length - 1] &&
																				((i = new s.ShapeElement(n[1])),
																				t.splitPoly.push(i),
																				t.edgesOnLine.push(i))),
																			(r = n[n.length - 1]);
																	});
															} else t.splitPoly.push(i);
													  })
													: this.splitRing(e)
												: this.splitCircle(e);
									}),
									(e.prototype.splitCircle = function (e) {
										for (var t = new a.WinPolygon(), n = 0; n < e.length; n++) {
											var r = e[n],
												o = e[(n + 1) % e.length];
											t.add(i.default.segment(r, o));
										}
										t.done(), t.orientation === i.default.ORIENTATION.CCW || (e = e.reverse());
										var l = this.polygon.circlePolygon(),
											h = new i.default.Vector(l.center, e[0]).slope;
										for (n = 0; n < e.length; n++) {
											r = e[(n + 1) % e.length];
											var c = new s.ShapeElement(
												i.default.arc(
													l.center,
													l.r.valueOf(),
													h,
													(h = new i.default.Vector(l.center, r).slope),
													!0,
												),
											);
											this.splitPoly.push(c), this.edgesOnLine.push(c);
										}
									}),
									(e.prototype.splitRing = function (e) {
										var t = this;
										if (2 === e.length) {
											var n = this.polygon.ringPolygon();
											e.forEach(function (e) {
												var r = new i.default.Vector(n.pc, e).slope,
													o = i.default.arc(n.pc, n.ir, r, r + 2 * Math.PI, !0);
												o.contains(e) || (o = i.default.arc(n.pc, n.or, r, r + 2 * Math.PI, !0));
												var a = new s.ShapeElement(o);
												t.splitPoly.push(a), t.edgesOnLine.push(a);
											});
										} else console.warn('ring supports only two point splitting!');
									}),
									e
								);
							})();
						t.PointCut = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoubleEarsFrametify = void 0);
						var a = o(n(0)),
							s = n(58),
							l = n(2),
							h = n(1),
							c = n(11),
							u = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n.innerEdges = []), (n.outsidePath = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										this.analyse(e);
										var t = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													this.outsidePath[3].start,
													this.innerEdges[1].start,
													this.innerEdges[2].start,
													this.innerEdges[2].end,
												]),
											),
											n = 0;
										this.poly.hasBase ||
											this.poly.earPosition !== c.Direction.Up ||
											(n = this.poly.pullingHeight[4] - e[0]);
										var r = new h.WinPolygon(
											h.PolygonCreator.Ins.joinPointsWithSegment([
												this.innerEdges[3].start,
												this.innerEdges[4].start.translate(a.default.vector(0, -1).multiply(n)),
												this.innerEdges[5].start.translate(a.default.vector(0, -1).multiply(n)),
												this.innerEdges[5].end,
											]),
										);
										r.polyId.pos = 0;
										var i = new h.WinPolygon(
											h.PolygonCreator.Ins.joinPointsWithSegment([
												this.outsidePath[5].end,
												this.innerEdges[6].start,
												this.innerEdges[7].start,
												this.innerEdges[7].end,
											]),
										);
										return (i.polyId.pos = 1), [t, r, i];
									}),
									(t.prototype.barPolygons = function (e, t) {
										void 0 === t[4] && (t[4] = l.EdgeJointWay.Vertical),
											void 0 === t[5] && (t[5] = l.EdgeJointWay.Vertical);
										var n = this.createBar(this.outsidePath, this.innerEdges, t),
											r = n[3].mulShape;
										return (
											(n[3].mulShape = a.default.segment(
												a.default
													.line(r.start, r.end)
													.intersect(
														a.default.line(this.poly.edge(0).start, this.poly.edge(0).end),
													)[0],
												r.end,
											)),
											(r = n[5].mulShape),
											(n[5].mulShape = a.default.segment(
												r.start,
												a.default
													.line(r.start, r.end)
													.intersect(
														a.default.line(this.poly.edge(0).start, this.poly.edge(0).end),
													)[0],
											)),
											(n[2].epDock.etDock = l.Dock.Frame(n[3].polyId)),
											(n[3].epDock.stDock = l.Dock.Frame(n[0].polyId)),
											(n[5].epDock.etDock = l.Dock.Frame(n[0].polyId)),
											(n[6].epDock.stDock = l.Dock.Frame(n[5].polyId)),
											this.poly.hasBase ||
												this.poly.earPosition !== c.Direction.Up ||
												(n[4].virtual = !0),
											n
										);
									}),
									(t.prototype.analyse = function (e) {
										var t = this.poly.edges,
											n = a.default.line(t[3].start, t[3].end).intersect(t[0])[0],
											r = a.default.line(t[5].start, t[5].end).intersect(t[0])[0],
											i = [
												a.default.segment(n, t[1].start),
												t[1].clone(),
												t[2].clone(),
												t[3].clone(),
												t[4].clone(),
												t[5].clone(),
												t[6].clone(),
												t[7].clone(),
												a.default.segment(t[0].start, r),
												a.default.segment(r, n),
											],
											o = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													i[0].start,
													i[4].start,
													i[5].start,
													i[9].start,
												]),
											),
											l =
												(o.edges.map(function (t) {
													return e;
												}),
												s.Frametify.findPoly(o, [e[3], e[4], e[5], e[0]], !0).edges),
											c = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													i[1].start,
													i[2].start,
													a.default.line(i[2].start, i[2].end).intersect(l[0])[0],
													a.default.line(l[0].start, l[0].end).intersect(o.edge(3))[0],
												]),
											),
											u = s.Frametify.findPoly(c, [e[1], e[2], e[3], e[0]], !0).edges,
											p = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													i[7].start,
													i[8].start,
													a.default.line(l[2].start, l[2].end).intersect(o.edge(3))[0],
													a.default.line(i[6].start, i[6].end).intersect(l[2])[0],
												]),
											),
											f = s.Frametify.findPoly(p, [e[7], e[0], e[5], e[6]], !0).edges;
										(this.outsidePath = [
											a.default.segment(i[8].start, i[1].start),
											i[1].clone(),
											i[2].clone(),
											a.default.segment(
												a.default
													.line(f[1].start, u[3].end)
													.intersect(a.default.line(i[3].start, i[3].end))[0],
												i[4].start,
											),
											i[4].clone(),
											a.default.segment(
												i[5].start,
												a.default
													.line(f[1].start, u[3].end)
													.intersect(a.default.line(i[5].start, i[5].end))[0],
											),
											i[6].clone(),
											i[7].clone(),
										]),
											(this.innerEdges = [
												a.default.segment(f[1].start, u[3].end),
												a.default.segment(u[0].start, u[1].start),
												a.default.segment(u[1].start, u[1].intersect(this.outsidePath[3])[0]),
												a.default.segment(l[0].start, l[1].start),
												a.default.segment(l[1].start, l[2].start),
												a.default.segment(l[2].start, l[3].start),
												a.default.segment(f[3].intersect(this.outsidePath[5])[0], f[0].start),
												a.default.segment(f[0].start, f[1].start),
											]);
									}),
									t
								);
							})(s.Frametify);
						t.DoubleEarsFrametify = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.KfcFrametify = void 0);
						var a = o(n(0)),
							s = n(58),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n._innerPolygons = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										var t = this.inner0Polygon(e),
											n = this.inner1Polygon(e);
										n.polyId.pos = 0;
										var r = this.inner2Polygon(e);
										return (r.polyId.pos = 1), (this._innerPolygons = [t, n, r]), [t, n, r];
									}),
									(t.prototype.barPolygons = function (e, t) {
										var n = this.poly.edges,
											r = this._innerPolygons[0].edges,
											i = this._innerPolygons[1].edges,
											o = this._innerPolygons[2].edges;
										this.poly.bottomInnerDim ||
											((n[2] = a.default.segment(
												n[2].start,
												n[2].end.translate(n[2].tangentInStart().multiply(e[3])),
											)),
											(n[3] = n[3].translate(n[2].tangentInStart().multiply(e[3]))),
											(n[4] = a.default.segment(
												n[4].start.translate(n[4].tangentInStart().multiply(e[3])),
												n[4].end.translate(n[4].tangentInEnd().multiply(e[5])),
											)),
											(n[5] = n[5].translate(n[6].tangentInEnd().multiply(e[5]))),
											(n[6] = a.default.segment(
												n[6].start.translate(n[6].tangentInEnd().multiply(e[5])),
												n[6].end,
											)));
										var s = [
												n[0],
												n[1],
												n[2],
												a.default.segment(
													n[3].start,
													n[3].end.translate(n[3].tangentInEnd().multiply(e[0])),
												),
												n[4],
												a.default.segment(
													n[5].start.translate(n[5].tangentInStart().multiply(e[0])),
													n[5].end,
												),
												n[6],
												n[7],
											],
											h = [
												a.default.segment(o[3].start, r[3].end),
												r[0],
												r[1],
												r[2],
												i[1],
												o[0],
												o[1],
												o[2],
											];
										t[4] = t[5] = l.EdgeJointWay.Default;
										var c = this.createBar(s, h, t);
										return (c[4].virtual = !0), c;
									}),
									(t.prototype.inner0Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[1].start,
													t[1].end,
													t[3].start,
													t[3].end,
												]),
											),
											r = [e[1], e[2], this.poly.bottomInnerDim ? e[3] : 0, e[0]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner1Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[3].end,
													t[3].start,
													t[5].end,
													t[5].start,
												]),
											),
											r = [
												this.poly.bottomInnerDim ? 0 : e[3],
												this.poly.pullingHeight,
												this.poly.bottomInnerDim ? 0 : e[5],
												e[0],
											],
											i = this.findInnerPoly(n, r);
										return (i.edDock.docks[1] = l.Dock.None()), i;
									}),
									(t.prototype.inner2Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[5].start,
													t[5].end,
													t[7].start,
													t[7].end,
												]),
											),
											r = [this.poly.bottomInnerDim ? e[5] : 0, e[6], e[7], e[0]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.findInnerPoly = function (e, t) {
										return new h.WinPolygon(
											s.Frametify.findParallelEdges(e.edges, t, !0, e.orientation, !0),
										);
									}),
									t
								);
							})(s.Frametify);
						t.KfcFrametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Shape = void 0);
						var a = o(n(56)),
							s = o(n(0)),
							l = n(7),
							h = n(2),
							c = n(1),
							u = (function () {
								function e(e, t) {
									(this.type = e),
										(this.polygon = t),
										(this.id = -1),
										(this.parentId = -1),
										(this.children = []),
										(this.tapIdx = 0),
										(this.id = h.IdCreator.gen()),
										(this.tapIdx = h.ShapeIdx.idx(e));
								}
								return (
									Object.defineProperty(e.prototype, 'obj', {
										get: function () {
											return this;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'top', {
										get: function () {
											return void 0 === this.parent ? this : this.parent.top;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'topFrame', {
										get: function () {
											var e = this.top;
											if (e instanceof c.Frame) return e;
											throw new Error('Cannot find the top frame!');
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isFrame', {
										get: function () {
											return 'frameManager' in this;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.addToGroup = function (e) {
										if (this.parent) {
											var t = this.parent.gshape;
											t && t.add.apply(t, i(e));
										}
									}),
									(e.prototype.recycleFromGroup = function (e) {
										this.parent &&
											this.parent.gshape &&
											e.forEach(function (e) {
												e.moveTo(e.getLayer()), e.hide();
											});
									}),
									(e.prototype.draw = function (e) {
										if (-1 === this.id)
											throw new Error('recycled shape:' + this.type + ' can not be used again!');
										if (0 !== this.children.length) {
											if (void 0 === this.gshape) {
												var t = this.parent ? this.parent.gshape : void 0;
												(this.gshape = l.Artisan.recycleGroup(e.activeLayer, t)),
													this.gshape.setAttr('data', {}),
													this.gshape.setAttr('robot', this);
											}
											if (
												(this.children.sort(function (e, t) {
													return e.tapIdx - t.tapIdx;
												}),
												this.children.forEach(function (t) {
													return t.draw(e);
												}),
												this.gshape && this.gshape.parent)
											) {
												var n = this.Zindex;
												n > -1 &&
													n < this.gshape.parent.children.length &&
													this.gshape.setZIndex(n);
											}
										}
									}),
									Object.defineProperty(e.prototype, 'Zindex', {
										get: function () {
											return -1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.add = function (e) {
										if (e.id === this.id)
											throw new Error('shape id:' + this.id + ' can not be equal to parent id!');
										(e.parent = this),
											(e.parentId = this.id),
											this.children.indexOf(e) >= 0 || (this.children[this.children.length] = e);
									}),
									(e.prototype.remove = function (e) {
										if (e) {
											var t = this.children.indexOf(e);
											t < 0 ||
												(e.recycle(),
												e.clearChildren(),
												(e.parent = void 0),
												this.children.splice(t, 1));
										} else
											this.parent
												? this.parent.remove(this)
												: (this.clearChildren(), this.recycle());
									}),
									(e.prototype.clearChildren = function () {
										if (
											(this.children.forEach(function (e) {
												e.recycle(), e.clearChildren(), (e.parent = void 0);
											}),
											this.parent && this.gshape)
										) {
											var e = this.gshape;
											e.moveTo(e.getLayer()), e.hide(), (this.gshape = void 0);
										}
										this.children = [];
									}),
									(e.prototype.recycle = function (e) {
										void 0 === e && (e = !1), e && (h.IdCreator.recycle(this.id), (this.id = -1));
									}),
									(e.prototype.toObject = function () {
										if (-1 !== this.id) {
											var e = [];
											return (
												this.children.forEach(function (t) {
													var n = t.toObject();
													n && e.push(n);
												}),
												{
													id: this.id,
													parentId: this.parentId,
													children: e,
													tapIdx: this.tapIdx,
													type: this.type,
													polygon: this.polygon.toJSON(),
												}
											);
										}
									}),
									(e.prototype.translate = function (e) {}),
									(e.prototype.hideAssist = function () {}),
									(e.prototype.updatePoly = function (e) {}),
									(e.frameToMullionType = function (e) {
										if (e === c.ShapeType.Frame) return c.ShapeType.FrameMullion;
										if (e === c.ShapeType.Sash) return c.ShapeType.SashMullion;
										if (e === c.ShapeType.GuardSash) return c.ShapeType.SashMullion;
										if (e === c.ShapeType.CircleSash) return c.ShapeType.SashMullion;
										if (e === c.ShapeType.KfcSash) return c.ShapeType.SashMullion;
										if (e === c.ShapeType.Screen) return c.ShapeType.ScreenMullion;
										if (e === c.ShapeType.ShadePushSash) return c.ShapeType.ShadePushSashMullion;
										throw new Error(e + "  can't be supported!");
									}),
									(e.prototype.getParentMatrices = function () {
										if (!this.gshape) return [];
										for (
											var e = [], t = this.gshape;
											t && !(t instanceof a.default.Stage) && !(t instanceof a.default.Layer);

										) {
											var n = t.getTransform().m;
											e.push(s.default.matrix(n[0], n[1], n[2], n[3], n[4], n[5])), (t = t.parent);
										}
										return e;
									}),
									e
								);
							})();
						t.Shape = u;
					},
					function (e, t, n) {
						e.exports = n(289);
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.UnitConvertion = t.Unit = void 0);
						var r,
							i = n(83);
						!(function (e) {
							(e.Millimeters = 'Millimeters'),
								(e.Centimeters = 'Centimeters'),
								(e.Inches = 'Inches');
						})((r = t.Unit || (t.Unit = {})));
						var o = (function () {
							function e() {
								(this.defaultDigits = new Map([
									[r.Millimeters, 1],
									[r.Centimeters, 2],
									[r.Inches, 4],
								])),
									(this.lengthConvertion = new Map([
										[r.Millimeters, 1],
										[r.Centimeters, 0.1],
										[r.Inches, 1 / 25.4],
									])),
									(this.areaConvertion = new Map([
										[r.Millimeters, 1e-6],
										[r.Centimeters, 1e-6],
										[r.Inches, 1 / (7741.92 * 12)],
									]));
							}
							return (
								Object.defineProperty(e, 'Ins', {
									get: function () {
										return e._ins || (e._ins = new e()), e._ins;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.lengthForOutput = function (e) {
									if (i.DrawParams.Ins.unitDigits < 0 || i.DrawParams.Ins.unitDigits > 6)
										throw new Error('digits not support');
									var t = Math.pow(10, i.DrawParams.Ins.unitDigits),
										n = e * this.lengthConvertion.get(i.DrawParams.Ins.unit);
									return Math.round(n * t) / t;
								}),
								(e.prototype.area = function (e) {
									return e * this.areaConvertion.get(i.DrawParams.Ins.unit);
								}),
								(e.prototype.length = function (e) {
									return e * this.lengthConvertion.get(i.DrawParams.Ins.unit);
								}),
								(e.prototype.unitlessLength = function (e) {
									return e / this.lengthConvertion.get(i.DrawParams.Ins.unit);
								}),
								(e.prototype.unitlessArea = function (e) {
									return e / this.areaConvertion.get(i.DrawParams.Ins.unit);
								}),
								e
							);
						})();
						t.UnitConvertion = o;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.addDecorationBarRet = t.MullionManager = void 0);
						var o,
							a = i(n(0)),
							s = n(65),
							l = n(6),
							h = n(9),
							c = n(13),
							u = n(2),
							p = n(1),
							f = (function () {
								function e(e, t) {
									var n = this;
									void 0 === t && (t = p.ShapeType.Glass),
										(this.host = e),
										(this.fillType = t),
										(this.addFiller = function (e) {
											return n.fillerManager.addFiller(e);
										}),
										(this.removeFiller = function (e) {
											return n.fillerManager.removeFiller(e);
										}),
										(this.findPoly = function (e) {
											return n.splitter.findPoly(e);
										}),
										(this.hitTest = function (e) {
											return n.splitter.hitTest(e);
										}),
										(this.where = p.Shape.frameToMullionType(this.host.type)),
										(this.splitter = new h.SplitterAgent(this.host, this.where)),
										(this.fillerManager = new c.FillerManager(this.host, t)),
										(this.decorationBarManager = new c.DecorationBarManager(this.host));
								}
								return (
									Object.defineProperty(e.prototype, 'allProfileSize', {
										set: function (e) {
											this.splitter.allProfileSize = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'reinforcedFrameMullionSize', {
										set: function (e) {
											var t = this;
											this.splitter.lineProfileSizes.forEach(function (n, r) {
												t.splitter.lines[r].reinforced &&
													(t.splitter.alignForNewProfileSize(r, e),
													(t.splitter.lineProfileSizes[r] = e));
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.addMullion = function (e, t) {
										var n = this;
										void 0 === t && (t = {});
										var r = this.bars.length,
											i = this.splitter.split(e, this.fillerManager, t);
										if (0 === i.length) return !1;
										i.forEach(function (e) {
											var t = new p.Bar(e, n.where);
											n.host.add(t);
										}),
											this.fillerManager.createFiller();
										var o = this.bars.length;
										return (
											o - r == 1 &&
												this.bars[o - 1].setBarDimAlign(this.host.topFrame.view, this, !1),
											!0
										);
									}),
									(e.prototype.addDecorationBar = function (e, t) {
										var n = this.glasses.find(function (t) {
											return t.polygon.contains(e);
										});
										if (!n) return o.notInArea;
										var r = (n.bead ? n.bead.innerPoly[0] : n.polygon).clone();
										return (
											r.polyId.deserialize(n.polygon.polyId),
											(t.polygon = r),
											(t.decorationBar.hostPoly = r),
											void 0 !== this.decorationBarManager.getDecorationBar(r.polyId)
												? o.alreadyExist
												: (this.decorationBarManager.addDecorationBar(n.polygon, t), o.create)
										);
									}),
									(e.prototype.dragMullion = function (e, t) {
										var n = this,
											r = e.polygon.polyId.idx,
											i = this.bars.find(function (t) {
												return t.polygon.polyId.equalTo(e.polygon.polyId);
											}),
											o = this.splitter.dragSplit(r, t, i);
										return (
											this.clear(),
											0 === o.length
												? (this.fillerManager.createFiller(), !1)
												: (o.forEach(function (e) {
														var t = new p.Bar(e, n.where);
														n.host.add(t);
												  }),
												  this.fillerManager.createFiller(),
												  this.decorationBarManager.updatePoly(),
												  this.host.borders.updatePoly(),
												  !0)
										);
									}),
									(e.prototype.dragInnerMullion = function (e, t, n) {
										var r = this,
											i = this.splitter.dragInnerSplit(e, t, n);
										return (
											0 !== i.length &&
											(i.length > 0 && this.clear(),
											i.forEach(function (e) {
												var t = new p.Bar(e, r.where);
												r.host.add(t);
											}),
											this.fillerManager.createFiller(),
											!0)
										);
									}),
									(e.prototype.delete = function (e, t) {
										var n = this;
										this.glasses.forEach(function (e) {
											return e.delete();
										}),
											this.fillerManager.toJSON(),
											this.decorationBarManager.decorationBars.forEach(function (e) {
												return e.delete(n.decorationBarManager);
											});
										var r = this.bars.find(function (e) {
											return e.highlighted;
										});
										r &&
											(this.splitter.lines.splice(r.polyId.idx, 1),
											this.updatePoly(!0),
											this.hideAssist(),
											this.bars.forEach(function (t) {
												return t.draw(e);
											}),
											this.glasses.forEach(function (t) {
												return t.draw(e);
											}),
											this.host instanceof p.Frame &&
												(this.host.dim.diMgr.clear(),
												(this.splitter.pullingHeights = []),
												(this.host.frameManager._virtuals = [])),
											t &&
												(t.reLocateSashes(this.splitter.avaiablePoly, this.addFiller, e),
												t.recreate(this.findPoly),
												this.fillerManager.mergeFiller(),
												this.fillerManager.createFiller()));
									}),
									(e.prototype.toJSON = function () {
										var e = [];
										return (
											this.splitter.lines.forEach(function (t) {
												return e.push(t.toJSON());
											}),
											{
												sp: this.splitter.lines.map(function (e) {
													return e.toJSON();
												}),
												fls: this.fillerManager.toJSON(),
												lpfs: this.splitter.lineProfileSizes,
												dbs: this.decorationBarManager.toJSON(),
												phs: this.splitter.pullingHeights.map(function (e) {
													return {
														polyId: e.polyId.toJSON(),
														height: e.height,
													};
												}),
											}
										);
									}),
									(e.prototype.deserialize = function (e) {
										var t = this;
										this.clear(),
											this.dockMgr.clear(),
											(this.splitter.lines = []),
											(this.splitter.lineProfileSizes = []),
											Array.isArray(e)
												? e.forEach(function (e) {
														t.splitter.lines.push(u.SplitterObj.deserialize(e)),
															t.splitter.lineProfileSizes.push(
																t.host.topFrame.profileSizeManager.get(t.where),
															);
												  })
												: (this.fixData(e),
												  e.sp.forEach(function (n, r) {
														t.splitter.lines.push(u.SplitterObj.deserialize(n)),
															t.splitter.lineProfileSizes.push(
																e.lpfs
																	? e.lpfs[r]
																	: t.host.topFrame.profileSizeManager.get(t.where),
															);
												  }),
												  this.fillerManager.deserialize(e.fls),
												  e.phs &&
														Array.isArray(e.phs) &&
														(this.splitter.pullingHeights = e.phs.map(function (e) {
															return {
																polyId: new u.PolyId(e.polyId.idx, e.polyId.pos),
																height: e.height,
															};
														})));
									}),
									(e.prototype.fixData = function (e) {
										var t = this;
										e.sp.forEach(function (e) {
											void 0 === e.kw &&
												t.host instanceof p.Sash &&
												t.host.hardwareManager instanceof c.KfcSashHardwareManager &&
												t.host.hardwareManager.handleType === p.HardwareShape.KfcHandle &&
												(e.kw = !0);
										});
									}),
									(e.prototype.clear = function () {
										var e = this;
										this.bars.forEach(function (t) {
											return e.host.remove(t);
										}),
											this.glasses.forEach(function (t) {
												t.bead && (t.bead.frameManager.hideAssist(), t.bead.remove()),
													e.host.remove(t);
											}),
											this.decorationBarManager.decorationBars.forEach(function (t) {
												return e.host.remove(t);
											});
									}),
									(e.prototype.updatePoly = function (e) {
										var t,
											n = this;
										void 0 === e && (e = !1),
											this.clear(),
											this.host instanceof p.Frame && this.host.frameManager.recreateBars(),
											e
												? ((t = this.splitter.updatePoly(e)),
												  this.host instanceof p.Frame && this.host.frameManager.recreateBars(),
												  (t = this.splitter.updatePoly(e)))
												: (t = this.splitter.updatePoly(e)),
											t.forEach(function (e) {
												var t = new p.Bar(e, n.where);
												n.host.add(t);
											}),
											e && this.fillerManager.mergeFiller(),
											this.fillerManager.createFiller(),
											this.decorationBarManager.updatePoly();
									}),
									(e.prototype.setSplitOperator = function (e, t, n) {
										t
											? (this.splitter.lines[e].start.split = n)
											: (this.splitter.lines[e].end.split = n);
									}),
									Object.defineProperty(e.prototype, 'dockMgr', {
										get: function () {
											return this.splitter.dockMgr;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'dockMgrForDim', {
										get: function () {
											var e = this,
												t = new u.DockManager(),
												n = new Map();
											return (
												this.dockMgr.dockData.forEach(function (t, r) {
													var i,
														o = new u.PolyId().deserialize(JSON.parse(r)),
														s = e.host.findBarByPolyId(o);
													i = s
														? s.polyId.pos < 0
															? s.insideEdge
															: s.polygon.mulShape
														: e.host.polygon.edge(o.idx);
													var l = e.host instanceof p.Frame && i instanceof a.default.Segment,
														c = [];
													t.forEach(function (n, r) {
														var o = n.idx.idx,
															s = e.splitter.lines[o];
														if (s && s.line instanceof h.CutLine) {
															if (!s.line.generateDockDataForDim) return;
															if (
																s.line.dimHiddenPos.some(function (e) {
																	return n.idx.pos === e;
																})
															)
																return;
														}
														var p = n.start ? s.start.split : s.end.split;
														if (l && !p) {
															var f = e.host.mulManager.splitter.lineProfileSizes[n.idx.idx],
																d = i,
																g = n.pt.projectionOn(a.default.line(d.start, d.end));
															if (0 === r) {
																var y = g.distanceTo(d.start)[0];
																if (a.default.Utils.LE(y, f / 2)) return;
															}
															if (
																r === t.length - 1 &&
																((y = g.distanceTo(d.end)[0]), a.default.Utils.LE(y, f / 2))
															)
																return;
														}
														var m = {
															type: n.type,
															idx: new u.PolyId(n.idx.idx, n.idx.pos),
															pt: n.pt.clone(),
															start: n.start,
														};
														c.push(m);
													}),
														c.length > 0 && n.set(r, c);
												}),
												(t.dockData = n),
												t
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasSplitBar', {
										get: function () {
											return this.splitter.hasSplitBar;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'bars', {
										get: function () {
											var e = this,
												t = [];
											return (
												this.host.children.forEach(function (n) {
													n instanceof p.Bar && n.where === e.where && t.push(n);
												}),
												t
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'glasses', {
										get: function () {
											return this.fillerManager.fillers
												.filter(function (e) {
													return e instanceof p.Area;
												})
												.map(function (e) {
													return e;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shades', {
										get: function () {
											return this.fillerManager.fillers
												.filter(function (e) {
													return e instanceof p.Shade;
												})
												.map(function (e) {
													return e;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'holes', {
										get: function () {
											return this.glasses
												.filter(function (e) {
													return e instanceof p.Glass;
												})
												.map(function (e) {
													return e.holes;
												})
												.flat();
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.translate = function (e) {
										this.bars.forEach(function (t) {
											return t.translate(e);
										}),
											this.glasses.forEach(function (t) {
												return t.translate(e);
											}),
											this.shades.forEach(function (t) {
												return t.translate(e);
											}),
											this.splitter.translate(e),
											this.decorationBarManager.translate(e);
									}),
									(e.prototype.snapEdge = function (e, t, n) {
										var i,
											o,
											a = this.bars;
										try {
											for (var s = r(a), l = s.next(); !l.done; l = s.next()) {
												var c = l.value;
												if (!(c.polygon.spLine.line instanceof h.FrametifyLike)) {
													var u = c.snapEdge(e, t, n);
													if (u) return u;
												}
											}
										} catch (e) {
											i = {
												error: e,
											};
										} finally {
											try {
												l && !l.done && (o = s.return) && o.call(s);
											} finally {
												if (i) throw i.error;
											}
										}
									}),
									(e.allBarsAlignedWith = function (e) {
										var t = e.topFrame.view,
											n = e.polygon.mulShape;
										if (!(n instanceof a.default.Segment)) return [];
										var r = [],
											i = [];
										return (
											t.shapeManager.shapem.forEach(function (e) {
												i.push(e),
													e.sashManager.allSashes.forEach(function (e) {
														return i.push(e);
													});
											}),
											i.forEach(function (t) {
												t.mulManager.bars.forEach(function (i) {
													if (
														i.parentId !== e.parentId ||
														i.polygon.polyId.idx !== e.polygon.polyId.idx
													) {
														var o = i.polygon.mulShape;
														o instanceof a.default.Segment &&
															u.Utils.canSnap(n, o, n.start, 0) &&
															r.push({
																iHost: t,
																bar: i,
															});
													}
												});
											}),
											r
										);
									}),
									Object.defineProperty(e.prototype, 'inactive', {
										get: function () {
											return (
												this.bars.every(function (e) {
													return !e.highlighted;
												}) &&
												this.glasses.every(function (e) {
													return e.bead ? !e.highlighted && e.bead.inactive : !e.highlighted;
												})
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.highlight = function (e) {
										var t = this;
										this.bars.forEach(function (t) {
											return t.highlight(e);
										}),
											this.glasses.forEach(function (n) {
												n.highlight(e), n.bead && n.bead.highlight(e);
												var r = t.decorationBarManager.getDecorationBar(n.polygon.polyId);
												if ((r && r.highlight(e), !e && n instanceof p.Glass)) {
													var i = n.topFrame.view;
													n.holes.forEach(function (e) {
														(e.selected = !1), e.draw(i);
													});
												}
											});
									}),
									(e.prototype.hitBar = function (e, t) {
										var n, i;
										if (void 0 !== this.mullionRobot && this.mullionRobot.hitBar(e))
											return (
												this.bars.forEach(function (e) {
													return e.highlight(!1);
												}),
												u.HitResult.Control
											);
										var o = u.HitResult.None;
										this.bars.forEach(function (t) {
											var n = t.hitTest(e);
											t.highlight(n), n && (o = u.HitResult.Bar);
										}),
											this.showMullionRobot(t);
										var a = this.glasses;
										try {
											for (var s = r(a), h = s.next(); !h.done; h = s.next()) {
												var c = h.value,
													p = c.hitBar(e, t),
													f = this.decorationBarManager.getDecorationBar(c.polygon.polyId);
												if (p === u.HitResult.Glass) {
													var d = !1;
													void 0 !== f && ((d = f.hitTest(e)), f.highlight(d)),
														c.highlight(!d),
														d
															? f.decorationBar.emitEvent(c.polygon.polyId, this, t)
															: t.eventBus.emit({
																	type: l.EventType.filler_settings,
																	payload: new l.FillerSettings(c.polygon.polyId, this, t),
															  });
												} else void 0 !== f && f.highlight(!1), c.highlight(!1);
												p !== u.HitResult.None && (o = p);
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												h && !h.done && (i = s.return) && i.call(s);
											} finally {
												if (n) throw n.error;
											}
										}
										return o;
									}),
									(e.prototype.refreshMullionRobot = function (e, t) {
										this.mullionRobot.hide(), this.mullionRobot.attachTo(t);
									}),
									(e.prototype.showMullionRobot = function (e, t) {
										void 0 === this.mullionRobot &&
											(this.mullionRobot = new s.MullionRobot(this, e)),
											void 0 === t &&
												(t = this.bars.find(function (e) {
													return e.highlighted;
												})),
											void 0 !== t
												? (this.mullionRobot.attachTo(t),
												  t.polygon.mulShape &&
														e.eventBus.emit({
															type: l.EventType.bar_modifier,
															payload: new l.BarModifier(
																this,
																t.polygon.polyId,
																t.polygon.mulShape.middle(),
																e,
															),
														}))
												: this.mullionRobot.hide();
									}),
									(e.prototype.hideAssist = function () {
										this.glasses.forEach(function (e) {
											return e.hideAssist();
										}),
											void 0 !== this.mullionRobot && this.mullionRobot.hide();
									}),
									(e.prototype.refresh = function (e) {
										this.host.updateFrame(this.splitter.hasSplitBar),
											this.host.draw(e),
											this.host instanceof p.Sash &&
												this.host.topFrame.sashManager.filterDuplicateDims(!0),
											e.activeLayer.batchDraw();
									}),
									(e.prototype.setEdgeWidth = function (e, t, n) {
										if (!(e < 0 || e >= this.splitter.lineProfileSizes.length))
											if (((this.splitter.lineProfileSizes[e] = t), this.host instanceof p.Sash)) {
												var r = this.host;
												r.updatePoly(),
													r.draw(n),
													this.host.topFrame.sashManager.filterDuplicateDims(!0),
													n.refresh();
											} else this.refresh(n);
									}),
									e
								);
							})();
						(t.MullionManager = f),
							(function (e) {
								(e.notInArea = 'notInArea'),
									(e.alreadyExist = 'alreadyExist'),
									(e.create = 'create');
							})((o = t.addDecorationBarRet || (t.addDecorationBarRet = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Runtime = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								(t.prototype.setCanvasScale = function (e, t, n, r) {
									void 0 === e && (e = 1),
										void 0 === t && (t = 1),
										void 0 === n && (n = 0),
										void 0 === r && (r = 0);
									var i = this.canvas;
									i.scale({
										x: e,
										y: t,
									}),
										i.position({
											x: n,
											y: r,
										}),
										i.batchDraw();
								}),
								t
							);
						})(n(110).View);
						t.Runtime = o;
						var a = n(64);
						Object.defineProperty(t, 'ToolType', {
							enumerable: !0,
							get: function () {
								return a.ToolType;
							},
						});
						var s = n(6);
						Object.defineProperty(t, 'EventType', {
							enumerable: !0,
							get: function () {
								return s.EventType;
							},
						});
						var l = n(114);
						Object.defineProperty(t, 'ShortkeyHelper', {
							enumerable: !0,
							get: function () {
								return l.ShortkeyHelper;
							},
						});
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						});
						var r = function (e, t) {
								if (Array.isArray(e)) return e;
								if (Symbol.iterator in Object(e))
									return (function (e, t) {
										var n = [],
											r = !0,
											i = !1,
											o = void 0;
										try {
											for (
												var a, s = e[Symbol.iterator]();
												!(r = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t);
												r = !0
											);
										} catch (e) {
											(i = !0), (o = e);
										} finally {
											try {
												!r && s.return && s.return();
											} finally {
												if (i) throw o;
											}
										}
										return n;
									})(e, t);
								throw new TypeError('Invalid attempt to destructure non-iterable instance');
							},
							i = (function () {
								function e(e, t) {
									for (var n = 0; n < t.length; n++) {
										var r = t[n];
										(r.enumerable = r.enumerable || !1),
											(r.configurable = !0),
											'value' in r && (r.writable = !0),
											Object.defineProperty(e, r.key, r);
									}
								}
								return function (t, n, r) {
									return n && e(t.prototype, n), r && e(t, r), t;
								};
							})(),
							o = n(527),
							a = n(526),
							s = (function () {
								function e(t) {
									var n = this;
									!(function (e, t) {
										if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
									})(this, e),
										(this._streams = new Map()),
										(this._getStreamWithSlicedHistory = function (e) {
											var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
												r = n._historySettings.get(e);
											if (r) {
												var i = r - t;
												return n
													._selectStream(e)
													.pipe((0, a.skip)(i))
													.asObservable();
											}
											return n._selectStream(e).asObservable();
										}),
										(this._subjectsEmitter = new o.ReplaySubject()),
										(this._historySettings = t || new Map()),
										t && this._initReplaySubjects(t);
								}
								return (
									i(e, [
										{
											key: 'select',
											value: function (e, t) {
												var n = this,
													r = this._selectStream(e);
												return (0, o.iif)(
													function () {
														return Number.isInteger(t) && n._historySettings.has(e);
													},
													this._getStreamWithSlicedHistory(e, t),
													r.asObservable(),
												);
											},
										},
										{
											key: 'getMainStream',
											value: function () {
												return this._subjectsEmitter.pipe((0, a.mergeAll)()).asObservable();
											},
										},
										{
											key: 'emit',
											value: function (e) {
												var t = e.type,
													n = e.payload;
												this._selectStream(t).next({
													type: t,
													payload: n,
												});
											},
										},
										{
											key: '_selectStream',
											value: function (e) {
												return (
													this._streams.has(e) || this._addNewStream(e, new o.Subject()),
													this._streams.get(e)
												);
											},
										},
										{
											key: '_updateMainStream',
											value: function (e) {
												var t = this._streams.get(e);
												t && this._subjectsEmitter.next(t);
											},
										},
										{
											key: '_initReplaySubjects',
											value: function (e) {
												var t = !0,
													n = !1,
													i = void 0;
												try {
													for (
														var a, s = e.entries()[Symbol.iterator]();
														!(t = (a = s.next()).done);
														t = !0
													) {
														var l = r(a.value, 2),
															h = l[0],
															c = l[1];
														this._addNewStream(h, new o.ReplaySubject(c));
													}
												} catch (e) {
													(n = !0), (i = e);
												} finally {
													try {
														!t && s.return && s.return();
													} finally {
														if (n) throw i;
													}
												}
											},
										},
										{
											key: '_addNewStream',
											value: function (e, t) {
												this._streams.set(e, t), this._updateMainStream(e);
											},
										},
									]),
									e
								);
							})();
						t.default = s;
					},
					function (e, t) {
						var n;
						n = (function () {
							return this;
						})();
						try {
							n = n || new Function('return this')();
						} catch (e) {
							'object' == typeof window && (n = window);
						}
						e.exports = n;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Tk = void 0);
						var i = r(n(127)),
							o = (function () {
								function e(e) {
									(this.wk = new i.default.Tkk(e)),
										(this.allow_tools = [
											'pan',
											'squareSelect',
											'wall',
											'frame_scalable',
											'frame_rectangle',
											'frame_springline',
											'mullion_cross_line',
											'mullion_horizontal',
											'mullion_vertical',
											'sash',
											'doubleSash',
											'screen',
											'doubleScreen',
											'antiTheft',
											'foldSash',
											'foldScreen',
											'slide',
											'connerJoiner',
											'editCornerRobot',
											'editCornerJoiner',
											'connector',
											'editConnector',
											'editConnectorRobot',
											'editDim',
											'editSash',
											'editHinge',
											'editHandle',
											'door',
											'editSkewText',
											'editSplitter',
											'editDragRobot',
											'editWallDragRobot',
											'editTopViewDragRobot',
											'editWallEdgeRobot',
										]);
								}
								return (
									(e.prototype.v = function () {
										this.wk.tv();
									}),
									(e.prototype.ca = function (e) {
										if (
											this.mini &&
											this.allow_tools.every(function (t) {
												return t !== e;
											})
										)
											throw new Error('【' + e + '】 ' + this.wk.e4);
									}),
									Object.defineProperty(e.prototype, 'mini', {
										get: function () {
											return this.wk.mini;
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.Tk = o;
					},
					function (e, t) {
						/*! For license information please see webcckey.min.js.LICENSE.txt */
						!(function (e, t) {
							for (var n in t) e[n] = t[n];
						})(
							t,
							(function (e) {
								var t = {};
								function n(r) {
									if (t[r]) return t[r].exports;
									var i = (t[r] = {
										i: r,
										l: !1,
										exports: {},
									});
									return e[r].call(i.exports, i, i.exports, n), (i.l = !0), i.exports;
								}
								return (
									(n.m = e),
									(n.c = t),
									(n.d = function (e, t, r) {
										n.o(e, t) ||
											Object.defineProperty(e, t, {
												enumerable: !0,
												get: r,
											});
									}),
									(n.r = function (e) {
										'undefined' != typeof Symbol &&
											Symbol.toStringTag &&
											Object.defineProperty(e, Symbol.toStringTag, {
												value: 'Module',
											}),
											Object.defineProperty(e, '__esModule', {
												value: !0,
											});
									}),
									(n.t = function (e, t) {
										if ((1 & t && (e = n(e)), 8 & t)) return e;
										if (4 & t && 'object' == typeof e && e && e.__esModule) return e;
										var r = Object.create(null);
										if (
											(n.r(r),
											Object.defineProperty(r, 'default', {
												enumerable: !0,
												value: e,
											}),
											2 & t && 'string' != typeof e)
										)
											for (var i in e)
												n.d(
													r,
													i,
													function (t) {
														return e[t];
													}.bind(null, i),
												);
										return r;
									}),
									(n.n = function (e) {
										var t =
											e && e.__esModule
												? function () {
														return e.default;
												  }
												: function () {
														return e;
												  };
										return n.d(t, 'a', t), t;
									}),
									(n.o = function (e, t) {
										return Object.prototype.hasOwnProperty.call(e, t);
									}),
									(n.p = ''),
									n((n.s = 0))
								);
							})([
								function (e, t, n) {
									'use strict';
									Object.defineProperty(t, '__esModule', {
										value: !0,
									}),
										(t.Tkk = void 0);
									const r = n(1).__importDefault(n(2));
									t.Tkk = class {
										constructor(e) {
											(this.tk = e),
												(this.data =
													'ewoic2lnIjoiaWxvdmV5b3Utd2lreXdpbi0xOTg2MDQxMSIsCiJlMSI6InRva2VuIGludmFsaWQhIHBsZWFzZSBjb250YWN0IGF3ZXMud2hlbkBnbWFpbC5jb20iLAoiZTIiOiJ0b2tlbiBoYXNuJ3QgYmVlbiBzdGFydGVkIHlldCEiLAoiZTMiOiJ0b2tlbiBleHBpcmVkISBwbGVhc2UgY29udGFjdCBhd2VzLndoZW5AZ21haWwuY29tIiwKImU0IjoiaXMgbm90IGF1dGhvcml6ZWQgdG8geW91LCBwbGVhc2UgY29udGFjdCB3ZWJjYyBieSBhd2VzLndoZW5AZ21haWwuY29'),
												'' !== e && (this.dec = this.pb(e));
										}
										tv() {
											const e = this.pt;
											if (!this.vs()) throw new Error(e.e1);
											const t = this.dec;
											if (new Date() < new Date(t.stm)) throw new Error(e.e2);
											if (new Date() > new Date(t.exp)) throw new Error(e.e3);
										}
										get mini() {
											return this.dec.lite;
										}
										get e4() {
											return this.pt.e4;
										}
										pb(e) {
											let t = e.split('.')[0].replace(/-/g, '+').replace(/_/g, '/'),
												n = decodeURIComponent(
													atob(t)
														.split('')
														.map(function (e) {
															return '%' + ('00' + e.charCodeAt(0).toString(16)).slice(-2);
														})
														.join(''),
												);
											return JSON.parse(n);
										}
										vs() {
											let e = this.tk.split('.'),
												t = e[0];
											return e[1] === this.sg(t);
										}
										encode(e) {
											let t = btoa(JSON.stringify(e));
											return `${t}.${this.sg(t)}`;
										}
										sg(e) {
											const t = (e) => {
												let t = e.split('').reverse(),
													n = '';
												return (
													t.forEach((e) => {
														let t = e.charCodeAt(0);
														(t += 411),
															(t *= t),
															(t -= 1986),
															(t = (t % 94) + 33),
															(t = 46 === t ? 47 : t),
															(n = `${n}${String.fromCharCode(t)}`);
													}),
													n
												);
											};
											let n = t(e),
												i = t(btoa(this.pt.sig));
											return r.default(`${n}:${i}`);
										}
										get pt() {
											return this.pb(this.data + 'tIgp9.1');
										}
									};
								},
								function (e, t, n) {
									'use strict';
									n.r(t),
										n.d(t, '__extends', function () {
											return i;
										}),
										n.d(t, '__assign', function () {
											return o;
										}),
										n.d(t, '__rest', function () {
											return a;
										}),
										n.d(t, '__decorate', function () {
											return s;
										}),
										n.d(t, '__param', function () {
											return l;
										}),
										n.d(t, '__metadata', function () {
											return h;
										}),
										n.d(t, '__awaiter', function () {
											return c;
										}),
										n.d(t, '__generator', function () {
											return u;
										}),
										n.d(t, '__createBinding', function () {
											return p;
										}),
										n.d(t, '__exportStar', function () {
											return f;
										}),
										n.d(t, '__values', function () {
											return d;
										}),
										n.d(t, '__read', function () {
											return g;
										}),
										n.d(t, '__spread', function () {
											return y;
										}),
										n.d(t, '__spreadArrays', function () {
											return m;
										}),
										n.d(t, '__spreadArray', function () {
											return v;
										}),
										n.d(t, '__await', function () {
											return w;
										}),
										n.d(t, '__asyncGenerator', function () {
											return b;
										}),
										n.d(t, '__asyncDelegator', function () {
											return S;
										}),
										n.d(t, '__asyncValues', function () {
											return _;
										}),
										n.d(t, '__makeTemplateObject', function () {
											return P;
										}),
										n.d(t, '__importStar', function () {
											return D;
										}),
										n.d(t, '__importDefault', function () {
											return T;
										}),
										n.d(t, '__classPrivateFieldGet', function () {
											return O;
										}),
										n.d(t, '__classPrivateFieldSet', function () {
											return M;
										});
									var r = function (e, t) {
										return (r =
											Object.setPrototypeOf ||
											({
												__proto__: [],
											} instanceof Array &&
												function (e, t) {
													e.__proto__ = t;
												}) ||
											function (e, t) {
												for (var n in t)
													Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
											})(e, t);
									};
									function i(e, t) {
										if ('function' != typeof t && null !== t)
											throw new TypeError(
												'Class extends value ' + String(t) + ' is not a constructor or null',
											);
										function n() {
											this.constructor = e;
										}
										r(e, t),
											(e.prototype =
												null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
									}
									var o = function () {
										return (o =
											Object.assign ||
											function (e) {
												for (var t, n = 1, r = arguments.length; n < r; n++)
													for (var i in (t = arguments[n]))
														Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
												return e;
											}).apply(this, arguments);
									};
									function a(e, t) {
										var n = {};
										for (var r in e)
											Object.prototype.hasOwnProperty.call(e, r) &&
												t.indexOf(r) < 0 &&
												(n[r] = e[r]);
										if (null != e && 'function' == typeof Object.getOwnPropertySymbols) {
											var i = 0;
											for (r = Object.getOwnPropertySymbols(e); i < r.length; i++)
												t.indexOf(r[i]) < 0 &&
													Object.prototype.propertyIsEnumerable.call(e, r[i]) &&
													(n[r[i]] = e[r[i]]);
										}
										return n;
									}
									function s(e, t, n, r) {
										var i,
											o = arguments.length,
											a = o < 3 ? t : null === r ? (r = Object.getOwnPropertyDescriptor(t, n)) : r;
										if ('object' == typeof Reflect && 'function' == typeof Reflect.decorate)
											a = Reflect.decorate(e, t, n, r);
										else
											for (var s = e.length - 1; s >= 0; s--)
												(i = e[s]) && (a = (o < 3 ? i(a) : o > 3 ? i(t, n, a) : i(t, n)) || a);
										return o > 3 && a && Object.defineProperty(t, n, a), a;
									}
									function l(e, t) {
										return function (n, r) {
											t(n, r, e);
										};
									}
									function h(e, t) {
										if ('object' == typeof Reflect && 'function' == typeof Reflect.metadata)
											return Reflect.metadata(e, t);
									}
									function c(e, t, n, r) {
										return new (n || (n = Promise))(function (i, o) {
											function a(e) {
												try {
													l(r.next(e));
												} catch (e) {
													o(e);
												}
											}
											function s(e) {
												try {
													l(r.throw(e));
												} catch (e) {
													o(e);
												}
											}
											function l(e) {
												var t;
												e.done
													? i(e.value)
													: ((t = e.value),
													  t instanceof n
															? t
															: new n(function (e) {
																	e(t);
															  })).then(a, s);
											}
											l((r = r.apply(e, t || [])).next());
										});
									}
									function u(e, t) {
										var n,
											r,
											i,
											o,
											a = {
												label: 0,
												sent: function () {
													if (1 & i[0]) throw i[1];
													return i[1];
												},
												trys: [],
												ops: [],
											};
										return (
											(o = {
												next: s(0),
												throw: s(1),
												return: s(2),
											}),
											'function' == typeof Symbol &&
												(o[Symbol.iterator] = function () {
													return this;
												}),
											o
										);
										function s(o) {
											return function (s) {
												return (function (o) {
													if (n) throw new TypeError('Generator is already executing.');
													for (; a; )
														try {
															if (
																((n = 1),
																r &&
																	(i =
																		2 & o[0]
																			? r.return
																			: o[0]
																			? r.throw || ((i = r.return) && i.call(r), 0)
																			: r.next) &&
																	!(i = i.call(r, o[1])).done)
															)
																return i;
															switch (((r = 0), i && (o = [2 & o[0], i.value]), o[0])) {
																case 0:
																case 1:
																	i = o;
																	break;
																case 4:
																	return (
																		a.label++,
																		{
																			value: o[1],
																			done: !1,
																		}
																	);
																case 5:
																	a.label++, (r = o[1]), (o = [0]);
																	continue;
																case 7:
																	(o = a.ops.pop()), a.trys.pop();
																	continue;
																default:
																	if (
																		!(
																			(i = (i = a.trys).length > 0 && i[i.length - 1]) ||
																			(6 !== o[0] && 2 !== o[0])
																		)
																	) {
																		a = 0;
																		continue;
																	}
																	if (3 === o[0] && (!i || (o[1] > i[0] && o[1] < i[3]))) {
																		a.label = o[1];
																		break;
																	}
																	if (6 === o[0] && a.label < i[1]) {
																		(a.label = i[1]), (i = o);
																		break;
																	}
																	if (i && a.label < i[2]) {
																		(a.label = i[2]), a.ops.push(o);
																		break;
																	}
																	i[2] && a.ops.pop(), a.trys.pop();
																	continue;
															}
															o = t.call(e, a);
														} catch (e) {
															(o = [6, e]), (r = 0);
														} finally {
															n = i = 0;
														}
													if (5 & o[0]) throw o[1];
													return {
														value: o[0] ? o[1] : void 0,
														done: !0,
													};
												})([o, s]);
											};
										}
									}
									var p = Object.create
										? function (e, t, n, r) {
												void 0 === r && (r = n),
													Object.defineProperty(e, r, {
														enumerable: !0,
														get: function () {
															return t[n];
														},
													});
										  }
										: function (e, t, n, r) {
												void 0 === r && (r = n), (e[r] = t[n]);
										  };
									function f(e, t) {
										for (var n in e)
											'default' === n || Object.prototype.hasOwnProperty.call(t, n) || p(t, e, n);
									}
									function d(e) {
										var t = 'function' == typeof Symbol && Symbol.iterator,
											n = t && e[t],
											r = 0;
										if (n) return n.call(e);
										if (e && 'number' == typeof e.length)
											return {
												next: function () {
													return (
														e && r >= e.length && (e = void 0),
														{
															value: e && e[r++],
															done: !e,
														}
													);
												},
											};
										throw new TypeError(
											t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
										);
									}
									function g(e, t) {
										var n = 'function' == typeof Symbol && e[Symbol.iterator];
										if (!n) return e;
										var r,
											i,
											o = n.call(e),
											a = [];
										try {
											for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
										} catch (e) {
											i = {
												error: e,
											};
										} finally {
											try {
												r && !r.done && (n = o.return) && n.call(o);
											} finally {
												if (i) throw i.error;
											}
										}
										return a;
									}
									function y() {
										for (var e = [], t = 0; t < arguments.length; t++)
											e = e.concat(g(arguments[t]));
										return e;
									}
									function m() {
										for (var e = 0, t = 0, n = arguments.length; t < n; t++)
											e += arguments[t].length;
										var r = Array(e),
											i = 0;
										for (t = 0; t < n; t++)
											for (var o = arguments[t], a = 0, s = o.length; a < s; a++, i++) r[i] = o[a];
										return r;
									}
									function v(e, t, n) {
										if (n || 2 === arguments.length)
											for (var r, i = 0, o = t.length; i < o; i++)
												(!r && i in t) ||
													(r || (r = Array.prototype.slice.call(t, 0, i)), (r[i] = t[i]));
										return e.concat(r || Array.prototype.slice.call(t));
									}
									function w(e) {
										return this instanceof w ? ((this.v = e), this) : new w(e);
									}
									function b(e, t, n) {
										if (!Symbol.asyncIterator)
											throw new TypeError('Symbol.asyncIterator is not defined.');
										var r,
											i = n.apply(e, t || []),
											o = [];
										return (
											(r = {}),
											a('next'),
											a('throw'),
											a('return'),
											(r[Symbol.asyncIterator] = function () {
												return this;
											}),
											r
										);
										function a(e) {
											i[e] &&
												(r[e] = function (t) {
													return new Promise(function (n, r) {
														o.push([e, t, n, r]) > 1 || s(e, t);
													});
												});
										}
										function s(e, t) {
											try {
												(n = i[e](t)).value instanceof w
													? Promise.resolve(n.value.v).then(l, h)
													: c(o[0][2], n);
											} catch (e) {
												c(o[0][3], e);
											}
											var n;
										}
										function l(e) {
											s('next', e);
										}
										function h(e) {
											s('throw', e);
										}
										function c(e, t) {
											e(t), o.shift(), o.length && s(o[0][0], o[0][1]);
										}
									}
									function S(e) {
										var t, n;
										return (
											(t = {}),
											r('next'),
											r('throw', function (e) {
												throw e;
											}),
											r('return'),
											(t[Symbol.iterator] = function () {
												return this;
											}),
											t
										);
										function r(r, i) {
											t[r] = e[r]
												? function (t) {
														return (n = !n)
															? {
																	value: w(e[r](t)),
																	done: 'return' === r,
															  }
															: i
															? i(t)
															: t;
												  }
												: i;
										}
									}
									function _(e) {
										if (!Symbol.asyncIterator)
											throw new TypeError('Symbol.asyncIterator is not defined.');
										var t,
											n = e[Symbol.asyncIterator];
										return n
											? n.call(e)
											: ((e = d(e)),
											  (t = {}),
											  r('next'),
											  r('throw'),
											  r('return'),
											  (t[Symbol.asyncIterator] = function () {
													return this;
											  }),
											  t);
										function r(n) {
											t[n] =
												e[n] &&
												function (t) {
													return new Promise(function (r, i) {
														!(function (e, t, n, r) {
															Promise.resolve(r).then(function (t) {
																e({
																	value: t,
																	done: n,
																});
															}, t);
														})(r, i, (t = e[n](t)).done, t.value);
													});
												};
										}
									}
									function P(e, t) {
										return (
											Object.defineProperty
												? Object.defineProperty(e, 'raw', {
														value: t,
												  })
												: (e.raw = t),
											e
										);
									}
									var x = Object.create
										? function (e, t) {
												Object.defineProperty(e, 'default', {
													enumerable: !0,
													value: t,
												});
										  }
										: function (e, t) {
												e.default = t;
										  };
									function D(e) {
										if (e && e.__esModule) return e;
										var t = {};
										if (null != e)
											for (var n in e)
												'default' !== n && Object.prototype.hasOwnProperty.call(e, n) && p(t, e, n);
										return x(t, e), t;
									}
									function T(e) {
										return e && e.__esModule
											? e
											: {
													default: e,
											  };
									}
									function O(e, t, n, r) {
										if ('a' === n && !r)
											throw new TypeError('Private accessor was defined without a getter');
										if ('function' == typeof t ? e !== t || !r : !t.has(e))
											throw new TypeError(
												'Cannot read private member from an object whose class did not declare it',
											);
										return 'm' === n ? r : 'a' === n ? r.call(e) : r ? r.value : t.get(e);
									}
									function M(e, t, n, r, i) {
										if ('m' === r) throw new TypeError('Private method is not writable');
										if ('a' === r && !i)
											throw new TypeError('Private accessor was defined without a setter');
										if ('function' == typeof t ? e !== t || !i : !t.has(e))
											throw new TypeError(
												'Cannot write private member to an object whose class did not declare it',
											);
										return 'a' === r ? i.call(e, n) : i ? (i.value = n) : t.set(e, n), n;
									}
								},
								function (e, t, n) {
									var r;
									!(function (i) {
										'use strict';
										function o(e, t) {
											var n = (65535 & e) + (65535 & t);
											return (((e >> 16) + (t >> 16) + (n >> 16)) << 16) | (65535 & n);
										}
										function a(e, t, n, r, i, a) {
											return o(((s = o(o(t, e), o(r, a))) << (l = i)) | (s >>> (32 - l)), n);
											var s, l;
										}
										function s(e, t, n, r, i, o, s) {
											return a((t & n) | (~t & r), e, t, i, o, s);
										}
										function l(e, t, n, r, i, o, s) {
											return a((t & r) | (n & ~r), e, t, i, o, s);
										}
										function h(e, t, n, r, i, o, s) {
											return a(t ^ n ^ r, e, t, i, o, s);
										}
										function c(e, t, n, r, i, o, s) {
											return a(n ^ (t | ~r), e, t, i, o, s);
										}
										function u(e, t) {
											var n, r, i, a, u;
											(e[t >> 5] |= 128 << t % 32), (e[14 + (((t + 64) >>> 9) << 4)] = t);
											var p = 1732584193,
												f = -271733879,
												d = -1732584194,
												g = 271733878;
											for (n = 0; n < e.length; n += 16)
												(r = p),
													(i = f),
													(a = d),
													(u = g),
													(p = s(p, f, d, g, e[n], 7, -680876936)),
													(g = s(g, p, f, d, e[n + 1], 12, -389564586)),
													(d = s(d, g, p, f, e[n + 2], 17, 606105819)),
													(f = s(f, d, g, p, e[n + 3], 22, -1044525330)),
													(p = s(p, f, d, g, e[n + 4], 7, -176418897)),
													(g = s(g, p, f, d, e[n + 5], 12, 1200080426)),
													(d = s(d, g, p, f, e[n + 6], 17, -1473231341)),
													(f = s(f, d, g, p, e[n + 7], 22, -45705983)),
													(p = s(p, f, d, g, e[n + 8], 7, 1770035416)),
													(g = s(g, p, f, d, e[n + 9], 12, -1958414417)),
													(d = s(d, g, p, f, e[n + 10], 17, -42063)),
													(f = s(f, d, g, p, e[n + 11], 22, -1990404162)),
													(p = s(p, f, d, g, e[n + 12], 7, 1804603682)),
													(g = s(g, p, f, d, e[n + 13], 12, -40341101)),
													(d = s(d, g, p, f, e[n + 14], 17, -1502002290)),
													(p = l(
														p,
														(f = s(f, d, g, p, e[n + 15], 22, 1236535329)),
														d,
														g,
														e[n + 1],
														5,
														-165796510,
													)),
													(g = l(g, p, f, d, e[n + 6], 9, -1069501632)),
													(d = l(d, g, p, f, e[n + 11], 14, 643717713)),
													(f = l(f, d, g, p, e[n], 20, -373897302)),
													(p = l(p, f, d, g, e[n + 5], 5, -701558691)),
													(g = l(g, p, f, d, e[n + 10], 9, 38016083)),
													(d = l(d, g, p, f, e[n + 15], 14, -660478335)),
													(f = l(f, d, g, p, e[n + 4], 20, -405537848)),
													(p = l(p, f, d, g, e[n + 9], 5, 568446438)),
													(g = l(g, p, f, d, e[n + 14], 9, -1019803690)),
													(d = l(d, g, p, f, e[n + 3], 14, -187363961)),
													(f = l(f, d, g, p, e[n + 8], 20, 1163531501)),
													(p = l(p, f, d, g, e[n + 13], 5, -1444681467)),
													(g = l(g, p, f, d, e[n + 2], 9, -51403784)),
													(d = l(d, g, p, f, e[n + 7], 14, 1735328473)),
													(p = h(
														p,
														(f = l(f, d, g, p, e[n + 12], 20, -1926607734)),
														d,
														g,
														e[n + 5],
														4,
														-378558,
													)),
													(g = h(g, p, f, d, e[n + 8], 11, -2022574463)),
													(d = h(d, g, p, f, e[n + 11], 16, 1839030562)),
													(f = h(f, d, g, p, e[n + 14], 23, -35309556)),
													(p = h(p, f, d, g, e[n + 1], 4, -1530992060)),
													(g = h(g, p, f, d, e[n + 4], 11, 1272893353)),
													(d = h(d, g, p, f, e[n + 7], 16, -155497632)),
													(f = h(f, d, g, p, e[n + 10], 23, -1094730640)),
													(p = h(p, f, d, g, e[n + 13], 4, 681279174)),
													(g = h(g, p, f, d, e[n], 11, -358537222)),
													(d = h(d, g, p, f, e[n + 3], 16, -722521979)),
													(f = h(f, d, g, p, e[n + 6], 23, 76029189)),
													(p = h(p, f, d, g, e[n + 9], 4, -640364487)),
													(g = h(g, p, f, d, e[n + 12], 11, -421815835)),
													(d = h(d, g, p, f, e[n + 15], 16, 530742520)),
													(p = c(
														p,
														(f = h(f, d, g, p, e[n + 2], 23, -995338651)),
														d,
														g,
														e[n],
														6,
														-198630844,
													)),
													(g = c(g, p, f, d, e[n + 7], 10, 1126891415)),
													(d = c(d, g, p, f, e[n + 14], 15, -1416354905)),
													(f = c(f, d, g, p, e[n + 5], 21, -57434055)),
													(p = c(p, f, d, g, e[n + 12], 6, 1700485571)),
													(g = c(g, p, f, d, e[n + 3], 10, -1894986606)),
													(d = c(d, g, p, f, e[n + 10], 15, -1051523)),
													(f = c(f, d, g, p, e[n + 1], 21, -2054922799)),
													(p = c(p, f, d, g, e[n + 8], 6, 1873313359)),
													(g = c(g, p, f, d, e[n + 15], 10, -30611744)),
													(d = c(d, g, p, f, e[n + 6], 15, -1560198380)),
													(f = c(f, d, g, p, e[n + 13], 21, 1309151649)),
													(p = c(p, f, d, g, e[n + 4], 6, -145523070)),
													(g = c(g, p, f, d, e[n + 11], 10, -1120210379)),
													(d = c(d, g, p, f, e[n + 2], 15, 718787259)),
													(f = c(f, d, g, p, e[n + 9], 21, -343485551)),
													(p = o(p, r)),
													(f = o(f, i)),
													(d = o(d, a)),
													(g = o(g, u));
											return [p, f, d, g];
										}
										function p(e) {
											var t,
												n = '',
												r = 32 * e.length;
											for (t = 0; t < r; t += 8)
												n += String.fromCharCode((e[t >> 5] >>> t % 32) & 255);
											return n;
										}
										function f(e) {
											var t,
												n = [];
											for (n[(e.length >> 2) - 1] = void 0, t = 0; t < n.length; t += 1) n[t] = 0;
											var r = 8 * e.length;
											for (t = 0; t < r; t += 8) n[t >> 5] |= (255 & e.charCodeAt(t / 8)) << t % 32;
											return n;
										}
										function d(e) {
											var t,
												n,
												r = '';
											for (n = 0; n < e.length; n += 1)
												(t = e.charCodeAt(n)),
													(r +=
														'0123456789abcdef'.charAt((t >>> 4) & 15) +
														'0123456789abcdef'.charAt(15 & t));
											return r;
										}
										function g(e) {
											return unescape(encodeURIComponent(e));
										}
										function y(e) {
											return (function (e) {
												return p(u(f(e), 8 * e.length));
											})(g(e));
										}
										function m(e, t) {
											return (function (e, t) {
												var n,
													r,
													i = f(e),
													o = [],
													a = [];
												for (
													o[15] = a[15] = void 0, i.length > 16 && (i = u(i, 8 * e.length)), n = 0;
													n < 16;
													n += 1
												)
													(o[n] = 909522486 ^ i[n]), (a[n] = 1549556828 ^ i[n]);
												return (r = u(o.concat(f(t)), 512 + 8 * t.length)), p(u(a.concat(r), 640));
											})(g(e), g(t));
										}
										function v(e, t, n) {
											return t ? (n ? m(t, e) : d(m(t, e))) : n ? y(e) : d(y(e));
										}
										void 0 ===
											(r = function () {
												return v;
											}.call(t, n, t, e)) || (e.exports = r);
									})();
								},
							]),
						);
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Polyfill = void 0);
						var r = (function () {
							function e() {
								this.flatDetect();
							}
							return (
								(e.initialize = function () {
									e.instance || (e.instance = new e());
								}),
								(e.prototype.flatDetect = function () {
									Array.prototype.flat ||
										Object.defineProperty(Array.prototype, 'flat', {
											value: function (e) {
												return (
													void 0 === e && (e = 1),
													this.reduce(function (t, n) {
														return t.concat(Array.isArray(n) && e > 1 ? n.flat(e - 1) : n);
													}, [])
												);
											},
										});
								}),
								e
							);
						})();
						t.Polyfill = r;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.BarModifier = void 0);
						var i = r(n(0)),
							o = n(13),
							a = n(1),
							s = n(2),
							l = n(9),
							h = (function () {
								function e(e, t, n, r) {
									(this.mm = e), (this.polyId = t), (this.cpt = n), (this.view = r);
								}
								return (
									Object.defineProperty(e.prototype, 'split', {
										get: function () {
											var e = this.mm.splitter.lines[this.polyId.idx];
											return e
												? e.start.split !== e.end.split
													? s.EndpointSplitWay.None
													: e.start.split
												: s.EndpointSplitWay.None;
										},
										set: function (e) {
											var t,
												n = this.mm.splitter.lines[this.polyId.idx];
											(n.start.split = n.end.split = e),
												this.mm.host instanceof a.Frame &&
													(t = new l.VirtualBarFix(this.mm.host)).record();
											var r =
													n.line instanceof i.default.Line && i.default.Utils.EQ_0(n.line.norm.x),
												o = a.AlignTypeEnum.center;
											r
												? e === s.EndpointSplitWay.LeftOrTopJoin
													? (o = a.AlignTypeEnum.left)
													: e === s.EndpointSplitWay.RightOrBottomJoin &&
													  (o = a.AlignTypeEnum.right)
												: e === s.EndpointSplitWay.LeftOrTopJoin
												? (o = a.AlignTypeEnum.right)
												: e === s.EndpointSplitWay.RightOrBottomJoin && (o = a.AlignTypeEnum.left),
												(this.mm.splitter.lines[this.idx].alignType = o),
												this.mm.hideAssist(),
												this.mm.updatePoly(),
												t && t.recovery(),
												this.mm.refresh(this.view),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'idx', {
										get: function () {
											return this.polyId.idx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'bar', {
										get: function () {
											var e = this;
											return this.mm.bars.find(function (t) {
												return t.polyId.equalTo(e.polyId);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isArc', {
										get: function () {
											var e = this,
												t = this.mm.bars.find(function (t) {
													return t.polyId.equalTo(e.polyId);
												});
											return !!t && t.polygon.mulShape instanceof i.default.Arc;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'chordHeightDimShow', {
										get: function () {
											var e = this.mm.host;
											if (!(e instanceof a.Frame)) return !1;
											var t = e.dim.diMgr.findMulChordHeightDim(this.polyId);
											return !!t && t.dimShow;
										},
										set: function (e) {
											var t = this.mm.host;
											if (t instanceof a.Frame) {
												var n = t.dim,
													r = n.diMgr.findMulChordHeightDim(this.polyId);
												r || ((r = new a.MulChordHeightDimInfo(this.polyId)), n.diMgr.add(r)),
													(r.dimShow = e),
													n.updatePoly(),
													n.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'profileSize', {
										get: function () {
											return this.mm.splitter.lineProfileSizes[this.idx];
										},
										set: function (e) {
											this.mm.splitter.alignForNewProfileSize(this.idx, e),
												this.mm.setEdgeWidth(this.idx, e, this.view);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'type', {
										get: function () {
											return this.cutLine ? this.cutLine.type : 'bar';
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'equalSplit', {
										get: function () {
											return (
												!(this.idx >= this.mm.splitter.lines.length) &&
												this.mm.splitter.lines[this.idx].equalSplit !== s.EqualSplitType.None
											);
										},
										set: function (e) {
											if (e !== this.equalSplit) {
												this.mm.splitter.lines[this.idx].equalSplit = e
													? s.EqualSplitType.Outter
													: s.EqualSplitType.None;
												var t = this.mm.host;
												t instanceof a.Sash &&
													(t.dim.diMgr.clear(),
													t.dim.updatePoly(),
													t.dim.draw(this.view),
													t instanceof a.KfcSash && t.updatePoly()),
													this.mm.refresh(this.view),
													a.Glass.calcSerial(this.view.shapeManager.shapem),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'equalSplitSide', {
										get: function () {
											return this.idx >= this.mm.splitter.lines.length
												? s.EqualSplitSide.Both
												: this.mm.splitter.lines[this.idx].equalSplitSide;
										},
										set: function (e) {
											if (e !== this.equalSplitSide) {
												this.mm.splitter.lines[this.idx].equalSplitSide = e;
												var t = this.mm.host;
												t instanceof a.Sash &&
													(t.dim.diMgr.clear(), t.dim.updatePoly(), t.dim.draw(this.view)),
													this.mm.refresh(this.view),
													a.Glass.calcSerial(this.view.shapeManager.shapem),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isVertical', {
										get: function () {
											var e = this.angle;
											return (e > 45 && e < 135) || (e > 225 && e < 315);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'angle', {
										get: function () {
											if (this.idx >= this.mm.splitter.lines.length) return 0;
											var e = this.mm.splitter.lines[this.idx].angle;
											return Math.round((180 * e) / Math.PI);
										},
										set: function (e) {
											if (!i.default.Utils.LT(Math.abs(this.angle - e), 0.5)) {
												e = (e * Math.PI) / 180;
												var t = [i.default.point(e, 0), this.cpt];
												this.mm.splitter.tweak(this.idx, t, i.default.vector(), !1, -1),
													this.mm.refresh(this.view),
													a.Glass.calcSerial(this.view.shapeManager.shapem),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'width', {
										get: function () {
											return this.cutLine instanceof l.SpinLine ||
												this.cutLine instanceof l.SemiSegmentPro
												? Math.round(this.cutLine.width)
												: 0;
										},
										set: function (e) {
											if (this.cutLine instanceof l.SpinLine) {
												if (i.default.Utils.LT(Math.abs(this.width - e), 0.5)) return;
												(this.cutLine.width = e),
													this.mm.refresh(this.view),
													this.view.mometoManager.checkPoint();
											} else
												this.cutLine instanceof l.SemiSegmentPro &&
													((this.cutLine.width = e),
													this.mm.refresh(this.view),
													this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'height', {
										get: function () {
											return this.cutLine instanceof l.SpinLine
												? Math.round(this.cutLine.height)
												: this.cutLine instanceof l.SemiSegmentPro
												? this.cutLine.height
												: this.cutLine instanceof l.SimpleInnerArc
												? Math.round(this.cutLine.innerSegmentHeight)
												: 0;
										},
										set: function (e) {
											if (this.cutLine instanceof l.SpinLine) {
												if (i.default.Utils.LT(Math.abs(this.height - e), 0.5)) return;
												(this.cutLine.height = e),
													this.mm.refresh(this.view),
													this.view.mometoManager.checkPoint();
											} else
												this.cutLine instanceof l.SemiSegmentPro
													? ((this.cutLine.height = e),
													  this.mm.refresh(this.view),
													  this.view.mometoManager.checkPoint())
													: this.cutLine instanceof l.SimpleInnerArc &&
													  ((this.cutLine.innerSegmentHeight = e),
													  this.mm.refresh(this.view),
													  this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'orien', {
										get: function () {
											return (
												this.cutLine instanceof l.SpinLine &&
												this.cutLine.orien === i.default.ORIENTATION.CCW
											);
										},
										set: function (e) {
											if (this.orien !== e && this.cutLine instanceof l.SpinLine) {
												var t = e ? i.default.ORIENTATION.CCW : i.default.ORIENTATION.CW;
												(this.cutLine.orien = t),
													this.mm.refresh(this.view),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'side', {
										get: function () {
											return this.cutLine instanceof l.SpinLine ||
												this.cutLine instanceof l.CompoundLineCircle
												? this.cutLine.side
												: 0;
										},
										set: function (e) {
											this.side !== e &&
												(this.cutLine instanceof l.SpinLine ||
													this.cutLine instanceof l.CompoundLineCircle) &&
												((this.cutLine.side = e),
												this.mm.refresh(this.view),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'cutLine', {
										get: function () {
											if (
												!(this.idx >= this.mm.splitter.lines.length) &&
												this.mm.splitter.lines[this.idx].line instanceof l.CutLine
											)
												return this.mm.splitter.lines[this.idx].line;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'simpleInnerArcWidth', {
										get: function () {
											return this.cutLine instanceof l.SimpleInnerArc ? this.cutLine.width : -1;
										},
										set: function (e) {
											if (this.simpleInnerArcWidth !== e && !(e <= 0))
												try {
													(this.cutLine.width = e),
														this.mm.refresh(this.view),
														this.view.mometoManager.checkPoint();
												} catch (e) {
													console.warn(e.toString());
												}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'simpleInnerArcHeight', {
										get: function () {
											return this.cutLine instanceof l.SimpleInnerArc
												? this.cutLine.innerArcHeight
												: -1;
										},
										set: function (e) {
											if (this.simpleInnerArcHeight !== e && !(e <= 0))
												try {
													(this.cutLine.innerArcHeight = e),
														this.mm.refresh(this.view),
														this.view.mometoManager.checkPoint();
												} catch (e) {
													console.warn(e.toString());
												}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'alignType', {
										get: function () {
											return this.idx >= this.mm.splitter.lines.length
												? a.AlignTypeEnum.center
												: this.mm.splitter.lines[this.idx].alignType;
										},
										set: function (e) {
											var t = this,
												n = this.mm.bars[this.idx];
											(n.dimAlignment = e),
												(this.mm.splitter.lines[this.idx].alignType = e),
												n.topFrame.dim.ensureAlignment();
											var r = [];
											o.MullionManager.allBarsAlignedWith(n).forEach(function (t) {
												(t.bar.dimAlignment = e),
													(t.iHost.mulManager.splitter.lines[t.bar.polyId.idx].alignType = e),
													t.iHost instanceof a.Frame &&
														t.iHost.id !== n.topFrame.id &&
														r.push(t.iHost);
											}),
												r.forEach(function (e) {
													e.dim.updatePoly(), e.dim.draw(t.view);
												}),
												n.topFrame.dim.updatePoly(),
												n.topFrame.dim.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sameWithOuterArcCenter', {
										get: function () {
											return (
												(this.cutLine instanceof l.SemiArcPro ||
													this.cutLine instanceof l.SemiArc) &&
												this.cutLine.sameWithOuterArcCenter
											);
										},
										set: function (e) {
											(this.cutLine instanceof l.SemiArcPro || this.cutLine instanceof l.SemiArc) &&
												((this.cutLine.sameWithOuterArcCenter = e),
												this.mm.refresh(this.view),
												a.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'chordLength', {
										get: function () {
											return this.cutLine instanceof l.SemiArcPro ||
												this.cutLine instanceof l.SemiArc
												? Math.round(10 * this.cutLine.chordLength) / 10
												: -1;
										},
										set: function (e) {
											!e ||
												isNaN(e) ||
												e < 250 ||
												((this.cutLine instanceof l.SemiArcPro ||
													this.cutLine instanceof l.SemiArc) &&
													((this.cutLine.chordLength = e),
													this.mm.refresh(this.view),
													a.Glass.calcSerial(this.view.shapeManager.shapem),
													this.view.mometoManager.checkPoint()));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'chordHeight', {
										get: function () {
											return this.cutLine instanceof l.SemiArcPro ||
												this.cutLine instanceof l.SemiArc
												? Math.round(10 * this.cutLine.chordHeight) / 10
												: -1;
										},
										set: function (e) {
											!e ||
												isNaN(e) ||
												e < 100 ||
												((this.cutLine instanceof l.SemiArcPro ||
													this.cutLine instanceof l.SemiArc) &&
													((this.cutLine.chordHeight = e),
													this.mm.refresh(this.view),
													a.Glass.calcSerial(this.view.shapeManager.shapem),
													this.view.mometoManager.checkPoint()));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'offsetOfArcs', {
										get: function () {
											if (this.cutLine instanceof l.SemiArcPro) return this.cutLine.offsetOfArcs;
										},
										set: function (e) {
											this.cutLine instanceof l.SemiArcPro &&
												('string' == typeof e && (e = void 0),
												(this.cutLine.offsetOfArcs = e),
												this.mm.refresh(this.view),
												this.mm.hideAssist(),
												a.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sideCrosstiesHidden', {
										get: function () {
											return (
												(this.cutLine instanceof l.SemiArcPro ||
													this.cutLine instanceof l.SemiSegmentPro ||
													this.cutLine instanceof l.HalfWheel) &&
												this.cutLine.sideCrosstiesHidden
											);
										},
										set: function (e) {
											(this.cutLine instanceof l.SemiArcPro ||
												this.cutLine instanceof l.SemiSegmentPro ||
												this.cutLine instanceof l.HalfWheel) &&
												((this.cutLine.sideCrosstiesHidden = e),
												this.mm.refresh(this.view),
												a.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'horizontallySideCrossties', {
										get: function () {
											return (
												this.cutLine instanceof l.SemiArcPro &&
												this.cutLine.horizontallySideCrossties
											);
										},
										set: function (e) {
											this.cutLine instanceof l.SemiArcPro &&
												((this.cutLine.horizontallySideCrossties = e),
												this.mm.refresh(this.view),
												a.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'middleCrosstiesCount', {
										get: function () {
											return this.cutLine instanceof l.SemiArcPro ||
												this.cutLine instanceof l.SemiArc ||
												this.cutLine instanceof l.HalfWheel ||
												this.cutLine instanceof l.SemiSegmentPro
												? this.cutLine.middleCrosstiesCount
												: -1;
										},
										set: function (e) {
											(this.cutLine instanceof l.SemiArcPro ||
												this.cutLine instanceof l.SemiArc ||
												this.cutLine instanceof l.HalfWheel ||
												this.cutLine instanceof l.SemiSegmentPro) &&
												(null == e ||
													isNaN(e) ||
													e <
														(this.cutLine instanceof l.SemiArcPro ||
														this.cutLine instanceof l.SemiArc
															? 0
															: 1) ||
													((this.cutLine.middleCrosstiesCount = e),
													this.mm.updatePoly(!0),
													this.mm.refresh(this.view),
													a.Glass.calcSerial(this.view.shapeManager.shapem),
													this.view.mometoManager.checkPoint()));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'middleCrosstiesRatio', {
										get: function () {
											return this.cutLine instanceof l.SemiArcPro ||
												this.cutLine instanceof l.SemiSegmentPro
												? this.cutLine.middleCrosstiesRatio.join('-')
												: '';
										},
										set: function (e) {
											if (
												this.cutLine instanceof l.SemiArcPro ||
												this.cutLine instanceof l.SemiSegmentPro
											) {
												var t = e.split('-').map(function (e) {
													return parseFloat(e);
												});
												(this.cutLine.middleCrosstiesRatio = t.some(function (e) {
													return isNaN(e);
												})
													? []
													: t),
													this.mm.updatePoly(!0),
													this.mm.refresh(this.view),
													a.Glass.calcSerial(this.view.shapeManager.shapem),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'centerIntersectType', {
										get: function () {
											return this.cutLine instanceof l.HalfWheel
												? this.cutLine.intersectType
												: l.CenterIntersectType.Separated;
										},
										set: function (e) {
											this.cutLine instanceof l.HalfWheel &&
												((this.cutLine.intersectType = e),
												this.mm.refresh(this.view),
												a.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lineWidth', {
										get: function () {
											return this.mm.splitter.lineProfileSizes[this.idx];
										},
										set: function (e) {
											this.lineWidth !== e &&
												((this.mm.splitter.lineProfileSizes[this.idx] = e),
												this.mm.refresh(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'reinforced', {
										get: function () {
											return (
												!!this.mm.splitter.lines[this.idx] &&
												this.mm.splitter.lines[this.idx].reinforced
											);
										},
										set: function (e) {
											this.reinforced !== e &&
												((this.mm.splitter.lines[this.idx].reinforced = e),
												delete this.mm.splitter.lineProfileSizes[this.idx],
												this.mm.refresh(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'asKfcWaist', {
										get: function () {
											return (
												!!this.mm.splitter.lines[this.idx] &&
												this.mm.splitter.lines[this.idx].kfcWaist
											);
										},
										set: function (e) {
											this.asKfcWaist !== e &&
												((this.mm.splitter.lines[this.idx].kfcWaist = e),
												delete this.mm.splitter.lineProfileSizes[this.idx],
												this.mm.refresh(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowAsKfcWaistSet', {
										get: function () {
											if (!(this.mm.host instanceof a.Sash)) return !1;
											var e = this.mm.splitter.lines[this.idx];
											return (
												!!e &&
												e.line instanceof i.default.Line &&
												i.default.Utils.EQ_0(e.line.slope % Math.PI)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'edgeJointWay', {
										get: function () {
											return this.cutLine instanceof l.FrametifyLike
												? this.cutLine.edgeJointWay
												: s.EdgeJointWay.Default;
										},
										set: function (e) {
											this.cutLine instanceof l.FrametifyLike &&
												((this.cutLine.edgeJointWay = e), this.mm.refresh(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hidden', {
										get: function () {
											return this.cutLine instanceof l.FrametifyLike ? this.cutLine.hidden : [];
										},
										set: function (e) {
											this.cutLine instanceof l.FrametifyLike &&
												((this.cutLine.hidden = e), this.mm.refresh(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'count', {
										get: function () {
											return this.cutLine instanceof l.InnerEqSplit ? this.cutLine.count : 1;
										},
										set: function (e) {
											this.cutLine instanceof l.InnerEqSplit &&
												((this.cutLine.count = e),
												(this.cutLine.fixedSideSpaceSize = void 0),
												this.mm.refresh(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'ratio', {
										get: function () {
											return this.cutLine instanceof l.InnerEqSplit ? this.cutLine.ratio : [];
										},
										set: function (e) {
											this.cutLine instanceof l.InnerEqSplit &&
												((this.cutLine.ratio = e),
												(this.cutLine.fixedSideSpaceSize = void 0),
												this.mm.refresh(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'fixedSideSpaceSize', {
										get: function () {
											if (this.cutLine instanceof l.InnerEqSplit)
												return this.cutLine.fixedSideSpaceSize;
										},
										set: function (e) {
											this.cutLine instanceof l.InnerEqSplit &&
												((this.cutLine.fixedSideSpaceSize = e),
												(this.cutLine.fixedSideSpaceSize = void 0),
												this.mm.refresh(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'verticalEqSplit', {
										get: function () {
											return this.cutLine instanceof l.InnerEqSplit && this.cutLine.vertical;
										},
										set: function (e) {
											this.cutLine instanceof l.InnerEqSplit &&
												((this.cutLine.vertical = e), this.mm.refresh(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.BarModifier = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrameManager = void 0);
						var o = i(n(0)),
							a = n(7),
							s = n(65),
							l = n(11),
							h = n(2),
							c = n(1),
							u = (function () {
								function e(e, t) {
									void 0 === t && (t = []),
										(this.host = e),
										(this.ejw = t),
										(this.innerPoly = []),
										(this._edgeWidth = []),
										(this._virtuals = []),
										(this.asSideTracks = []),
										this.initProfileSize(),
										this.setDefaultEdgeJointWay(),
										this.create();
								}
								return (
									Object.defineProperty(e.prototype, 'edgeWidth', {
										get: function () {
											var e = this,
												t = this.host.topFrame.profileSizeManager.get(this.host.type);
											return (
												(this._edgeWidth = this._edgeWidth.slice(
													0,
													this.host.polygon.edges.length,
												)),
												this.host.polygon.edges.forEach(function (n, r) {
													void 0 === e._edgeWidth[r] && (e._edgeWidth[r] = t);
												}),
												this._edgeWidth
											);
										},
										set: function (e) {
											this._edgeWidth = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allProfileSize', {
										set: function (e) {
											this._edgeWidth = this.host.polygon.edges.map(function () {
												return e;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.create = function () {
										var e,
											t,
											n = (this.renderPoly || this.host.polygon).frametify(
												this.edgeWidth,
												this.ejw,
											);
										(this.innerPoly = n.innerPolys),
											(this.host.innerPoly = n.innerPolys.map(function (e) {
												return e.clone();
											}));
										try {
											for (var i = r(n.barPolys), o = i.next(); !o.done; o = i.next()) {
												var a = o.value;
												this.host.type !== c.ShapeType.Frame && this.calcEpDock(a);
												var s = new c.Bar(a, this.host.type);
												this.host.add(s);
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												o && !o.done && (t = i.return) && t.call(i);
											} finally {
												if (e) throw e.error;
											}
										}
									}),
									(e.prototype.initProfileSize = function () {
										var e = this,
											t = this.host.polygon.edges,
											n = this.host.polygon.box.center,
											r = this.host.topFrame.profileSizeManager,
											i = r.get(this.host.type),
											a = this.host.polygon.asMulEdgeIndexes,
											s = this.host.topFrame.profileSizeManager._frameMullion;
										(this._edgeWidth = []),
											t.forEach(function (t, h) {
												var u = a.some(function (e) {
													return e === h;
												})
													? s
													: i;
												if (
													((e.host.type !== c.ShapeType.Sash &&
														e.host.type !== c.ShapeType.KfcSash) ||
														(o.default.segment(n, n.translate(0, -9999)).intersect(t).length > 0
															? (u = r.upSash)
															: o.default.segment(n, n.translate(0, 9999)).intersect(t).length >
																	0 && (u = r.downSash)),
													e.host instanceof c.SlideSash && e.host.host)
												) {
													var p = l.EdgeFinder.Instance.findDirection(e.host.polygon, h);
													((p === l.Direction.Right && e.host.interlockOnRight) ||
														(p === l.Direction.Left && e.host.interlockOnLeft)) &&
														(u = r.interlock);
												}
												e._edgeWidth.push(u);
											});
									}),
									(e.prototype.isConvex = function (e, t, n) {
										e instanceof o.default.Arc && (e = o.default.segment(e.middle(), e.end)),
											t instanceof o.default.Arc && (t = o.default.segment(t.start, t.middle()));
										var r = o.default
											.vector(e.start, e.end)
											.cross(o.default.vector(t.start, t.end));
										return n.orientation === o.default.ORIENTATION.CCW
											? o.default.Utils.GE(r, 0)
											: o.default.Utils.LT(r, 0);
									}),
									(e.prototype.calcEpDock = function (e) {
										var t = this.host.polygon.edDock.docks,
											n = this.host.polygon.edges.length;
										if (
											t.filter(function (e) {
												return e;
											}).length === n
										) {
											var r = e.polyId.idx,
												i = this.host.polygon.edges,
												o = i[(r + n - 1) % n],
												a = i[(r + 1) % n],
												s = i[r];
											this.isConvex(o, s, e)
												? e.epDock.setDock(!0, t[(r + n - 1) % n])
												: e.epDock.setDock(!0, h.Dock.None()),
												this.isConvex(s, a, e)
													? e.epDock.setDock(!1, t[(r + 1) % n])
													: e.epDock.setDock(!1, h.Dock.None());
										}
									}),
									(e.prototype.recreated = function (e, t) {
										(this.host.polygon = e),
											this.host.clearChildren(),
											this.create(),
											this.host.updateFrame(!1),
											t && this.host.draw(t);
									}),
									(e.prototype.recreateBars = function () {
										this.allBars.forEach(function (e) {
											return e.remove();
										}),
											this.create();
									}),
									(e.prototype.getJointWay = function (e) {
										return this.ejw[e];
									}),
									(e.prototype.setJointWay = function (e, t, n) {
										(this.ejw[e] = t),
											this.host.type === c.ShapeType.Frame
												? this.recreated(this.host.polygon, n)
												: (this.recreateBars(), this.host.draw(n)),
											n.activeLayer.batchDraw();
									}),
									(e.prototype.getEdgeWidth = function (e) {
										return this.edgeWidth[e];
									}),
									(e.prototype.setEdgeWidth = function (e, t, n, r) {
										if ((void 0 === r && (r = !1), !(e < 0 || e >= this._edgeWidth.length))) {
											if (((this._edgeWidth[e] = t), r)) {
												var i = this.host;
												i.updatePoly(), i.draw(n);
											} else this.recreated(this.host.polygon, n);
											n.activeLayer.batchDraw();
										}
									}),
									(e.prototype.toJSON = function () {
										return {
											ejw: this.ejw,
											ew: this.edgeWidth,
											vs: this._virtuals.map(function (e) {
												return e.toJSON();
											}),
											ast: this.asSideTracks,
										};
									}),
									(e.prototype.deserialize = function (e) {
										var t = this;
										if (((this.ejw = e.ejw), e.ew && e.ew.length > 0)) this._edgeWidth = e.ew;
										else {
											this._edgeWidth = [];
											var n = this.host.topFrame.profileSizeManager.get(this.host.type);
											e.ejw.forEach(function (e) {
												return t._edgeWidth.push(n);
											});
										}
										e.vs &&
											Array.isArray(e.vs) &&
											(this._virtuals = e.vs.map(function (e) {
												return new h.PolyId(e.idx, e.pos);
											})),
											e.ast && Array.isArray(e.ast) && (this.asSideTracks = e.ast);
									}),
									(e.prototype.translate = function (e) {
										this.host.polygon.translate(e),
											this.host.innerPoly.forEach(function (t) {
												return t.translate(e);
											}),
											this.innerPoly.forEach(function (t) {
												return t.translate(e);
											}),
											this.allBars.forEach(function (t) {
												return t.translate(e);
											}),
											this.host.borders.translate(e);
									}),
									Object.defineProperty(e.prototype, 'allBars', {
										get: function () {
											var e = this,
												t = [];
											return (
												this.host.children.forEach(function (n) {
													n instanceof c.Bar && n.where === e.host.type && t.push(n);
												}),
												t
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'bars', {
										get: function () {
											return this.allBars.filter(function (e) {
												return !e.virtual;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'selected', {
										get: function () {
											return this.bars.some(function (e) {
												return e.highlighted;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.snapEdge = function (e, t, n) {
										for (
											var r = this.allBars,
												i = this.host.polygon.edges,
												o = i.findIndex(function (e, t) {
													var i = r.find(function (e) {
														return e.polygon.polyId.idx === t;
													});
													return (
														i &&
														n instanceof c.Bar &&
														n.parentId === i.parentId &&
														n.polygon.polyId.equalTo(i.polygon.polyId)
													);
												}),
												a = -1 !== o ? [(o - 1 + i.length) % i.length, o, (o + 1) % i.length] : [],
												s = function (n) {
													if (
														a.some(function (e) {
															return e === n;
														})
													)
														return 'continue';
													var r = i[n];
													return h.Utils.canSnap(e, r, t)
														? {
																value: r,
														  }
														: void 0;
												},
												l = 0;
											l < i.length;
											l++
										) {
											var u = s(l);
											if ('object' == typeof u) return u.value;
										}
									}),
									(e.prototype.snapVertex = function (e) {
										var t,
											n,
											i = this.host.polygon.edges;
										try {
											for (var o = r(i), s = o.next(); !s.done; s = o.next()) {
												var l = s.value;
												if (l.start.distanceTo(e)[0] < a.DrawParams.Ins.snapVertex) return l.start;
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												s && !s.done && (n = o.return) && n.call(o);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									(e.prototype.hitBar = function (e, t) {
										var n = this;
										if (
											((this.activeBarIndex = void 0),
											void 0 !== this.edgeRobot && this.edgeRobot.hitBar(e))
										)
											return this.highlight(!1), h.HitResult.Control;
										var r = h.HitResult.None,
											i = 0,
											o = 0;
										if (
											(this.bars.forEach(function (e) {
												return (o += e.highlighted ? 1 : 0);
											}),
											o === this.bars.length ? (i = 1) : 1 === o && (i = 2),
											1 === i || 2 === i)
										)
											this.bars.forEach(function (t, i) {
												var o = t.hitTest(e);
												o && (n.activeBarIndex = i), t.highlight(o), o && (r = h.HitResult.Bar);
											});
										else {
											var a = this.bars.some(function (t) {
												return t.hitTest(e);
											});
											this.bars.forEach(function (e) {
												return e.highlight(a);
											}),
												a && (r = h.HitResult.All);
										}
										return this.showEdgeRobot(t), r;
									}),
									(e.prototype.showEdgeRobot = function (e) {
										void 0 === this.edgeRobot && (this.edgeRobot = new s.EdgeJointRobot(this, e));
										var t = 0;
										this.bars.forEach(function (e) {
											return (t += e.highlighted ? 1 : 0);
										}),
											t > 0 ? this.edgeRobot.attachTo(this.host) : this.edgeRobot.hide();
									}),
									(e.prototype.highlight = function (e) {
										this.bars.forEach(function (t) {
											return t.highlight(e);
										});
									}),
									(e.prototype.hideAssist = function () {
										void 0 !== this.edgeRobot && this.edgeRobot.hide();
									}),
									(e.prototype.dragFrame = function (e, t, n) {
										void 0 === n && (n = o.default.point());
										var r = e.polygon.polyId.idx;
										return (
											!(r < 0 || e.parentId !== this.host.id) &&
											((this.host.polygon = this.host.polygon.dragEdge(r, t, n)),
											this.host.clearChildren(),
											this.create(),
											!0)
										);
									}),
									(e.prototype.dragVertex = function (e, t, n, r, i) {
										void 0 === i && (i = o.default.point());
										try {
											var a = this.host.polygon.dragVertex(t, e, n, i);
											this.recreated(a, r);
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.dragArc = function (e, t, n) {
										if (this.host instanceof c.ThreedArcFrame) this.host.dragArc(t, e);
										else {
											var r = this.host.polygon.dragArc(t, e);
											this.recreated(r, n);
										}
									}),
									(e.prototype.dragEdge = function (e, t, n, r) {
										void 0 === r && (r = o.default.point());
										try {
											var i = this.host.polygon.dragEdge(t, e, r);
											this.recreated(i, n);
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.setDefaultEdgeJointWay = function () {
										var e = this;
										if (this.host instanceof c.Frame) {
											if (
												!(
													4 === this.host.polygon.edges.length ||
													e.host.polygon instanceof c.HollowPoly ||
													e.host.polygon instanceof c.Hollow2Polygon ||
													e.host.polygon instanceof c.HollowSidePoly ||
													e.host.polygon instanceof c.ConvexPoly
												)
											)
												return;
											this.host.sashManager && this.host.sashManager.slides.length > 0
												? (this.ejw = this.host.polygon.edges.map(function () {
														return a.DrawParams.Ins.slideFrameEdgeJointWay;
												  }))
												: (this.ejw = this.host.polygon.edges.map(function () {
														return a.DrawParams.Ins.frameEdgeJointWay;
												  }));
										} else
											this.host instanceof c.Bead
												? (this.ejw = this.host.polygon.edges.map(function () {
														return a.DrawParams.Ins.fixedBeadJointWay;
												  }))
												: this.host instanceof c.Sash &&
												  (this.ejw = this.host.polygon.edges.map(function () {
														return a.DrawParams.Ins.sashEdgeJointWay;
												  }));
									}),
									(e.prototype.setVirtual = function (e, t) {
										var n = this._virtuals.findIndex(function (t) {
												return t.equalTo(e);
											}),
											r = -1 !== n;
										if (t) {
											if (r) return;
											this._virtuals.push(e);
										} else r && this._virtuals.splice(n, 1);
									}),
									e
								);
							})();
						t.FrameManager = u;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ArtType = t.Artisan = void 0);
						var i,
							o = r(n(56)),
							a = n(2),
							s = n(1),
							l = n(7),
							h = (function () {
								function e() {}
								return (
									(e.recycleShape = function (e, t) {
										var n = t.activeLayer,
											r = e instanceof s.WinPolygon ? i.Poly : i.Dim;
										r = e instanceof s.Text ? i.Text : r;
										var o = n.findOne(function (e) {
											return !(
												e.className ||
												e.attrs.artType !== r ||
												e.visible() ||
												e.isDragging() ||
												e.hasName('stub') ||
												'Shape' !== e.nodeType
											);
										});
										return (
											void 0 === o
												? ((o = Array.isArray(e)
														? l.DimCraft.create(e, t)
														: e instanceof s.Text
														? l.TextCraft.create(e, t)
														: l.PolyCraft.create(e, t)).setAttr('artType', r),
												  n.add(o))
												: (o.moveTo(n),
												  delete o.attrs.data,
												  delete o.attrs.shape,
												  delete o.attrs.tool,
												  delete o.attrs.robot,
												  delete o.attrs.robData,
												  r === i.Poly && delete o.attrs.hitFunc,
												  (o.attrs.dash = []),
												  a.ShapeHelper.restoreShapeMatrix(o),
												  o.show()),
											o
										);
									}),
									(e.recycleGroup = function (e, t) {
										var n = e.findOne(function (e) {
											return 'Group' === e.nodeType && !e.visible() && !e.isDragging();
										});
										return (
											void 0 === n
												? ((n = new o.default.Group({
														draggable: !1,
												  })),
												  t ? t.add(n) : e.add(n))
												: (n.moveTo(e),
												  delete n.attrs.data,
												  delete n.attrs.robot,
												  delete n.attrs.clipFunc,
												  a.ShapeHelper.restoreShapeMatrix(n),
												  t && n.moveTo(t),
												  n.show()),
											n
										);
									}),
									e
								);
							})();
						(t.Artisan = h),
							(function (e) {
								(e[(e.Poly = 0)] = 'Poly'), (e[(e.Dim = 1)] = 'Dim'), (e[(e.Text = 2)] = 'Text');
							})((i = t.ArtType || (t.ArtType = {})));
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.IdCreator = void 0);
						var r = (function () {
							function e() {}
							return (
								(e.gen = function () {
									if (this.ids.size > 0) {
										var e = this.ids.values().next().value;
										return this.ids.delete(e), e;
									}
									return this.id++;
								}),
								(e.recycle = function (e) {
									e <= 0 || this.ids.add(e);
								}),
								(e.id = 1),
								(e.ids = new Set()),
								e
							);
						})();
						t.IdCreator = r;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						});
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PolyType = void 0),
							(function (e) {
								(e.polygon = 'polygon'),
									(e.circle = 'circle'),
									(e.diamond = 'diamond'),
									(e.angledPentagon = 'angledPentagon'),
									(e.angledHexagon = 'angledHexagon'),
									(e.angledHexagon2 = 'angledHexagon2'),
									(e.roundedRectanglePolygon = 'roundedRectanglePolygon'),
									(e.trapezoid = 'trapezoid'),
									(e.hollowSize = 'hollowSize'),
									(e.hollow = 'hollow'),
									(e.hollow2 = 'hollow2'),
									(e.convex = 'convex'),
									(e.gothic = 'gothic'),
									(e.isoscelesTriangle = 'isoscelesTriangle'),
									(e.isoscelesTrapezoid = 'isoscelesTrapezoid'),
									(e.quarterCircle = 'quarterCircle'),
									(e.halfCircle = 'halfCircle'),
									(e.quatrefoil = 'quatrefoil'),
									(e.regular = 'regular'),
									(e.springline = 'springline'),
									(e.threeDimensionalArc = 'threeDimensionalArc'),
									(e.parallelogram = 'parallelogram'),
									(e.ear = 'ear'),
									(e.ear2 = 'ear2'),
									(e.ear3 = 'ear3'),
									(e.pointedEar = 'pointedEar'),
									(e.singleTrack = 'singleTrack'),
									(e.doubleEars = 'doubleEars'),
									(e.wave = 'wave'),
									(e.onion = 'onion'),
									(e.mosque = 'mosque'),
									(e.halfKfc = 'halfKfc'),
									(e.kfc = 'kfc'),
									(e.kfc2 = 'kfc2'),
									(e.kfc3 = 'kfc3'),
									(e.kfc4 = 'kfc4'),
									(e.halfKfc2 = 'halfKfc2'),
									(e.door = 'door'),
									(e.peakPentagon = 'peakPentagon');
							})(t.PolyType || (t.PolyType = {}));
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.WinPolygon = t.DrawPolyType = void 0);
						var s = a(n(0)),
							l = n(16),
							h = n(11),
							c = n(6),
							u = n(7),
							p = n(2),
							f = n(9);
						!(function (e) {
							(e.standard = 'standard'),
								(e.steelPlastic = 'steelPlastic'),
								(e.bridge = 'bridge'),
								(e.wood = 'wood');
						})(t.DrawPolyType || (t.DrawPolyType = {}));
						var d = (function () {
							function e(e) {
								(this.spLine = new p.SplitterObj()),
									(this.polygon = new s.default.Polygon()),
									(this._edges = []),
									(this.ctlRobs = new Map()),
									(this.virtual = !1),
									(this.epDock = new p.EndpointDock()),
									(this.edDock = new p.EdgeDock()),
									this.initPoly(),
									e && this.polygon.addFace(e);
							}
							return (
								Object.defineProperty(e.prototype, 'cutAnglesCount', {
									get: function () {
										return 0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.round = function (e) {
									var t = this;
									void 0 === e && (e = 15);
									var n = this.edges,
										r = [],
										i = [];
									n.forEach(function (t, r) {
										var o = (r + 1) % n.length,
											a = n[o];
										if (t instanceof s.default.Segment && a instanceof s.default.Segment) {
											var l = t.end.translate(t.tangentInEnd().multiply(e)),
												h = s.default.line(l, t.tangentInStart()),
												c = s.default.segment(t.start, l),
												u = a.start.translate(a.tangentInStart().multiply(e)),
												p = s.default.line(u, a.tangentInStart()),
												f = s.default.segment(u, a.end),
												d = h.intersect(p)[0],
												g = s.default.Arc.arcSE(d, l, u, !1);
											(n[r] = c), (n[o] = f), (i[r] = g);
										}
									}),
										n.forEach(function (e, t) {
											r.push(e), i[t] && r.push(i[t]);
										}),
										this.clear(),
										r.forEach(function (e) {
											return t.add(e);
										}),
										this.done();
								}),
								(e.prototype.updatePullingHeightLabel = function (e) {}),
								(e.prototype.pullingHeightMigration = function (e, t) {}),
								Object.defineProperty(e.prototype, 'controlDimFlag', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'polyId', {
									get: function () {
										return this.spLine.polyId;
									},
									set: function (e) {
										this.spLine.polyId = e;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'isEmpty', {
									get: function () {
										return 0 === i(this.polygon.faces).length;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'boundary', {
									get: function () {
										return this;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'isSimpleClosed', {
									get: function () {
										var e = this.edges,
											t = e[0].start,
											n = e[e.length - 1].end;
										return t.equalTo(n);
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.initPoly = function () {}),
								(e.prototype._clone = function () {
									return new e();
								}),
								(e.prototype.clone = function () {
									var e = this._clone();
									return (
										(e.mulShape = this.mulShape ? this.mulShape.clone() : void 0),
										(e.editTool = this.editTool),
										(e.spLine = this.spLine.clone()),
										(e.polygon = this.polygon.clone()),
										(e.virtual = this.virtual),
										(e.epDock = this.epDock.clone()),
										(e.edDock = this.edDock.clone()),
										e
									);
								}),
								(e.prototype.cloneWith = function (e) {
									var t = this.clone();
									return (
										t.clear(),
										e.forEach(function (e) {
											return t.add(e);
										}),
										t.done(),
										t
									);
								}),
								(e.prototype.setEdges = function (e) {
									var t = this;
									return (
										this.clear(),
										e.forEach(function (e) {
											return t.add(e);
										}),
										this.done(),
										this
									);
								}),
								(e.prototype.editPoint = function (e, t) {
									var n = this.edges,
										r = n[e],
										i = (e - 1 + n.length) % n.length,
										o = n[i];
									return (
										(n[e] = s.default.segment(r.start.translate(t), r.end)),
										(n[i] = s.default.segment(o.start, o.end.translate(t))),
										this.setEdges(n),
										this
									);
								}),
								(e.prototype.toJSON = function () {
									var e = this.mulShape ? this.mulShape.toJSON() : void 0;
									return {
										type: l.PolyType.polygon,
										mulShape: e,
										spLine: this.spLine.toJSON(),
										editTool: this.editTool,
										polygon: this.polygon.toJSON(),
										virtual: this.virtual,
									};
								}),
								(e.prototype.add = function (e) {
									this._edges[this._edges.length] = e;
								}),
								(e.prototype.pop = function () {
									this._edges.pop();
								}),
								(e.prototype.replaceLast = function (e) {
									this._edges[this._edges.length - 1] = e;
								}),
								(e.prototype.arcLast = function (e) {
									if (0 === this._edges.length) return null;
									var t = this._edges[this._edges.length - 1],
										n = t.start,
										r = t.end;
									return f.ArcUtils.CreateArcFrom3Points(n, r, e);
								}),
								(e.prototype.doneSmart = function () {
									var e = this._edges[0],
										t = this._edges[this._edges.length - 1];
									this.add(new s.default.Segment(t.end, e.start)), this.done();
								}),
								(e.prototype.done = function () {
									var e,
										t,
										n,
										r,
										i = [];
									try {
										for (var a = o(this.polygon.faces), s = a.next(); !s.done; s = a.next()) {
											var l = s.value;
											i.push(l);
										}
									} catch (t) {
										e = {
											error: t,
										};
									} finally {
										try {
											s && !s.done && (t = a.return) && t.call(a);
										} finally {
											if (e) throw e.error;
										}
									}
									try {
										for (var h = o(i), c = h.next(); !c.done; c = h.next())
											(l = c.value), this.polygon.deleteFace(l);
									} catch (e) {
										n = {
											error: e,
										};
									} finally {
										try {
											c && !c.done && (r = h.return) && r.call(h);
										} finally {
											if (n) throw n.error;
										}
									}
									this.polygon.addFace(this._edges), (this._edges = []);
								}),
								(e.prototype.equalTo = function (e) {
									var t = this.edges,
										n = e.edges;
									if (t.length !== n.length) return !1;
									for (var r = 0; r < t.length; r++) {
										var i = t[r],
											o = n[r];
										if (typeof i != typeof o) return !1;
										if (i instanceof s.default.Segment) {
											if (!i.equalTo(o)) return !1;
										} else {
											var a = i,
												l = o;
											if (!a.center.equalTo(l.center)) return !1;
											if (!s.default.Utils.EQ_0(a.r.valueOf() - l.r.valueOf())) return !1;
											if (!a.start.equalTo(l.start)) return !1;
											if (!l.end.equalTo(l.end)) return !1;
										}
									}
									return !0;
								}),
								Object.defineProperty(e.prototype, 'stIdx', {
									get: function () {
										var e = this;
										if (!this.mulShape) return -1;
										var t = this.edges;
										if (t.length < 4) return -1;
										var n = this.mulShape.middle(),
											r = t.findIndex(function (e) {
												return e.contains(n);
											});
										if (-1 !== r) return (r - 1 + t.length) % t.length;
										var i = t.findIndex(function (t) {
											return t.contains(e.mulShape.start);
										});
										if (-1 === i) {
											var o = s.default.segment(this.mulShape.middle(), this.mulShape.start);
											i = t.findIndex(function (e) {
												return e.intersect(o).length > 0;
											});
										}
										return i;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'etIdx', {
									get: function () {
										var e = this;
										if (!this.mulShape) return -1;
										var t = this.edges;
										if (t.length < 4) return -1;
										var n = this.mulShape.middle(),
											r = t.findIndex(function (e) {
												return e.contains(n);
											});
										if (-1 !== r) return (r + 1) % t.length;
										var i = t.findIndex(function (t) {
											return t.contains(e.mulShape.end);
										});
										if (-1 === i) {
											var o = s.default.segment(this.mulShape.middle(), this.mulShape.end);
											i = t.findIndex(function (e) {
												return e.intersect(o).length > 0;
											});
										}
										return i;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.addCircle = function (e, t) {
									this.clear(), (t = t < 0 ? 0.1 : t), this.polygon.addFace(s.default.circle(e, t));
								}),
								(e.prototype.addRing = function (e, t, n) {
									this.clear(),
										(t = t < 0 ? 0.1 : t),
										(n = n < 0 ? 0.2 : n),
										this.polygon.addFace(s.default.circle(e, t)),
										this.polygon.addFace(s.default.circle(e, n));
								}),
								(e.prototype.circlePolygon = function () {
									if (1 === this.polygon.faces.size) {
										var e = i(this.polygon.faces),
											t = 1 === e[0].size ? e[0].first.shape : void 0;
										if (t instanceof s.default.Arc && s.default.Utils.EQ_0(t.sweep - 2 * Math.PI))
											return s.default.circle(t.center, t.r.valueOf());
									}
								}),
								(e.prototype.ringPolygon = function () {
									if (2 === this.polygon.faces.size) {
										var e = i(this.polygon.faces),
											t = 1 === e[0].size ? e[0].first.shape : void 0;
										if (t instanceof s.default.Arc && s.default.Utils.EQ_0(t.sweep - 2 * Math.PI)) {
											var n = 1 === e[1].size ? e[1].first.shape : void 0;
											if (n instanceof s.default.Arc && s.default.Utils.EQ_0(n.sweep - 2 * Math.PI))
												return {
													pc: t.center.clone(),
													ir: t.r.valueOf(),
													or: n.r.valueOf(),
												};
										}
									}
								}),
								(e.prototype.clear = function () {
									var e,
										t,
										n,
										r,
										i = [];
									try {
										for (var a = o(this.polygon.faces), s = a.next(); !s.done; s = a.next()) {
											var l = s.value;
											i.push(l);
										}
									} catch (t) {
										e = {
											error: t,
										};
									} finally {
										try {
											s && !s.done && (t = a.return) && t.call(a);
										} finally {
											if (e) throw e.error;
										}
									}
									try {
										for (var h = o(i), c = h.next(); !c.done; c = h.next())
											(l = c.value), this.polygon.deleteFace(l), (this._edges = []);
									} catch (e) {
										n = {
											error: e,
										};
									} finally {
										try {
											c && !c.done && (r = h.return) && r.call(h);
										} finally {
											if (n) throw n.error;
										}
									}
								}),
								(e.prototype.findIndex = function (e) {
									return this.edges.findIndex(function (t) {
										return t.start.equalTo(e.start) && t.end.equalTo(e.end);
									});
								}),
								(e.prototype.replaceEdge = function (e, t) {
									var n,
										r,
										i = this.edges;
									i[e] = t;
									try {
										for (var a = o(i), s = a.next(); !s.done; s = a.next()) {
											var l = s.value;
											this._edges.push(l);
										}
									} catch (e) {
										n = {
											error: e,
										};
									} finally {
										try {
											s && !s.done && (r = a.return) && r.call(a);
										} finally {
											if (n) throw n.error;
										}
									}
									this.done();
								}),
								(e.prototype.contains = function (e) {
									return e instanceof s.default.Point
										? !!this.boundary.polygon.contains(e) ||
												this.edges.some(function (t) {
													return t.start.equalTo(e) || t.end.equalTo(e);
												})
										: this.polygon.contains(e);
								}),
								(e.prototype.isIntersect = function (e) {
									return this.polygon.intersect(e).length > 0;
								}),
								(e.prototype.distanceTo = function (e) {
									var t =
										e instanceof s.default.Box ? new s.default.Polygon(e.toPoints()) : e.polygon;
									return this.polygon.distanceTo(t)[0];
								}),
								(e.prototype.split = function (e, t, n) {
									return (
										void 0 === n && (n = 0),
										e instanceof s.default.Line
											? new f.SplitterLine(this, e).split(t)
											: e instanceof s.default.Segment
											? new f.SplitterSegment(this, e).split(t)
											: e instanceof s.default.Arc
											? new f.SplitterArc(this, e).split(t)
											: e instanceof f.CutLine
											? e.split(this, t, n)
											: [this]
									);
								}),
								(e.prototype.partition = function (e, t, n) {
									return (
										void 0 === t && (t = !0),
										void 0 === n && (n = []),
										new f.Partition(this, t).run(e, n)
									);
								}),
								(e.prototype.partitionTwo = function (e) {
									return new f.Partition(this).runTwo(e);
								}),
								(e.prototype.partitionSlideBySpliter = function (e, t, n) {
									return (
										void 0 === n && (n = !0),
										new f.PartitionOverlap(this).partitionSlideBySlideComp(e, t, n)
									);
								}),
								(e.prototype.transform = function (e) {
									return (this.polygon = this.polygon.transform(e)), this;
								}),
								(e.prototype.translate = function (e) {
									return (
										(this.polygon = this.polygon.translate(e)),
										this.mulShape && (this.mulShape = this.mulShape.translate(e)),
										this.spLine.line && this.spLine.translate(e),
										this
									);
								}),
								(e.prototype.flipX = function () {
									var e = new s.default.Matrix();
									e = e.scale(-1, 1);
									var t = this.circlePolygon();
									if (t) return this.translate(s.default.vector(t.center, t.center.transform(e)));
									this.transform(e);
								}),
								(e.prototype.flipY = function () {
									var e = new s.default.Matrix();
									e = e.scale(1, -1);
									var t = this.circlePolygon();
									if (t) return this.translate(s.default.vector(t.center, t.center.transform(e)));
									this.transform(e);
								}),
								(e.prototype.rotate = function (e, t) {
									var n = this.circlePolygon();
									return n
										? this.translate(s.default.vector(n.center, n.center.rotate(e, t)))
										: ((this.polygon = this.polygon.rotate(e, t)),
										  this.mulShape && (this.mulShape = this.mulShape.rotate(e, t)),
										  this.spLine.line && this.spLine.rotate(e, t),
										  this);
								}),
								(e.prototype.resize = function (e, t) {
									var n = this.polygon.box,
										r = n.center.clone(),
										i = s.default.vector(r, s.default.point()),
										o = n.xmax - n.xmin,
										a = n.ymax - n.ymin,
										l = new s.default.Matrix().scale(e ? e / o : 1, t ? t / a : 1);
									return this.translate(i).transform(l).translate(i.invert()), this;
								}),
								(e.prototype.scale = function (e) {
									if (e <= 0) return this;
									var t = this.polygon.box.xmax - this.polygon.box.xmin,
										n = this.polygon.box.ymax - this.polygon.box.ymin;
									return this.resize(t * e, n * e);
								}),
								(e.prototype.frametify = function (e, t) {
									return new f.Frametify(this).run(e, t);
								}),
								(e.prototype.parallelPoly = function (e, t) {
									var n = [];
									return (
										e instanceof Array
											? e.forEach(function (e) {
													return n.push(e);
											  })
											: this.edges.forEach(function (t) {
													return n.push(e);
											  }),
										f.Frametify.findPoly(this, n, t)
									);
								}),
								(e.prototype.checkMullion = function (e) {
									if (e instanceof s.default.Line)
										if (2 === (n = this.intersect(e)).length) {
											var t = s.default.line(n[0], n[1]);
											(this.mulShape = s.default.segment(n[0], n[1])),
												t.norm.equalTo(e.norm) || (this.mulShape = this.mulShape.reverse());
										} else this.mulShape = void 0;
									else if (e instanceof s.default.Segment) {
										this.edges;
										var n = this.intersect(e);
										2 === (n = p.Utils.distinct(n)).length
											? ((t = s.default.line(n[0], n[1])),
											  (this.mulShape = s.default.segment(n[0], n[1])),
											  t.norm.equalTo(s.default.line(e.start, e.end).norm) ||
													(this.mulShape = this.mulShape.reverse()))
											: (this.mulShape = void 0);
									} else if (e instanceof s.default.Arc)
										if (2 === (n = this.intersect(e)).length) {
											var r = s.default.Arc.arcSE(e.center, n[0], n[1], !0);
											this.contains(r.middle()) || (r.counterClockwise = !r.counterClockwise),
												r.counterClockwise !== e.counterClockwise && (r = r.reverse()),
												(this.mulShape = r);
										} else this.mulShape = void 0;
									else
										e instanceof f.SimpleLine &&
											(this.contains(e.segments[0].end)
												? (this.mulShape = e.clone().updateEndPoint(this))
												: (this.mulShape = void 0));
								}),
								(e.prototype.updateMulShape = function (e, t) {
									if (void 0 === this.mulShape) return this;
									if (this.mulShape instanceof s.default.Segment)
										t.equalTo(this.mulShape.start)
											? (this.mulShape = s.default.segment(e, this.mulShape.end))
											: (this.mulShape = s.default.segment(this.mulShape.start, e));
									else if (this.mulShape instanceof s.default.Arc) {
										var n = this.mulShape.r.valueOf(),
											r = this.mulShape.counterClockwise;
										if (t.equalTo(this.mulShape.start)) {
											var i = s.default.vector(this.mulShape.center, e).slope;
											this.mulShape = s.default.arc(
												this.mulShape.center,
												n,
												i,
												this.mulShape.endAngle,
												r,
											);
										} else {
											var o = s.default.vector(this.mulShape.center, e).slope;
											this.mulShape = s.default.arc(
												this.mulShape.center,
												n,
												this.mulShape.startAngle,
												o,
												r,
											);
										}
									} else
										this.mulShape.start.equalTo(t)
											? (this.mulShape.start = e)
											: (this.mulShape.end = e);
									return this;
								}),
								(e.prototype.intersect = function (e) {
									if (e instanceof s.default.Line)
										return this.polygon.intersect(e).filter(function (e, t, n) {
											return (
												n.findIndex(function (t) {
													return t.equalTo(e);
												}) === t
											);
										});
									if (e instanceof s.default.Arc) {
										var t = s.default.arc(
												e.center,
												e.r.valueOf(),
												0,
												2 * Math.PI,
												e.counterClockwise,
											),
											n = this.polygon.intersect(t),
											r = [];
										return (
											n.length > 2
												? (n.sort(function (t, n) {
														return e.start.distanceTo(t)[0] - e.start.distanceTo(n)[0];
												  }),
												  r.push(n[0]),
												  n.splice(0, 1),
												  n.sort(function (t, n) {
														return e.end.distanceTo(t)[0] - e.end.distanceTo(n)[0];
												  }),
												  r.push(n[0]))
												: (r = n),
											r
										);
									}
									if (e instanceof s.default.Segment) {
										var i = this.polygon.intersect(e);
										return (i = p.Utils.distinct(i)).sort(function (t, n) {
											return t.distanceTo(e.start)[0] - n.distanceTo(e.start)[0];
										});
									}
									return [];
								}),
								(e.prototype.dragEdge = function (t, n, r) {
									void 0 === r && (r = s.default.point());
									var i = this.edges;
									i[t] = i[t].translate(n);
									var o = i.length;
									return (
										f.Frametify.edgeIntersection(i, (t + o - 1) % o),
										f.Frametify.edgeIntersection(i, t),
										new e(i)
									);
								}),
								(e.prototype.dragArc = function (t, n) {
									var r = this.edges,
										i = r[t],
										o = i.middle().translate(n),
										a = s.default.line(i.start, i.end).distanceTo(o)[0];
									a > u.DrawParams.Ins.arcDummy || (i instanceof s.default.Segment && a > 1)
										? (r[t] = f.ArcUtils.CreateArcFrom3Points(i.start, i.end, o))
										: (r[t] = s.default.segment(i.start, i.end));
									var l = r.length;
									return (
										f.Frametify.edgeIntersection(r, (t + l - 1) % l),
										f.Frametify.edgeIntersection(r, t),
										new e(r)
									);
								}),
								(e.prototype.dragVertex = function (t, n, r, i) {
									void 0 === i && (i = s.default.point());
									var o = this.edges,
										a = o.length,
										l = o[t],
										h = l.start.translate(n);
									l instanceof s.default.Segment
										? (r &&
												(h =
													Math.abs(h.x - l.end.x) > Math.abs(h.y - l.end.y)
														? s.default.point(h.x, l.end.y)
														: s.default.point(l.end.x, h.y)),
										  (o[t] = s.default.segment(h, l.end)))
										: l instanceof s.default.Arc &&
										  (o[t] = f.ArcUtils.CreateArcFrom3Points(h, l.end, l.middle().translate(n)));
									var c = (t + a - 1) % a,
										u = o[c];
									return (
										u instanceof s.default.Segment
											? (o[c] = s.default.segment(u.start, h))
											: u instanceof s.default.Arc &&
											  (o[c] = f.ArcUtils.CreateArcFrom3Points(
													u.start,
													h,
													u.middle().translate(n),
											  )),
										f.Frametify.edgeIntersection(o, c),
										new e(o)
									);
								}),
								(e.prototype.dragEdgeSmartly = function (t, n, r) {
									void 0 === r && (r = s.default.point());
									var i = this.edges,
										o = i.length,
										a = function (e, t, n, r) {
											if (t instanceof s.default.Segment)
												e[n] = s.default.segment(t.start, r.start);
											else {
												var i = s.default.segment(t.start, t.end).middle(),
													o = t.middle().distanceTo(i)[0],
													a = t.middle().leftTo(s.default.line(t.start, t.end)),
													l = s.default.line(t.start, r.start),
													h = a ? l.norm : l.norm.multiply(-1),
													c = s.default.segment(t.start, r.start).middle(),
													u = p.Utils.vecDirPt(h, o, c);
												e[n] = f.ArcUtils.CreateArcFrom3Points(t.start, r.start, u);
											}
										},
										l = function (e, t, n, r) {
											if (t instanceof s.default.Segment)
												e[n] = s.default.segment(t.start, r.start);
											else {
												var i = s.default.segment(t.start, t.end).middle(),
													o = t.middle().distanceTo(i)[0],
													a = t.middle().leftTo(s.default.line(t.start, t.end)),
													l = s.default.line(r.end, t.end),
													h = a ? l.norm : l.norm.multiply(-1),
													c = s.default.segment(r.end, t.end).middle(),
													u = p.Utils.vecDirPt(h, o, c);
												e[n] = f.ArcUtils.CreateArcFrom3Points(r.end, t.end, u);
											}
										},
										h = p.Utils.getPrevIdx(t, o),
										c = p.Utils.getNextIdx(t, o),
										u = i[h].clone(),
										d = i[c].clone(),
										g = i[t].translate(n);
									i[t] = g.clone();
									var y = f.ArcUtils.edgeCrossPt(i[h], i[t]),
										m = f.ArcUtils.edgeCrossPt(i[t], i[c]);
									return (
										y && m
											? (f.Frametify.edgeIntersection(i, h), f.Frametify.edgeIntersection(i, t))
											: !y && m
											? (a(i, u, h, g), f.Frametify.edgeIntersection(i, t))
											: y && !m
											? (f.Frametify.edgeIntersection(i, h), l(i, d, c, g))
											: (a(i, u, h, g), l(i, d, c, g)),
										new e(i)
									);
								}),
								(e.prototype.inBoundary = function (e) {
									if (e instanceof s.default.Segment || e instanceof s.default.Arc)
										return new s.default.Edge(e).setInclusion(this.polygon) === s.default.BOUNDARY;
									var t = this.polygon.distanceTo(e)[0];
									return s.default.Utils.EQ_0(t);
								}),
								(e.prototype.isSibling = function (e) {
									var t,
										n,
										r,
										i,
										a = this.segments,
										s = e.segments;
									try {
										for (var l = o(a), h = l.next(); !h.done; h = l.next()) {
											var c = h.value;
											try {
												for (var u = ((r = void 0), o(s)), f = u.next(); !f.done; f = u.next()) {
													var d = f.value;
													if (p.Utils.segCoincide(c, d)) return !0;
												}
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													f && !f.done && (i = u.return) && i.call(u);
												} finally {
													if (r) throw r.error;
												}
											}
										}
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											h && !h.done && (n = l.return) && n.call(l);
										} finally {
											if (t) throw t.error;
										}
									}
									return !1;
								}),
								Object.defineProperty(e.prototype, 'IsMullion', {
									get: function () {
										return void 0 !== this.mulShape;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'orientation', {
									get: function () {
										var e, t;
										try {
											for (var n = o(this.polygon.faces), r = n.next(); !r.done; r = n.next())
												return r.value.orientation();
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												r && !r.done && (t = n.return) && t.call(n);
											} finally {
												if (e) throw e.error;
											}
										}
										return -1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'edges', {
									get: function () {
										var e,
											t,
											n,
											r,
											i = [];
										try {
											for (var a = o(this.polygon.faces), s = a.next(); !s.done; s = a.next()) {
												var l = s.value;
												try {
													for (var h = ((n = void 0), o(l)), c = h.next(); !c.done; c = h.next()) {
														var u = c.value;
														i.push(u.shape.clone());
													}
												} catch (e) {
													n = {
														error: e,
													};
												} finally {
													try {
														c && !c.done && (r = h.return) && r.call(h);
													} finally {
														if (n) throw n.error;
													}
												}
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												s && !s.done && (t = a.return) && t.call(a);
											} finally {
												if (e) throw e.error;
											}
										}
										return 0 === i.length ? this._edges : i;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.edge = function (e) {
									var t = i(this.polygon.faces);
									if (0 !== t.length && 0 !== t[0].edges.length) {
										var n = t[0].edges;
										return e < n.length ? n[e].shape.clone() : void 0;
									}
								}),
								(e.prototype.idxFromInner = function (e) {
									return e;
								}),
								Object.defineProperty(e.prototype, 'segments', {
									get: function () {
										return this.edges.filter(function (e) {
											return e instanceof s.default.Segment;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'box', {
									get: function () {
										return this.polygon.box;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'area', {
									get: function () {
										return this.polygon.area();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'perimeter', {
									get: function () {
										var e = this.edges,
											t = 0;
										return (
											e.forEach(function (e) {
												t += e.length;
											}),
											t
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'boxArea', {
									get: function () {
										var e = this.polygon.box;
										return (e.xmax - e.xmin) * (e.ymax - e.ymin);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'boxWidth', {
									get: function () {
										var e = this.polygon.box;
										return e.xmax - e.xmin;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'boxHeight', {
									get: function () {
										var e = this.polygon.box;
										return e.ymax - e.ymin;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'rectArea', {
									get: function () {
										return new e(
											this.edges.map(function (e) {
												return s.default.segment(e.start, e.end);
											}),
										).boxArea;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'arcBoxArea', {
									get: function () {
										var e = this.edges,
											t = 0;
										return (
											e.forEach(function (e) {
												if (e instanceof s.default.Arc) {
													var n = s.default.segment(e.start, e.end).length,
														r = e.chordHeight();
													t += n * r;
												}
											}),
											t
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.genPolygon = function (t) {
									var n = this.box,
										r = new e();
									if (1 === t)
										r.add(s.default.segment(n.low, s.default.point(n.xmax, n.ymin))),
											r.add(s.default.segment(s.default.point(n.xmax, n.ymin), n.high)),
											r.add(s.default.segment(n.high, s.default.point(n.xmin, n.ymax))),
											r.doneSmart();
									else if (2 === t) {
										var i = n.xmax - n.xmin,
											o = n.ymax - n.ymin;
										r.addCircle(n.center, Math.max(i, o) / 2);
									} else if (0 === t)
										r.add(s.default.segment(n.low, n.high)),
											r.add(s.default.segment(n.high, s.default.point(n.xmin, n.ymax))),
											r.doneSmart();
									else {
										(i = n.xmax - n.xmin), (o = n.ymax - n.ymin);
										var a = s.default.point(n.xmin + i / 3, n.ymin),
											l = s.default.point(n.xmin + (2 * i) / 3, n.ymin);
										r.add(s.default.segment(a, l)),
											(a = l),
											(l = s.default.point(n.xmax, n.ymin + o / 3)),
											r.add(s.default.segment(a, l)),
											(a = l),
											(l = s.default.point(n.xmax, n.ymin + (2 * o) / 3)),
											r.add(s.default.segment(a, l)),
											(a = l),
											(l = s.default.point(n.xmin + (2 * i) / 3, n.ymax)),
											r.add(s.default.segment(a, l)),
											(a = l),
											(l = s.default.point(n.xmin + i / 3, n.ymax)),
											r.add(s.default.segment(a, l)),
											(a = l),
											(l = s.default.point(n.xmin, n.ymin + (2 * o) / 3)),
											r.add(s.default.segment(a, l)),
											(a = l),
											(l = s.default.point(n.xmin, n.ymin + o / 3)),
											r.add(s.default.segment(a, l)),
											r.doneSmart();
									}
									return r;
								}),
								Object.defineProperty(e.prototype, 'vertices', {
									get: function () {
										return this.polygon.vertices;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.editDim = function (e, t, n) {
									return this.dragEdge(e, n);
								}),
								(e.prototype.makeHitRegion = function (e, t, n) {
									void 0 === n && (n = 40),
										this.circlePolygon()
											? this.makeCircleHitRegion(e, t, n)
											: 1 !== this.edges.length
											? ([
													s.default.point(this.box.xmin - n, this.box.ymin - n),
													s.default.point(this.box.xmax + n, this.box.ymin - n),
													s.default.point(this.box.xmax + n, this.box.ymax + n),
													s.default.point(this.box.xmin - n, this.box.ymax + n),
											  ].forEach(function (e, n) {
													if (0 === n) return t.beginPath(), void t.moveTo(e.x, e.y);
													t.lineTo(e.x, e.y);
											  }),
											  t.closePath(),
											  t.fillStrokeShape(e))
											: this.makeLineHitRegion(e, t, n);
								}),
								(e.prototype.makeLineHitRegion = function (e, t, n) {
									void 0 === n && (n = 40);
									var r = this.edge(0),
										i = s.default.line(r.start, r.end).norm,
										o = r.translate(i.multiply(n)),
										a = r.translate(i.invert().multiply(n));
									t.beginPath(),
										t.moveTo(o.start.x, o.start.y),
										t.lineTo(o.end.x, o.end.y),
										t.lineTo(a.end.x, a.end.y),
										t.lineTo(a.start.x, a.start.y),
										t.closePath(),
										t.fillStrokeShape(e);
								}),
								(e.prototype.makeCircleHitRegion = function (e, t, n) {
									void 0 === n && (n = 40);
									var r = this.circlePolygon(),
										i = r.center,
										o = r.r;
									t.beginPath(),
										t.arc(i.x, i.y, o + n, 0, 2 * Math.PI, !0),
										t.closePath(),
										t.fillStrokeShape(e);
								}),
								(e.prototype.initDimInfo = function () {
									var e = this.edges,
										t = e.map(function (e, t) {
											return {
												idx: t,
												dimShow: !1,
											};
										}),
										n = [];
									return (
										e.forEach(function (e, r) {
											e instanceof s.default.Arc ||
												n.some(function (t) {
													return (
														(r = e),
														(i = (n = t).tangentInStart()),
														(o =
															r.tangentInStart().equalTo(i) ||
															r.tangentInEnd().equalTo(n.tangentInStart())),
														(a =
															p.Utils.isZero(r.middle().x - n.middle().x) ||
															p.Utils.isZero(r.middle().y - n.middle().y)),
														(l = p.Utils.isZero(r.length - n.length)),
														(h = n.middle().distanceTo(s.default.line(r.start, r.end))[0]),
														o && a && l && s.default.Utils.GT(h, 0)
													);
													var n, r, i, o, a, l, h;
												}) ||
												((t[r].dimShow = !0), n.push(e));
										}),
										t
									);
								}),
								(e.prototype.isRectangle = function () {
									var e,
										t,
										n = this.edges;
									if (4 !== n.length) return !1;
									try {
										for (var r = o(n), i = r.next(); !i.done; i = r.next()) {
											var a = i.value;
											if (!(a instanceof s.default.Segment)) return !1;
											if (!p.Utils.isHorizOrVer(a)) return !1;
										}
									} catch (t) {
										e = {
											error: t,
										};
									} finally {
										try {
											i && !i.done && (t = r.return) && t.call(r);
										} finally {
											if (e) throw e.error;
										}
									}
									return !0;
								}),
								(e.prototype.raiseFrameEvent = function (e) {
									e.view.eventBus.emit({
										type: c.EventType.frame_settings,
										payload: new c.FrameSettings(e, e.view),
									});
								}),
								(e.prototype.toSvgRaw = function () {
									var e = this.box;
									return this.clone()
										.translate(s.default.vector(-e.center.x, -e.center.y))
										.translate(
											s.default.vector((e.xmax - e.xmin) / 2 + 100, (e.ymax - e.ymin) / 2 + 100),
										)
										.polygon.svg();
								}),
								(e.prototype.toSvgWithDim = function (e, t, n) {
									void 0 === e && (e = 300), void 0 === t && (t = ''), void 0 === n && (n = !1);
									var r = '',
										i = this.edges,
										o = Math.max(this.box.xmax - this.box.xmin, this.box.ymax - this.box.ymin),
										a = e - 94 - (n ? 16 : 0),
										l = this.clone()
											.translate(s.default.vector(-this.box.center.x, -this.box.center.y))
											.scale(a / o)
											.translate(s.default.vector(e / 2, e / 2 - (n ? 8 : 0))),
										h = l.box.center,
										c = h;
									if (t && !n) {
										var p = s.default.line(h, s.default.vector(0, 1)),
											f = l.intersect(p);
										if (2 === f.length) {
											var d = s.default.segment(f[0], f[1]).length,
												g = t.match(/[\u0000-\u00ff]/g),
												y = g ? g.length : 0;
											if (9.5 * y + 16.7 * (t.length - y) > d) return this.toSvgWithDim(e, t, !0);
										}
									}
									n && (c = s.default.point(h.x, 284));
									var m = l.polygon.svg();
									r += m;
									var v = l.edges,
										w = 1,
										b = l.orientation === s.default.ORIENTATION.CCW;
									b && (w = -1);
									var S = [],
										_ = '';
									v.forEach(function (e) {
										if (
											e instanceof s.default.Arc &&
											s.default.Utils.EQ_0(e.endAngle - e.startAngle - 2 * Math.PI)
										) {
											var t = l.box;
											S.push(
												s.default.segment(
													s.default.point(t.center.x, t.ymin - 15),
													s.default.point(t.xmax, t.ymin - 15),
												),
											);
										} else {
											var n = s.default.line(e.start, e.end);
											S.push(e.translate(n.norm.multiply(15 * w)));
										}
									});
									var P = [],
										x = S.length;
									return (
										S.forEach(function (e, t) {
											var n = S[(t + 1 + x) % x];
											if (e instanceof s.default.Arc || n instanceof s.default.Arc)
												return P.push(0);
											var r = e.tangentInEnd(),
												i = n.tangentInStart(),
												o = b ? i.angleTo(r) : r.angleTo(i);
											P.push(o);
										}),
										P.forEach(function (e, t) {
											var n = (t - 1 + x) % x,
												r = P[n],
												i = (t + 1 + x) % x,
												o = (t + 2 + x) % x,
												a = P[i];
											if (
												s.default.Utils.EQ_0(e - (Math.PI / 2) * 3) &&
												s.default.Utils.GT(Math.PI, r) &&
												s.default.Utils.GT(Math.PI, a)
											) {
												var l = S[n],
													h = S[t],
													c = S[i],
													u = S[o],
													p = h.tangentInEnd(),
													f = c.tangentInStart(),
													d = u.length < 35 && h.length < 35;
												d || (S[t] = h.translate(f.multiply(c.length))),
													(d = !d && l.length < 35 && c.length < 35) ||
														(S[i] = c.translate(p.multiply(h.length)));
											}
										}),
										S.forEach(function (e) {
											_ += e.svg({
												stroke: 'red',
											});
											var t =
												s.default.circle(e.start, 2).svg({
													stroke: 'red',
													fill: 'red',
												}) +
												s.default.circle(e.end, 2).svg({
													stroke: 'red',
													fill: 'red',
												});
											_ += t;
										}),
										(r += _),
										S.forEach(function (e, t) {
											var n = s.default.line(e.start, e.end),
												o = n.slope,
												a = (180 * n.slope) / Math.PI;
											((o >= (3 * Math.PI) / 4 && o <= (5 * Math.PI) / 4) ||
												(o > Math.PI / 4 && o < (3 * Math.PI) / 4)) &&
												(a -= 180);
											var l = e.middle().translate(n.norm.multiply(16 * w)),
												h = '' + u.UnitConvertion.Ins.lengthForOutput(i[t].length),
												c = i[t];
											if (c instanceof s.default.Arc) {
												var p = u.UnitConvertion.Ins.lengthForOutput(c.r.valueOf()),
													f = u.UnitConvertion.Ins.lengthForOutput(c.chordHeight());
												h = s.default.Utils.EQ_0(Math.abs(c.endAngle - c.startAngle) - 2 * Math.PI)
													? 'r=' + p
													: h + ' h=' + f + ' r=' + p;
											}
											r +=
												'\n      <text font-size="16px" style="dominant-baseline:central;text-anchor:middle;" x="' +
												l.x +
												'" y="' +
												l.y +
												'" fill="blue" transform="rotate(' +
												a +
												' ' +
												l.x +
												',' +
												l.y +
												')">' +
												h +
												'</text>\n      ';
										}),
										v.forEach(function (e, t) {
											var n = S.length,
												i = S[(t + 1 + n) % n],
												o = e.tangentInEnd(),
												a = i.tangentInStart(),
												l = b ? a.angleTo(o) : o.angleTo(a),
												h = Math.round(((180 * l) / Math.PI) * 10) / 10,
												c = e.end,
												u = s.default
													.segment(c.translate(o.multiply(50)), c.translate(a.multiply(50)))
													.middle();
											s.default.Utils.EQ_0(h - 90) ||
												s.default.Utils.EQ_0(h - 270) ||
												(r +=
													'\n        <text font-size="14px" x="' +
													u.x +
													'" y="' +
													u.y +
													'" fill="blue" text-anchor="middle" style="dominant-baseline:central;">' +
													h +
													'°</text>\n        ');
										}),
										t &&
											(r +=
												'\n      <text font-size="16px" x="' +
												c.x +
												'" y="' +
												c.y +
												'" fill="blue" text-anchor="middle" style="dominant-baseline:central;">' +
												t +
												'</text>\n      '),
										r
									);
								}),
								(e.prototype.fixFrameCCBars = function (e) {}),
								(e.prototype.toMulCCBar = function (e) {
									delete e.belongsToCJ,
										delete e.cjCode,
										(e.isReinforced = !1),
										(e.reinforcedDockCount = 0),
										(e.steelsCount = 0),
										(e.truncateEdgeMul = !1),
										(e.type = e.type === h.ccTypeEnum.frame ? h.ccTypeEnum.mullion : e.type);
								}),
								Object.defineProperty(e.prototype, 'asMulEdgeIndexes', {
									get: function () {
										return [];
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'bottomEdgeIndexes', {
									get: function () {
										var e = this,
											t = [];
										return (
											this.edges.forEach(function (n, r) {
												n instanceof s.default.Segment &&
													s.default.Utils.EQ_0(e.box.ymax - n.middle().y) &&
													t.push(r);
											}),
											t
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.WinPolygon = d;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.BarDragger = void 0);
						var r = n(5),
							i = n(1),
							o = (function () {
								function e() {
									(this.drag = new Map()),
										this.drag.set(i.ShapeType.Frame, r.ToolType.editSplitter),
										this.drag.set(i.ShapeType.FrameMullion, r.ToolType.editSplitter),
										this.drag.set(i.ShapeType.SashMullion, r.ToolType.editSplitter),
										this.drag.set(i.ShapeType.ScreenMullion, r.ToolType.editSplitter),
										this.drag.set(i.ShapeType.KfcWaist, r.ToolType.editSplitter),
										this.drag.set(i.ShapeType.Sash, r.ToolType.editSash),
										this.drag.set(i.ShapeType.Screen, r.ToolType.editSash),
										this.drag.set(i.ShapeType.AntiTheft, r.ToolType.editSash),
										this.drag.set(i.ShapeType.AntiTheftMullion, r.ToolType.editSash),
										this.drag.set(i.ShapeType.ShadePushSashMullion, r.ToolType.editSplitter);
								}
								return (
									Object.defineProperty(e, 'Ins', {
										get: function () {
											return e._instance || (e._instance = new e()), e._instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.canDrag = function (e) {
										return this.drag.has(e);
									}),
									(e.prototype.getTool = function (e) {
										return this.drag.get(e);
									}),
									e
								);
							})();
						t.BarDragger = o;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ToolStep = t.EditorStyle = t.Tool = void 0);
						var i,
							o,
							a = r(n(0)),
							s = n(2),
							l = n(1),
							h = n(7),
							c = n(5),
							u = (function () {
								function e(e, t) {
									(this.name = e),
										(this.view = t),
										(this.firstPt = new a.default.Point()),
										(this.curPt = new a.default.Point()),
										(this.toolStep = o.None),
										(this.retinaPxielRatio =
											window.devicePixelRatio > 1 ? window.devicePixelRatio : 1),
										(this.lastDist = 0);
								}
								return (
									Object.defineProperty(e.prototype, 'isFrameTool', {
										get: function () {
											return this.name.startsWith('frame');
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.mousedown = function (e) {
										this.curPt = this.getPosition();
									}),
									(e.prototype.mousemove = function (e) {
										(this.curPt = this.getPosition()),
											(this.view.toolManager.mousePosition.x = this.curPt.x),
											(this.view.toolManager.mousePosition.y = this.curPt.y);
									}),
									(e.prototype.mouseup = function (e) {
										this.curPt = this.getPosition();
									}),
									(e.prototype.mousewheel = function (e) {
										var t = this.view.canvas,
											n = t.scaleX(),
											r = t.getPointerPosition(),
											i = r.x / n - t.x() / n,
											o = r.y / n - t.y() / n,
											a = e.deltaY > 0 ? 1.08 * n : n / 1.08;
										t.scale({
											x: a,
											y: a,
										});
										var s = {
											x: -(i - r.x / a) * a,
											y: -(o - r.y / a) * a,
										};
										t.position(s), t.batchDraw();
									}),
									(e.prototype.touchwheel = function (e) {
										var t = this.view.canvas,
											n = t.scaleX(),
											r = t.getPointerPosition(),
											i = e.touches[0],
											o = e.touches[1],
											s = a.default
												.point(i.clientX, i.clientY)
												.distanceTo(a.default.point(o.clientX, o.clientY))[0];
										this.lastDist || (this.lastDist = s);
										var l = r.x / n - t.x() / n,
											h = r.y / n - t.y() / n,
											c = (n * s) / this.lastDist;
										t.scale({
											x: c,
											y: c,
										});
										var u = {
											x: -(l - r.x / c) * c,
											y: -(h - r.y / c) * c,
										};
										t.position(u), t.batchDraw(), (this.lastDist = s);
									}),
									(e.prototype.touchend = function (e) {
										this.lastDist = 0;
									}),
									(e.prototype.mousedone = function (e) {
										this.restart(), this.view.refresh();
									}),
									(e.prototype.dragstart = function (e) {
										this.curPt = this.getPosition();
									}),
									(e.prototype.dragmove = function (e) {
										this.curPt = this.getPosition();
									}),
									(e.prototype.dbclick = function (e) {
										this.curPt = this.getPosition();
									}),
									(e.prototype.cleanup = function () {
										this.view.tmpLayer.destroyChildren();
									}),
									(e.prototype.initialTool = function () {}),
									(e.prototype.restart = function () {
										(this.toolStep = o.None), (this.firstPt = this.curPt = a.default.point());
									}),
									(e.prototype.getPosition = function () {
										var e = this.view.canvas,
											t = e.getPointerPosition(),
											n = e.scaleX();
										return (
											(t = {
												x: t.x / n - e.x() / n,
												y: t.y / n - e.y() / n,
											}),
											new a.default.Point(t.x, t.y)
										);
									}),
									(e.prototype.detectSnaps = function (e, t, n) {
										if (
											(void 0 === n && (n = !1),
											n || this.hideSnaps(),
											e instanceof a.default.Segment)
										) {
											var r = this.view.shapeManager.snapEdge(e, this.curPt, t);
											if (r) {
												var i = void 0,
													o = void 0;
												if (r instanceof a.default.Arc) {
													var l = [r.start, r.end].sort(function (t, n) {
														return t.distanceTo(e)[0] - n.distanceTo(e)[0];
													})[0];
													(i = a.default.line(l, e.tangentInStart().rotate90CW())),
														(o = s.Utils.furthestTwoPoints([
															l,
															e.start.projectionOn(i),
															e.end.projectionOn(i),
														]));
												} else
													(i = a.default.line(r.start, r.end)),
														(o = s.Utils.furthestTwoPoints([
															r.start,
															r.end,
															e.start.projectionOn(i),
															e.end.projectionOn(i),
														]));
												return this.displaySnap(o[0], o[1]), this.curPt.projectionOn(i);
											}
										}
									}),
									(e.prototype.displaySnap = function (e, t) {
										var n = new l.WinPolygon([a.default.segment(e, t)]),
											r = h.Artisan.recycleShape(n, this.view);
										r.moveToTop(),
											r.setAttr('data', {
												poly: n,
												stroke: 'yellow',
												strokeWidth: 18,
												dashed: !0,
												snap: !0,
											}),
											this.view.activeLayer.add(r);
									}),
									(e.prototype.displayCircleSnap = function (e, t) {
										void 0 === t && (t = h.DrawParams.Ins.snapVertex);
										var n = new l.WinPolygon();
										n.addCircle(e, t);
										var r = h.Artisan.recycleShape(n, this.view);
										r.moveToTop(),
											r.setAttr('data', {
												poly: n,
												stroke: 'red',
												strokeWidth: 18,
												dashed: !0,
												snap: !0,
											}),
											this.view.activeLayer.add(r);
									}),
									(e.prototype.hideSnaps = function () {
										this.view.activeLayer
											.find(function (e) {
												return (
													!(
														!e.attrs.hasOwnProperty('data') || !e.attrs.data.hasOwnProperty('snap')
													) && e.attrs.data.snap
												);
											})
											.forEach(function (e) {
												return e.hide();
											});
									}),
									(e.prototype.showNumberEditor = function (e, t, n, r, o, a) {
										void 0 === r && (r = i.Normal),
											void 0 === o && (o = !1),
											void 0 === a && (a = !0);
										var s = e.evt.pageX,
											l = e.evt.pageY;
										'dbltap' === e.type &&
											void 0 === s &&
											((s = e.evt.changedTouches[0].pageX), (l = e.evt.changedTouches[0].pageY)),
											this.showEditor(
												s,
												l,
												t.toString(),
												function (e, t, r) {
													return n(+e, +t, r);
												},
												!0,
												r,
												o,
												a,
											);
									}),
									(e.prototype.showTextEditor = function (e, t, n) {
										var r = e.evt.pageX,
											o = e.evt.pageY;
										'dbltap' === e.type &&
											void 0 === r &&
											((r = e.evt.changedTouches[0].pageX), (o = e.evt.changedTouches[0].pageY)),
											this.showEditor(
												r,
												o,
												t,
												function (e, t) {
													return n(e, t, c.ExpandDirection.BothSide);
												},
												!1,
												i.Normal,
												!1,
												!0,
											);
									}),
									(e.prototype.showEditor = function (e, t, n, r, o, s, l, u, p) {
										void 0 === o && (o = !1),
											void 0 === s && (s = i.Normal),
											void 0 === l && (l = !1),
											void 0 === u && (u = !0),
											void 0 === p && (p = !1);
										var f = {
												x: e,
												y: t,
											},
											d = this.uiWrap(),
											g = this.uiForm(f),
											y = this.uiInput(n, o, s, f, p),
											m = document.createElement('div');
										(m.style.display = 'flex'),
											(m.style.alignItems = 'center'),
											(m.style.flexDirection = 'column');
										var v = h.DrawParams.Ins.lang('up'),
											w = h.DrawParams.Ins.lang('down'),
											b = h.DrawParams.Ins.lang('left'),
											S = h.DrawParams.Ins.lang('right'),
											_ = h.DrawParams.Ins.lang('both');
										this.uiRadio(m, 1, 'expand-direction', '1', l ? v : b, l),
											this.uiRadio(m, 2, 'expand-direction', '2', l ? w : S, !l),
											s === i.DirectionWithBoth && this.uiRadio(m, 3, 'expand-direction', '3', _),
											s === i.Direction || s === i.DirectionWithBoth
												? (d.appendChild(g), g.appendChild(y), g.appendChild(m))
												: d.appendChild(y),
											y.select();
										var P = function () {
												return document.body.removeChild(d);
											},
											x = function () {
												if (o ? !u || !a.default.Utils.EQ_0(+y.value - +n) : n !== y.value) {
													var e = document.querySelector('input[name="expand-direction"]:checked'),
														t =
															e && e instanceof HTMLInputElement
																? +e.value
																: c.ExpandDirection.RightOrDown;
													r(y.value, n, t);
												}
												P();
											},
											D = function (e) {
												13 === e.keyCode ? x() : 27 === e.keyCode && P();
											};
										y instanceof HTMLInputElement
											? y.addEventListener('keyup', D)
											: y.addEventListener('blur', x),
											d.addEventListener('click', function (e) {
												e.target === d && document.body.removeChild(d);
											}),
											m.addEventListener('keyup', D);
									}),
									(e.prototype.uiWrap = function () {
										var e = document.createElement('div');
										return (
											(e.style.position = 'absolute'),
											(e.style.backgroundColor = 'rgba(0,0,0,0)'),
											(e.style.top = '0px'),
											(e.style.left = '0px'),
											(e.style.width = '100%'),
											(e.style.height = '100%'),
											document.body.appendChild(e),
											e
										);
									}),
									(e.prototype.uiForm = function (e) {
										var t = document.createElement('div');
										return (
											(t.style.position = 'absolute'),
											(t.style.top = e.y + 'px'),
											(t.style.left = e.x + 'px'),
											(t.style.height = 'auto'),
											(t.style.width = 'auto'),
											(t.style.padding = '.5em'),
											(t.style.border = 'solid 1px #0070B8'),
											(t.style.borderRadius = '4px'),
											(t.style.backgroundColor = 'rgb(255, 255, 255)'),
											(t.style.boxShadow = '0px 0px 6px -1px #0070B8'),
											(t.style.display = 'flex'),
											(t.style.flexDirection = 'row'),
											(t.style.alignItems = 'center'),
											t
										);
									}),
									(e.prototype.uiInput = function (e, t, n, r, o) {
										void 0 === n && (n = i.Normal), void 0 === o && (o = !1);
										var a = document.createElement(o ? 'textarea' : 'input');
										return (
											(a.value = t ? Number(Number(e).toFixed(1)).toString() : e),
											a instanceof HTMLInputElement
												? ((a.type = t ? 'number' : 'text'),
												  t ? (a.style.width = '90px') : (a.size = Math.max(a.value.length, 5)),
												  (a.style.height = '45px'))
												: ((a.rows = 3), (a.cols = 10), (a.style.resize = 'both')),
											(a.style.backgroundColor = '#FFF'),
											(a.style.boxShadow = '0px 0px 6px -1px #0070B8'),
											(a.style.borderColor = '#0070B8'),
											(a.style.outline = '#0070B8'),
											(a.style.borderRadius = '4px'),
											(a.style.fontSize = '25px'),
											(a.style.fontWeight = '600'),
											(a.style.lineHeight = '45px'),
											(a.style.fontWeight = '600'),
											(a.style.color = 'rgb(122,122,122)'),
											n === i.Normal &&
												((a.style.position = 'absolute'),
												(a.style.top = r.y + 5 + 'px'),
												(a.style.left = r.x + 5 + 'px'),
												(a.style.marginRight = '5px'),
												(a.style.paddingLeft = '4px')),
											a
										);
									}),
									(e.prototype.uiRadio = function (e, t, n, r, i, o) {
										void 0 === o && (o = !1);
										var a = n + '-' + t.toString(),
											s = document.createElement('div');
										(s.style.display = 'flex'),
											(s.style.alignItems = 'center'),
											(s.style.marginLeft = '.4em'),
											1 !== t && (s.style.marginTop = '3px');
										var l = document.createElement('input');
										(l.id = a),
											(l.type = 'radio'),
											(l.name = n),
											(l.value = r),
											(l.style.marginLeft = '.4em'),
											o && (l.checked = !0),
											s.appendChild(l);
										var h = document.createElement('label');
										return (
											(h.innerText = i),
											(h.style.fontSize = '8px'),
											(h.style.lineHeight = '8px'),
											(h.style.marginLeft = '.2em'),
											(h.style.color = '#000'),
											h.setAttribute('for', a),
											s.appendChild(h),
											e.appendChild(s),
											l
										);
									}),
									e
								);
							})();
						(t.Tool = u),
							(function (e) {
								(e[(e.Normal = 0)] = 'Normal'),
									(e[(e.Direction = 1)] = 'Direction'),
									(e[(e.DirectionWithBoth = 2)] = 'DirectionWithBoth');
							})((i = t.EditorStyle || (t.EditorStyle = {}))),
							(function (e) {
								(e[(e.None = 0)] = 'None'),
									(e[(e.Start = 1)] = 'Start'),
									(e[(e.Continue = 2)] = 'Continue'),
									(e[(e.Done = 3)] = 'Done');
							})((o = t.ToolStep || (t.ToolStep = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PanTool = void 0);
						var o = n(5),
							a = (function (e) {
								function t(t) {
									var n = e.call(this, o.ToolType.pan, t) || this;
									return (n.view = t), n.view.canvas.draggable(!0), n;
								}
								return i(t, e), t;
							})(o.Tool);
						t.PanTool = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SquareSelectTool = void 0);
						var o = n(64),
							a = n(1),
							s = (function (e) {
								function t(t) {
									return e.call(this, o.ToolType.squareSelect, t) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'fillColor', {
										get: function () {
											return 'rgba(0,0,0,.3)';
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'strokeWidth', {
										get: function () {
											return 2;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'strokeColor', {
										get: function () {
											return 'rgba(0,0,0,.9)';
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dashed', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'clickShape', {
										get: function () {
											return new a.WinPolygon();
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.finishDrag = function (e) {
										var t = !1;
										this.view.shapeManager.shapem.forEach(function (n) {
											n.mulManager.bars.forEach(function (n) {
												var r = n.polygon.polygon.intersect(e.polygon),
													i = e.polygon.contains(n.polygon.polygon);
												(r.length > 0 || i) && (n.highlight(!0), (t = !0));
											});
										}),
											t
												? this.view.shapeManager.equalizeMullion()
												: this.view.toolManager.releaseTool();
									}),
									t
								);
							})(n(5).DragDrawTool);
						t.SquareSelectTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.WallTool = void 0);
						var l = s(n(0)),
							h = n(2),
							c = n(5),
							u = n(49),
							p = n(1),
							f = (function (e) {
								function t(t) {
									var n = e.call(this, c.ToolType.wall, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'clickShape', {
										get: function () {
											return p.PolygonCreator.Ins.rectangleShape(this.curPt, 2e3, 1200);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isCLick', {
										get: function () {
											return this.curPt.equalTo(this.firstPt);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.restart = function () {
										e.prototype.restart.call(this), this.view.toolManager.releaseTool();
									}),
									(t.prototype.finishDrag = function (e) {
										var n = this.view.shapeManager.shapem,
											r = this.view.shapeManager.couples,
											i = this.view.shapeManager.walls,
											o = this.isCLick ? t.wallShapeToAppend(a(n, r), i, this.curPt) : e;
										this.view.shapeManager.addWall(o || e);
									}),
									(t.wallShapeToAppend = function (e, n, r, i) {
										void 0 === i && (i = 500);
										var o = t.getDockEdge(e, r);
										if (o) return t.generateWall(n, o, i);
									}),
									(t.getDockEdge = function (e, t) {
										var n = [];
										if (
											(e.forEach(function (e) {
												var r = e.polygon.box.center;
												e.polygon.edges
													.filter(function (e) {
														return e instanceof l.default.Segment || e instanceof l.default.Arc;
													})
													.forEach(function (i) {
														return n.push({
															based: r,
															edge: i,
															distance: t.distanceTo(i)[0],
															orientation: e.polygon.orientation,
														});
													});
											}),
											0 !== n.length)
										)
											return n.sort(function (e, t) {
												return e.distance - t.distance;
											})[0];
									}),
									(t.generateWall = function (e, n, r) {
										if (
											(void 0 === r && (r = 500),
											!e
												.map(function (e) {
													return e.polygon;
												})
												.map(function (e) {
													return e.edges;
												})
												.flat()
												.some(function (e) {
													return e instanceof l.default.Segment &&
														n.edge instanceof l.default.Segment
														? 2 === e.intersect(n.edge).length
														: e instanceof l.default.Arc &&
																n.edge instanceof l.default.Arc &&
																e.center.equalTo(n.edge.center) &&
																h.Utils.isZero(e.r.valueOf() - n.edge.r.valueOf());
												}))
										)
											return t.makeWall(n.edge, n.orientation, r);
									}),
									(t.makeWall = function (e, t, n) {
										void 0 === n && (n = 500);
										var r = l.default.vector(e.start, e.end).normalize(),
											i = -1 === t ? r.rotate90CW() : r.rotate90CCW(),
											o = e.clone().translate(i.multiply(n)).reverse();
										return new p.WinPolygon([
											e,
											l.default.segment(e.end, o.start),
											o,
											l.default.segment(o.end, e.start),
										]);
									}),
									t
								);
							})(u.DragDrawTool);
						t.WallTool = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrameTool = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(49),
							h = n(1),
							c = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.view = n), r;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'clickShape', {
										get: function () {
											return h.PolygonCreator.Ins.create(this.name, this.curPt);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.restart = function () {
										e.prototype.restart.call(this), this.view.toolManager.releaseTool();
									}),
									Object.defineProperty(t.prototype, 'framePolygon', {
										get: function () {
											var e = this.curPt;
											if (this.firstPt && !this.firstPt.equalTo(this.curPt)) {
												e = a.default.point(
													(this.firstPt.x + this.curPt.x) / 2,
													(this.firstPt.y + this.curPt.y) / 2,
												);
												var t = h.PolygonCreator.Ins.create(this.name, e),
													n = t.box.xmax - t.box.xmin,
													r = t.box.ymax - t.box.ymin;
												if (0 === r || 0 === n) return t;
												var i = n / r,
													o = Math.abs(this.curPt.x - this.firstPt.x),
													l = Math.abs(this.curPt.y - this.firstPt.y);
												l < r && (l = r), o < n && (o = n);
												var c = 1;
												return (
													(c = i > o / l ? o / n : l / r), s.Utils.isZero(c - 1) ? t : t.scale(c)
												);
											}
											return h.PolygonCreator.Ins.create(this.name, e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.finishDrag = function (e) {
										this.view.shapeManager.add(this.framePolygon);
									}),
									t
								);
							})(l.DragDrawTool);
						t.FrameTool = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ScalableFrame = void 0);
						var o = n(6),
							a = n(5),
							s = n(1),
							l = (function (e) {
								function t(t) {
									return e.call(this, a.ToolType.frame_scalable, t) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'clickShape', {
										get: function () {
											return s.PolygonCreator.Ins.rectangleShape(this.curPt);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'shouldRelease', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.finishDrag = function (e) {
										this.view.shapeManager.add(e),
											this.view.eventBus.emit({
												type: o.EventType.drag_in_process,
												payload: {
													moving: !0,
												},
											});
									}),
									t
								);
							})(a.DragDrawTool);
						t.ScalableFrame = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CustomPolygonTool = void 0);
						var l = s(n(56)),
							h = s(n(0)),
							c = n(64),
							u = n(1),
							p = n(2),
							f = n(5),
							d = n(7),
							g = (function (e) {
								function t(t) {
									var n = e.call(this, c.ToolType.frame_polygon, t) || this;
									return (
										(n.gridInterval = 20), (n.aux = new u.WinPolygon()), t.canvas.draggable(!1), n
									);
								}
								return (
									i(t, e),
									(t.prototype.mousedown = function (t) {
										e.prototype.mousedown.call(this, t),
											this.toolStep === f.ToolStep.None &&
												(this.snapGridPoint(),
												(this.firstPt = this.curPt),
												(this.toolStep = f.ToolStep.Start));
									}),
									(t.prototype.mousemove = function (t) {
										if ((e.prototype.mousemove.call(this, t), this.toolStep === f.ToolStep.Start))
											if (
												(this.adjustCurPt(t.shiftKey),
												this.drawAux(this.appendAuxEdge(this.curPt)),
												this.closedToStart(this.curPt) && this.aux.edges.length > 0)
											)
												this.hideSnaps(), this.displayCircleSnap(this.firstPt);
											else {
												this.hideSnaps();
												var n = this.getSnapGridPoint();
												this.displayCircleSnap(n, 10 / this.view.canvas.scaleX());
											}
									}),
									(t.prototype.getSnapGridPoint = function () {
										var e = this.gridInterval / this.view.canvas.scaleX(),
											t = function (t) {
												return [Math.floor(t / e), Math.ceil(t / e)];
											},
											n = o(t(this.curPt.x), 2),
											r = n[0],
											i = n[1],
											a = h.default.point();
										Math.abs(this.curPt.x - r * e) >= Math.abs(this.curPt.x - i * e)
											? (a.x = i * e)
											: (a.x = r * e);
										var s = o(t(this.curPt.y), 2),
											l = s[0],
											c = s[1];
										return (
											Math.abs(this.curPt.y - l * e) >= Math.abs(this.curPt.y - c * e)
												? (a.y = c * e)
												: (a.y = l * e),
											a
										);
									}),
									(t.prototype.snapGridPoint = function () {
										this.curPt = this.getSnapGridPoint();
									}),
									(t.prototype.mouseup = function (t) {
										e.prototype.mouseup.call(this, t),
											this.adjustCurPt(t.shiftKey),
											this.snapGridPoint();
										var n = this.closedToStart(this.curPt);
										if (n && this.aux.edges.length < 2)
											return this.drawAux(this.aux), void this.hideSnaps();
										var r = n ? this.firstPt : this.curPt;
										if (((this.aux = this.appendAuxEdge(r)), this.drawAux(this.aux), n)) {
											this.view.shapeManager.add(this.aux);
											var i =
												this.view.shapeManager.shapem[this.view.shapeManager.shapem.length - 1];
											i.showExtraDimAngle(!1), i.extraDimManager.draw(this.view), this.restart();
										}
									}),
									(t.prototype.restart = function () {
										e.prototype.restart.call(this),
											this.recyleAux(),
											this.hideSnaps(),
											this.view.toolManager.releaseTool();
									}),
									(t.prototype.adjustCurPt = function (e) {
										if (e) {
											var t = this.aux.edges,
												n = t.length > 0 ? t[t.length - 1].end : this.firstPt;
											Math.abs(n.x - this.curPt.x) < Math.abs(n.y - this.curPt.y)
												? (this.curPt = h.default.point(n.x, this.curPt.y))
												: (this.curPt = h.default.point(this.curPt.x, n.y));
										}
									}),
									(t.prototype.closedToStart = function (e) {
										return e.distanceTo(this.firstPt)[0] <= d.DrawParams.Ins.snapVertex;
									}),
									(t.prototype.appendAuxEdge = function (e) {
										var t = this.aux.edges,
											n = t.length > 0 ? t[t.length - 1].end : this.firstPt,
											r = h.default.segment(n, e);
										return new u.WinPolygon(a(t, [r]));
									}),
									(t.prototype.recyleAux = function () {
										this.vshapeOfAux &&
											(this.vshapeOfAux.hide(),
											(this.vshapeOfAux = void 0),
											(this.aux = new u.WinPolygon()),
											this.view.refresh());
									}),
									(t.prototype.drawAux = function (e) {
										void 0 === this.vshapeOfAux &&
											((this.vshapeOfAux = d.Artisan.recycleShape(e, this.view)),
											this.view.activeLayer.add(this.vshapeOfAux)),
											this.vshapeOfAux.setAttr('data', {
												poly: e,
												fcolor: 'none',
												stroke: p.ShapeColor.darkMode ? 'yellow' : 'blue',
												strokeWidth: 15,
												dashed: !1,
											}),
											this.vshapeOfAux.moveToTop(),
											this.view.refresh();
									}),
									(t.prototype.showGrid = function () {
										var e = this,
											t = this.view.activeLayer.findOne(function (e) {
												return 'auxGrid' === e.attrs.artType;
											});
										if (void 0 === t) {
											var n = new l.default.Shape({
												artType: 'auxGrid',
												sceneFunc: function (t, n) {
													var r = function (e, n, r, i) {
														null !== t &&
															(t.beginPath(), t.moveTo(e, n), t.lineTo(r, i), t.stroke());
													};
													t.save(),
														(t.strokeStyle = 'black'),
														(t.lineWidth = 0.5 / e.view.canvas.scaleX());
													for (
														var i,
															o,
															a,
															s,
															l,
															h,
															c,
															u,
															p,
															f,
															d,
															g = e.gridInterval / e.view.canvas.scaleX(),
															y = -e.view.canvas.x() / e.view.canvas.scaleX() - 0.5,
															m = y + e.view.canvas.width() / e.view.canvas.scaleX(),
															v = -e.view.canvas.y() / e.view.canvas.scaleY() - 0.5,
															w = v + e.view.canvas.height() / e.view.canvas.scaleY(),
															b = (Math.floor(v / g) - 1) * g,
															S = (Math.floor(w / g) + 1) * g,
															_ = (Math.floor(y / g) - 1) * g,
															P = (Math.floor(m / g) + 1) * g,
															x = b;
														x <= S;
														x += g
													)
														r(_, x, P, x);
													for (x = _; x <= P; x += g) r(x, b, x, S);
													t.restore(),
														(i = 0),
														(o = 0),
														(a = 5 / e.view.canvas.scaleX()),
														void 0 === (s = 'green') && (s = 'red'),
														null !== t &&
															(t.save(),
															(t.fillStyle = s),
															t.beginPath(),
															t.arc(i, o, a, 0, 2 * Math.PI),
															t.fill(),
															t.restore()),
														(l = 0),
														(h = 0),
														(c = e.view.canvas.width() / e.view.canvas.scaleX()),
														(u = e.view.canvas.height() / e.view.canvas.scaleY()),
														(p = y),
														(f = v),
														(d = 3 / e.view.canvas.scaleX()),
														null !== t &&
															(t.save(),
															(t.lineWidth = d),
															(t.strokeStyle = 'red'),
															r(p, h, p + c, h),
															(t.strokeStyle = 'blue'),
															r(l, f, l, f + u),
															t.restore());
												},
												stroke: 'black',
												strokeWidth: d.DrawParams.Ins.strokeWidth,
												draggable: !1,
											});
											this.view.activeLayer.add(n), this.view.refresh();
										} else t.show();
									}),
									(t.prototype.hideGrid = function () {
										var e = this.view.activeLayer.findOne(function (e) {
											return 'auxGrid' === e.attrs.artType;
										});
										void 0 !== e && (e.hide(), this.view.refresh());
									}),
									(t.prototype.initialTool = function () {
										e.prototype.initialTool.call(this), this.showGrid();
									}),
									(t.prototype.cleanup = function () {
										e.prototype.cleanup.call(this), this.hideGrid();
									}),
									t
								);
							})(f.Tool);
						t.CustomPolygonTool = g;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.LineTool = void 0);
						var a = o(n(0)),
							s = n(5),
							l = (function (e) {
								function t(t, n) {
									var r = e.call(this, s.ToolType.mullion_horizontal, t) || this;
									return (r.view = t), (r.norm = n), r;
								}
								return (
									i(t, e),
									(t.prototype.mouseup = function (e) {
										var t = this.curPt;
										this.view.shapeManager.addMullion(new a.default.Line(t, this.norm)),
											this.view.mometoManager.checkPoint();
									}),
									t
								);
							})(s.Tool);
						t.LineTool = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							l =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.MullionCrossLine = void 0);
						var h = l(n(0)),
							c = n(2),
							u = n(6),
							p = n(1),
							f = n(5),
							d = (function (e) {
								function t(t) {
									return e.call(this, f.ToolType.mullion_cross_line, t) || this;
								}
								return (
									i(t, e),
									(t.prototype.makeAux = function () {
										if (this.firstPt.equalTo(this.curPt)) {
											var e = h.default.segment(
												this.firstPt,
												h.default.point(this.firstPt.x, this.firstPt.y + 1),
											);
											this.aux = new p.WinPolygon([e]);
										} else {
											var t = h.default.vector(this.firstPt, this.curPt).slope,
												n = function (e) {
													return (e * Math.PI) / 180;
												},
												r = [0, n(45), n(90), n(135), n(180), n(225), n(270), n(315), n(360)];
											r.sort(function (e, n) {
												return Math.abs(e - t) - Math.abs(n - t);
											});
											var i = c.Utils.slopeDirPt(
												this.firstPt,
												this.firstPt.distanceTo(this.curPt)[0],
												r[0],
											);
											this.aux = new p.WinPolygon([h.default.segment(this.firstPt, i)]);
										}
									}),
									(t.prototype.finishDrag = function (e) {
										var t = this,
											n = !1,
											r = e.edge(0),
											i = this.view.shapeManager.snapEdge(r, r.middle());
										if (i) {
											var o = r.middle().projectionOn(h.default.line(i.start, i.end));
											r = r.translate(h.default.vector(o.x - r.middle().x, o.y - r.middle().y));
										}
										i || (r = this.adjustLineForInteger(r)),
											this.view.shapeManager.shapem.forEach(function (e) {
												var i = [],
													o = e.usedPoly;
												e.avaiablePoly.forEach(function (e) {
													o.some(function (t) {
														return e.polyId.equalTo(t);
													}) || i.push(e);
												});
												var s = [];
												e.sashManager.allSashes.forEach(function (e) {
													return s.push.apply(s, a(e.avaiablePoly));
												}),
													a(i, s).forEach(function (e) {
														var i,
															o = e.intersect(r);
														if (
															(1 === o.length
																? ((i = h.default.segment(r.start, o[0]).middle()),
																  e.contains(i) || (i = h.default.segment(o[0], r.end).middle()))
																: o.length >= 2
																? (i = h.default.segment(o[0], o[1]).middle())
																: e.contains(r) && (i = r.middle()),
															i)
														) {
															n = !0;
															var a = r.tangentInStart().rotate90CW(),
																s = h.default.line(i, a);
															t.view.shapeManager.addMullion(s);
														}
													});
											}),
											this.view.eventBus.emit({
												type: u.EventType.drag_in_process,
												payload: {
													moving: !0,
												},
											}),
											n || this.view.toolManager.releaseTool();
									}),
									(t.prototype.adjustLineForInteger = function (e) {
										var t, n, r, i;
										try {
											for (
												var o = s(this.view.shapeManager.shapem), l = o.next();
												!l.done;
												l = o.next()
											)
												if (!l.value.polygon.isRectangle()) return e;
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												l && !l.done && (n = o.return) && n.call(o);
											} finally {
												if (t) throw t.error;
											}
										}
										var u = function (t) {
											var n,
												r,
												i = !1,
												o = [],
												l = t.usedPoly;
											t.avaiablePoly.forEach(function (e) {
												l.some(function (t) {
													return e.polyId.equalTo(t);
												}) || o.push(e);
											});
											var u = [];
											t.sashManager.allSashes.forEach(function (e) {
												return u.push.apply(u, a(e.avaiablePoly));
											});
											var p = a(o, u);
											try {
												for (var f = ((n = void 0), s(p)), d = f.next(); !d.done; d = f.next()) {
													var g = d.value,
														y = g.intersect(e),
														m = void 0;
													if (
														(1 === y.length
															? ((m = h.default.segment(e.start, y[0]).middle()),
															  g.contains(m) || (m = h.default.segment(y[0], e.end).middle()))
															: y.length >= 2
															? (m = h.default.segment(y[0], y[1]).middle())
															: g.contains(e) && (m = e.middle()),
														m)
													) {
														var v = e.tangentInStart().rotate90CW(),
															w = h.default.point(g.box.xmin, g.box.ymin);
														if (
															c.Utils.isZero(h.default.vector(0, 1).dot(v)) ||
															c.Utils.isZero(h.default.vector(1, 0).dot(v))
														) {
															var b = m.clone();
															if (
																((b.x = w.x + Math.max(Math.floor(m.x - w.x), 0)),
																(b.y = w.y + Math.max(Math.floor(m.y - w.y), 0)),
																m.distanceTo(b)[0] > 0.05)
															) {
																(e = e.translate(h.default.vector(b.x - m.x, b.y - m.y))), (i = !0);
																break;
															}
														}
													}
												}
											} catch (e) {
												n = {
													error: e,
												};
											} finally {
												try {
													d && !d.done && (r = f.return) && r.call(f);
												} finally {
													if (n) throw n.error;
												}
											}
											if (i) return 'break';
										};
										try {
											for (
												var p = s(this.view.shapeManager.shapem), f = p.next();
												!f.done;
												f = p.next()
											)
												if ('break' === u(f.value)) break;
										} catch (e) {
											r = {
												error: e,
											};
										} finally {
											try {
												f && !f.done && (i = p.return) && i.call(p);
											} finally {
												if (r) throw r.error;
											}
										}
										return e;
									}),
									t
								);
							})(f.DragDrawTool);
						t.MullionCrossLine = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.MullionCrossLineEqual = void 0);
						var l = s(n(0)),
							h = n(2),
							c = n(5),
							u = n(1),
							p = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									if (((r.equalNum = n), n < 2)) throw new Error('equalNum too small');
									return r;
								}
								return (
									i(t, e),
									(t.prototype.finishDrag = function (e) {
										var t = this,
											n = !1,
											r = e.edge(0),
											i = [];
										this.view.shapeManager.shapem.forEach(function (e) {
											var o = [],
												s = e.usedPoly;
											e.avaiablePoly.forEach(function (e) {
												s.some(function (t) {
													return e.polyId.equalTo(t);
												}) || o.push(e);
											});
											var h = [];
											e.sashManager.allSashes.forEach(function (e) {
												return h.push.apply(h, a(e.avaiablePoly));
											}),
												a(o, h).forEach(function (e) {
													var o,
														s = e.intersect(r);
													1 === s.length
														? ((o = l.default.segment(r.start, s[0]).middle()),
														  e.contains(o) || (o = l.default.segment(s[0], r.end).middle()))
														: s.length >= 2
														? (o = l.default.segment(s[0], s[1]).middle())
														: e.contains(r) && (o = r.middle()),
														o && ((n = !0), i.push.apply(i, a(t.addEqual(r, e))));
												});
										}),
											i.forEach(function (e) {
												e.topFrame.updateFrame(!0), e.topFrame.draw(t.view);
											}),
											n
												? u.Glass.calcSerial(this.view.shapeManager.shapem)
												: this.view.toolManager.releaseTool();
									}),
									(t.prototype.addEqual = function (e, t) {
										var n = l.default.vector(0, 1),
											r = !1,
											i = l.default.vector(e.start, e.end);
										Math.abs(i.y) > Math.abs(i.x) && ((n = l.default.vector(1, 0)), (r = !0));
										var a = t.partition(this.equalNum, r),
											s = new Map();
										this.view.shapeManager.shapem.forEach(function (e) {
											s.set(e.id, [e, e.mulManager.splitter.lines.length]),
												e.sashManager.allSashes.forEach(function (e) {
													s.set(e.id, [e, e.mulManager.splitter.lines.length]);
												});
										});
										for (var c = 0; c < this.equalNum - 1; c++)
											this.view.shapeManager.addMullion(l.default.line(a[c].box.center, n));
										var u = new Map();
										this.view.shapeManager.shapem.forEach(function (e) {
											u.set(e.id, [e, e.mulManager.splitter.lines.length]),
												e.sashManager.allSashes.forEach(function (e) {
													u.set(e.id, [e, e.mulManager.splitter.lines.length]);
												});
										});
										var p = [];
										return (
											u.forEach(function (e, t) {
												var n = o(e, 2),
													r = n[0],
													i = n[1],
													a = s.get(t);
												if (void 0 !== a) {
													var l = a[1];
													i <= l ||
														r.mulManager.splitter.lines.forEach(function (e, t) {
															t < l ||
																t >= i ||
																((e.equalSplit = h.EqualSplitType.Outter), p.push(r));
														});
												}
											}),
											p
										);
									}),
									t
								);
							})(c.MullionCrossLine);
						t.MullionCrossLineEqual = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditHardwareOnFrameTool = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(6),
							h = n(5),
							c = n(1),
							u = n(13),
							p = (function (e) {
								function t(t, n) {
									void 0 === t && (t = h.ToolType.editHardwareOnFrame);
									var r = e.call(this, t, n) || this;
									return (r.view = n), r;
								}
								return (
									i(t, e),
									(t.prototype.allowEdgeChanging = function () {
										return (
											this.sash.isStandalone ||
											this.sash instanceof c.SlideSash ||
											(this.sash instanceof c.FoldSash &&
												this.hardware.hardwareShape === c.HardwareShape.Lock)
										);
									}),
									(t.prototype.doTask = function (e) {
										if (void 0 !== this.hardware && void 0 !== this.hardware.edge) {
											var t = this.sash.polygon.edges,
												n = this.allowEdgeChanging()
													? s.Utils.indexOfClosestEdge(this.curPt, t)
													: void 0,
												r = void 0 !== n && n !== this.hardware.edgeIndex,
												i = void 0 === n ? this.hardware.edge : t[n];
											if (i) {
												var o = s.Utils.projectionOnEdge(this.curPt, i);
												if (o) {
													if (this.hardware.relativeOffsetSet) {
														var l = a.default.vector(o, i.middle()).dot(i.tangentInEnd());
														(this.hardware.relativeOffset = l), r && (this.hardware.edgeIndex = n);
													} else {
														var h = s.Utils.distanceFromEdgeStart(o, i) / i.length;
														this.hardware.move(h, n);
													}
													e || this.view.shapeManager.optimizeHandleDim(),
														r && (this.hardware.dimToMid.offset = a.default.vector()),
														this.hardware.updatePoly(),
														this.hardware.draw(this.view),
														this.manager instanceof u.PushableHardwareManager &&
															((this.manager instanceof u.PushSashHardwareManager &&
																this.manager.slide !== u.OpenDirection.None) ||
																this.manager.openDirection === u.OpenDirection.None ||
																this.manager.openDirection === u.OpenDirection.Float ||
																(this.manager.matchOpenDirection(), this.broadcastTopViewChange())),
														(!(this.sash instanceof c.SlideSash) ||
															this.sash.host.locksSameHeight) &&
															this.onHardwareEdited(n);
												}
											}
										}
									}),
									(t.prototype.onHardwareEdited = function (e) {
										var t = this;
										this.sash.topFrame.sashManager.allSashes
											.filter(function (e) {
												return e !== t.sash;
											})
											.filter(function (e) {
												return e.polyId.equalTo(t.sash.polyId);
											})
											.map(function (e) {
												return e.hardwareManager.hardwares;
											})
											.flat()
											.filter(function (e) {
												return !e.hidden;
											})
											.filter(function (e) {
												return e.hardwareShape === t.hardware.hardwareShape;
											})
											.forEach(function (e) {
												e.alignTo(t.hardware), e.updatePoly(), e.draw(t.view);
											});
									}),
									(t.prototype.broadcastTopViewChange = function () {
										this.view.eventBus.emit({
											type: l.EventType.top_view_change,
											payload: {
												view: this.view,
												frame: this.hardware.topFrame,
											},
										});
									}),
									t
								);
							})(h.EditHardwareTool);
						t.EditHardwareOnFrameTool = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditHardwareOnMullionTool = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(5),
							h = n(5),
							c = n(1),
							u = (function (e) {
								function t(t, n) {
									void 0 === t && (t = l.ToolType.editHardwareOnMullion);
									var r = e.call(this, t, n) || this;
									return (r.view = n), r;
								}
								return (
									i(t, e),
									(t.prototype.doTask = function () {
										if (void 0 !== this.hardware && void 0 !== this.hardware.edge) {
											var e = this.hardware.edge,
												t = s.Utils.projectionOnEdge(this.curPt, e);
											if (t) {
												var n = s.Utils.distanceFromEdgeStart(t, e) / e.length;
												if (
													(this.hardware.move(n),
													this.hardware.updatePoly(),
													this.hardware.draw(this.view),
													this.hardware.hardwareShape === c.HardwareShape.KfcHandle)
												) {
													var r = this.hardware.shapes[0].boxWidth,
														i = a.default.segment(
															e.start.translate(e.tangentInStart().multiply(r / 2)),
															e.end.translate(e.tangentInEnd().multiply(r / 2)),
														);
													n = s.Utils.distanceFromEdgeStart(t, i) / i.length;
												}
												this.onHardwareEdited(n);
											}
										}
									}),
									(t.prototype.onHardwareEdited = function (e, t) {
										var n = this;
										this.sash.topFrame.sashManager.allSashes
											.filter(function (e) {
												return e !== n.sash;
											})
											.filter(function (e) {
												return e.polyId.equalTo(n.sash.polyId);
											})
											.map(function (e) {
												return e.hardwareManager.hardwares;
											})
											.flat()
											.filter(function (e) {
												return !e.hidden;
											})
											.filter(function (e) {
												return e.hardwareShape === n.hardware.hardwareShape;
											})
											.forEach(function (t) {
												var r = t;
												if (r.hardwareShape === c.HardwareShape.KfcHandle) {
													var i = r.shapes[0].boxWidth,
														o = r.edge;
													e = (e * (o.length - i) + i / 2) / o.length;
												}
												r.move(e, void 0, n.hardware), r.updatePoly(), r.draw(n.view);
											});
									}),
									t
								);
							})(h.EditHardwareTool);
						t.EditHardwareOnMullionTool = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditInnerSplitter = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(5),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, l.ToolType.editInnerSplitter, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											void 0 !== this.vshape &&
												requestAnimationFrame(function () {
													return n.doTask();
												});
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.vshape &&
											(this.doTask(!0),
											this.view.mometoManager.checkPoint(),
											s.ShapeHelper.restoreShapeMatrix(this.vshape),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t));
									}),
									(t.prototype.doTask = function (e) {
										if ((void 0 === e && (e = !1), void 0 !== this.vshape)) {
											var t = this.curPt,
												n = this.vshape.attrs.robot,
												r = a.default.vector(t.x - this.prevPt.x, t.y - this.prevPt.y);
											this.view.shapeManager.dragInner(n, r, this.prevPt.clone(), !e),
												(this.prevPt = t);
										}
									}),
									t
								);
							})(l.Tool);
						t.EditInnerSplitter = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__assign) ||
								function () {
									return (o =
										Object.assign ||
										function (e) {
											for (var t, n = 1, r = arguments.length; n < r; n++)
												for (var i in (t = arguments[n]))
													Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
											return e;
										}).apply(this, arguments);
								},
							a =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							s =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(a(arguments[t]));
									return e;
								},
							l =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditDragRobotTool = void 0);
						var h = l(n(0)),
							c = n(2),
							u = n(11),
							p = n(5),
							f = n(1),
							d = (function (e) {
								function t(t) {
									var n = e.call(this, p.ToolType.editDragRobot, t) || this;
									return (n.view = t), (n.prevPt = new h.default.Point()), (n.snapDistance = 80), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'rob', {
										get: function () {
											return this.view.dragRob;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'host', {
										get: function () {
											return this.rob.hostShape;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											this.host && this.host instanceof f.Frame && this.host.clearCornerStyle();
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t);
										var r = this.curPt,
											i = h.default.vector(r.x - this.prevPt.x, r.y - this.prevPt.y);
										if ((this.rob.drag(i), (this.prevPt = r), this.host)) {
											this.hideSnaps(), (this.currSnapOption = void 0);
											var o = s(
												this.view.shapeManager.shapem,
												this.view.shapeManager.walls,
												this.view.shapeManager.cornerJoiners,
												this.view.shapeManager.connectors,
											);
											o = o.filter(function (e) {
												return e !== n.host;
											});
											var a = this.host.polygon.edges.filter(function (e) {
													return e instanceof h.default.Segment;
												}),
												l = [];
											a.forEach(function (e) {
												var t = n.snapOptions(e, o);
												l.push.apply(l, s(t));
											}),
												l.sort(function (e, t) {
													return e.distance - t.distance;
												});
											var c = l.shift();
											c &&
												(c.distance > this.snapDistance ||
													(this.displaySnap(c.edgeFrom.start, c.edgeFrom.end),
													this.displaySnap(c.snapEdge.start, c.snapEdge.end),
													c.snapPt && this.displayCircleSnap(c.snapPt),
													(this.currSnapOption = c)));
										}
									}),
									(t.prototype.mousedone = function (t) {
										var n;
										e.prototype.mousedone.call(this, t),
											this.host instanceof f.Frame && this.host.clearCornerStyle(),
											this.hideSnaps(),
											this.currSnapOption &&
												(this.snap(this.currSnapOption),
												this.host instanceof f.Frame &&
													(n = this.host.tCornerConnector) &&
													this.host.tCornerStyle()),
											this.view.shapeManager.refreshWalls(),
											this.refreshDim(n),
											this.view.mometoManager.checkPoint();
									}),
									(t.prototype.refreshDim = function (e) {
										var t = this;
										this.view.shapeManager.shapem.forEach(function (e) {
											e.dim.updatePoly(), e.dim.draw(t.view);
										}),
											e &&
												((e.dimForWidth.position = u.Direction.Up),
												e.updatePoly(),
												e.draw(this.view)),
											this.view.shapeManager.refreshTotalWidth();
									}),
									(t.prototype.snap = function (e) {
										if (e.ptFrom && e.snapPt) this.rob.drag(h.default.vector(e.ptFrom, e.snapPt));
										else {
											var t = e.edgeFrom.distanceTo(e.snapEdge)[1];
											this.rob.drag(h.default.vector(t.start, t.end));
										}
									}),
									(t.prototype.snapOptions = function (e, t) {
										var n = this,
											r = [];
										return (
											t.forEach(function (t) {
												var i = t.polygon.edges;
												if (t instanceof f.Connector) {
													var a = t.tCornerEdge;
													if (c.Utils.isParallel(a, e) && t.polygon.intersect(e).length > 0) {
														var s = n.tCornerSnapPt(e, a);
														return void r.push(
															o(
																o(
																	{
																		edgeFrom: e,
																		snapTarget: t,
																		snapEdge: t.tCornerEdge,
																	},
																	s,
																),
																{
																	distance: 0,
																},
															),
														);
													}
												}
												i.forEach(function (i) {
													if (i instanceof h.default.Segment && c.Utils.isParallel(i, e)) {
														var a = n.findSnapPt(e, i);
														r.push(
															o(
																o(
																	{
																		edgeFrom: e,
																		snapTarget: t,
																		snapEdge: i,
																	},
																	a,
																),
																{
																	distance: e.distanceTo(i)[0],
																},
															),
														);
													}
												});
											}),
											r
										);
									}),
									(t.prototype.tCornerSnapPt = function (e, t) {
										var n = [e.start, e.end],
											r = [t.start, t.end];
										return {
											ptFrom: n.sort(function (e, t) {
												return e.y - t.y;
											})[0],
											snapPt: r.sort(function (e, t) {
												return e.y - t.y;
											})[0],
										};
									}),
									(t.prototype.findSnapPt = function (e, t) {
										var n = [
											h.default.segment(e.start, t.start),
											h.default.segment(e.start, t.end),
											h.default.segment(e.end, t.start),
											h.default.segment(e.end, t.end),
										];
										n.sort(function (e, t) {
											return e.length - t.length;
										});
										var r,
											i,
											o = n.shift();
										return (
											o && o.length < this.snapDistance && ((r = o.start), (i = o.end)),
											{
												ptFrom: r,
												snapPt: i,
											}
										);
									}),
									t
								);
							})(p.Tool);
						t.EditDragRobotTool = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditWallDragRobotTool = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(5),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, l.ToolType.editWallDragRobot, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										e.prototype.dragmove.call(this, t);
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.vshape &&
											(this.doTask(),
											this.view.mometoManager.checkPoint(),
											s.ShapeHelper.restoreShapeMatrix(this.vshape),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t));
									}),
									(t.prototype.doTask = function () {
										if (void 0 !== this.vshape) {
											var e = a.default.vector(this.prevPt, this.curPt);
											(this.prevPt = this.curPt), this.vshape.attrs.robot.translate(e);
										}
									}),
									t
								);
							})(l.Tool);
						t.EditWallDragRobotTool = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditTopViewDragRobotTool = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(2),
							h = n(5),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, h.ToolType.editTopViewDragRobot, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'attrs', {
										get: function () {
											return this.vshape.attrs;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'robot', {
										get: function () {
											return this.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.vshape = t.target),
											(this.prevPt = this.curPt);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											this.vshape && l.ShapeHelper.restoreShapeMatrix(this.vshape),
											requestAnimationFrame(function () {
												if (n.vshape) {
													var e = a.default
														.vector(n.prevPt, n.curPt)
														.projectionOn(a.default.vector(0, 1));
													'dim' === s.DrawParams.Ins.topViewStyle
														? n.view.shapeManager.shapem.forEach(function (t) {
																(t.topView.offset = t.topView.offset.add(e)),
																	t.topView.refreshCornerPresent(),
																	t.topView.updatePoly(),
																	t.topView.draw(n.view);
														  })
														: ((n.robot.offset = n.robot.offset.add(e)),
														  n.robot.refreshCornerPresent(),
														  n.robot.updatePoly(),
														  n.robot.draw(n.view)),
														(n.prevPt = n.curPt);
												}
											});
									}),
									(t.prototype.mousedone = function (t) {
										this.view.mometoManager.checkPoint(),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t);
									}),
									t
								);
							})(h.Tool);
						t.EditTopViewDragRobotTool = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditEdgeRobotTool = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(13),
							h = n(106),
							c = n(5),
							u = n(2),
							p = n(16),
							f = (function (e) {
								function t(t) {
									var n = e.call(this, c.ToolType.editEdgeRobot, t) || this;
									return (
										(n.view = t),
										(n.prevPt = new a.default.Point()),
										(n.offvec = a.default.vector()),
										(n.isPedal = !1),
										n
									);
								}
								return (
									i(t, e),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.startingPt = this.prevPt = this.curPt),
											(this.vshape = t.target);
										var n = this.vshape.attrs.robData.vertex;
										this.offvec = a.default.vector(this.curPt.x - n.x, this.curPt.y - n.y);
										var r = this.vshape.attrs.robot.fm.host.topFrame.polygon.edges,
											i = this.vshape.attrs.robData.idx,
											o = r.length,
											s = r[i],
											l = r[(i + o - 1) % o];
										s instanceof a.default.Segment &&
											l instanceof a.default.Segment &&
											(this.isPedal = a.default.Utils.EQ_0(s.tangentInEnd().dot(l.tangentInEnd())));
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											void 0 !== this.vshape &&
												requestAnimationFrame(function () {
													n.snapVector || n.prevPt.equalTo(n.curPt) || n.calculateSnapVector(),
														n.doTask(t.evt.shiftKey);
												});
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.vshape &&
											(this.doTask(t.shiftKey, !0),
											this.view.mometoManager.checkPoint(),
											u.ShapeHelper.restoreShapeMatrix(this.vshape),
											(this.vshape = void 0),
											l.ShapeActor.emitStructureChanged(this.view),
											e.prototype.mousedone.call(this, t));
									}),
									(t.prototype.doTask = function (e, t) {
										if ((void 0 === t && (t = !1), void 0 !== this.vshape)) {
											var n = a.default.vector(
												this.curPt.x - this.startingPt.x,
												this.curPt.y - this.startingPt.y,
											);
											if (!(this.isPedal && n.length < 15)) {
												var r = this.curPt,
													i = a.default.vector(r.x - this.prevPt.x, r.y - this.prevPt.y);
												this.prevPt = r;
												var o = this.vshape,
													l = o.attrs.robData;
												l.vertex = l.vertex.translate(i);
												var c = l.idx,
													f = l.arc,
													d = o.attrs.robot;
												if (void 0 !== d) {
													if (this.snapVector && !f) {
														var g = d.fm.host,
															y = g.polygon.edges,
															m = y[c],
															v = y.length,
															w = (c + v - 1) % v,
															b = y[w];
														if (
															a.default.Utils.EQ_0(this.snapVector.dot(a.default.vector(1, -1))) ||
															a.default.Utils.EQ_0(this.snapVector.cross(a.default.vector(1, -1)))
														) {
															var S = i.projectionOn(a.default.vector(this.snapVector.x, 0)),
																_ = i.projectionOn(a.default.vector(0, this.snapVector.y));
															u.Utils.isSegVertical(m) &&
																((S = i.projectionOn(a.default.vector(0, this.snapVector.y))),
																(_ = i.projectionOn(a.default.vector(this.snapVector.x, 0)))),
																d.dragEdge(S, w),
																d.dragEdge(_, c);
														} else {
															var P = i.projectionOn(this.snapVector),
																x = a.default.line(m.start, this.snapVector.rotate90CW());
															if (x && this.pedalPt) {
																if (this.curPt.projectionOn(x).distanceTo(this.pedalPt)[0] < 120) {
																	if (!this.isPedal) {
																		(y[c] = a.default.segment(this.pedalPt, m.end)),
																			(y[w] = a.default.segment(b.start, this.pedalPt));
																		var D = new p.WinPolygon(y);
																		d.fm.recreated(D, this.view),
																			(this.isPedal = !0),
																			d.attachTo(g),
																			(this.isPedal = !0);
																	}
																	P = a.default.vector();
																} else this.isPedal = !1;
																d.drag(P, c, f, !1);
															}
														}
													} else {
														var T = this.showSnap(l.hid, l.vertex, t);
														t && T && ((i = T), d.hide()), d.drag(i, c, f, e, this.prevPt);
													}
													h.EditSplitterTool.handleExtraDim(d.fm.host.topFrame, this.view),
														this.view.eventBus.emit({
															type: s.EventType.drag_in_process,
															payload: {
																moving: t,
															},
														});
												}
											}
										}
									}),
									(t.prototype.showSnap = function (e, t, n) {
										this.hideSnaps();
										var r = this.view.shapeManager.snapVertex(t, e);
										if (r)
											return n
												? a.default
														.vector(r.x - this.prevPt.x, r.y - this.prevPt.y)
														.add(this.offvec)
												: void this.displayCircleSnap(r);
									}),
									(t.prototype.shouldExcludePolygon = function (e) {
										return (
											e instanceof p.HalfKfcPolygon ||
											e instanceof p.HalfKfc2Polygon ||
											e instanceof p.EarPolygon ||
											e instanceof p.Ear2Polygon ||
											e instanceof p.PointedEarPolygon ||
											e instanceof p.DoubleEarsPolygon ||
											e instanceof p.KfcPolygon ||
											e instanceof p.Kfc2Polygon ||
											e instanceof p.Kfc3Polygon
										);
									}),
									(t.prototype.calculateSnapVector = function () {
										if (this.startingPt) {
											var e = this.vshape,
												t = e.attrs.robot.fm.host.polygon;
											if (!this.shouldExcludePolygon(t)) {
												var n = t.edges,
													r = n.length,
													i = e.attrs.robData.idx,
													o = n[i],
													s = n[(i + r - 1) % r],
													l = [],
													h = a.default.vector(
														this.curPt.x - this.startingPt.x,
														this.curPt.y - this.startingPt.y,
													);
												if (o instanceof a.default.Segment && s instanceof a.default.Segment) {
													if (
														(u.Utils.isHorizOrVer(o) &&
															(l.push(o.tangentInEnd().normalize(), o.tangentInStart().normalize()),
															(this.pedalPt = a.default
																.line(o.start, o.end)
																.distanceTo(s.start)[1].start)),
														u.Utils.isHorizOrVer(s) &&
															(l.push(s.tangentInEnd().normalize(), s.tangentInStart().normalize()),
															(this.pedalPt = a.default
																.line(s.start, s.end)
																.distanceTo(o.end)[1].start)),
														u.Utils.isHorizOrVer(o) &&
															u.Utils.isHorizOrVer(s) &&
															l.push(
																a.default.vector(1, 1),
																a.default.vector(1, -1),
																a.default.vector(-1, -1),
																a.default.vector(-1, 1),
															),
														0 === l.length)
													)
														return;
													var c = l
														.map(function (e) {
															var t = e.angleTo(h);
															return {
																snapVector: e,
																angle: t,
															};
														})
														.sort(function (e, t) {
															return e.angle - t.angle;
														});
													this.snapVector = c[0].snapVector;
												}
											}
										}
									}),
									t
								);
							})(c.Tool);
						t.EditEdgeRobotTool = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditWallEdgeRobotTool = void 0);
						var o = n(6),
							a = n(5),
							s = n(2),
							l = (function (e) {
								function t(t) {
									var n = e.call(this, a.ToolType.editWallEdgeRobot, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'attrs', {
										get: function () {
											return this.vshape.attrs;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'robot', {
										get: function () {
											return this.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'edge', {
										get: function () {
											var e = this.attrs.robData.idx;
											return this.robot.wall.polygon.edges[e];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isVertex', {
										get: function () {
											return this.attrs.robData.vertexControl;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t), (this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											requestAnimationFrame(function () {
												void 0 !== n.vshape &&
													(n.isVertex ? n.detectVertexSnaps() : n.detectEdgeSnaps(), n.doTask());
											});
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.vshape &&
											(this.magneticPoint && (this.hideSnaps(), (this.curPt = this.magneticPoint)),
											this.doTask(),
											this.view.mometoManager.checkPoint(),
											s.ShapeHelper.restoreShapeMatrix(this.vshape),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t));
									}),
									(t.prototype.detectVertexSnaps = function () {
										this.hideSnaps(), (this.magneticPoint = void 0);
										var e = this.view.shapeManager.snapVertex(this.curPt, this.attrs.robData.hid);
										e && (this.displayCircleSnap(e), (this.magneticPoint = e));
									}),
									(t.prototype.detectEdgeSnaps = function () {
										this.magneticPoint = this.detectSnaps(this.edge, this.robot.wall);
									}),
									(t.prototype.doTask = function () {
										void 0 !== this.vshape &&
											(this.robot.dragTo(
												this.curPt,
												this.attrs.robData.idx,
												this.attrs.robData.vertexControl,
												!!this.magneticPoint,
											),
											this.wallShapeChanged());
									}),
									(t.prototype.wallShapeChanged = function () {
										this.view.eventBus.emit({
											type: o.EventType.wall_shape_change,
											payload: {
												view: this.view,
											},
										});
									}),
									t
								);
							})(a.Tool);
						t.EditWallEdgeRobotTool = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditMullionRobotTool = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(6),
							h = n(2),
							c = n(13),
							u = n(106),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, s.ToolType.editMullionRobot, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), (n.offag = 0), n;
								}
								return (
									i(t, e),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
										var n = this.vshape.attrs.robData;
										if (!n.arc) {
											var r = a.default.vector(n.cpt, n.pt).normalize(),
												i = a.default.vector(n.cpt, this.curPt).normalize();
											this.offag = Math.atan2(r.cross(i), r.dot(i));
										}
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											void 0 !== this.vshape &&
												requestAnimationFrame(function () {
													n.doTask();
												});
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.vshape &&
											(this.doTask(!0),
											this.view.mometoManager.checkPoint(),
											h.ShapeHelper.restoreShapeMatrix(this.vshape),
											(this.vshape = void 0),
											c.ShapeActor.emitStructureChanged(this.view),
											e.prototype.mousedone.call(this, t));
									}),
									(t.prototype.doTask = function (e) {
										if ((void 0 === e && (e = !1), void 0 !== this.vshape)) {
											var t = this.curPt,
												n = a.default.vector(this.prevPt, t),
												r = this.vshape,
												i = r.attrs.robot;
											if (void 0 !== i) {
												var o = r.attrs.robData.arc,
													s = r.attrs.robData.innerEdgeIndex,
													c = r.attrs.robData.idx;
												if (o) i.drag(n, c, s, a.default.point(), a.default.vector(), !e);
												else {
													var p = r.attrs.robData.cpt,
														f = a.default.vector(p, this.curPt).slope,
														d = a.default.vector(p, this.prevPt).slope,
														g = this.showSnap(p, e);
													e &&
														void 0 !== g &&
														((f = g + this.offag),
														(n = a.default.vector(
															this.prevPt,
															h.Utils.slopeDirPt(p, p.distanceTo(this.curPt)[0], g),
														)),
														i.hide()),
														i.drag(f - d, c, s, this.prevPt, n, !e);
												}
												(this.prevPt = t),
													i.mm.bars[c] &&
														i.mm.bars[c].parent &&
														u.EditSplitterTool.handleExtraDim(i.mm.bars[c].topFrame, this.view),
													this.view.eventBus.emit({
														type: l.EventType.drag_in_process,
														payload: {
															moving: e,
														},
													});
											}
										}
									}),
									(t.prototype.showSnap = function (e, t) {
										this.hideSnaps();
										var n = a.default.vector(e, this.curPt).slope,
											r = function (e) {
												return (e * Math.PI) / 180;
											},
											i = [0, r(45), r(90), r(135), r(180), r(225), r(270), r(315)].find(function (
												e,
											) {
												return Math.abs(e - n) < r(5);
											});
										if (void 0 !== i) {
											if (t) return i;
											var o = h.Utils.slopeDirPt(e, e.distanceTo(this.curPt)[0], i);
											this.displaySnap(e, o);
										}
									}),
									t
								);
							})(s.Tool);
						t.EditMullionRobotTool = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SashTool = void 0);
						var o = n(5),
							a = n(50),
							s = n(1),
							l = (function (e) {
								function t(t, n, r, i) {
									var a = e.call(this, t, n) || this;
									return (
										(a.handleType = r),
										(a.hingeType = i),
										(a.shapeTypes = new Map([
											[o.ToolType.sash, s.ShapeType.Sash],
											[o.ToolType.screen, s.ShapeType.Screen],
											[o.ToolType.guardSash, s.ShapeType.GuardSash],
										])),
										a
									);
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										var t = this;
										this.view.shapeManager.addSash(e, this.shapeTypes.get(this.name)),
											(this.handleType || this.hingeType) &&
												(this.view.shapeManager.shapem
													.map(function (e) {
														return e.sashManager.sashes;
													})
													.flat()
													.filter(function (t) {
														return t.hitTest(e);
													})
													.forEach(function (e) {
														t.handleType && (e.hardwareManager.handleType = t.handleType),
															t.hingeType && (e.hardwareManager.hingeType = t.hingeType),
															e.updatePoly(),
															e.draw(t.view),
															e.draw(t.view);
													}),
												this.view.shapeManager.optimizeHandleDim(),
												this.view.refresh());
									}),
									t
								);
							})(a.FenesTool);
						t.SashTool = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SashScreenIntegratedTool = void 0);
						var o = n(5),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										this.view.shapeManager.addSash(e, a.ShapeType.Screen),
											this.view.shapeManager.addSash(e, a.ShapeType.Sash);
									}),
									t
								);
							})(o.FenesTool);
						t.SashScreenIntegratedTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.InnerSashAndScreenTool = void 0);
						var o = n(5),
							a = n(6),
							s = n(13),
							l = n(1),
							h = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										var t = this;
										this.view.shapeManager.addSash(e, l.ShapeType.Screen),
											this.view.shapeManager.addSash(e, l.ShapeType.Sash),
											this.view.shapeManager.shapem
												.map(function (e) {
													return e.sashManager.sashes;
												})
												.flat()
												.filter(function (t) {
													return t.hitTest(e);
												})
												.forEach(function (e) {
													(e.hardwareManager.openToward = s.OpenToward.Inward),
														e.hardwareManager.updatePoly(),
														e.draw(t.view),
														t.broadcastTopViewChange(e.topFrame);
												}),
											this.view.refresh();
									}),
									(t.prototype.broadcastTopViewChange = function (e) {
										this.view.eventBus.emit({
											type: a.EventType.top_view_change,
											payload: {
												view: this.view,
												frame: e,
											},
										});
									}),
									t
								);
							})(o.FenesTool);
						t.InnerSashAndScreenTool = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DownWithSlideSashTool = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(6),
							h = n(13),
							c = n(11),
							u = n(1),
							p = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										this.view.shapeManager.addSash(e, u.ShapeType.Sash);
										var t = this.view.shapeManager.shapem
											.map(function (e) {
												return e.sashManager.sashes;
											})
											.flat()
											.find(function (t) {
												return t.hitTest(e);
											});
										if (t) {
											t.hardwareManager.openDirection = h.OpenDirection.Down;
											var n = t.hardwareManager.handle,
												r = this.handleToRight(t);
											(n.edgeIndex = c.EdgeFinder.Instance.findIndex(
												r ? c.Direction.Right : c.Direction.Left,
												t.polygon,
											)),
												(t.hardwareManager.slide = r
													? h.OpenDirection.Right
													: h.OpenDirection.Left),
												t.hardwareManager.updatePoly(),
												t.draw(this.view),
												this.broadcastTopViewChange(t.topFrame),
												this.view.refresh();
										}
									}),
									(t.prototype.broadcastTopViewChange = function (e) {
										this.view.eventBus.emit({
											type: l.EventType.top_view_change,
											payload: {
												view: this.view,
												frame: e,
											},
										});
									}),
									(t.prototype.handleToRight = function (e) {
										return (
											a.default.vector(e.parent.polygon.box.center, e.polygon.box.center).x <= 0
										);
									}),
									t
								);
							})(s.FenesTool);
						t.DownWithSlideSashTool = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.KfcSashTool = void 0);
						var o = n(50),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										this.view.shapeManager.addKfcSash(e, a.ShapeType.KfcSash);
									}),
									t
								);
							})(o.FenesTool);
						t.KfcSashTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoubleKfcSashTool = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								(t.prototype.addFenes = function (e) {
									this.view.shapeManager.addDoubleKfcSash(e);
								}),
								t
							);
						})(n(50).FenesTool);
						t.DoubleKfcSashTool = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoubleSashTool = void 0);
						var o = n(5),
							a = n(1),
							s = (function (e) {
								function t(t, n, r, i) {
									var s = e.call(this, t, n) || this;
									return (
										(s.handleType = r),
										(s.hingeType = i),
										(s.shapeTypes = new Map([
											[o.ToolType.doubleSash, a.ShapeType.DoubleSash],
											[o.ToolType.doubleScreen, a.ShapeType.DoubleScreen],
										])),
										s
									);
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										var t = this;
										this.view.shapeManager.addDoubleSash(e, this.shapeTypes.get(this.name)),
											(this.handleType || this.hingeType) &&
												(this.view.shapeManager.shapem
													.map(function (e) {
														return e.sashManager.doubleSashes;
													})
													.flat()
													.filter(function (t) {
														return t.sashes.find(function (t) {
															return t.hitTest(e);
														});
													})
													.forEach(function (e) {
														e.sashes.forEach(function (e) {
															t.handleType && (e.hardwareManager.handleType = t.handleType),
																t.hingeType && (e.hardwareManager.hingeType = t.hingeType),
																e.updatePoly(),
																e.draw(t.view);
														}),
															e.draw(t.view);
													}),
												this.view.shapeManager.optimizeHandleDim(),
												this.view.refresh());
									}),
									t
								);
							})(o.FenesTool);
						t.DoubleSashTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SimpleLineTool = void 0);
						var a = o(n(0)),
							s = n(49),
							l = n(9),
							h = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'shouldRelease', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.finishDrag = function (e) {
										var t = this.curPt,
											n = l.SimpleLineCreator.Instance.create(this.name);
										n.translate(a.default.vector(n.pt, t)), this.view.shapeManager.addMullion(n);
									}),
									t
								);
							})(s.DragDrawTool);
						t.SimpleLineTool = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShapeElement = t.Splitter = void 0);
						var s = a(n(0)),
							l = n(9),
							h = n(1),
							c = n(2),
							u = (function () {
								function e(e, t) {
									(this.poly = e),
										(this.splitLine = t),
										(this.splitPoly = []),
										(this.edgesOnLine = []);
								}
								return (
									(e.prototype.partition = function () {
										return this._split(this.poly, this.splitLine);
									}),
									(e.prototype.split = function (e) {
										var t = this,
											n = this.poly,
											r = this.splitLine,
											i = [],
											o = this.genMullionLine(r, 0.5 * e),
											a = o[0],
											l = o[1],
											h = this.findLinePos(a),
											c = this.findLinePos(l);
										return (
											this._split(n, a).forEach(function (e) {
												if (
													l instanceof s.default.Line || l instanceof s.default.Segment
														? !e.isIntersect(l)
														: !e.contains(l.middle())
												)
													return (
														(e.spLine.line = r.clone()),
														e.polyId.posBySide(h),
														t.checkPoly(i, e),
														void i.push(e)
													);
												t._split(e, l).forEach(function (e) {
													e.checkMullion(r),
														(e.spLine.line = r.clone()),
														e.polyId.posBySide(c),
														t.checkPoly(i, e),
														i.push(e);
												});
											}),
											i
										);
									}),
									(e.prototype.splitFinal = function (e) {
										var t = this.poly,
											n = this.splitLine,
											r = [],
											i = this.findLinePos(e);
										return (
											this._split(t, e).forEach(function (e) {
												e.checkMullion(n),
													(e.spLine.line = n.clone()),
													e.polyId.posBySide(i),
													r.push(e);
											}),
											r
										);
									}),
									(e.prototype.splitByPts = function (e, t, n) {
										var r = this,
											i = this.poly,
											o = this.splitLine,
											a = [],
											s = this.findLinePos(t),
											l = this.findLinePos(n);
										return (
											this._splitByPts([e[0], e[1]], i, t).forEach(function (t) {
												if (!t.inBoundary(e[2]))
													return (
														(t.spLine.line = o.clone()),
														t.polyId.posBySide(s),
														r.checkPoly(a, t),
														void a.push(t)
													);
												r._splitByPts([e[2], e[3]], t, n).forEach(function (t) {
													t.inBoundary(e[4]) ||
														((t.spLine.line = o.clone()),
														t.polyId.posBySide(l),
														r.checkPoly(a, t),
														a.push(t));
												});
											}),
											a
										);
									}),
									(e.prototype.checkPoly = function (e, t) {
										var n = e.filter(function (e) {
											return !e.IsMullion;
										});
										if (
											0 !== n.length &&
											n.find(function (e) {
												return e.polyId.equalTo(t.polyId);
											})
										) {
											var r = Math.max.apply(
												Math,
												i(
													n.map(function (e) {
														return e.polyId.pos;
													}),
												),
											);
											t.polyId.pos = r + 1;
										}
									}),
									(e.prototype.findLinePos = function (e) {
										if (e instanceof s.default.Line)
											return e.pt.leftTo(this.splitLine) ? c.LineSide.Left : c.LineSide.Right;
										if (e instanceof s.default.Segment) {
											var t = s.default.line(this.splitLine.start, this.splitLine.end);
											return e.middle().leftTo(t) ? c.LineSide.Left : c.LineSide.Right;
										}
										if (e instanceof s.default.Arc) {
											var n = this.splitLine,
												r = s.default.line(n.start, n.end);
											return e.start.leftTo(r) ? c.LineSide.Left : c.LineSide.Right;
										}
										return c.LineSide.None;
									}),
									(e.prototype._split = function (t, n) {
										return (
											this.splitEdges(t, n),
											this.sortEdges(n),
											e.doubleLinked(this.splitPoly),
											this.splitPolygon(n),
											this.collectPoly()
										);
									}),
									(e.prototype._splitByPts = function (t, n, r) {
										var i = new l.PointCut(n);
										return (
											i.splitEdges(t),
											i.feedData(this.splitPoly, this.edgesOnLine),
											this.sortEdges(r),
											e.doubleLinked(this.splitPoly),
											this.splitPolygon(r),
											this.collectPoly()
										);
									}),
									(e.doubleLinked = function (e, t) {
										void 0 === t && (t = !1);
										for (var n = 0; n < e.length; n++)
											n !== e.length - 1 && (e[n].next = e[n + 1]),
												0 !== n && (e[n].prev = e[n - 1]);
										t || ((e[e.length - 1].next = e[0]), (e[0].prev = e[e.length - 1]));
									}),
									(e.prototype.splitPolygon = function (e) {
										this.edgesOnLine.length % 2 == 1 && this.edgesOnLine.splice(-1, 1);
										for (var t = 0; t < this.edgesOnLine.length; t += 2)
											this.createBridge(this.edgesOnLine[t], this.edgesOnLine[t + 1], e);
									}),
									(e.prototype.collectPoly = function () {
										var t,
											n,
											r = [];
										try {
											for (var i = o(this.splitPoly), a = i.next(); !a.done; a = i.next()) {
												var s = a.value;
												s.visited || r.push(e.findPoly(s));
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (n = i.return) && n.call(i);
											} finally {
												if (t) throw t.error;
											}
										}
										return r;
									}),
									(e.findPoly = function (e) {
										var t = [],
											n = e;
										do {
											if (((e.visited = !0), t.push(e.value), void 0 === e.next)) break;
											e = e.next;
										} while (e !== n);
										return c.Utils.optimizePolygon(new h.WinPolygon(t));
									}),
									(e.prototype.createBridge = function (e, t, n) {
										var r = this.createObj(e, t, n);
										if (void 0 !== r) {
											var i = new p(r.value.reverse());
											this.splitPoly.push(r), this.splitPoly.push(i);
											var o = t.prev;
											(e.prev.next = r),
												(r.prev = e.prev),
												(r.next = t),
												(t.prev = r),
												(e.prev = i),
												(i.next = e),
												(i.prev = o),
												(o.next = i);
										}
									}),
									e
								);
							})();
						t.Splitter = u;
						var p = (function () {
							function e(e) {
								(this.value = e), (this.visited = !1);
							}
							return (
								(e.prototype.clone = function () {
									return new e(this.value.clone());
								}),
								e
							);
						})();
						t.ShapeElement = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SplitterLine = void 0);
						var s = a(n(0)),
							l = n(2),
							h = n(9),
							c = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.poly = t), (r.splitLine = n), r;
								}
								return (
									i(t, e),
									(t.prototype.genMullionLine = function (e, t) {
										var n = e.pt.translate(e.norm.multiply(t)),
											r = e.pt.translate(e.norm.multiply(-t));
										return [new s.default.Line(n, e.norm), new s.default.Line(r, e.norm)];
									}),
									(t.prototype.filterValidPts = function (e, t) {
										var n,
											r,
											i = t.edges,
											a = [],
											h = function (t) {
												var n,
													r,
													h = function (n) {
														return a.length === e.length || t === n
															? 'continue'
															: void (
																	i
																		.filter(function (e) {
																			return e instanceof s.default.Segment;
																		})
																		.some(function (e) {
																			return l.Utils.segCoincide(e, s.default.segment(t, n));
																		}) ||
																	[t, n].forEach(function (e) {
																		a.some(function (t) {
																			return t === e;
																		}) || a.push(e);
																	})
															  );
													};
												try {
													for (var c = ((n = void 0), o(e)), u = c.next(); !u.done; u = c.next())
														h(u.value);
												} catch (e) {
													n = {
														error: e,
													};
												} finally {
													try {
														u && !u.done && (r = c.return) && r.call(c);
													} finally {
														if (n) throw n.error;
													}
												}
											};
										try {
											for (var c = o(e), u = c.next(); !u.done; u = c.next()) h(u.value);
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												u && !u.done && (r = c.return) && r.call(c);
											} finally {
												if (n) throw n.error;
											}
										}
										return a;
									}),
									(t.prototype.splitEdges = function (e, t) {
										var n = new h.PointCut(e),
											r = e.intersect(t);
										r.length > 2 && (r = this.filterValidPts(r, e)),
											n.splitEdges(r),
											n.feedData(this.splitPoly, this.edgesOnLine);
									}),
									(t.prototype.sortEdges = function (e) {
										var t = e.norm.rotate90CCW();
										this.edgesOnLine.sort(function (n, r) {
											return (
												new s.default.Vector(n.value.start, e.pt).dot(t) -
												new s.default.Vector(r.value.start, e.pt).dot(t)
											);
										});
									}),
									(t.prototype.createObj = function (e, t, n) {
										return new h.ShapeElement(new s.default.Segment(e.value.start, t.value.start));
									}),
									t
								);
							})(h.Splitter);
						t.SplitterLine = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SplitterSegment = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(9),
							h = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.poly = t), (r.splitLine = n), r;
								}
								return (
									i(t, e),
									(t.prototype.genMullionLine = function (e, t) {
										var n = a.default.line(e.start, e.end).norm;
										return [e.translate(n.multiply(t)), e.translate(n.multiply(-t))];
									}),
									(t.prototype.splitEdges = function (e, t) {
										var n = new l.PointCut(e),
											r = e.intersect(t);
										(r = s.Utils.distinct(r)),
											n.splitEdges(r),
											n.feedData(this.splitPoly, this.edgesOnLine);
									}),
									(t.prototype.sortEdges = function (e) {
										var t = a.default.line(e.start, e.end).norm.rotate90CCW();
										this.edgesOnLine.sort(function (n, r) {
											return (
												new a.default.Vector(n.value.start, e.middle()).dot(t) -
												new a.default.Vector(r.value.start, e.middle()).dot(t)
											);
										});
									}),
									(t.prototype.createObj = function (e, t, n) {
										return new l.ShapeElement(new a.default.Segment(e.value.start, t.value.start));
									}),
									t
								);
							})(l.Splitter);
						t.SplitterSegment = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SplitterArc = void 0);
						var a = o(n(0)),
							s = n(9),
							l = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.poly = t), (r.splitLine = n), r;
								}
								return (
									i(t, e),
									(t.prototype.genMullionLine = function (e, t) {
										var n = e.r.valueOf(),
											r = n - t;
										r = r < 0 ? 0.1 : r;
										var i = n + t;
										return [
											new a.default.Arc(e.center, r, e.startAngle, e.endAngle, e.counterClockwise),
											new a.default.Arc(e.center, i, e.startAngle, e.endAngle, e.counterClockwise),
										];
									}),
									(t.prototype.splitEdges = function (e, t) {
										var n = new s.PointCut(e),
											r = e.intersect(t);
										n.splitEdges(r), n.feedData(this.splitPoly, this.edgesOnLine);
									}),
									(t.prototype.sortEdges = function (e) {
										var t = new a.default.Line(e.start, e.end),
											n = t.norm.rotate90CCW();
										this.edgesOnLine.sort(function (e, r) {
											return (
												new a.default.Vector(e.value.start, t.pt).dot(n) -
												new a.default.Vector(r.value.start, t.pt).dot(n)
											);
										});
									}),
									(t.prototype.createObj = function (e, t, n) {
										var r = n,
											i = new a.default.Vector(r.center, e.value.start).slope,
											o = new a.default.Vector(r.center, t.value.start).slope,
											l = new a.default.Arc(r.center, r.r.valueOf(), i, o, r.counterClockwise);
										return new s.ShapeElement(l);
									}),
									t
								);
							})(s.Splitter);
						t.SplitterArc = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EarFrametify = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n._innerPolygons = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										var t = this.inner0Polygon(e),
											n = this.inner1Polygon(e);
										return (n.polyId.pos = 0), (this._innerPolygons = [t, n]), [t, n];
									}),
									(t.prototype.inner0Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[0].start,
													t[0].end,
													t[2].start,
													t[2].end,
												]),
											),
											r = e[1];
										if (!this.poly.hasBase && !this.poly.yFlip) {
											var i = this.poly.pullingHeight[1];
											i >= 0 && (r = i);
										}
										var o = [e[0], r, e[2], e[3]];
										return this.findInnerPoly(n, o);
									}),
									(t.prototype.inner1Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[4].start,
													t[4].end,
													t[5].end,
													t[0].start,
												]),
											),
											r = [e[4], e[5], 0, e[3]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.findInnerPoly = function (e, t) {
										return new h.WinPolygon(
											s.Frametify.findParallelEdges(e.edges, t, !0, e.orientation, !0),
										);
									}),
									(t.prototype.barPolygons = function (e, t) {
										var n = this.poly.edges,
											r = this._innerPolygons[0].edges,
											i = this._innerPolygons[1].edges,
											o = [
												a.default.segment(
													n[0].start.translate(n[0].tangentInStart().multiply(e[3])),
													n[0].end,
												),
												n[1],
												n[2],
												n[3],
												n[4],
												n[5],
												n[6],
											],
											s = [
												r[0],
												r[1],
												r[2],
												a.default.segment(r[3].start, i[3].end),
												i[0],
												i[1],
												i[2],
											];
										(t[0] = l.EdgeJointWay.Default),
											void 0 === t[1] && (t[1] = l.EdgeJointWay.Vertical),
											this.poly.hasBase || (t[2] = l.EdgeJointWay.Vertical);
										var h = this.createBar(o, s, t);
										return (
											(h[6].virtual = !0),
											this.poly.hasBase || (h[1].virtual = !0),
											(h[0].epDock.stDock = l.Dock.Frame(new l.PolyId(3, -1))),
											(h[5].epDock.etDock = l.Dock.Frame(new l.PolyId(0, -1))),
											h
										);
									}),
									t
								);
							})(s.Frametify);
						t.EarFrametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PointedEarFrametify = void 0);
						var a = o(n(0)),
							s = n(58),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n.innerEdges = []), (n.outsidePath = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										this.analyse(e[0]);
										var t = 0;
										this.poly.hasBase || (t = this.poly.pullingHeight[1] - e[0]);
										var n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													this.innerEdges[0].start,
													this.innerEdges[1].start.translate(a.default.vector(0, -1).multiply(t)),
													this.innerEdges[2].start.translate(a.default.vector(0, -1).multiply(t)),
													this.innerEdges[3].start,
												]),
											),
											r = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													this.outsidePath[0].start,
													this.innerEdges[4].start,
													this.innerEdges[4].end,
												]),
											);
										return (r.polyId.pos = 0), [n, r];
									}),
									(t.prototype.barPolygons = function (e, t) {
										this.poly.hasBase || (t[1] = t[2] = l.EdgeJointWay.Vertical);
										var n = this.createBar(
												this.outsidePath.slice(0, this.outsidePath.length - 1),
												this.innerEdges,
												t,
											),
											r = n[0].mulShape;
										return (
											(n[0].mulShape = a.default.segment(
												a.default
													.line(r.start, r.end)
													.intersect(
														a.default.line(this.poly.edge(3).start, this.poly.edge(3).end),
													)[0],
												r.end,
											)),
											(n[0].epDock.stDock = l.Dock.Frame(n[3].polyId)),
											(n[4].epDock.etDock = l.Dock.Frame(n[0].polyId)),
											this.poly.hasBase || (n[1].virtual = !0),
											n
										);
									}),
									(t.prototype.analyse = function (e) {
										var t = this.poly.orientation === a.default.ORIENTATION.CW,
											n = this.poly.edges.map(function (e) {
												var n = a.default.line(e.start, e.end).norm;
												return t ? n.invert() : n;
											}),
											r = this.poly.edges.map(function (t, r) {
												return t.translate(n[r].multiply(e));
											});
										this.outsidePath = this.poly.edges.map(function (e) {
											return e.clone();
										});
										var i = this.poly.edge(0),
											o = r[3].intersect(a.default.line(i.start, i.end))[0];
										(this.outsidePath[0] = a.default.segment(o, this.outsidePath[0].end)),
											(r[0] = this.outsidePath[0].translate(n[0].multiply(e)));
										for (var s = [], l = 1; l < this.outsidePath.length; l++)
											s.push(r[l - 1].intersect(r[l])[0]);
										var h = r[0].start;
										for (l = 0; l < this.outsidePath.length; l++) {
											var c = void 0;
											if (l === this.outsidePath.length - 2)
												c = r[l].intersect(this.outsidePath[0])[0];
											else {
												if (l === this.outsidePath.length - 1) break;
												c = s[l];
											}
											this.innerEdges.push(a.default.segment(h, c)), (h = s[l]);
										}
									}),
									t
								);
							})(s.Frametify);
						t.PointedEarFrametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SingleTrackFrametify = void 0);
						var o = n(58),
							a = n(11),
							s = n(1),
							l = n(2),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n.innerEdges = []), (n.outsidePath = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										var t = this;
										this.outsidePath = this.poly.edges.map(function (e) {
											return e.clone();
										});
										var n = this.poly.parallelPoly(e, !0);
										this.innerEdges = n.edges;
										var r = n.edges;
										this.poly.hidden.forEach(function (n) {
											var i = e[0];
											n === a.Direction.Down
												? (i = e[1])
												: n === a.Direction.Right
												? (i = e[2])
												: n === a.Direction.Up && (i = e[3]);
											var o = t.poly.pullingHeight.get(n);
											o && (i -= o), (r = t.expendInnerPoly(r, n, i));
										});
										var i = new s.WinPolygon(r);
										return (
											(r = i.edges).forEach(function (e, t) {
												i.edDock.docks.push(l.Dock.Frame(new l.PolyId(t)));
											}),
											this.poly.hidden.forEach(function (e) {
												e === a.Direction.Up
													? (e = a.Direction.Down)
													: e === a.Direction.Down && (e = a.Direction.Up);
												var t = a.EdgeFinder.Instance.findIndex(e, i);
												i.edDock.docks[t] = l.Dock.None();
											}),
											[i]
										);
									}),
									(t.prototype.expendInnerPoly = function (e, t, n) {
										var r = e.length;
										return (
											t === a.Direction.Left &&
												((e[0] = e[0].translate(-n, 0)),
												o.Frametify.edgeIntersection(e, (0 + r - 1) % r),
												o.Frametify.edgeIntersection(e, 0)),
											t === a.Direction.Down &&
												((e[1] = e[1].translate(0, n)),
												o.Frametify.edgeIntersection(e, (1 + r - 1) % r),
												o.Frametify.edgeIntersection(e, 1)),
											t === a.Direction.Right &&
												((e[2] = e[2].translate(n, 0)),
												o.Frametify.edgeIntersection(e, (2 + r - 1) % r),
												o.Frametify.edgeIntersection(e, 2)),
											t === a.Direction.Up &&
												((e[3] = e[3].translate(0, -n)),
												o.Frametify.edgeIntersection(e, (3 + r - 1) % r),
												o.Frametify.edgeIntersection(e, 3)),
											e
										);
									}),
									(t.prototype.barPolygons = function (e, t) {
										this.poly.hidden.some(function (e) {
											return e === a.Direction.Left;
										}) && (t[0] = t[1] = l.EdgeJointWay.Horizontal),
											this.poly.hidden.some(function (e) {
												return e === a.Direction.Right;
											}) && (t[2] = t[3] = l.EdgeJointWay.Horizontal),
											this.poly.hidden.some(function (e) {
												return e === a.Direction.Down;
											}) && (t[1] = t[2] = l.EdgeJointWay.Vertical),
											this.poly.hidden.some(function (e) {
												return e === a.Direction.Up;
											}) && (t[3] = t[0] = l.EdgeJointWay.Vertical);
										var n = this.createBar(this.outsidePath, this.innerEdges, t);
										return (
											this.poly.hidden.some(function (e) {
												return e === a.Direction.Left;
											}) && (n[0].virtual = !0),
											this.poly.hidden.some(function (e) {
												return e === a.Direction.Right;
											}) && (n[2].virtual = !0),
											this.poly.hidden.some(function (e) {
												return e === a.Direction.Down;
											}) && (n[1].virtual = !0),
											this.poly.hidden.some(function (e) {
												return e === a.Direction.Up;
											}) && (n[3].virtual = !0),
											n
										);
									}),
									t
								);
							})(o.Frametify);
						t.SingleTrackFrametify = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SplitBar = void 0);
						var o = i(n(0)),
							a = n(2),
							s = n(9),
							l = (function () {
								function e(e, t, n) {
									(this.barPoly = e), (this.mulPoly = t), (this.hitPt = n);
								}
								return (
									(e.prototype.run = function () {
										var e = this.findTargetEdge();
										if (void 0 === e) throw new Error('invalid split no intersection!');
										var t = this.findInOutEdge(e.redge);
										if (!t.iedge || !t.oedge) throw new Error('invalid split no intersection!');
										var n = s.ArcUtils.edgeCrossPt(t.iedge, e.tedge, t.iedge.end);
										if (!n) throw new Error('invalid split no intersection!');
										var r = o.default.segment(t.iedge.start, n);
										if (t.iedge instanceof o.default.Arc) {
											var i = t.iedge,
												a = o.default.vector(i.center, n).slope;
											r = o.default.arc(
												i.center,
												i.r.valueOf(),
												i.startAngle,
												a,
												i.counterClockwise,
											);
										}
										var l = s.ArcUtils.edgeCrossPt(e.tedge, t.oedge, t.oedge.start);
										if (!l) throw new Error('invalid split no intersection!');
										var h = o.default.segment(l, t.oedge.end);
										if (t.oedge instanceof o.default.Arc) {
											i = t.oedge;
											var c = o.default.vector(i.center, l).slope;
											h = o.default.arc(i.center, i.r.valueOf(), c, i.endAngle, i.counterClockwise);
										}
										var u = o.default.segment(n, l);
										e.tedge instanceof o.default.Arc &&
											((i = e.tedge),
											(c = o.default.vector(i.center, n).slope),
											(a = o.default.vector(i.center, l).slope),
											(u = o.default.arc(i.center, i.r.valueOf(), c, a, !0)),
											i.contains(u.middle()) || (u.counterClockwise = !u.counterClockwise));
										var p = this.mulPoly.edges,
											f = p.findIndex(function (e) {
												return e.start.equalTo(t.iedge.start);
											});
										(p[f] = r),
											(f = p.findIndex(function (e) {
												return e.start.equalTo(t.oedge.start);
											})),
											(p[f] = h),
											(f = p.findIndex(function (t) {
												return t.start.equalTo(e.redge.start);
											})),
											(p[f] = u);
										var d = this.split(
											{
												iedge: t.iedge,
												oedge: t.oedge,
											},
											[t.iedge.end, n, l, t.oedge.start, this.hitPt],
										);
										return {
											npt: u.middle(),
											nedges: p,
											nbPoly: d,
										};
									}),
									(e.prototype.findTargetEdge = function () {
										var e,
											t = this,
											n = this.mulPoly.edges.find(function (e) {
												return e.contains(t.hitPt);
											});
										if (void 0 !== n)
											if (n instanceof o.default.Segment) {
												if (
													(e = this.barPoly.edges.find(function (e) {
														if (e instanceof o.default.Segment) {
															var t = o.default.line(e.start, e.end),
																r = o.default.line(n.start, n.end);
															if (a.Utils.isParallel(t, r) && !t.contains(n.start)) return !0;
														}
														return !1;
													}))
												)
													return {
														tedge: e,
														redge: n,
													};
											} else if (
												(e = this.barPoly.edges.find(function (e) {
													if (e instanceof o.default.Arc) {
														var t = Math.abs(e.r.valueOf() - n.r.valueOf());
														if (e.center.equalTo(n.center) && o.default.Utils.GT(t, 0)) return !0;
													}
													return !1;
												}))
											)
												return {
													tedge: e,
													redge: n,
												};
									}),
									(e.prototype.findInOutEdge = function (e) {
										var t,
											n,
											i = this.mulPoly.edges,
											o = {};
										try {
											for (var a = r(i), s = a.next(); !s.done; s = a.next()) {
												var l = s.value;
												l.start.equalTo(e.start) ||
													(e.contains(l.end) && (o.iedge = l),
													e.contains(l.start) && (o.oedge = l));
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												s && !s.done && (n = a.return) && n.call(a);
											} finally {
												if (t) throw t.error;
											}
										}
										return o;
									}),
									(e.prototype.split = function (e, t) {
										var n, r, i;
										if (
											((n =
												e.iedge instanceof o.default.Segment
													? o.default.line(e.iedge.start, e.iedge.end)
													: e.iedge),
											(r =
												e.oedge instanceof o.default.Segment
													? o.default.line(e.oedge.start, e.oedge.end)
													: e.oedge),
											e.iedge instanceof o.default.Segment)
										) {
											var a = this.mulPoly.mulShape;
											i = new s.SplitterLine(this.barPoly, o.default.line(a.start, a.end));
										} else i = new s.SplitterArc(this.barPoly, this.mulPoly.mulShape);
										var l = i.splitByPts(t, n, r);
										return this.calcMulShape(l), l;
									}),
									(e.prototype.calcMulShape = function (e) {
										var t = this,
											n = this.barPoly.mulShape;
										if (n) {
											var r = this.mulPoly.mulShape,
												i = s.ArcUtils.edgeCrossPt(n, r, this.hitPt);
											e.forEach(function (e) {
												(e.spLine = t.barPoly.spLine.clone()),
													(e.epDock = t.barPoly.epDock.clone());
												var r = n.split(i),
													o = r[0],
													s = r[1];
												e.isIntersect(o)
													? ((e.mulShape = o),
													  e.epDock.setDock(!1, a.Dock.Mullion(t.mulPoly.polyId)))
													: ((e.mulShape = s),
													  e.epDock.setDock(!0, a.Dock.Mullion(t.mulPoly.polyId)));
											});
										}
									}),
									e
								);
							})();
						t.SplitBar = l;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.JoinBarAfterSplit = void 0);
						var i = r(n(0)),
							o = n(2),
							a = (function () {
								function e() {}
								return (
									(e.prototype.join = function (e, t, n, r, a) {
										void 0 === n && (n = !0);
										var s,
											l = t.mulShape;
										if (o.Utils.isSegHorizontal(l)) s = i.default.vector(0, 1);
										else {
											var h = l.tangentInStart();
											s = l.start.y > l.end.y ? h.rotate90CW() : h.rotate90CCW();
										}
										n && (s = s.invert());
										var c = i.default.line(l.middle(), s),
											u = e.find(function (e) {
												return e.box.center.leftTo(c);
											}),
											p = i.default.point(),
											f = -1,
											d = -1,
											g = u.edges,
											y = t.edges;
										g.forEach(function (e, t) {
											y.forEach(function (n, r) {
												e.start.equalTo(n.start) && ((f = t), (d = r), (p = e.start));
											});
										});
										var m = [s.rotate90CW(), s.rotate90CCW()].find(function (e) {
											return i.default.vector(p, l.middle()).dot(e) > 0;
										});
										t.editPoint(d, m.multiply(r));
										var v = [s, s.invert()].find(function (e) {
											return i.default.vector(p, u.box.center).dot(e) < 0;
										});
										u.editPoint(f, v.multiply(a));
										var w = [u.mulShape.start, u.mulShape.end].find(function (e) {
												return e.equalTo(l.start) || e.equalTo(l.end);
											}),
											b = w.equalTo(u.mulShape.start);
										u.updateMulShape(p.translate(v.multiply(a)), w),
											b ? (u.epDock.stDock = o.Dock.None()) : (u.epDock.etDock = o.Dock.None());
									}),
									e
								);
							})();
						t.JoinBarAfterSplit = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.MergeBar = void 0);
						var i = r(n(0)),
							o = n(9),
							a = (function () {
								function e(e, t, n) {
									(this.poly1 = e), (this.poly2 = t), (this.medge = n);
								}
								return (
									(e.prototype.run = function () {
										var e = this.findSplitEdge(this.poly1),
											t = this.findSplitEdge(this.poly2);
										if (!e || !t) throw new Error('split edge not found!');
										var n = [],
											r = [];
										this.poly1.edges.forEach(function (e) {
											return n.push(new o.ShapeElement(e));
										}),
											this.poly2.edges.forEach(function (e) {
												return r.push(new o.ShapeElement(e));
											}),
											o.Splitter.doubleLinked(n),
											o.Splitter.doubleLinked(r);
										var i = n.find(function (t) {
												return t.value.end.equalTo(e.start);
											}),
											a = r.find(function (e) {
												return e.value.start.equalTo(t.end);
											});
										this.linkEdges(i, a),
											(i = r.find(function (e) {
												return e.value.end.equalTo(t.start);
											})),
											(a = n.find(function (t) {
												return t.value.start.equalTo(e.end);
											}));
										var s = this.linkEdges(i, a),
											l = o.Splitter.findPoly(s);
										return (
											(l.spLine = this.poly1.spLine.clone()),
											(l.mulShape = this.mergeMulShape(
												l,
												this.poly1.mulShape,
												this.poly2.mulShape,
											)),
											l
										);
									}),
									(e.prototype.mergeMulShape = function (e, t, n) {
										var r = this,
											o = function (t) {
												t
													? (e.epDock.setDock(!0, r.poly1.epDock.stDock),
													  e.epDock.setDock(!1, r.poly2.epDock.etDock))
													: (e.epDock.setDock(!0, r.poly2.epDock.stDock),
													  e.epDock.setDock(!1, r.poly1.epDock.etDock));
											};
										return t instanceof i.default.Segment
											? t.end.equalTo(n.start)
												? (o(!0), i.default.segment(t.start, n.end))
												: (o(!1), i.default.segment(n.start, t.end))
											: t.end.equalTo(n.start)
											? (o(!0), i.default.Arc.arcSE(t.center, t.start, n.end, t.counterClockwise))
											: (o(!1), i.default.Arc.arcSE(t.center, n.start, t.end, t.counterClockwise));
									}),
									(e.prototype.linkEdges = function (e, t) {
										if (!e || !t) throw new Error('link edge not found!');
										var n,
											r = e.prev,
											a = t.next;
										if (
											((e.prev = void 0), (t.next = void 0), e.value instanceof i.default.Segment)
										)
											n = new o.ShapeElement(i.default.segment(e.value.start, t.value.end));
										else {
											var s = e.value,
												l = i.default.vector(s.center, t.value.end).slope;
											n = new o.ShapeElement(
												i.default.arc(s.center, s.r.valueOf(), s.startAngle, l, s.counterClockwise),
											);
										}
										return (r.next = n), (n.prev = r), (n.next = a), (a.prev = n), n;
									}),
									(e.prototype.findSplitEdge = function (e) {
										var t = this;
										return e.edges.find(function (e) {
											if (
												e.start.equalTo(t.medge.start) ||
												e.start.equalTo(t.medge.end) ||
												e.end.equalTo(t.medge.start) ||
												e.end.equalTo(t.medge.end)
											) {
												if (e instanceof i.default.Segment) {
													var n = i.default.line(e.start, e.end);
													return !(n.contains(t.medge.start) && n.contains(t.medge.end));
												}
												var r = i.default.arc(
													e.center,
													e.r.valueOf(),
													0,
													2 * Math.PI,
													e.counterClockwise,
												);
												return !(r.contains(t.medge.start) && r.contains(t.medge.end));
											}
											return !1;
										});
									}),
									e
								);
							})();
						t.MergeBar = a;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						});
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CutLine = void 0);
						var r = n(29),
							i = (function () {
								function e(e) {
									(this.innerEdgeIdx = -1), (this.outerEdgeIdx = -1), (this.type = e);
								}
								return (
									(e.prototype.dragVertex = function (e, t, n) {}),
									(e.prototype.dragInnerEdge = function (e, t, n, r) {
										return this;
									}),
									(e.prototype.dragArc = function (e, t, n) {
										return this;
									}),
									(e.prototype.drag = function (e, t, n) {
										this.translate(t);
									}),
									(e.parseCompoundLine = function (e) {
										return r.CompoundLine.deserialize(e);
									}),
									(e.parseCompoundLineCircle = function (e) {
										return r.CompoundLineCircle.deserialize(e);
									}),
									(e.parseSimpleLine = function (e) {
										return r.SimpleLine.deserialize(e);
									}),
									(e.parseSimpleInnerArc = function (e) {
										return r.SimpleInnerArc.deserialize(e);
									}),
									(e.parseSpinLine = function (e) {
										return r.SpinLine.deserialize(e);
									}),
									(e.parseHalfHexagon = function (e) {
										return r.SimpleHalfHexagon.deserialize(e);
									}),
									(e.parseDoubleOctagon = function (e) {
										return r.CompoundDoubleOctagon.deserialize(e);
									}),
									(e.parseLongOctagon = function (e) {
										return r.CompoundLongOctagon.deserialize(e);
									}),
									(e.parseSimpleArc = function (e) {
										return r.SimpleWave.deserialize(e);
									}),
									(e.parseSemiArcPro = function (e) {
										return r.SemiArcPro.deserialize(e);
									}),
									(e.parseSemiArcPro2 = function (e) {
										return r.SemiArcPro2.deserialize(e);
									}),
									(e.parseSemiSegmentPro = function (e) {
										return r.SemiSegmentPro.deserialize(e);
									}),
									(e.parseSemiArc = function (e) {
										return r.SemiArc.deserialize(e);
									}),
									(e.parseHalfWheel = function (e) {
										return r.HalfWheel.deserialize(e);
									}),
									(e.parseFrametifyLike = function (e) {
										return r.FrametifyLike.deserialize(e);
									}),
									(e.parseInnerEqSplit = function (e) {
										return r.InnerEqSplit.deserialize(e);
									}),
									Object.defineProperty(e.prototype, 'generateDockDataForDim', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'dimHiddenPos', {
										get: function () {
											return [];
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.CutLine = i;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SimpleLineCut = void 0);
						var s = a(n(0)),
							l = n(58),
							h = n(9),
							c = (function () {
								function e(e, t) {
									(this.polygon = e),
										(this.sline = t),
										(this.splitPoly = []),
										(this.edgesOnLine = []);
								}
								return (
									(e.prototype.findParallelEdges = function (e) {
										var t = this.sline.segments.map(function (t) {
											return 0.5 * e;
										});
										return [
											new h.SimpleLine(l.Frametify.findParallelEdges(this.sline.segments, t, !0)),
											new h.SimpleLine(l.Frametify.findParallelEdges(this.sline.segments, t, !1)),
										];
									}),
									(e.prototype.split = function (e) {
										var t = this,
											n = r(this.findParallelEdges(e), 2),
											i = n[0],
											o = n[1],
											a = o.segments[0].end,
											s = this.sline.findLinePos(i.start),
											l = this.sline.findLinePos(o.start),
											h = this._split(this.polygon, i),
											c = [];
										return (
											h.forEach(function (e) {
												if (!e.contains(a)) return e.polyId.posBySide(s), void c.push(e);
												t._split(e, o).forEach(function (e) {
													e.checkMullion(t.sline),
														e.polyId.posBySide(l),
														e.IsMullion
															? t.createMullion(e, i, o).forEach(function (e) {
																	return c.push(e);
															  })
															: c.push(e);
												});
											}),
											c
										);
									}),
									(e.prototype.createMullion = function (e, t, n) {
										var r, o;
										if (!e.IsMullion) return [];
										var a = [],
											l = [];
										e.edges.forEach(function (e) {
											return a.push(new h.ShapeElement(e.clone()));
										});
										for (
											var c = function (e) {
													var r = t.segments[e],
														i = n.segments[e];
													l.push(
														a.find(function (e) {
															return e.value.start.equalTo(r.end);
														}),
													),
														l.push(
															a.find(function (e) {
																return e.value.start.equalTo(i.end);
															}),
														);
												},
												u = 0;
											u < t.segments.length - 1;
											u++
										)
											c(u);
										h.Splitter.doubleLinked(a);
										for (var p = 0; p < l.length; p += 2) this.createBridge(a, l[p], l[p + 1]);
										var f = [],
											d = function (t) {
												if (t.visited) return 'continue';
												var n = h.Splitter.findPoly(t),
													r = g.sline.segments.find(function (e) {
														return n.contains(e.middle());
													}),
													i = r instanceof s.default.Segment ? s.default.line(r.start, r.end) : r;
												n.checkMullion(i),
													(n.spLine.line = g.sline.clone()),
													(n.polyId = e.polyId.clone()),
													f.push(n);
											},
											g = this;
										try {
											for (var y = i(a), m = y.next(); !m.done; m = y.next()) d(m.value);
										} catch (e) {
											r = {
												error: e,
											};
										} finally {
											try {
												m && !m.done && (o = y.return) && o.call(y);
											} finally {
												if (r) throw r.error;
											}
										}
										return (
											f.forEach(function (e, t, n) {
												n[t].spLine.line.innerEdgeIdx = t;
											}),
											f
										);
									}),
									(e.prototype.createBridge = function (e, t, n) {
										var r = new h.ShapeElement(new s.default.Segment(t.value.start, n.value.start));
										if (void 0 !== r) {
											var i = new h.ShapeElement(r.value.reverse());
											e.push(r), e.push(i);
											var o = n.prev;
											(t.prev.next = r),
												(r.prev = t.prev),
												(r.next = n),
												(n.prev = r),
												(t.prev = i),
												(i.next = t),
												(i.prev = o),
												(o.next = i);
										}
									}),
									(e.prototype._split = function (e, t) {
										var n = r(t.intersect(e), 2),
											i = n[0],
											o = n[1];
										if (void 0 === i || void 0 === o)
											return console.warn('intersection points not found!'), [];
										var a = new h.PointCut(e);
										return (
											a.splitEdges([i, o]),
											a.feedData(this.splitPoly, this.edgesOnLine),
											this.linkEdges(i, o, t)
										);
									}),
									(e.prototype.linkEdges = function (e, t, n) {
										for (
											var r,
												a,
												s,
												l,
												c = this.edgesOnLine[0].value.start.equalTo(e),
												u = n.createLink(e, t, c),
												p = [],
												f = u.length - 1;
											f >= 0;
											f--
										) {
											var d = u[f];
											p.push(new h.ShapeElement(d.value.reverse()));
										}
										h.Splitter.doubleLinked(u, !0),
											h.Splitter.doubleLinked(p, !0),
											(r = this.splitPoly).push.apply(r, o(u)),
											(a = this.splitPoly).push.apply(a, o(p));
										var g = u[0],
											y = p[0],
											m = this.edgesOnLine[0],
											v = this.edgesOnLine[1],
											w = v.prev;
										(m.prev.next = g), (g.prev = m.prev);
										var b = u[u.length - 1];
										(b.next = v), (v.prev = b), (y.prev = w), (w.next = y);
										var S = p[p.length - 1];
										(S.next = m), (m.prev = S);
										var _ = [];
										try {
											for (var P = i(this.splitPoly), x = P.next(); !x.done; x = P.next()) {
												var D = x.value;
												D.visited || _.push(h.Splitter.findPoly(D));
											}
										} catch (e) {
											s = {
												error: e,
											};
										} finally {
											try {
												x && !x.done && (l = P.return) && l.call(P);
											} finally {
												if (s) throw s.error;
											}
										}
										return _;
									}),
									e
								);
							})();
						t.SimpleLineCut = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SimpleLine = void 0);
						var a = o(n(0)),
							s = n(86),
							l = n(7),
							h = n(9),
							c = n(2),
							u = n(29),
							p = (function (e) {
								function t(t, n) {
									void 0 === n && (n = u.CutLineType.simpleLine);
									var r = e.call(this, n) || this;
									return (r.segs = t), r;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'segments', {
										get: function () {
											return this.segs;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'start', {
										get: function () {
											return this.segs[0].start;
										},
										set: function (e) {
											var t = this.segs[0];
											if (t instanceof a.default.Segment)
												this.segs[0] = a.default.segment(e, t.end);
											else {
												var n = a.default.vector(t.center, e).slope;
												this.segs[0] = a.default.arc(
													t.center,
													t.r.valueOf(),
													n,
													t.endAngle,
													t.counterClockwise,
												);
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'end', {
										get: function () {
											return this.segs[this.segs.length - 1].end;
										},
										set: function (e) {
											var t = this.segs[this.segs.length - 1];
											if (t instanceof a.default.Segment)
												this.segs[this.segs.length - 1] = a.default.segment(t.start, e);
											else {
												var n = a.default.vector(t.center, e).slope;
												this.segs[this.segs.length - 1] = a.default.arc(
													t.center,
													t.r.valueOf(),
													t.startAngle,
													n,
													t.counterClockwise,
												);
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pt', {
										get: function () {
											return a.default.segment(this.start, this.end).middle();
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.middle = function () {
										if (this.segs.length % 2 == 1) {
											var e = Math.ceil(this.segs.length / 2);
											return (e = (e -= 1) < 0 ? 0 : e), this.segs[e].middle();
										}
										return (e = this.segs.length / 2), (e = (e -= 1) < 0 ? 0 : e), this.segs[e].end;
									}),
									Object.defineProperty(t.prototype, 'mpt', {
										get: function () {
											return this.middle();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return 0 !== this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return this.innerEdgeIdx !== this.segs.length - 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showArc', {
										get: function () {
											return this.innerEdgeIdx > 0 && this.innerEdgeIdx < this.segs.length - 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.split = function (e, t) {
										return new u.SimpleLineCut(e, this).split(t);
									}),
									(t.prototype._clone = function (e) {
										return new t(e);
									}),
									(t.prototype.clone = function () {
										var e = [];
										this.segs.forEach(function (t) {
											return e.push(t.clone());
										});
										var t = this._clone(e);
										return (t.innerEdgeIdx = this.innerEdgeIdx), t;
									}),
									(t.prototype.toJSON = function () {
										if (0 !== this.segs.length) {
											var e = [];
											return (
												this.segs.forEach(function (t) {
													return e.push(t.toJSON());
												}),
												{
													name: u.CutLineType.simpleLine,
													innerEdgeIdx: this.innerEdgeIdx,
													segs: e,
												}
											);
										}
									}),
									(t.deserialize = function (e) {
										var n = [];
										e.segs.forEach(function (e) {
											'segment' === e.name
												? n.push(c.Utils.parseSegment(e))
												: n.push(c.Utils.parseArc(e));
										});
										var r = new t(n);
										return (r.innerEdgeIdx = e.innerEdgeIdx), r;
									}),
									(t.prototype.translate = function (e) {
										for (var t = 0; t < this.segs.length; t++) {
											var n = this.segs[t];
											this.segs[t] = n.translate(e);
										}
										return this;
									}),
									(t.prototype.rotate = function (e, t) {
										for (var n = 0; n < this.segs.length; n++) {
											var r = this.segs[n];
											a.default.Segment, (this.segs[n] = r.rotate(e, t));
										}
										return this;
									}),
									(t.prototype.findLinePos = function (e) {
										var t = this.segs[0],
											n = a.default.line(t.start, t.end);
										return e.leftTo(n) ? c.LineSide.Left : c.LineSide.Right;
									}),
									(t.prototype.updateEndPoint = function (e) {
										var t = this.intersect(e);
										return 0 === t.length || ((this.start = t[0]), (this.end = t[1])), this;
									}),
									(t.prototype.intersect = function (e) {
										if (0 === this.segs.length) return [];
										var t,
											n = this.segs[0].reverse();
										t = n instanceof a.default.Segment ? a.default.line(n.start, n.end) : n;
										var r,
											i = this.segs[this.segs.length - 1];
										r = i instanceof a.default.Segment ? a.default.line(i.start, i.end) : i;
										var o = e.intersect(t);
										if (t instanceof a.default.Line) {
											var s = t;
											o = o.filter(function (e) {
												return a.default.line(s.pt, e).norm.equalTo(s.norm);
											});
										}
										if (0 === o.length) return [];
										var l = t instanceof a.default.Line ? t.pt : t.start;
										o.sort(function (e, t) {
											return l.distanceTo(e)[0] - l.distanceTo(t)[0];
										});
										var h = o[0];
										if (((o = e.intersect(r)), r instanceof a.default.Line)) {
											var c = r;
											o = o.filter(function (e) {
												return a.default.line(c.pt, e).norm.equalTo(c.norm);
											});
										}
										return 0 === o.length
											? []
											: ((l = r instanceof a.default.Line ? r.pt : r.start),
											  o.sort(function (e, t) {
													return l.distanceTo(e)[0] - l.distanceTo(t)[0];
											  }),
											  [h, o[0]]);
									}),
									(t.prototype.createLink = function (e, t, n) {
										var r = this.segs,
											i = [];
										if (n)
											for (var o = 0; o < r.length; o++) {
												var s = r[o];
												0 === o
													? i.push(new h.ShapeElement(a.default.segment(e, s.end)))
													: o === r.length - 1
													? i.push(new h.ShapeElement(a.default.segment(s.start, t)))
													: i.push(new h.ShapeElement(s.clone()));
											}
										else
											for (o = r.length - 1; o >= 0; o--)
												(s = r[o]),
													0 === o
														? i.push(new h.ShapeElement(a.default.segment(s.end, e)))
														: o === r.length - 1
														? i.push(new h.ShapeElement(a.default.segment(t, s.start)))
														: i.push(new h.ShapeElement(s.reverse()));
										return i;
									}),
									(t.prototype.dragArc = function (e, n, r) {
										var i = [];
										this.segments.forEach(function (e) {
											return i.push(e.clone());
										});
										var o = r.translate(n),
											h = o.distanceTo(
												a.default.line(this.segments[e].start, this.segments[e + 1].start),
											)[0];
										if (
											((i[e] = a.default.segment(
												this.segments[e].start,
												this.segments[e + 1].start,
											)),
											h > l.DrawParams.Ins.arcDummy ||
												(this.segments[e] instanceof a.default.Segment && h > 1))
										) {
											var c = s.ArcUtils.CreateArcFrom3Points(
												this.segments[e].start,
												this.segments[e + 1].start,
												o,
											);
											i[e] = c;
										}
										return new t(i);
									}),
									t
								);
							})(u.CutLine);
						t.SimpleLine = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SimpleInnerArc = void 0);
						var a = o(n(0)),
							s = n(86),
							l = n(2),
							h = n(29),
							c = (function (e) {
								function t(n, r) {
									var i = e.call(this, r || t.create(n), h.CutLineType.simpleInnerArc) || this;
									return (i.segmentHeight = 0), i;
								}
								return (
									i(t, e),
									(t.create = function (e) {
										var t = a.default.point(0, 0),
											n = [],
											r = a.default.point(t.x + e / 2, t.y);
										n.push(a.default.segment(r, (r = a.default.point(r.x, r.y - 90))));
										var i = s.ArcUtils.CreateArcFrom3Points(
											r,
											(r = a.default.point(t.x - e / 2, r.y)),
											a.default.point(t.x, r.y - e / 4),
										);
										return (
											n.push(i), n.push(a.default.segment(r, a.default.point(t.x - e / 2, t.y))), n
										);
									}),
									(t.prototype._clone = function (e) {
										return new t(0, e);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.name = h.CutLineType.simpleInnerArc), t;
									}),
									(t.deserialize = function (e) {
										var n = new t(0, h.SimpleLine.deserialize(e).segments);
										return (n.innerEdgeIdx = e.innerEdgeIdx), n;
									}),
									(t.prototype.dragVertex = function (e, n, r) {
										if (1 === e) {
											var i = this.segments[1].middle(),
												o = a.default.vector(i, r),
												s = a.default.vector(i, r.translate(n)),
												l = 1;
											if (!s.projectionOn(o).normalize().equalTo(o.normalize()))
												throw new Error('drag reverse not support');
											return (
												(l = Math.sqrt(s.x * s.x + s.y * s.y) / Math.sqrt(o.x * o.x + o.y * o.y)),
												new t(0, this.scale(l))
											);
										}
									}),
									(t.prototype.scale = function (e) {
										var t = this.segments[1].middle(),
											n = this.segments;
										return (
											n.forEach(function (r, i) {
												n[i] = r
													.translate(-t.x, -t.y)
													.transform(a.default.matrix(e, 0, 0, e, 0, 0))
													.translate(t.x, t.y);
											}),
											n
										);
									}),
									(t.prototype.dragArc = function (n, r, i) {
										return new t(0, e.prototype.dragArc.call(this, n, r, i).segments);
									}),
									(t.prototype.split = function (t, n) {
										var r = e.prototype.split.call(this, t, n),
											i = r[1];
										return (this.segmentHeight = i.box.ymax - i.box.ymin), r;
									}),
									Object.defineProperty(t.prototype, 'width', {
										get: function () {
											return this.segments[0].distanceTo(this.segments[2])[0];
										},
										set: function (e) {
											var t = a.default.vector(this.segs[0].start, this.segs[2].end),
												n = l.Utils.vecDirPt(t, e, this.segs[0].end),
												r = l.Utils.vecDirPt(t, e, this.segs[0].start),
												i = a.default.vector(
													a.default.segment(this.segs[0].end, this.segs[2].start).middle(),
													this.segs[1].middle(),
												),
												o = this.innerArcHeight;
											(this.segs[2] = a.default.segment(n, r)),
												(this.segs[1] = s.ArcUtils.CreateArcFrom3Points(
													this.segs[0].end,
													n,
													l.Utils.vecDirPt(
														i,
														o,
														a.default.segment(this.segs[0].end, this.segs[2].start).middle(),
													),
												));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'innerArcHeight', {
										get: function () {
											var e = this.segments[1],
												t = e.start,
												n = e.end,
												r = a.default.segment(t, n);
											return e.middle().distanceTo(r)[0];
										},
										set: function (e) {
											var t = this.segments[1],
												n = t.start,
												r = t.end,
												i = a.default.segment(n, r).middle(),
												o = a.default.segment(i, t.middle()),
												h = l.Utils.lineDirPt(o, e, i),
												c = s.ArcUtils.CreateArcFrom3Points(n, r, h);
											this.segs[1] = c;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'innerSegmentHeight', {
										get: function () {
											return this.segmentHeight;
										},
										set: function (e) {
											var t = this;
											e <= 90 ||
												((this.segs = this.segs.map(function (n) {
													return n.translate(a.default.vector(0, t.segmentHeight - e));
												})),
												(this.segmentHeight = e));
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(h.SimpleLine);
						t.SimpleInnerArc = c;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SimpleLineCreator = void 0);
						var i = r(n(0)),
							o = n(5),
							a = n(9),
							s = (function () {
								function e() {
									var e = this;
									(this.sizeConst = 800),
										(this.slines = {}),
										(this.slines[o.ToolType.mullion_inner_arc] = function () {
											return e.createInnerArc();
										}),
										(this.slines[o.ToolType.mullion_half_hexagon] = function () {
											return e.createHalfHexagon();
										}),
										(this.slines[o.ToolType.mullion_wave] = function () {
											return e.createWave();
										});
								}
								return (
									Object.defineProperty(e, 'Instance', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.create = function (e) {
										return this.slines[e]();
									}),
									(e.prototype.createInnerArc = function () {
										return new a.SimpleInnerArc(this.sizeConst);
									}),
									(e.prototype.createHalfHexagon = function () {
										return new a.SimpleHalfHexagon(this.sizeConst);
									}),
									(e.prototype.createWave = function () {
										var e = 1.25 * this.sizeConst,
											t = Math.PI / 6,
											n = [
												i.default.arc(
													i.default.point(-Math.cos(t) * e, e * Math.sin(t)),
													e,
													t,
													-t,
													!1,
												),
												i.default.arc(
													i.default.point(Math.cos(t) * e, -e * Math.sin(t)),
													e,
													Math.PI - t,
													Math.PI + t,
													!0,
												),
											];
										return new a.SimpleWave(n);
									}),
									e
								);
							})();
						t.SimpleLineCreator = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SpinLine = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(29),
							h = (function (e) {
								function t(t, n) {
									void 0 === t && (t = a.default.point()),
										void 0 === n && (n = a.default.ORIENTATION.CCW);
									var r = e.call(this, l.CutLineType.spinLine) || this;
									return (
										(r.cpt = t),
										(r._orien = n),
										(r.slines = []),
										(r._width = 800),
										(r._height = 800),
										(r._side = 4),
										r
									);
								}
								return (
									i(t, e),
									(t.prototype.create = function () {
										var e = this._width / 2,
											t = this._height / 2,
											n = this.cpt;
										return (
											this.slines.splice(0, this.slines.length),
											4 === this._side
												? this._orien === a.default.ORIENTATION.CCW
													? (this.slines.push(
															a.default.line(n.translate(e, 0), a.default.vector(-1, 0)),
													  ),
													  this.slines.push(
															a.default.line(n.translate(0, t), a.default.vector(0, -1)),
													  ),
													  this.slines.push(
															a.default.line(n.translate(-e, 0), a.default.vector(1, 0)),
													  ),
													  this.slines.push(
															a.default.line(n.translate(0, -t), a.default.vector(0, 1)),
													  ))
													: (this.slines.push(
															a.default.line(n.translate(-e, 0), a.default.vector(-1, 0)),
													  ),
													  this.slines.push(
															a.default.line(n.translate(0, t), a.default.vector(0, 1)),
													  ),
													  this.slines.push(
															a.default.line(n.translate(e, 0), a.default.vector(1, 0)),
													  ),
													  this.slines.push(
															a.default.line(n.translate(0, -t), a.default.vector(0, -1)),
													  ))
												: (this.slines = l.SpinLineCreator.Instance.create(
														this._side,
														this.orien,
														this._width,
														this.cpt,
												  )),
											this
										);
									}),
									(t.prototype.line = function (e) {
										return this.slines[e];
									}),
									Object.defineProperty(t.prototype, 'orien', {
										get: function () {
											return this._orien;
										},
										set: function (e) {
											this._orien !== e && ((this._orien = e), this.create());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'side', {
										get: function () {
											return this._side;
										},
										set: function (e) {
											this._side !== e && ((this._side = e), this.create());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'width', {
										get: function () {
											return this._width;
										},
										set: function (e) {
											var t = e - this._width;
											if (!a.default.Utils.EQ_0(t) && ((this._width = e), 0 !== this.slines.length))
												if (4 === this._side) {
													(t = this.orien === a.default.ORIENTATION.CCW ? -t : t), (t /= 2);
													var n = this.slines[0];
													(this.slines[0] = a.default.line(
														n.pt.translate(n.norm.multiply(t)),
														n.norm,
													)),
														(n = this.slines[2]),
														(this.slines[2] = a.default.line(
															n.pt.translate(n.norm.multiply(t)),
															n.norm,
														));
												} else this.create();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'height', {
										get: function () {
											return this._height;
										},
										set: function (e) {
											var t = e - this._height;
											if (
												!a.default.Utils.EQ_0(t) &&
												((this._height = e), 4 === this._side && 0 !== this.slines.length)
											) {
												(t = this.orien === a.default.ORIENTATION.CCW ? -t : t), (t /= 2);
												var n = this.slines[1];
												(this.slines[1] = a.default.line(
													n.pt.translate(n.norm.multiply(t)),
													n.norm,
												)),
													(n = this.slines[3]),
													(this.slines[3] = a.default.line(
														n.pt.translate(n.norm.multiply(t)),
														n.norm,
													));
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'start', {
										get: function () {
											return this.slines[0].pt;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'end', {
										get: function () {
											return this.slines[1].pt;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pt', {
										get: function () {
											return this.cpt;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mpt', {
										get: function () {
											return this.pt;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showArc', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.split = function (e, t) {
										return new l.SpinLineCut(e, this).split(t);
									}),
									(t.prototype.clone = function () {
										var e = new t(this.cpt, this._orien);
										return (
											(e._width = this._width),
											(e._height = this._height),
											(e._side = this._side),
											(e.innerEdgeIdx = this.innerEdgeIdx),
											this.slines.forEach(function (t) {
												return e.slines.push(t.clone());
											}),
											e
										);
									}),
									(t.prototype.toJSON = function () {
										var e = [];
										return (
											this.slines.forEach(function (t) {
												return e.push(t.toJSON());
											}),
											{
												name: l.CutLineType.spinLine,
												cpt: this.cpt.toJSON(),
												orien: this._orien,
												width: this._width,
												height: this._height,
												side: this._side,
												innerEdgeIdx: this.innerEdgeIdx,
												slines: e,
											}
										);
									}),
									(t.deserialize = function (e) {
										var n = [];
										e.slines.forEach(function (e) {
											return n.push(s.Utils.parseLine(e));
										});
										var r = new t(a.default.point(e.cpt.x, e.cpt.y), e.orien);
										return (
											(r.innerEdgeIdx = e.innerEdgeIdx),
											(r._width = e.width),
											(r._height = e.height),
											(r.side = e.side),
											(r.slines = n),
											r
										);
									}),
									(t.prototype.translate = function (e) {
										this.cpt = this.cpt.translate(e);
										for (var t = 0; t < this.slines.length; t++) {
											var n = this.slines[t];
											this.slines[t] = a.default.line(n.pt.translate(e), n.norm);
										}
										return this;
									}),
									(t.prototype.rotate = function (e, t) {
										for (var n = this.slines.length, r = 0; r < n; r++) {
											var i = this.slines[r];
											this.slines[r] = a.default.line(i.pt.rotate(e, t), i.norm.rotate(e));
										}
										return this;
									}),
									(t.prototype.inner = function (e) {
										var t = [];
										return (
											(e = this.orien === a.default.ORIENTATION.CW ? -e : e),
											this.slines.forEach(function (n) {
												var r = n.norm.multiply(e);
												t.push(a.default.line(n.pt.translate(r), n.norm));
											}),
											t
										);
									}),
									(t.prototype.outter = function (e) {
										var t = [];
										return (
											(e = this.orien === a.default.ORIENTATION.CCW ? -e : e),
											this.slines.forEach(function (n) {
												var r = n.norm.multiply(e);
												t.push(a.default.line(n.pt.translate(r), n.norm));
											}),
											t
										);
									}),
									(t.prototype.innerCrossPts = function (e, t) {
										for (
											var n = [],
												r = this.inner(t),
												i = function (t) {
													var i = r[t],
														o = r[(t + r.length - 1) % r.length],
														s = e.intersect(i),
														l = {
															poly: a.default.point(),
															line: i.intersect(o)[0],
														};
													if (
														((s = s.filter(function (e) {
															return a.default.line(l.line, e).norm.equalTo(i.norm);
														})).sort(function (e, t) {
															return l.line.distanceTo(e)[0] - l.line.distanceTo(t)[0];
														}),
														0 === s.length)
													)
														throw new Error('intersection points not found!');
													(l.poly = s[0]), n.push(l);
												},
												o = 0;
											o < r.length;
											o++
										)
											i(o);
										return n;
									}),
									(t.prototype.dragInnerEdge = function (e, t, n, r) {
										var i = this.slines[e];
										i.pt = i.pt.translate(t);
										var o = i.pt.distanceTo(this.line((e + 2) % 4))[0];
										0 === e || 2 === e ? (this._width = o) : (this._height = o);
										var s = this.slines[0].intersect(this.slines[1])[0],
											l = this.slines[2].intersect(this.slines[3])[0];
										return (this.cpt = a.default.point((s.x + l.x) / 2, (s.y + l.y) / 2)), this;
									}),
									(t.prototype.dragVertex = function (e, t, n) {}),
									t
								);
							})(l.CutLine);
						t.SpinLine = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SpinLineCut = void 0);
						var i = r(n(0)),
							o = n(5),
							a = n(1),
							s = n(9),
							l = (function () {
								function e(e, t) {
									(this.polygon = e), (this.sline = t), (this.ptCutor = new s.PointCut(e));
								}
								return (
									(e.prototype.split = function (e) {
										var t = this,
											n = this.polygon,
											r = this.sline.innerCrossPts(this.polygon, 0.5 * e),
											l = [];
										if (
											(r.forEach(function (e) {
												return l.push(e.poly);
											}),
											this.ptCutor.splitEdges(l),
											r.length !== this.ptCutor.crossCount)
										)
											throw new Error('intersection points not found properly!');
										for (var h = this.sline.outter(0.5 * e), c = [], u = 0; u < h.length; u++) {
											var p = h[u],
												f = h[(u + h.length - 1) % h.length];
											c.push(p.intersect(f)[0]);
										}
										var d = [],
											g = function (e) {
												var i = y.sline.orien === n.orientation,
													a = y.linkEdges(e, r, i);
												new s.SplitterLine(a.poly, y.sline.line(a.idx))
													.splitFinal(h[a.idx])
													.forEach(function (e) {
														e.IsMullion
															? ((e.spLine.line = t.sline.clone()),
															  4 === t.sline.side &&
																	((e.spLine.line.innerEdgeIdx = a.idx),
																	(e.editTool = o.ToolType.editInnerSplitter)))
															: (e.polyId.pos =
																	c.findIndex(function (t) {
																		return e.contains(t);
																	}) + 1),
															d.push(e);
													});
											},
											y = this;
										for (u = 0; u < r.length; u++) g(u);
										var m = new a.WinPolygon();
										for (u = 0; u < r.length; u++) {
											var v = r[u],
												w = (u + 1) % r.length;
											m.add(i.default.segment(v.line, r[w].line));
										}
										return m.done(), (m.polyId.pos = 0), d.push(m), d;
									}),
									(e.prototype.linkEdges = function (e, t, n) {
										var r,
											o = this.ptCutor.cloneElement(),
											a = o[(e + 1) % o.length],
											l = o[e],
											h = [];
										if (n) {
											r = t.findIndex(function (e) {
												return e.poly.equalTo(a.value.start);
											});
											var c = t[r];
											h.push(new s.ShapeElement(i.default.segment(c.poly, c.line))),
												h.push(new s.ShapeElement(i.default.segment(c.line, l.value.start)));
										} else
											(r = t.findIndex(function (e) {
												return e.poly.equalTo(l.value.start);
											})),
												(c = t[r]),
												h.push(new s.ShapeElement(i.default.segment(a.value.start, c.line))),
												h.push(new s.ShapeElement(i.default.segment(c.line, c.poly)));
										return (
											s.Splitter.doubleLinked(h, !0),
											(a.prev.next = h[0]),
											(h[0].prev = a.prev),
											(a.prev = void 0),
											(h[1].next = l),
											(l.prev.next = void 0),
											(l.prev = h[1]),
											{
												poly: s.Splitter.findPoly(l),
												idx: r,
											}
										);
									}),
									e
								);
							})();
						t.SpinLineCut = l;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SpinLineCreator = void 0);
						var i = r(n(0)),
							o = (function () {
								function e() {
									var e = this;
									(this.slines = {}),
										(this.slines[5] = function (t, n, r) {
											return e.createPentagon(t, n, r);
										}),
										(this.slines[6] = function (t, n, r) {
											return e.createHexagon(t, n, r);
										}),
										(this.slines[7] = function (t, n, r) {
											return e.createHeptagon(t, n, r);
										}),
										(this.slines[8] = function (t, n, r) {
											return e.createOctagon(t, n, r);
										});
								}
								return (
									Object.defineProperty(e, 'Instance', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.create = function (e, t, n, r) {
										return this.slines[e](t, n, r);
									}),
									(e.prototype.createPentagon = function (e, t, n) {
										var r = [],
											o = (t / 10) * Math.sqrt(50 + 10 * Math.sqrt(5)),
											a = (72 * Math.PI) / 180;
										a = e === i.default.ORIENTATION.CW ? -a : a;
										for (var s = n.translate(i.default.vector(0, o)), l = 0; l < 5; l++) {
											var h = s.rotate(a, n);
											r.push(i.default.line(s, h)), (s = h);
										}
										return r;
									}),
									(e.prototype.createHexagon = function (e, t, n) {
										var r = [],
											o = t,
											a = (60 * Math.PI) / 180;
										a = e === i.default.ORIENTATION.CW ? -a : a;
										for (var s = n.translate(i.default.vector(o, 0)), l = 0; l < 6; l++) {
											var h = s.rotate(a, n);
											r.push(i.default.line(s, h)), (s = h);
										}
										return r;
									}),
									(e.prototype.createHeptagon = function (e, t, n) {
										var r = [],
											o = t / (2 * Math.sin(Math.PI / 7)),
											a = ((360 / 7) * Math.PI) / 180;
										a = e === i.default.ORIENTATION.CW ? -a : a;
										for (var s = n.translate(i.default.vector(0, o)), l = 0; l < 7; l++) {
											var h = s.rotate(a, n);
											r.push(i.default.line(s, h)), (s = h);
										}
										return r;
									}),
									(e.prototype.createOctagon = function (e, t, n) {
										var r = [],
											o = (Math.sqrt(4 + 2 * Math.sqrt(2)), t * (1 + Math.sqrt(2))),
											a = (45 * Math.PI) / 180;
										a = e === i.default.ORIENTATION.CW ? -a : a;
										for (
											var s = n
													.translate(i.default.vector(o / 2, 0))
													.translate(i.default.vector(0, t / 2)),
												l = 0;
											l < 8;
											l++
										) {
											var h = s.rotate(a, n);
											r.push(i.default.line(s, h)), (s = h);
										}
										return r;
									}),
									e
								);
							})();
						t.SpinLineCreator = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CompoundLine = void 0);
						var s = a(n(0)),
							l = n(2),
							h = n(5),
							c = n(1),
							u = n(9),
							p = n(29),
							f = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = p.CutLineType.compoundLine);
									var i = e.call(this, r) || this;
									if (
										((i.slines = t),
										(i.innerPoly = n),
										(i.crossPts = []),
										t.length < 2 || 0 === n.edges.length)
									)
										throw new Error('invalid CompoundLine!');
									return (i.ptCutor = new p.PointCut(n)), i;
								}
								return (
									i(t, e),
									(t.prototype.line = function (e) {
										return this.slines[e];
									}),
									Object.defineProperty(t.prototype, 'orien', {
										get: function () {
											return this.innerPoly.orientation;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'start', {
										get: function () {
											return this.slines[0].pt;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'end', {
										get: function () {
											return this.slines[1].pt;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pt', {
										get: function () {
											return this.innerPoly.box.center;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mpt', {
										get: function () {
											return this.pt;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showArc', {
										get: function () {
											return this.innerEdgeIdx >= 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.split = function (e, t) {
										return new p.CompoundLineCut(e, this).split(t);
									}),
									(t.prototype.clone = function () {
										var e = [];
										this.slines.forEach(function (t) {
											return e.push(t.clone());
										});
										var n = new t(e, this.innerPoly.clone());
										return (
											(n.innerEdgeIdx = this.innerEdgeIdx), (n.outerEdgeIdx = this.outerEdgeIdx), n
										);
									}),
									(t.prototype.toJSON = function () {
										var e = [];
										return (
											this.slines.forEach(function (t) {
												return e.push(t.toJSON());
											}),
											{
												name: p.CutLineType.compoundLine,
												innerEdgeIdx: this.innerEdgeIdx,
												outerEdgeIdx: this.outerEdgeIdx,
												slines: e,
												polygon: this.innerPoly.toJSON(),
											}
										);
									}),
									(t.deserialize = function (e) {
										var n = [];
										e.slines.forEach(function (e) {
											return n.push(l.Utils.parseLine(e));
										});
										var r = new t(n, c.PolyParser.parse(e.polygon));
										return (
											(r.innerEdgeIdx = e.innerEdgeIdx),
											(r.outerEdgeIdx = void 0 === e.outerEdgeIdx ? -1 : e.outerEdgeIdx),
											r
										);
									}),
									(t.prototype.translate = function (e) {
										for (var t = 0; t < this.slines.length; t++) {
											var n = this.slines[t];
											this.slines[t] = s.default.line(n.pt.translate(e), n.norm);
										}
										return this.innerPoly.translate(e), this;
									}),
									(t.prototype.rotate = function (e, t) {
										for (var n = this.slines.length, r = 0; r < n; r++) {
											var i = this.slines[r];
											this.slines[r] = s.default.line(i.pt.rotate(e, t), i.norm.rotate(e));
										}
										return this.innerPoly.rotate(e, t), this;
									}),
									(t.prototype.inner = function (e) {
										var t = [];
										return (
											this.slines.forEach(function (n) {
												var r = n.norm.multiply(-e);
												t.push(s.default.line(n.pt.translate(r), n.norm));
											}),
											t
										);
									}),
									(t.prototype.outter = function (e) {
										var t = [];
										return (
											this.slines.forEach(function (n) {
												var r = n.norm.multiply(e);
												t.push(s.default.line(n.pt.translate(r), n.norm));
											}),
											t
										);
									}),
									(t.prototype.locatePoly = function (e) {
										e.polyId.pos =
											this.crossPts.findIndex(function (t) {
												return e.contains(t.line);
											}) + 1;
									}),
									(t.prototype.innerCrossPts = function (e, t) {
										var n = this;
										this.crossPts = [];
										var r = [];
										return (
											this.inner(t).forEach(function (t) {
												var i = e.intersect(t);
												if (
													((i = i.filter(function (e) {
														return s.default.line(t.pt, e).norm.equalTo(t.norm);
													})).sort(function (e, n) {
														return t.pt.distanceTo(e)[0] - t.pt.distanceTo(n)[0];
													}),
													0 === i.length)
												)
													throw new Error('intersection points not found!');
												var o = {
													poly: s.default.point(),
													line: s.default.point(),
												};
												if (
													((o.poly = i[0]),
													(i = n.innerPoly.intersect(t)).sort(function (e, n) {
														return t.pt.distanceTo(e)[0] - t.pt.distanceTo(n)[0];
													}),
													0 === i.length)
												)
													throw new Error('intersection points not found!');
												(o.line = i[0]), r.push(o.line), n.crossPts.push(o);
											}),
											this.ptCutor.splitEdges(r),
											this.crossPts
										);
									}),
									(t.prototype.createLink = function (e, t, n, r) {
										var i = this.ptCutor.cloneElement(),
											o = i.findIndex(function (t) {
												return t.value.start.equalTo(e);
											});
										if (-1 === o) throw new Error('inner intersection points not found!');
										var a = [];
										a.push(new u.ShapeElement(s.default.segment(t, e)));
										var l = i.length;
										if (r === this.orien) {
											for (
												var h = (o + l - 1) % l, c = i[o];
												!c.visited &&
												((c.visited = !0),
												(c = c.prev),
												a.push(new u.ShapeElement(c.value.reverse())),
												c !== i[h]);

											);
											a.push(new u.ShapeElement(s.default.segment(c.value.start, n)));
										} else {
											var p = (o + 1) % l;
											for (
												c = i[o];
												!c.visited &&
												(a.push(new u.ShapeElement(c.value)),
												(c.visited = !0),
												(c = c.next) !== i[p]);

											);
											a.push(new u.ShapeElement(s.default.segment(c.value.start, n)));
										}
										return u.Splitter.doubleLinked(a, !0), a;
									}),
									(t.prototype.frametifyInner = function (e) {
										for (
											var t = this.innerPoly.frametify(
													this.innerPoly.edges.map(function (t) {
														return e;
													}),
													[],
												),
												n = t.innerPolys[0],
												r = this.innerPoly.edges,
												i = n.edges,
												o = [],
												a = 0;
											a < t.barPolys.length;
											a++
										) {
											var l = t.barPolys[a],
												c = r[a];
											if (void 0 === l.ringPolygon()) {
												var u = void 0;
												if (c instanceof s.default.Segment) {
													var p = c.distanceTo(i[a].start)[1].middle();
													u = s.default.line(p, c.tangentInStart().rotate90CCW());
												} else
													(d = (c.r.valueOf() + i[a].r.valueOf()) / 2),
														(u = s.default.arc(
															c.center,
															d,
															c.startAngle,
															c.endAngle,
															c.counterClockwise,
														));
												l.checkMullion(u),
													(l.spLine.line = this.clone()),
													(l.spLine.line.innerEdgeIdx = a),
													o.push(l);
											} else {
												var f = c,
													d = (c.r.valueOf() + i[a].r.valueOf()) / 2;
												(l.mulShape = s.default.arc(
													f.center,
													d,
													0,
													2 * Math.PI,
													f.counterClockwise,
												)),
													(l.spLine.line = this.clone()),
													(l.spLine.line.innerEdgeIdx = a),
													o.push(l);
											}
										}
										return (
											o.forEach(function (e) {
												return (e.editTool = h.ToolType.editInnerSplitter);
											}),
											(n.polyId.pos = 0),
											o.push(n),
											o
										);
									}),
									(t.prototype.dragInnerEdge = function (e, n, r, i) {
										var a = o(this.dragInnerEdgeHelper(e, n, r), 2),
											s = a[0],
											l = a[1];
										return this.isCompoundLineOut(l, i) ? this : new t(s, l);
									}),
									(t.prototype.isCompoundLineOut = function (e, t) {
										var n = !1;
										return (
											t.forEach(function (t) {
												t.polygon.contains(e.polygon) && (n = !0);
											}),
											!n
										);
									}),
									(t.prototype.dragInnerEdgeHelper = function (e, t, n) {
										var r = this.innerPoly.box.center,
											i = s.default.vector(r, n),
											o = s.default.vector(r, n.translate(t)),
											a = o.projectionOn(i),
											l = 1;
										if (!a.normalize().equalTo(i.normalize()))
											throw new Error('drag reverse not support');
										l = Math.sqrt(o.x * o.x + o.y * o.y) / Math.sqrt(i.x * i.x + i.y * i.y);
										var h = this.innerPoly.edges;
										h.forEach(function (e, t) {
											h[t] = e
												.translate(-r.x, -r.y)
												.transform(s.default.matrix(l, 0, 0, l, 0, 0))
												.translate(r.x, r.y);
										});
										var c = this.innerPoly.cloneWith(h),
											u = [];
										return (
											this.slines.forEach(function (e) {
												return u.push(
													s.default.line(
														e.pt
															.translate(-r.x, -r.y)
															.transform(s.default.matrix(l, 0, 0, l, 0, 0))
															.translate(r.x, r.y),
														e.norm,
													),
												);
											}),
											[u, c, l]
										);
									}),
									(t.prototype.dragArc = function (e, n, r) {
										var i = this.innerPoly.dragArc(e, n);
										return new t(this.slines, i);
									}),
									t
								);
							})(p.CutLine);
						t.CompoundLine = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CompoundLineCircle = void 0);
						var s = a(n(0)),
							l = n(2),
							h = n(29),
							c = n(16),
							u = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n, h.CutLineType.compoundLineCircle) || this;
									return (r._side = 4), (r.radius = 0), r;
								}
								return (
									i(t, e),
									(t.prototype.create = function () {
										var e = this.innerPoly.box.center;
										this.slines.splice(0, this.slines.length);
										var n = t.createCompound(this.radius, this._side, e);
										(this.slines = n.slines), (this.innerPoly = n.innerPoly);
									}),
									(t.createCompound = function (e, n, r) {
										if ((void 0 === r && (r = s.default.point()), n < 2))
											throw new Error('side must >=2');
										if (n > 12) throw new Error('side must <=12');
										var i = new c.CirclePoly(s.default.point(), e),
											o = [],
											a = (2 * Math.PI) / n,
											l = s.default.point(0, -e),
											h = s.default.vector(1, 0);
										o.push(s.default.line(l, h));
										for (var u = 1; u < n; u++)
											o.push(s.default.line(l.rotate(u * a), h.rotate(u * a)));
										var p = s.default.vector(r.x, r.y);
										o.forEach(function (e) {
											e.pt = e.pt.translate(p);
										});
										var f = new t(o, i.translate(p));
										return (f.radius = e), (f._side = n), f;
									}),
									Object.defineProperty(t.prototype, 'side', {
										get: function () {
											return this._side;
										},
										set: function (e) {
											this._side !== e && ((this._side = e), this.create());
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.clone = function () {
										var e = [];
										this.slines.forEach(function (t) {
											return e.push(t.clone());
										});
										var n = new t(e, this.innerPoly.clone());
										return (
											(n.innerEdgeIdx = this.innerEdgeIdx),
											(n._side = this.side),
											(n.radius = this.radius),
											n
										);
									}),
									(t.prototype.dragInnerEdge = function (e, n, r, i) {
										var a = o(this.dragInnerEdgeHelper(e, n, r), 3),
											s = a[0],
											l = a[1],
											h = a[2];
										if (this.isCompoundLineOut(l, i)) return this;
										var c = new t(s, l);
										return (c.radius = this.radius * h), (c._side = this._side), c;
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.name = h.CutLineType.compoundLineCircle),
											(t.radius = this.radius),
											(t.side = this._side),
											t
										);
									}),
									(t.deserialize = function (e) {
										var n = [];
										e.slines.forEach(function (e) {
											return n.push(l.Utils.parseLine(e));
										});
										var r = new t(n, c.PolyParser.parse(e.polygon));
										return (
											(r.innerEdgeIdx = e.innerEdgeIdx),
											(r.radius = e.radius),
											(r._side = e.side),
											r
										);
									}),
									t
								);
							})(h.CompoundLine);
						t.CompoundLineCircle = u;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CompoundLineCut = void 0);
						var i = r(n(0)),
							o = n(9),
							a = (function () {
								function e(e, t) {
									(this.polygon = e), (this.sline = t), (this.ptCutor = new o.PointCut(e));
								}
								return (
									(e.prototype.split = function (e) {
										var t = this,
											n = this.polygon,
											r = this.sline.innerCrossPts(this.polygon, 0.5 * e),
											a = [];
										if (
											(r.forEach(function (e) {
												return a.push(e.poly);
											}),
											this.ptCutor.splitEdges(a),
											r.length !== this.ptCutor.crossCount)
										)
											throw new Error('intersection points not found properly!');
										for (
											var s = this.sline.outter(0.5 * e),
												l = [],
												h = function (e) {
													var a = c.linkEdges(e, r, n.orientation);
													new o.SplitterLine(a.poly, c.sline.line(a.idx))
														.splitFinal(s[a.idx])
														.forEach(function (e) {
															e.IsMullion
																? ((e.spLine.line = t.sline.clone()),
																  (e.spLine.line.outerEdgeIdx = a.idx))
																: t.sline.locatePoly(e);
															var n = e.edges,
																r = n[0].distanceTo(n[1])[0];
															(2 === n.length && i.default.Utils.EQ_0(r)) || l.push(e);
														});
												},
												c = this,
												u = 0;
											u < r.length;
											u++
										)
											h(u);
										return (
											this.sline.frametifyInner(e).forEach(function (e) {
												return l.push(e);
											}),
											l
										);
									}),
									(e.prototype.linkEdges = function (e, t, n) {
										var r = this.ptCutor.cloneElement(),
											i = r[(e + 1) % r.length],
											a = r[e],
											s = t.findIndex(function (e) {
												return e.poly.equalTo(i.value.start);
											}),
											l = this.sline.createLink(t[s].line, i.value.start, a.value.start, n),
											h = s;
										return (
											n === this.sline.orien &&
												(h = t.findIndex(function (e) {
													return e.poly.equalTo(a.value.start);
												})),
											(i.prev.next = l[0]),
											(l[0].prev = i.prev),
											(i.prev = void 0),
											(l[l.length - 1].next = a),
											(a.prev.next = void 0),
											(a.prev = l[l.length - 1]),
											{
												poly: o.Splitter.findPoly(a),
												idx: h,
											}
										);
									}),
									e
								);
							})();
						t.CompoundLineCut = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CompoundLineCreator = void 0);
						var i = r(n(0)),
							o = n(5),
							a = n(1),
							s = n(9),
							l = (function () {
								function e() {
									var e = this;
									(this.sizeConst = 800),
										(this.slines = {}),
										(this.slines[o.ToolType.mullion_compound_square] = function () {
											return e.createSqure();
										}),
										(this.slines[o.ToolType.mullion_compound_diamond] = function () {
											return e.createDiamond();
										}),
										(this.slines[o.ToolType.mullion_compound_circle] = function () {
											return e.createCircle();
										}),
										(this.slines[o.ToolType.mullion_compound_hexagon] = function () {
											return e.createHexagon();
										}),
										(this.slines[o.ToolType.mullion_compound_x_square] = function () {
											return e.createXSqure();
										}),
										(this.slines[o.ToolType.mullion_compound_rectangle_single] = function () {
											return e.createRectangleSingle();
										}),
										(this.slines[o.ToolType.mullion_compound_rectangle_double] = function () {
											return e.createRectangleDouble();
										}),
										(this.slines[o.ToolType.mullion_compound_long_octagon] = function () {
											return e.createLongOctagon();
										}),
										(this.slines[o.ToolType.mullion_compound_double_octagon] = function () {
											return e.createDoubleOctagon();
										});
								}
								return (
									Object.defineProperty(e, 'Instance', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.create = function (e) {
										return this.slines[e]();
									}),
									(e.prototype.createSqure = function () {
										var e = this.sizeConst / 2,
											t = new a.RegularPoly(i.default.point(0, 0), Math.sqrt(2) * e, 4),
											n = [
												i.default.line(i.default.point(0, e), i.default.vector(-1, 0)),
												i.default.line(i.default.point(-e, 0), i.default.vector(0, -1)),
												i.default.line(i.default.point(0, -e), i.default.vector(1, 0)),
												i.default.line(i.default.point(e, 0), i.default.vector(0, 1)),
											];
										return new s.CompoundLine(n, t);
									}),
									(e.prototype.createDiamond = function () {
										var e = this.sizeConst,
											t = 1.5 * e,
											n = new a.DiamondPoly(i.default.point(), e, t),
											r = [
												i.default.line(i.default.point(0, t / 2), i.default.vector(-1, 0)),
												i.default.line(i.default.point(-e / 2, 0), i.default.vector(0, -1)),
												i.default.line(i.default.point(0, -t / 2), i.default.vector(1, 0)),
												i.default.line(i.default.point(e / 2, 0), i.default.vector(0, 1)),
											];
										return new s.CompoundLine(r, n);
									}),
									(e.prototype.createCircle = function () {
										var e = this.sizeConst / 2;
										return s.CompoundLineCircle.createCompound(e, 4);
									}),
									(e.prototype.createHexagon = function () {
										var e = this.sizeConst / 2,
											t = new a.RegularPoly(i.default.point(0, 0), e, 6),
											n = [
												i.default.line(i.default.point(-e, 0), i.default.vector(0, -1)),
												i.default.line(
													i.default.point(-e / 2, -e * Math.cos(Math.PI / 6)),
													i.default.vector(1, 0),
												),
												i.default.line(
													i.default.point(e / 2, -e * Math.cos(Math.PI / 6)),
													i.default.vector(1, 0),
												),
												i.default.line(i.default.point(e, 0), i.default.vector(0, 1)),
												i.default.line(
													i.default.point(e / 2, e * Math.cos(Math.PI / 6)),
													i.default.vector(-1, 0),
												),
												i.default.line(
													i.default.point(-e / 2, e * Math.cos(Math.PI / 6)),
													i.default.vector(-1, 0),
												),
											];
										return new s.CompoundLine(n, t);
									}),
									(e.prototype.createXSqure = function () {
										var e = this.sizeConst / 2,
											t = new a.RegularPoly(i.default.point(0, 0), Math.sqrt(2) * e, 4),
											n = [
												i.default.line(i.default.point(e, e), i.default.vector(-1, 1)),
												i.default.line(i.default.point(-e, e), i.default.vector(-1, -1)),
												i.default.line(i.default.point(-e, -e), i.default.vector(1, -1)),
												i.default.line(i.default.point(e, -e), i.default.vector(1, 1)),
											];
										return new s.CompoundLine(n, t);
									}),
									(e.prototype.createRectangleSingle = function () {
										var e = this.sizeConst / 2,
											t = e / 2,
											n = new a.WinPolygon(
												a.PolygonCreator.Ins.joinPointsWithSegment([
													i.default.point(t, e),
													i.default.point(-t, e),
													i.default.point(-t, -e),
													i.default.point(t, -e),
												]),
											),
											r = [
												i.default.line(i.default.point(0, e), i.default.vector(-1, 0)),
												i.default.line(i.default.point(-t, 0), i.default.vector(0, -1)),
												i.default.line(i.default.point(0, -e), i.default.vector(1, 0)),
												i.default.line(i.default.point(t, 0), i.default.vector(0, 1)),
											];
										return new s.CompoundLine(r, n);
									}),
									(e.prototype.createRectangleDouble = function () {
										var e = this.sizeConst / 2,
											t = this.sizeConst / 3,
											n = new a.WinPolygon(
												a.PolygonCreator.Ins.joinPointsWithSegment([
													i.default.point(t, e),
													i.default.point(-t, e),
													i.default.point(-t, -e),
													i.default.point(t, -e),
												]),
											),
											r = [
												i.default.line(i.default.point(-t / 2, e), i.default.vector(-1, 0)),
												i.default.line(i.default.point(t / 2, e), i.default.vector(-1, 0)),
												i.default.line(i.default.point(-t, e / 2), i.default.vector(0, -1)),
												i.default.line(i.default.point(-t, -e / 2), i.default.vector(0, -1)),
												i.default.line(i.default.point(-t / 2, -e), i.default.vector(1, 0)),
												i.default.line(i.default.point(t / 2, -e), i.default.vector(1, 0)),
												i.default.line(i.default.point(t, -e / 2), i.default.vector(0, 1)),
												i.default.line(i.default.point(t, e / 2), i.default.vector(0, 1)),
											];
										return new s.CompoundLine(r, n);
									}),
									(e.prototype.createDoubleOctagon = function () {
										var e = this.sizeConst / 4;
										return s.CompoundDoubleOctagon.createCompound(e);
									}),
									(e.prototype.createLongOctagon = function () {
										var e = (2 * this.sizeConst) / 5;
										return s.CompoundLongOctagon.createCompound(e);
									}),
									e
								);
							})();
						t.CompoundLineCreator = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SimpleHalfHexagon = void 0);
						var s = a(n(0)),
							l = n(29),
							h = (function (e) {
								function t(n, r) {
									return e.call(this, r || t.create(n), l.CutLineType.simpleHexagon) || this;
								}
								return (
									i(t, e),
									(t.create = function (e) {
										return t.joinRelative([
											s.default.vector(-e / 20, e / 20),
											s.default.vector(0, e),
											s.default.vector(e / 20, e / 20),
										]);
									}),
									(t.joinRelative = function (e) {
										var t,
											n,
											r = [],
											i = s.default.point(0, 0);
										try {
											for (var a = o(e), l = a.next(); !l.done; l = a.next()) {
												var h = l.value,
													c = i.translate(h);
												r.push(s.default.segment(i, c)), (i = c);
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												l && !l.done && (n = a.return) && n.call(a);
											} finally {
												if (t) throw t.error;
											}
										}
										return r;
									}),
									(t.prototype._clone = function (e) {
										return new t(0, e);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.name = l.CutLineType.simpleHexagon), t;
									}),
									(t.deserialize = function (e) {
										var n = new t(0, l.SimpleLine.deserialize(e).segments);
										return (n.innerEdgeIdx = e.innerEdgeIdx), n;
									}),
									(t.prototype.dragVertex = function (e, n, r) {
										if (1 === e) {
											var i = this.segments[1].middle(),
												o = s.default.vector(i, r),
												a = s.default.vector(i, r.translate(n)),
												l = 1;
											if (!a.projectionOn(o).normalize().equalTo(o.normalize()))
												throw new Error('drag reverse not support');
											return (
												(l = Math.sqrt(a.x * a.x + a.y * a.y) / Math.sqrt(o.x * o.x + o.y * o.y)),
												new t(0, this.scale(l))
											);
										}
									}),
									(t.prototype.scale = function (e) {
										var t = this.segments[1].middle(),
											n = this.segments;
										return (
											n.forEach(function (r, i) {
												n[i] = r
													.translate(-t.x, -t.y)
													.transform(s.default.matrix(e, 0, 0, e, 0, 0))
													.translate(t.x, t.y);
											}),
											n
										);
									}),
									(t.prototype.dragArc = function (n, r, i) {
										return new t(0, e.prototype.dragArc.call(this, n, r, i).segments);
									}),
									t
								);
							})(l.SimpleLine);
						t.SimpleHalfHexagon = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CompoundDoubleOctagon = void 0);
						var s = a(n(0)),
							l = n(2),
							h = n(29),
							c = n(16),
							u = (function (e) {
								function t(t, n) {
									return e.call(this, t, n, h.CutLineType.compoundDoubleOctagon) || this;
								}
								return (
									i(t, e),
									(t.createCompound = function (e) {
										var n = new c.RegularPoly(s.default.point(0, 0), e, 8).edges,
											r = n[0].length,
											i = s.default.vector(0, -1.5 * e),
											o = s.default.vector(0, 1.5 * e),
											a = new c.WinPolygon(
												c.PolygonCreator.Ins.joinPointsWithSegment([
													n[0].start.translate(i.add(s.default.vector(0, -r / 2.5))),
													n[1].start.translate(i.add(s.default.vector(0, -r / 2.5))),
													n[1].start.translate(i),
													n[2].start.translate(i),
													n[3].start.translate(i),
													n[4].start.translate(i),
													n[1].start.translate(o),
													n[2].start.translate(o),
													n[3].start.translate(o),
													n[4].start.translate(o),
													n[4].start.translate(o.add(s.default.vector(0, r / 2.5))),
													n[5].start.translate(o.add(s.default.vector(0, r / 2.5))),
													n[5].start.translate(o),
													n[6].start.translate(o),
													n[7].start.translate(o),
													n[0].start.translate(o),
													n[5].start.translate(i),
													n[6].start.translate(i),
													n[7].start.translate(i),
													n[0].start.translate(i),
												]),
											),
											l = [];
										return (
											a.edges.forEach(function (e) {
												l.push(e.transform(s.default.matrix(1.2, 0, 0, 1, 0, 0)));
											}),
											new t(
												[
													s.default.line(l[0].middle().clone(), s.default.vector(1, 0)),
													s.default.line(l[3].middle().clone(), s.default.vector(0, 1)),
													s.default.line(l[5].middle().clone(), s.default.vector(0, 1)),
													s.default.line(l[7].middle().clone(), s.default.vector(0, 1)),
													s.default.line(l[10].middle().clone(), s.default.vector(-1, 0)),
													s.default.line(l[13].middle().clone(), s.default.vector(0, -1)),
													s.default.line(l[15].middle().clone(), s.default.vector(0, -1)),
													s.default.line(l[17].middle().clone(), s.default.vector(0, -1)),
												],
												new c.WinPolygon(l),
											)
										);
									}),
									(t.prototype.clone = function () {
										var e = [];
										this.slines.forEach(function (t) {
											return e.push(t.clone());
										});
										var n = new t(e, this.innerPoly.clone());
										return (n.innerEdgeIdx = this.innerEdgeIdx), n;
									}),
									(t.prototype.dragInnerEdge = function (e, n, r, i) {
										var a, s, l, h, c;
										return (
											5 === e || 15 === e
												? ((h = (a = o(this.scale(n, r, !0), 2))[0]), (c = a[1]))
												: 0 === e || 10 === e
												? ((h = (s = o(this.scale(n, r, !1), 2))[0]), (c = s[1]))
												: ((h = (l = o(this.dragInnerEdgeHelper(e, n, r), 2))[0]), (c = l[1])),
											this.isCompoundLineOut(c, i) ? this : new t(h, c)
										);
									}),
									(t.prototype.scale = function (e, t, n) {
										void 0 === n && (n = !1);
										var r = this.innerPoly.box.center,
											i = s.default.vector(r, t),
											o = s.default.vector(r, t.translate(e)),
											a = 1;
										if (!o.projectionOn(i).normalize().equalTo(i.normalize()))
											throw new Error('drag reverse not support');
										a = Math.sqrt(o.x * o.x + o.y * o.y) / Math.sqrt(i.x * i.x + i.y * i.y);
										var l = s.default.matrix(1, 0, 0, 1, 0, 0);
										l = n ? s.default.matrix(a, 0, 0, 1, 0, 0) : s.default.matrix(1, 0, 0, a, 0, 0);
										var h = this.innerPoly.edges;
										h.forEach(function (e, t) {
											h[t] = e.translate(-r.x, -r.y).transform(l).translate(r.x, r.y);
										});
										var c = this.innerPoly.cloneWith(h),
											u = [];
										return (
											this.slines.forEach(function (e) {
												return u.push(
													s.default.line(
														e.pt.translate(-r.x, -r.y).transform(l).translate(r.x, r.y),
														e.norm,
													),
												);
											}),
											[u, c, a]
										);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.name = h.CutLineType.compoundDoubleOctagon), t;
									}),
									(t.deserialize = function (e) {
										var n = [];
										e.slines.forEach(function (e) {
											return n.push(l.Utils.parseLine(e));
										});
										var r = new t(n, c.PolyParser.parse(e.polygon));
										return (r.innerEdgeIdx = e.innerEdgeIdx), r;
									}),
									t
								);
							})(h.CompoundLine);
						t.CompoundDoubleOctagon = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CompoundLongOctagon = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(29),
							h = n(16),
							c = (function (e) {
								function t(t, n) {
									return e.call(this, t, n, l.CutLineType.compoundLongOctagon) || this;
								}
								return (
									i(t, e),
									(t.createCompound = function (e) {
										var n = (5 * e) / 3,
											r = new h.RegularPoly(a.default.point(0, 0), e, 8).edges,
											i = r[0].length,
											o = a.default.vector(0, -i + n),
											s = a.default.vector(0, i - n),
											l = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													r[0].start.translate(s),
													r[1].start.translate(s),
													r[2].start.translate(s),
													r[3].start.translate(o),
													r[4].start.translate(o),
													r[5].start.translate(o),
													r[6].start.translate(o),
													r[7].start.translate(s),
												]),
											).edges,
											c = l[2].start.x,
											u = l[0].start.y;
										return new t(
											[
												a.default.line(a.default.point(0, u), a.default.vector(1, 0)),
												a.default.line(a.default.point(c, -n / 3), a.default.vector(0, 1)),
												a.default.line(a.default.point(c, n / 3), a.default.vector(0, 1)),
												a.default.line(a.default.point(0, -u), a.default.vector(-1, 0)),
												a.default.line(a.default.point(-c, n / 3), a.default.vector(0, -1)),
												a.default.line(a.default.point(-c, -n / 3), a.default.vector(0, -1)),
											],
											new h.WinPolygon(l),
										);
									}),
									(t.prototype.clone = function () {
										var e = [];
										this.slines.forEach(function (t) {
											return e.push(t.clone());
										});
										var n = new t(e, this.innerPoly.clone());
										return (
											(n.innerEdgeIdx = this.innerEdgeIdx), (n.outerEdgeIdx = this.outerEdgeIdx), n
										);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.name = l.CutLineType.compoundLongOctagon), t;
									}),
									(t.deserialize = function (e) {
										var n = [];
										e.slines.forEach(function (e) {
											return n.push(s.Utils.parseLine(e));
										});
										var r = new t(n, h.PolyParser.parse(e.polygon));
										return (r.innerEdgeIdx = e.innerEdgeIdx), r;
									}),
									(t.prototype.drag = function (e, t, n) {
										var r = n.polygon.spLine.line.outerEdgeIdx;
										this.slines[r].pt = this.slines[r].pt.translate(t);
									}),
									(t.prototype.dragInnerEdge = function (n, r, i, o) {
										var a = e.prototype.dragInnerEdge.call(this, n, r, i, o);
										return new t(a.slines, a.innerPoly);
									}),
									t
								);
							})(l.CompoundLine);
						t.CompoundLongOctagon = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SimpleWave = void 0);
						var o = n(2),
							a = n(29),
							s = n(9),
							l = (function (e) {
								function t(t, n) {
									void 0 === n && (n = a.CutLineType.simpleWave);
									var r = e.call(this, t, n) || this;
									return (r.segs = t), r;
								}
								return (
									i(t, e),
									(t.prototype.split = function (e, t) {
										return new a.SimpleWaveCut(e, this).split(t);
									}),
									(t.prototype._clone = function (e) {
										return new t(e);
									}),
									(t.prototype.clone = function () {
										var e = [];
										this.segs.forEach(function (t) {
											return e.push(t.clone());
										});
										var t = this._clone(e);
										return (t.innerEdgeIdx = this.innerEdgeIdx), t;
									}),
									(t.prototype.toJSON = function () {
										if (0 !== this.segs.length) {
											var t = e.prototype.toJSON.call(this);
											return (t.name = a.CutLineType.simpleWave), t;
										}
									}),
									(t.deserialize = function (e) {
										var n = [];
										e.segs.forEach(function (e) {
											'segment' === e.name
												? n.push(o.Utils.parseSegment(e))
												: n.push(o.Utils.parseArc(e));
										});
										var r = new t(n);
										return (r.innerEdgeIdx = e.innerEdgeIdx), r;
									}),
									(t.prototype.intersect = function (e) {
										if (0 === this.segs.length) return [];
										var t,
											n,
											r = this.segs[0],
											i = this.segs[this.segs.length - 1];
										return e.contains(r.start) || e.contains(r.end)
											? 0 === (t = e.intersect(r)).length
												? []
												: (o.Utils.sortPoints(r.center, r.end, t, !0),
												  (n = t[0]),
												  e.contains(i.start) || e.contains(i.end)
														? 0 === (t = e.intersect(i)).length
															? []
															: (o.Utils.sortPoints(i.center, i.start, t, !0), [n, t[0]])
														: [])
											: [];
									}),
									(t.prototype.createShape = function (e, t, n) {
										var r = s.ArcUtils.CreateArcFrom3Points(t, n, e.middle());
										return (r.counterClockwise = e.counterClockwise), new s.ShapeElement(r);
									}),
									(t.prototype.createLink = function (e, t, n) {
										var r = this.segs,
											i = [];
										if (n)
											for (var o = 0; o < r.length; o++) {
												var a = r[o];
												0 === o
													? i.push(this.createShape(a, e, a.end))
													: o === r.length - 1
													? i.push(this.createShape(a, a.start, t))
													: i.push(new s.ShapeElement(a.clone()));
											}
										else
											for (o = r.length - 1; o >= 0; o--)
												if (((a = r[o]), 0 === o))
													((l = this.createShape(a, e, a.end)).value = l.value.reverse()),
														i.push(l);
												else if (o === r.length - 1) {
													var l;
													((l = this.createShape(a, a.start, t)).value = l.value.reverse()),
														i.push(l);
												} else i.push(new s.ShapeElement(a.reverse()));
										return i;
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return this.segs[0].end.equalTo(this.segs[1].start)
												? 0 === this.innerEdgeIdx
												: 0 !== this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return this.segs[0].end.equalTo(this.segs[1].start)
												? this.innerEdgeIdx === this.segs.length - 1
												: this.innerEdgeIdx !== this.segs.length - 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(a.SimpleLine);
						t.SimpleWave = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SimpleWaveCut = void 0);
						var s = a(n(0)),
							l = n(58),
							h = n(29),
							c = n(9),
							u = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (
										(r.polygon = t), (r.sline = n), (r.splitPoly = []), (r.edgesOnLine = []), r
									);
								}
								return (
									i(t, e),
									(t.prototype.findParallelEdges = function (e) {
										var t = this.sline.segments.map(function (t) {
											return 0.5 * e;
										});
										return [
											new h.SimpleWave(l.Frametify.findParallelEdges(this.sline.segments, t, !0)),
											new h.SimpleWave(l.Frametify.findParallelEdges(this.sline.segments, t, !1)),
										];
									}),
									(t.prototype.createMullion = function (e, t, n) {
										var r, i;
										if (!e.IsMullion) return [];
										var a = [],
											l = [];
										e.edges.forEach(function (e) {
											return a.push(new c.ShapeElement(e.clone()));
										});
										for (
											var h = function (e) {
													var r = t.segments[e],
														i = n.segments[e];
													l.push(
														a.find(function (e) {
															return e.value.start.equalTo(r.end);
														}),
													),
														l.push(
															a.find(function (e) {
																return e.value.start.equalTo(i.end);
															}),
														);
												},
												u = 0;
											u < t.segments.length - 1;
											u++
										)
											h(u);
										c.Splitter.doubleLinked(a);
										for (var p = 0; p < l.length; p += 2) this.createBridge(a, l[p], l[p + 1]);
										var f = [],
											d = function (t) {
												if (t.visited) return 'continue';
												var n = c.Splitter.findPoly(t),
													r = g.sline.segments.findIndex(function (e) {
														var t = !1;
														return (
															n.edges.forEach(function (n) {
																n instanceof s.default.Arc &&
																	n.center.equalTo(e.center) &&
																	(t = !0);
															}),
															t
														);
													}),
													i = g.sline.segments[r],
													o = i instanceof s.default.Segment ? s.default.line(i.start, i.end) : i;
												n.checkMullion(o),
													(n.spLine.line = g.sline.clone()),
													(n.spLine.line.innerEdgeIdx = r),
													(n.polyId = e.polyId.clone()),
													f.push(n);
											},
											g = this;
										try {
											for (var y = o(a), m = y.next(); !m.done; m = y.next()) d(m.value);
										} catch (e) {
											r = {
												error: e,
											};
										} finally {
											try {
												m && !m.done && (i = y.return) && i.call(y);
											} finally {
												if (r) throw r.error;
											}
										}
										return f;
									}),
									t
								);
							})(h.SimpleLineCut);
						t.SimpleWaveCut = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CenterIntersectType = t.HalfWheel = void 0);
						var l,
							h = s(n(0)),
							c = n(1),
							u = n(29),
							p = n(11),
							f = (function (e) {
								function t(t, n, r, i) {
									void 0 === n && (n = 3),
										void 0 === r && (r = l.Separated),
										void 0 === i && (i = !0);
									var o = e.call(this, u.CutLineType.halfWheel) || this;
									return (
										(o.location = t),
										(o.middleCrosstiesCount = n),
										(o.intersectType = r),
										(o.sideCrosstiesHidden = i),
										(o.polygon = new c.WinPolygon()),
										(o._topEdge = h.default.segment()),
										(o._bottomEdge = h.default.segment()),
										(o._splitEdgePoints = []),
										(o._splitCenterPoints = []),
										(o._splitAbsCenter = h.default.point()),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'start', {
										get: function () {
											return this._splitAbsCenter;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'end', {
										get: function () {
											return this._topEdge.middle();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pt', {
										get: function () {
											return this.location;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mpt', {
										get: function () {
											return this._splitAbsCenter;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showArc', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.split = function (e, t) {
										var n = this;
										this.initVariables(e, t);
										var r = this.placeCrossties(e, this.middleCrosstiesCount, t),
											i = r.filter(function (e) {
												return e.IsMullion;
											});
										i.forEach(function (e, t) {
											(e.spLine.line = n.clone()), (e.spLine.line.innerEdgeIdx = t);
										});
										var o = r.filter(function (e) {
											return !e.IsMullion;
										});
										return (
											o.forEach(function (e, t) {
												e.polyId.pos = t;
											}),
											a(o, i)
										);
									}),
									(t.prototype.initVariables = function (e, t) {
										if (
											((this.polygon = e),
											(this._topEdge = this.findTopEdge()),
											(this._bottomEdge = this.findBottomEdge()),
											!this.sideCrosstiesHidden &&
												3 === this.middleCrosstiesCount &&
												this.polygon.edges.length > 3)
										) {
											var n = this.findSplitPointsWithSideCrossties(t);
											return (
												(this._splitEdgePoints = n.edge), void (this._splitCenterPoints = n.center)
											);
										}
										(this._splitEdgePoints = this.findSplitEdgePoints(t)),
											(this._splitCenterPoints = this.findSplitCenterPoints(t));
									}),
									(t.prototype.findSplitPointsWithSideCrossties = function (e) {
										var t = this._topEdge.middle(),
											n = this._bottomEdge.middle();
										this._splitAbsCenter = n;
										var r = n.translate(h.default.vector(e / 2, 0)),
											i = [this._topEdge.start, this._topEdge.end].sort(function (e, t) {
												return e.x - t.x;
											})[1],
											o = h.default.vector(r, i);
										o = o.rotate(-Math.asin(e / i.distanceTo(r)[0]));
										var a = h.default.line(h.default.segment(r, i).middle(), o.rotate90CW()),
											s = a.intersect(this._topEdge)[0],
											l = a.intersect(this._bottomEdge)[0],
											c = t.x;
										return {
											edge: [h.default.point(2 * c - s.x, s.y), t, s],
											center: [h.default.point(2 * c - l.x, l.y), n, l],
										};
									}),
									(t.prototype.placeCrossties = function (e, t, n) {
										if (0 === t) return [e];
										for (var r = [], i = 0; i < t; i++) {
											var o = this._splitEdgePoints[i],
												a = this._splitCenterPoints[i];
											r.push(h.default.segment(a, o));
										}
										var s = t % 2 == 1 ? Math.floor(t / 2) : t / 2 - 1;
										return this.splitByCrosstie(e, r, s, n);
									}),
									(t.prototype.splitByCrosstie = function (e, t, n, r) {
										var i = [],
											o = t[n],
											s = h.default.line(o.start, o.end),
											l = e.split(s, r),
											c = l.filter(function (e) {
												return e.IsMullion;
											}),
											u = l
												.filter(function (e) {
													return !e.IsMullion;
												})
												.sort(function (e, t) {
													return (
														(e.box.center.leftTo(s) ? 1 : 0) - (t.box.center.leftTo(s) ? 1 : 0)
													);
												}),
											p = [],
											f = t.slice(0, n);
										if (f.length > 0) {
											var d = u.shift();
											p = this.splitByCrosstie(d, f, f.length - 1, r);
										}
										var g = [],
											y = t.slice(n + 1);
										return (
											y.length > 0 && ((d = u.pop()), (g = this.splitByCrosstie(d, y, 0, r))),
											i.push.apply(i, a(c, u, p, g)),
											i
										);
									}),
									(t.prototype.crosstieSplitLineMargin = function (e) {
										return this.intersectType === l.Cross
											? 0
											: this.intersectType === l.HalfCross
											? e / 2
											: e;
									}),
									(t.prototype.findSplitCenterPoints = function (e) {
										return this.intersectType === l.Cross
											? this.findCrossSplitCenterPoints(e)
											: this.intersectType === l.HalfCross
											? this.findHalfCrossSplitCenterPoints(e)
											: this.findSeparatedSplitCenterPoints(e);
									}),
									(t.prototype.findCrossSplitCenterPoints = function (e) {
										this._splitAbsCenter = this._bottomEdge.middle();
										var t,
											n = this.middleCrosstiesCount % 2 == 1,
											r = n
												? (this.middleCrosstiesCount - 1) / 2
												: (this.middleCrosstiesCount - 2) / 2,
											i = [];
										(t = this._splitAbsCenter.translate(h.default.vector(-e / 2, 0))),
											n ||
												(t = this.locateHalfCrossCrosstie(
													this._splitAbsCenter,
													this._splitEdgePoints[r],
													e,
												).next);
										for (var o = [], s = 0; s < r; s++) {
											var l = this._splitEdgePoints[r - s - 1],
												c = this.locateCrossCrosstie(t, l, e);
											o.push(c);
										}
										o.reverse(),
											i.push.apply(i, a(o)),
											n
												? i.push(this._splitAbsCenter)
												: i.push(this._splitAbsCenter, this._splitAbsCenter),
											(t = this._splitAbsCenter.translate(h.default.vector(e / 2, 0))),
											n ||
												(t = this.locateHalfCrossCrosstie(
													this._splitAbsCenter,
													this._splitEdgePoints[r + 1],
													e,
												).next);
										var u = [];
										for (s = 0; s < r; s++)
											(l = this._splitEdgePoints[r + (n ? 1 : 2) + s]),
												(c = this.locateCrossCrosstie(t, l, e)),
												u.push(c);
										return i.push.apply(i, a(u)), i;
									}),
									(t.prototype.findHalfCrossSplitCenterPoints = function (e) {
										this._splitAbsCenter = this._bottomEdge.middle();
										var t,
											n = this.middleCrosstiesCount % 2 == 1,
											r = n ? (this.middleCrosstiesCount - 1) / 2 : this.middleCrosstiesCount / 2,
											i = [];
										(t = this._splitAbsCenter), n && (t = t.translate(h.default.vector(-e / 2, 0)));
										for (var o = [], s = 0; s < r; s++) {
											var l = this._splitEdgePoints[r - s - 1],
												c = this.locateHalfCrossCrosstie(t, l, e);
											o.push(c.center), (t = c.next);
										}
										o.reverse(),
											i.push.apply(i, a(o)),
											n && i.push(this._splitAbsCenter),
											(t = this._splitAbsCenter),
											n && (t = t.translate(h.default.vector(e / 2, 0)));
										var u = [];
										for (s = 0; s < r; s++) {
											l = this._splitEdgePoints[r + (n ? 1 : 0) + s];
											var p = this.locateHalfCrossCrosstie(t, l, e);
											u.push(p.center), (t = p.next);
										}
										return i.push.apply(i, a(u)), i;
									}),
									(t.prototype.findSeparatedSplitCenterPoints = function (e) {
										this._splitAbsCenter = this._bottomEdge.middle();
										var t,
											n = this.middleCrosstiesCount % 2 == 1,
											r = n ? (this.middleCrosstiesCount - 1) / 2 : this.middleCrosstiesCount / 2,
											i = [];
										(t = this._splitAbsCenter), n && (t = t.translate(h.default.vector(-e / 2, 0)));
										for (var o = [], s = 0; s < r; s++) {
											var l = this._splitEdgePoints[r - s - 1],
												c = this.locateSeparatedCrosstie(t, l, e);
											o.push(c.center), (t = c.next);
										}
										o.reverse(),
											i.push.apply(i, a(o)),
											n && i.push(this._splitAbsCenter),
											(t = this._splitAbsCenter),
											n && (t = t.translate(h.default.vector(e / 2, 0)));
										var u = [];
										for (s = 0; s < r; s++) {
											l = this._splitEdgePoints[r + (n ? 1 : 0) + s];
											var p = this.locateSeparatedCrosstie(t, l, e);
											u.push(p.center), (t = p.next);
										}
										return i.push.apply(i, a(u)), i;
									}),
									(t.prototype.locateHalfCrossCrosstie = function (e, t, n) {
										var r = t.x > e.x ? 1 : -1,
											i = e,
											o = h.default.vector(i, t).normalize(),
											a = -1 === r ? o.rotate90CW() : o.rotate90CCW(),
											s = h.default.line(t.translate(a.multiply(n / 2)), a),
											l = h.default.line(e, h.default.vector(0, 1));
										return {
											center: i,
											next: s.intersect(l)[0],
										};
									}),
									(t.prototype.locateCrossCrosstie = function (e, t, n) {
										var r = t.x > e.x ? 1 : -1,
											i = e.distanceTo(t),
											o = i[0],
											a = i[1],
											s = Math.asin(n / 2 / o),
											l = a.tangentInStart().rotate(s * r);
										l = -1 === r ? l.rotate90CCW() : l.rotate90CW();
										var c = h.default.line(t, l),
											u = h.default.line(e, h.default.vector(0, 1));
										return c.intersect(u)[0];
									}),
									(t.prototype.locateSeparatedCrosstie = function (e, t, n) {
										var r = t.x > e.x ? 1 : -1,
											i = e.distanceTo(t),
											o = i[0],
											a = i[1],
											s = Math.asin(n / 2 / o),
											l = a.tangentInStart().rotate(-s * r);
										l = -1 === r ? l.rotate90CW() : l.rotate90CCW();
										var c = h.default.line(t, l),
											u = h.default.line(e, h.default.vector(0, 1));
										return {
											center: c.intersect(u)[0],
											next: h.default.line(t.translate(l.multiply(n / 2)), l).intersect(u)[0],
										};
									}),
									(t.prototype.findTopEdge = function () {
										var e = this.polygon.edges,
											t = this.polygon.box.center,
											n = this.polygon.polygon.intersect(h.default.line(t, h.default.vector(1, 0)));
										n.sort(function (e, t) {
											return e.y - t.y;
										});
										var r = n.shift();
										if (r) {
											var i = e.find(function (e) {
												return e.contains(r);
											});
											if (i) return i;
										}
										return e[p.EdgeFinder.Instance.findIndex2(p.Direction.Up, this.polygon)];
									}),
									(t.prototype.findBottomEdge = function () {
										return this.polygon.edges[
											p.EdgeFinder.Instance.findIndex2(p.Direction.Down, this.polygon)
										];
									}),
									(t.prototype.findSplitEdgePoints = function (e) {
										return this._topEdge instanceof h.default.Segment
											? this.splitSegmentPoints(this._topEdge, e)
											: this.splitArcPoints(this._topEdge, e);
									}),
									(t.prototype.splitSegmentPoints = function (e, t) {
										for (
											var n = [],
												r = [e.start, e.end].sort(function (e, t) {
													return e.x - t.x;
												}),
												i = h.default.segment(r[0], r[1]),
												o = i.tangentInStart(),
												a = i.length / (this.middleCrosstiesCount + 1),
												s = i.start,
												l = 0;
											l < this.middleCrosstiesCount;
											l++
										)
											n.push(s.translate(o.multiply(a * (l + 1))));
										return n;
									}),
									(t.prototype.splitArcPoints = function (e, t) {
										for (
											var n = [],
												r = this.totalAngleOfArc(e) / (this.middleCrosstiesCount + 1),
												i = [e.start, e.end].sort(function (e, t) {
													return e.x - t.x;
												})[0],
												o = 0;
											o < this.middleCrosstiesCount;
											o++
										)
											n.push(i.rotate(r * (o + 1), e.center));
										return n;
									}),
									(t.prototype.expandSegment = function (e, t) {
										return h.default.segment(
											e.start.translate(e.tangentInEnd().multiply(t)),
											e.end.translate(e.tangentInStart().multiply(t)),
										);
									}),
									(t.prototype.totalAngleOfArc = function (e) {
										var t = e.startAngle,
											n = e.endAngle;
										return e.counterClockwise
											? n < t
												? n - t + 2 * Math.PI
												: n - t
											: t < n
											? t - n + 2 * Math.PI
											: t - n;
									}),
									(t.prototype.toJSON = function () {
										return {
											name: this.type,
											l: this.location.toJSON(),
											mcc: this.middleCrosstiesCount,
											it: this.intersectType,
											sch: this.sideCrosstiesHidden,
										};
									}),
									(t.deserialize = function (e) {
										var n = new t(h.default.point(e.l.x, e.l.y));
										return (
											(n.middleCrosstiesCount = e.mcc),
											(n.intersectType = e.it),
											void 0 !== e.sch && (n.sideCrosstiesHidden = e.sch),
											n
										);
									}),
									(t.prototype.clone = function () {
										var e = new t(
											this.location,
											this.middleCrosstiesCount,
											this.intersectType,
											this.sideCrosstiesHidden,
										);
										return (e.innerEdgeIdx = this.innerEdgeIdx), e;
									}),
									(t.prototype.translate = function (e) {
										this.location = this.location.translate(e);
									}),
									(t.prototype.rotate = function (e, t) {
										return this;
									}),
									Object.defineProperty(t.prototype, 'generateDockDataForDim', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(u.CutLine);
						(t.HalfWheel = f),
							(function (e) {
								(e[(e.Separated = 0)] = 'Separated'),
									(e[(e.HalfCross = 1)] = 'HalfCross'),
									(e[(e.Cross = 2)] = 'Cross');
							})((l = t.CenterIntersectType || (t.CenterIntersectType = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SemiArc = void 0);
						var l = s(n(0)),
							h = n(9),
							c = n(1),
							u = n(29),
							p = n(11),
							f = (function (e) {
								function t(t, n, r, i, o) {
									void 0 === n && (n = !1), void 0 === i && (i = -1), void 0 === o && (o = 3);
									var a = e.call(this, u.CutLineType.semiArc) || this;
									return (
										(a.location = t),
										(a.sameWithOuterArcCenter = n),
										(a.arcCenter = r),
										(a.arcRadius = i),
										(a.middleCrosstiesCount = o),
										(a.polygon = new c.WinPolygon()),
										(a._cutCircle = l.default.arc()),
										(a._semiArc = l.default.arc()),
										a
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'start', {
										get: function () {
											return this._semiArc.start;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'end', {
										get: function () {
											return this._semiArc.end;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pt', {
										get: function () {
											return this.location;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mpt', {
										get: function () {
											return this._semiArc.middle();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return 0 === this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return 0 === this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showArc', {
										get: function () {
											return 0 === this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'chordLength', {
										get: function () {
											return this._semiArc.start.distanceTo(this._semiArc.end)[0];
										},
										set: function (e) {
											var t = l.default.segment(this._semiArc.start, this._semiArc.end).middle();
											if (this.sameCenterRequired) {
												var n = l.default.vector(this._semiArc.center, t);
												this.arcRadius = Math.sqrt(Math.pow(e / 2, 2) + Math.pow(n.length, 2));
											} else {
												var r = h.ArcUtils.CreateArcFrom3Points(
													t.translate(e / 2, 0),
													t.translate(-e / 2, 0),
													this._semiArc.middle(),
												);
												this.validateSemiArc(r) &&
													((this.arcCenter = r.center), (this.arcRadius = r.r.valueOf()));
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'chordHeight', {
										get: function () {
											return this._semiArc.chordHeight();
										},
										set: function (e) {
											var t = l.default.segment(this._semiArc.start, this._semiArc.end).middle();
											if (this.sameCenterRequired) {
												var n = l.default.vector(this._semiArc.center, t),
													r = l.default.vector(t, this._semiArc.middle()).normalize().multiply(e);
												this.arcRadius = n.add(r).length;
											} else {
												var i = h.ArcUtils.CreateArcFrom3Points(
													this._semiArc.start,
													this._semiArc.end,
													t.translate(0, -e),
												);
												this.validateSemiArc(i) &&
													((this.arcCenter = i.center), (this.arcRadius = i.r.valueOf()));
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.split = function (e, t) {
										var n = this;
										this.initVariables(e);
										var r = this.polygon.split(this._cutCircle, t),
											i = r.shift();
										this._semiArc = r[0].mulShape;
										var o = this.placeMiddleCrossties(i, this.middleCrosstiesCount, t),
											s = a(r, o),
											l = s.filter(function (e) {
												return e.IsMullion;
											});
										l.forEach(function (e, t) {
											(e.spLine.line = n.clone()), (e.spLine.line.innerEdgeIdx = t);
										});
										var h = s.filter(function (e) {
											return !e.IsMullion;
										});
										return (
											h.forEach(function (e, t) {
												e.polyId.pos = t;
											}),
											a(h, l)
										);
									}),
									(t.prototype.initVariables = function (e) {
										(this.polygon = e),
											(this._outerTopEdge = this.findOuterEdge(p.Direction.Down)),
											(this._outerBottomEdge = this.findOuterEdge(p.Direction.Up)),
											(this._cutCircle = this.makeCutCircle());
									}),
									(t.prototype.bridgeSemiArcEndpoints = function (e, t, n) {
										var r = this,
											i = [],
											o = e;
										return (
											[p.Direction.Left, p.Direction.Right].forEach(function (e, s) {
												var h = 1 === s,
													c = r.endPointOfArcBar(t, e),
													u = r.endPointOfTopEdge(r._outerTopEdge, e),
													f = l.default.segment(c, u),
													d = f
														.tangentInStart()
														.angleTo(l.default.vector(e === p.Direction.Left ? -1 : 1, 0)),
													g = l.default.Utils.EQ_0(d) ? n : n / Math.cos(d),
													y = r.expandSegment(f, 2 * n).translate(0, g / 2);
												i.push.apply(i, a(o.split(y, n))), h || (o = i.pop());
											}),
											i
										);
									}),
									(t.prototype.placeMiddleCrossties = function (e, t, n) {
										if (0 === t) return [e];
										for (
											var r = [],
												i = this._semiArc,
												o = 2 * Math.asin(n / 2 / i.r.valueOf()),
												s = (this.totalAngleOfArc(i) - o * t) / (t + 1),
												h = (i.counterClockwise ? i.startAngle : i.endAngle) - o / 2,
												c = e,
												u = function (e) {
													var u = e === t - 1,
														f = h + (s + o) * (e + 1),
														d = l.default
															.point(p.polygon.box.xmin, p.polygon.box.ymin)
															.distanceTo(i.center)[0],
														g = l.default.segment(
															i.center,
															i.center.translate(i.r.valueOf() + d, 0),
														);
													g = g.rotate(f, i.center);
													var y = c.split(g, n),
														m = l.default.line(g.start, g.end),
														v = y.filter(function (e) {
															return e.IsMullion;
														}),
														w = y
															.filter(function (e) {
																return !e.IsMullion;
															})
															.sort(function (e, t) {
																return (
																	(e.box.center.leftTo(m) ? 1 : 0) -
																	(t.box.center.leftTo(m) ? 1 : 0)
																);
															});
													u || (c = w.pop()), r.push.apply(r, a(v)), r.push.apply(r, a(w));
												},
												p = this,
												f = 0;
											f < t;
											f++
										)
											u(f);
										return r;
									}),
									(t.prototype.findOuterEdge = function (e) {
										return this.polygon.edges[p.EdgeFinder.Instance.findIndex(e, this.polygon)];
									}),
									Object.defineProperty(t.prototype, 'sameCenterRequired', {
										get: function () {
											return (
												this._outerTopEdge instanceof l.default.Arc && this.sameWithOuterArcCenter
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, '_outerSemiArc', {
										get: function () {
											return this._outerTopEdge;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.findCutCircleCenter = function () {
										return this.sameCenterRequired
											? this._outerSemiArc.center
											: this.arcCenter
											? ((this.arcCenter.x = (this.polygon.box.xmax + this.polygon.box.xmin) / 2),
											  this.arcCenter)
											: this._outerTopEdge instanceof l.default.Arc
											? this._outerTopEdge.center
											: this._outerBottomEdge.middle();
									}),
									(t.prototype.findCutCircleRadius = function () {
										return -1 !== this.arcRadius
											? this.arcRadius
											: this._outerTopEdge instanceof l.default.Arc
											? this._outerSemiArc.r.valueOf() - 400
											: this._outerBottomEdge.length / 4;
									}),
									(t.prototype.makeCutCircle = function () {
										return (
											(this.arcCenter = this.findCutCircleCenter()),
											(this.arcRadius = this.findCutCircleRadius()),
											l.default.arc(
												this.arcCenter,
												this.arcRadius,
												Math.PI / 2 - 0.1,
												Math.PI / 2 + 0.1,
												!1,
											)
										);
									}),
									(t.prototype.endPointOfArcBar = function (e, t) {
										var n = e.edges
												.filter(function (e) {
													return e instanceof l.default.Arc;
												})
												.sort(function (e, t) {
													return t.r.valueOf() - e.r.valueOf();
												})[0],
											r = [n.start, n.end].sort(function (e, t) {
												return e.x - t.x;
											});
										return t === p.Direction.Left ? r[0] : r[1];
									}),
									(t.prototype.endPointOfTopEdge = function (e, t) {
										var n = [e.start, e.end].sort(function (e, t) {
											return e.x - t.x;
										});
										return t === p.Direction.Left ? n[0] : n[1];
									}),
									(t.prototype.expandSegment = function (e, t) {
										return l.default.segment(
											e.start.translate(e.tangentInEnd().multiply(t)),
											e.end.translate(e.tangentInStart().multiply(t)),
										);
									}),
									(t.prototype.totalAngleOfArc = function (e) {
										var t = e.startAngle,
											n = e.endAngle;
										return e.counterClockwise
											? n < t
												? n - t + 2 * Math.PI
												: n - t
											: t < n
											? t - n + 2 * Math.PI
											: t - n;
									}),
									(t.prototype.toJSON = function () {
										return {
											name: this.type,
											l: this.location.toJSON(),
											swoac: this.sameWithOuterArcCenter,
											ac: this.arcCenter.toJSON(),
											ar: this.arcRadius,
											mcc: this.middleCrosstiesCount,
										};
									}),
									(t.deserialize = function (e) {
										var n = new t(l.default.point(e.l.x, e.l.y));
										return (
											(n.sameWithOuterArcCenter = e.swoac),
											(n.arcCenter = l.default.point(e.ac.x, e.ac.y)),
											(n.arcRadius = e.ar),
											(n.middleCrosstiesCount = e.mcc),
											n
										);
									}),
									(t.prototype.clone = function () {
										var e = new t(
											this.location,
											this.sameWithOuterArcCenter,
											this.arcCenter,
											this.arcRadius,
											this.middleCrosstiesCount,
										);
										return (e._semiArc = this._semiArc), (e.innerEdgeIdx = this.innerEdgeIdx), e;
									}),
									(t.prototype.translate = function (e) {
										(this.location = this.location.translate(e)),
											(this.arcCenter = this.arcCenter.translate(e));
									}),
									(t.prototype.drag = function (e, t, n) {
										return (
											this.sameCenterRequired
												? 0 === n.polyId.pos && (this.arcRadius += t.dot(l.default.vector(0, -1)))
												: (this.arcCenter = this.arcCenter.translate(
														t.projectionOn(l.default.vector(0, -1)),
												  )),
											this
										);
									}),
									(t.prototype.dragArc = function (e, t, n) {
										if (this.sameCenterRequired) return this;
										var r = h.ArcUtils.CreateArcFrom3Points(
											this._semiArc.start,
											this._semiArc.end,
											n,
										);
										return this.validateSemiArc(r)
											? ((this.arcCenter = r.center), (this.arcRadius = r.r.valueOf()), this)
											: this;
									}),
									(t.prototype.validateSemiArc = function (e) {
										var t = l.default.segment(e.start, e.end).middle();
										return e.middle().y < t.y;
									}),
									(t.prototype.dragVertex = function (e, t, n) {
										if (this.sameCenterRequired) return this;
										var r = l.default.segment(this._semiArc.start, this._semiArc.end).middle(),
											i = t.projectionOn(l.default.vector(1, 0)),
											o = n.x > r.x,
											a = this._semiArc.start.translate(o ? i : i.invert()),
											s = this._semiArc.end.translate(o ? i.invert() : i),
											c = h.ArcUtils.CreateArcFrom3Points(a, s, this._semiArc.middle());
										return (this.arcCenter = c.center), (this.arcRadius = c.r.valueOf()), this;
									}),
									(t.prototype.rotate = function (e, t) {
										return this;
									}),
									t
								);
							})(u.CutLine);
						t.SemiArc = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SemiArcPro = void 0);
						var l = s(n(0)),
							h = n(9),
							c = n(5),
							u = n(2),
							p = n(1),
							f = n(11),
							d = n(29),
							g = (function (e) {
								function t(t, n, r, i, o, a, s, h, c) {
									void 0 === n && (n = !1),
										void 0 === i && (i = -1),
										void 0 === o && (o = -1),
										void 0 === a && (a = 1),
										void 0 === s && (s = []),
										void 0 === c && (c = !1);
									var u = e.call(this, d.CutLineType.semiArcPro) || this;
									return (
										(u.location = t),
										(u.sameWithOuterArcCenter = n),
										(u.arcCenter = r),
										(u.arcRadius = i),
										(u.arcAngle = o),
										(u.middleCrosstiesCount = a),
										(u.middleCrosstiesRatio = s),
										(u.sideCrosstiesHidden = h),
										(u.horizontallySideCrossties = c),
										(u.sideSpace = 0),
										(u.innerArcExtend = 90),
										(u.polygon = new p.WinPolygon()),
										(u._semiArc = l.default.arc()),
										u
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'start', {
										get: function () {
											return this._semiArc.start;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'end', {
										get: function () {
											return this._semiArc.end;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pt', {
										get: function () {
											return this.location;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mpt', {
										get: function () {
											return this._semiArc.middle();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return 1 === this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return 1 === this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showArc', {
										get: function () {
											return 1 === this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'chordLength', {
										get: function () {
											return this._semiArc.start.distanceTo(this._semiArc.end)[0];
										},
										set: function (e) {
											var t = l.default.segment(this._semiArc.start, this._semiArc.end).middle();
											if (this.sameCenterRequired) {
												var n = l.default.vector(this._semiArc.center, t),
													r = n.dot(l.default.vector(0, -1));
												return (
													(this.arcRadius = Math.sqrt(Math.pow(e / 2, 2) + Math.pow(n.length, 2))),
													(this.arcAngle = 2 * Math.acos(n.length / this.arcRadius)),
													void (r < 0 && (this.arcAngle = 2 * Math.PI - this.arcAngle))
												);
											}
											var i = h.ArcUtils.CreateArcFrom3Points(
												t.translate(e / 2, 0),
												t.translate(-e / 2, 0),
												this._semiArc.middle(),
											);
											(this.arcCenter = i.center),
												(this.arcRadius = i.r.valueOf()),
												(this.arcAngle = u.Utils.totalAngleOfArc(i));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'chordHeight', {
										get: function () {
											return this._semiArc.chordHeight();
										},
										set: function (e) {
											var t = l.default.segment(this._semiArc.start, this._semiArc.end).middle();
											if (this.sameCenterRequired) {
												var n = l.default.vector(this._semiArc.center, t),
													r = n.dot(l.default.vector(0, -1)),
													i = l.default.vector(t, this._semiArc.middle()).normalize().multiply(e);
												return (
													(this.arcRadius = n.add(i).length),
													(this.arcAngle = 2 * Math.acos(n.length / this.arcRadius)),
													void (r < 0 && (this.arcAngle = 2 * Math.PI - this.arcAngle))
												);
											}
											var o = h.ArcUtils.CreateArcFrom3Points(
												this._semiArc.start,
												this._semiArc.end,
												t.translate(0, -e),
											);
											this.validateSemiArc(o) &&
												((this.arcCenter = o.center),
												(this.arcRadius = o.r.valueOf()),
												(this.arcAngle = u.Utils.totalAngleOfArc(o)));
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.split = function (e, t) {
										this.initVariables(e);
										var n = this.makeTrackArea(t),
											r = this.placeMiddleCrossties(n.track, this.middleCrosstiesCount, t);
										return this.returnFormat(a(n.inner, r, n.side));
									}),
									(t.prototype.makeTrackArea = function (e) {
										var t = this.splitByInnerArc(e),
											n = t.shift(),
											r = t[1],
											i = [];
										return (
											this.sideCrosstiesHidden ||
												(n = (i = this.bridgeSemiArcEndpoints(n, r, e)).splice(2, 1)[0]),
											{
												inner: t,
												side: i,
												track: n,
											}
										);
									}),
									(t.prototype.returnFormat = function (e) {
										var t = this,
											n = e.filter(function (e) {
												return e.IsMullion;
											});
										n.forEach(function (e, n) {
											(e.spLine.line = t.clone()),
												(e.spLine.line.innerEdgeIdx = n),
												(e.editTool = c.ToolType.editInnerSplitter);
										});
										var r = e.filter(function (e) {
											return !e.IsMullion;
										});
										return (
											r.forEach(function (e, t) {
												e.polyId.pos = t;
											}),
											a(r, n)
										);
									}),
									(t.prototype.initVariables = function (e) {
										(this.polygon = e),
											(this._outerTopEdge = this.findOuterTopEdge()),
											(this._semiArc = this.makeSemiArc());
									}),
									(t.prototype.splitByInnerArc = function (e) {
										var t = [];
										t.push(
											l.default.segment(
												this._semiArc.start.translate(0, this.innerArcExtend),
												this._semiArc.start,
											),
										),
											t.push(this._semiArc),
											t.push(
												l.default.segment(
													this._semiArc.end,
													this._semiArc.end.translate(0, this.innerArcExtend),
												),
											),
											(this.sideSpace = this._semiArc.end.x - this.polygon.box.xmin);
										var n = new d.SimpleInnerArc(-1, t),
											r = new d.SimpleLineCut(this.polygon, n),
											i = r.split(e);
										if (
											this._outerTopEdge instanceof l.default.Segment ||
											this.sameWithOuterArcCenter ||
											void 0 === this.offsetOfArcs
										)
											return i;
										var o = i.find(function (e) {
												return e.mulShape instanceof l.default.Arc;
											}).edges[3].start.y,
											a = this._outerSemiArc.start.y,
											s = l.default.vector(0, a - o + this.offsetOfArcs);
										return n.translate(s), (r = new d.SimpleLineCut(this.polygon, n)).split(e);
									}),
									(t.prototype.bridgeSemiArcEndpoints = function (e, t, n) {
										var r = this,
											i = [],
											s = e;
										return (
											[f.Direction.Left, f.Direction.Right].forEach(function (e, h) {
												var c,
													u = 1 === h,
													p = r.endPointOfArcBar(t, e);
												if (r.horizontallySideCrossties) {
													var d = l.default.point(
															e === f.Direction.Left ? r.polygon.box.xmin : r.polygon.box.xmax,
															p.y,
														),
														g = l.default.segment(p, d);
													c = r.expandSegment(g.translate(0, n / 2), n);
												} else {
													var y = r.endPointOfTopEdge(r._outerTopEdge, e),
														m = (g = l.default.segment(p, y))
															.tangentInStart()
															.angleTo(l.default.vector(e === f.Direction.Left ? -1 : 1, 0)),
														v = l.default.Utils.EQ_0(m) ? n : n / Math.cos(m);
													c = r.expandSegment(g, 2 * n).translate(0, v / 2);
												}
												var w = o(r.splitBySegment(s, c, n), 2),
													b = w[0],
													S = w[1];
												u || (s = S.pop()), i.push.apply(i, a(S)), i.push.apply(i, a(b));
											}),
											i
										);
									}),
									(t.prototype.placeMiddleCrossties = function (e, t, n) {
										if (0 === t) return [e];
										var r = [],
											i = this._semiArc,
											s = 2 * Math.asin(n / 2 / i.r.valueOf()),
											h = u.Utils.totalAngleOfArc(i),
											c = (h - s * t) / (t + 1),
											p = (i.counterClockwise ? i.startAngle : i.endAngle) - s / 2,
											f = Array(t + 1).fill(c);
										if (this.middleCrosstiesRatio.length === t + 1) {
											var d = this.middleCrosstiesRatio.reduce(function (e, t) {
												return e + t;
											});
											f = (f = this.middleCrosstiesRatio.map(function (e) {
												return e / d;
											})).map(function (e) {
												return e * (h - s * t);
											});
										}
										for (var g = e, y = p, m = 0; m < t; m++) {
											var v = m === t - 1;
											y += f[m] + s;
											var w = l.default
													.point(this.polygon.box.xmin, this.polygon.box.ymin)
													.distanceTo(i.center)[0],
												b = l.default.segment(i.center, i.center.translate(i.r.valueOf() + w, 0));
											b = b.rotate(y, i.center);
											var S = o(this.splitBySegment(g, b, n), 2),
												_ = S[0],
												P = S[1];
											v || (g = P.pop()), r.push.apply(r, a(P)), r.push.apply(r, a(_));
										}
										return r;
									}),
									(t.prototype.findOuterTopEdge = function () {
										return this.polygon.edges[
											f.EdgeFinder.Instance.findIndex(f.Direction.Down, this.polygon)
										];
									}),
									Object.defineProperty(t.prototype, 'sameCenterRequired', {
										get: function () {
											return (
												this._outerTopEdge instanceof l.default.Arc && this.sameWithOuterArcCenter
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, '_outerSemiArc', {
										get: function () {
											return this._outerTopEdge;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.findSemiArcCenter = function () {
										return this.sameCenterRequired
											? this._outerSemiArc.center
											: this.arcCenter
											? ((this.arcCenter.x = (this.polygon.box.xmax + this.polygon.box.xmin) / 2),
											  this.arcCenter)
											: this._outerTopEdge instanceof l.default.Arc
											? this._outerTopEdge.center.translate(0, -400)
											: this.polygon.box.center;
									}),
									(t.prototype.findSemiArcRadius = function () {
										return -1 !== this.arcRadius
											? this.arcRadius
											: this._outerTopEdge instanceof l.default.Arc
											? this._outerSemiArc.r.valueOf() - 800
											: (this.polygon.box.ymax - this.polygon.box.ymin) / 4;
									}),
									(t.prototype.findSemiArcAngle = function () {
										return -1 !== this.arcAngle
											? this.arcAngle
											: this.sameCenterRequired || this._outerTopEdge instanceof l.default.Arc
											? u.Utils.totalAngleOfArc(this._outerSemiArc)
											: Math.PI;
									}),
									(t.prototype.makeSemiArc = function () {
										(this.arcCenter = this.findSemiArcCenter()),
											(this.arcRadius = this.findSemiArcRadius()),
											(this.arcAngle = this.findSemiArcAngle());
										var e = this.arcAngle / 2;
										return l.default.arc(
											this.arcCenter,
											this.arcRadius,
											(2 * Math.PI - (Math.PI / 2 - e)) % (2 * Math.PI),
											Math.PI + (Math.PI / 2 - e),
											!1,
										);
									}),
									(t.prototype.endPointOfArcBar = function (e, t) {
										var n = e.edges
												.filter(function (e) {
													return e instanceof l.default.Arc;
												})
												.sort(function (e, t) {
													return t.r.valueOf() - e.r.valueOf();
												})[0],
											r = [n.start, n.end].sort(function (e, t) {
												return e.x - t.x;
											});
										return t === f.Direction.Left ? r[0] : r[1];
									}),
									(t.prototype.endPointOfTopEdge = function (e, t) {
										var n = [e.start, e.end].sort(function (e, t) {
											return e.x - t.x;
										});
										return t === f.Direction.Left ? n[0] : n[1];
									}),
									(t.prototype.expandSegment = function (e, t) {
										return l.default.segment(
											e.start.translate(e.tangentInEnd().multiply(t)),
											e.end.translate(e.tangentInStart().multiply(t)),
										);
									}),
									(t.prototype.splitBySegment = function (e, t, n) {
										var r = e.split(t, n),
											i = l.default.line(t.start, t.end),
											o = r.filter(function (e) {
												return e.IsMullion;
											}),
											a = r
												.filter(function (e) {
													return !e.IsMullion;
												})
												.sort(function (e, t) {
													var n = f.EdgeFinder.Instance.connectedEdgeIndex(e, o[0]),
														r = f.EdgeFinder.Instance.connectedEdgeIndex(t, o[0]),
														a = e.edge(n).middle(),
														s = t.edge(r).middle();
													return (a.leftTo(i) ? 1 : 0) - (s.leftTo(i) ? 1 : 0);
												});
										return [o, a];
									}),
									(t.prototype.toJSON = function () {
										return {
											name: this.type,
											l: this.location.toJSON(),
											swoac: this.sameWithOuterArcCenter,
											ac: this.arcCenter.toJSON(),
											ar: this.arcRadius,
											aa: this.arcAngle,
											mcc: this.middleCrosstiesCount,
											mcr: this.middleCrosstiesRatio,
											sch: this.sideCrosstiesHidden,
											hsc: this.horizontallySideCrossties,
											ooa: this.offsetOfArcs,
										};
									}),
									(t.deserialize = function (e) {
										var n = new t(l.default.point(e.l.x, e.l.y));
										return (
											(n.sameWithOuterArcCenter = e.swoac),
											(n.arcCenter = l.default.point(e.ac.x, e.ac.y)),
											(n.arcRadius = e.ar),
											(n.arcAngle = e.aa),
											(n.middleCrosstiesCount = e.mcc),
											(n.middleCrosstiesRatio = e.mcr ? e.mcr : []),
											(n.sideCrosstiesHidden = e.sch),
											(n.horizontallySideCrossties = e.hsc),
											void 0 !== e.ooa && (n.offsetOfArcs = e.ooa),
											n
										);
									}),
									(t.prototype.clone = function () {
										var e = new t(
											this.location,
											this.sameWithOuterArcCenter,
											this.arcCenter,
											this.arcRadius,
											this.arcAngle,
											this.middleCrosstiesCount,
											this.middleCrosstiesRatio,
											this.sideCrosstiesHidden,
											this.horizontallySideCrossties,
										);
										return (e._semiArc = this._semiArc), (e.innerEdgeIdx = this.innerEdgeIdx), e;
									}),
									(t.prototype.translate = function (e) {
										(this.location = this.location.translate(e)),
											(this.arcCenter = this.arcCenter.translate(e));
									}),
									(t.prototype.drag = function (e, t, n) {
										return (
											this.sameCenterRequired
												? 1 === n.polyId.pos && (this.arcRadius += t.dot(l.default.vector(0, -1)))
												: (this.arcCenter = this.arcCenter.translate(
														t.projectionOn(l.default.vector(0, -1)),
												  )),
											this
										);
									}),
									(t.prototype.dragArc = function (e, t, n) {
										if (this.sameCenterRequired) return this;
										var r = h.ArcUtils.CreateArcFrom3Points(
											this._semiArc.start,
											this._semiArc.end,
											n,
										);
										return this.validateSemiArc(r)
											? ((this.arcCenter = r.center),
											  (this.arcRadius = r.r.valueOf()),
											  (this.arcAngle = u.Utils.totalAngleOfArc(r)),
											  this)
											: this;
									}),
									(t.prototype.dragInnerEdge = function (e, t, n, r) {
										return (
											this.sameCenterRequired
												? 1 === e && (this.arcRadius += t.dot(l.default.vector(0, -1)))
												: (this.arcCenter = this.arcCenter.translate(
														t.projectionOn(l.default.vector(0, -1)),
												  )),
											this
										);
									}),
									(t.prototype.validateSemiArc = function (e) {
										var t = l.default.segment(e.start, e.end).middle();
										return e.middle().y < t.y;
									}),
									(t.prototype.dragVertex = function (e, t, n) {
										if (this.sameCenterRequired) return this;
										var r = l.default.segment(this._semiArc.start, this._semiArc.end).middle(),
											i = t.projectionOn(l.default.vector(1, 0)),
											o = n.x > r.x,
											a = this._semiArc.start.translate(o ? i : i.invert()),
											s = this._semiArc.end.translate(o ? i.invert() : i),
											c = h.ArcUtils.CreateArcFrom3Points(a, s, this._semiArc.middle());
										return (
											(this.arcCenter = c.center),
											(this.arcRadius = c.r.valueOf()),
											(this.arcAngle = u.Utils.totalAngleOfArc(c)),
											this
										);
									}),
									(t.prototype.rotate = function (e, t) {
										return this;
									}),
									t
								);
							})(d.CutLine);
						t.SemiArcPro = g;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SemiArcPro2 = void 0);
						var l = s(n(0)),
							h = n(1),
							c = n(9),
							u = n(29),
							p = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (
										(t.type = u.CutLineType.semiArcPro2),
										(t.horizontallySideCrossties = !0),
										(t.trackAreaHeight = 0),
										(t.sideAreaWidth = 0),
										(t.mulSize = 0),
										(t.frmSize = 0),
										t
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'dimHiddenPos', {
										get: function () {
											return [0];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.split = function (e, t, n) {
										if (
											(void 0 === n && (n = 0),
											(this.polygon = e),
											(this.mulSize = t),
											(this.frmSize = n),
											!this.validBoundary())
										)
											return [];
										this.initVariables();
										var r = this.makeOuterSemiArc();
										this._semiArc = this.makeInnerSemiArc(r);
										var i = this.makeTrackArea(this.mulSize),
											o = i.track,
											s = this.arcOffset(r, this.mulSize / 2),
											l = this.arcOffset(r, -this.mulSize / 2),
											h = this.closeShape(s, l),
											c = l.middle(),
											u = this.cutByBoundary(h, o, c);
										u.mulShape = r;
										var p = this.cutByPolygon(o, h);
										o = p.find(function (e) {
											return e.contains(c);
										});
										var f = p.filter(function (e) {
												return e !== o;
											}),
											d = this.placeMiddleCrossties(o, this.middleCrosstiesCount, this.mulSize);
										return this.returnFormat(a([u], i.inner, i.side, d, f));
									}),
									(t.prototype.dragInnerEdge = function (e, t) {
										return (
											4 === e
												? (this.trackAreaHeight += t.y)
												: 1 === e
												? (this.sideAreaWidth += t.x)
												: 2 === e
												? (this.sideAreaWidth += t.length * (t.y > 0 ? 1 : -1))
												: 3 === e && (this.sideAreaWidth -= t.x / 2),
											this
										);
									}),
									(t.prototype.toJSON = function () {
										return {
											name: this.type,
											l: this.location.toJSON(),
											mcc: this.middleCrosstiesCount,
											mcr: this.middleCrosstiesRatio,
											tah: this.trackAreaHeight,
											saw: this.sideAreaWidth,
										};
									}),
									(t.deserialize = function (e) {
										var n = new t(l.default.point(e.l.x, e.l.y));
										return (
											(n.middleCrosstiesCount = e.mcc),
											(n.middleCrosstiesRatio = e.mcr ? e.mcr : []),
											(n.trackAreaHeight = e.tah),
											(n.sideAreaWidth = e.saw),
											n
										);
									}),
									(t.prototype.clone = function () {
										var e = new t(
											this.location,
											this.sameWithOuterArcCenter,
											this.arcCenter,
											this.arcRadius,
											this.arcAngle,
											this.middleCrosstiesCount,
											this.middleCrosstiesRatio,
											this.sideCrosstiesHidden,
											this.horizontallySideCrossties,
										);
										return (
											(e._semiArc = this._semiArc),
											(e.innerEdgeIdx = this.innerEdgeIdx),
											(e.trackAreaHeight = this.trackAreaHeight),
											(e.sideAreaWidth = this.sideAreaWidth),
											e
										);
									}),
									(t.prototype.validBoundary = function () {
										var e = this.polygon.box,
											t = e.ymax - e.ymin;
										return e.xmax - e.xmin > 1200 && t > 1300;
									}),
									(t.prototype.initVariables = function () {
										var e = this.polygon.box,
											t = e.xmax - e.xmin,
											n = e.ymax - e.ymin;
										this.trackAreaHeight ||
											(this.trackAreaHeight = n > t / 2 + 300 ? t / 2 : n - 300),
											this.sideAreaWidth || (this.sideAreaWidth = 600);
									}),
									(t.prototype.makeInnerSemiArc = function (e) {
										var t = this.sideAreaWidth - this.frmSize - this.mulSize / 2,
											n = l.default.Arc.arcSE(
												e.center,
												e.start.translate(t, 0),
												e.end.translate(-t, 0),
												!0,
											),
											r = l.default.segment(n.start.translate(0, 90), n.start),
											i = l.default.segment(n.end, n.end.translate(0, 90)),
											o = [r, n, i];
										return c.Frametify.findParallelEdges(
											o,
											Array(3).fill(this.mulSize / 2),
											!0,
											l.default.ORIENTATION.CCW,
											!1,
										)[1];
									}),
									(t.prototype.makeOuterSemiArc = function () {
										var e = this.polygon.box,
											t = e.ymin + this.trackAreaHeight - this.frmSize - this.mulSize / 2,
											n = l.default.point(e.xmin, t),
											r = l.default.point(e.xmax, t);
										return c.ArcUtils.CreateArcFrom3Points(
											n,
											r,
											l.default.point(e.center.x, e.ymin),
										);
									}),
									(t.prototype.arcOffset = function (e, t) {
										return l.default.arc(e.center, e.r.valueOf() + t, e.startAngle, e.endAngle);
									}),
									(t.prototype.closeShape = function (e, t) {
										return (
											(t = t.reverse()),
											new h.WinPolygon([
												e,
												l.default.segment(e.end, t.start),
												t,
												l.default.segment(t.end, e.start),
											])
										);
									}),
									(t.prototype.cut = function (e, t, n) {
										var r = new l.default.Multiline([t]),
											i = e.intersect(t);
										return (
											(r = r.split(i)),
											e.cut(r).find(function (e) {
												return e.contains(n);
											}) || e
										);
									}),
									(t.prototype.boundary = function (e) {
										var t = e.box;
										return {
											bottom: l.default.line(l.default.point(0, t.ymax), l.default.vector(0, 1)),
											top: l.default.line(l.default.point(0, t.ymin), l.default.vector(0, 1)),
											left: l.default.line(l.default.point(t.xmin, 0), l.default.vector(1, 0)),
											right: l.default.line(l.default.point(t.xmax, 0), l.default.vector(1, 0)),
										};
									}),
									(t.prototype.cutByBoundary = function (e, t, n) {
										var r = e.polygon.clone(),
											i = this.boundary(t);
										return (
											(r = this.cut(r, i.bottom, n)),
											(r = this.cut(r, i.top, n)),
											(r = this.cut(r, i.left, n)),
											(r = this.cut(r, i.right, n)),
											this.fPolygonToWinPolygon(r)
										);
									}),
									(t.prototype.cutByPolygon = function (e, t) {
										var n = this,
											r = e.polygon.clone(),
											i = t.polygon.clone();
										e.orientation !== t.orientation && (i = i.reverse());
										var o = l.default.BooleanOperations.subtract(r, i);
										return Array.from(o.faces)
											.map(function (e) {
												var t = new l.default.Polygon();
												return t.addFace(e), t;
											})
											.map(function (e) {
												return n.fPolygonToWinPolygon(e);
											});
									}),
									(t.prototype.fPolygonToWinPolygon = function (e) {
										return new h.WinPolygon(Array.from(e.faces)[0].shapes);
									}),
									t
								);
							})(u.SemiArcPro);
						t.SemiArcPro2 = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SemiSegmentPro = void 0);
						var l = s(n(0)),
							h = n(5),
							c = n(1),
							u = n(11),
							p = n(29),
							f = (function (e) {
								function t(t, n, r, i, o, a) {
									void 0 === r && (r = 400),
										void 0 === i && (i = 1),
										void 0 === o && (o = []),
										void 0 === a && (a = !1);
									var s = e.call(this, p.CutLineType.semiSegmentPro) || this;
									return (
										(s.location = t),
										(s.segmentMiddle = n),
										(s.segmentLength = r),
										(s.middleCrosstiesCount = i),
										(s.middleCrosstiesRatio = o),
										(s.sideCrosstiesHidden = a),
										(s.polygon = new c.WinPolygon()),
										(s.profileSieze = 90),
										(s._semiSegment = l.default.segment()),
										s
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'start', {
										get: function () {
											return this._semiSegment.start;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'end', {
										get: function () {
											return this._semiSegment.end;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pt', {
										get: function () {
											return this.location;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mpt', {
										get: function () {
											return this._semiSegment.middle();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return 1 === this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return 1 === this.innerEdgeIdx;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showArc', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'width', {
										get: function () {
											return 2 * this.segmentLength;
										},
										set: function (e) {
											this.segmentLength = e / 2;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'height', {
										get: function () {
											return Math.round(this.polygon.box.ymax - this.segmentMiddle.y);
										},
										set: function (e) {
											var t = Math.round(e - this.height);
											(this._semiSegment = this._semiSegment.translate(0, -t)),
												(this.segmentMiddle = this._semiSegment.middle());
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.split = function (e, t) {
										this.initVariables(e), (this.profileSieze = t);
										var n = this.makeTrackArea(t),
											r = this.placeMiddleCrossties(n.track, this.middleCrosstiesCount, t);
										return this.returnFormat(a(n.inner, r, n.side));
									}),
									(t.prototype.makeTrackArea = function (e) {
										var t = this.splitByInnerSegment(e),
											n = t.shift(),
											r = t[1],
											i = [];
										return (
											this.sideCrosstiesHidden ||
												(n = (i = this.bridgeSemiSegmentEndpoints(n, r, e)).splice(2, 1)[0]),
											{
												inner: t,
												side: i,
												track: n,
											}
										);
									}),
									(t.prototype.returnFormat = function (e) {
										var t = this,
											n = e.filter(function (e) {
												return e.IsMullion;
											});
										n.forEach(function (e, n) {
											(e.spLine.line = t.clone()),
												(e.spLine.line.innerEdgeIdx = n),
												(e.editTool = h.ToolType.editInnerSplitter);
										});
										var r = e.filter(function (e) {
											return !e.IsMullion;
										});
										return (
											r.forEach(function (e, t) {
												e.polyId.pos = t;
											}),
											a(r, n)
										);
									}),
									(t.prototype.initVariables = function (e) {
										if (
											((this.polygon = e),
											(this._outerTopEdge = this.findOuterTopEdge()),
											void 0 !== this.segmentMiddle)
										)
											this._semiSegment = l.default.segment(
												this.segmentMiddle.translate(-this.segmentLength, 0),
												this.segmentMiddle.translate(this.segmentLength, 0),
											);
										else {
											var t = this.polygon.box.center;
											(this._semiSegment = l.default.segment(
												t.translate(-this.segmentLength, 0),
												t.translate(this.segmentLength, 0),
											)),
												(this.segmentMiddle = this._semiSegment.middle());
										}
									}),
									(t.prototype.splitByInnerSegment = function (e) {
										var t = [];
										t.push(
											l.default.segment(
												this._semiSegment.start.translate(0, 90),
												this._semiSegment.start,
											),
										),
											t.push(this._semiSegment),
											t.push(
												l.default.segment(
													this._semiSegment.end,
													this._semiSegment.end.translate(0, 90),
												),
											);
										var n = new p.SimpleLine(t);
										return new p.SimpleLineCut(this.polygon, n).split(e);
									}),
									(t.prototype.bridgeSemiSegmentEndpoints = function (e, t, n) {
										var r = this,
											i = [],
											s = e;
										return (
											[u.Direction.Left, u.Direction.Right].forEach(function (e, h) {
												var c,
													p = 1 === h,
													f = r.endPointOfSegmentBar(t, e),
													d = r.endPointOfTopEdge(r._outerTopEdge, e),
													g = l.default.segment(f, d),
													y = g
														.tangentInStart()
														.angleTo(l.default.vector(e === u.Direction.Left ? -1 : 1, 0)),
													m = l.default.Utils.EQ_0(y) ? n : n / Math.cos(y);
												c = r.expandSegment(g, 2 * n).translate(0, m / 2);
												var v = o(r.splitBySegment(s, c, n), 2),
													w = v[0],
													b = v[1];
												p || (s = b.pop()), i.push.apply(i, a(b)), i.push.apply(i, a(w));
											}),
											i
										);
									}),
									(t.prototype.placeMiddleCrossties = function (e, t, n) {
										if (0 === t) return [e];
										var r = this._outerTopEdge,
											i = [],
											s = this._semiSegment;
										if (void 0 === r) return [e];
										if (r instanceof l.default.Segment)
											for (
												var h = this.splitSegmentPoints(r, n),
													c = this.splitSegmentPoints(s, n),
													u = e,
													p = 0;
												p < t;
												p++
											) {
												var f = p === t - 1,
													d = this.expandSegment(l.default.segment(c[p], h[p]), n),
													g = o(this.splitBySegment(u, d, n), 2),
													y = g[0],
													m = g[1];
												f || (u = m.pop()), i.push.apply(i, a(m)), i.push.apply(i, a(y));
											}
										else if (r instanceof l.default.Arc) {
											var v = this.totalAngleOfArc(r),
												w = r.r.valueOf(),
												b = Math.acos(1 - Math.pow(n, 2) / (2 * Math.pow(w, 2))),
												S = (v - b * t) / (t + 1),
												_ = (r.counterClockwise ? r.startAngle : r.endAngle) - b / 2,
												P = Array(t + 1).fill(S);
											if (this.middleCrosstiesRatio.length === t + 1) {
												var x = this.middleCrosstiesRatio.reduce(function (e, t) {
													return e + t;
												});
												P = (P = this.middleCrosstiesRatio.map(function (e) {
													return e / x;
												})).map(function (e) {
													return e * (v - b * t);
												});
											}
											u = e;
											var D = _;
											for (p = 0; p < t; p++) {
												(f = p === t - 1), (D += P[p] + b);
												var T = l.default
														.point(this.polygon.box.xmin, this.polygon.box.ymin)
														.distanceTo(r.center)[0],
													O = l.default.segment(r.center, r.center.translate(r.r.valueOf() + T, 0));
												O = O.rotate(D, r.center);
												var M = o(this.splitBySegment(u, O, n), 2);
												(y = M[0]),
													(m = M[1]),
													f || (u = m.pop()),
													i.push.apply(i, a(m)),
													i.push.apply(i, a(y));
											}
										}
										return i;
									}),
									(t.prototype.findOuterTopEdge = function () {
										return this.polygon.edges[
											u.EdgeFinder.Instance.findIndex(u.Direction.Down, this.polygon)
										];
									}),
									(t.prototype.splitSegmentPoints = function (e, t) {
										var n = [],
											r = this.middleCrosstiesCount,
											i = [e.start, e.end].sort(function (e, t) {
												return e.x - t.x;
											}),
											o = l.default.segment(i[0], i[1]),
											a = o.length,
											s = o.tangentInStart(),
											h = o.length / (r + 1),
											c = o.start,
											u = Array(r + 1).fill(h);
										if (this.middleCrosstiesRatio.length === r + 1) {
											var p = this.middleCrosstiesRatio.reduce(function (e, t) {
												return e + t;
											});
											u = (u = this.middleCrosstiesRatio.map(function (e) {
												return e / p;
											})).map(function (e) {
												return e * a;
											});
										}
										for (var f = 0; f < r; f++) (c = c.translate(s.multiply(u[f]))), n.push(c);
										return n;
									}),
									(t.prototype.endPointOfSegmentBar = function (e, t) {
										var n = e.edges.sort(function (e, t) {
												return t.length - e.length;
											})[0],
											r = [n.start, n.end].sort(function (e, t) {
												return e.x - t.x;
											});
										return t === u.Direction.Left ? r[0] : r[1];
									}),
									(t.prototype.endPointOfTopEdge = function (e, t) {
										var n = [e.start, e.end].sort(function (e, t) {
											return e.x - t.x;
										});
										return t === u.Direction.Left ? n[0] : n[1];
									}),
									(t.prototype.expandSegment = function (e, t) {
										return l.default.segment(
											e.start.translate(e.tangentInEnd().multiply(t)),
											e.end.translate(e.tangentInStart().multiply(t)),
										);
									}),
									(t.prototype.splitBySegment = function (e, t, n) {
										var r = e.split(t, n),
											i = l.default.line(t.start, t.end),
											o = r.filter(function (e) {
												return e.IsMullion;
											}),
											a = r
												.filter(function (e) {
													return !e.IsMullion;
												})
												.sort(function (e, t) {
													var n = u.EdgeFinder.Instance.connectedEdgeIndex(e, o[0]),
														r = u.EdgeFinder.Instance.connectedEdgeIndex(t, o[0]),
														a = e.edge(n).middle(),
														s = t.edge(r).middle();
													return (a.leftTo(i) ? 1 : 0) - (s.leftTo(i) ? 1 : 0);
												});
										return [o, a];
									}),
									(t.prototype.totalAngleOfArc = function (e) {
										var t = e.startAngle,
											n = e.endAngle;
										return e.counterClockwise
											? n < t
												? n - t + 2 * Math.PI
												: n - t
											: t < n
											? t - n + 2 * Math.PI
											: t - n;
									}),
									(t.prototype.toJSON = function () {
										return {
											name: this.type,
											l: this.location.toJSON(),
											sm: this.segmentMiddle.toJSON(),
											sl: this.segmentLength,
											mcc: this.middleCrosstiesCount,
											mcr: this.middleCrosstiesRatio,
											sch: this.sideCrosstiesHidden,
										};
									}),
									(t.deserialize = function (e) {
										var n = new t(l.default.point(e.l.x, e.l.y));
										return (
											(n.segmentMiddle = l.default.point(e.sm.x, e.sm.y)),
											(n.segmentLength = e.sl),
											(n.middleCrosstiesCount = e.mcc),
											(n.middleCrosstiesRatio = e.mcr ? e.mcr : []),
											(n.sideCrosstiesHidden = e.sch),
											n
										);
									}),
									(t.prototype.clone = function () {
										var e = new t(
											this.location,
											this.segmentMiddle,
											this.segmentLength,
											this.middleCrosstiesCount,
											this.middleCrosstiesRatio,
											this.sideCrosstiesHidden,
										);
										return (
											(e._semiSegment = this._semiSegment), (e.innerEdgeIdx = this.innerEdgeIdx), e
										);
									}),
									(t.prototype.translate = function (e) {
										(this.location = this.location.translate(e)),
											(this._semiSegment = this._semiSegment.translate(e));
									}),
									(t.prototype.drag = function (e, t, n) {
										return this;
									}),
									(t.prototype.dragVertex = function (e, t, n) {
										return this;
									}),
									(t.prototype.rotate = function (e, t) {
										return this;
									}),
									t
								);
							})(p.CutLine);
						t.SemiSegmentPro = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrametifyLike = void 0);
						var l = s(n(0)),
							h = n(5),
							c = n(9),
							u = n(29),
							p = n(2),
							f = n(1),
							d = (function (e) {
								function t(t) {
									void 0 === t && (t = l.default.point());
									var n = e.call(this, u.CutLineType.frametifyLike) || this;
									return (
										(n.location = t),
										(n.polygon = new f.WinPolygon()),
										(n.hidden = []),
										(n.edgeJointWay = p.EdgeJointWay.Default),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'start', {
										get: function () {
											return this.polygon.box.low;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'end', {
										get: function () {
											return this.polygon.box.high;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pt', {
										get: function () {
											return this.location;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mpt', {
										get: function () {
											return this.polygon.box.center;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showArc', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'generateDockDataForDim', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.returnFormat = function (e) {
										var t = this,
											n = e.filter(function (e) {
												return e.IsMullion;
											});
										n.forEach(function (e, n) {
											(e.spLine.line = t.clone()),
												(e.spLine.line.innerEdgeIdx = n),
												(e.editTool = h.ToolType.editInnerSplitter);
										});
										var r = e.filter(function (e) {
											return !e.IsMullion;
										});
										return (
											r.forEach(function (e, t) {
												e.polyId.pos = t;
											}),
											a(r, n)
										);
									}),
									(t.prototype.split = function (e, t) {
										if (((this.polygon = e), !this.polygon.isRectangle())) return [];
										var n = f.SingleTrackPolygon.createFromBox(this.polygon.box, this.hidden),
											r = this.profileSize ? this.profileSize : t,
											i = new c.SingleTrackFrametify(n).run(
												Array(4).fill(r),
												Array(4).fill(this.edgeJointWay),
											);
										return (
											(i.barPolys = i.barPolys.filter(function (e) {
												return !e.virtual;
											})),
											i.barPolys.forEach(function (e) {
												var t = e.mulShape;
												e.epDock.stDock.type !== p.DockType.None &&
													(t = l.default.segment(p.Utils.edgeDirPt(t, r, t.start), t.end)),
													e.epDock.etDock.type !== p.DockType.None &&
														(t = l.default.segment(t.start, p.Utils.edgeDirPt(t, -r, t.end)));
												var n = t
													.tangentInEnd()
													.rotate90CCW()
													.multiply(r / 2);
												e.mulShape = t.translate(n);
											}),
											this.returnFormat(a(i.barPolys, i.innerPolys))
										);
									}),
									(t.prototype.translate = function (e) {
										this.location = this.location.translate(e);
									}),
									(t.prototype.clone = function () {
										var e = new t();
										return (
											(e.location = this.location),
											(e.polygon = this.polygon),
											(e.innerEdgeIdx = this.innerEdgeIdx),
											(e.profileSize = this.profileSize),
											(e.edgeJointWay = this.edgeJointWay),
											e
										);
									}),
									(t.prototype.toJSON = function () {
										return {
											name: this.type,
											l: this.location.toJSON(),
											ps: this.profileSize,
											ejw: this.edgeJointWay,
											hd: this.hidden,
										};
									}),
									(t.deserialize = function (e) {
										var n = new t();
										return (
											(n.location = l.default.point(e.l.x, e.l.y)),
											(n.profileSize = e.ps),
											(n.edgeJointWay = e.ejw),
											(n.hidden = e.hd),
											n
										);
									}),
									(t.prototype.rotate = function () {
										return this;
									}),
									t
								);
							})(u.CutLine);
						t.FrametifyLike = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.InnerEqSplit = void 0);
						var l = s(n(0)),
							h = n(5),
							c = n(1),
							u = n(29),
							p = (function (e) {
								function t(t) {
									void 0 === t && (t = {});
									var n = e.call(this, u.CutLineType.innerEqSplit) || this;
									return (
										(n.polygon = new c.WinPolygon()),
										(n.count = 1),
										(n.vertical = !1),
										(n.offset = 0),
										(n.sideSpaceSize = 0),
										(n.ratio = []),
										(n.location = l.default.point()),
										void 0 !== t.location && (n.location = t.location),
										void 0 !== t.vertical && (n.vertical = t.vertical),
										void 0 !== t.ratio && (n.ratio = t.ratio),
										void 0 !== t.count && (n.count = t.count),
										void 0 !== t.fixedSideSpaceSize &&
											(n.fixedSideSpaceSize = t.fixedSideSpaceSize),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'start', {
										get: function () {
											return this.polygon.box.low;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'end', {
										get: function () {
											return this.polygon.box.high;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pt', {
										get: function () {
											return this.location;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mpt', {
										get: function () {
											return this.polygon.box.center;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolStart', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'constrolEnd', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showArc', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.split = function (e, t) {
										var n = this;
										this.polygon = e;
										var r = this.vertical ? this.polygon.box.xmin : this.polygon.box.ymin,
											i = (this.vertical ? this.polygon.box.xmax : this.polygon.box.ymax) - r,
											o = [];
										if (
											this.count > 1 &&
											this.ratio.length === this.count + 1 &&
											!this.fixedSideSpaceSize
										) {
											var s = this.ratio.reduce(function (e, t) {
													return e + t;
												}),
												h = (i - t * this.count) / s;
											o = this.ratio.map(function (e) {
												return e * h;
											});
										} else {
											var c = (i - t * this.count) / (this.count + 1),
												u = this.fixedSideSpaceSize || c,
												p = (i - 2 * u - t * this.count) / (this.count - 1);
											1 === this.count
												? o.push(c, c)
												: o.push.apply(o, a([u], Array(this.count - 1).fill(p), [u]));
										}
										this.sideSpaceSize = o[0];
										for (
											var f = [],
												d = this.polygon,
												g = function (e) {
													var i = o.slice(0, e + 1).reduce(function (e, t) {
															return e + t;
														}),
														s = r + i + t * e + t / 2,
														h = y.vertical
															? l.default.point(s, y.polygon.box.center.y)
															: l.default.point(y.polygon.box.center.x, s),
														c = y.vertical ? l.default.vector(1, 0) : l.default.vector(0, 1),
														u = l.default.line(h, c),
														p = d.split(u, t);
													if (e !== y.count - 1) {
														var g = p.findIndex(function (e) {
															return (
																!e.IsMullion &&
																(n.vertical ? e.box.center.x > s : e.box.center.y > s)
															);
														});
														d = p.splice(g, 1)[0];
													}
													f.push.apply(f, a(p));
												},
												y = this,
												m = 0;
											m < this.count;
											m++
										)
											g(m);
										return this.returnFormat(f);
									}),
									(t.prototype.dragInnerEdge = function (e, t, n, r) {
										var i = 0;
										return (
											this.vertical
												? 0 === e
													? (i = t.x)
													: e === this.count - 1 && (i = -t.x)
												: 0 === e
												? (i = t.y)
												: e === this.count - 1 && (i = -t.y),
											(this.fixedSideSpaceSize =
												(this.fixedSideSpaceSize || this.sideSpaceSize) + i),
											this
										);
									}),
									(t.prototype.translate = function (e) {
										this.location = this.location.translate(e);
									}),
									(t.prototype.rotate = function (e, t) {
										return this;
									}),
									(t.prototype.clone = function () {
										var e = new t();
										return (
											(e.location = this.location),
											(e.polygon = this.polygon),
											(e.innerEdgeIdx = this.innerEdgeIdx),
											(e.count = this.count),
											(e.vertical = this.vertical),
											(e.offset = this.offset),
											(e.fixedSideSpaceSize = this.fixedSideSpaceSize),
											(e.ratio = this.ratio),
											e
										);
									}),
									(t.prototype.toJSON = function () {
										return {
											name: this.type,
											l: this.location.toJSON(),
											c: this.count,
											v: this.vertical,
											o: this.offset,
											fs: this.fixedSideSpaceSize,
											r: this.ratio,
										};
									}),
									(t.deserialize = function (e) {
										var n = new t();
										return (
											(n.location = l.default.point(e.l.x, e.l.y)),
											(n.count = e.c),
											(n.vertical = e.v),
											(n.offset = e.o),
											(n.fixedSideSpaceSize = e.fs),
											(n.ratio = e.r),
											n
										);
									}),
									(t.prototype.returnFormat = function (e) {
										var t = this,
											n = e.filter(function (e) {
												return e.IsMullion;
											});
										n.forEach(function (e, n) {
											(e.spLine.line = t.clone()),
												(e.spLine.line.innerEdgeIdx = n),
												(e.editTool = h.ToolType.editInnerSplitter);
										});
										var r = e.filter(function (e) {
											return !e.IsMullion;
										});
										return (
											r.forEach(function (e, t) {
												e.polyId.pos = t;
											}),
											a(r, n)
										);
									}),
									t
								);
							})(u.CutLine);
						t.InnerEqSplit = p;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtendableArc = void 0);
						var i = r(n(0)),
							o = n(9),
							a = n(1),
							s = (function () {
								function e() {
									(this.arcExtend = !0),
										(this.barPoly = new a.WinPolygon()),
										(this.topInnerPoly = new a.WinPolygon()),
										(this.bottomInnerPoly = new a.WinPolygon()),
										(this.arcRadius = 0),
										(this.arcChordHeight = 0);
								}
								return (
									(e.prototype.split = function (e, t) {
										var n = e.box,
											r = i.default.point(n.xmin, n.ymin),
											s = i.default.point(n.xmax, n.ymin),
											l = n.xmax - n.xmin,
											h = this.arcExtend ? n.ymin : Math.max(n.ymax - l / 2, n.ymin),
											c = 2 * (n.ymax - h) > l,
											u = c ? h + l / 2 : n.ymax,
											p = i.default.point(n.xmin, u),
											f = i.default.point(n.xmax, u),
											d = i.default.point(n.center.x, h),
											g = o.ArcUtils.CreateArcFrom3Points(p, f, d),
											y = g.center,
											m = i.default.circle(y, g.r.valueOf() - t),
											v = i.default.line(p, f),
											w = m.intersect(v).sort(function (e, t) {
												return e.x - t.x;
											}),
											b = d.translate(i.default.vector(0, t)),
											S = o.ArcUtils.CreateArcFrom3Points(w[1], w[0], b);
										if (
											((this.arcRadius = S.r.valueOf()), (this.arcChordHeight = S.chordHeight()), c)
										) {
											var _ = i.default.point(n.xmax, n.ymax),
												P = _.translate(i.default.vector(-t, 0)),
												x = i.default.point(n.xmin, n.ymax),
												D = x.translate(i.default.vector(t, 0));
											(this.barPoly = new a.WinPolygon([
												g,
												i.default.segment(g.end, _),
												i.default.segment(_, P),
												i.default.segment(P, S.start),
												S,
												i.default.segment(S.end, D),
												i.default.segment(D, x),
												i.default.segment(x, g.start),
											])),
												(this.bottomInnerPoly = new a.WinPolygon([
													S,
													i.default.segment(S.end, D),
													i.default.segment(D, P),
													i.default.segment(P, S.start),
												]));
										} else
											(this.barPoly = new a.WinPolygon([
												g,
												i.default.segment(g.end, S.start),
												S,
												i.default.segment(S.end, g.start),
											])),
												(this.bottomInnerPoly = new a.WinPolygon([
													S,
													i.default.segment(S.end, S.start),
												]));
										this.topInnerPoly = new a.WinPolygon([
											g,
											i.default.segment(g.end, s),
											i.default.segment(s, r),
											i.default.segment(r, g.start),
										]);
									}),
									e
								);
							})();
						t.ExtendableArc = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SplitterAgent = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(11),
							h = n(1),
							c = n(9),
							u = n(2),
							p = (function () {
								function e(e, t) {
									var n;
									(this.host = e),
										(this.where = t),
										(this.subs = []),
										(this.lines = []),
										(this.lineProfileSizes = []),
										(this.dockMgr = new u.DockManager()),
										(this.twiceEqualSplitRequire = !1),
										(this.pullingHeights = []),
										(n = this.subs).push.apply(n, i(e.innerPoly)),
										this.initEdgeDock(this.subs),
										(this.spConstr = new c.SplitterConstraint());
								}
								return (
									Object.defineProperty(e.prototype, 'pullingHeightSubs', {
										get: function () {
											var e = [];
											return (
												this.subs.forEach(function (t) {
													t.IsMullion || e.push(t);
												}),
												this.lines.forEach(function (t) {
													t.line instanceof c.FrametifyLike && e.push(t.line.polygon);
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.alignForNewProfileSizes = function (e) {
										var t = this;
										('number' == typeof e
											? this.lines.map(function () {
													return e;
											  })
											: e
										).forEach(function (e, n) {
											e && t.alignForNewProfileSize(n, e);
										});
									}),
									(e.prototype.alignForNewProfileSize = function (e, t) {
										var n = this.lines[e],
											r = n.line;
										if (r instanceof a.default.Line && n.equalSplit === u.EqualSplitType.None) {
											var i = n.alignType;
											if (i !== h.AlignTypeEnum.center) {
												var o = this.lineProfileSizes[e];
												if (void 0 !== o && o !== t) {
													var s,
														l,
														c = ((t - o) / 2) * (i === h.AlignTypeEnum.left ? 1 : -1),
														p =
															((s = n),
															((l = Math.round((180 * s.angle) / Math.PI)) > 45 && l < 135) ||
															(l > 225 && l < 315)
																? a.default.vector(c, 0)
																: a.default.vector(0, c));
													r.pt = r.pt.translate(p);
												}
											}
										}
									}),
									(e.prototype.profileSize = function (e) {
										return e && e.reinforced
											? this.host.topFrame.profileSizeManager.reinforcedFrameMullion
											: e && e.kfcWaist
											? this.host.topFrame.profileSizeManager.kfcWaist
											: e && e.line instanceof c.FrametifyLike
											? this.host.topFrame.profileSizeManager.innerFrame
											: this.host.topFrame.profileSizeManager.get(this.where);
									}),
									Object.defineProperty(e.prototype, 'hostProfileSize', {
										get: function () {
											return this.host.topFrame.profileSizeManager.get(h.ShapeType.Frame);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allProfileSize', {
										set: function (e) {
											this.lineProfileSizes = this.lines.map(function () {
												return e;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasPullingHeight', {
										get: function () {
											return this.pullingHeights.some(function (e) {
												return e.height > 0;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.allowPullingHeight = function (e) {
										if (!(this.host instanceof h.Frame)) return !1;
										if (
											this.pullingHeights.find(function (t) {
												return t.polyId.equalTo(e.polyId);
											})
										)
											return !0;
										var t = e.edges[l.EdgeFinder.Instance.findIndex(l.Direction.Up, e)],
											n = this.host.polygon.box.ymax;
										return (
											!!a.default.Utils.EQ_0(t.middle().y - n) ||
											this.host.frameManager.bars.some(function (e) {
												return (
													e.polygon.mulShape instanceof a.default.Segment &&
													!!u.Utils.isSegHorizontal(e.polygon.mulShape) &&
													!!a.default.Utils.EQ_0(e.polygon.box.ymax - n) &&
													t instanceof a.default.Segment &&
													u.Utils.polyConcideSeg(e.polygon, t)
												);
											})
										);
									}),
									(e.prototype.getPullingHeight = function (e) {
										return this.pullingHeights.find(function (t) {
											return t.polyId.equalTo(e);
										});
									}),
									(e.prototype.setPullingHeight = function (e, t) {
										var n = this.pullingHeights.find(function (t) {
											return t.polyId.equalTo(e);
										});
										n ||
											((n = {
												polyId: e,
												height: t,
											}),
											this.pullingHeights.push(n)),
											(n.height = t);
									}),
									(e.prototype.removePullingHeight = function (e) {
										var t = this.pullingHeights.findIndex(function (t) {
											return t.polyId.equalTo(e);
										});
										-1 !== t && this.pullingHeights.splice(t, 1);
									}),
									(e.prototype.removeVirtualBar = function (e, t) {
										if (0 !== t.frameManager._virtuals.length) {
											var n = t.frameManager.allBars
												.filter(function (e) {
													return e.virtual;
												})
												.find(function (t) {
													return u.Utils.polyCoincide(t.polygon, e);
												});
											if (n) {
												var r = t.frameManager._virtuals.findIndex(function (e) {
													return e.equalTo(n.polyId);
												});
												t.frameManager._virtuals.splice(r, 1);
											}
										}
									}),
									(e.prototype.split = function (e, t, n) {
										var r = this,
											i = this._hitTest(e.pt);
										if (void 0 === i) return [];
										if (e instanceof a.default.Line) {
											var o = i.intersect(e),
												s = a.default.segment(o[0], o[1]).middle();
											e.pt = s;
										}
										var l = t.findFillerType(i.polyId);
										this.host instanceof h.Frame &&
											(this.removePullingHeight(i.polyId), this.removeVirtualBar(i, this.host));
										var u = i.spLine.clone();
										(u.line = e),
											void 0 !== n.reinforced && (u.reinforced = n.reinforced),
											void 0 !== n.kfcWaist && (u.kfcWaist = n.kfcWaist),
											this.lines.push(u);
										var p = this.profileSize(u);
										this.lineProfileSizes.push(p), this.remove(i, t);
										var f = i.split(e, p, this.hostProfileSize);
										e instanceof c.FrametifyLike && this.createEdgeDock(e.polygon);
										var d = 0,
											g = this.lines.length - 1;
										return (
											f.forEach(function (e) {
												(e.polyId.idx = g), r.subs.push(e);
											}),
											f.forEach(function (e) {
												e.IsMullion
													? ((e.polyId.pos = d++), r.addFrameDock(e))
													: r.createEdgeDock(e);
											}),
											this.addMullionDock(
												this.subs.filter(function (e) {
													return e.IsMullion;
												}),
											),
											this.sortDockData(),
											t.changeType(
												f.filter(function (e) {
													return !e.IsMullion;
												}),
												l,
											),
											this.subs
												.filter(function (e) {
													return e.IsMullion && e.polyId.idx === g;
												})
												.map(function (e) {
													return e.clone();
												})
										);
									}),
									(e.prototype.dragSplit = function (e, t, n) {
										var r = this;
										return e < 0 || e >= this.lines.length
											? []
											: (this.dragLine(e, t, n),
											  this.spConstr.getPos(e).forEach(function (e) {
													return r.dragLine(e, t, n);
											  }),
											  this.updatePoly());
									}),
									(e.prototype.dragInnerSplit = function (e, t, n) {
										var r = e.polygon.polyId.idx;
										if (r < 0 || r >= this.lines.length) return [];
										var i = e.polygon.spLine.line.innerEdgeIdx;
										return (
											(this.lines[r].line = this.lines[r].line.dragInnerEdge(
												i,
												t,
												n,
												this.host.innerPoly,
											)),
											this.updatePoly()
										);
									}),
									(e.prototype.dragLine = function (e, t, n) {
										if (!(e < 0 || e >= this.lines.length)) {
											var r = n.polygon.mulShape;
											if (r instanceof a.default.Segment) {
												if (this.lines[e].start.fixed && this.lines[e].end.fixed) return;
												this.lines[e].end.fixed
													? (this.lines[e].line = a.default.line(r.start.translate(t), r.end))
													: this.lines[e].start.fixed
													? (this.lines[e].line = a.default.line(r.start, r.end.translate(t)))
													: (this.lines[e].drag(e, t, n), this.fixDockDataForDrag(e, t, n.polyId));
											} else this.lines[e].drag(e, t, n);
										}
									}),
									(e.prototype.fixDockDataForDrag = function (e, t, n) {
										var r = this.lines[e].line;
										if (r instanceof a.default.Line) {
											var i = t.projectionOn(r.norm);
											this.subs
												.find(function (e) {
													return e.IsMullion && e.polyId.equalTo(n);
												})
												.translate(i),
												this.dockMgr.forDoTask(function (e, t) {
													return (
														t.forEach(function (t) {
															var r = e.equalTo(n),
																o = t.idx.equalTo(n);
															(r || o) && (t.pt = t.pt.translate(i));
														}),
														u.DockTaskStatus.Continue
													);
												});
										}
									}),
									(e.prototype.transSplitter = function (e, t, n) {
										if (!(e < 0 || e >= this.lines.length)) {
											var r = n.polygon.mulShape;
											if (r instanceof a.default.Segment) {
												if (this.lines[e].start.fixed && this.lines[e].end.fixed) return;
												this.lines[e].end.fixed
													? (this.lines[e].line = a.default.line(r.start.translate(t), r.end))
													: this.lines[e].start.fixed
													? (this.lines[e].line = a.default.line(r.start, r.end.translate(t)))
													: this.lines[e].translate(t);
											} else this.lines[e].translate(t);
										}
									}),
									(e.prototype.rotateSplitter = function (e, t, n) {
										if (e < 0 || e >= this.lines.length) return 0;
										var r = this.lines[e].clone(),
											i = t[1],
											o = t[0].x;
										return n ? r.rotate(o, i) : (o = r.rotateTo(o, i)), (this.lines[e] = r), o;
									}),
									(e.prototype.tweak = function (e, t, n, r, i, o) {
										var l = this;
										if (
											(void 0 === r && (r = !0),
											void 0 === i && (i = -1),
											void 0 === o && (o = a.default.point()),
											!(e < 0 || e >= this.lines.length))
										)
											if (3 === t.length)
												if ((u = this.lines[e].line) instanceof c.CutLine)
													this.lines[e].line = u.dragArc(i, n, t[2]);
												else {
													var h = this.lines[e].clone();
													(h.line = a.default.line(t[0], t[1])),
														h.line.distanceTo(t[2])[0] > s.DrawParams.Ins.arcDummy &&
															(h.line = c.ArcUtils.CreateArcFrom3Points(t[0], t[1], t[2])),
														(this.lines[e] = h);
												}
											else {
												var u;
												if ((u = this.lines[e].line) instanceof c.CutLine) {
													var p = u.dragVertex(i, n, o);
													if (p) return void (this.lines[e].line = p);
												}
												var f = this.rotateSplitter(e, t, r);
												r || (t[0].x = f),
													this.spConstr.getRot(e).forEach(function (e) {
														return l.rotateSplitter(e, t, !0);
													});
											}
									}),
									(e.prototype.preEqualizeRequired = function () {
										var e = this,
											t = !1;
										return (
											this.dockMgr.dockData.forEach(function (n, r) {
												var i = u.PolyId.createByJson(JSON.parse(r));
												if (
													!(i.pos < 0) &&
													n.some(function (t) {
														return (
															e.lines[t.idx.idx] &&
															e.lines[t.idx.idx].equalSplit !== u.EqualSplitType.None
														);
													})
												) {
													var o = [];
													e.dockMgr.dockData.forEach(function (e, t) {
														var n = u.PolyId.createByJson(JSON.parse(t));
														n.pos < 0 ||
															e.forEach(function (e) {
																e.idx.equalTo(i) && o.push(n);
															});
													}),
														o.some(function (t) {
															return (
																e.lines[t.idx] &&
																e.lines[t.idx].equalSplit !== u.EqualSplitType.None
															);
														}) && (t = !0);
												}
											}),
											t
										);
									}),
									(e.prototype.tweakEqualSplit = function () {
										var e = this,
											t = this.lines.length;
										if (
											0 !== t &&
											!this.lines.every(function (e) {
												return e.equalSplit === u.EqualSplitType.None;
											})
										) {
											var n = function (n) {
												e.dockMgr.forDoTask(function (r, i) {
													var o = r.idx;
													return r.pos > 0
														? u.DockTaskStatus.Continue
														: 0 === r.pos && t > o && !(e.lines[o].line instanceof a.default.Line)
														? u.DockTaskStatus.Return
														: (n
																? 0 === r.pos && e.equalizeMulMul(i, r)
																: -1 === r.pos && e.equalizeFrameMul(i, r),
														  u.DockTaskStatus.OK);
												});
											};
											0 !== this.dockMgr.dockData.size &&
												(this.lines.forEach(function (e) {
													return (e.equalSplitMaxCount = -1);
												}),
												n(!0),
												n(!1));
										}
									}),
									(e.prototype.equalizeFrameMul = function (e, t) {
										var n = this,
											r = this.host.polygon.edge(t.idx),
											i = this.host.innerPoly
												.map(function (e) {
													return e.edges;
												})
												.flat()
												.filter(function (e, r) {
													return n.host.polygon.idxFromInner(r) === t.idx;
												});
										if (1 === i.length) {
											var o = i[0];
											r instanceof a.default.Segment &&
												((this.host instanceof h.Frame &&
													this.host.ignoreEqualSplit.some(function (e) {
														return e.equalTo(t);
													})) ||
													this.equalizeEdge(e, o));
										}
									}),
									(e.prototype.equalizeMulMul = function (e, t) {
										var n = this,
											r = this.subs.find(function (e) {
												return e.IsMullion && e.polyId.equalTo(t);
											}),
											i = r.mulShape;
										i instanceof a.default.Segment &&
											this.groupDockDatasByBarSides(e, r, i).forEach(function (e) {
												n.equalizeEdge(e.docks, e.edge);
											});
									}),
									(e.prototype.equalizeEdge = function (e, t) {
										var n = this;
										if (this.hasEqSplit(e)) {
											var r = e.some(function (e) {
												return !(n.lines[e.idx.idx].line instanceof a.default.Line);
											});
											(e = e.filter(function (e) {
												return n.lines[e.idx.idx].line instanceof a.default.Line;
											})),
												this.sortDocksByEdge(e, t);
											var o,
												s = this.fetchEqRatios(t, e);
											if (this.equalizeForCalc && this.host instanceof h.Frame && !r) {
												var l = i(
													this.host.mulManager.glasses,
													this.host.sashManager.sashes.filter(function (e) {
														return e.type === h.ShapeType.Sash;
													}),
													this.host.sashManager.slides,
													this.host.sashManager.doubleSashes,
													this.host.sashManager.folds,
												);
												if (void 0 === (o = this.equalizeForCalc(t, s, l))) return;
											}
											var c = this.innerEqSplitPoints(t, s, e, o);
											c && this.applyNewLineForEq(e, c);
										}
									}),
									(e.prototype.groupDockDatasByBarSides = function (e, t, n) {
										return 0 === e.length
											? []
											: t.edges
													.filter(function (e) {
														return e instanceof a.default.Segment;
													})
													.map(function (t) {
														return {
															edge:
																t.length > 0 && t.tangentInStart().dot(n.tangentInStart()) < 0
																	? t.reverse()
																	: t,
															docks: e.filter(function (e) {
																return t.contains(e.pt);
															}),
														};
													})
													.filter(function (e) {
														return e.docks.length > 0;
													});
									}),
									(e.prototype.applyNewLineForEq = function (e, t) {
										var n = this;
										e.forEach(function (r, i) {
											var o = n.lines[r.idx.idx];
											o.equalSplitMaxCount > e.length ||
												((o.equalSplitMaxCount = e.length), (o.line.pt = t[i]));
										});
									}),
									(e.prototype.sortDocksByEdge = function (e, t) {
										e.sort(function (e, n) {
											var r = t.start;
											return e.pt.distanceTo(r)[0] - n.pt.distanceTo(r)[0];
										});
									}),
									(e.prototype.hasEqSplit = function (e) {
										var t = this;
										return (
											!e.some(function (e) {
												return void 0 === t.lines[e.idx.idx];
											}) &&
											e.some(function (e) {
												return (
													t.lines[e.idx.idx].line instanceof a.default.Line &&
													t.lines[e.idx.idx].equalSplit !== u.EqualSplitType.None
												);
											})
										);
									}),
									(e.prototype.fetchEqRatios = function (e, t) {
										var n = this,
											r = this.host instanceof h.Frame ? this.host.equalSplitRatios.slice() : [];
										r.length !== t.length + 1 && (r = Array(t.length + 1).fill(1));
										var i = u.Utils.isSegVertical(e),
											o = (i && e.start.y > e.end.y) || (!i && e.start.x > e.end.x);
										o && (r = r.reverse());
										var a = t.map(function (e) {
												if (n.lines[e.idx.idx].equalSplit === u.EqualSplitType.None)
													return [!1, !1];
												var t = n.lines[e.idx.idx].equalSplitSide;
												if (o) {
													if (t === u.EqualSplitSide.LeftOrTop) return [!1, !0];
													if (t === u.EqualSplitSide.RightOrBottom) return [!0, !1];
												} else {
													if (t === u.EqualSplitSide.LeftOrTop) return [!0, !1];
													if (t === u.EqualSplitSide.RightOrBottom) return [!1, !0];
												}
												return [!0, !0];
											}),
											s = Array(a.length + 1).fill(!1);
										return (
											s.forEach(function (e, t) {
												0 === t
													? (s[t] = a[0][0])
													: t === s.length - 1
													? (s[t] = a[a.length - 1][1])
													: (s[t] = a[t - 1][1] || a[t][0]);
											}),
											s.forEach(function (e, t) {
												return (r[t] = e ? r[t] : 0);
											}),
											r
										);
									}),
									(e.prototype.innerEqSplitPoints = function (e, t, n, r) {
										var i = this;
										void 0 === r && (r = []);
										var o = n.map(function (t) {
												var n = i.lineProfileSizes[t.idx.idx],
													r = i.lines[t.idx.idx].line,
													o = Math.abs((r.slope % Math.PI) - (e.slope % Math.PI));
												return n / Math.sin(o);
											}),
											s = a.default.line(e.start, e.end),
											l = n.map(function (e) {
												return e.pt.projectionOn(s);
											}),
											h = t.map(function (r, i) {
												var a = 0 === i ? e.start : l[i - 1],
													s = i === n.length ? e.end : l[i];
												return (
													a.distanceTo(s)[0] -
													(0 === i
														? 0.5 * o[i]
														: i === t.length - 1
														? 0.5 * o[i - 1]
														: 0.5 * o[i - 1] + 0.5 * o[i])
												);
											}),
											c = t.map(function (e, t) {
												return 0 === e ? h[t] : 0;
											}),
											p = t.reduce(function (e, t) {
												return e + t;
											}),
											f = c.reduce(function (e, t) {
												return e + t;
											}),
											d = o.reduce(function (e, t) {
												return e + t;
											}),
											g = (e.length - f - d) / p,
											y = t.map(function (e) {
												return e * g;
											}),
											m = t.every(function (e, t) {
												return 0 === e || a.default.Utils.EQ_0(y[t] - h[t]);
											});
										if (!this.equalizeForCalc || m) {
											for (
												var v = 0,
													w = n.map(function (e, n) {
														var r = 0 === t[n] ? c[n] : y[n];
														return (v += r + o[n] * (0 === n ? 0.5 : 1));
													}),
													b = [],
													S = 0;
												S < n.length;
												S++
											) {
												var _ = r[S] ? w[S] + r[S] : w[S];
												b.push(u.Utils.lineDirPt(e, _, e.start));
											}
											return b;
										}
									}),
									(e.prototype.updatePoly = function (e) {
										void 0 === e && (e = !1),
											(this.twiceEqualSplitRequire = this.preEqualizeRequired());
										var t = [];
										return (
											(t = this.updatePolyMain(e, !1)),
											this.twiceEqualSplitRequire && (t = this.updatePolyMain(e, !0)),
											t
										);
									}),
									(e.prototype.updatePolyMain = function (e, t) {
										var n = this;
										void 0 === e && (e = !1),
											void 0 === t && (t = !1),
											this.lines.forEach(function (e, t) {
												n.lineProfileSizes[t] || (n.lineProfileSizes[t] = n.profileSize(e));
											}),
											e || this.tweakEqualSplit(),
											this.clear(),
											this.host.innerPoly.forEach(function (e, t) {
												return (n.subs[t] = e);
											}),
											this.initEdgeDock(this.subs);
										for (
											var r = [],
												i = 0,
												o = function (t) {
													var o = s.lines[t],
														l = [],
														h = !1;
													s.subs.forEach(function (s) {
														var c = e ? s.contains(o.position) : o.polyId.equalTo(s.polyId);
														if (s.IsMullion) l.push(s);
														else if (c) {
															(h = !0), r.push(t), e && (o.polyId = s.polyId.clone());
															var u = s.split(o.line, n.lineProfileSizes[t], n.hostProfileSize),
																p = u.find(function (e) {
																	return e.IsMullion;
																});
															p &&
																(o.line instanceof a.default.Arc
																	? (o.line = p.mulShape.clone())
																	: o.line instanceof a.default.Line &&
																	  (o.line.pt = p.mulShape.middle()));
															var f = 0;
															u.forEach(function (e) {
																(e.polyId.idx = t + i),
																	e.IsMullion && (e.polyId.pos = f++),
																	l.push(e);
															});
														} else l.push(s);
													}),
														e && !h && i--,
														s.clear(),
														l.forEach(function (e) {
															return (n.subs[n.subs.length] = e);
														});
												},
												s = this,
												l = 0;
											l < this.lines.length;
											l++
										)
											o(l);
										if (e) {
											var u = [],
												p = [];
											this.lines.forEach(function (e, t) {
												r.some(function (e) {
													return e === t;
												}) && (u.push(e), p.push(n.lineProfileSizes[t]));
											}),
												(this.lines = u),
												(this.lineProfileSizes = p);
										}
										var f = !this.twiceEqualSplitRequire || t;
										f && this.splitBar();
										var d = [];
										if (
											(this.subs.forEach(function (e) {
												if (e.IsMullion) {
													var t = e.clone();
													d.push(t), n.addFrameDock(t, !f);
												} else n.createEdgeDock(e);
											}),
											this.lines.forEach(function (e) {
												e.line instanceof c.FrametifyLike && n.createEdgeDock(e.line.polygon);
											}),
											this.addMullionDock(d),
											this.sortDockData(),
											d.sort(function (e, t) {
												return e.polyId.idx - t.polyId.idx;
											}),
											this.host instanceof h.Frame && f)
										) {
											var g = d.filter(function (e) {
												return e.IsMullion;
											});
											this.pullingHeightForBars(g),
												this.hideVirtualBars(),
												this.pullingHeightForSubs(g);
										}
										return e && this.tweakEqualSplit(), d;
									}),
									(e.prototype.pullingHeightForSubs = function (e) {
										var t = this,
											n = this.host,
											r = this.pullingHeights,
											i = [];
										this.pullingHeightSubs.forEach(function (o) {
											var s = r.find(function (e) {
												return e.polyId.equalTo(o.polyId);
											});
											if (s) {
												var h = l.EdgeFinder.Instance.findIndex(l.Direction.Up, o),
													p = 0,
													f = o.edDock.docks[h];
												if (f.id && f.type === u.DockType.Frame) {
													var d = n.frameManager.allBars.find(function (e) {
														return e.polyId.equalTo(f.id);
													});
													d &&
														d.virtual &&
														((p = n.frameManager.getEdgeWidth(d.polyId.idx)), i.push(f));
												}
												var g = o.edges;
												(g[h] = g[h].translate(a.default.vector(0, -s.height + p))),
													c.Frametify.edgeIntersection(g, (h - 1 + g.length) % g.length),
													c.Frametify.edgeIntersection(g, h),
													o.setEdges(g),
													t.lines.forEach(function (n, r) {
														if (n.line instanceof c.FrametifyLike && n.line.polygon === o) {
															var i = t.subs.filter(function (e) {
																return !e.IsMullion && e.polyId.idx === r;
															});
															if (1 === i.length) {
																var a = e.filter(function (e) {
																		return e.polyId.idx === r;
																	}),
																	s = o.split(n.line, t.lineProfileSizes[r]),
																	l = s.filter(function (e) {
																		return e.IsMullion;
																	}),
																	h = s.filter(function (e) {
																		return !e.IsMullion;
																	});
																a.forEach(function (e, t) {
																	var n = l.find(function (t) {
																		return (
																			t.spLine.line.innerEdgeIdx === e.spLine.line.innerEdgeIdx
																		);
																	});
																	n && e.setEdges(n.edges);
																}),
																	i[0].setEdges(h[0].edges);
															}
														}
													});
											}
										}),
											i.forEach(function (e) {
												(e.type = u.DockType.None), (e.id = void 0);
											});
									}),
									(e.prototype.pullingHeightForBars = function (e) {
										var t = this,
											n = this.host.frameManager.bars;
										n.forEach(function (r) {
											var o = r.polygon.mulShape;
											if (
												o instanceof a.default.Segment &&
												u.Utils.isSegHorizontal(o) &&
												!(o.middle().y < r.polygon.box.center.y)
											) {
												var s = t.subs
													.filter(function (e) {
														return !e.IsMullion;
													})
													.find(function (e) {
														return u.Utils.polyCoincide(r.polygon, e);
													});
												if (s) {
													var l = t.pullingHeights.find(function (e) {
														return e.polyId.equalTo(s.polyId);
													});
													if (l && !(s.box.center.y > r.polygon.box.center.y)) {
														var h = n
																.filter(function (e) {
																	return e !== r;
																})
																.map(function (e) {
																	return e.polygon;
																}),
															c = i(h, e).filter(function (e) {
																return t.pullingRequire(r.polygon, e);
															});
														i([r.polygon], c).forEach(function (e) {
															return t.liftBar(e, l.height);
														});
													}
												}
											}
										});
									}),
									(e.prototype.pullingRequire = function (e, t) {
										var n = [e.stIdx, e.etIdx].map(function (t) {
												return e.edge(t);
											}),
											r = [t.stIdx, t.etIdx].map(function (e) {
												return t.edge(e);
											});
										return n.some(function (e) {
											return r.some(function (t) {
												return (
													e instanceof a.default.Segment &&
													t instanceof a.default.Segment &&
													u.Utils.segCoincide(e, t)
												);
											});
										});
									}),
									(e.prototype.hideVirtualBars = function () {
										var e = this.host;
										e.frameManager.bars.forEach(function (t) {
											e.frameManager._virtuals.find(function (e) {
												return e.equalTo(t.polyId);
											}) && (t.virtual = !0);
										});
									}),
									(e.prototype.liftBar = function (e, t) {
										var n = e.mulShape;
										if (n instanceof a.default.Segment)
											if (u.Utils.isSegHorizontal(n)) e.translate(a.default.vector(0, -t));
											else if (u.Utils.isSegVertical(n)) {
												var r = e.edges,
													i = [e.stIdx, e.etIdx].find(function (t) {
														return r[t].middle().y > e.box.center.y;
													}),
													o = a.default.vector(0, -t),
													s = n.start.y < n.end.y ? n.end : n.start,
													l = s.translate(o);
												e.updateMulShape(l, s),
													(r[i] = r[i].translate(o)),
													c.Frametify.edgeIntersection(r, (i - 1 + r.length) % r.length),
													c.Frametify.edgeIntersection(r, i),
													e.setEdges(r);
											}
									}),
									(e.prototype.sortDockData = function () {
										var e = this,
											t = this.host.polygon.edges;
										this.dockMgr.forDoTask(function (n, r) {
											var i;
											return (
												(i =
													n.pos < 0
														? t[n.idx]
														: e.subs.find(function (e) {
																return e.IsMullion && e.polyId.equalTo(n);
														  }).mulShape),
												r.sort(function (e, t) {
													var n = i instanceof a.default.Segment,
														r = n ? i.start : i.center;
													return (
														(n ? e.pt.distanceTo(r)[0] : a.default.vector(r, e.pt).slope) -
														(n ? t.pt.distanceTo(r)[0] : a.default.vector(r, t.pt).slope)
													);
												}),
												u.DockTaskStatus.OK
											);
										});
									}),
									(e.prototype.addFrameDock = function (e, t) {
										var n = this;
										if ((void 0 === t && (t = !1), e.IsMullion)) {
											var r = e.polyId.idx,
												o = this.lines[r],
												a = this.host.innerPoly[0].edges,
												s = this.host.innerPoly[0].edDock.docks;
											this.host.innerPoly.forEach(function (e, t) {
												t > 0 && a.push.apply(a, i(e.edges));
											}),
												this.host.innerPoly.forEach(function (e, t) {
													t > 0 && s.push.apply(s, i(e.edDock.docks));
												});
											var l = this.host.polygon.edges,
												h = function (r, i) {
													var h = i ? o.start.split : o.end.split;
													t && (h = u.EndpointSplitWay.None);
													var c = h
															? l.findIndex(function (e) {
																	return e.contains(r);
															  })
															: a.findIndex(function (e) {
																	return e.contains(r);
															  }),
														p = c;
													if ((h || (c = n.host.polygon.idxFromInner(c)), c >= 0)) {
														var f = new u.PolyId(c),
															d = JSON.stringify(f.toJSON());
														n.dockMgr.push(d, {
															idx: e.polyId,
															type: n.host.type,
															pt: r,
															start: i,
														});
														var g = h ? u.Dock.None() : s[p] ? s[p] : u.Dock.None();
														e.epDock.setDock(i, g);
													}
												};
											h(e.mulShape.start, !0), h(e.mulShape.end, !1);
										}
									}),
									(e.prototype.addMullionDock = function (e) {
										var t = this;
										if ((this.dockMgr.removeMulData(), 0 !== e.length)) {
											var n = function (n, r, i) {
												var o = JSON.stringify(n.polyId.toJSON()),
													a = e.filter(function (e) {
														if (e === n) return !1;
														var t = i ? e.mulShape.start : e.mulShape.end;
														return r.some(function (e) {
															return e.contains(t);
														});
													});
												a.length > 0 &&
													a.forEach(function (e) {
														var r = i ? e.mulShape.start : e.mulShape.end,
															a = {
																idx: e.polyId,
																type: t.host.type,
																pt: r,
																start: i,
															};
														t.dockMgr.push(o, a), e.epDock.setDock(i, u.Dock.Mullion(n.polyId));
													});
											};
											e.forEach(function (e) {
												var t = e.edges.filter(function (t) {
													if (e.mulShape instanceof a.default.Segment) {
														if (
															e.spLine.line instanceof c.FrametifyLike &&
															e.spLine.line.polygon.edges.some(function (e) {
																return e.contains(t.middle());
															})
														)
															return !1;
														var n = a.default.line(t.start, t.end),
															r = a.default.line(e.mulShape.start, e.mulShape.end);
														return (
															t instanceof a.default.Segment &&
															u.Utils.isZero(n.norm.cross(r.norm), 1e-4)
														);
													}
													return t instanceof a.default.Arc && t.center.equalTo(e.mulShape.center);
												});
												n(e, t, !0), n(e, t, !1);
											});
										}
									}),
									(e.prototype.initEdgeDock = function (e) {
										var t = this,
											n = -1;
										e.forEach(function (e) {
											var r = e.edDock.docks;
											e.edges.forEach(function (e, i) {
												if ((n++, void 0 === r[i])) {
													var o = t.host.polygon.idxFromInner(n);
													r[i] = u.Dock.Frame(new u.PolyId(o));
												}
											});
										});
									}),
									(e.prototype.createEdgeDock = function (e) {
										var t = this;
										if (!e.IsMullion) {
											var n = this.host.polygon,
												r = this.host.innerPoly
													.map(function (e) {
														return e.edges;
													})
													.flat(),
												i = this.host.innerPoly
													.map(function (e) {
														return e.edDock.docks;
													})
													.flat();
											e.edges.forEach(function (o, s) {
												var l = o.middle(),
													c = r.findIndex(function (e) {
														return e.contains(l);
													});
												if (-1 !== c) {
													var p = i[c],
														f = n.idxFromInner(c),
														d = t.host.children.filter(function (e) {
															return (
																e instanceof h.Bar &&
																e.where === t.host.type &&
																e.polygon.polyId.idx === f &&
																e.polygon.polyId.pos < 0
															);
														});
													if (d.length > 1 && o instanceof a.default.Segment) {
														var g = d.find(function (e) {
															return u.Utils.polyConcideSeg(e.polygon, o);
														});
														g && (p = u.Dock.Frame(g.polyId));
													}
													e.edDock.docks[s] = p;
												} else {
													var y = t.subs
														.filter(function (e) {
															return e.IsMullion;
														})
														.find(function (e) {
															return e.edges.some(function (e) {
																return e.contains(l);
															});
														});
													e.edDock.docks[s] = u.Dock.Mullion(y ? y.polyId : void 0);
												}
											});
										}
									}),
									(e.prototype.splitBar = function () {
										try {
											for (var e = 0; e < this.lines.length; e++) {
												var t = this.lines[e];
												t.start.split !== u.EndpointSplitWay.None &&
													this._splitBar(e, !0, t.start.split),
													t.end.split !== u.EndpointSplitWay.None &&
														this._splitBar(e, !1, t.end.split);
											}
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype._splitBar = function (e, t, n) {
										var r = this,
											i = this.subs.findIndex(function (t) {
												return t.IsMullion && t.polyId.idx === e;
											}),
											o = this.subs[i];
										if (o) {
											var s = t ? o.mulShape.start : o.mulShape.end,
												l = this.host.children.find(function (e) {
													return (
														e instanceof h.Bar && e.where === r.host.type && e.polygon.inBoundary(s)
													);
												});
											if (l) {
												var p = new c.SplitBar(l.polygon, o, s).run();
												this.subs[i] = o.cloneWith(p.nedges).updateMulShape(p.npt, s);
												var f = [l];
												if (p.nbPoly.length > 0) {
													if ((l.updatePoly(p.nbPoly[0]), 2 === p.nbPoly.length)) {
														var d = new h.Bar(p.nbPoly[1], l.where);
														this.host.add(d), f.push(d);
													}
													var g = this.host.children.filter(function (e) {
															var t = e.polygon.polyId;
															return (
																e instanceof h.Bar &&
																e.where === r.host.type &&
																t.idx === p.nbPoly[0].polyId.idx &&
																t.pos < 0
															);
														}),
														y = -1;
													g.forEach(function (e) {
														return (e.polygon.polyId.pos = y--);
													});
													var m = n === u.EndpointSplitWay.LeftOrTopJoin,
														v = n === u.EndpointSplitWay.RightOrBottomJoin;
													if (m || v) {
														var w = this.subs[i].mulShape,
															b = this.host.topFrame.polygon.edge(f[0].polyId.idx),
															S =
																w instanceof a.default.Segment &&
																u.Utils.isHorizOrVer(w) &&
																b instanceof a.default.Segment &&
																u.Utils.isHorizOrVer(b);
														if ((m || v) && !S)
															return void (t
																? (this.lines[e].start.split = u.EndpointSplitWay.Through)
																: (this.lines[e].end.split = u.EndpointSplitWay.Through));
														var _ = this.host.topFrame.frameManager.getEdgeWidth(f[0].polyId.idx),
															P =
																this.lineProfileSizes[this.subs[i].polyId.idx] ||
																this.profileSize();
														new c.JoinBarAfterSplit().join(
															f.map(function (e) {
																return e.polygon;
															}),
															this.subs[i],
															v,
															_,
															P,
														);
													}
												}
											}
										}
									}),
									(e.prototype._hitTest = function (e) {
										if (0 !== this.subs.length)
											return this.subs.find(function (t) {
												return !t.IsMullion && t.contains(e);
											});
									}),
									(e.prototype.hitTest = function (e) {
										var t = this._hitTest(e);
										if (void 0 !== t) return t.clone();
									}),
									(e.prototype.findPoly = function (e) {
										var t = this.subs.find(function (t) {
											return !t.IsMullion && t.polyId.equalTo(e);
										});
										if (void 0 !== t) return t.clone();
									}),
									(e.prototype.remove = function (e, t) {
										if (0 !== this.subs.length) {
											var n = this.subs.indexOf(e);
											n >= 0 && this.subs.splice(n, 1), t.removeFiller(e.polyId);
										}
									}),
									(e.prototype.clear = function () {
										this.dockMgr.clear(), 0 !== this.subs.length && (this.subs = []);
									}),
									(e.prototype.translate = function (e) {
										var t = this;
										this.subs.forEach(function (n) {
											t.host.innerPoly.find(function (e) {
												return e === n;
											}) || n.translate(e);
										}),
											this.lines.forEach(function (t) {
												return t.translate(e);
											}),
											this.dockMgr.translate(e);
									}),
									Object.defineProperty(e.prototype, 'avaiablePoly', {
										get: function () {
											var e = [];
											return (
												this.where === h.ShapeType.AntiTheftMullion ||
													this.subs.forEach(function (t) {
														t.IsMullion || e.push(t.clone());
													}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasSplitBar', {
										get: function () {
											return this.lines.some(function (e) {
												return e.split;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.SplitterAgent = p;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerSplitterAgent = void 0);
						var a = o(n(0)),
							s = n(2),
							l = (function () {
								function e(e, t) {
									(this.host = e),
										(this.where = t),
										(this.subs = []),
										(this.lines = []),
										(this.profileSize = 0),
										(this.subs = [e.polygon]);
								}
								return (
									(e.prototype.clear = function () {
										(this.subs = []), (this.lines = []);
									}),
									(e.prototype.updatePoly = function () {
										var e = this;
										this.subs = [this.host.polygon];
										for (
											var t = function (t) {
													var r = n.lines[t],
														o = [];
													n.subs.forEach(function (n) {
														if (n.IsMullion) o.push(n);
														else if (r.polyId.equalTo(n.polyId)) {
															var i = n.split(r.line, e.profileSize);
															if (r.line instanceof a.default.Arc) {
																var s = i.find(function (e) {
																	return e.IsMullion;
																});
																s && (r.line = s.mulShape.clone());
															}
															var l = 0;
															i.forEach(function (e) {
																(e.polyId.idx = t), e.IsMullion && (e.polyId.pos = l++), o.push(e);
															});
														} else o.push(n);
													}),
														(n.subs = i(o));
												},
												n = this,
												r = 0;
											r < this.lines.length;
											r++
										)
											t(r);
										var o = this.subs
											.filter(function (e) {
												return e.IsMullion;
											})
											.map(function (e) {
												return e.clone();
											})
											.sort(function (e, t) {
												return e.polyId.idx - t.polyId.idx;
											});
										return this.checkFrameDock(o), this.checkMullionDock(o), o;
									}),
									(e.prototype.translate = function (e) {
										this.lines.forEach(function (t) {
											return t.translate(e);
										});
									}),
									(e.prototype.checkFrameDock = function (e) {
										var t = this.host.polygon.edges,
											n = this.host.polygon.edDock.docks;
										e.forEach(function (e) {
											var r = function (r) {
												var i = r ? e.mulShape.start : e.mulShape.end,
													o = t.findIndex(function (e) {
														return e.contains(i);
													});
												o >= 0 && e.epDock.setDock(r, n[o]);
											};
											r(!0), r(!1);
										});
									}),
									(e.prototype.checkMullionDock = function (e) {
										var t = function (t, n, r) {
											e.filter(function (e) {
												if (e === t) return !1;
												var i = r ? e.mulShape.start : e.mulShape.end;
												return n.some(function (e) {
													return e.contains(i);
												});
											}).forEach(function (e) {
												r ? e.mulShape.start : e.mulShape.end,
													e.epDock.setDock(r, s.Dock.Mullion(t.polyId));
											});
										};
										e.forEach(function (e) {
											var n,
												r,
												i =
													((r = (n = e).mulShape),
													n.edges.filter(function (e) {
														if (r instanceof a.default.Arc)
															return e instanceof a.default.Arc && e.center.equalTo(r.center);
														var t = a.default.line(e.start, e.end),
															n = a.default.line(r.start, r.end);
														return (
															e instanceof a.default.Segment &&
															s.Utils.isZero(t.norm.cross(n.norm), 1e-4)
														);
													}));
											t(e, i, !0), t(e, i, !1);
										});
									}),
									e
								);
							})();
						t.FillerSplitterAgent = l;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SplitterConstraint = void 0);
						var a = (function () {
							function e() {
								(this.posConstr = new Map()), (this.rotConstr = new Map());
							}
							return (
								(e.prototype.setPosConstr = function (e, t, n) {
									void 0 === n && (n = !0),
										e !== t &&
											(this.posConstr.has(e) || this.posConstr.set(e, new Set()),
											this.posConstr.get(e).add(t),
											n &&
												(this.posConstr.has(t) || this.posConstr.set(t, new Set()),
												this.posConstr.get(t).add(e)));
								}),
								(e.prototype.setRotConstr = function (e, t, n) {
									void 0 === n && (n = !0),
										e !== t &&
											(this.rotConstr.has(e) || this.rotConstr.set(e, new Set()),
											this.rotConstr.get(e).add(t),
											n &&
												(this.rotConstr.has(t) || this.rotConstr.set(t, new Set()),
												this.rotConstr.get(t).add(e)));
								}),
								(e.prototype.rmPosConstr = function (e) {
									var t, n;
									this.posConstr.delete(e);
									try {
										for (var i = r(this.posConstr.values()), o = i.next(); !o.done; o = i.next())
											o.value.delete(e);
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											o && !o.done && (n = i.return) && n.call(i);
										} finally {
											if (t) throw t.error;
										}
									}
								}),
								(e.prototype.rmRotConstr = function (e) {
									var t, n;
									this.rotConstr.delete(e);
									try {
										for (var i = r(this.rotConstr.values()), o = i.next(); !o.done; o = i.next())
											o.value.delete(e);
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											o && !o.done && (n = i.return) && n.call(i);
										} finally {
											if (t) throw t.error;
										}
									}
								}),
								(e.prototype.getPos = function (e) {
									return this.posConstr.has(e) ? o(this.posConstr.get(e)) : [];
								}),
								(e.prototype.getRot = function (e) {
									return this.rotConstr.has(e) ? o(this.rotConstr.get(e)) : [];
								}),
								e
							);
						})();
						t.SplitterConstraint = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Partition = void 0);
						var a = o(n(0)),
							s = n(9),
							l = (function () {
								function e(e, t) {
									void 0 === t && (t = !0), (this.poly = e), (this.vdir = t);
								}
								return (
									(e.prototype.run = function (e, t) {
										if ((void 0 === t && (t = []), e <= 1)) return [this.poly];
										for (
											var n = this.poly.box,
												r = t.reduce(function (e, t) {
													return t > 0 ? e + t : e;
												}, 0),
												o =
													e -
													t.filter(function (e) {
														return e && e > 0;
													}).length,
												l = this.vdir ? (n.xmax - n.xmin - r) / o : (n.ymax - n.ymin - r) / o,
												h = Array(e),
												c = 0;
											c < e;
											c++
										) {
											var u = t[c];
											h[c] = u && u > 0 ? t[c] : l;
										}
										var p = [],
											f = this.vdir ? a.default.vector(-1, 0) : a.default.vector(0, 1),
											d = this.vdir ? n.xmin : n.ymin;
										for (c = 1; c < e; c++) {
											d += h[c - 1];
											var g = this.vdir ? a.default.point(d, 0) : a.default.point(0, d);
											p.push(a.default.line(f.clone(), g));
										}
										var y = [],
											m = this.poly;
										return (
											p.forEach(function (e, t) {
												var n = new s.SplitterLine(m, e).partition();
												t === p.length - 1
													? p.length >= 2
														? n[0].isIntersect(p[t - 1])
															? y.push.apply(y, i(n))
															: y.push.apply(y, i([n[1], n[0]]))
														: y.push.apply(y, i(n))
													: n[0].isIntersect(p[t + 1])
													? (y.push(n[1]), (m = n[0]))
													: (y.push(n[0]), (m = n[1]));
											}),
											y
										);
									}),
									(e.prototype.runTwo = function (e) {
										return new s.SplitterLine(this.poly, e).partition();
									}),
									(e.prototype.runByLines = function (e, t) {
										var n,
											r = this;
										if ((void 0 === t && (t = !0), 0 === e.length))
											throw new Error('lineArray length cannot be 0');
										e.forEach(function (e, t, n) {
											if (1 !== e.length && 2 !== e.length)
												throw new Error('lineArray element length must be 1 or 2');
											if (0 !== t && t !== n.length - 1 && 1 === e.length)
												throw new Error('only first or last element can has single child');
										});
										var o,
											a,
											l = [],
											h = this.poly;
										if (1 === e.length) {
											if (1 === (d = e[0]).length) {
												var c = new s.SplitterLine(h, e[0][0]).partition();
												return l.push.apply(l, i(c)), l;
											}
											return l.push(this.runByTwoLines(h, d[0], d[1])), l;
										}
										var u = 0,
											p = e.length - 1;
										e.forEach(function (e, n, i) {
											if (0 === n && 1 === e.length) {
												u++;
												var l = new s.SplitterLine(h, e[0]).partition();
												o = t === r.polygonSomeLeftToLine(l[0], e[0]) ? l[0] : l[1];
											}
											n === i.length - 1 &&
												1 === e.length &&
												(p--,
												(l = new s.SplitterLine(h, e[0]).partition()),
												(a = t !== r.polygonSomeLeftToLine(l[0], e[0]) ? l[0] : l[1]));
										});
										for (var f = u; f <= p; f++) {
											var d = e[f];
											l.push(this.runByTwoLines(h, d[0], d[1]));
										}
										return o && (l = (n = [o]).concat.apply(n, i(l))), a && l.push(a), l;
									}),
									(e.prototype.polygonSomeLeftToLine = function (e, t) {
										var n = e.vertices,
											r = !1;
										return (
											n.forEach(function (e) {
												e.leftTo(t) && (r = !0);
											}),
											r
										);
									}),
									(e.prototype.runByTwoLines = function (e, t, n) {
										var r,
											i = new s.SplitterLine(e, t),
											o = i.partition();
										return (
											(r = o[0].isIntersect(n) ? o[0] : o[1]),
											(o = (i = new s.SplitterLine(r, n)).partition())[0].isIntersect(t)
												? o[0].clone()
												: o[1].clone()
										);
									}),
									e
								);
							})();
						t.Partition = l;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PartitionOverlap = t.PartitionWidth = void 0);
						var s,
							l = a(n(0)),
							h = n(9),
							c = n(1);
						!(function (e) {
							(e.Ratio = 'Ratio'), (e.Figure = 'Figure');
						})((s = t.PartitionWidth || (t.PartitionWidth = {})));
						var u = (function () {
							function e(e) {
								this.polygon = e;
							}
							return (
								(e.prototype.partitionSlideBySlideComp = function (e, t, n) {
									if ((void 0 === t && (t = -1), void 0 === n && (n = !0), t < 0))
										throw new Error('overlap must >0');
									var r = this.polygon.box;
									return n
										? this.partition(e, t, r.xmin, r.xmax, n)
										: this.partition(e, t, r.ymin, r.ymax, n);
								}),
								(e.prototype.validateSplitter = function (e) {
									var t, n;
									if (0 === e.length) throw new Error('validateSplitterError:length cannot be 0');
									var i = !0,
										o = e[0].length;
									if (0 === o) throw new Error('validateSplitterError:row length cannot be 0');
									if (
										(e.forEach(function (e) {
											e.length !== o && (i = !1);
										}),
										!i)
									)
										throw new Error('validateSplitterError:row length not the same');
									for (var a = 0; a < o; a++) {
										var s = 0;
										try {
											for (var l = ((t = void 0), r(e)), h = l.next(); !h.done; h = l.next()) {
												var c = h.value[a];
												void 0 === c || c.isSecondary || s++;
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												h && !h.done && (n = l.return) && n.call(l);
											} finally {
												if (t) throw t.error;
											}
										}
										if (1 !== s)
											throw new Error(
												'validateSplitterError:each column has and ony has one isSecondary-false',
											);
									}
								}),
								(e.prototype.parseSpliterToLines = function (e, t, n, r, i) {
									if ((void 0 === i && (i = !0), e.sashes.length <= 1))
										throw new Error('sash length cannot <=1');
									var o = 0,
										a = 0;
									e.sashes.forEach(function (e) {
										if (e.widthType === s.Ratio) o += e.widthValue;
										else {
											if (e.widthType !== s.Figure)
												throw new Error('SlideComp contains illegal partitionWidth');
											a += e.widthValue;
										}
									});
									for (var h = e.sashes[0].trackIdx, c = 1, u = 0; c < e.sashes.length; )
										(m = e.sashes[c].trackIdx) !== h && u++, (h = m), c++;
									var p = r - n;
									if (a < 0 || o <= 0 || a > p) throw new Error('len not support before partition');
									var f = (p + u * t - a) / o,
										d = [],
										g =
											n +
											(e.sashes[0].widthType === s.Ratio
												? f * e.sashes[0].widthValue
												: e.sashes[0].widthValue),
										y = i ? l.default.vector(-1, 0) : l.default.vector(0, -1);
									for (
										d.push([l.default.line(this.buildPoint(g, 0, i), y)]),
											c = 1,
											h = e.sashes[0].trackIdx;
										c < e.sashes.length - 1;

									) {
										var m = e.sashes[c].trackIdx,
											v = 0;
										(v =
											e.sashes[c].widthType === s.Ratio
												? f * e.sashes[c].widthValue
												: e.sashes[c].widthValue),
											m !== h
												? (d.push([
														l.default.line(this.buildPoint(g - t, 0, i), y),
														l.default.line(this.buildPoint(g - t + v, 0, i), y),
												  ]),
												  (g = g - t + v))
												: (d.push([
														l.default.line(this.buildPoint(g, 0, i), y),
														l.default.line(this.buildPoint(g + v, 0, i), y),
												  ]),
												  (g += v)),
											(h = m),
											c++;
									}
									var w = 0;
									return (
										(w =
											e.sashes[e.sashes.length - 1].widthType === s.Ratio
												? f * e.sashes[e.sashes.length - 1].widthValue
												: e.sashes[e.sashes.length - 1].widthValue),
										d.push([l.default.line(this.buildPoint(r - w, 0, i), y)]),
										d
									);
								}),
								(e.prototype.buildPoint = function (e, t, n) {
									return (
										void 0 === n && (n = !0), n ? l.default.point(e, t) : l.default.point(t, e)
									);
								}),
								(e.prototype.partition = function (e, t, n, r, i) {
									void 0 === i && (i = !0);
									var a = e.sashes,
										s = a[0].length;
									this.validateSplitter(a);
									for (var l = this.parseToInternalData(e), u = [], p = 0; p < a.length; p++) {
										u[p] = [];
										for (var f = 0; f < s; f++) u[p][f] = void 0;
									}
									var d = this.parseSpliterToLines(l, t, n, r, i);
									for (
										new h.Partition(this.polygon).runByLines(d).forEach(function (e, t, n) {
											var r = l.sashes[t],
												i = e.edges,
												a = i
													.filter(function (e) {
														return !0;
													})
													.sort(function (e, t) {
														return e.middle().y < t.middle().y
															? -1
															: e.middle().y > t.middle().y
															? 1
															: e.middle().x <= t.middle().x
															? -1
															: 1;
													})[0],
												s = i.findIndex(function (e) {
													return e.start.equalTo(a.start) && e.end.equalTo(a.end);
												}),
												h = o(i.slice(s), i.slice(0, s)),
												p = new c.WinPolygon(h);
											u[r.trackIdx][r.columnIdx] = {
												polygon: p,
												isSecondary: !1,
											};
										}),
											p = 0;
										p < a.length;
										p++
									)
										for (f = 0; f < s; f++) {
											var g = a[p][f];
											if (void 0 === g) u[p][f] = void 0;
											else if (g.isSecondary) {
												var y = this.findSecondary(a, f);
												u[p][f] = {
													polygon: u[y][f].polygon,
													isSecondary: !0,
												};
											}
										}
									return u;
								}),
								(e.prototype.findSecondary = function (e, t) {
									for (var n = e.length, r = 0; r < n; r++) {
										var i = e[r][t];
										if (void 0 !== i && !i.isSecondary) return r;
									}
									throw new Error('findSecondary Error:not found');
								}),
								(e.prototype.parseToInternalData = function (e) {
									for (var t = e.sashes.length, n = e.sashes[0].length, r = 0, i = 0; i < t; i++) {
										for (var o = 0, a = 0; a < n; a++)
											void 0 === e.sashes[i][a] || e.sashes[i][a].isSecondary || o++;
										o > 0 && r++;
									}
									var s = {
											tracksCount: r,
											sashes: [],
										},
										l = [];
									for (i = 0; i < n; i++)
										for (a = 0; a < t; a++) {
											var h = e.sashes[a][i];
											void 0 === h ||
												h.isSecondary ||
												l.push({
													trackIdx: a,
													columnIdx: i,
													widthType: h.widthType,
													widthValue: h.widthValue,
												});
										}
									return (s.sashes = l), s;
								}),
								e
							);
						})();
						t.PartitionOverlap = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Kfc2Frametify = void 0);
						var a = o(n(0)),
							s = n(117),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n.innerEdges = []), (n.outsidePath = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										this.analyse(e);
										var t = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													this.outsidePath[3].start,
													this.innerEdges[1].start,
													this.innerEdges[2].start,
													this.innerEdges[2].end,
												]),
											),
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													this.innerEdges[3].start,
													this.innerEdges[4].start.translate(
														a.default.vector(0, -1).multiply(this.poly.pullingHeight[4] - e[0]),
													),
													this.innerEdges[5].start.translate(
														a.default.vector(0, -1).multiply(this.poly.pullingHeight[4] - e[0]),
													),
													this.innerEdges[5].end,
												]),
											);
										(n.edDock.docks[1] = l.Dock.None()), (n.polyId.pos = 0);
										var r = new h.WinPolygon(
											h.PolygonCreator.Ins.joinPointsWithSegment([
												this.outsidePath[5].end,
												this.innerEdges[6].start,
												this.innerEdges[7].start,
												this.innerEdges[7].end,
											]),
										);
										return (r.polyId.pos = 1), [t, n, r];
									}),
									(t.prototype.barPolygons = function (e, t) {
										(t[3] = t[6] = l.EdgeJointWay.Default), (t[4] = t[5] = l.EdgeJointWay.Vertical);
										var n = this.createBar(this.outsidePath, this.innerEdges, t);
										n[4].virtual = !0;
										var r = n[3].mulShape;
										return (
											(n[3].mulShape = a.default.segment(
												a.default
													.line(r.start, r.end)
													.intersect(
														a.default.line(this.poly.edge(0).start, this.poly.edge(0).end),
													)[0],
												r.end,
											)),
											(r = n[5].mulShape),
											(n[5].mulShape = a.default.segment(
												r.start,
												a.default
													.line(r.start, r.end)
													.intersect(
														a.default.line(this.poly.edge(0).start, this.poly.edge(0).end),
													)[0],
											)),
											n
										);
									}),
									t
								);
							})(s.DoubleEarsFrametify);
						t.Kfc2Frametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Kfc3Frametify = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n._innerPolygons = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										var t = this.inner0Polygon(e[0]),
											n = this.inner1Polygon(e[0]);
										n.polyId.pos = 0;
										var r = this.inner2Polygon(e[0]);
										r.polyId.pos = 1;
										var i = this.inner3Polygon(e[0]);
										i.polyId.pos = 2;
										var o = this.inner4Polygon(e[0]);
										return (
											(o.polyId.pos = 3), (this._innerPolygons = [t, n, r, i, o]), [t, n, r, i, o]
										);
									}),
									(t.prototype.barPolygons = function (e, t) {
										var n = e[0],
											r = this.poly.edges,
											i = r[0],
											o = r[1],
											s = r[2];
										this.poly.bottomInnerDim ||
											(s = a.default.segment(s.start.translate(n, 0), s.end));
										var h = a.default.segment(r[3].start, r[3].end.translate(0, n));
										this.poly.bottomInnerDim || (h = h.translate(n, 0));
										var c = r[4],
											u = a.default.segment(r[5].start.translate(0, n), r[5].end);
										this.poly.bottomInnerDim || (u = u.translate(-n, 0));
										var p = r[6];
										this.poly.bottomInnerDim ||
											(p = a.default.segment(p.start.translate(-n, 0), p.end.translate(n, 0)));
										var f = a.default.segment(r[7].start, r[7].end.translate(0, n));
										this.poly.bottomInnerDim || (f = f.translate(n, 0));
										var d = r[8],
											g = a.default.segment(r[9].start.translate(0, n), r[9].end);
										this.poly.bottomInnerDim || (g = g.translate(-n, 0));
										var y = r[10];
										this.poly.bottomInnerDim ||
											(y = a.default.segment(y.start.translate(-n, 0), y.end));
										var m = [i, o, s, h, c, u, p, f, d, g, y, r[11]],
											v = this._innerPolygons[0].edges,
											w = this._innerPolygons[1].edges,
											b = this._innerPolygons[2].edges,
											S = this._innerPolygons[3].edges,
											_ = this._innerPolygons[4].edges,
											P = [
												a.default.segment(_[3].start, v[3].end),
												v[0],
												v[1],
												v[2],
												w[1],
												b[0],
												b[1],
												b[2],
												S[1],
												_[0],
												_[1],
												_[2],
											];
										(t[4] = t[5] = t[8] = t[9] = l.EdgeJointWay.Default),
											(t[0] =
												t[1] =
												t[2] =
												t[3] =
												t[6] =
												t[7] =
												t[10] =
												t[11] =
													l.EdgeJointWay.Vertical);
										var x = this.createBar(m, P, t);
										return (
											(x[4].virtual = !0),
											(x[8].virtual = !0),
											this.poly.leftSideHidden && (x[1].virtual = !0),
											this.poly.rightSideHidden && (x[11].virtual = !0),
											x
										);
									}),
									(t.prototype.inner0Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[1].start,
													t[1].end,
													t[3].start,
													t[3].end,
												]),
											),
											r = Array(4).fill(e);
										return (
											this.poly.bottomInnerDim || (r[2] = 0),
											this.poly.leftSideHidden && (r[0] = 0),
											this.findInnerPoly(n, r)
										);
									}),
									(t.prototype.inner1Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[3].end,
													t[3].start,
													t[5].end,
													t[5].start,
												]),
											),
											r = Array(4).fill(e);
										(r[1] = 0), this.poly.bottomInnerDim && (r[0] = r[2] = 0);
										var i = this.findInnerPoly(n, r);
										return (i.edDock.docks[1] = l.Dock.None()), i;
									}),
									(t.prototype.inner2Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[5].start,
													t[5].end,
													t[7].start,
													t[7].end,
												]),
											),
											r = Array(4).fill(e);
										return this.poly.bottomInnerDim || (r[0] = r[2] = 0), this.findInnerPoly(n, r);
									}),
									(t.prototype.inner3Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[7].end,
													t[7].start,
													t[9].end,
													t[9].start,
												]),
											),
											r = Array(4).fill(e);
										(r[1] = 0), this.poly.bottomInnerDim && (r[0] = r[2] = 0);
										var i = this.findInnerPoly(n, r);
										return (i.edDock.docks[1] = l.Dock.None()), i;
									}),
									(t.prototype.inner4Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[9].start,
													t[9].end,
													t[11].start,
													t[11].end,
												]),
											),
											r = Array(4).fill(e);
										return (
											this.poly.bottomInnerDim || (r[0] = 0),
											this.poly.rightSideHidden && (r[2] = 0),
											this.findInnerPoly(n, r)
										);
									}),
									(t.prototype.findInnerPoly = function (e, t) {
										return new h.WinPolygon(
											s.Frametify.findParallelEdges(e.edges, t, !0, e.orientation, !0),
										);
									}),
									t
								);
							})(s.Frametify);
						t.Kfc3Frametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HalfCircleFrametify = void 0);
						var a = o(n(0)),
							s = n(58),
							l = n(1),
							h = n(2),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n.innerEdges = []), (n.outsidePath = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										if (!this.poly.bottomHidden) return [this.poly.parallelPoly(e, !0)];
										var t = this.poly.arcEdge,
											n = a.default
												.circle(t.center, t.r.valueOf() - e[0])
												.intersect(this.poly.bottomEdge),
											r = a.default.Arc.arcSE(t.center, n[0], n[1], !0),
											i = a.default.segment(r.end, r.start),
											o = new l.WinPolygon([i, r]);
										return (o.edDock.docks = [h.Dock.None(), h.Dock.Frame(new h.PolyId(1))]), [o];
									}),
									(t.prototype.barPolygons = function (e, t) {
										this.poly.bottomHidden && (t[0] = t[1] = h.EdgeJointWay.Vertical);
										var n = this.createBar(
											this.poly.edges,
											this.poly.parallelPoly(e[0], !0).edges,
											t,
										);
										return this.poly.bottomHidden && (n[0].virtual = !0), n;
									}),
									t
								);
							})(s.Frametify);
						t.HalfCircleFrametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Ear2Frametify = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n._innerPolygons = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										var t = this.inner0Polygon(e),
											n = this.inner1Polygon(e);
										n.polyId.pos = 0;
										var r = this.inner2Polygon(e);
										return (r.polyId.pos = 1), (this._innerPolygons = [t, n, r]), [t, n, r];
									}),
									(t.prototype.barPolygons = function (e, t) {
										var n = this.poly.edges,
											r = this._innerPolygons[0].edges,
											i = this._innerPolygons[1].edges,
											o = this._innerPolygons[2].edges,
											s = [
												a.default.segment(
													n[0].start.translate(n[0].tangentInStart().multiply(e[0] / 2)),
													n[0].end,
												),
												n[1],
												n[2],
												n[3],
												n[4],
												n[5],
												i[1].reverse(),
												n[7],
											],
											h = [
												r[0],
												r[1],
												a.default.segment(r[2].start, i[2].end),
												i[3],
												a.default.segment(i[0].start, o[0].end),
												o[1],
												a.default.segment(r[3].start, o[3].end),
												n[7],
											];
										(t[0] = t[6] = t[7] = l.EdgeJointWay.Default),
											!this.poly.hasBase &&
												this.poly.isVertical &&
												(t[1] = t[2] = l.EdgeJointWay.Vertical);
										var c = this.createBar(s, h, t);
										return (
											(c[7].virtual = !0),
											!this.poly.hasBase && this.poly.isVertical && (c[1].virtual = !0),
											(c[0].epDock.stDock = l.Dock.Frame(new l.PolyId(6, -1))),
											(c[5].epDock.etDock = l.Dock.Frame(new l.PolyId(0, -1))),
											c
										);
									}),
									(t.prototype.inner0Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[0].start,
													t[0].end,
													t[2].start,
													t[6].start,
												]),
											),
											r = e[1];
										if (!this.poly.hasBase) {
											var i = this.poly.pullingHeight[1];
											i >= 0 && (r = i);
										}
										var o = [e[0], r, e[2], e[6] / 2];
										return this.findInnerPoly(n, o);
									}),
									(t.prototype.inner1Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[4].start,
													t[6].end,
													t[6].start,
													t[2].end,
												]),
											),
											r = [e[4], e[6] / 2, e[2], e[3]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner2Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[6].end,
													t[4].end,
													t[5].end,
													t[0].start,
												]),
											),
											r = [e[4], e[5], 0, e[6] / 2];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.findInnerPoly = function (e, t) {
										return new h.WinPolygon(
											s.Frametify.findParallelEdges(e.edges, t, !0, e.orientation, !0),
										);
									}),
									t
								);
							})(s.Frametify);
						t.Ear2Frametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Ear3Frametify = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n._innerPolygons = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										var t = this.inner0Polygon(e),
											n = this.inner1Polygon(e);
										n.polyId.pos = 0;
										var r = this.inner2Polygon(e);
										r.polyId.pos = 1;
										var i = this.inner3Polygon(e);
										i.polyId.pos = 2;
										var o = this.inner4Polygon(e);
										return (
											(o.polyId.pos = 3), (this._innerPolygons = [t, n, r, i, o]), [t, n, r, i, o]
										);
									}),
									(t.prototype.barPolygons = function (e, t) {
										var n = this.poly.edges,
											r = this._innerPolygons[0].edges,
											i = this._innerPolygons[2].edges,
											o = this._innerPolygons[3].edges,
											s = this._innerPolygons[4].edges,
											h = n[0],
											c = n[1],
											u = a.default.segment(
												n[2].start,
												n[2].end.translate(n[2].tangentInEnd().multiply(e[2] / 2)),
											),
											p = n[3],
											f = n[4],
											d = n[5],
											g = a.default.segment(
												n[6].start.translate(n[6].tangentInStart().multiply(e[6] / 2)),
												n[6].end,
											),
											y = n[7],
											m = n[8].tangentInStart().multiply(e[0]),
											v = n[8].tangentInEnd().multiply(e[4]),
											w = a.default.segment(n[8].start.translate(m), n[8].end.translate(v)),
											b = n[9].tangentInStart().multiply(e[0]),
											S = n[9].tangentInEnd().multiply(e[4]),
											_ = [
												h,
												c,
												u,
												p,
												f,
												d,
												g,
												y,
												w,
												a.default.segment(n[9].start.translate(b), n[9].end.translate(S)),
												n[10],
												n[11],
											],
											P = [
												a.default.segment(r[0].start, i[0].end),
												i[1],
												i[2],
												o[1],
												a.default.segment(o[2].start, s[2].end),
												s[3],
												r[2],
												r[3],
												a.default.segment(i[0].start, o[2].end),
												a.default.segment(r[0].end, s[1].end),
												n[10],
												n[11],
											],
											x = this.createBar(_, P, t);
										return (
											(x[8].epDock.stDock = l.Dock.Frame(new l.PolyId(0, -1))),
											(x[8].epDock.etDock = l.Dock.Frame(new l.PolyId(4, -1))),
											(x[9].epDock.stDock = l.Dock.Frame(new l.PolyId(0, -1))),
											(x[9].epDock.etDock = l.Dock.Frame(new l.PolyId(4, -1))),
											(x[10].virtual = !0),
											(x[11].virtual = !0),
											x
										);
									}),
									(t.prototype.inner0Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[0].start,
													t[9].start,
													t[6].start,
													t[7].start,
												]),
											),
											r = [e[0], e[9], e[6], e[7]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner1Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[9].start,
													t[8].start,
													t[8].end,
													t[9].end,
												]),
											),
											r = [e[0], 0, e[6], 0];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner2Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[8].start,
													t[0].end,
													t[1].end,
													t[2].end,
												]),
											),
											r = [e[0], e[2], e[3], e[8]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner3Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[2].end,
													t[3].start,
													t[4].start,
													t[8].end,
												]),
											),
											r = [0, e[3], e[4], e[8]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner4Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[5].end,
													t[6].start,
													t[9].end,
													t[4].end,
												]),
											),
											r = [0, e[9], e[6], e[7]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.findInnerPoly = function (e, t) {
										return new h.WinPolygon(
											s.Frametify.findParallelEdges(e.edges, t, !0, e.orientation, !0),
										);
									}),
									t
								);
							})(s.Frametify);
						t.Ear3Frametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HalfKfcFrametify = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n._innerPolygons = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										var t = this.inner0Polygon(e),
											n = this.inner1Polygon(e);
										return (n.polyId.pos = 0), (this._innerPolygons = [t, n]), [t, n];
									}),
									(t.prototype.barPolygons = function (e, t) {
										var n = this.poly.edges,
											r = this._innerPolygons[0].edges,
											i = this._innerPolygons[1].edges,
											o = [
												n[0],
												n[1],
												n[2],
												n[3],
												a.default.segment(
													n[4].start,
													n[4].end.translate(n[4].tangentInEnd().multiply(e[1])),
												),
												n[5],
											],
											s = [r[0], a.default.segment(r[1].start, i[1].end), i[2], i[3], i[0], r[3]];
										t[0] = t[5] = l.EdgeJointWay.Default;
										var h = this.createBar(o, s, t);
										return (h[5].virtual = !0), h;
									}),
									(t.prototype.inner0Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[0].start,
													t[0].end,
													t[4].end,
													t[4].start,
												]),
											),
											r = [e[0], e[1], 0, 0],
											i = this.findInnerPoly(n, r);
										return (i.edDock.docks[3] = l.Dock.None()), i;
									}),
									(t.prototype.inner1Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[4].start,
													t[4].end,
													t[2].start,
													t[2].end,
												]),
											),
											r = [e[4], e[1], e[2], e[3]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.findInnerPoly = function (e, t) {
										return new h.WinPolygon(
											s.Frametify.findParallelEdges(e.edges, t, !0, e.orientation, !0),
										);
									}),
									t
								);
							})(s.Frametify);
						t.HalfKfcFrametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Kfc4Frametify = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n._innerPolygons = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										var t = this.inner0Polygon(e),
											n = this.inner1Polygon(e);
										n.polyId.pos = 0;
										var r = this.inner2Polygon(e);
										r.polyId.pos = 1;
										var i = this.inner3Polygon(e);
										return (i.polyId.pos = 2), (this._innerPolygons = [t, n, r, i]), [t, n, r, i];
									}),
									(t.prototype.barPolygons = function (e, t) {
										var n = this.poly.edges,
											r = this._innerPolygons[0].edges,
											i = this._innerPolygons[1].edges,
											o = this._innerPolygons[2].edges,
											s = [
												n[0],
												n[1],
												n[2],
												n[3],
												n[4],
												n[5],
												n[6],
												a.default.segment(
													n[7].start.translate(n[7].tangentInStart().multiply(e[4])),
													n[7].end.translate(n[7].tangentInEnd().multiply(e[2])),
												),
											],
											h = [
												r[0],
												r[1],
												a.default.segment(r[2].start, i[2].end),
												i[3],
												a.default.segment(i[0].start, o[0].end),
												o[1],
												o[2],
												i[1],
											];
										return (t[0] = t[7] = t[8] = l.EdgeJointWay.Default), this.createBar(s, h, t);
									}),
									(t.prototype.inner0Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[0].start,
													t[0].end,
													t[2].start,
													t[7].end,
												]),
											),
											r = [e[0], e[1], e[2], 0];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner1Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[4].start,
													t[7].start,
													t[7].end,
													t[2].end,
												]),
											),
											r = [e[4], e[7], e[2], e[3]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner2Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[7].start,
													t[4].end,
													t[6].start,
													t[6].end,
												]),
											),
											r = [e[4], e[5], e[6], 0];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner3Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[6].end,
													t[6].start,
													t[0].end,
													t[0].start,
												]),
											),
											r = Array(4).fill(0);
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.findInnerPoly = function (e, t) {
										return new h.WinPolygon(
											s.Frametify.findParallelEdges(e.edges, t, !0, e.orientation, !0),
										);
									}),
									t
								);
							})(s.Frametify);
						t.Kfc4Frametify = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Hollow2Frametify = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								(t.prototype.innerPolygons = function (e) {
									var t = this.inner0Polygon(e),
										n = this.inner1Polygon(e);
									n.polyId.pos = 0;
									var r = this.inner2Polygon(e);
									return (r.polyId.pos = 1), (this._innerPolygons = [t, n, r]), [t, n, r];
								}),
								t
							);
						})(n(9).Kfc4Frametify);
						t.Hollow2Frametify = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HalfKfc2Frametify = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(2),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.poly = t), (n._innerPolygons = []), n;
								}
								return (
									i(t, e),
									(t.prototype.innerPolygons = function (e) {
										var t = this.inner0Polygon(e),
											n = this.inner1Polygon(e);
										n.polyId.pos = 0;
										var r = this.inner2Polygon(e);
										return (r.polyId.pos = 1), (this._innerPolygons = [t, n, r]), [t, n, r];
									}),
									(t.prototype.barPolygons = function (e, t) {
										var n = this.poly.edges,
											r = this._innerPolygons[0].edges,
											i = this._innerPolygons[1].edges,
											o = this._innerPolygons[2].edges,
											s = [
												n[0],
												n[1],
												n[2],
												n[3],
												a.default.segment(n[4].start, n[4].end),
												a.default.segment(
													n[5].start.translate(n[5].tangentInStart().multiply(e[2])),
													n[5].end.translate(n[5].tangentInEnd().multiply(e[0])),
												),
												n[6],
											],
											h = [
												a.default.segment(r[0].start, i[0].end),
												i[1],
												a.default.segment(i[2].start, o[2].end),
												o[3],
												o[0],
												i[3],
												r[3],
											];
										t[0] = t[6] = t[7] = l.EdgeJointWay.Default;
										var c = this.createBar(s, h, t);
										return (c[6].virtual = !0), c;
									}),
									(t.prototype.inner0Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[0].start,
													t[5].end,
													t[4].end,
													t[4].start,
												]),
											),
											r = [e[0], 0, 0, 0],
											i = this.findInnerPoly(n, r);
										return (i.edDock.docks[3] = l.Dock.None()), i;
									}),
									(t.prototype.inner1Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[5].end,
													t[0].end,
													t[1].end,
													t[5].start,
												]),
											),
											r = [e[0], e[1], e[2], e[5]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.inner2Polygon = function (e) {
										var t = this.poly.edges,
											n = new h.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													t[4].start,
													t[4].end,
													t[5].start,
													t[2].end,
												]),
											),
											r = [e[4], 0, e[2], e[3]];
										return this.findInnerPoly(n, r);
									}),
									(t.prototype.findInnerPoly = function (e, t) {
										return new h.WinPolygon(
											s.Frametify.findParallelEdges(e.edges, t, !0, e.orientation, !0),
										);
									}),
									t
								);
							})(s.Frametify);
						t.HalfKfc2Frametify = c;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.VirtualBarFix = void 0);
						var r = (function () {
							function e(e) {
								(this.frame = e), (this.positions = []);
							}
							return (
								(e.prototype.record = function () {
									var e = this,
										t = this.frame.frameManager.allBars;
									this.frame.frameManager._virtuals.forEach(function (n) {
										var r = t.find(function (e) {
											return e.polyId.equalTo(n);
										});
										r && e.positions.push(r.polygon.mulShape.middle());
									});
								}),
								(e.prototype.recovery = function () {
									var e = [],
										t = this.frame.frameManager.allBars;
									this.positions.forEach(function (n) {
										var r = t.find(function (e) {
											return e.polygon.mulShape.contains(n);
										});
										r && e.push(r.polyId);
									}),
										(this.frame.frameManager._virtuals = e);
								}),
								e
							);
						})();
						t.VirtualBarFix = r;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SpecialMulTool = void 0);
						var l = s(n(0)),
							h = n(5),
							c = n(9),
							u = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = {});
									var i = e.call(this, t, n) || this;
									return (i.options = r), (i.verticallySwipe = !1), i;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'shouldRelease', {
										get: function () {
											return this.name !== h.ToolType.mullion_inner_eq_split;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.finishDrag = function (e) {
										var t = this;
										this.verticallySwipe = this.isVerticallySwipe();
										var n = !1;
										this.view.shapeManager.shapem.forEach(function (r) {
											a(
												r.unusedPoly,
												r.sashManager.allSashes
													.map(function (e) {
														return e.unusedPoly;
													})
													.flat(),
											).forEach(function (r) {
												if (1 === e.edges.length) {
													if (!r.contains(e.edges[0].middle())) return;
												} else if (0 === r.polygon.intersect(e.polygon).length) return;
												(t.curPt = r.box.center),
													t.view.shapeManager.addMullion(t.makeCutLine(t.name)),
													(n = !0);
											});
										}),
											n || this.view.toolManager.releaseTool();
									}),
									(t.prototype.makeCutLine = function (e) {
										switch (e) {
											case h.ToolType.mullion_spin:
												return new c.SpinLine(this.curPt).create();
											case h.ToolType.mullion_frametify_like:
												return new c.FrametifyLike(this.curPt);
											case h.ToolType.mullion_inner_eq_split:
												return new c.InnerEqSplit(
													Object.assign(this.options, {
														location: this.curPt,
														vertical: this.verticallySwipe,
													}),
												);
											default:
												throw new Error('unknow cutline type');
										}
									}),
									(t.prototype.isVerticallySwipe = function () {
										var e = l.default.vector(this.firstPt, this.curPt).slope,
											t = Math.round((180 * e) / Math.PI);
										return (t > 45 && t < 135) || (t > 225 && t < 315);
									}),
									t
								);
							})(h.DragDrawTool);
						t.SpecialMulTool = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CompoundLineTool = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(9),
							h = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'shouldRelease', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.finishDrag = function (e) {
										var t = l.CompoundLineCreator.Instance.create(this.name);
										t.translate(a.default.vector(t.pt, this.curPt)),
											this.view.shapeManager.addMullion(t);
									}),
									t
								);
							})(s.DragDrawTool);
						t.CompoundLineTool = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SemiArcTool = void 0);
						var o = n(5),
							a = n(49),
							s = n(29),
							l = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'shouldRelease', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.finishDrag = function (e) {
										var t = this.makeCutLine(this.name);
										this.view.shapeManager.addMullion(t);
									}),
									(t.prototype.makeCutLine = function (e) {
										switch (e) {
											case o.ToolType.mullion_semi_arc_pro:
												return new s.SemiArcPro(this.curPt);
											case o.ToolType.mullion_semi_arc_pro2:
												return new s.SemiArcPro2(this.curPt);
											case o.ToolType.mullion_half_wheel:
												return new s.HalfWheel(this.curPt);
											case o.ToolType.mullion_semi_segment_pro:
												return new s.SemiSegmentPro(this.curPt);
											default:
												return new s.SemiArc(this.curPt);
										}
									}),
									t
								);
							})(a.DragDrawTool);
						t.SemiArcTool = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExpandDirection = t.EditDimTool = void 0);
						var a,
							s = o(n(0)),
							l = n(6),
							h = n(13),
							c = n(7),
							u = n(5),
							p = n(2),
							f = n(1),
							d = (function (e) {
								function t(t) {
									var n = e.call(this, u.ToolType.editDim, t) || this;
									return (n.view = t), (n.prevPt = new s.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'curDimInfo', {
										get: function () {
											return this.vshape.attrs.data.dimInfo;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'host', {
										get: function () {
											return this.vshape.attrs.robot.parent;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'allDimInfos', {
										get: function () {
											return this.host.dim.diMgr.allDims;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										e.prototype.dragmove.call(this, t);
										var n = this.curPt,
											r = s.default.vector(n.x - this.prevPt.x, n.y - this.prevPt.y),
											i = this.vshape.attrs.data.dimInfo,
											o = this.vshape.attrs.robot;
										p.ShapeHelper.restoreShapeMatrix(this.vshape),
											o &&
												((r = r.projectionOn(i.dir.rotate90CW())),
												(i.offvec = i.offvec.add(r)),
												o.draw(this.view),
												this.view.refresh(),
												(this.prevPt = n));
									}),
									(t.prototype.mousedone = function (t) {
										this.view.mometoManager.checkPoint(), e.prototype.mousedone.call(this, t);
									}),
									(t.prototype.dbclick = function (t) {
										var n = this;
										if (
											(e.prototype.dbclick.call(this, t),
											(this.vshape = t.target),
											this.view.dimManager.mode !== h.dimModeEnum.calculate)
										) {
											if (
												!(
													this.host instanceof f.ThreedArcFrame &&
													this.curDimInfo.type === f.DimType.Line &&
													[1, 3].some(function (e) {
														return n.curDimInfo.edgeIdx === e;
													})
												)
											) {
												var r = this.isMiddleDim(this.curDimInfo),
													i = this.findEdgeOn(this.curDimInfo),
													o = this.isVertical(i),
													a = u.EditorStyle.Normal;
												this.curDimInfo.frameDim &&
													!this.host.polygon.controlDimFlag &&
													(a = u.EditorStyle.Direction),
													r && (a = u.EditorStyle.DirectionWithBoth),
													c.DrawParams.Ins.customDimEditor && p.SystemParam.isMobileDevice
														? this.emitDimEdit(t.evt, a, o)
														: this.showNumberEditor(
																t,
																c.UnitConvertion.Ins.length(this.curDimInfo.value),
																this.onConfirm.bind(this),
																a,
																o,
														  );
											}
										} else this.editDimName(this.curDimInfo, t);
									}),
									(t.prototype.editDimName = function (e, t) {
										var n = this;
										this.showEditor(t.evt.pageX, t.evt.pageY, e.name, function (r) {
											r.length < 1 ||
												((e.name = r),
												n.view.dimManager.updateDimByName(r, e.value),
												n.view.refresh(),
												n.view.mometoManager.checkPoint(),
												n.view.eventBus.emit({
													type: l.EventType.dim_name_modified,
													payload: t,
												}));
										});
									}),
									(t.prototype.emitDimEdit = function (e, t, n) {
										void 0 === t && (t = u.EditorStyle.Normal),
											this.view.eventBus.emit({
												type: l.EventType.dim_edit,
												payload: {
													event: e,
													initValue: c.UnitConvertion.Ins.length(this.curDimInfo.value),
													onConfirm: this.onConfirm.bind(this),
													style: t,
													isVertical: n,
												},
											});
									}),
									(t.prototype.prompt = function () {
										var e = 'mullion_locked_by_equal_split';
										this.view.eventBus.emit({
											type: l.EventType.prompt,
											payload: {
												code: e,
												message: c.DrawParams.Ins.lang(e),
											},
										});
									}),
									(t.prototype.mulLockedByEq = function (e) {
										if (
											e instanceof f.MullionDimInfo ||
											e instanceof f.InnerMullionDimInfo ||
											(e instanceof f.InnerSpaceDimInfo &&
												(e.refType === f.InnerSpaceDimRefType.mullion ||
													e.refType === f.InnerSpaceDimRefType.innermullion))
										) {
											var t = e.targetBar;
											if (t) {
												var n = t.topFrame.mulManager.splitter.lines[t.polyId.idx];
												if (
													n &&
													n.equalSplit !== p.EqualSplitType.None &&
													n.equalSplitSide === p.EqualSplitSide.Both
												)
													return !0;
											}
										}
										return !1;
									}),
									(t.prototype.onConfirm = function (e, t, n) {
										var r = this;
										(e = c.UnitConvertion.Ins.unitlessLength(e)),
											(t = c.UnitConvertion.Ins.unitlessLength(t));
										try {
											this.mulLockedByEq(this.curDimInfo) && this.prompt(),
												this.isMiddleDim(this.curDimInfo)
													? this.expandMullionDim(
															this.curDimInfo,
															e - t,
															n,
															this.findEdgeOn(this.curDimInfo),
													  )
													: this.curDimInfo.frameDim
													? (this.curDimInfo.applyFrame(e, n),
													  this.view.shapeManager.shapem.forEach(function (e) {
															return e.draw(r.view);
													  }),
													  this.updateTotalSizeDim(),
													  this.view.shapeManager.refreshWalls(),
													  f.TopView.optimize(this.view.shapeManager.shapem))
													: this.curDimInfo.applyDiff(e, this.prevPt),
												this.view.mometoManager.checkPoint();
										} catch (e) {
											if (p.Utils.isFlattenError(e))
												return void this.view.mometoManager.recoverLast();
											throw e;
										}
									}),
									(t.prototype.findEdgeOn = function (e) {
										return e.type === f.DimType.InnerMullion
											? this.host.mulManager.bars[e.edgeIdx].polygon.mulShape
											: this.host.polygon.edge(e.edgeIdx);
									}),
									(t.prototype.isMiddleDim = function (e) {
										if (e.type !== f.DimType.Mullion && e.type !== f.DimType.InnerMullion)
											return !1;
										var t = this.countDimsOnEdge(e.edgeIdx, e.type);
										return e.mulDimIdx > 0 && e.mulDimIdx < t - 1;
									}),
									(t.prototype.countDimsOnEdge = function (e, t) {
										return this.allDimInfos.filter(function (n) {
											return n.edgeIdx === e && n.type === t;
										}).length;
									}),
									(t.prototype.expandMullionDim = function (e, t, n, r) {
										var i = this,
											o = n === a.BothSide ? [a.LeftOrUp, a.RightOrDown] : [n],
											s = n === a.BothSide ? t / 2 : t;
										o.forEach(function (t) {
											if (e.isReverse(t)) {
												var n = i.fetchMullionDimInfo(e, t, r);
												n && n.applyDiff(n.value - s, i.prevPt);
											} else e.applyDiff(e.value + s, i.prevPt);
										});
									}),
									(t.prototype.fetchMullionDimInfo = function (e, t, n) {
										var r = this.reverseMulDimIdxRequired(n, t === a.RightOrDown) ? -1 : 1,
											i = e.mulDimIdx + 1 * r;
										return this.allDimInfos.find(function (t) {
											return t.mulDimIdx === i && t.edgeIdx === e.edgeIdx && t.type === e.type;
										});
									}),
									(t.prototype.isVertical = function (e) {
										var t = Math.round((180 * e.tangentInStart().slope) / Math.PI);
										return (t > 45 && t < 135) || (t > 225 && t < 315);
									}),
									(t.prototype.reverseMulDimIdxRequired = function (e, t) {
										var n = e.tangentInStart();
										return this.isVertical(e)
											? (n.y > 0 && !t) || (n.y < 0 && t)
											: (n.x > 0 && !t) || (n.x < 0 && t);
									}),
									(t.prototype.updateTotalSizeDim = function () {
										this.view.shapeManager.updateTotalWidth(),
											this.view.shapeManager.updateTotalHeight();
									}),
									t
								);
							})(u.Tool);
						(t.EditDimTool = d),
							(function (e) {
								(e[(e.LeftOrUp = 1)] = 'LeftOrUp'),
									(e[(e.RightOrDown = 2)] = 'RightOrDown'),
									(e[(e.BothSide = 3)] = 'BothSide');
							})((a = t.ExpandDirection || (t.ExpandDirection = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditDimensionTool = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(7),
							h = n(13),
							c = n(5),
							u = n(2),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, c.ToolType.editDimension, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'attrs', {
										get: function () {
											return this.vshape.attrs;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'robot', {
										get: function () {
											return this.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dbclick = function (t) {
										var n = this;
										e.prototype.dbclick.call(this, t), (this.vshape = t.target);
										var r = t.target.attrs.data.dimInfo;
										if (this.view.dimManager.mode === h.dimModeEnum.calculate)
											this.showEditor(t.evt.pageX, t.evt.pageY, r.name, function (e) {
												e.length < 1 ||
													((r.name = e),
													n.view.dimManager.updateDimByName(e, r.value),
													n.view.refresh(),
													n.view.mometoManager.checkPoint(),
													n.view.eventBus.emit({
														type: s.EventType.dim_name_modified,
														payload: t,
													}));
											});
										else {
											var i = function (e) {
													(e = l.UnitConvertion.Ins.unitlessLength(e)),
														r.applyDiff(e),
														n.view.refresh(),
														n.view.mometoManager.checkPoint();
												},
												o = l.UnitConvertion.Ins.length(r.value);
											if (l.DrawParams.Ins.customDimEditor && u.SystemParam.isMobileDevice)
												return void this.view.eventBus.emit({
													type: s.EventType.dim_edit,
													payload: {
														event: t.evt,
														initValue: o,
														onConfirm: i,
													},
												});
											this.showNumberEditor(t, o, i);
										}
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.vshape = t.target),
											(this.prevPt = this.curPt);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											this.vshape && u.ShapeHelper.restoreShapeMatrix(this.vshape),
											requestAnimationFrame(function () {
												if (n.vshape) {
													var e = a.default.vector(n.prevPt, n.curPt);
													(e = e.projectionOn(
														a.default.vector(n.robot.from, n.robot.to).rotate90CW(),
													)),
														(n.robot.offset = n.robot.offset.add(e)),
														n.robot.updatePoly(),
														n.robot.draw(n.view),
														n.view.refresh(),
														(n.prevPt = n.curPt);
												}
											});
									}),
									(t.prototype.mousedone = function (t) {
										this.view.mometoManager.checkPoint(),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t);
									}),
									t
								);
							})(c.Tool);
						t.EditDimensionTool = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditLabelTool = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(5),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, l.ToolType.editLabel, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target),
											(this.label = this.vshape.attrs.robot);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											void 0 !== this.label &&
												(requestAnimationFrame(function () {
													n.vshape && n.doTask();
												}),
												s.ShapeHelper.restoreShapeMatrix(this.vshape));
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.label &&
											(this.doTask(),
											this.view.mometoManager.checkPoint(),
											s.ShapeHelper.restoreShapeMatrix(this.vshape),
											(this.label = void 0),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t));
									}),
									(t.prototype.doTask = function () {
										if (void 0 !== this.label) {
											var e = this.curPt,
												t = a.default.vector(e.x - this.prevPt.x, e.y - this.prevPt.y);
											(this.label.offvec = this.label.offvec.add(t)),
												this.label.updatePoly(),
												this.label.draw(this.view),
												(this.prevPt = e);
										}
									}),
									t
								);
							})(l.Tool);
						t.EditLabelTool = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditSashTool = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(5),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, l.ToolType.editSash, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'editTarget', {
										get: function () {
											if (this.sash) return this.sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
										var n = this.vshape.attrs.robot;
										this.sash = n.parent;
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											void 0 !== this.sash &&
												(!this.editTarget || this.editTarget.offvecEnabled
													? requestAnimationFrame(function () {
															n.vshape && n.doTask();
													  })
													: s.ShapeHelper.restoreShapeMatrix(this.vshape));
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.sash &&
											((this.editTarget && !this.editTarget.offvecEnabled) ||
												(this.doTask(!0),
												this.view.mometoManager.checkPoint(),
												s.ShapeHelper.restoreShapeMatrix(this.vshape),
												(this.sash = void 0),
												(this.vshape = void 0),
												e.prototype.mousedone.call(this, t)));
									}),
									(t.prototype.doTask = function (e) {
										void 0 === e && (e = !1);
										var t = this.curPt,
											n = a.default.vector(t.x - this.prevPt.x, t.y - this.prevPt.y),
											r = this.editTarget;
										r &&
											((r.offvec = r.offvec.add(n)),
											r.translate(n),
											this.vshape.attrs.robot.translate(n.invert()),
											e &&
												(r.polygon.translate(r.offvec.invert()),
												r.updatePoly(r.polygon),
												r.draw(this.view))),
											(this.prevPt = t);
									}),
									t
								);
							})(l.Tool);
						t.EditSashTool = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditHingeTool = void 0);
						var o = n(1),
							a = n(5),
							s = n(13),
							l = (function (e) {
								function t(t) {
									var n = e.call(this, a.ToolType.editHinge, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									(t.prototype.onHardwareEdited = function (e) {
										var t = this;
										if (this.sash.isStandalone && this.sash instanceof o.PushSash) {
											var n = this.sash.hardwareManager;
											if (
												(n.hinges.forEach(function (n) {
													(n.edgeIndex = e), n.updatePoly(), n.draw(t.view);
												}),
												n.handle instanceof o.Handle)
											) {
												var r = n.properHandleIndexByHinge(e);
												(n.handle.edgeIndex = r), n.handle.updatePoly(), n.handle.draw(this.view);
											}
											n.indicator.updatePoly(),
												n.indicator.draw(this.view),
												this.sash.topFrame.sashManager.sashes
													.filter(function (e) {
														return e !== t.sash;
													})
													.filter(function (e) {
														return e.polyId.equalTo(t.sash.polyId);
													})
													.filter(function (e) {
														return e instanceof o.PushSash;
													})
													.forEach(function (e) {
														var r = e.hardwareManager;
														r.handle instanceof o.Handle &&
															(r.handle.alignTo(t.hardware, !0),
															r.handle.updatePoly(),
															r.handle.draw(t.view),
															r.hinges.forEach(function (e, r) {
																e.alignTo(n.hinges[r]), e.updatePoly(), e.draw(t.view);
															}),
															r.indicator.updatePoly(),
															r.indicator.draw(t.view),
															r.matchOpenDirection());
													});
										}
										this.sash.topFrame.sashManager.allSashes
											.filter(function (e) {
												return e !== t.sash;
											})
											.filter(function (e) {
												return e.polyId.equalTo(t.sash.polyId);
											})
											.map(function (e) {
												return e.hardwareManager;
											})
											.filter(function (e) {
												return (
													e instanceof s.PushSashHardwareManager ||
													e instanceof s.FoldHardwareManager
												);
											})
											.forEach(function (e) {
												var n = t.sash.hardwareManager;
												e.hinges.forEach(function (e, r) {
													e.alignTo(n.hinges[r]), e.updatePoly(), e.draw(t.view);
												});
											}),
											this.broadcastTopViewChange();
									}),
									t
								);
							})(a.EditHardwareOnFrameTool);
						t.EditHingeTool = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditHandleTool = void 0);
						var o = n(6),
							a = n(1),
							s = n(5),
							l = n(13),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, s.ToolType.editHandle, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									(t.prototype.onHardwareEdited = function (t) {
										var n = this;
										if (
											(e.prototype.onHardwareEdited.call(this, t),
											this.sash.isStandalone &&
												this.sash instanceof a.PushSash &&
												this.sash.slide === l.OpenDirection.None)
										) {
											var r = this.sash.hardwareManager,
												i = r.properHingeIndexByHandle(t);
											r.hinges.forEach(function (e) {
												(e.edgeIndex = i), e.updatePoly(), e.draw(n.view);
											}),
												r.indicator.updatePoly(),
												r.indicator.draw(this.view),
												this.sash.topFrame.sashManager.sashes
													.filter(function (e) {
														return e !== n.sash;
													})
													.filter(function (e) {
														return e.polyId.equalTo(n.sash.polyId);
													})
													.filter(function (e) {
														return e instanceof a.PushSash;
													})
													.forEach(function (e) {
														var t = e.hardwareManager;
														t.handle instanceof a.Handle &&
															(t.handle.alignTo(n.hardware, !0),
															t.handle.updatePoly(),
															t.handle.draw(n.view),
															t.hinges.forEach(function (e) {
																(e.edgeIndex = i), e.updatePoly(), e.draw(n.view);
															}),
															t.indicator.updatePoly(),
															t.indicator.draw(n.view),
															t.matchOpenDirection());
													});
										}
										this.broadcastHandleChange(), this.broadcastTopViewChange();
									}),
									(t.prototype.broadcastHandleChange = function () {
										this.view.eventBus.emit({
											type: o.EventType.handle_position_change,
											payload: {
												pid: this.sash.polyId,
												view: this.view,
											},
										});
									}),
									t
								);
							})(s.EditHardwareOnFrameTool);
						t.EditHandleTool = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditCommercialHandleTool = void 0);
						var o = n(5),
							a = (function (e) {
								function t(t) {
									var n = e.call(this, o.ToolType.editCommercialHandle, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									(t.prototype.onHardwareEdited = function (t) {
										e.prototype.onHardwareEdited.call(this, t);
										var n = this.sash.hardwareManager;
										n.indicator.updatePoly(), n.indicator.draw(this.view);
									}),
									t
								);
							})(o.EditHardwareOnFrameTool);
						t.EditCommercialHandleTool = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditCrossHandleTool = void 0);
						var o = n(5),
							a = n(115),
							s = n(1),
							l = (function (e) {
								function t(t) {
									var n = e.call(this, o.ToolType.editCrossHandle, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									(t.prototype.doTask = function () {
										var e = this;
										if (void 0 !== this.hardware) {
											var t = this.hardware.manager.sash;
											t.parent instanceof s.DoubleKfcSash
												? t.parent.sashes.forEach(function (t) {
														var n = t.hardwareManager.handle;
														(n.offsetPoint = e.curPt), n.updatePoly(), n.draw(e.view);
												  })
												: ((this.hardware.offsetPoint = this.curPt),
												  this.hardware.updatePoly(),
												  this.hardware.draw(this.view));
										}
									}),
									t
								);
							})(a.EditHardwareTool);
						t.EditCrossHandleTool = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShutterTool = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								(t.prototype.addFenes = function (e) {
									this.view.shapeManager.addShutter(e);
								}),
								t
							);
						})(n(50).FenesTool);
						t.ShutterTool = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FoldTool = void 0);
						var o = n(5),
							a = n(50),
							s = n(1),
							l = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (
										(t.shapeTypes = new Map([
											[o.ToolType.foldSash, s.ShapeType.FoldSash],
											[o.ToolType.foldScreen, s.ShapeType.FoldScreen],
											[o.ToolType.foldShade, s.ShapeType.FoldShade],
										])),
										t
									);
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										this.view.shapeManager.addFold(e, this.shapeTypes.get(this.name)),
											this.view.toolManager.releaseTool();
									}),
									t
								);
							})(a.FenesTool);
						t.FoldTool = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SlideTool = void 0);
						var o = n(64),
							a = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										var t = this.name === o.ToolType.shadeSlide ? 26 : void 0;
										this.view.shapeManager.addSlide(e, t), this.view.toolManager.releaseTool();
									}),
									t
								);
							})(n(50).FenesTool);
						t.SlideTool = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CornerJoinerTool = void 0);
						var o = (function (e) {
							function t(t, n, r) {
								var i = e.call(this, t, n) || this;
								return (i.view = n), (i.shapeType = r), i;
							}
							return (
								i(t, e),
								(t.prototype.restart = function () {
									e.prototype.restart.call(this), this.view.toolManager.releaseTool();
								}),
								(t.prototype.finishDrag = function (e) {
									this.view.shapeManager.addCornerJoiner(this.curPt, this.shapeType);
								}),
								t
							);
						})(n(5).DragDrawTool);
						t.CornerJoinerTool = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditCornerRobot = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(5),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, l.ToolType.editCornerRobot, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t);
										var r = this.curPt,
											i = a.default.vector(r.x - this.prevPt.x, r.y - this.prevPt.y),
											o = this.prevPt.clone();
										(this.prevPt = this.curPt),
											s.ShapeHelper.restoreShapeMatrix(this.vshape),
											requestAnimationFrame(function () {
												if (void 0 !== n.vshape)
													if (n.vshape.attrs.data.isMiddleShape)
														n.vshape.attrs.robot.drag(i, n.view);
													else {
														var e = n.vshape.attrs.robot.hostShape,
															t = n.vshape.attrs.data.cornerEdgeIndex;
														(n.magneticPoint = n.detectSnaps(e.polygon.edge(t), e)),
															n.doTask(!1, o, n.curPt);
													}
											});
									}),
									(t.prototype.doTask = function (e, t, n) {
										if ((void 0 === e && (e = !1), void 0 !== this.vshape)) {
											var r = this.vshape.attrs.robot.hostShape,
												i = this.vshape.attrs.data.cornerEdgeIndex,
												o = r.polygon.edge(i),
												s = a.default.line(o.start, o.end),
												l = a.default.vector(t, n);
											e &&
												this.magneticPoint &&
												(l = a.default.vector(
													this.magneticPoint.projectionOn(s),
													this.magneticPoint,
												));
											var h = this.vshape.attrs.data.poly;
											this.vshape.attrs.robot.dragLength(h, i, l, this.view),
												this.view.shapeManager.refreshTotalHeight(),
												this.view.shapeManager.refreshTotalWidth();
										}
									}),
									(t.prototype.mousedone = function (t) {
										this.hideSnaps(),
											void 0 !== this.vshape &&
												(this.vshape.attrs.data.isMiddleShape ||
													(this.magneticPoint && (this.curPt = this.magneticPoint),
													this.doTask(!0, this.prevPt, this.curPt)),
												(this.vshape = void 0),
												this.view.mometoManager.checkPoint(),
												e.prototype.mousedone.call(this, t));
									}),
									t
								);
							})(l.Tool);
						t.EditCornerRobot = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditCornerJoiner = void 0);
						var l = s(n(0)),
							h = n(11),
							c = n(2),
							u = n(5),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, u.ToolType.editCornerJoiner, t) || this;
									return (
										(n.view = t),
										(n.prevPt = new l.default.Point()),
										(n.dragOffsetVec = l.default.vector()),
										(n.snapFrames = []),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'cornerJoiner', {
										get: function () {
											return this.vshape.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target),
											(this.snapFrames = []);
										var n = this.vshape.attrs.robot,
											r = new h.FrameUtil(this.view);
										this.snapFrames = r.getIntersectFramesOnce(n.cornerEdge);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											c.ShapeHelper.restoreShapeMatrix(this.vshape);
										var r = this.vshape.attrs.robot;
										requestAnimationFrame(function () {
											if (void 0 !== n.vshape) {
												var e, t;
												(n.dragOffsetVec = l.default.vector()), n.hideSnaps();
												var i = l.default.line(r.cornerEdge.start, r.cornerEdge.end),
													o = l.default.line(r.hostEdge.start, r.hostEdge.end),
													a = n.vshape.attrs.robot;
												if (
													((n.magneticPoint = n.detectSnaps(r.cornerEdge, a, !0)),
													n.magneticPoint && (e = n.magneticPoint.clone()),
													(n.magneticPoint = n.detectSnaps(r.hostEdge, a, !0)),
													n.magneticPoint && (t = n.magneticPoint.clone()),
													void 0 !== e && void 0 === t)
												) {
													var s = e.projectionOn(i);
													(n.dragOffsetVec = l.default.vector(s, e)), (n.magneticPoint = e.clone());
												} else
													void 0 === e && void 0 !== t
														? ((s = t.projectionOn(o)),
														  (n.dragOffsetVec = l.default.vector(s, t)),
														  (n.magneticPoint = t.clone()))
														: void 0 !== e &&
														  void 0 !== t &&
														  (e.distanceTo(i)[0] > t.distanceTo(o)[0]
																? ((s = t.projectionOn(o)),
																  (n.dragOffsetVec = l.default.vector(s, t)),
																  (n.magneticPoint = t.clone()))
																: ((s = e.projectionOn(i)),
																  (n.dragOffsetVec = l.default.vector(s, e)),
																  (n.magneticPoint = e.clone())));
												n.doTask();
											}
										});
									}),
									(t.prototype.doTask = function (e) {
										if ((void 0 === e && (e = !1), void 0 !== this.vshape)) {
											var t = l.default.vector(this.prevPt, this.curPt);
											e && this.magneticPoint && (t = this.dragOffsetVec);
											var n = this.vshape.attrs.robot;
											n.translate(t),
												n.draw(this.view),
												e && (n.skewFrame(this.view), this.view.shapeManager.refreshDimStatus()),
												(this.prevPt = this.curPt);
										}
									}),
									(t.prototype.mousedone = function (t) {
										if (void 0 !== this.vshape) {
											this.doTask(!0),
												this.magneticPoint && (this.hideSnaps(), (this.curPt = this.magneticPoint));
											var n = this.vshape.attrs.robot,
												r = new h.FrameUtil(this.view).getIntersectFramesOnce(n.cornerEdge),
												i = (function (e, t) {
													if (e.constructor === Array && t.constructor === Array) {
														var n = new Set(e),
															r = new Set(t);
														return Array.from(
															new Set(
																a(n).filter(function (e) {
																	return !r.has(e);
																}),
															),
														);
													}
													return [];
												})(this.snapFrames, r);
											i.length > 0 &&
												i.forEach(function (e) {
													var t = e.gshape.parent;
													if (t) {
														var n = t.getAttr('data');
														n &&
															n.hasOwnProperty('isCornerGroup') &&
															c.ShapeHelper.restoreShapeMatrix(t);
													}
												}),
												this.view.mometoManager.checkPoint(),
												e.prototype.mousedone.call(this, t),
												(this.vshape = void 0);
										}
									}),
									t
								);
							})(u.Tool);
						t.EditCornerJoiner = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimArbitraryTool = void 0);
						var a = n(49),
							s = n(7),
							l = n(1),
							h = n(2),
							c = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (
										(r.tool = t),
										(r.view = n),
										(r.vshapes = []),
										(r.snapDist = r.view.params.extraDimSnapDist),
										r
									);
								}
								return (
									i(t, e),
									(t.prototype.initialTool = function () {
										e.prototype.initialTool.call(this), this.showAllPoints();
									}),
									(t.prototype.getAllPoints = function () {
										var e,
											t,
											n,
											r,
											i,
											a,
											s = new Map(),
											l = function (e) {
												var t,
													n,
													r = e.polygon.vertices;
												try {
													for (var i = ((t = void 0), o(r)), a = i.next(); !a.done; a = i.next()) {
														var l = a.value;
														s.set([l.x, l.y].toString(), [l, e]);
													}
												} catch (e) {
													t = {
														error: e,
													};
												} finally {
													try {
														a && !a.done && (n = i.return) && n.call(i);
													} finally {
														if (t) throw t.error;
													}
												}
												e.mulManager.dockMgr.forDoTask(function (t, n) {
													var r, i;
													try {
														for (
															var a = ((r = void 0), o(n)), l = a.next();
															!l.done;
															l = a.next()
														) {
															var c = l.value;
															s.set([c.pt.x, c.pt.y].toString(), [c.pt, e]);
														}
													} catch (e) {
														r = {
															error: e,
														};
													} finally {
														try {
															l && !l.done && (i = a.return) && i.call(a);
														} finally {
															if (r) throw r.error;
														}
													}
													return h.DockTaskStatus.OK;
												});
											};
										try {
											for (
												var c = o(this.view.shapeManager.shapem), u = c.next();
												!u.done;
												u = c.next()
											)
												l(u.value);
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												u && !u.done && (t = c.return) && t.call(c);
											} finally {
												if (e) throw e.error;
											}
										}
										try {
											for (
												var p = o(this.view.shapeManager.connectors), f = p.next();
												!f.done;
												f = p.next()
											) {
												var d = f.value,
													g = d.polygon.vertices;
												try {
													for (var y = ((i = void 0), o(g)), m = y.next(); !m.done; m = y.next()) {
														var v = m.value;
														s.set([v.x, v.y].toString(), [v, d]);
													}
												} catch (e) {
													i = {
														error: e,
													};
												} finally {
													try {
														m && !m.done && (a = y.return) && a.call(y);
													} finally {
														if (i) throw i.error;
													}
												}
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												f && !f.done && (r = p.return) && r.call(p);
											} finally {
												if (n) throw n.error;
											}
										}
										return Array.from(s.values());
									}),
									(t.prototype.showAllPoints = function () {
										var e,
											t,
											n = this.getAllPoints();
										this.hideAllPoints();
										try {
											for (var r = o(n), i = r.next(); !i.done; i = r.next()) {
												var a = i.value,
													c = new l.CirclePoly(a[0], this.snapDist),
													u = s.Artisan.recycleShape(c, this.view),
													p = h.ShapeColor.dragRobot;
												u.setAttr('data', {
													poly: c,
													fcolor: p,
													drag: !1,
													isExtraDimPoint: !0,
												}),
													u.setAttr('robot', this),
													this.vshapes.push(u),
													this.view.activeLayer.add(u);
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												i && !i.done && (t = r.return) && t.call(r);
											} finally {
												if (e) throw e.error;
											}
										}
										this.view.refresh();
									}),
									(t.prototype.hideAllPoints = function () {
										this.vshapes.forEach(function (e) {
											return e.hide();
										}),
											(this.vshapes = []);
									}),
									(t.prototype.snapPoint = function (e) {
										var t,
											n,
											r = this.getAllPoints();
										try {
											for (var i = o(r), a = i.next(); !a.done; a = i.next()) {
												var l = a.value;
												if (e.distanceTo(l[0])[0] <= s.DrawParams.Ins.snapVertex) return l;
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (n = i.return) && n.call(i);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									(t.prototype.createDim = function (e) {
										var t;
										(t = e[1] instanceof l.Connector ? e[1].connectedFrames[0] : e[1]),
											(this.extraDim = new l.ExtraDimArbitrary(e[0].clone(), e[0].clone(), t)),
											this.extraDim.createFrameRelation(),
											this.extraDim.draw(this.view);
									}),
									(t.prototype.mousedown = function (t) {
										e.prototype.mousedown.call(this, t);
										var n = this.snapPoint(this.curPt);
										n && this.createDim(n);
									}),
									(t.prototype.mousemove = function (t) {
										e.prototype.mousemove.call(this, t),
											this.auxDrawing || (this.makeAux(), this.drawAux());
									}),
									(t.prototype.recyleAux = function () {
										this.hideAllPoints(), this.view.refresh();
									}),
									(t.prototype.drawAux = function () {
										this.view.refresh();
									}),
									(t.prototype.makeAux = function () {
										this.hideSnaps();
										var e = this.snapPoint(this.curPt);
										e && this.displayCircleSnap(e[0]),
											this.extraDim &&
												((this.extraDim.ePt = this.curPt.clone()),
												this.extraDim.updatePoly(),
												this.extraDim.createFrameRelation(),
												this.extraDim.draw(this.view));
									}),
									(t.prototype.finishDrag = function (e) {
										if ((this.hideSnaps(), this.extraDim)) {
											var t = this.snapPoint(this.curPt),
												n = void 0;
											(n = t ? t[0].clone() : this.curPt.clone()),
												(this.extraDim.ePt = n.clone()),
												this.extraDim.updatePoly(),
												this.extraDim.createFrameRelation(),
												h.Utils.isZero(this.extraDim.value) ||
													this.extraDim.host.addExtraDim(this.extraDim),
												this.extraDim.draw(this.view);
										}
										this.drawAux(), this.view.toolManager.releaseTool();
									}),
									t
								);
							})(a.DragDrawTool);
						t.ExtraDimArbitraryTool = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimHorizontalTool = void 0);
						var o = n(1),
							a = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.tool = t), (r.view = n), r;
								}
								return (
									i(t, e),
									(t.prototype.createDim = function (e) {
										(this.extraDim = new o.ExtraDimHorizontal(e[0].clone(), e[0].clone(), e[1])),
											this.extraDim.draw(this.view);
									}),
									t
								);
							})(n(5).ExtraDimArbitraryTool);
						t.ExtraDimHorizontalTool = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimVerticalTool = void 0);
						var o = n(1),
							a = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.tool = t), (r.view = n), r;
								}
								return (
									i(t, e),
									(t.prototype.createDim = function (e) {
										(this.extraDim = new o.ExtraDimVertical(e[0].clone(), e[0].clone(), e[1])),
											this.extraDim.draw(this.view);
									}),
									t
								);
							})(n(5).ExtraDimArbitraryTool);
						t.ExtraDimVerticalTool = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimRadiusTool = void 0);
						var s = a(n(0)),
							l = n(49),
							h = n(2),
							c = n(7),
							u = n(1),
							p = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (
										(r.tool = t),
										(r.view = n),
										(r.vshapes = []),
										(r.snapDist = r.view.params.extraDimSnapDist),
										r
									);
								}
								return (
									i(t, e),
									(t.prototype.initialTool = function () {
										e.prototype.initialTool.call(this), this.showAllPoints();
									}),
									(t.prototype.cleanup = function () {
										e.prototype.cleanup.call(this), this.hideAllPoints();
									}),
									(t.prototype.getAllPoints = function () {
										var e,
											t,
											n = new Map(),
											r = function (e) {
												e.polygon.edges.forEach(function (t) {
													t instanceof s.default.Arc &&
														n.set([t.middle().x, t.middle().y].toString(), [t.middle(), e, t]);
												});
											};
										try {
											for (
												var i = o(this.view.shapeManager.shapem), a = i.next();
												!a.done;
												a = i.next()
											)
												r(a.value);
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												a && !a.done && (t = i.return) && t.call(i);
											} finally {
												if (e) throw e.error;
											}
										}
										return Array.from(n.values());
									}),
									(t.prototype.showAllPoints = function () {
										var e,
											t,
											n = this.getAllPoints();
										this.hideAllPoints();
										try {
											for (var r = o(n), i = r.next(); !i.done; i = r.next()) {
												var a = i.value,
													s = new u.CirclePoly(a[0], this.snapDist),
													l = c.Artisan.recycleShape(s, this.view),
													p = h.ShapeColor.dragRobot;
												l.setAttr('data', {
													poly: s,
													fcolor: p,
													drag: !1,
													isExtraDimPoint: !0,
												}),
													l.setAttr('robot', this),
													this.vshapes.push(l),
													this.view.activeLayer.add(l);
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												i && !i.done && (t = r.return) && t.call(r);
											} finally {
												if (e) throw e.error;
											}
										}
										this.view.refresh();
									}),
									(t.prototype.hideAllPoints = function () {
										this.vshapes.forEach(function (e) {
											return e.hide();
										}),
											(this.vshapes = []);
									}),
									(t.prototype.snapPoint = function (e) {
										var t,
											n,
											r = this.getAllPoints();
										try {
											for (var i = o(r), a = i.next(); !a.done; a = i.next()) {
												var s = a.value;
												if (e.distanceTo(s[0])[0] <= c.DrawParams.Ins.snapVertex) return s;
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (n = i.return) && n.call(i);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									(t.prototype.mousemove = function (t) {
										e.prototype.mousemove.call(this, t), this.hideSnaps();
										var n = this.snapPoint(this.curPt);
										n && this.displayCircleSnap(n[0]), this.view.refresh();
									}),
									(t.prototype.finishDrag = function () {
										this.hideSnaps();
										var e = this.snapPoint(this.curPt);
										if (e) {
											var t = e[0],
												n = e[2],
												r = n.r.valueOf(),
												i = e[1],
												o = s.default.vector(t.x - n.center.x, e[0].y - n.center.y),
												a = s.default.vector();
											o.equalTo(a) || (a = o.normalize().multiply(2 * this.view.params.frame)),
												(this.extraDim = new u.ExtraDimRadius(
													u.ExtraDimRadius.buildRadiusString(r),
													e[0].clone(),
													i,
													a,
												)),
												this.extraDim.createFrameRelation(),
												h.Utils.isZero(this.extraDim.value) ||
													this.extraDim.host.addExtraDim(this.extraDim),
												this.extraDim.draw(this.view);
										}
										this.view.toolManager.releaseTool(),
											this.drawAux(),
											this.view.mometoManager.checkPoint();
									}),
									(t.prototype.drawAux = function () {
										this.view.refresh();
									}),
									t
								);
							})(l.DragDrawTool);
						t.ExtraDimRadiusTool = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimAngleTool = void 0);
						var s = a(n(0)),
							l = n(49),
							h = n(7),
							c = n(2),
							u = n(1),
							p = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (
										(r.tool = t),
										(r.view = n),
										(r.vshapes = []),
										(r.snapDist = r.view.params.extraDimSnapDist),
										r
									);
								}
								return (
									i(t, e),
									(t.prototype.initialTool = function () {
										e.prototype.initialTool.call(this), this.showAllPoints();
									}),
									(t.prototype.cleanup = function () {
										e.prototype.cleanup.call(this), this.hideAllPoints();
									}),
									(t.prototype.getAllPoints = function () {
										var e,
											t,
											n = new Map(),
											r = function (e) {
												var t = e.polygon.edges,
													r = t.length;
												t.forEach(function (i, o, a) {
													var l = t[(o - 1 + r) % r],
														h = t[o];
													h instanceof s.default.Segment &&
														l instanceof s.default.Segment &&
														n.set([i.start.x, i.start.y].toString(), [i.start, e, l, h]);
												});
											};
										try {
											for (
												var i = o(this.view.shapeManager.shapem), a = i.next();
												!a.done;
												a = i.next()
											)
												r(a.value);
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												a && !a.done && (t = i.return) && t.call(i);
											} finally {
												if (e) throw e.error;
											}
										}
										return Array.from(n.values());
									}),
									(t.prototype.showAllPoints = function () {
										var e,
											t,
											n = this.getAllPoints();
										this.hideAllPoints();
										try {
											for (var r = o(n), i = r.next(); !i.done; i = r.next()) {
												var a = i.value,
													s = new u.CirclePoly(a[0], this.snapDist),
													l = h.Artisan.recycleShape(s, this.view),
													p = c.ShapeColor.dragRobot;
												l.setAttr('data', {
													poly: s,
													fcolor: p,
													drag: !1,
													isExtraDimPoint: !0,
												}),
													l.setAttr('robot', this),
													this.vshapes.push(l),
													this.view.activeLayer.add(l);
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												i && !i.done && (t = r.return) && t.call(r);
											} finally {
												if (e) throw e.error;
											}
										}
										this.view.refresh();
									}),
									(t.prototype.hideAllPoints = function () {
										this.vshapes.forEach(function (e) {
											return e.hide();
										}),
											(this.vshapes = []);
									}),
									(t.prototype.snapPoint = function (e) {
										var t,
											n,
											r = this.getAllPoints();
										try {
											for (var i = o(r), a = i.next(); !a.done; a = i.next()) {
												var s = a.value;
												if (e.distanceTo(s[0])[0] <= h.DrawParams.Ins.snapVertex) return s;
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (n = i.return) && n.call(i);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									(t.prototype.mousemove = function (t) {
										e.prototype.mousemove.call(this, t), this.hideSnaps();
										var n = this.snapPoint(this.curPt);
										n && this.displayCircleSnap(n[0]), this.view.refresh();
									}),
									(t.prototype.finishDrag = function () {
										this.hideSnaps();
										var e = this.snapPoint(this.curPt);
										if (e) {
											var t = e[0],
												n = e[1];
											(this.extraDim = new u.ExtraDimAngle(t, n)),
												c.Utils.isZero(this.extraDim.value) ||
													this.extraDim.host.addExtraDim(this.extraDim),
												this.extraDim.draw(this.view);
										}
										this.view.toolManager.releaseTool(),
											this.drawAux(),
											this.view.mometoManager.checkPoint();
									}),
									(t.prototype.drawAux = function () {
										this.view.refresh();
									}),
									t
								);
							})(l.DragDrawTool);
						t.ExtraDimAngleTool = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditExtraDimTool = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(7),
							h = n(13),
							c = n(5),
							u = n(2),
							p = n(1),
							f = (function (e) {
								function t(t) {
									var n = e.call(this, c.ToolType.editExtraDim, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'dim', {
										get: function () {
											return this.vshape.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dbclick = function (t) {
										var n = this;
										if ((e.prototype.dbclick.call(this, t), (this.vshape = t.target), this.dim)) {
											if (this.view.dimManager.mode !== h.dimModeEnum.calculate) {
												if (
													this.dim instanceof p.ExtraDimHorizontal ||
													this.dim instanceof p.ExtraDimVertical
												) {
													var r = t.target.attrs.data.segs[2].length;
													return l.DrawParams.Ins.customDimEditor && u.SystemParam.isMobileDevice
														? void this.emitDimEdit(t.evt, r)
														: void this.showNumberEditor(t, r, this.onConfirm.bind(this));
												}
												return this.dim instanceof p.ExtraDimAngle
													? l.DrawParams.Ins.customDimEditor && u.SystemParam.isMobileDevice
														? void this.emitDimEdit(t.evt, this.dim.value)
														: void this.showNumberEditor(
																t,
																this.dim.textNumber,
																this.onConfirm.bind(this),
														  )
													: void 0;
											}
											this.showEditor(t.evt.pageX, t.evt.pageY, this.dim.name, function (e) {
												e.length < 1 ||
													((n.dim.name = e),
													n.view.dimManager.updateDimByName(e, n.dim.value),
													n.view.refresh(),
													n.view.mometoManager.checkPoint(),
													n.view.eventBus.emit({
														type: s.EventType.dim_name_modified,
														payload: t,
													}));
											});
										}
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										e.prototype.dragmove.call(this, t);
										var n = this.curPt,
											r = a.default.vector(n.x - this.prevPt.x, n.y - this.prevPt.y);
										u.ShapeHelper.restoreShapeMatrix(this.vshape);
										var i = t.target.attrs.robot;
										i instanceof p.ExtraDimHorizontal
											? (r = r.projectionOn(a.default.vector(0, 1)))
											: i instanceof p.ExtraDimVertical &&
											  (r = r.projectionOn(a.default.vector(1, 0))),
											(i.offVec = i.offVec.add(r)),
											(this.prevPt = n),
											i.create(),
											i.draw(this.view.activeLayer),
											this.view.refresh();
									}),
									(t.prototype.mousedone = function (t) {
										this.view.mometoManager.checkPoint(), e.prototype.mousedone.call(this, t);
									}),
									(t.prototype.onConfirm = function (e) {
										this.dim.applyDiff(e),
											this.view.refresh(),
											this.view.mometoManager.checkPoint();
									}),
									(t.prototype.emitDimEdit = function (e, t) {
										this.view.eventBus.emit({
											type: s.EventType.dim_edit,
											payload: {
												event: e,
												initValue: t,
												onConfirm: this.onConfirm.bind(this),
											},
										});
									}),
									t
								);
							})(c.Tool);
						t.EditExtraDimTool = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraPersonImageTool = void 0);
						var s = a(n(0)),
							l = n(5),
							h = n(49),
							c = n(2),
							u = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (
										(r.tool = t),
										(r.view = n),
										(r.vshapes = []),
										(r.snapDist = r.view.params.extraDimSnapDist),
										r
									);
								}
								return (
									i(t, e),
									(t.prototype.createExtraPersonImage = function () {
										var e = t.getImageInfo();
										if (this.tool === l.ToolType.extraManImage) {
											var n = e.get(c.FillPatternType.Man);
											return [c.FillPatternType.Man, n[0], n[1], n[2], n[3], n[4], n[5]];
										}
										if (this.tool === l.ToolType.extraWomenImage)
											return (
												(n = e.get(c.FillPatternType.Woman)),
												[c.FillPatternType.Woman, n[0], n[1], n[2], n[3], n[4], n[5]]
											);
										throw new Error('unknown type');
									}),
									(t.getImageInfo = function () {
										var e = new Map();
										return (
											e.set(c.FillPatternType.Man, [
												352,
												633,
												1750,
												609 / 633,
												s.default.vector(280, 16),
												s.default.vector(230, 617),
											]),
											e.set(c.FillPatternType.Woman, [
												349,
												597,
												1650,
												562 / 597,
												s.default.vector(80, 20),
												s.default.vector(130, 580),
											]),
											e
										);
									}),
									(t.prototype.finishDrag = function (e) {
										var t = o(this.createExtraPersonImage(), 7),
											n = t[0],
											r = t[1],
											i = t[2],
											a = t[3],
											s = t[4],
											l = t[5],
											h = t[6];
										this.view.shapeManager.addExtraPersonImage(n, r, i, s, a, e.box.center, l, h),
											this.view.toolManager.releaseTool();
									}),
									t
								);
							})(h.DragDrawTool);
						t.ExtraPersonImageTool = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditExtraPersonImageTool = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(5),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, l.ToolType.editExtraPersonImage, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'attrs', {
										get: function () {
											return this.vshape.attrs;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'extraPersonImage', {
										get: function () {
											return this.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.attrs.data.poly;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.vshape = t.target),
											(this.prevPt = this.curPt);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											this.vshape && s.ShapeHelper.restoreShapeMatrix(this.vshape),
											requestAnimationFrame(function () {
												n.extraPersonImage &&
													n.extraPersonImage.translate(a.default.vector(n.prevPt, n.curPt)),
													(n.prevPt = n.curPt);
											});
									}),
									(t.prototype.mousedone = function (t) {
										this.view.mometoManager.checkPoint(),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t);
									}),
									t
								);
							})(l.Tool);
						t.EditExtraPersonImageTool = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.NoteTool = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(1),
							h = n(7),
							c = n(5),
							u = (function (e) {
								function t(t, n) {
									void 0 === n && (n = !1);
									var r = e.call(this, n ? c.ToolType.multilineNote : c.ToolType.note, t) || this;
									return (r.view = t), (r.multiline = n), (r.notePosition = a.default.point()), r;
								}
								return (
									i(t, e),
									(t.prototype.mouseup = function (t) {
										var n, r;
										e.prototype.mouseup.call(this, t),
											void 0 === window.TouchEvent
												? ((n = t instanceof MouseEvent ? t.pageX : t.changedTouches[0].pageX),
												  (r = t instanceof MouseEvent ? t.pageY : t.changedTouches[0].pageY))
												: ((n = t instanceof TouchEvent ? t.changedTouches[0].pageX : t.pageX),
												  (r = t instanceof TouchEvent ? t.changedTouches[0].pageY : t.pageY)),
											(this.notePosition = this.curPt.clone()),
											h.DrawParams.Ins.customNoteEditor
												? this.view.eventBus.emit({
														type: s.EventType.note_edit,
														payload: {
															event: t,
															initValue: '',
															align: l.TextAlign.Left,
															onConfirm: this.onConfirm.bind(this),
														},
												  })
												: this.showEditor(
														n,
														r,
														'',
														this.onConfirm.bind(this),
														!1,
														c.EditorStyle.Normal,
														!1,
														!0,
														this.multiline,
												  );
									}),
									(t.prototype.onConfirm = function (e) {
										this.view.shapeManager.addNote(e, this.notePosition, this.multiline),
											this.view.mometoManager.checkPoint(),
											this.view.toolManager.releaseTool();
									}),
									t
								);
							})(c.Tool);
						t.NoteTool = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditNoteTool = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(2),
							h = n(1),
							c = n(6),
							u = n(5),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, u.ToolType.editNote, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'attrs', {
										get: function () {
											return this.vshape.attrs;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'note', {
										get: function () {
											return this.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.attrs.data.poly;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dbclick = function (t) {
										if (
											(e.prototype.dbclick.call(this, t),
											(this.vshape = t.target),
											this.poly instanceof h.Text)
										) {
											var n =
													t.evt instanceof TouchEvent ? t.evt.changedTouches[0].pageX : t.evt.pageX,
												r =
													t.evt instanceof TouchEvent ? t.evt.changedTouches[0].pageY : t.evt.pageY;
											s.DrawParams.Ins.customNoteEditor
												? this.view.eventBus.emit({
														type: c.EventType.note_edit,
														payload: {
															event: t.evt,
															initValue: this.note.text,
															align: this.note.align,
															onConfirm: this.onConfirm.bind(this),
														},
												  })
												: this.showEditor(
														n,
														r,
														this.note.text,
														this.onConfirm.bind(this),
														!1,
														u.EditorStyle.Normal,
														!1,
														!0,
														this.note.multiline,
												  ),
												this.emitNoteSettings();
										}
									}),
									(t.prototype.onConfirm = function (e) {
										this.note.onEdit(e, this.view),
											this.view.mometoManager.checkPoint(),
											this.view.refresh();
									}),
									(t.prototype.emitNoteSettings = function () {
										this.view.eventBus.emit({
											type: c.EventType.note_settings,
											payload: new c.NoteSettings(this.note, this.view),
										});
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.vshape = t.target),
											(this.prevPt = this.curPt);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											this.vshape && l.ShapeHelper.restoreShapeMatrix(this.vshape),
											requestAnimationFrame(function () {
												n.vshape &&
													(n.poly instanceof h.Text
														? (n.note.to = n.curPt)
														: n.note.translate(a.default.vector(n.prevPt, n.curPt)),
													n.note.updatePoly(),
													n.note.draw(n.view),
													(n.prevPt = n.curPt));
											});
									}),
									(t.prototype.mousedone = function (t) {
										this.view.mometoManager.checkPoint(),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t);
									}),
									t
								);
							})(u.Tool);
						t.EditNoteTool = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ConnectorTool = void 0);
						var o = (function (e) {
							function t(t, n) {
								var r = e.call(this, t, n) || this;
								return (r.view = n), r;
							}
							return (
								i(t, e),
								(t.prototype.restart = function () {
									e.prototype.restart.call(this), this.view.toolManager.releaseTool();
								}),
								(t.prototype.finishDrag = function (e) {
									this.view.shapeManager.addConnector(this.curPt);
								}),
								t
							);
						})(n(49).DragDrawTool);
						t.ConnectorTool = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditConnector = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(2),
							h = n(5),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, h.ToolType.editConnector, t) || this;
									return (
										(n.view = t),
										(n.prevPt = new a.default.Point()),
										(n.dragOffsetVec = a.default.vector()),
										(n.viewUtil = new s.FrameUtil(t)),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'connector', {
										get: function () {
											return this.vshape.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											l.ShapeHelper.restoreShapeMatrix(this.vshape);
										var r = this.connector;
										requestAnimationFrame(function () {
											if (void 0 !== n.vshape) {
												var e, t;
												(n.dragOffsetVec = a.default.vector()), n.hideSnaps();
												var i = a.default.line(r.outerEdges[0].start, r.outerEdges[0].end),
													o = a.default.line(r.outerEdges[1].start, r.outerEdges[1].end);
												if (
													((n.magneticPoint = n.detectSnaps(r.outerEdges[0], r, !0)),
													n.magneticPoint && (e = n.magneticPoint.clone()),
													(n.magneticPoint = n.detectSnaps(r.outerEdges[1], r, !0)),
													n.magneticPoint && (t = n.magneticPoint.clone()),
													void 0 !== e && void 0 === t)
												) {
													var s = e.projectionOn(i);
													(n.dragOffsetVec = a.default.vector(s, e)), (n.magneticPoint = e.clone());
												} else
													void 0 === e && void 0 !== t
														? ((s = t.projectionOn(o)),
														  (n.dragOffsetVec = a.default.vector(s, t)),
														  (n.magneticPoint = t.clone()))
														: void 0 !== e &&
														  void 0 !== t &&
														  (e.distanceTo(i)[0] > t.distanceTo(o)[0]
																? ((s = t.projectionOn(o)),
																  (n.dragOffsetVec = a.default.vector(s, t)),
																  (n.magneticPoint = t.clone()))
																: ((s = e.projectionOn(i)),
																  (n.dragOffsetVec = a.default.vector(s, e)),
																  (n.magneticPoint = e.clone())));
												n.doTask();
											}
										});
									}),
									(t.prototype.doTask = function (e) {
										if ((void 0 === e && (e = !1), void 0 !== this.vshape)) {
											var t = a.default.vector(this.prevPt, this.curPt);
											e && this.magneticPoint && (t = this.dragOffsetVec);
											var n = this.vshape.attrs.robot;
											n.translate(t),
												n.draw(this.view),
												e && this.magneticPoint && this.view.shapeManager.refreshDimStatus(),
												(this.prevPt = this.curPt);
										}
									}),
									(t.prototype.mousedone = function (t) {
										void 0 !== this.vshape &&
											(this.doTask(!0),
											this.magneticPoint && (this.hideSnaps(), (this.curPt = this.magneticPoint)),
											this.view.mometoManager.checkPoint(),
											e.prototype.mousedone.call(this, t),
											(this.vshape = void 0));
									}),
									t
								);
							})(h.Tool);
						t.EditConnector = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditConnectorRobot = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(5),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, l.ToolType.editConnectorRobot, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											s.ShapeHelper.restoreShapeMatrix(this.vshape),
											requestAnimationFrame(function () {
												if (void 0 !== n.vshape) {
													var e = n.vshape.attrs.robot.hostShape,
														t = n.vshape.attrs.data.cornerEdgeIndex;
													(n.magneticPoint = n.detectSnaps(e.polygon.edge(t), e)),
														n.doTask(),
														(n.prevPt = n.curPt);
												}
											});
									}),
									(t.prototype.doTask = function (e) {
										if ((void 0 === e && (e = !1), void 0 !== this.vshape)) {
											var t = this.vshape.attrs.robot.hostShape,
												n = this.vshape.attrs.data.cornerEdgeIndex,
												r = t.polygon.edge(n),
												i = a.default.line(r.start, r.end),
												o = a.default.vector(this.prevPt, this.curPt);
											e &&
												this.magneticPoint &&
												(o = a.default.vector(
													this.magneticPoint.projectionOn(i),
													this.magneticPoint,
												));
											var s = this.vshape.attrs.data.poly;
											this.vshape.attrs.robot.dragLength(s, n, o, this.view),
												this.view.shapeManager.refreshTotalHeight(),
												this.view.shapeManager.refreshTotalWidth();
										}
									}),
									(t.prototype.mousedone = function (t) {
										this.hideSnaps(),
											void 0 !== this.vshape &&
												(this.vshape.attrs.data.isMiddleShape ||
													(this.magneticPoint && (this.curPt = this.magneticPoint),
													this.doTask(!0)),
												(this.vshape = void 0),
												this.view.mometoManager.checkPoint(),
												e.prototype.mousedone.call(this, t));
									}),
									t
								);
							})(l.Tool);
						t.EditConnectorRobot = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditSkewTextTool = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(7),
							h = n(2),
							c = n(5),
							u = n(1),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, c.ToolType.editExtraDim, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'cornerJoiner', {
										get: function () {
											return this.vshape.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dbclick = function (t) {
										var n = this;
										e.prototype.dbclick.call(this, t), (this.vshape = t.target);
										var r = this.cornerJoiner.skewAngle;
										l.DrawParams.Ins.customDimEditor && h.SystemParam.isMobileDevice
											? this.emitCornerJoiner(t)
											: this.showNumberEditor(t, r, function (e) {
													n.onConfirm(e);
											  });
									}),
									(t.prototype.emitCornerJoiner = function (e) {
										this.view.eventBus.emit({
											type: s.EventType.edit_skew_text,
											payload: {
												event: e,
												initValue: this.cornerJoiner.skewAngle,
												onConfirm: this.onConfirm.bind(this),
											},
										});
									}),
									(t.prototype.onConfirm = function (e) {
										this.cornerJoiner.skewAngle !== e &&
											(e <= 0 ||
												e >= 360 ||
												(this.cornerJoiner.updateSkewAngle(e, this.view, u.SkewPartEnum.TopView),
												u.TopView.checkStyle(this.view.shapeManager.shapem),
												this.view.mometoManager.checkPoint(),
												this.view.refresh()));
									}),
									t
								);
							})(c.Tool);
						t.EditSkewTextTool = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditCornerJoinerProfileSizeTextTool = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(7),
							h = n(2),
							c = n(5),
							u = (function (e) {
								function t(t) {
									var n = e.call(this, c.ToolType.editExtraDim, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'cornerJoiner', {
										get: function () {
											return this.vshape.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dbclick = function (t) {
										var n = this;
										e.prototype.dbclick.call(this, t), (this.vshape = t.target);
										var r = this.cornerJoiner.profileSize;
										l.DrawParams.Ins.customDimEditor && h.SystemParam.isMobileDevice
											? this.emitCornerJoiner(t)
											: this.showNumberEditor(t, r, function (e) {
													n.onConfirm(e);
											  });
									}),
									(t.prototype.emitCornerJoiner = function (e) {
										this.view.eventBus.emit({
											type: s.EventType.edit_cornerJoiner_faceWidth_text,
											payload: {
												event: e,
												initValue: this.cornerJoiner.profileSize,
												onConfirm: this.onConfirm.bind(this),
											},
										});
									}),
									(t.prototype.onConfirm = function (e) {
										!e ||
											isNaN(e) ||
											a.default.Utils.LT(e, 0.1) ||
											(this.cornerJoiner.profileSize !== e &&
												((this.cornerJoiner.profileSize = e),
												this.cornerJoiner.resize(this.cornerJoiner.size),
												this.view.mometoManager.checkPoint(),
												this.view.refresh()));
									}),
									t
								);
							})(c.Tool);
						t.EditCornerJoinerProfileSizeTextTool = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShadePushSashTool = void 0);
						var o = n(5),
							a = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										this.name === o.ToolType.doubleShadePushSash
											? this.view.shapeManager.addDoubleShadePushSash(e)
											: this.view.shapeManager.addShadePushSash(e);
									}),
									t
								);
							})(n(50).FenesTool);
						t.ShadePushSashTool = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FoldDoubleTool = void 0);
						var o = n(50),
							a = n(13),
							s = n(1),
							l = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										this.view.shapeManager.addFold(e);
										var t = this.view.shapeManager.shapem
											.map(function (e) {
												return e.sashManager.folds;
											})
											.flat()
											.find(function (t) {
												return t.hitTest(e);
											});
										if (t) {
											(t.openToward = a.OpenToward.Outward),
												(t.leftCount = 2),
												(t.rightCount = 2),
												(t.isDoor = !0),
												(t.asPush = !0),
												t.updatePoly();
											var n = ((t.polygon.box.xmax - t.polygon.box.xmin) / 4) * 0.8;
											t.sashes.forEach(function (e, r) {
												var i = r === t.leftCount - 1 || r === t.leftCount;
												e.hardwareManager.hingeCount = 4;
												var o = [0.15, 0.3, 0.7, 0.85];
												e.hardwareManager.hinges.forEach(function (e, t) {
													e.percentOffset = o[t];
												}),
													(e.hardwareManager.handleForFold.hidden = !0),
													(e.hardwareManager.handle.hidden = !i),
													i && (e.hardwareManager.handleType = s.HardwareShape.CommercialHandle),
													(0 !== r && 3 !== r) || (e.fixedWidth = n);
											}),
												t.updatePoly(),
												t.draw(this.view),
												s.TopView.optimize(this.view.shapeManager.shapem),
												this.view.refresh();
										}
									}),
									t
								);
							})(o.FenesTool);
						t.FoldDoubleTool = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerGlassTool = void 0);
						var o = n(80),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.invalidFixedArea = function (e, t) {
										return (
											!t.sashManager.thefts.some(function (t) {
												return t.polyId.equalTo(e.polyId);
											}) &&
											t.usedPoly.some(function (t) {
												return e.polyId.equalTo(t);
											})
										);
									}),
									(t.prototype.changeFillerType = function (e, t) {
										var n = e.changeFillerType(t, a.ShapeType.Glass);
										n && n.draw(this.view);
									}),
									t
								);
							})(o.FillersTool);
						t.FillerGlassTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerPanelTool = void 0);
						var o = n(80),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.changeFillerType = function (e, t) {
										var n = e.changeFillerType(t, a.ShapeType.Panel);
										n && n.draw(this.view);
									}),
									t
								);
							})(o.FillersTool);
						t.FillerPanelTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerEmptyTool = void 0);
						var o = n(80),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.changeFillerType = function (e, t) {
										var n = e.changeFillerType(t, a.ShapeType.None);
										n && n.draw(this.view);
									}),
									t
								);
							})(o.FillersTool);
						t.FillerEmptyTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerShadeTool = void 0);
						var o = n(80),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.changeFillerType = function (e, t) {
										var n = e.changeFillerType(t, a.ShapeType.Shade);
										n && n.draw(this.view);
									}),
									t
								);
							})(o.FillersTool);
						t.FillerShadeTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerScreenTool = void 0);
						var o = n(80),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.changeFillerType = function (e, t) {
										var n = e.changeFillerType(t, a.ShapeType.Screen);
										n && n.draw(this.view);
									}),
									t
								);
							})(o.FillersTool);
						t.FillerScreenTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarTool = void 0);
						var o = n(5),
							a = n(31),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'shouldRelease', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.finishDrag = function (e) {
										var t = this,
											n = !1;
										this.view.shapeManager.shapem.forEach(function (r) {
											r.avaiablePoly.forEach(function (r) {
												if (
													r.polygon.intersect(e.polygon).length > 0 ||
													r.polygon.contains(e.polygon)
												) {
													var i = a.DecorationBarCreator.Instance.create(t.name),
														o = new a.DecorationShape(i, r);
													t.view.shapeManager.addDecorationBar(e.box.center, o), (n = !0);
												}
											});
										}),
											n || this.view.toolManager.releaseTool();
									}),
									t
								);
							})(o.DragDrawTool);
						t.DecorationBarTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBar = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(1),
							h = n(31),
							c = (function () {
								function e(e, t) {
									void 0 === t && (t = h.DecorationBarType.decorationChinese),
										(this.components = e),
										(this._type = t),
										(this.hostPoly = new l.WinPolygon()),
										(this.semiBarWidth = new s.Param().get(l.ShapeType.DecorationBar) / 2);
								}
								return (
									(e.prototype._toJSON = function () {
										return {
											cps: this.components.map(function (e) {
												return e.toJSON();
											}),
											tp: this._type,
										};
									}),
									(e.prototype._deserialize = function (e) {
										var t = this;
										e.cps.forEach(function (e) {
											var n = h.DecorationComponentParser.parse(e);
											t.components.push(n);
										});
									}),
									(e.prototype.split = function () {
										var e = this,
											t = [];
										return (
											this.components.forEach(function (n) {
												var r = e.hostPoly.box,
													o = new l.WinPolygon(new a.default.Box(r.xmin, r.ymin, r.xmax, r.ymax));
												t.push.apply(t, i(n.createBarPolys(o)));
											}),
											t.forEach(function (t) {
												return (t.polyId = e.hostPoly.polyId.clone());
											}),
											t
										);
									}),
									(e.prototype.translate = function (e) {
										this.hostPoly.translate(e);
									}),
									(e.prototype.recreateComponents = function () {}),
									e
								);
							})();
						t.DecorationBar = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarChinese = void 0);
						var o = n(1),
							a = n(2),
							s = n(6),
							l = n(31),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t, l.DecorationBarType.decorationChinese) || this;
									return (
										(n.components = t),
										(n.verticalBarCount = 0),
										(n.horizontalBarCount = 0),
										(n.gap = 0),
										(n.hSep = 0),
										(n.vSep = 0),
										n
									);
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										var t = e.prototype._toJSON.call(this);
										return (
											(t.vc = this.verticalBarCount),
											(t.hc = this.horizontalBarCount),
											(t.gp = this.gap),
											(t.hsp = this.hSep),
											(t.vsp = this.vSep),
											(t.sbw = this.semiBarWidth),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype._deserialize.call(this, t),
											(this.verticalBarCount = t.vc),
											(this.horizontalBarCount = t.hc),
											(this.gap = t.gp),
											(this.hSep = t.hsp),
											(this.vSep = t.vsp),
											(this.semiBarWidth =
												void 0 === t.sbw
													? new a.Param().get(o.ShapeType.DecorationBar) / 2
													: t.sbw);
									}),
									(t.prototype.emitEvent = function (e, t, n) {
										n.eventBus.emit({
											type: s.EventType.decoration_bar_chinese,
											payload: new s.DecorationBarChineseSettings(e, t, n),
										});
									}),
									(t.prototype.recreateComponents = function () {
										var e = this;
										(this.components = l.DecorationBarCreator.Instance.createChineseComponents(
											this.verticalBarCount,
											this.horizontalBarCount,
											this.gap,
											this.hSep,
											this.vSep,
											this.semiBarWidth,
										)),
											this.components.forEach(function (t) {
												return (t.semiBarWidth = e.semiBarWidth);
											});
									}),
									t
								);
							})(l.DecorationBar);
						t.DecorationBarChinese = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarChinese2 = void 0);
						var o = n(31),
							a = (function (e) {
								function t(t) {
									var n = e.call(this, t, o.DecorationBarType.decorationChinese2) || this;
									return (n.components = t), n;
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										return e.prototype._toJSON.call(this);
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype._deserialize.call(this, t);
									}),
									(t.prototype.emitEvent = function (e, t, n) {}),
									(t.prototype.recreateComponents = function () {
										this.components = o.DecorationBarCreator.Instance.createChinese2Components();
									}),
									t
								);
							})(o.DecorationBar);
						t.DecorationBarChinese2 = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarChinese3 = void 0);
						var o = n(31),
							a = (function (e) {
								function t(t) {
									var n = e.call(this, t, o.DecorationBarType.decorationChinese3) || this;
									return (n.components = t), n;
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										return e.prototype._toJSON.call(this);
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype._deserialize.call(this, t);
									}),
									(t.prototype.emitEvent = function (e, t, n) {}),
									(t.prototype.recreateComponents = function () {
										this.components = o.DecorationBarCreator.Instance.createChinese3Components();
									}),
									t
								);
							})(o.DecorationBar);
						t.DecorationBarChinese3 = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarChinese4 = void 0);
						var o = n(59),
							a = n(2),
							s = n(6),
							l = n(31),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t, l.DecorationBarType.decorationChinese4) || this;
									return (
										(n.components = t),
										(n.verticalBarCount = 0),
										(n.horizontalBarCount = 0),
										(n.gap = 0),
										(n.hSep = 0),
										(n.vSep = 0),
										n
									);
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										var t = e.prototype._toJSON.call(this);
										return (
											(t.vc = this.verticalBarCount),
											(t.hc = this.horizontalBarCount),
											(t.gp = this.gap),
											(t.hsp = this.hSep),
											(t.vsp = this.vSep),
											(t.sbw = this.semiBarWidth),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype._deserialize.call(this, t),
											(this.verticalBarCount = t.vc),
											(this.horizontalBarCount = t.hc),
											(this.gap = t.gp),
											(this.hSep = t.hsp),
											(this.vSep = t.vsp),
											(this.semiBarWidth =
												void 0 === t.sbw
													? new a.Param().get(o.ShapeType.DecorationBar) / 2
													: t.sbw);
									}),
									(t.prototype.emitEvent = function (e, t, n) {
										n.eventBus.emit({
											type: s.EventType.decoration_bar_chinese4,
											payload: new s.DecorationBarChinese4Settings(e, t, n),
										});
									}),
									(t.prototype.recreateComponents = function () {
										var e = this;
										(this.components = l.DecorationBarCreator.Instance.createChinese4Components(
											this.verticalBarCount,
											this.horizontalBarCount,
											this.gap,
											this.hSep,
											this.vSep,
											this.semiBarWidth,
										)),
											this.components.forEach(function (t) {
												return (t.semiBarWidth = e.semiBarWidth);
											});
									}),
									t
								);
							})(l.DecorationBar);
						t.DecorationBarChinese4 = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarColonial = void 0);
						var s = n(2),
							l = n(1),
							h = n(6),
							c = n(31),
							u = (function (e) {
								function t(t) {
									var n = e.call(this, t, c.DecorationBarType.decorationColonial) || this;
									return (
										(n.components = t),
										(n.horEdgeCount = 0),
										(n.verEdgeCount = 0),
										(n.splitHelper = new c.DecorationSplitHelper()),
										t.forEach(function (e) {
											return (e.semiBarWidth = n.semiBarWidth);
										}),
										n
									);
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										var t = e.prototype._toJSON.call(this);
										return (
											(t.sbw = this.semiBarWidth),
											(t.hec = this.horEdgeCount),
											(t.vec = this.verEdgeCount),
											(t.sbw = this.semiBarWidth),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype._deserialize.call(this, t),
											(this.horEdgeCount = t.hec),
											(this.verEdgeCount = t.vec),
											(this.semiBarWidth =
												void 0 === t.sbw
													? new s.Param().get(l.ShapeType.DecorationBar) / 2
													: t.sbw);
									}),
									(t.prototype.split = function () {
										var e = this,
											t = [];
										return (
											t.push.apply(
												t,
												a(this.splitHelper.splitLine(this.components, this.hostPoly.box)),
											),
											t.forEach(function (t) {
												return (t.polyId = e.hostPoly.polyId.clone());
											}),
											t
										);
									}),
									(t.prototype.emitEvent = function (e, t, n) {
										n.eventBus.emit({
											type: h.EventType.decoration_bar_colonial,
											payload: new h.DecorationBarColonialSettings(e, t, n),
										});
									}),
									(t.prototype.recreateComponents = function () {
										var e = this;
										(this.components = c.DecorationBarCreator.Instance.createColonialComponents(
											this.horEdgeCount,
											this.verEdgeCount,
										)),
											this.components.forEach(function (t) {
												return (t.semiBarWidth = e.semiBarWidth);
											});
									}),
									t
								);
							})(c.DecorationBar);
						t.DecorationBarColonial = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarPrairie = void 0);
						var s = n(2),
							l = n(1),
							h = n(6),
							c = n(31),
							u = (function (e) {
								function t(t) {
									var n = e.call(this, t, c.DecorationBarType.decorationPrairie) || this;
									return (
										(n.components = t),
										(n.horEdgeCount = 0),
										(n.horEdgeSep = 0),
										(n.verEdgeCount = 0),
										(n.verEdgeSep = 0),
										(n.middleCount = 0),
										(n.middleSep = 0),
										(n.vMiddleCount = 0),
										(n.vMiddleSep = 0),
										(n.middleOffset = 0),
										(n.vMiddleOffset = 0),
										(n.splitHelper = new c.DecorationSplitHelper()),
										n
									);
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										var t = e.prototype._toJSON.call(this);
										return (
											(t.hec = this.horEdgeCount),
											(t.hes = this.horEdgeSep),
											(t.vec = this.verEdgeCount),
											(t.ves = this.verEdgeSep),
											(t.mc = this.middleCount),
											(t.ms = this.middleSep),
											(t.vmc = this.vMiddleCount),
											(t.vms = this.vMiddleSep),
											(t.sbw = this.semiBarWidth),
											(t.mo = this.middleOffset),
											(t.vmo = this.vMiddleOffset),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype._deserialize.call(this, t),
											(this.horEdgeCount = t.hec),
											(this.horEdgeSep = t.hes),
											(this.verEdgeCount = t.vec),
											(this.verEdgeSep = t.ves),
											(this.middleCount = t.mc),
											(this.middleSep = t.ms),
											(this.vMiddleCount = t.vmc),
											(this.vMiddleSep = t.vms),
											(this.semiBarWidth =
												void 0 === t.sbw
													? new s.Param().get(l.ShapeType.DecorationBar) / 2
													: t.sbw),
											(this.middleOffset = void 0 === t.mo ? 0 : t.mo),
											(this.vMiddleOffset = void 0 === t.vmo ? 0 : t.vmo);
									}),
									(t.prototype.split = function () {
										var e = this,
											t = [];
										return (
											t.push.apply(
												t,
												a(this.splitHelper.splitLine(this.components, this.hostPoly.box)),
											),
											t.forEach(function (t) {
												return (t.polyId = e.hostPoly.polyId.clone());
											}),
											t
										);
									}),
									(t.prototype.emitEvent = function (e, t, n) {
										n.eventBus.emit({
											type: h.EventType.decoration_bar_prairie,
											payload: new h.DecorationBarPrairieSettings(e, t, n),
										});
									}),
									(t.prototype.recreateComponents = function () {
										var e = this;
										(this.components = c.DecorationBarCreator.Instance.createPrairieComponents(
											this.verEdgeSep,
											this.verEdgeCount,
											this.horEdgeSep,
											this.horEdgeCount,
											this.middleCount,
											this.middleSep,
											this.vMiddleCount,
											this.vMiddleSep,
											this.middleOffset,
											this.vMiddleOffset,
										)),
											this.components.forEach(function (t) {
												return (t.semiBarWidth = e.semiBarWidth);
											});
									}),
									t
								);
							})(c.DecorationBar);
						t.DecorationBarPrairie = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarSemiArc = void 0);
						var o = n(1),
							a = n(2),
							s = n(6),
							l = n(31),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t, l.DecorationBarType.decorationSemiArc) || this;
									return (n.components = t), (n.count = 0), n;
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										var t = e.prototype._toJSON.call(this);
										return (t.c = this.count), (t.sbw = this.semiBarWidth), t;
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype._deserialize.call(this, t),
											(this.count = t.c),
											(this.semiBarWidth =
												void 0 === t.sbw
													? new a.Param().get(o.ShapeType.DecorationBar) / 2
													: t.sbw);
									}),
									(t.prototype.emitEvent = function (e, t, n) {
										n.eventBus.emit({
											type: s.EventType.decoration_bar_semi_arc,
											payload: new s.DecorationBarSemiArcSettings(e, t, n),
										});
									}),
									(t.prototype.recreateComponents = function () {
										var e = this;
										(this.components = l.DecorationBarCreator.Instance.createSemiArcComponents(
											this.count,
										)),
											this.components.forEach(function (t) {
												return (t.semiBarWidth = e.semiBarWidth);
											});
									}),
									t
								);
							})(l.DecorationBar);
						t.DecorationBarSemiArc = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarSemiArcPro = void 0);
						var l = s(n(0)),
							h = n(2),
							c = n(1),
							u = n(31),
							p = n(6),
							f = n(9),
							d = (function (e) {
								function t() {
									var t = e.call(this, [], u.DecorationBarType.decorationSemiArcPro) || this;
									return (
										(t.count = 4),
										(t.eqSplitTopCell = !0),
										(t.topAsBar = !0),
										(t.outerArcStyle = 'half'),
										(t.innerStyle = 'wheel'),
										(t.wheelCrosstiesCount = 1),
										t
									);
								}
								return (
									i(t, e),
									(t.prototype.split = function () {
										var e = this,
											t = [],
											n = this.hostPoly.box,
											r = (n.ymax - n.ymin - this.semiBarWidth * (this.count - 1)) / this.count,
											i = this.eqSplitTopCell ? r : (n.xmax - n.xmin) / 2,
											o = l.default.line(
												l.default.point(n.center.x, n.ymin + i + this.semiBarWidth / 2),
												l.default.vector(0, 1),
											),
											s = this.hostPoly.split(o, this.semiBarWidth);
										t.push.apply(
											t,
											a(
												s.filter(function (e) {
													return e.IsMullion;
												}),
											),
										);
										var h = s
												.filter(function (e) {
													return !e.IsMullion;
												})
												.sort(function (e, t) {
													return e.box.center.y - t.box.center.y;
												}),
											c = h[0],
											u = h[1],
											p = new f.ExtendableArc();
										(p.arcExtend = 'fill' === this.outerArcStyle),
											p.split(c, this.semiBarWidth),
											t.push(p.barPoly),
											this.topAsBar && t.push(p.topInnerPoly);
										var d = new f.InnerEqSplit({
												count: this.count - 2,
												vertical: !1,
											}),
											g = d.split(u, this.semiBarWidth),
											y = g
												.filter(function (e) {
													return !e.IsMullion;
												})
												.sort(function (e, t) {
													return e.polygon.box.center.y - t.polygon.box.center.y;
												});
										if (
											(t.push.apply(
												t,
												a(
													g.filter(function (e) {
														return e.IsMullion;
													}),
												),
											),
											'wheel' === this.innerStyle)
										) {
											var m = new f.HalfWheel(l.default.point(), this.wheelCrosstiesCount).split(
												p.bottomInnerPoly,
												this.semiBarWidth,
											);
											t.push.apply(
												t,
												a(
													m.filter(function (e) {
														return e.IsMullion;
													}),
												),
											),
												y.forEach(function (n) {
													var r = (d = new f.InnerEqSplit({
														count: 1,
														vertical: !0,
													})).split(n, e.semiBarWidth);
													t.push.apply(
														t,
														a(
															r.filter(function (e) {
																return e.IsMullion;
															}),
														),
													);
												});
										} else if (2 === p.bottomInnerPoly.edges.length) {
											var v = p.arcRadius - 0.55 * p.arcChordHeight;
											(m = (b = new f.SemiArc(
												l.default.point(),
												!0,
												void 0,
												v,
												this.wheelCrosstiesCount,
											)).split(p.bottomInnerPoly, this.semiBarWidth)),
												t.push.apply(
													t,
													a(
														m.filter(function (e) {
															return e.IsMullion;
														}),
													),
												);
											var w = 50;
											m.forEach(function (t) {
												t.IsMullion ||
													(2 === t.edges.length &&
														t.edges.forEach(function (t) {
															t instanceof l.default.Arc && (w = t.end.x - n.xmin - e.semiBarWidth);
														}));
											}),
												(d = new f.InnerEqSplit({
													count: 2,
													vertical: !0,
													fixedSideSpaceSize: w,
												})),
												y.forEach(function (n) {
													var r = d.split(n, e.semiBarWidth);
													t.push.apply(
														t,
														a(
															r.filter(function (e) {
																return e.IsMullion;
															}),
														),
													);
												});
										} else {
											var b;
											(v = p.arcRadius - 0.55 * p.arcChordHeight),
												((b = new f.SemiArcPro(
													l.default.point(),
													!0,
													void 0,
													v,
												)).innerArcExtend = 0.01),
												(b.sameWithOuterArcCenter = !0),
												(b.sideCrosstiesHidden = !0),
												(b.middleCrosstiesCount = 3),
												(b.arcAngle = Math.PI),
												(m = b.split(p.bottomInnerPoly, this.semiBarWidth)),
												t.push.apply(
													t,
													a(
														m.filter(function (e) {
															return e.IsMullion;
														}),
													),
												);
											var S = b.sideSpace + this.semiBarWidth / 2;
											(d = new f.InnerEqSplit({
												count: 2,
												vertical: !0,
												fixedSideSpaceSize: S,
											})),
												y.forEach(function (n) {
													var r = d.split(n, e.semiBarWidth);
													t.push.apply(
														t,
														a(
															r.filter(function (e) {
																return e.IsMullion;
															}),
														),
													);
												});
										}
										return (
											t.forEach(function (t) {
												return (t.polyId = e.hostPoly.polyId.clone());
											}),
											t
										);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype._toJSON.call(this);
										return (
											(t.c = this.count),
											(t.estc = this.eqSplitTopCell),
											(t.tab = this.topAsBar),
											(t.oas = this.outerArcStyle),
											(t.is = this.innerStyle),
											(t.wcc = this.wheelCrosstiesCount),
											(t.sbw = this.semiBarWidth),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype._deserialize.call(this, t),
											(this.count = t.c),
											(this.eqSplitTopCell = t.estc),
											(this.topAsBar = t.tab),
											(this.outerArcStyle = t.oas),
											(this.innerStyle = t.is),
											(this.wheelCrosstiesCount = t.wcc),
											(this.semiBarWidth =
												void 0 === t.sbw
													? new h.Param().get(c.ShapeType.DecorationBar) / 2
													: t.sbw);
									}),
									(t.prototype.emitEvent = function (e, t, n) {
										n.eventBus.emit({
											type: p.EventType.decoration_bar_semi_arc_pro,
											payload: new p.DecorationBarSemiArcProSettings(e, t, n),
										});
									}),
									t
								);
							})(u.DecorationBar);
						t.DecorationBarSemiArcPro = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarDiamond = void 0);
						var o = n(1),
							a = n(2),
							s = n(6),
							l = n(31),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t, l.DecorationBarType.decorationDiamond) || this;
									return (n.components = t), (n.hPtCount = 1), (n.vPtCount = 1), n;
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										var t = e.prototype._toJSON.call(this);
										return (
											(t.hpc = this.hPtCount),
											(t.vpc = this.vPtCount),
											(t.sbw = this.semiBarWidth),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype._deserialize.call(this, t),
											(this.hPtCount = t.hpc ? t.hpc : 1),
											(this.vPtCount = t.vpc ? t.vpc : 1),
											(this.semiBarWidth =
												void 0 === t.sbw
													? new a.Param().get(o.ShapeType.DecorationBar) / 2
													: t.sbw);
									}),
									(t.prototype.emitEvent = function (e, t, n) {
										n.eventBus.emit({
											type: s.EventType.decoration_bar_diamond,
											payload: new s.DecorationBarDiamondSettings(e, t, n),
										});
									}),
									(t.prototype.recreateComponents = function () {
										var e = this;
										(this.components = l.DecorationBarCreator.Instance.createDiamondComponents(
											this.hPtCount,
											this.vPtCount,
										)),
											this.components.forEach(function (t) {
												return (t.semiBarWidth = e.semiBarWidth);
											});
									}),
									t
								);
							})(l.DecorationBar);
						t.DecorationBarDiamond = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationSplitHelper = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(1),
							h = n(31),
							c = (function () {
								function e() {}
								return (
									(e.prototype.getRectPoly = function (e) {
										return new l.WinPolygon([
											a.default.segment(
												a.default.point(e.xmin, e.ymin),
												a.default.point(e.xmin, e.ymax),
											),
											a.default.segment(
												a.default.point(e.xmin, e.ymax),
												a.default.point(e.xmax, e.ymax),
											),
											a.default.segment(
												a.default.point(e.xmax, e.ymax),
												a.default.point(e.xmax, e.ymin),
											),
											a.default.segment(
												a.default.point(e.xmax, e.ymin),
												a.default.point(e.xmin, e.ymin),
											),
										]);
									}),
									(e.prototype.splitLine = function (e, t) {
										var n = [],
											o = [],
											l = e.filter(function (e) {
												return e.type === h.DecorationComponentType.decorationLine;
											}),
											c = this.getRectPoly(t);
										return (
											l.forEach(function (e) {
												var t = r(e.getUpdatedLines(c), 2),
													n = t[0],
													i = t[1],
													l = a.default.segment(n, i);
												if (s.Utils.isSegHorizontal(l)) n.x > i.x && (l = l.reverse());
												else {
													if (!s.Utils.isSegVertical(l)) throw new Error('not support');
													n.y > i.y && (l = l.reverse());
												}
												o.push(l);
											}),
											o.forEach(function (e, t, r) {
												for (var o = [], c = 0; c < t; c++) {
													var u = r[c],
														p = e.intersect(u);
													1 === p.length &&
														o.push({
															pt: p[0],
															width: l[c].semiBarWidth,
														});
												}
												o.sort(function (t, n) {
													return t.pt.distanceTo(e.start)[0] - n.pt.distanceTo(e.start)[0];
												});
												var f = [];
												for (
													s.Utils.isSegHorizontal(e)
														? o.forEach(function (e) {
																f.push.apply(
																	f,
																	i([
																		a.default.point(e.pt.x - e.width, e.pt.y),
																		a.default.point(e.pt.x + e.width, e.pt.y),
																	]),
																);
														  })
														: s.Utils.isSegVertical(e) &&
														  o.forEach(function (e) {
																f.push.apply(
																	f,
																	i([
																		a.default.point(e.pt.x, e.pt.y - e.width),
																		a.default.point(e.pt.x, e.pt.y + e.width),
																	]),
																);
														  }),
														f.splice(0, 0, e.start),
														f.push(e.end),
														c = 0;
													c < f.length - 1;
													c += 2
												) {
													var d = f[c],
														g = f[c + 1];
													n.push.apply(
														n,
														i(h.DecorationPolyEdge.createStandardBars(d, g, l[t].semiBarWidth)),
													);
												}
											}),
											n
										);
									}),
									e
								);
							})();
						t.DecorationSplitHelper = c;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarCreator = void 0);
						var a,
							s = o(n(0)),
							l = n(2),
							h = n(5),
							c = n(1),
							u = n(31),
							p = (function () {
								function e() {
									var e = this;
									(this.slines = {}),
										(this.slines[h.ToolType.decoration_bar_chinese] = function () {
											return e.createChinese();
										}),
										(this.slines[h.ToolType.decoration_bar_chinese2] = function () {
											return e.createChinese2();
										}),
										(this.slines[h.ToolType.decoration_bar_chinese3] = function () {
											return e.createChinese3();
										}),
										(this.slines[h.ToolType.decoration_bar_chinese4] = function () {
											return e.createChinese4();
										}),
										(this.slines[h.ToolType.decoration_bar_prairie] = function () {
											return e.createPrairie();
										}),
										(this.slines[h.ToolType.decoration_bar_colonial] = function () {
											return e.createColonial();
										}),
										(this.slines[h.ToolType.decoration_bar_diamond] = function () {
											return e.createDiamond();
										}),
										(this.slines[h.ToolType.decoration_bar_semi_arc] = function () {
											return e.createSemiArc();
										}),
										(this.slines[h.ToolType.decoration_bar_semi_arc_pro] = function () {
											return new u.DecorationBarSemiArcPro();
										}),
										(this.slines[h.ToolType.decoration_bar_semi_arc_pro2] = function () {
											return e.createDecorationBarSemiArcPro2();
										}),
										(this.slines[h.ToolType.decoration_bar_semi_arc_pro3] = function () {
											return e.createDecorationBarSemiArcProWithInnerArcStyle();
										});
								}
								return (
									Object.defineProperty(e, 'Instance', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.create = function (e) {
										return this.slines[e]();
									}),
									(e.prototype.createChineseComponents = function (e, t, n, r, o, a) {
										void 0 === e && (e = 0),
											void 0 === t && (t = 0),
											void 0 === n && (n = 0),
											void 0 === r && (r = 0),
											void 0 === o && (o = 0),
											void 0 === a && (a = new l.Param().get(c.ShapeType.DecorationBar) / 2);
										var h = [],
											p = a,
											f = s.default.matrix(1, 0, 0, 1, p, 0),
											d = s.default.matrix(1, 0, 0, 1, -p, 0),
											g = s.default.matrix(1, 0, 0, 1, 0, -p),
											y = s.default.matrix(1, 0, 0, 1, 0, p),
											m = new u.DecoraitonReference(0),
											v = new u.DecorationCorner(
												new u.DecoraitonReferencePoint(s.default.point(2 * n, 2 * n), m),
												[
													new u.DecoraitonReferencePoint(s.default.point(n, 2 * n).transform(f), m),
													new u.DecoraitonReferencePoint(s.default.point(2 * n, n).transform(y), m),
												],
											),
											w = new u.DecoraitonReference(1),
											b = new u.DecorationCorner(
												new u.DecoraitonReferencePoint(s.default.point(-2 * n, 2 * n), w),
												[
													new u.DecoraitonReferencePoint(
														s.default.point(-n, 2 * n).transform(d),
														w,
													),
													new u.DecoraitonReferencePoint(
														s.default.point(-2 * n, n).transform(y),
														w,
													),
												],
											),
											S = new u.DecoraitonReference(2),
											_ = new u.DecorationCorner(
												new u.DecoraitonReferencePoint(s.default.point(2 * n, -2 * n), S),
												[
													new u.DecoraitonReferencePoint(
														s.default.point(n, -2 * n).transform(f),
														S,
													),
													new u.DecoraitonReferencePoint(
														s.default.point(2 * n, -n).transform(g),
														S,
													),
												],
											),
											P = new u.DecoraitonReference(3),
											x = new u.DecorationCorner(
												new u.DecoraitonReferencePoint(s.default.point(-2 * n, -2 * n), P),
												[
													new u.DecoraitonReferencePoint(
														s.default.point(-n, -2 * n).transform(d),
														P,
													),
													new u.DecoraitonReferencePoint(
														s.default.point(-2 * n, -n).transform(g),
														P,
													),
												],
											);
										h.push(v), h.push(b), h.push(_), h.push(x);
										var D = [
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(0, n), m),
												new u.DecoraitonReferencePoint(s.default.point(-n, n), m),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(n, 0), m),
												new u.DecoraitonReferencePoint(s.default.point(n, -n), m),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(-n, 0), w),
												new u.DecoraitonReferencePoint(s.default.point(-n, -n), w),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(0, n), w),
												new u.DecoraitonReferencePoint(s.default.point(n, n), w),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(0, -n), S),
												new u.DecoraitonReferencePoint(s.default.point(-n, -n), S),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(n, 0), S),
												new u.DecoraitonReferencePoint(s.default.point(n, n), S),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(-n, 0), P),
												new u.DecoraitonReferencePoint(s.default.point(-n, n), P),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(0, -n), P),
												new u.DecoraitonReferencePoint(s.default.point(n, -n), P),
											),
										];
										return (
											D.push.apply(D, i(this.createChineseVerticalBars(e, n, o))),
											D.push.apply(D, i(this.createChineseHorizontalBars(t, n, r))),
											D.forEach(function (e) {
												return (e.semiBarWidth = a);
											}),
											h.push(
												new u.DecorationPoly(
													D,
													[
														new u.DecoraitonReferencePoint(s.default.point(n, n), m),
														new u.DecoraitonReferencePoint(s.default.point(n, -n), S),
														new u.DecoraitonReferencePoint(s.default.point(-n, -n), P),
														new u.DecoraitonReferencePoint(s.default.point(-n, n), w),
													],
													['seg', 'seg', 'seg', 'seg'],
												),
											),
											h.forEach(function (e) {
												return (e.semiBarWidth = a);
											}),
											h
										);
									}),
									(e.prototype.createChinese2Components = function (e, t, n, r) {
										void 0 === e && (e = 100),
											void 0 === t && (t = 120),
											void 0 === n && (n = 80),
											void 0 === r && (r = 50);
										var o = new l.Param().get(c.ShapeType.DecorationBar) / 2,
											h = e + t,
											u = [];
										u.push.apply(
											u,
											i(this.edges(s.default.vector(e + n + o, e), s.default.vector(e + n + o, 0))),
										),
											u.push.apply(u, i(this.ratioEdges(0.5, 0, h, [a.Top, a.Bottom]))),
											u.push.apply(
												u,
												i(
													this.edges(
														s.default.vector(e, e + n + o),
														s.default.vector(0, e + n + o),
													),
												),
											),
											u.push.apply(
												u,
												i(
													this.edges(
														s.default.vector(e, e + n + o),
														s.default.vector(0, e + n + o),
													),
												),
											),
											u.push.apply(u, i(this.ratioEdges(1 / 4, 0, h, [a.Left, a.Right], -e))),
											u.push.apply(u, i(this.ratioEdges(3 / 4, 0, h, [a.Left, a.Right], -e))),
											u.push.apply(u, i(this.middleEdges(0, e, e - r + o, [a.Left, a.Right]))),
											u.push.apply(u, i(this.middleEdges(0, e, -e + r - o, [a.Left, a.Right]))),
											u.push(
												this.centerEdge(s.default.vector(0, -e - o), s.default.vector(0, e + o)),
											),
											u.push(
												this.poly([
													this.point(s.default.vector(h, h), a.TopLeft),
													this.point(s.default.vector(h, h), a.TopRight),
													this.middlePoint(s.default.vector(h, -h / 2), a.Right),
													this.middlePoint(s.default.vector(h, -h / 2), a.Left),
												]),
											),
											u.push(
												this.poly([
													this.middlePoint(s.default.vector(h, h / 2), a.Right),
													this.middlePoint(s.default.vector(h, h / 2), a.Left),
													this.point(s.default.vector(h, h), a.BottomLeft),
													this.point(s.default.vector(h, h), a.BottomRight),
												]),
											),
											u.push.apply(
												u,
												i(this.edges(s.default.vector(-10, e), s.default.vector(e, -10))),
											);
										var p = this.point(s.default.vector(e, e + n), a.TopLeft),
											f = this.point(s.default.vector(e + n, e), a.TopLeft),
											d = this.point(s.default.vector(e + n, e), a.TopRight),
											g = this.point(s.default.vector(e, e + n), a.TopRight),
											y = this.middlePoint(s.default.vector(e, -e + r), a.Right),
											m = this.middlePoint(s.default.vector(e + n, -o), a.Right),
											v = this.middlePoint(s.default.vector(e + n, o), a.Right),
											w = this.middlePoint(s.default.vector(e + n, -o), a.Left),
											b = this.middlePoint(s.default.vector(e + n, o), a.Left),
											S = this.middlePoint(s.default.vector(e, e - r), a.Right),
											_ = this.middlePoint(s.default.vector(e, e - r), a.Left),
											P = this.point(s.default.vector(e, e + n), a.BottomLeft),
											x = this.point(s.default.vector(e + n, e), a.BottomLeft),
											D = this.point(s.default.vector(e + n, e), a.BottomRight),
											T = this.point(s.default.vector(e, e + n), a.BottomRight),
											O = this.middlePoint(s.default.vector(e, -e + r), a.Left);
										return (
											u.push(this.poly([p, f, d, g, y, v, b, O])),
											u.push(this.poly([S, m, w, _, P, x, D, T])),
											u
										);
									}),
									(e.prototype.createChinese3Components = function () {
										var e = new l.Param().get(c.ShapeType.DecorationBar) / 2,
											t = [],
											n = e,
											r = s.default.matrix(1, 0, 0, 1, n, 0),
											i = s.default.matrix(1, 0, 0, 1, -n, 0),
											o = s.default.matrix(1, 0, 0, 1, 0, -n),
											h = s.default.matrix(1, 0, 0, 1, 0, n),
											p = new u.DecoraitonReference(0),
											f = new u.DecorationCorner(
												new u.DecoraitonReferencePoint(s.default.point(300, 400), p),
												[
													new u.DecoraitonReferencePoint(s.default.point(100, 400).transform(r), p),
													new u.DecoraitonReferencePoint(s.default.point(300, 200).transform(h), p),
												],
											),
											d = new u.DecoraitonReference(1),
											g = new u.DecorationCorner(
												new u.DecoraitonReferencePoint(s.default.point(-300, 400), d),
												[
													new u.DecoraitonReferencePoint(
														s.default.point(-100, 400).transform(i),
														d,
													),
													new u.DecoraitonReferencePoint(
														s.default.point(-300, 200).transform(h),
														d,
													),
												],
											),
											y = new u.DecoraitonReference(2),
											m = new u.DecorationCorner(
												new u.DecoraitonReferencePoint(s.default.point(300, -400), y),
												[
													new u.DecoraitonReferencePoint(
														s.default.point(100, -400).transform(r),
														y,
													),
													new u.DecoraitonReferencePoint(
														s.default.point(300, -200).transform(o),
														y,
													),
												],
											),
											v = new u.DecoraitonReference(3),
											w = new u.DecorationCorner(
												new u.DecoraitonReferencePoint(s.default.point(-300, -400), v),
												[
													new u.DecoraitonReferencePoint(
														s.default.point(-100, -400).transform(i),
														v,
													),
													new u.DecoraitonReferencePoint(
														s.default.point(-300, -200).transform(o),
														v,
													),
												],
											);
										t.push(f), t.push(g), t.push(m), t.push(w);
										var b = [
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(0, 200), p),
												new u.DecoraitonReferencePoint(s.default.point(-200, 200), p),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(150, 0), p),
												new u.DecoraitonReferencePoint(s.default.point(150, -200), p),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(-150, 0), d),
												new u.DecoraitonReferencePoint(s.default.point(-150, -200), d),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(0, 200), d),
												new u.DecoraitonReferencePoint(s.default.point(200, 200), d),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(0, -200), y),
												new u.DecoraitonReferencePoint(s.default.point(-200, -200), y),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(150, 0), y),
												new u.DecoraitonReferencePoint(s.default.point(150, 200), y),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(-150, 0), v),
												new u.DecoraitonReferencePoint(s.default.point(-150, 200), v),
											),
											new u.DecorationPolyEdge(
												new u.DecoraitonReferencePoint(s.default.point(0, -200), v),
												new u.DecoraitonReferencePoint(s.default.point(200, -200), v),
											),
										];
										return (
											b.forEach(function (t) {
												return (t.semiBarWidth = e);
											}),
											t.push(
												new u.DecorationPoly(
													b,
													[
														new u.DecoraitonReferencePoint(s.default.point(150, 200), p),
														new u.DecoraitonReferencePoint(s.default.point(150, -200), y),
														new u.DecoraitonReferencePoint(s.default.point(-150, -200), v),
														new u.DecoraitonReferencePoint(s.default.point(-150, 200), d),
													],
													['seg', 'seg', 'seg', 'seg'],
												),
											),
											t.forEach(function (t) {
												return (t.semiBarWidth = e);
											}),
											t.push(
												new u.DecorationLine(
													this.point(s.default.vector(0, 100), a.TopLeft),
													this.point(s.default.vector(0, 100), a.TopRight),
												),
											),
											t.push(
												new u.DecorationLine(
													this.point(s.default.vector(0, 100), a.BottomLeft),
													this.point(s.default.vector(0, 100), a.BottomRight),
												),
											),
											t.push(
												new u.DecorationLine(
													this.middlePoint(s.default.vector(0, 0), a.Left),
													this.middlePoint(s.default.vector(0, 0), a.Right),
												),
											),
											t.push(
												new u.DecorationLine(
													this.middlePoint(s.default.vector(0, 0), a.Top),
													this.middlePoint(s.default.vector(0, 0), a.Bottom),
												),
											),
											t
										);
									}),
									(e.prototype.createChinese4Components = function (e, t, n, r, o, a) {
										void 0 === e && (e = 1),
											void 0 === t && (t = 2),
											void 0 === n && (n = 0),
											void 0 === r && (r = 0),
											void 0 === o && (o = 0),
											void 0 === a && (a = new l.Param().get(c.ShapeType.DecorationBar) / 2);
										var h = [],
											p = new u.DecoraitonReference(0),
											f = new u.DecoraitonReference(1),
											d = new u.DecoraitonReference(2),
											g = new u.DecoraitonReference(3),
											y = [];
										return (
											y.push.apply(y, i(this.createChineseVerticalBars(e, n, o))),
											y.push.apply(y, i(this.createChineseHorizontalBars(t, n, r))),
											y.forEach(function (e) {
												return (e.semiBarWidth = a);
											}),
											h.push(
												new u.DecorationPoly(
													y,
													[
														new u.DecoraitonReferencePoint(s.default.point(n, n), p),
														new u.DecoraitonReferencePoint(s.default.point(n, -n), d),
														new u.DecoraitonReferencePoint(s.default.point(-n, -n), g),
														new u.DecoraitonReferencePoint(s.default.point(-n, n), f),
													],
													['seg', 'seg', 'seg', 'seg'],
												),
											),
											h.forEach(function (e) {
												return (e.semiBarWidth = a);
											}),
											h
										);
									}),
									(e.prototype.createChinese = function () {
										var e = this.createChineseComponents(0, 0, 80, 40, 40),
											t = new u.DecorationBarChinese(e);
										return (t.gap = 80), (t.hSep = 40), (t.vSep = 40), t;
									}),
									(e.prototype.createChinese2 = function () {
										var e = this.createChinese2Components();
										return new u.DecorationBarChinese2(e);
									}),
									(e.prototype.createChinese3 = function () {
										var e = this.createChinese3Components();
										return new u.DecorationBarChinese3(e);
									}),
									(e.prototype.createSemiArc = function () {
										var e = this.createSemiArcComponents(3),
											t = new u.DecorationBarSemiArc(e);
										return (t.count = 3), t;
									}),
									(e.prototype.createDecorationBarSemiArcPro2 = function () {
										var e = new u.DecorationBarSemiArcPro();
										return (
											(e.eqSplitTopCell = !1),
											(e.topAsBar = !1),
											(e.outerArcStyle = 'fill'),
											(e.innerStyle = 'wheel'),
											(e.wheelCrosstiesCount = 3),
											e
										);
									}),
									(e.prototype.createDecorationBarSemiArcProWithInnerArcStyle = function () {
										var e = new u.DecorationBarSemiArcPro();
										return (
											(e.eqSplitTopCell = !0),
											(e.topAsBar = !1),
											(e.outerArcStyle = 'fill'),
											(e.innerStyle = 'innerArc'),
											(e.wheelCrosstiesCount = 3),
											e
										);
									}),
									(e.prototype.createChinese4 = function () {
										var e = this.createChinese4Components(1, 2, 80, 80, 40),
											t = new u.DecorationBarChinese4(e);
										return (
											(t.gap = 80),
											(t.hSep = 80),
											(t.vSep = 40),
											(t.verticalBarCount = 1),
											(t.horizontalBarCount = 2),
											t
										);
									}),
									(e.prototype.createSemiArcComponents = function (e) {
										void 0 === e && (e = 3);
										for (var t = [], n = Math.PI / (e + 1), r = 0; r < e; r++) {
											var i = n * (r + 1),
												o = 9999 * Math.cos(i),
												l = 9999 * Math.sin(i),
												h = this.middlePoint(s.default.vector(0, 0), a.Bottom),
												c = this.middlePoint(s.default.vector(o, l), a.Bottom);
											t.push(new u.DecorationLine(h, c));
										}
										for (var p = []; t.length > 0; ) {
											var f = t.pop(),
												d = t.shift();
											f && p.push(f), d && p.push(d);
										}
										return p;
									}),
									(e.prototype.createPrairieComponents = function (e, t, n, r, o, a, l, h, c, p) {
										void 0 === t && (t = 0),
											void 0 === r && (r = 0),
											void 0 === o && (o = 0),
											void 0 === a && (a = 0),
											void 0 === l && (l = 0),
											void 0 === h && (h = 0),
											void 0 === c && (c = 0),
											void 0 === p && (p = 0);
										var f = [],
											d = new u.DecoraitonReference(0),
											g = new u.DecoraitonReference(1),
											y = new u.DecoraitonReference(2),
											m = new u.DecoraitonReference(3),
											v = new u.DecoraitonReference(
												3,
												u.decorationComponentReferenceType.edgeMiddle,
											),
											w = new u.DecoraitonReference(
												1,
												u.decorationComponentReferenceType.edgeMiddle,
											),
											b = new u.DecoraitonReference(
												0,
												u.decorationComponentReferenceType.edgeMiddle,
											),
											S = new u.DecoraitonReference(
												2,
												u.decorationComponentReferenceType.edgeMiddle,
											);
										if (e > 0 && t > 0)
											for (var _ = 0; _ < t; _++) {
												var P = (_ + 1) * e;
												f.push.apply(
													f,
													i([
														new u.DecorationLine(
															new u.DecoraitonReferencePoint(s.default.point(P, 0), d),
															new u.DecoraitonReferencePoint(s.default.point(P, 0), y),
														),
														new u.DecorationLine(
															new u.DecoraitonReferencePoint(s.default.point(-P, 0), g),
															new u.DecoraitonReferencePoint(s.default.point(-P, 0), m),
														),
													]),
												);
											}
										if (l > 0 && l % 2 == 1) {
											if (
												(f.push(
													new u.DecorationLine(
														new u.DecoraitonReferencePoint(s.default.point(p, 0), v),
														new u.DecoraitonReferencePoint(s.default.point(p, 0), w),
													),
												),
												h > 0)
											)
												for (_ = 1; _ <= (l - 1) / 2; _++) {
													var x = _ * h;
													f.push.apply(
														f,
														i([
															new u.DecorationLine(
																new u.DecoraitonReferencePoint(s.default.point(-x + p, 0), v),
																new u.DecoraitonReferencePoint(s.default.point(-x + p, 0), w),
															),
															new u.DecorationLine(
																new u.DecoraitonReferencePoint(s.default.point(x + p, 0), v),
																new u.DecoraitonReferencePoint(s.default.point(x + p, 0), w),
															),
														]),
													);
												}
										} else if (l > 0 && l % 2 == 0 && h > 0)
											for (_ = 0; _ < l / 2; _++)
												(x = _ * h + h / 2),
													f.push.apply(
														f,
														i([
															new u.DecorationLine(
																new u.DecoraitonReferencePoint(s.default.point(-x + p, 0), v),
																new u.DecoraitonReferencePoint(s.default.point(-x + p, 0), w),
															),
															new u.DecorationLine(
																new u.DecoraitonReferencePoint(s.default.point(x + p, 0), v),
																new u.DecoraitonReferencePoint(s.default.point(x + p, 0), w),
															),
														]),
													);
										if (n > 0)
											for (_ = 0; _ < r; _++)
												(P = (_ + 1) * n),
													f.push.apply(
														f,
														i([
															new u.DecorationLine(
																new u.DecoraitonReferencePoint(s.default.point(0, P), d),
																new u.DecoraitonReferencePoint(s.default.point(0, P), g),
															),
															new u.DecorationLine(
																new u.DecoraitonReferencePoint(s.default.point(0, -P), y),
																new u.DecoraitonReferencePoint(s.default.point(0, -P), m),
															),
														]),
													);
										if (o > 0 && o % 2 == 1) {
											if (
												(f.push.apply(
													f,
													i([
														new u.DecorationLine(
															new u.DecoraitonReferencePoint(s.default.point(0, 0 + c), b),
															new u.DecoraitonReferencePoint(s.default.point(0, 0 + c), S),
														),
													]),
												),
												a > 0)
											)
												for (_ = 0; _ < (o - 1) / 2; _++)
													(x = (_ + 1) * a),
														f.push.apply(
															f,
															i([
																new u.DecorationLine(
																	new u.DecoraitonReferencePoint(s.default.point(0, x + c), b),
																	new u.DecoraitonReferencePoint(s.default.point(0, x + c), S),
																),
																new u.DecorationLine(
																	new u.DecoraitonReferencePoint(s.default.point(0, -x + c), b),
																	new u.DecoraitonReferencePoint(s.default.point(0, -x + c), S),
																),
															]),
														);
										} else if (o > 0 && o % 2 == 0 && a > 0)
											for (_ = 0; _ < o / 2; _++)
												(x = _ * a + a / 2),
													f.push.apply(
														f,
														i([
															new u.DecorationLine(
																new u.DecoraitonReferencePoint(s.default.point(0, x + c), b),
																new u.DecoraitonReferencePoint(s.default.point(0, x + c), S),
															),
															new u.DecorationLine(
																new u.DecoraitonReferencePoint(s.default.point(0, -x + c), b),
																new u.DecoraitonReferencePoint(s.default.point(0, -x + c), S),
															),
														]),
													);
										return f;
									}),
									(e.prototype.createPrairie = function () {
										var e = this.createPrairieComponents(120, 1, 120, 1, 0, 100, 0, 100),
											t = new u.DecorationBarPrairie(e);
										return (
											(t.verEdgeSep = 120),
											(t.verEdgeCount = 1),
											(t.horEdgeCount = 1),
											(t.horEdgeSep = 120),
											(t.middleCount = 0),
											(t.middleSep = 100),
											(t.vMiddleCount = 0),
											(t.vMiddleSep = 100),
											t
										);
									}),
									(e.prototype.createChineseHorizontalBars = function (e, t, n) {
										var r = [],
											o = new u.DecoraitonReference(
												0,
												u.decorationComponentReferenceType.edgeMiddle,
											),
											a = new u.DecoraitonReference(
												2,
												u.decorationComponentReferenceType.edgeMiddle,
											),
											l = 0.5 * e;
										return (
											1 === e
												? r.push.apply(
														r,
														i([
															new u.DecorationPolyEdge(
																new u.DecoraitonReferencePoint(s.default.point(0, 0), a),
																new u.DecoraitonReferencePoint(s.default.point(t, 0), a),
															),
															new u.DecorationPolyEdge(
																new u.DecoraitonReferencePoint(s.default.point(0, 0), o),
																new u.DecoraitonReferencePoint(s.default.point(-t, 0), o),
															),
														]),
												  )
												: 2 === e
												? r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, -n), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, n), o),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, -n), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, n), a),
																),
															],
														),
												  )
												: 3 === e
												? r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n * l), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, -n * l), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, 0), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n * l), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, n * l), a),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n * l), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, -n * l), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, 0), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n * l), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, n * l), o),
																),
															],
														),
												  )
												: 4 === e
												? r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n * l), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, -n * l), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, -n * (l - 1)),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(t, -n * (l - 1)),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, n * (l - 1)),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(t, n * (l - 1)),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n * l), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, n * l), a),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n * l), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, -n * l), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, -n * (l - 1)),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-t, -n * (l - 1)),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, n * (l - 1)),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-t, n * (l - 1)),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n * l), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, n * l), o),
																),
															],
														),
												  )
												: 5 === e
												? r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n * l), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, -n * l), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, -n * (l - 1)),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(t, -n * (l - 1)),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, 0), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, n * (l - 1)),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(t, n * (l - 1)),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n * l), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, n * l), a),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n * l), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, -n * l), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, -n * (l - 1)),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-t, -n * (l - 1)),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, 0), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, n * (l - 1)),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-t, n * (l - 1)),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n * l), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, n * l), o),
																),
															],
														),
												  )
												: 6 === e &&
												  r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n * l), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, -n * l), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, -n * (l - 1)),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(t, -n * (l - 1)),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, -n * (l - 2)),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(t, -n * (l - 2)),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, n * (l - 2)),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(t, n * (l - 2)),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, n * (l - 1)),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(t, n * (l - 1)),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n * l), a),
																	new u.DecoraitonReferencePoint(s.default.point(t, n * l), a),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, -n * l), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, -n * l), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, -n * (l - 1)),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-t, -n * (l - 1)),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, -n * (l - 2)),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-t, -n * (l - 2)),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, n * (l - 2)),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-t, n * (l - 2)),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(0, n * (l - 1)),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-t, n * (l - 1)),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, n * l), o),
																	new u.DecoraitonReferencePoint(s.default.point(-t, n * l), o),
																),
															],
														),
												  ),
											r
										);
									}),
									(e.prototype.createChineseVerticalBars = function (e, t, n) {
										var r = [],
											o = new u.DecoraitonReference(
												3,
												u.decorationComponentReferenceType.edgeMiddle,
											),
											a = new u.DecoraitonReference(
												1,
												u.decorationComponentReferenceType.edgeMiddle,
											),
											l = 0.5 * e;
										return (
											1 === e
												? r.push.apply(
														r,
														i([
															new u.DecorationPolyEdge(
																new u.DecoraitonReferencePoint(s.default.point(0, 0), a),
																new u.DecoraitonReferencePoint(s.default.point(0, t), a),
															),
															new u.DecorationPolyEdge(
																new u.DecoraitonReferencePoint(s.default.point(0, 0), o),
																new u.DecoraitonReferencePoint(s.default.point(0, -t), o),
															),
														]),
												  )
												: 2 === e
												? r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(-n, t), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(n, t), a),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(-n, -t), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(n, -t), o),
																),
															],
														),
												  )
												: 3 === e
												? r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, t), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(0, t), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n * l, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(n * l, t), a),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, -t), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(0, -t), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n * l, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(n * l, -t), o),
																),
															],
														),
												  )
												: 4 === e
												? r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, t), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), 0),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), t),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), 0),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), t),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n * l, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(n * l, t), a),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, -t), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), 0),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), -t),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), 0),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), -t),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n * l, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(n * l, -t), o),
																),
															],
														),
												  )
												: 5 === e
												? r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, t), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), 0),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), t),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(0, t), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), 0),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), t),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n * l, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(n * l, t), a),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, -t), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), 0),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), -t),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(0, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(0, -t), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), 0),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), -t),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n * l, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(n * l, -t), o),
																),
															],
														),
												  )
												: 6 === e &&
												  r.push.apply(
														r,
														i(
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, t), a),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), 0),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), t),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 2), 0),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 2), t),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 2), 0),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 2), t),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), 0),
																		a,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), t),
																		a,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n * l, 0), a),
																	new u.DecoraitonReferencePoint(s.default.point(n * l, t), a),
																),
															],
															[
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(-n * l, -t), o),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), 0),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 1), -t),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 2), 0),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(-n * (l - 2), -t),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 2), 0),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 2), -t),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), 0),
																		o,
																	),
																	new u.DecoraitonReferencePoint(
																		s.default.point(n * (l - 1), -t),
																		o,
																	),
																),
																new u.DecorationPolyEdge(
																	new u.DecoraitonReferencePoint(s.default.point(n * l, 0), o),
																	new u.DecoraitonReferencePoint(s.default.point(n * l, -t), o),
																),
															],
														),
												  ),
											r
										);
									}),
									(e.prototype.createColonialComponents = function (e, t) {
										void 0 === e && (e = 0), void 0 === t && (t = 0);
										var n = [],
											r = new u.DecoraitonReference(0, u.decorationComponentReferenceType.edge),
											o = new u.DecoraitonReference(1, u.decorationComponentReferenceType.edge),
											a = new u.DecoraitonReference(2, u.decorationComponentReferenceType.edge),
											l = new u.DecoraitonReference(3, u.decorationComponentReferenceType.edge);
										if (e > 0)
											for (var h = 1 / (e + 1), c = 0; c < e; c++)
												n.push.apply(
													n,
													i([
														new u.DecorationLine(
															new u.DecoraitonReferencePoint(s.default.point(0, (c + 1) * h), r),
															new u.DecoraitonReferencePoint(
																s.default.point(0, -(1 - (c + 1) * h)),
																a,
															),
														),
													]),
												);
										if (t > 0)
											for (h = 1 / (t + 1), c = 0; c < t; c++)
												n.push.apply(
													n,
													i([
														new u.DecorationLine(
															new u.DecoraitonReferencePoint(s.default.point((c + 1) * h, 0), o),
															new u.DecoraitonReferencePoint(
																s.default.point(-(1 - (c + 1) * h), 0),
																l,
															),
														),
													]),
												);
										return n;
									}),
									(e.prototype.createDiamondComponents = function (e, t) {
										var n = [],
											r = new u.DecoraitonReference(0, u.decorationComponentReferenceType.vertex),
											o = new u.DecoraitonReference(1, u.decorationComponentReferenceType.vertex),
											a = new u.DecoraitonReference(2, u.decorationComponentReferenceType.vertex),
											l = new u.DecoraitonReference(3, u.decorationComponentReferenceType.vertex),
											h = new u.DecoraitonReference(0, u.decorationComponentReferenceType.edge),
											c = new u.DecoraitonReference(1, u.decorationComponentReferenceType.edge),
											p = new u.DecoraitonReference(2, u.decorationComponentReferenceType.edge),
											f = new u.DecoraitonReference(3, u.decorationComponentReferenceType.edge),
											d = [],
											g = [],
											y = [],
											m = [];
										if (e <= 0 || t <= 0) return [];
										for (var v = 1 / (e + 1), w = 1 / (t + 1), b = 0; b < e; b++)
											g.push(new u.DecoraitonReferencePoint(s.default.point((b + 1) * v, 0), c)),
												m.push(new u.DecoraitonReferencePoint(s.default.point(-(b + 1) * v, 0), f));
										for (b = 0; b < t; b++)
											d.push(new u.DecoraitonReferencePoint(s.default.point(0, (b + 1) * w), h)),
												y.push(new u.DecoraitonReferencePoint(s.default.point(0, -(b + 1) * w), p));
										var S = d
												.map(function (e) {
													return e;
												})
												.reverse(),
											_ = y
												.map(function (e) {
													return e;
												})
												.reverse(),
											P = m
												.map(function (e) {
													return e;
												})
												.reverse(),
											x = i(
												d.map(function (e) {
													return {
														pt: e,
														idx: 0,
													};
												}),
												[
													{
														pt: new u.DecoraitonReferencePoint(s.default.point(), a),
														idx: 0,
													},
												],
												g.map(function (e) {
													return {
														pt: e,
														idx: 1,
													};
												}),
											),
											D = i(
												P.map(function (e) {
													return {
														pt: e,
														idx: 3,
													};
												}),
												[
													{
														pt: new u.DecoraitonReferencePoint(s.default.point(), o),
														idx: 2,
													},
												],
												_.map(function (e) {
													return {
														pt: e,
														idx: 2,
													};
												}),
											),
											T = x.length;
										for (b = 0; b < T; b++)
											n.push(new u.DecorationLineArbitrary(x[b].pt, D[b].pt, x[b].idx, D[b].idx));
										var O = i(
												g.map(function (e) {
													return {
														pt: e,
														idx: 1,
													};
												}),
												[
													{
														pt: new u.DecoraitonReferencePoint(s.default.point(), l),
														idx: 1,
													},
												],
												y.map(function (e) {
													return {
														pt: e,
														idx: 2,
													};
												}),
											),
											M = i(
												S.map(function (e) {
													return {
														pt: e,
														idx: 0,
													};
												}),
												[
													{
														pt: new u.DecoraitonReferencePoint(s.default.point(), r),
														idx: 0,
													},
												],
												P.map(function (e) {
													return {
														pt: e,
														idx: 3,
													};
												}),
											),
											E = O.length;
										for (b = 0; b < E; b++)
											n.push(new u.DecorationLineArbitrary(O[b].pt, M[b].pt, O[b].idx, M[b].idx));
										return n;
									}),
									(e.prototype.createColonial = function () {
										var e = this.createColonialComponents(2, 2),
											t = new u.DecorationBarColonial(e);
										return (t.horEdgeCount = 2), (t.verEdgeCount = 2), t;
									}),
									(e.prototype.createDiamond = function () {
										var e = this.createDiamondComponents(1, 1),
											t = new u.DecorationBarDiamond(e);
										return (t.hPtCount = 1), (t.vPtCount = 1), t;
									}),
									(e.prototype.point = function (e, t) {
										void 0 === t && (t = a.TopLeft);
										var n = new u.DecoraitonReference(t),
											r = e.clone();
										return (
											(t !== a.TopRight && t !== a.BottomRight) || (r.x *= -1),
											(t !== a.BottomLeft && t !== a.BottomRight) || (r.y *= -1),
											new u.DecoraitonReferencePoint(s.default.point(r.x, r.y), n)
										);
									}),
									(e.prototype.middlePoint = function (e, t) {
										void 0 === t && (t = a.Left);
										var n = new u.DecoraitonReference(
												t,
												u.decorationComponentReferenceType.edgeMiddle,
											),
											r = e.clone();
										return (
											t === a.Right && (r.x *= -1),
											t === a.Bottom && (r.y *= -1),
											new u.DecoraitonReferencePoint(s.default.point(r.x, r.y), n)
										);
									}),
									(e.prototype.ratioPoint = function (e, t, n, r) {
										void 0 === n && (n = a.Left), void 0 === r && (r = 0);
										var o = new u.DecoraitonReference(n, u.decorationComponentReferenceType.edge);
										(n !== a.Top && n !== a.Right) || ((e = 1 - e), (e *= -1)),
											n === a.Right && (t *= -1),
											n === a.Bottom && (t *= -1);
										var l = [];
										return (
											n === a.Left || n === a.Right
												? (l.push(t), l.push(e))
												: (l.push(e), l.push(t)),
											new u.DecoraitonReferencePoint(s.default.point.apply(s.default, i(l)), o, r)
										);
									}),
									(e.prototype.centerPoint = function (e) {
										var t = new u.DecoraitonReference(0, u.decorationComponentReferenceType.center);
										return new u.DecoraitonReferencePoint(s.default.point(e.x, e.y), t);
									}),
									(e.prototype.edge = function (e, t, n) {
										return new u.DecorationPolyEdge(this.point(e, n), this.point(t, n));
									}),
									(e.prototype.edges = function (e, t, n) {
										var r = this;
										return (
											void 0 === n && (n = [a.TopLeft, a.BottomLeft, a.TopRight, a.BottomRight]),
											n.map(function (n) {
												return r.edge(e, t, n);
											})
										);
									}),
									(e.prototype.middleEdge = function (e, t, n, r) {
										return new u.DecorationPolyEdge(
											this.middlePoint(s.default.vector(e, n), r),
											this.middlePoint(s.default.vector(t, n), r),
										);
									}),
									(e.prototype.middleEdges = function (e, t, n, r) {
										var i = this;
										return r.map(function (r) {
											return i.middleEdge(e, t, n, r);
										});
									}),
									(e.prototype.ratioEdge = function (e, t, n, r, i) {
										return (
											void 0 === i && (i = 0),
											new u.DecorationPolyEdge(
												this.ratioPoint(e, t, r, i),
												this.ratioPoint(e, n, r, i),
											)
										);
									}),
									(e.prototype.ratioEdges = function (e, t, n, r, i) {
										var o = this;
										return (
											void 0 === i && (i = 0),
											r.map(function (r) {
												return o.ratioEdge(e, t, n, r, i);
											})
										);
									}),
									(e.prototype.centerEdge = function (e, t) {
										return new u.DecorationPolyEdge(this.centerPoint(e), this.centerPoint(t));
									}),
									(e.prototype.poly = function (e) {
										return new u.DecorationPoly(
											[],
											e,
											e.map(function (e) {
												return 'seg';
											}),
										);
									}),
									e
								);
							})();
						(t.DecorationBarCreator = p),
							(function (e) {
								(e[(e.TopLeft = 0)] = 'TopLeft'),
									(e[(e.TopRight = 1)] = 'TopRight'),
									(e[(e.BottomLeft = 2)] = 'BottomLeft'),
									(e[(e.BottomRight = 3)] = 'BottomRight'),
									(e[(e.Left = 0)] = 'Left'),
									(e[(e.Bottom = 1)] = 'Bottom'),
									(e[(e.Right = 2)] = 'Right'),
									(e[(e.Top = 3)] = 'Top');
							})(a || (a = {}));
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationComponentParser = void 0);
						var i = r(n(0)),
							o = n(31),
							a = (function () {
								function e() {}
								return (
									(e.parse = function (e) {
										if (e.tp === o.DecorationComponentType.decorationEdge) return this.parseEdge(e);
										if (e.tp === o.DecorationComponentType.dcorationCorner)
											return this.parseCorner(e);
										if (e.tp === o.DecorationComponentType.decorationPoly) return this.parsePoly(e);
										if (e.tp === o.DecorationComponentType.decorationLine) return this.parseLine(e);
										if (e.tp === o.DecorationComponentType.decorationLineArbitrary)
											return this.parseLineArbitrary(e);
										throw new Error('not support');
									}),
									(e.parsePoint = function (e) {
										var t = new o.DecoraitonReferencePoint(
											i.default.point(),
											new o.DecoraitonReference(0),
										);
										return t.deserialize(e), t;
									}),
									(e.parseEdge = function (e) {
										var t = new o.DecoraitonReferencePoint(
												i.default.point(),
												new o.DecoraitonReference(0),
											),
											n = new o.DecoraitonReferencePoint(
												i.default.point(),
												new o.DecoraitonReference(0),
											),
											r = new o.DecorationPolyEdge(t, n);
										return r.deserialize(e), r;
									}),
									(e.parseCorner = function (e) {
										var t = new o.DecoraitonReferencePoint(
												i.default.point(),
												new o.DecoraitonReference(0),
											),
											n = new o.DecorationCorner(t, []);
										return n.deserialize(e), n;
									}),
									(e.parsePoly = function (e) {
										var t = new o.DecorationPoly([], [], []);
										return t.deserialize(e), t;
									}),
									(e.parseLine = function (e) {
										var t = new o.DecoraitonReferencePoint(
												i.default.point(),
												new o.DecoraitonReference(0),
											),
											n = new o.DecoraitonReferencePoint(
												i.default.point(),
												new o.DecoraitonReference(0),
											),
											r = new o.DecorationLine(t, n);
										return r.deserialize(e), r;
									}),
									(e.parseLineArbitrary = function (e) {
										var t = new o.DecoraitonReferencePoint(
												i.default.point(),
												new o.DecoraitonReference(0),
											),
											n = new o.DecoraitonReferencePoint(
												i.default.point(),
												new o.DecoraitonReference(0),
											),
											r = new o.DecorationLineArbitrary(t, n, 0, 0);
										return r.deserialize(e), r;
									}),
									e
								);
							})();
						t.DecorationComponentParser = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationPoly =
								t.DecorationLineArbitrary =
								t.DecorationLine =
								t.DecorationPolyEdge =
								t.DecorationCorner =
								t.DecorationComponent =
									void 0);
						var l = s(n(0)),
							h = n(1),
							c = n(2),
							u = n(31),
							p = (function () {
								function e(e) {
									(this.type = e),
										(this.semiBarWidth = new c.Param().get(h.ShapeType.DecorationBar) / 2);
								}
								return (
									(e.prototype.toJSON = function () {
										return {
											sbw: this.semiBarWidth,
											tp: this.type,
										};
									}),
									(e.prototype.deserialize = function (e) {
										(this.semiBarWidth = e.sbw), (this.type = e.tp);
									}),
									e
								);
							})();
						t.DecorationComponent = p;
						var f = (function (e) {
							function t(t, n) {
								var r = e.call(this, u.DecorationComponentType.dcorationCorner) || this;
								return (r.vertext = t), (r.pts = n), r;
							}
							return (
								i(t, e),
								(t.prototype.getUpdatedLines = function (e) {
									return [
										this.vertext.getRealPoint(e),
										this.pts.map(function (t) {
											return t.getRealPoint(e);
										}),
									];
								}),
								(t.prototype.createBarPolys = function (e) {
									var t = o(this.getUpdatedLines(e), 2),
										n = t[0],
										r = t[1],
										i = r[0],
										a = r[1],
										s = l.default.line(i, n),
										c = l.default.line(n, a),
										u = this.semiBarWidth,
										p = l.default.line(s.pt.translate(s.norm.multiply(u)), s.norm),
										f = l.default.line(s.pt.translate(s.norm.multiply(-u)), s.norm),
										d = l.default.line(c.pt.translate(c.norm.multiply(u)), c.norm),
										g = l.default.line(c.pt.translate(c.norm.multiply(-u)), c.norm),
										y = p.intersect(d)[0],
										m = f.intersect(g)[0],
										v = i.translate(s.norm.multiply(u)),
										w = i.translate(s.norm.multiply(-u)),
										b = a.translate(c.norm.multiply(u)),
										S = a.translate(c.norm.multiply(-u)),
										_ = [
											l.default.segment(w, m),
											l.default.segment(m, y),
											l.default.segment(y, v),
											l.default.segment(v, w),
										],
										P = [
											l.default.segment(S, m),
											l.default.segment(m, y),
											l.default.segment(y, b),
											l.default.segment(b, S),
										],
										x = new h.WinPolygon(_),
										D = new h.WinPolygon(P);
									return (
										(x.mulShape = l.default.segment(n, r[0])),
										(D.mulShape = l.default.segment(n, r[1])),
										[x, D]
									);
								}),
								(t.prototype.toJSON = function () {
									var t = e.prototype.toJSON.call(this);
									return (
										(t.vt = this.vertext.toJSON()),
										(t.pts = this.pts.map(function (e) {
											return e.toJSON();
										})),
										t
									);
								}),
								(t.prototype.deserialize = function (t) {
									var n = this;
									e.prototype.deserialize.call(this, t),
										this.vertext.deserialize(t.vt),
										(this.pts = []),
										t.pts.forEach(function (e) {
											n.pts.push(u.DecorationComponentParser.parsePoint(e));
										});
								}),
								t
							);
						})(p);
						t.DecorationCorner = f;
						var d = (function (e) {
							function t(t, n) {
								var r = e.call(this, u.DecorationComponentType.decorationEdge) || this;
								return (r.start = t), (r.end = n), r;
							}
							return (
								i(t, e),
								(t.prototype.getUpdatedLines = function (e) {
									return [this.start.getRealPoint(e), this.end.getRealPoint(e)];
								}),
								(t.prototype.createBarPolys = function (e) {
									var n = o(this.getUpdatedLines(e), 2),
										r = n[0],
										i = n[1];
									return t.createStandardBars(r, i, this.semiBarWidth);
								}),
								(t.prototype.toJSON = function () {
									var t = e.prototype.toJSON.call(this);
									return (t.st = this.start.toJSON()), (t.ed = this.end.toJSON()), t;
								}),
								(t.prototype.deserialize = function (t) {
									e.prototype.deserialize.call(this, t),
										(this.start = u.DecorationComponentParser.parsePoint(t.st)),
										(this.end = u.DecorationComponentParser.parsePoint(t.ed));
								}),
								(t.createStandardBars = function (e, t, n) {
									var r,
										i,
										o,
										a,
										s = l.default.segment(e, t).tangentInStart().rotate90CCW();
									(r = e.translate(s.multiply(n))),
										(a = e.translate(s.multiply(-n))),
										(i = t.translate(s.multiply(n))),
										(o = t.translate(s.multiply(-n)));
									var c = new h.WinPolygon([
										l.default.segment(r, i),
										l.default.segment(i, o),
										l.default.segment(o, a),
										l.default.segment(a, r),
									]);
									return (c.mulShape = l.default.segment(e, t)), [c];
								}),
								t
							);
						})(p);
						t.DecorationPolyEdge = d;
						var g = (function (e) {
							function t(t, n) {
								var r = e.call(this, u.DecorationComponentType.decorationLine) || this;
								return (r.start = t), (r.end = n), r;
							}
							return (
								i(t, e),
								(t.prototype.getUpdatedLines = function (e) {
									return [this.start.getRealPoint(e), this.end.getRealPoint(e)];
								}),
								(t.prototype.createBarPolys = function (e) {
									var t = o(this.getUpdatedLines(e), 2),
										n = t[0],
										r = t[1];
									return d.createStandardBars(n, r, this.semiBarWidth);
								}),
								(t.prototype.toJSON = function () {
									var t = e.prototype.toJSON.call(this);
									return (t.st = this.start.toJSON()), (t.ed = this.end.toJSON()), t;
								}),
								(t.prototype.deserialize = function (t) {
									e.prototype.deserialize.call(this, t),
										(this.start = u.DecorationComponentParser.parsePoint(t.st)),
										(this.end = u.DecorationComponentParser.parsePoint(t.ed));
								}),
								t
							);
						})(p);
						t.DecorationLine = g;
						var y = (function (e) {
							function t(t, n, r, i) {
								var o = e.call(this, u.DecorationComponentType.decorationLineArbitrary) || this;
								return (
									(o.start = t), (o.end = n), (o.startIntersectIdx = r), (o.endIntersectIdx = i), o
								);
							}
							return (
								i(t, e),
								(t.prototype.getUpdatedLines = function (e) {
									return [this.start.getRealPoint(e), this.end.getRealPoint(e)];
								}),
								(t.prototype.createBarPolys = function (e) {
									var t,
										n,
										r,
										i,
										o = e.edges,
										a = l.default.line(
											o[this.startIntersectIdx].start,
											o[this.startIntersectIdx].end,
										),
										s = l.default.line(o[this.endIntersectIdx].start, o[this.endIntersectIdx].end),
										c = this.start.getRealPoint(e),
										u = this.end.getRealPoint(e),
										p = l.default.segment(c, u),
										f = p.tangentInStart().rotate90CCW();
									(t = l.default
										.line(
											p.start.translate(f.multiply(this.semiBarWidth)),
											p.end.translate(f.multiply(this.semiBarWidth)),
										)
										.intersect(a)[0]),
										(i = l.default
											.line(
												p.start.translate(f.multiply(-this.semiBarWidth)),
												p.end.translate(f.multiply(-this.semiBarWidth)),
											)
											.intersect(a)[0]),
										(n = l.default
											.line(
												p.end.translate(f.multiply(this.semiBarWidth)),
												p.start.translate(f.multiply(this.semiBarWidth)),
											)
											.intersect(s)[0]),
										(r = l.default
											.line(
												p.end.translate(f.multiply(-this.semiBarWidth)),
												p.start.translate(f.multiply(-this.semiBarWidth)),
											)
											.intersect(s)[0]);
									var d = new h.WinPolygon([
										l.default.segment(t, n),
										l.default.segment(n, r),
										l.default.segment(r, i),
										l.default.segment(i, t),
									]);
									return (d.mulShape = l.default.segment(c, u)), [d];
								}),
								(t.prototype.toJSON = function () {
									var t = e.prototype.toJSON.call(this);
									return (
										(t.st = this.start.toJSON()),
										(t.ed = this.end.toJSON()),
										(t.sii = this.startIntersectIdx),
										(t.eii = this.endIntersectIdx),
										t
									);
								}),
								(t.prototype.deserialize = function (t) {
									e.prototype.deserialize.call(this, t),
										(this.start = u.DecorationComponentParser.parsePoint(t.st)),
										(this.end = u.DecorationComponentParser.parsePoint(t.ed)),
										(this.startIntersectIdx = t.sii),
										(this.endIntersectIdx = t.eii);
								}),
								t
							);
						})(p);
						t.DecorationLineArbitrary = y;
						var m = (function (e) {
							function t(t, n, r) {
								var i = e.call(this, u.DecorationComponentType.decorationPoly) || this;
								return (i.slines = t), (i.vertices = n), (i.shapeType = r), i;
							}
							return (
								i(t, e),
								(t.prototype.getUpdatedLines = function (e) {
									var t = this,
										n = this.vertices.map(function (t) {
											return t.getRealPoint(e);
										}),
										r = [];
									return (
										this.shapeType.forEach(function (e, i) {
											if ('seg' !== e) throw new Error('not support');
											r.push(l.default.segment(n[i], n[c.Utils.getNextIdx(i, t.vertices.length)]));
										}),
										[new h.WinPolygon(r)]
									);
								}),
								(t.prototype.createBarPolys = function (e) {
									var t = [],
										n = o(this.getUpdatedLines(e), 1)[0];
									this.slines.forEach(function (e) {
										return t.push.apply(t, a(e.createBarPolys(n)));
									});
									var r = this.frametifyInner(2 * this.semiBarWidth, n);
									return t.push.apply(t, a(r)), t;
								}),
								(t.prototype.frametifyInner = function (e, t) {
									for (
										var n = t.frametify(
												t.edges.map(function (t) {
													return e;
												}),
												[],
											),
											r = n.innerPolys[0],
											i = t.edges,
											o = r.edges,
											a = [],
											s = 0;
										s < n.barPolys.length;
										s++
									) {
										var h = n.barPolys[s],
											c = i[s];
										if (void 0 === h.ringPolygon()) a.push(h);
										else {
											var u = c,
												p = (c.r.valueOf() + o[s].r.valueOf()) / 2;
											(h.mulShape = l.default.arc(u.center, p, 0, 2 * Math.PI, u.counterClockwise)),
												a.push(h);
										}
									}
									return a;
								}),
								(t.prototype.toJSON = function () {
									var t = e.prototype.toJSON.call(this);
									return (
										(t.vcs = this.vertices.map(function (e) {
											return e.toJSON();
										})),
										(t.sls = this.slines.map(function (e) {
											return e.toJSON();
										})),
										(t.stps = this.shapeType),
										t
									);
								}),
								(t.prototype.deserialize = function (t) {
									var n = this;
									e.prototype.deserialize.call(this, t),
										(this.shapeType = t.stps),
										(this.vertices = []),
										t.vcs.forEach(function (e) {
											var t = new u.DecoraitonReferencePoint(
												l.default.point(),
												new u.DecoraitonReference(0),
											);
											t.deserialize(e), n.vertices.push(t);
										}),
										(this.slines = []),
										t.sls.forEach(function (e) {
											var t = u.DecorationComponentParser.parseEdge(e);
											n.slines.push(t);
										});
								}),
								t
							);
						})(p);
						t.DecorationPoly = m;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecoraitonReference =
								t.DecoraitonReferencePoint =
								t.decorationComponentReferenceType =
									void 0);
						var i,
							o = r(n(0));
						!(function (e) {
							(e.vertex = 'vertex'),
								(e.edgeMiddle = 'edgeMiddle'),
								(e.edge = 'edge'),
								(e.center = 'center');
						})(
							(i = t.decorationComponentReferenceType || (t.decorationComponentReferenceType = {})),
						);
						var a = (function () {
							function e(e, t, n) {
								void 0 === n && (n = 0), (this.point = e), (this.ref = t), (this.expand = n);
							}
							return (
								(e.prototype.getRealPoint = function (e, t, n) {
									void 0 === t && (t = this.ref.refType), void 0 === n && (n = this.ref.refIdx);
									var r = this.ref.getReferencePoint(e, t, n);
									if (t === i.edge) {
										if (!e.isRectangle()) throw new Error('not rect');
										var a = this.ref.getSortedVertex(e),
											s = this.ref.getSortedEdge(n, e, a);
										if (!s) throw new Error('no edge');
										return (
											s instanceof o.default.Segment &&
												(s = o.default.segment(
													s.start.translate(s.tangentInStart().invert().multiply(this.expand)),
													s.end.translate(s.tangentInEnd().invert().multiply(this.expand)),
												)),
											s.start.translate(
												o.default.vector(
													this.point.x * (0 === n || 2 === n ? 1 : s.length),
													this.point.y * (1 === n || 3 === n ? 1 : s.length),
												),
											)
										);
									}
									return t === i.center
										? e.box.center.translate(o.default.vector(this.point.x, this.point.y))
										: this.point.translate(o.default.vector(r.x, r.y));
								}),
								(e.prototype.toJSON = function () {
									return {
										pt: this.point.toJSON(),
										ref: this.ref.toJSON(),
									};
								}),
								(e.prototype.deserialize = function (e) {
									(this.point = o.default.point(e.pt.x, e.pt.y)), this.ref.deserialize(e.ref);
								}),
								e
							);
						})();
						t.DecoraitonReferencePoint = a;
						var s = (function () {
							function e(e, t) {
								void 0 === t && (t = i.vertex), (this.refIdx = e), (this.refType = t);
							}
							return (
								(e.prototype.getSortedVertex = function (e) {
									return e.vertices.slice().sort(function (e, t) {
										return o.default.Utils.LT(e.y, t.y)
											? -1
											: o.default.Utils.GT(e.y, t.y)
											? 1
											: o.default.Utils.LE(e.x, t.x)
											? -1
											: 1;
									});
								}),
								(e.prototype.getSortedEdge = function (e, t, n) {
									var r = t.edges;
									if (0 === e) {
										if (
											!(i = r.find(function (e) {
												return (
													(e.start.equalTo(n[0]) && e.end.equalTo(n[2])) ||
													(e.start.equalTo(n[2]) && e.end.equalTo(n[0]))
												);
											}))
										)
											return;
										return i.start.equalTo(n[0]) ? i : i.reverse();
									}
									if (1 === e) {
										if (
											!(i = r.find(function (e) {
												return (
													(e.start.equalTo(n[3]) && e.end.equalTo(n[2])) ||
													(e.start.equalTo(n[2]) && e.end.equalTo(n[3]))
												);
											}))
										)
											return;
										return i.start.equalTo(n[2]) ? i : i.reverse();
									}
									if (2 === e) {
										if (
											!(i = r.find(function (e) {
												return (
													(e.start.equalTo(n[3]) && e.end.equalTo(n[1])) ||
													(e.start.equalTo(n[1]) && e.end.equalTo(n[3]))
												);
											}))
										)
											return;
										return i.start.equalTo(n[3]) ? i : i.reverse();
									}
									if (3 === e) {
										var i;
										if (
											!(i = r.find(function (e) {
												return (
													(e.start.equalTo(n[0]) && e.end.equalTo(n[1])) ||
													(e.start.equalTo(n[1]) && e.end.equalTo(n[0]))
												);
											}))
										)
											return;
										return i.start.equalTo(n[1]) ? i : i.reverse();
									}
									throw new Error('idx > 3');
								}),
								(e.prototype.getReferencePoint = function (e, t, n) {
									void 0 === t && (t = this.refType), void 0 === n && (n = this.refIdx);
									var r = this.getSortedVertex(e);
									if (t === i.vertex) return r[n].clone();
									if (t === i.edgeMiddle) {
										if (!e.isRectangle()) throw new Error('not rec');
										if (!(o = this.getSortedEdge(n, e, r))) throw new Error('no edge');
										return o.middle();
									}
									if (t === i.edge) {
										if (!e.isRectangle()) throw new Error('not rec');
										var o;
										if (!(o = this.getSortedEdge(n, e, r))) throw new Error('no edge');
										return o.middle();
									}
									if (t === i.center) return e.box.center;
									throw new Error('not support');
								}),
								(e.prototype.toJSON = function () {
									return {
										rt: this.refType,
										rx: this.refIdx,
									};
								}),
								(e.prototype.deserialize = function (e) {
									(this.refType = e.rt), (this.refIdx = e.rx);
								}),
								e
							);
						})();
						t.DecoraitonReference = s;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarParser = void 0);
						var r = n(31),
							i = (function () {
								function e() {}
								return (
									(e.parse = function (e) {
										var t;
										if (
											e.tp === r.DecorationBarType.decorationSimple ||
											e.tp === r.DecorationBarType.decorationChinese
										)
											(t = new r.DecorationBarChinese([])).deserialize(e);
										else if (e.tp === r.DecorationBarType.decorationChinese2)
											(t = new r.DecorationBarChinese2([])).deserialize(e);
										else if (e.tp === r.DecorationBarType.decorationChinese3)
											(t = new r.DecorationBarChinese3([])).deserialize(e);
										else if (e.tp === r.DecorationBarType.decorationChinese4)
											(t = new r.DecorationBarChinese4([])).deserialize(e);
										else if (e.tp === r.DecorationBarType.decorationPrairie)
											(t = new r.DecorationBarPrairie([])).deserialize(e);
										else if (e.tp === r.DecorationBarType.decorationColonial)
											(t = new r.DecorationBarColonial([])).deserialize(e);
										else if (e.tp === r.DecorationBarType.decorationDiamond)
											(t = new r.DecorationBarDiamond([])).deserialize(e);
										else if (e.tp === r.DecorationBarType.decorationSemiArc)
											(t = new r.DecorationBarSemiArc([])).deserialize(e);
										else {
											if (e.tp !== r.DecorationBarType.decorationSemiArcPro)
												throw new Error('not support');
											(t = new r.DecorationBarSemiArcPro()).deserialize(e);
										}
										return t;
									}),
									e
								);
							})();
						t.DecorationBarParser = i;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationShape = void 0);
						var s = a(n(0)),
							l = n(119),
							h = n(2),
							c = n(1),
							u = n(31),
							p = (function (e) {
								function t(t, n) {
									var r = e.call(this, c.ShapeType.DecorationBar, n) || this;
									return (
										(r.decorationBar = t), (r.tapIdx = h.ShapeIdx.idx(c.ShapeType.DecorationBar)), r
									);
								}
								return (
									i(t, e),
									(t.prototype.draw = function (t) {
										var n = this;
										e.prototype.draw.call(this, t),
											this.gshape.moveToTop(),
											this.gshape.clipFunc(function (e) {
												var t,
													r,
													i = n.polygon.edges;
												if (0 !== i.length) {
													e.beginPath();
													var a = i[0];
													e.moveTo(a.start.x, a.start.y);
													try {
														for (var l = o(i), h = l.next(); !h.done; h = l.next()) {
															var c = h.value;
															if (c instanceof s.default.Segment) e.lineTo(c.pe.x, c.pe.y);
															else {
																var u = c.center,
																	p = c.counterClockwise,
																	f =
																		c.startAngle > Math.PI
																			? c.startAngle - 2 * Math.PI
																			: c.startAngle,
																	d = c.endAngle > Math.PI ? c.endAngle - 2 * Math.PI : c.endAngle;
																e.arc(u.x, u.y, c.r.valueOf(), f, d, !p);
															}
														}
													} catch (e) {
														t = {
															error: e,
														};
													} finally {
														try {
															h && !h.done && (r = l.return) && r.call(l);
														} finally {
															if (t) throw t.error;
														}
													}
													e.closePath();
												}
											});
									}),
									(t.prototype.updatePoly = function (e) {
										var t = this;
										this.clearBar(),
											e && ((this.polygon = e), (this.decorationBar.hostPoly = e)),
											this.decorationBar.split().forEach(function (e) {
												var n = new c.Bar(e, c.ShapeType.DecorationBar);
												t.add(n);
											});
									}),
									(t.prototype.hitTest = function (e) {
										return this.bars.some(function (t) {
											return t.polygon.contains(e);
										});
									}),
									(t.prototype.highlight = function (e) {
										this.bars.forEach(function (t) {
											return t.highlight(e);
										});
									}),
									(t.prototype.translate = function (e) {
										this.decorationBar.translate(e),
											this.bars.forEach(function (t) {
												t.translate(e);
											});
									}),
									Object.defineProperty(t.prototype, 'bars', {
										get: function () {
											var e = [];
											return (
												this.children.forEach(function (t) {
													t instanceof c.Bar && t.where === c.ShapeType.DecorationBar && e.push(t);
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										return {
											db: this.decorationBar.toJSON(),
										};
									}),
									(t.prototype.deserialize = function (e) {
										var t = void 0 !== e.db ? e.db : e;
										this.decorationBar = u.DecorationBarParser.parse(t);
									}),
									(t.prototype.clearBar = function () {
										var e = this;
										this.bars.forEach(function (t) {
											return e.remove(t);
										});
									}),
									Object.defineProperty(t.prototype, 'isSelected', {
										get: function () {
											return 0 !== this.children.length && this.children[0].highlighted;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.delete = function (e) {
										this.isSelected && (this.recycle(), e.removeBar(this.polygon.polyId, !0));
									}),
									t
								);
							})(l.Shape);
						t.DecorationShape = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.GlassHoleTool = void 0);
						var o = n(1),
							a = n(5),
							s = (function (e) {
								function t(t) {
									var n = e.call(this, a.ToolType.glassHole, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									(t.prototype.mouseup = function (t) {
										var n = this;
										e.prototype.mouseup.call(this, t);
										var r = this.fetchGlasses().find(function (e) {
											return e.polygon.contains(n.curPt);
										});
										r &&
											(r.makeHole(this.curPt, '100'),
											r.draw(this.view),
											this.view.refresh(),
											this.view.mometoManager.checkPoint(),
											this.view.toolManager.releaseTool());
									}),
									(t.prototype.fetchGlasses = function () {
										var e = [];
										return (
											this.view.shapeManager.shapem.forEach(function (t) {
												t.mulManager.glasses.forEach(function (t) {
													t instanceof o.Glass && e.push(t);
												}),
													t.sashManager.allSashes.forEach(function (t) {
														t.mulManager.glasses.forEach(function (t) {
															t instanceof o.Glass && e.push(t);
														});
													});
											}),
											e
										);
									}),
									t
								);
							})(a.Tool);
						t.GlassHoleTool = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditGlassHoleTool = void 0);
						var o = n(6),
							a = n(7),
							s = n(2),
							l = n(5),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, l.ToolType.editGlassHole, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'attrs', {
										get: function () {
											return this.vshape.attrs;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'glassHole', {
										get: function () {
											return this.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.attrs.data.poly;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dbclick = function (t) {
										e.prototype.dbclick.call(this, t),
											(this.vshape = t.target),
											this.poly instanceof h.Text &&
												(a.DrawParams.Ins.customDimEditor &&
												s.SystemParam.isMobileDevice &&
												this.glassHole.style === h.HoleStyle.Circle
													? this.emitDimEdit(t.evt)
													: this.showTextEditor(t, this.glassHole.size, this.onConfirm.bind(this)));
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t), (this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											this.vshape && s.ShapeHelper.restoreShapeMatrix(this.vshape),
											requestAnimationFrame(function () {
												n.vshape &&
													(n.glassHole.locate(n.curPt),
													n.glassHole.updatePoly(),
													n.glassHole.glass.draw(n.view));
											});
									}),
									(t.prototype.mousedone = function (t) {
										this.view.mometoManager.checkPoint(),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t);
									}),
									(t.prototype.emitDimEdit = function (e) {
										this.view.eventBus.emit({
											type: o.EventType.dim_edit,
											payload: {
												event: e,
												initValue: this.glassHole.size,
												onConfirm: this.onConfirm.bind(this),
												style: l.EditorStyle.Normal,
												isVertical: !1,
											},
										});
									}),
									(t.prototype.onConfirm = function (e) {
										(this.glassHole.size = e),
											this.glassHole.updatePoly(),
											this.glassHole.glass.draw(this.view),
											this.view.mometoManager.checkPoint(),
											this.view.refresh();
									}),
									t
								);
							})(l.Tool);
						t.EditGlassHoleTool = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditGlassHoleDimTool = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(2),
							h = n(7),
							c = n(5),
							u = (function (e) {
								function t(t) {
									var n = e.call(this, c.ToolType.editGlassHoleDim, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'attrs', {
										get: function () {
											return this.vshape.attrs;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dim', {
										get: function () {
											return this.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hole', {
										get: function () {
											return this.dim.parent;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dbclick = function (t) {
										e.prototype.dbclick.call(this, t),
											(this.vshape = t.target),
											h.DrawParams.Ins.customDimEditor && l.SystemParam.isMobileDevice
												? this.emitDimEdit(t.evt)
												: this.showNumberEditor(t, this.dim.value, this.onConfirm.bind(this));
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.vshape = t.target),
											(this.prevPt = this.curPt);
									}),
									(t.prototype.dragmove = function (t) {
										var n = this;
										e.prototype.dragmove.call(this, t),
											this.vshape && l.ShapeHelper.restoreShapeMatrix(this.vshape),
											requestAnimationFrame(function () {
												if (n.vshape) {
													var e = a.default.vector(n.prevPt, n.curPt);
													(e = e.projectionOn(a.default.vector(n.dim.from, n.dim.to).rotate90CW())),
														(n.dim.offset = n.dim.offset.add(e)),
														n.dim.updatePoly(),
														n.dim.draw(n.view),
														(n.prevPt = n.curPt);
												}
											});
									}),
									(t.prototype.mousedone = function (t) {
										this.view.mometoManager.checkPoint(),
											(this.vshape = void 0),
											e.prototype.mousedone.call(this, t);
									}),
									(t.prototype.onConfirm = function (e) {
										var t = this.dim === this.hole.hMarginDim;
										(this.hole.constraint[t ? 0 : 1].distance = e),
											this.hole.updatePoly(),
											this.hole.glass.draw(this.view),
											this.view.refresh();
									}),
									(t.prototype.emitDimEdit = function (e) {
										this.view.eventBus.emit({
											type: s.EventType.dim_edit,
											payload: {
												event: e,
												initValue: h.UnitConvertion.Ins.length(this.dim.value),
												onConfirm: this.onConfirm.bind(this),
												style: c.EditorStyle.Normal,
												isVertical: !1,
											},
										});
									}),
									t
								);
							})(c.Tool);
						t.EditGlassHoleDimTool = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EditThreedArcTextTool = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(7),
							h = n(5),
							c = n(2),
							u = n(1),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, h.ToolType.editExtraDim, t) || this;
									return (n.view = t), (n.prevPt = new a.default.Point()), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'frame', {
										get: function () {
											return this.vshape.attrs.robot;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'text', {
										get: function () {
											return this.vshape.attrs.data.poly;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.getTextValue = function () {
										return +this.text.content.split(':')[1];
									}),
									(t.prototype.getTextType = function () {
										return this.text.content.split(':')[0];
									}),
									(t.prototype.dbclick = function (t) {
										var n = this;
										e.prototype.dbclick.call(this, t), (this.vshape = t.target);
										var r = this.getTextValue(),
											i = this.getTextType();
										i !== l.DrawParams.Ins.lang('radius') &&
											i !== l.DrawParams.Ins.lang('arc_length') &&
											(l.DrawParams.Ins.customDimEditor && c.SystemParam.isMobileDevice
												? this.emitThreedArc(t)
												: this.showNumberEditor(t, r, function (e) {
														n.onConfirm(e);
												  }));
									}),
									(t.prototype.emitThreedArc = function (e) {
										this.view.eventBus.emit({
											type: s.EventType.edit_threed_arc_text,
											payload: {
												event: e,
												initValue: this.getTextValue(),
												onConfirm: this.onConfirm.bind(this),
											},
										});
									}),
									(t.prototype.onConfirm = function (e) {
										this.getTextValue() !== e &&
											(this.frame.updateDimText(this.getTextType(), e),
											this.frame.draw(this.view),
											u.TopView.optimize(this.view.shapeManager.shapem),
											this.view.mometoManager.checkPoint(),
											this.view.refresh());
									}),
									(t.prototype.dragstart = function (t) {
										e.prototype.dragstart.call(this, t),
											(this.prevPt = this.curPt),
											(this.vshape = t.target);
									}),
									(t.prototype.dragmove = function (t) {
										e.prototype.dragmove.call(this, t);
										var n = this.curPt,
											r = a.default.vector(n.x - this.prevPt.x, n.y - this.prevPt.y);
										c.ShapeHelper.restoreShapeMatrix(t.target),
											(this.text.offset = this.text.offset.add(r)),
											(this.prevPt = n),
											this.frame.draw(this.view),
											this.view.refresh();
									}),
									t
								);
							})(h.Tool);
						t.EditThreedArcTextTool = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ProfileStructTool = void 0);
						var l = s(n(0)),
							h = n(6),
							c = n(11),
							u = n(2),
							p = n(5),
							f = n(1),
							d = (function (e) {
								function t(t) {
									var n = e.call(this, p.ToolType.profileStruct, t) || this;
									return (
										(n.cutline = l.default.line()),
										(n.isVertical = !1),
										(n.leftVec = l.default.vector()),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'clickShape', {
										get: function () {
											return new f.WinPolygon([
												l.default.segment(
													this.curPt,
													l.default.point(this.curPt.x + 1, this.curPt.y),
												),
											]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.makeAux = function (e) {
										void 0 === e && (e = !1);
										var t = l.default.vector(this.firstPt, this.curPt);
										if (!l.default.Utils.EQ_0(t.length)) {
											var n =
												Math.abs(t.y) > Math.abs(t.x)
													? l.default.segment(
															this.firstPt,
															l.default.point(this.firstPt.x, this.curPt.y),
													  )
													: l.default.segment(
															this.firstPt,
															l.default.point(this.curPt.x, this.firstPt.y),
													  );
											this.aux = new f.WinPolygon([n]);
										}
									}),
									(t.prototype.finishDrag = function (e) {
										var t = this,
											n = e.edges[0];
										if (n instanceof l.default.Segment) {
											(this.isVertical = u.Utils.isSegVertical(n)),
												(this.leftVec = this.isVertical
													? l.default.vector(0, -1)
													: l.default.vector(-1, 0)),
												(this.cutline = l.default.line(n.start, n.end));
											var r = this.view.shapeManager.shapem.filter(function (e) {
													return e.polygon.contains(n) || e.polygon.intersect(n).length > 0;
												}),
												i = [];
											r.forEach(function (e) {
												var n = e.polygon.edges,
													r = e.frameManager.bars;
												i.push.apply(i, a(t.frameItemCheck(n, r, c.ccTypeEnum.frame)));
												var o = e.mulManager.bars;
												i.push.apply(i, a(t.mullionItemCheck(o, c.ccTypeEnum.mullion))),
													i.push.apply(i, a(t.areaItemCheck(e)));
											}),
												this.sortItems(i),
												this.view.eventBus.emit({
													type: h.EventType.profile_struct,
													payload: i,
												});
										}
									}),
									(t.prototype.areaItemCheck = function (e) {
										var t = this,
											n = a(e.sashManager.sashes, e.sashManager.thefts),
											r = a(e.sashManager.doubleSashes, e.sashManager.folds, e.sashManager.slides),
											i = [];
										return (
											e.mulManager.splitter.avaiablePoly.forEach(function (o) {
												if (!(o.intersect(t.cutline).length < 2)) {
													var s = [];
													e.mulManager.glasses
														.filter(function (e) {
															return e.polygon.polyId.equalTo(o.polyId);
														})
														.forEach(function (e) {
															return s.push.apply(s, a(t.fillerItemCheck(e, !1)));
														});
													var l = [];
													n.filter(function (e) {
														return e.polyId.equalTo(o.polyId);
													}).forEach(function (e) {
														return l.push(t.sashItemCheck(e));
													});
													var h = [];
													r
														.filter(function (e) {
															return e.polyId.equalTo(o.polyId);
														})
														.forEach(function (e) {
															var n = e.polygon.box.center,
																r = e.sashes.map(function (e) {
																	return t.sashItemCheck(e);
																});
															t.sortItems(r),
																h.push({
																	position: n,
																	type: e.type,
																	items: r,
																});
														}),
														i.push({
															position: o.polygon.box.center,
															type: 'area',
															items: a(s, l, h),
														});
												}
											}),
											i
										);
									}),
									(t.prototype.fillerItemCheck = function (e, t) {
										var n = [],
											r = e.polygon.intersect(this.cutline);
										if (r.length >= 2) {
											var i = l.default.segment(r[0], r[1]).middle();
											n.push({
												position: i,
												type:
													e.type === f.ShapeType.Glass
														? t
															? c.ccTypeEnum.sashGlass
															: c.ccTypeEnum.glass
														: t
														? c.ccTypeEnum.screenNet
														: c.ccTypeEnum.net,
											}),
												e.bead &&
													n.push.apply(
														n,
														a(
															this.frameItemCheck(
																e.bead.polygon.edges,
																e.bead.frameManager.bars,
																t ? c.ccTypeEnum.sashBead : c.ccTypeEnum.fixedBead,
															),
														),
													);
										}
										return this.sortItems(n), n;
									}),
									(t.prototype.sashItemCheck = function (e) {
										var t = this,
											n = [];
										if (
											(n.push.apply(
												n,
												a(
													this.frameItemCheck(
														e.polygon.edges,
														e.frameManager.bars,
														c.ccTypeEnum.Sash,
													),
												),
											),
											e instanceof f.Sash)
										) {
											n.push.apply(
												n,
												a(this.mullionItemCheck(e.mulManager.bars, c.ccTypeEnum.sashMullion)),
											);
											var r = [];
											e.mulManager.glasses.forEach(function (e) {
												var i = e.polygon.intersect(t.cutline);
												if (!(i.length < 2)) {
													var o = l.default.segment(i[0], i[1]).middle();
													r.push({
														position: o,
														type: 'areaInSash',
														items: t.fillerItemCheck(e, !0),
													}),
														n.push.apply(n, a(r));
												}
											});
										}
										return (
											this.sortItems(n),
											{
												position: e.polygon.box.center,
												type: e.type,
												items: n,
											}
										);
									}),
									(t.prototype.frameItemCheck = function (e, t, n) {
										var r = this,
											i = [];
										return (
											e.forEach(function (e, o) {
												var a = t[o],
													s = e.intersect(r.cutline).pop();
												if (s) {
													var h = a.polygon.box.center.leftTo(l.default.line(s, r.leftVec));
													i.push({
														position: s,
														type: n,
														align: h ? f.AlignTypeEnum.right : f.AlignTypeEnum.left,
													});
												}
											}),
											i
										);
									}),
									(t.prototype.mullionItemCheck = function (e, t) {
										var n = this,
											r = [];
										return (
											e.forEach(function (e) {
												var i = e.polygon.mulShape;
												if (i instanceof l.default.Segment) {
													var o = i.intersect(n.cutline).pop();
													o &&
														r.push({
															position: o,
															type: t,
															align: f.AlignTypeEnum.center,
														});
												}
											}),
											r
										);
									}),
									(t.prototype.sortItems = function (e) {
										var t = this;
										e.sort(function (e, n) {
											return t.isVertical
												? e.position.y - n.position.y
												: e.position.x - n.position.x;
										});
									}),
									t
								);
							})(p.DragDrawTool);
						t.ProfileStructTool = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.InnerSashTool = void 0);
						var o = n(2),
							a = n(5),
							s = n(6),
							l = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, a.ToolType.innerSash, t) || this;
									return (i.handleType = n), (i.hingeType = r), i;
								}
								return (
									i(t, e),
									(t.prototype.addFenes = function (e) {
										this.view.shapeManager.addInnerSash(e);
									}),
									(t.prototype.finishDrag = function (e) {
										var t = this,
											n = !1;
										this.view.shapeManager.shapem.forEach(function (r) {
											r.sashManager.allSashes.forEach(function (r) {
												r.avaiablePoly.forEach(function (r) {
													(r.polygon.intersect(e.polygon).length > 0 ||
														r.polygon.contains(e.polygon)) &&
														(t.addFenes(o.Utils.centroidOfPolygon(r)), (n = !0));
												});
											});
										}),
											this.view.eventBus.emit({
												type: s.EventType.drag_in_process,
												payload: {
													moving: !0,
												},
											}),
											n || this.view.toolManager.releaseTool();
									}),
									t
								);
							})(n(50).FenesTool);
						t.InnerSashTool = l;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SlideItem = t.SlideOption = t.SlideOptions = void 0);
						var r = n(81),
							i = n(1),
							o = n(13),
							a = n(9),
							s = (function () {
								function e() {
									(this.options = []),
										this.options.push(this.option0()),
										this.options.push(this.option1()),
										this.options.push(this.option2()),
										this.options.push(this.option3()),
										this.options.push(this.option4()),
										this.options.push(this.option5()),
										this.options.push(this.option6()),
										this.options.push(this.option7()),
										this.options.push(this.option8()),
										this.options.push(this.option9()),
										this.options.push(this.option10()),
										this.options.push(this.option11()),
										this.options.push(this.option12()),
										this.options.push(this.option13()),
										this.options.push(this.option14()),
										this.options.push(this.option15()),
										this.options.push(this.option16()),
										this.options.push(this.option17()),
										this.options.push(this.option18()),
										this.options.push(this.option19()),
										this.options.push(this.option20()),
										this.options.push(this.option21()),
										this.options.push(this.option22()),
										this.options.push(this.option23()),
										this.options.push(this.option24()),
										this.options.push(this.option25()),
										this.options.push(this.option26()),
										this.options.push(this.option27()),
										this.options.push(this.option28()),
										this.options.push(this.option29()),
										this.options.push(this.option30()),
										this.options.push(this.option31()),
										this.options.push(this.option32()),
										this.options.push(this.option33()),
										this.options.push(this.option34()),
										this.options.push(this.option35()),
										this.options.push(this.option36()),
										this.options.push(this.option37()),
										this.options.push(this.option38()),
										this.options.push(this.option39()),
										this.options.push(this.option40()),
										this.options.push(this.option41()),
										this.options.push(this.option42()),
										this.options.push(this.option43()),
										this.options.push(this.option44()),
										this.options.push(this.option45()),
										this.options.push(this.option46()),
										this.options.push(this.option47()),
										this.options.push(this.option48()),
										this.options.push(this.option49()),
										this.options.push(this.option50()),
										this.options.push(this.option51()),
										this.options.push(this.option52()),
										this.options.push(this.option53()),
										this.options.push(this.option54()),
										this.options.push(this.option55()),
										this.options.push(this.option56()),
										this.options.push(this.option57()),
										this.options.push(this.option58()),
										this.options.push(this.option59()),
										this.options.push(this.option60()),
										this.options.push(this.option61()),
										this.options.push(this.option62()),
										this.options.push(this.option63()),
										this.options.push(this.option64()),
										this.options.push(this.option65()),
										this.options.push(this.option66()),
										this.options.push(this.option67()),
										this.options.push(this.option68()),
										this.options.push(this.option69()),
										this.options.push(this.option70()),
										this.options.push(this.option71()),
										this.options.push(this.option72()),
										this.options.push(this.option73()),
										this.options.push(this.option74()),
										this.options.push(this.option75()),
										this.options.push(this.option76()),
										this.options.push(this.option77()),
										this.options.push(this.option78()),
										this.options.push(this.option79()),
										this.options.push(this.option80()),
										this.options.push(this.option81()),
										this.options.push(this.option82()),
										this.options.push(this.option83()),
										this.options.push(this.option84()),
										this.options.push(this.option85()),
										this.options.push(this.option86()),
										this.options.push(this.option87()),
										this.options.push(this.option88()),
										this.options.push(this.option89()),
										this.options.push(this.option90()),
										this.options.push(this.option91()),
										this.options.push(this.option92()),
										this.options.push(this.option93()),
										this.options.push(this.option94()),
										this.options.push(this.option95()),
										this.options.push(this.option96()),
										this.options.push(this.option97()),
										this.options.push(this.option98()),
										this.options.push(this.option99()),
										this.options.push(this.option100()),
										this.options.push(this.option101()),
										this.options.push(this.option102()),
										this.options.push(this.option103()),
										this.options.push(this.option104()),
										this.options.push(this.option105()),
										this.options.push(this.option106()),
										this.options.push(this.option107()),
										this.options.push(this.option108()),
										this.options.push(this.option109()),
										this.options.push(this.option110()),
										this.options.push(this.option111()),
										this.options.push(this.option112()),
										this.options.push(this.option113()),
										this.options.push(this.option114()),
										this.options.push(this.option115()),
										this.options.push(this.option116()),
										this.options.push(this.option117()),
										this.options.push(this.option118()),
										this.options.push(this.option119()),
										this.options.push(this.option120()),
										this.options.push(this.option121()),
										this.options.push(this.option122()),
										this.options.push(this.option123()),
										this.options.push(this.option124()),
										this.options.push(this.option125()),
										this.options.push(this.option126()),
										this.options.push(this.option127()),
										this.options.push(this.option128()),
										this.options.push(this.option129()),
										this.options.push(this.option130()),
										this.options.push(this.option131()),
										this.options.push(this.option132()),
										this.options.push(this.option133()),
										this.options.push(this.option134()),
										this.options.push(this.option135()),
										this.options.push(this.option136()),
										this.options.push(this.option137()),
										this.options.push(this.option138()),
										this.options.push(this.option139()),
										this.options.push(this.option140()),
										this.options.push(this.option141()),
										this.options.push(this.option142()),
										this.options.push(this.option143()),
										this.options.push(this.option144()),
										this.options.push(this.option145()),
										this.options.push(this.option146()),
										this.options.push(this.option147()),
										this.options.push(this.option148()),
										this.options.push(this.option149()),
										this.options.push(this.option150()),
										this.options.push(this.option151()),
										this.options.push(this.option152()),
										this.options.push(this.option153()),
										this.options.push(this.option154()),
										this.options.push(this.option155()),
										this.options.push(this.option156()),
										this.options.push(this.option157()),
										this.options.push(this.option158()),
										this.options.push(this.option159()),
										this.options.push(this.option160()),
										this.options.push(this.option161()),
										this.options.push(this.option162()),
										this.options.push(this.option163()),
										this.options.push(this.option164()),
										this.options.push(this.option165()),
										this.options.push(this.option166()),
										this.options.push(this.option167()),
										this.options.push(this.option168()),
										this.options.push(this.option169()),
										this.options.push(this.option170()),
										this.options.push(this.option171()),
										this.options.forEach(function (e) {
											e.initDefaultLock(), e.initCrescentLock();
										});
								}
								return (
									Object.defineProperty(e, 'Ins', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.option0 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 2)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option1 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option2 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 4)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option3 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option4 = function () {
										var e = new l();
										return (
											(e.isVerticalSlide = !0),
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.fixedSash()),
											(e.items[0][2] = h.fixedSash()),
											(e.items[1][1] = h.sash(o.OpenDirection.Down)),
											e
										);
									}),
									(e.prototype.option5 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][1] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option6 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option7 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 2)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option8 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option9 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 4)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[0][3] = h.screen(o.OpenDirection.Left)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left)),
											(e.items[1][2] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option10 = function () {
										var e = new l();
										return (
											(e.isVerticalSlide = !0),
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.fixedScreen()),
											(e.items[0][2] = h.fixedScreen()),
											(e.items[1][1] = h.screen(o.OpenDirection.Down)),
											e
										);
									}),
									(e.prototype.option11 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 2)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][1] = h.hidden()),
											e
										);
									}),
									(e.prototype.option12 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 2)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option13 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 4)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[0][3] = h.hidden()),
											e
										);
									}),
									(e.prototype.option14 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 4)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][1] = h.hidden()),
											(e.items[0][2] = h.hidden()),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option15 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 2)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option16 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option17 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option18 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 4)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option19 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[0][2] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option20 = function () {
										var e = new l();
										e.items = this.initHolders(2, 3);
										var t = h.sash(o.OpenDirection.Right);
										return (
											(e.items[1][1] = t),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option21 = function () {
										var e = new l();
										e.items = this.initHolders(2, 3);
										var t = h.sash(o.OpenDirection.Right);
										return (
											(e.items[0][1] = t),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option22 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option23 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 4)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[3][3] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option24 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option25 = function () {
										var e = new l();
										(e.items = this.initHolders(3, 3)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0));
										var t = h.sash(o.OpenDirection.Left);
										return (
											(e.items[1][1] = t),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option26 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 2)),
											(e.items[0][0] = h.shade(o.OpenDirection.Right)),
											(e.items[1][1] = h.shade(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option27 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 4)),
											(e.items[0][0] = h.shade(o.OpenDirection.Right)),
											(e.items[0][3] = h.shade(o.OpenDirection.Left)),
											(e.items[1][1] = h.shade(o.OpenDirection.Left)),
											(e.items[1][2] = h.shade(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option28 = function () {
										var e = new l();
										return (
											(e.isVerticalSlide = !0),
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.fixedShade()),
											(e.items[0][2] = h.fixedShade()),
											(e.items[1][1] = h.shade(o.OpenDirection.Down)),
											e
										);
									}),
									(e.prototype.option29 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.shade(o.OpenDirection.Right)),
											(e.items[0][1] = h.shade(o.OpenDirection.Right)),
											(e.items[1][2] = h.shade(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option30 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 2)),
											(e.items[0][0] = h.shade(o.OpenDirection.Right)),
											(e.items[0][1] = h.hidden()),
											e
										);
									}),
									(e.prototype.option31 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 2)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.shade(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option32 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 4)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.shade(o.OpenDirection.Left)),
											(e.items[0][2] = h.shade(o.OpenDirection.Right)),
											(e.items[0][3] = h.hidden()),
											e
										);
									}),
									(e.prototype.option33 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 4)),
											(e.items[0][0] = h.shade(o.OpenDirection.Right)),
											(e.items[0][1] = h.hidden()),
											(e.items[0][2] = h.hidden()),
											(e.items[0][3] = h.shade(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option34 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 2)),
											(e.items[0][1] = h.shade(o.OpenDirection.Left)),
											(e.items[1][0] = h.shade(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option35 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 4)),
											(e.items[0][1] = h.shade(o.OpenDirection.Left)),
											(e.items[0][2] = h.shade(o.OpenDirection.Right)),
											(e.items[1][0] = h.shade(o.OpenDirection.Right)),
											(e.items[1][3] = h.shade(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option36 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[1][1] = h.shade(o.OpenDirection.Right)),
											(e.items[0][0] = h.shade(o.OpenDirection.Right)),
											(e.items[0][2] = h.shade(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option37 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][1] = h.shade(o.OpenDirection.Right)),
											(e.items[1][0] = h.shade(o.OpenDirection.Right)),
											(e.items[1][2] = h.shade(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option38 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][0] = h.shade(o.OpenDirection.Right)),
											(e.items[1][1] = h.shade(o.OpenDirection.Right)),
											(e.items[2][2] = h.shade(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option39 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 4)),
											(e.items[0][0] = h.shade(o.OpenDirection.Right)),
											(e.items[1][1] = h.shade(o.OpenDirection.Right)),
											(e.items[2][2] = h.shade(o.OpenDirection.Right)),
											(e.items[3][3] = h.shade(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option40 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 2)),
											(e.items[0][0] = h.shade(o.OpenDirection.Right)),
											(e.items[1][1] = h.shade(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option41 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 6)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.fixedSash()),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][3] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.fixedSash()),
											(e.items[0][5] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option42 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 6)),
											(e.items[0][2] = h.fixedSash()),
											(e.items[0][3] = h.fixedSash()),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][5] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option43 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option44 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 4)),
											(e.items[0][0] = h.fixedSash()),
											(e.items[0][3] = h.fixedSash()),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option45 = function () {
										var e = new l();
										(e.items = this.initHolders(3, 3)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0));
										var t = h.sash(o.OpenDirection.Left);
										return (
											(e.items[1][1] = t),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option46 = function () {
										var e = new l();
										(e.items = this.initHolders(3, 3)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0));
										var t = h.sash(o.OpenDirection.Right);
										return (
											(e.items[1][1] = t),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option47 = function () {
										var e = new l();
										(e.useCrescentLock = !0),
											(e.isVerticalSlide = !0),
											(e.items = this.initHolders(2, 2));
										var t = h.sash(o.OpenDirection.Down);
										t.lockHidden = !0;
										var n = h.fixedSash();
										return (n.lockHidden = !0), (e.items[0][0] = t), (e.items[1][1] = n), e;
									}),
									(e.prototype.option48 = function () {
										var e = new l();
										return (
											(e.useCrescentLock = !0),
											(e.isVerticalSlide = !0),
											(e.items = this.initHolders(2, 2)),
											(e.items[0][0] = h.fixedScreen()),
											(e.items[1][1] = h.screen(o.OpenDirection.Up)),
											e
										);
									}),
									(e.prototype.option49 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 3)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[3][1] = h.sash(o.OpenDirection.Right)),
											(e.items[4][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option50 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 6)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][3] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.sash(o.OpenDirection.Left)),
											(e.items[1][5] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][3] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option51 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 2)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[3][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option52 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 2)),
											(e.items[0][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											(e.items[3][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option53 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 2)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[3][1] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option54 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 2)),
											(e.items[0][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[3][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option55 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[3][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[4][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[5][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option56 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 3)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[3][2] = h.sash(o.OpenDirection.Left)),
											(e.items[4][1] = h.sash(o.OpenDirection.Right)),
											(e.items[5][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option57 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 3)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[3][1] = h.sash(o.OpenDirection.Left)),
											(e.items[4][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option58 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 4)),
											(e.items[0][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[0][2] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][3] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][0] = h.sash(o.OpenDirection.Left)),
											(e.items[2][3] = h.sash(o.OpenDirection.Right)),
											(e.items[3][1] = h.sash(o.OpenDirection.Left)),
											(e.items[3][2] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option59 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(8, 4)),
											(e.items[0][3] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[3][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[4][0] = h.sash(o.OpenDirection.Right)),
											(e.items[5][1] = h.sash(o.OpenDirection.Left)),
											(e.items[6][2] = h.sash(o.OpenDirection.Left)),
											(e.items[7][3] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option60 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 6)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left)),
											(e.items[0][3] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left)),
											(e.items[1][4] = h.screen(o.OpenDirection.Right)),
											(e.items[2][0] = h.screen(o.OpenDirection.Left)),
											(e.items[2][5] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option61 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 6)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[0][3] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][4] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][0] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][5] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[3][0] = h.sash(o.OpenDirection.Left)),
											(e.items[3][5] = h.sash(o.OpenDirection.Right)),
											(e.items[4][1] = h.sash(o.OpenDirection.Left)),
											(e.items[4][4] = h.sash(o.OpenDirection.Right)),
											(e.items[5][2] = h.sash(o.OpenDirection.Left)),
											(e.items[5][3] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option62 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 5)),
											(e.items[0][2] = h.fixedSash()),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][4] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option63 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 6)),
											(e.items[0][2] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[0][3] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][4] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][2] = h.sash(o.OpenDirection.Right)),
											(e.items[2][3] = h.sash(o.OpenDirection.Left)),
											(e.items[3][1] = h.sash(o.OpenDirection.Right)),
											(e.items[3][4] = h.sash(o.OpenDirection.Left)),
											(e.items[4][0] = h.sash(o.OpenDirection.Right)),
											(e.items[4][5] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option64 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 2)),
											(e.items[0][1] = h.screen(o.OpenDirection.Left)),
											(e.items[1][0] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option65 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 2)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											(e.items[3][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option66 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option67 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option68 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 3)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[3][0] = h.sash(o.OpenDirection.Right)),
											(e.items[4][1] = h.sash(o.OpenDirection.Left)),
											(e.items[5][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option69 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 4)),
											(e.items[0][1] = h.screen(o.OpenDirection.Right)),
											(e.items[0][2] = h.screen(o.OpenDirection.Right)),
											(e.items[1][0] = h.screen(o.OpenDirection.Left)),
											(e.items[1][3] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option70 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 4)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.sash(o.OpenDirection.Right)),
											(e.items[3][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option71 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 4)),
											(e.items[0][3] = h.screen(o.OpenDirection.Left)),
											(e.items[1][2] = h.screen(o.OpenDirection.Right)),
											(e.items[2][1] = h.screen(o.OpenDirection.Right)),
											(e.items[3][0] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option72 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 4)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left)),
											(e.items[3][3] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option73 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(8, 4)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[3][3] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[4][3] = h.sash(o.OpenDirection.Left)),
											(e.items[5][2] = h.sash(o.OpenDirection.Right)),
											(e.items[6][1] = h.sash(o.OpenDirection.Right)),
											(e.items[7][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option74 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 5)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[2][4] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option75 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 5)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][3] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option76 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 5)),
											(e.items[0][1] = h.screen(o.OpenDirection.Left)),
											(e.items[0][2] = h.screen(o.OpenDirection.Right)),
											(e.items[1][0] = h.screen(o.OpenDirection.Right)),
											(e.items[1][3] = h.screen(o.OpenDirection.Left)),
											(e.items[2][4] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option77 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 5)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left)),
											(e.items[0][3] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right)),
											(e.items[1][4] = h.screen(o.OpenDirection.Left)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option78 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 5)),
											(e.items[0][0] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[3][3] = h.sash(o.OpenDirection.Left)),
											(e.items[4][4] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option79 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 5)),
											(e.items[0][4] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.sash(o.OpenDirection.Right)),
											(e.items[3][1] = h.sash(o.OpenDirection.Right)),
											(e.items[4][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option80 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 5)),
											(e.items[0][0] = h.screen(o.OpenDirection.Left)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left)),
											(e.items[3][3] = h.screen(o.OpenDirection.Left)),
											(e.items[4][4] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option81 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 5)),
											(e.items[0][4] = h.screen(o.OpenDirection.Right)),
											(e.items[1][3] = h.screen(o.OpenDirection.Right)),
											(e.items[2][2] = h.screen(o.OpenDirection.Right)),
											(e.items[3][1] = h.screen(o.OpenDirection.Right)),
											(e.items[4][0] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option82 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 6)),
											(e.items[0][0] = h.screen(o.OpenDirection.Left)),
											(e.items[0][5] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left)),
											(e.items[1][4] = h.screen(o.OpenDirection.Right)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left)),
											(e.items[2][3] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option83 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 6)),
											(e.items[0][0] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[3][3] = h.sash(o.OpenDirection.Left)),
											(e.items[4][4] = h.sash(o.OpenDirection.Left)),
											(e.items[5][5] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option84 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 6)),
											(e.items[0][5] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[2][3] = h.sash(o.OpenDirection.Right)),
											(e.items[3][2] = h.sash(o.OpenDirection.Right)),
											(e.items[4][1] = h.sash(o.OpenDirection.Right)),
											(e.items[5][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option85 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 6)),
											(e.items[0][0] = h.screen(o.OpenDirection.Left)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left)),
											(e.items[3][3] = h.screen(o.OpenDirection.Left)),
											(e.items[4][4] = h.screen(o.OpenDirection.Left)),
											(e.items[5][5] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option86 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 6)),
											(e.items[0][5] = h.screen(o.OpenDirection.Right)),
											(e.items[1][4] = h.screen(o.OpenDirection.Right)),
											(e.items[2][3] = h.screen(o.OpenDirection.Right)),
											(e.items[3][2] = h.screen(o.OpenDirection.Right)),
											(e.items[4][1] = h.screen(o.OpenDirection.Right)),
											(e.items[5][0] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option87 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 6)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[0][3] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][4] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][0] = h.sash(o.OpenDirection.Left)),
											(e.items[2][5] = h.sash(o.OpenDirection.Right)),
											(e.items[3][1] = h.sash(o.OpenDirection.Left)),
											(e.items[3][4] = h.sash(o.OpenDirection.Right)),
											(e.items[4][2] = h.sash(o.OpenDirection.Left)),
											(e.items[4][3] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option88 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][1] = h.sash(o.OpenDirection.Right)),
											(e.items[0][2] = h.hidden()),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option89 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option90 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][3] = h.hidden()),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option91 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][3] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option92 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 5)),
											(e.items[0][4] = h.hidden()),
											(e.items[0][3] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.sash(o.OpenDirection.Right)),
											(e.items[3][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option93 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 5)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[3][3] = h.sash(o.OpenDirection.Left)),
											(e.items[4][4] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option94 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 6)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.sash(o.OpenDirection.Right)),
											(e.items[3][3] = h.sash(o.OpenDirection.Left)),
											(e.items[4][4] = h.sash(o.OpenDirection.Left)),
											(e.items[5][5] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option95 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 6)),
											(e.items[0][5] = h.hidden()),
											(e.items[0][4] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.sash(o.OpenDirection.Right)),
											(e.items[3][1] = h.sash(o.OpenDirection.Right)),
											(e.items[4][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option96 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 2)),
											(e.items[0][0] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][0] = h.sash(o.OpenDirection.Left)),
											(e.items[3][1] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option97 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option98 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 2)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[3][1] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option99 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 4)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][3] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[3][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[3][2] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option100 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[3][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[4][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[5][2] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option101 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 3)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[3][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[4][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[5][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option102 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 3)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[3][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[4][2] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option103 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[3][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[4][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option104 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 5)),
											(e.items[0][4] = h.sash(o.OpenDirection.Left)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[3][0] = h.hidden()),
											(e.items[3][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option105 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 2)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[3][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option106 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 6)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[0][3] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[0][5] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][3] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option107 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 6)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][3] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][5] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][3] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option108 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 5)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[0][3] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option109 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 6)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[0][4] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][5] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option110 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[0][3] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][3] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option111 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 2)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[0][1] = h.hidden()),
											e
										);
									}),
									(e.prototype.option112 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 2)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option113 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(1, 4)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.screen(o.OpenDirection.Left)),
											(e.items[0][2] = h.screen(o.OpenDirection.Right)),
											(e.items[0][3] = h.hidden()),
											e
										);
									}),
									(e.prototype.option114 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right)),
											(e.items[1][2] = h.hidden()),
											e
										);
									}),
									(e.prototype.option115 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left)),
											(e.items[1][0] = h.hidden()),
											e
										);
									}),
									(e.prototype.option116 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right)),
											(e.items[2][2] = h.screen(o.OpenDirection.Right)),
											(e.items[2][3] = h.hidden()),
											e
										);
									}),
									(e.prototype.option117 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][3] = h.screen(o.OpenDirection.Left)),
											(e.items[1][2] = h.screen(o.OpenDirection.Left)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left)),
											(e.items[2][0] = h.hidden()),
											e
										);
									}),
									(e.prototype.option118 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][3] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option119 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 8)),
											(e.items[0][0] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][5] = h.sash(o.OpenDirection.Right)),
											(e.items[0][7] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[1][6] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option120 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 8)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[0][4] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][5] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][6] = h.sash(o.OpenDirection.Right)),
											(e.items[3][0] = h.sash(o.OpenDirection.Left)),
											(e.items[3][7] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option121 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 8)),
											(e.items[0][0] = h.sash(o.OpenDirection.Left)),
											(e.items[0][7] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][6] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][5] = h.sash(o.OpenDirection.Right)),
											(e.items[3][3] = h.sash(o.OpenDirection.Left)),
											(e.items[3][4] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option122 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 8)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][5] = h.sash(o.OpenDirection.Right)),
											(e.items[0][6] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Left)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[1][7] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][5] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][6] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option123 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 8)),
											(e.items[0][0] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][5] = h.sash(o.OpenDirection.Right)),
											(e.items[0][7] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[1][6] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][5] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][6] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option124 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 6)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][5] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Left)),
											(e.items[1][3] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][5] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option125 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 8)),
											(e.items[0][0] = h.sash(o.OpenDirection.Left)),
											(e.items[0][7] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[1][5] = h.sash(o.OpenDirection.Right)),
											(e.items[1][6] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option126 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option127 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option128 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option129 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option130 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option131 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option132 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 2)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option133 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option134 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option135 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option136 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option137 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.hidden()),
											e
										);
									}),
									(e.prototype.option138 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][1] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option139 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 6)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[1][5] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option140 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 6)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[0][4] = h.sash(o.OpenDirection.Left)),
											(e.items[0][5] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option141 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.hidden()),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option142 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 6)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][4] = h.sash(o.OpenDirection.Right)),
											(e.items[0][5] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option143 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][1] = h.screen(o.OpenDirection.Right)),
											(e.items[0][2] = h.hidden()),
											(e.items[1][0] = h.screen(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option144 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 3)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.screen(o.OpenDirection.Left)),
											(e.items[1][2] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option145 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 5)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][3] = h.sash(o.OpenDirection.Left)),
											(e.items[3][4] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option146 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 4)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[3][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[3][3] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option147 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(4, 5)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[0][4] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][3] = h.sash(o.OpenDirection.Left)),
											(e.items[3][2] = h.fixedSash()),
											e
										);
									}),
									(e.prototype.option148 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 3)),
											(e.items[0][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[3][0] = h.sash(o.OpenDirection.Right)),
											(e.items[4][1] = h.sash(o.OpenDirection.Right)),
											(e.items[5][2] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option149 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(6, 3)),
											(e.items[0][2] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][1] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][0] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[3][2] = h.sash(o.OpenDirection.Right)),
											(e.items[4][1] = h.sash(o.OpenDirection.Right)),
											(e.items[5][0] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option150 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 6)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[0][5] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option151 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option152 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option153 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 8)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[0][4] = h.sash(o.OpenDirection.Right)),
											(e.items[0][5] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][6] = h.sash(o.OpenDirection.Right)),
											(e.items[1][7] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option154 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 6)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][3] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.hidden()),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.sash(o.OpenDirection.Left)),
											(e.items[1][5] = h.hidden()),
											e
										);
									}),
									(e.prototype.option155 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 6)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][3] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[1][4] = h.sash(o.OpenDirection.Left)),
											(e.items[1][5] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option156 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(5, 6)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][3] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.sash(o.OpenDirection.Left)),
											(e.items[2][5] = h.sash(o.OpenDirection.Right)),
											(e.items[3][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[3][4] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[4][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[4][3] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option157 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 4)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[0][3] = h.hidden()),
											(e.items[1][0] = h.hidden()),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option158 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option159 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 6)),
											(e.items[0][0] = h.hidden()),
											(e.items[0][1] = h.sash(o.OpenDirection.Right)),
											(e.items[0][4] = h.sash(o.OpenDirection.Left)),
											(e.items[0][5] = h.hidden()),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][3] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option160 = function () {
										var e = new l();
										e.items = this.initHolders(2, 3);
										var t = h.screen(o.OpenDirection.Right);
										return (
											(t.lockHidden = !0),
											(e.items[1][1] = t),
											(e.items[0][0] = h.screen(o.OpenDirection.Right)),
											(e.items[0][2] = h.screen(o.OpenDirection.Left)),
											e
										);
									}),
									(e.prototype.option161 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											(e.items[2][1] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option162 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 5)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][4] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][4] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option163 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 5)),
											(e.items[0][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[0][2] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][2] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option164 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 5)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[0][2] = h.sash(o.OpenDirection.Right)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Right, !0)),
											e
										);
									}),
									(e.prototype.option165 = function () {
										var e = new l();
										(e.useCrescentLock = !0),
											(e.isVerticalSlide = !0),
											(e.items = this.initHolders(3, 2));
										var t = h.screen(o.OpenDirection.Up, !0);
										t.lockHidden = !0;
										var n = h.sash(o.OpenDirection.Down);
										n.lockHidden = !0;
										var r = h.sash(o.OpenDirection.Up);
										return (
											(r.lockHidden = !0),
											(e.items[0][1] = t),
											(e.items[1][0] = n),
											(e.items[2][1] = r),
											e
										);
									}),
									(e.prototype.option166 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 3)),
											(e.items[0][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.screen(o.OpenDirection.Right, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option167 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(2, 6)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[0][1] = h.sash(o.OpenDirection.Right)),
											(e.items[0][4] = h.sash(o.OpenDirection.Left)),
											(e.items[0][5] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][3] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option168 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.sash(o.OpenDirection.Left)),
											(e.items[2][0] = h.hidden()),
											e
										);
									}),
									(e.prototype.option169 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 5)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Left)),
											(e.items[1][2] = h.sash(o.OpenDirection.Left)),
											(e.items[1][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][4] = h.sash(o.OpenDirection.Left)),
											(e.items[2][1] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][2] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][3] = h.screen(o.OpenDirection.Left, !0)),
											(e.items[2][4] = h.screen(o.OpenDirection.Left, !0)),
											e
										);
									}),
									(e.prototype.option170 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][2] = h.sash(o.OpenDirection.Left)),
											(e.items[0][3] = h.sash(o.OpenDirection.Left)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][0] = h.sash(o.OpenDirection.Right)),
											e
										);
									}),
									(e.prototype.option171 = function () {
										var e = new l();
										return (
											(e.items = this.initHolders(3, 4)),
											(e.items[0][0] = h.sash(o.OpenDirection.Right)),
											(e.items[1][1] = h.sash(o.OpenDirection.Right)),
											(e.items[2][2] = h.sash(o.OpenDirection.Right)),
											(e.items[2][3] = h.hidden()),
											e
										);
									}),
									(e.prototype.initHolders = function (e, t) {
										for (var n = [], r = 0; r < e; r++) n[r] = new Array(t).fill(void 0);
										return n;
									}),
									e
								);
							})();
						t.SlideOptions = s;
						var l = (function () {
							function e() {
								(this.items = []),
									(this.isVerticalSlide = !1),
									(this.fixedSashes = []),
									(this.useCrescentLock = !1);
							}
							return (
								Object.defineProperty(e.prototype, 'columnsCount', {
									get: function () {
										return this.items[0].length;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'tracksCount', {
									get: function () {
										return this.items.length;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'screenOnly', {
									get: function () {
										return !this.items
											.flat()
											.flat()
											.some(function (e) {
												return e && e.fill === i.ShapeType.Glass;
											});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'sashCount', {
									get: function () {
										return this.items
											.flat()
											.flat()
											.filter(function (e) {
												return e && e.fill === i.ShapeType.Glass && !e.hidden;
											}).length;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'serial', {
									get: function () {
										var e = this,
											t = this.items
												.map(function (t) {
													var n = '';
													return (
														t.forEach(function (t, r) {
															t &&
																((t.hidden && 1 === e.tracksCount) ||
																	(n += e.sashCode(t) + r.toString()));
														}),
														n
													);
												})
												.join('-');
										return this.isVerticalSlide ? t + '|V' : t;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'serialInCC', {
									get: function () {
										for (var e = '', t = 0, n = [], r = 0; r < this.columnsCount; r++)
											for (var i = 0; i < this.tracksCount; i++) {
												var o = this.items[i][r];
												o &&
													(o.hidden ||
														o.isSecondary ||
														((e += t.toString() + i + '_'),
														n.push({
															trackIndex: i,
															columnIndex: r,
															mainIndex: t,
														}),
														t++));
											}
										var a = function (r) {
												for (
													var i = s.items.map(function (e) {
															return e[r];
														}),
														o = function (o) {
															var a = s.items[o][r];
															if (!a) return 'continue';
															if (a.hidden) return 'continue';
															if (!a.isSecondary) return 'continue';
															var l = 0;
															i.forEach(function (e, t) {
																e &&
																	(e.hidden ||
																		(e !== a &&
																			(l = n.find(function (e) {
																				return e.trackIndex === t && e.columnIndex === r;
																			}).mainIndex)));
															}),
																(e += t.toString() + o.toString() + l.toString() + '_'),
																t++;
														},
														a = 0;
													a < s.tracksCount;
													a++
												)
													o(a);
											},
											s = this;
										for (r = 0; r < this.columnsCount; r++) a(r);
										return e.replace(/_$/, '');
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.initDefaultLock = function () {
									var e = this;
									this.items
										.slice()
										.reverse()
										.forEach(function (t) {
											t.forEach(function (n, i) {
												if (n) {
													var o = e.isVerticalSlide ? r.Direction.Up : r.Direction.Right,
														a = e.isVerticalSlide ? r.Direction.Down : r.Direction.Left;
													0 === i && n.defaultLocks.push(a),
														i === e.columnsCount - 1 && n.defaultLocks.push(o);
													var s = t[i - 1],
														l = t[i + 1];
													s && !s.hidden && n.defaultLocks.push(a),
														l && !l.hidden && n.defaultLocks.push(o);
												}
											});
										});
								}),
								(e.prototype.initCrescentLock = function () {
									var e = this,
										t = this.items.slice().reverse();
									t.forEach(function (n, i) {
										n.forEach(function (n, o) {
											if (n && !n.isSecondary && t[i + 1]) {
												var a = t[i + 1][o + 1],
													s = t[i + 1][o - 1];
												a &&
													!a.isSecondary &&
													n.crescentLocks.push(
														e.isVerticalSlide ? r.Direction.Up : r.Direction.Right,
													),
													s &&
														!s.isSecondary &&
														n.crescentLocks.push(
															e.isVerticalSlide ? r.Direction.Down : r.Direction.Left,
														);
											}
										});
									});
								}),
								Object.defineProperty(e.prototype, 'barOverlaysCount', {
									get: function () {
										return this.items
											.flat()
											.filter(function (e) {
												return !!e && e.crescentLocks.length > 0;
											})
											.map(function (e) {
												return e.crescentLocks;
											})
											.flat().length;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'sashGapsCount', {
									get: function () {
										var e = [];
										return (
											this.items.forEach(function (t) {
												t.forEach(function (n, r) {
													if (n && !n.hidden && !(r >= t.length - 1)) {
														var i = t[r + 1];
														i && !i.hidden && (e[r] = !0);
													}
												});
											}),
											e.filter(function (e) {
												return e;
											}).length
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.toSlideComp = function () {
									for (var e = this, t = [], n = 0; n < this.tracksCount; n++)
										t[n] = new Array(this.columnsCount).fill(void 0);
									return (
										this.items.forEach(function (e) {
											e.forEach(function (e) {
												e && !e.hidden && (e.width = void 0);
											});
										}),
										this.fixedSashes.forEach(function (t) {
											var n = e.items[t.trackIndex][t.columnIndex];
											n && (n.width = t.fixedWidth);
										}),
										this.items.forEach(function (e, n) {
											e.forEach(function (e, r) {
												t[n][r] = e
													? {
															widthType: e.width ? a.PartitionWidth.Figure : a.PartitionWidth.Ratio,
															widthValue: e.width ? e.width : 1,
															isSecondary: e.isSecondary,
													  }
													: void 0;
											});
										}),
										{
											sashes: t,
										}
									);
								}),
								(e.prototype.sashCode = function (e) {
									return e.hidden
										? 'H'
										: e.fill === i.ShapeType.Screen
										? 'S'
										: e.fill === i.ShapeType.Shade
										? 'D'
										: 'A';
								}),
								e
							);
						})();
						t.SlideOption = l;
						var h = (function () {
							function e(e, t, n, r, a, s, l, h, c) {
								void 0 === e && (e = i.ShapeType.Glass),
									void 0 === t && (t = !1),
									void 0 === n && (n = o.OpenDirection.Right),
									void 0 === r && (r = !1),
									void 0 === s && (s = !1),
									void 0 === l && (l = !1),
									void 0 === h && (h = []),
									void 0 === c && (c = []),
									(this.fill = e),
									(this.isFixed = t),
									(this.openDirection = n),
									(this.isSecondary = r),
									(this.width = a),
									(this.hidden = s),
									(this.lockHidden = l),
									(this.defaultLocks = h),
									(this.crescentLocks = c);
							}
							return (
								(e.sash = function (t, n) {
									return void 0 === n && (n = !1), new e(i.ShapeType.Glass, !1, t, n);
								}),
								(e.screen = function (t, n) {
									return void 0 === n && (n = !1), new e(i.ShapeType.Screen, !1, t, n);
								}),
								(e.shade = function (t, n) {
									return (
										void 0 === n && (n = !1), new e(i.ShapeType.Shade, !1, t, n, void 0, !1, !0)
									);
								}),
								(e.fixedSash = function (t) {
									return (
										void 0 === t && (t = !1),
										new e(i.ShapeType.Glass, !0, o.OpenDirection.Custom, t)
									);
								}),
								(e.fixedScreen = function (t) {
									return (
										void 0 === t && (t = !1),
										new e(i.ShapeType.Screen, !0, o.OpenDirection.Custom, t)
									);
								}),
								(e.fixedShade = function (t) {
									return (
										void 0 === t && (t = !1),
										new e(i.ShapeType.Shade, !0, o.OpenDirection.Custom, t)
									);
								}),
								(e.hidden = function () {
									return new e(i.ShapeType.Glass, !0, o.OpenDirection.Custom, !1, void 0, !0);
								}),
								Object.defineProperty(e.prototype, 'lockDirection', {
									get: function () {
										return this._lockDirection ? this._lockDirection : this.defaultLockDirection();
									},
									set: function (e) {
										this._lockDirection = e;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.defaultLockDirection = function () {
									return this.openDirection === o.OpenDirection.Up ||
										this.openDirection === o.OpenDirection.Down
										? this.openDirection === o.OpenDirection.Down
											? r.Direction.Up
											: r.Direction.Down
										: this.openDirection === o.OpenDirection.Left
										? r.Direction.Right
										: r.Direction.Left;
								}),
								e
							);
						})();
						t.SlideItem = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrameUtil = void 0);
						var s = a(n(0)),
							l = n(2),
							h = n(1),
							c = (function () {
								function e(e) {
									(this.view = e),
										(this.intersectFrames = new Set()),
										(this.frameEdgeConnectedComponents = new Set());
								}
								return (
									(e.prototype.getIntersectFrames = function (e, t) {
										return this.intersectFrames.clear(), this.getIntersectFramesHelper(e, t);
									}),
									(e.prototype.getOneCoincidedCornerJoiner = function (e) {
										var t,
											n,
											i = this.view.shapeManager.cornerJoiners;
										try {
											for (var o = r(i.values()), a = o.next(); !a.done; a = o.next()) {
												var s = a.value,
													l = this.getIntersectFrames(s.cornerEdge, void 0);
												if (
													l.length > 0 &&
													l.find(function (t) {
														return t.id === e.id;
													})
												)
													return s;
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (n = o.return) && n.call(o);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									(e.prototype.getOneCoincidedCornerJoinerAll = function (e) {
										var t,
											n,
											i = this.view.shapeManager.cornerJoiners;
										try {
											for (var o = r(i.values()), a = o.next(); !a.done; a = o.next()) {
												var s = a.value,
													l = s.outerEdges,
													h = this.getIntersectFrames(l[0], void 0);
												if (
													h.length > 0 &&
													h.find(function (t) {
														return t.id === e.id;
													})
												)
													return s;
												if (
													(h = this.getIntersectFrames(l[1], void 0)).length > 0 &&
													h.find(function (t) {
														return t.id === e.id;
													})
												)
													return s;
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (n = o.return) && n.call(o);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									(e.prototype.isCoincidedCornerJoiner = function (e) {
										var t = this.view.shapeManager.cornerJoiners,
											n = !1;
										return (
											t.forEach(function (t) {
												t.outerEdges.forEach(function (t) {
													l.Utils.segCoincide(t, e) && (n = !0);
												});
											}),
											n
										);
									}),
									(e.prototype.getNearestFrame = function (e) {
										var t,
											n,
											i,
											a,
											l,
											h = Number.MAX_VALUE,
											c = o(this.view.shapeManager.shapem, this.view.shapeManager.walls),
											u = function (t) {
												t.polygon.edges.forEach(function (n, r) {
													if (n instanceof s.default.Segment) {
														var o = e.distanceTo(n)[0];
														o < h && ((i = n), (a = t), (l = r), (h = o));
													}
												});
											};
										try {
											for (var p = r(c), f = p.next(); !f.done; f = p.next()) u(f.value);
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												f && !f.done && (n = p.return) && n.call(p);
											} finally {
												if (t) throw t.error;
											}
										}
										return [i, a, l];
									}),
									(e.prototype.getNearestShape = function (e) {
										var t,
											n,
											i,
											a,
											l,
											h = Number.MAX_VALUE,
											c = this.view.shapeManager.shapem,
											u = o(c, this.view.shapeManager.couples, this.view.shapeManager.walls),
											p = function (t) {
												t.polygon.edges.forEach(function (n, r) {
													if (n instanceof s.default.Segment) {
														var o = e.distanceTo(n)[0];
														o < h && ((i = n), (a = t), (l = r), (h = o));
													}
												});
											};
										try {
											for (var f = r(u), d = f.next(); !d.done; d = f.next()) p(d.value);
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												d && !d.done && (n = f.return) && n.call(f);
											} finally {
												if (t) throw t.error;
											}
										}
										return [i, a, l];
									}),
									(e.prototype.getIntersectFramesHelper = function (e, t) {
										var n,
											i,
											o,
											a,
											l = this.getIntersectFramesOnce(e, t);
										if (l)
											try {
												for (var h = r(l), c = h.next(); !c.done; c = h.next()) {
													var u = c.value;
													try {
														for (
															var p = ((o = void 0), r(u.polygon.edges)), f = p.next();
															!f.done;
															f = p.next()
														) {
															var d = f.value;
															d instanceof s.default.Segment && this.getIntersectFramesHelper(d, t);
														}
													} catch (e) {
														o = {
															error: e,
														};
													} finally {
														try {
															f && !f.done && (a = p.return) && a.call(p);
														} finally {
															if (o) throw o.error;
														}
													}
												}
											} catch (e) {
												n = {
													error: e,
												};
											} finally {
												try {
													c && !c.done && (i = h.return) && i.call(h);
												} finally {
													if (n) throw n.error;
												}
											}
										return Array.from(this.intersectFrames);
									}),
									(e.prototype.getIntersectFramesOnce = function (e, t) {
										var n,
											i,
											a,
											h,
											c = [],
											u = o(this.view.shapeManager.shapem, this.view.shapeManager.walls);
										try {
											for (var p = r(u), f = p.next(); !f.done; f = p.next()) {
												var d = f.value;
												if ((!t || t.id !== d.id) && !this.intersectFrames.has(d))
													try {
														for (
															var g = ((a = void 0), r(d.polygon.edges)), y = g.next();
															!y.done;
															y = g.next()
														) {
															var m = y.value;
															if (m instanceof s.default.Segment && l.Utils.segCoincide(e, m)) {
																c.push(d), this.intersectFrames.add(d);
																break;
															}
														}
													} catch (e) {
														a = {
															error: e,
														};
													} finally {
														try {
															y && !y.done && (h = g.return) && h.call(g);
														} finally {
															if (a) throw a.error;
														}
													}
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												f && !f.done && (i = p.return) && i.call(p);
											} finally {
												if (n) throw n.error;
											}
										}
										return c;
									}),
									(e.prototype.getFrameConnectedComponents = function (e) {
										var t = this,
											n = new Set();
										return (
											e.polygon.edges.forEach(function (r, i) {
												t.getFrameEdgeConnectedComponents(e, i).forEach(function (e) {
													return n.add(e);
												});
											}),
											Array.from(n)
										);
									}),
									(e.prototype.getWallEdgeConnectedComponents = function (e, t) {
										return (
											this.frameEdgeConnectedComponents.clear(),
											this.getConnectedComponentsHelper(e.polygon.edge(t), e)
										);
									}),
									(e.prototype.getFrameEdgeConnectedComponents = function (e, t) {
										return (
											this.frameEdgeConnectedComponents.clear(),
											this.getConnectedComponentsHelper(e.polygon.edge(t), e)
										);
									}),
									(e.prototype.getCoupleEdgeConnectedComponents = function (e, t) {
										return (
											this.frameEdgeConnectedComponents.clear(),
											this.getConnectedComponentsHelper(t, e)
										);
									}),
									(e.prototype.getConnectedComponentsHelper = function (e, t) {
										var n,
											i,
											o,
											a,
											l,
											c,
											u,
											p,
											f,
											d,
											g = this.getConnectedComponentsOnce(e, t);
										if (g.length)
											try {
												for (var y = r(g), m = y.next(); !m.done; m = y.next()) {
													var v = m.value.frame;
													if (v instanceof h.Frame)
														try {
															for (
																var w = ((o = void 0), r(v.polygon.edges)), b = w.next();
																!b.done;
																b = w.next()
															)
																(M = b.value) instanceof s.default.Segment &&
																	this.getConnectedComponentsHelper(M, t);
														} catch (e) {
															o = {
																error: e,
															};
														} finally {
															try {
																b && !b.done && (a = w.return) && a.call(w);
															} finally {
																if (o) throw o.error;
															}
														}
													else if (v instanceof h.CornerJoiner)
														try {
															for (
																var S = ((l = void 0), r(v.outerEdges)), _ = S.next();
																!_.done;
																_ = S.next()
															) {
																var P = _.value;
																this.getConnectedComponentsHelper(P, t);
															}
														} catch (e) {
															l = {
																error: e,
															};
														} finally {
															try {
																_ && !_.done && (c = S.return) && c.call(S);
															} finally {
																if (l) throw l.error;
															}
														}
													else if (v instanceof h.Connector)
														try {
															for (
																var x = ((u = void 0), r(v.outerEdges)), D = x.next();
																!D.done;
																D = x.next()
															)
																(P = D.value), this.getConnectedComponentsHelper(P, t);
														} catch (e) {
															u = {
																error: e,
															};
														} finally {
															try {
																D && !D.done && (p = x.return) && p.call(x);
															} finally {
																if (u) throw u.error;
															}
														}
													else if (v instanceof h.Wall)
														try {
															for (
																var T = ((f = void 0), r(v.polygon.edges)), O = T.next();
																!O.done;
																O = T.next()
															) {
																var M;
																(M = O.value) instanceof s.default.Segment &&
																	this.getConnectedComponentsHelper(M, t);
															}
														} catch (e) {
															f = {
																error: e,
															};
														} finally {
															try {
																O && !O.done && (d = T.return) && d.call(T);
															} finally {
																if (f) throw f.error;
															}
														}
												}
											} catch (e) {
												n = {
													error: e,
												};
											} finally {
												try {
													m && !m.done && (i = y.return) && i.call(y);
												} finally {
													if (n) throw n.error;
												}
											}
										return Array.from(this.frameEdgeConnectedComponents);
									}),
									(e.prototype.connectedComponents = function (e, t) {
										var n = e.polygon.edge(t);
										return n instanceof s.default.Segment
											? this.getConnectedComponentsOnce(n, e).map(function (e) {
													return e.frame;
											  })
											: [];
									}),
									(e.prototype.getConnectedComponentsOnce = function (e, t) {
										var n,
											i,
											o,
											a,
											h,
											c,
											u = [];
										try {
											for (
												var p = r(this.view.shapeManager.shapem), f = p.next();
												!f.done;
												f = p.next()
											) {
												var d = f.value;
												if ((!t || t.id !== d.id) && !this.frameEdgeConnectedComponents.has(d))
													for (var g = d.polygon.edges, y = 0; y < g.length; y++)
														if (
															(D = g[y]) instanceof s.default.Segment &&
															l.Utils.segCoincide(e, D)
														) {
															u.push({
																frame: d,
																edge: D,
																edgeIdx: y,
															}),
																this.frameEdgeConnectedComponents.add(d);
															break;
														}
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												f && !f.done && (i = p.return) && i.call(p);
											} finally {
												if (n) throw n.error;
											}
										}
										try {
											for (
												var m = r(this.view.shapeManager.couples), v = m.next();
												!v.done;
												v = m.next()
											) {
												var w = v.value;
												if ((!t || t.id !== w.id) && !this.frameEdgeConnectedComponents.has(w))
													for (var b = 0; b < w.outerEdges.length; b++) {
														var S = w.outerEdges[b];
														if (l.Utils.segCoincide(e, S)) {
															u.push({
																frame: w,
																edge: S,
																edgeIdx: b,
															}),
																this.frameEdgeConnectedComponents.add(w);
															break;
														}
													}
											}
										} catch (e) {
											o = {
												error: e,
											};
										} finally {
											try {
												v && !v.done && (a = m.return) && a.call(m);
											} finally {
												if (o) throw o.error;
											}
										}
										try {
											for (
												var _ = r(this.view.shapeManager.walls), P = _.next();
												!P.done;
												P = _.next()
											) {
												var x = P.value;
												if ((!t || t.id !== x.id) && !this.frameEdgeConnectedComponents.has(x))
													for (g = x.polygon.edges, y = 0; y < g.length; y++) {
														var D;
														if (
															(D = g[y]) instanceof s.default.Segment &&
															l.Utils.segCoincide(e, D)
														) {
															u.push({
																frame: x,
																edge: D,
																edgeIdx: y,
															}),
																this.frameEdgeConnectedComponents.add(x);
															break;
														}
													}
											}
										} catch (e) {
											h = {
												error: e,
											};
										} finally {
											try {
												P && !P.done && (c = _.return) && c.call(_);
											} finally {
												if (h) throw h.error;
											}
										}
										return u;
									}),
									(e.prototype.nextComponent = function (e, t) {
										var n = this.getConnectedComponentsOnce(t, e);
										if (n.length > 0) {
											var r = n[0].frame,
												i = r.polygon.edges.filter(function (e) {
													return e instanceof s.default.Segment;
												});
											return {
												shape: r,
												edges: (i = i.filter(function (e) {
													return !e.contains(t.middle());
												})),
											};
										}
									}),
									(e.prototype.snapTo = function (e, t, n) {
										void 0 === n && (n = !1);
										var r = e.polygon.box,
											i = t.polygon.box,
											o = s.default.vector(i.center, r.center),
											a = o.slope / (Math.PI / 4),
											c = !!n || (a >= 0 && a <= 1) || (a >= 7 && a <= 8),
											u = !n && a >= 3 && a <= 5;
										if (t instanceof h.Couple)
											if (l.Utils.isSegVertical(t.centerEdge))
												c || u || (o.x >= 0 ? ((u = !1), (c = !0)) : ((u = !0), (c = !1)));
											else {
												if (!l.Utils.isSegHorizontal(t.centerEdge)) return;
												(c || u) && ((u = !1), (c = !1));
											}
										var p,
											f,
											d,
											g = !n && a >= 5 && a <= 7,
											y = i.ymax - i.ymin,
											m = i.xmax - i.xmin;
										if (u || c) {
											if (
												!t.polygon.edges.some(function (e) {
													return e instanceof s.default.Segment && l.Utils.isSegVertical(e);
												})
											)
												return;
											(p = void 0),
												(f = y),
												(e.polygon = e.polygon.resize(p, f)),
												(r = e.polygon.box),
												(o = s.default.vector(i.center, r.center));
											var v = (m + (r.xmax - r.xmin)) / 2;
											d = s.default.vector(u ? -1 : 1, 0).multiply(v);
										} else {
											if (
												!t.polygon.edges.some(function (e) {
													return e instanceof s.default.Segment && l.Utils.isSegHorizontal(e);
												})
											)
												return;
											(p = m),
												(f = void 0),
												(e.polygon = e.polygon.resize(p, f)),
												(r = e.polygon.box),
												(o = s.default.vector(i.center, r.center)),
												(v = (y + (r.ymax - r.ymin)) / 2),
												(d = s.default.vector(0, g ? -1 : 1).multiply(v));
										}
										e.updatePoly(), e.translate(o.invert().add(d));
									}),
									(e.prototype.findRightEndElement = function () {
										return o(this.view.shapeManager.shapem, this.view.shapeManager.couples).sort(
											function (e, t) {
												return t.polygon.box.center.x - e.polygon.box.center.x;
											},
										)[0];
									}),
									(e.prototype.findNearestSnapElement = function (e) {
										var t,
											n,
											i,
											o,
											a,
											h,
											c,
											u = e.polygon.box.center,
											p = Number.MAX_VALUE;
										try {
											for (
												var f = r(this.view.shapeManager.shapem), d = f.next();
												!d.done;
												d = f.next()
											) {
												var g = d.value;
												if (g.id !== e.id) {
													if (
														!g.polygon.edges.some(function (e) {
															return e instanceof s.default.Segment && l.Utils.isHorizOrVer(e);
														})
													)
														return;
													(S = g.polygon.box.center.distanceTo(u)[0]) < p && ((p = S), (c = g));
												}
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												d && !d.done && (n = f.return) && n.call(f);
											} finally {
												if (t) throw t.error;
											}
										}
										try {
											for (
												var y = r(this.view.shapeManager.couples), m = y.next();
												!m.done;
												m = y.next()
											) {
												var v = m.value;
												l.Utils.isHorizOrVer(v.centerEdge) &&
													(S = v.polygon.box.center.distanceTo(u)[0]) < p &&
													((p = S), (c = v));
											}
										} catch (e) {
											i = {
												error: e,
											};
										} finally {
											try {
												m && !m.done && (o = y.return) && o.call(y);
											} finally {
												if (i) throw i.error;
											}
										}
										try {
											for (
												var w = r(this.view.shapeManager.walls), b = w.next();
												!b.done;
												b = w.next()
											) {
												var S,
													_ = b.value;
												_.isBackground ||
													((S = _.polygon.box.center.distanceTo(u)[0]) < p && ((p = S), (c = _)));
											}
										} catch (e) {
											a = {
												error: e,
											};
										} finally {
											try {
												b && !b.done && (h = w.return) && h.call(w);
											} finally {
												if (a) throw a.error;
											}
										}
										return c;
									}),
									(e.prototype.snapFrame = function (e, t) {
										void 0 === t && (t = !1);
										var n = t ? this.findRightEndElement() : this.findNearestSnapElement(e);
										void 0 !== n &&
											(this.unsnap(e.polygon) ||
												(this.snapTo(e, n, t),
												e.updateFrame(!0),
												e.draw(this.view),
												n instanceof h.CornerJoiner &&
													(n.draw(this.view), n.skewFrame(this.view))));
									}),
									(e.prototype.unsnap = function (e) {
										return (
											!(e instanceof h.HalfCirclePoly || e instanceof h.QuarterCirclePoly) &&
											e.edges.some(function (e) {
												return e instanceof s.default.Arc;
											})
										);
									}),
									e
								);
							})();
						t.FrameUtil = c;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__assign) ||
								function () {
									return (r =
										Object.assign ||
										function (e) {
											for (var t, n = 1, r = arguments.length; n < r; n++)
												for (var i in (t = arguments[n]))
													Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
											return e;
										}).apply(this, arguments);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								},
							a =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Json3d = void 0);
						var l = s(n(0)),
							h = n(9),
							c = n(7),
							u = n(16),
							p = n(2),
							f = n(13),
							d = n(11),
							g = n(1),
							y = (function () {
								function e(e, t) {
									var n = this;
									(this.view = e),
										(this.profileInjection = !1),
										(this.profileSizes = {}),
										(this.profileInsertions = []),
										(this.profileUsage = {}),
										this.view.mometoManager.checkPoint(!0),
										(_.Ins.canvasHeight = e.canvas.height() / e.canvas.scaleX()),
										t &&
											((this.profileInjection = !0),
											(this.profileSizes = this.fetchProfileSizes(t)),
											(this.profileInsertions = this.fetchProfileInsertions(t)),
											(this.profileUsage = this.fetchProfileUsage(t)));
									var r = e.shapeManager;
									(this.corners = r.cornerJoiners),
										this.corners.forEach(function (e) {
											var t = n.cornerSize;
											e.type === g.ShapeType.WallCornerJoiner
												? (t = n.wallThickness)
												: e.type === g.ShapeType.PanoramicCornerJoiner && (t = 0.001),
												e.resize(t);
										}),
										(this.connectors = r.connectors),
										r.shapem
											.filter(function (e) {
												return e instanceof g.ThreedArcFrame;
											})
											.forEach(function (e) {
												var t = 0,
													n = 0,
													r = e.findWall(!0);
												r && ((t = e.wallHeight(r)), e.removeWall(r));
												var i = e.findWall(!1);
												i && ((n = e.wallHeight(i)), e.removeWall(i)), e.resetArc();
												var o = e.arcLength,
													a = e.threedChordLength,
													s = e.threedHeight,
													h = l.default.vector(-a + o, 0);
												e.editDim(0, a / o, h, e.view, !1),
													(e.threedHeight = s),
													t && e.appendWall(t, !0),
													n && e.appendWall(n, !1);
											}),
										(this.walls = r.walls),
										(this.frames = r.shapem);
								}
								return (
									Object.defineProperty(e.prototype, 'wallThickness', {
										get: function () {
											return 240;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.backgroundWallStruct = function () {
										var e = this,
											t = this.walls.find(function (e) {
												return e.isBackground;
											});
										if (t) {
											var n,
												r = this.makePath(t),
												i = r.path,
												o = r.pathFrames,
												a = [];
											i.forEach(function (t, r) {
												var o = 0 === r ? void 0 : i[r - 1],
													s = e.makeSegment(t, n, o);
												a.push(s), (n = s);
											});
											var s = this.visionIndexRange(i),
												l = s.from,
												h = s.end;
											(a = this.moveToCenter(a, o, l, h)), this.align3DArcSide(i, a, l, h);
											var c = p.Utils.optimizeEdges(a, !1),
												u = this.sideSegments(c, this.wallThickness / 2, !1),
												f = this.sideSegments(c, this.wallThickness / 2 - 1, !1),
												d = this.closeMirrorPath(u, f),
												g = this.sideSegments(c, this.wallThickness / 2, !0),
												y = this.closeMirrorPath(f, g),
												m = t.polygon.box,
												v = 0.001 * (m.ymax - m.ymin);
											return {
												innerSide: _.Ins.polygon(y, !1),
												outterSide: _.Ins.polygon(d, !1),
												height: v,
											};
										}
									}),
									(e.prototype.makePath = function (e) {
										var t = this,
											n = this.frames.map(function (e) {
												return e.polygon.box;
											}),
											r = e.polygon.box,
											i = Math.min.apply(
												Math,
												o(
													[r.xmin],
													n.map(function (e) {
														return e.xmin;
													}),
												),
											),
											a = Math.max.apply(
												Math,
												o(
													[r.xmax],
													n.map(function (e) {
														return e.xmax;
													}),
												),
											),
											s = this.view.shapeManager.cornerJoiners.slice();
										s.sort(function (e, t) {
											return e.centerEdge.start.x - t.centerEdge.start.x;
										});
										var h = [
												{
													type: 'extend',
													from: i,
													to: s.length > 0 ? s[0].centerEdge.start.x : a,
												},
											],
											c = [!1];
										return (
											s.forEach(function (e, t) {
												h.push({
													type: 'corner',
													from: e.centerEdge.start.x,
													to: t === s.length - 1 ? a : s[t + 1].centerEdge.start.x,
													angle: e.skewAngle,
													size: e.size,
												}),
													c.push(!1);
											}),
											this.frames.forEach(function (e) {
												var n = e.polygon.box.xmin,
													r = e.polygon.box.xmax,
													i = h.findIndex(function (e) {
														var t = l.default.Utils.EQ_0(e.from - n),
															i = l.default.Utils.EQ_0(r - e.to);
														return (!t || !i) && (e.from < n || t) && (r < e.to || i);
													});
												if (-1 !== i) {
													var a = h[i];
													if (!c[i]) {
														var s,
															u = l.default.Utils.EQ_0(n - a.from),
															f = l.default.Utils.EQ_0(r - a.to);
														if (e instanceof g.ThreedArcFrame) {
															var d = t.connectors.find(function (t) {
																	return p.Utils.polyConcideSeg(t.polygon, e.leftEdge);
																}),
																y = t.connectors.find(function (t) {
																	return p.Utils.polyConcideSeg(t.polygon, e.rightEdge);
																}),
																m = e.arcInTopView,
																v = new l.default.Matrix();
															(v = v.scale(1, -1)),
																(m = m.transform(v)),
																(s = {
																	type: 'arc',
																	from: n,
																	to: r,
																	arc: m,
																	connectorOnLeft: !!d,
																	connectorOnRight: !!y,
																});
														} else
															s = {
																type: 'extend',
																from: n,
																to: r,
															};
														var w = [],
															b = [];
														if ('arc' !== a.type) {
															var S =
																	'extend' === a.type
																		? {
																				type: 'extend',
																				from: a.from,
																				to: n,
																		  }
																		: {
																				type: 'corner',
																				from: a.from,
																				to: n,
																				angle: a.angle,
																				size: a.size,
																		  },
																_ = {
																	type: 'extend',
																	from: r,
																	to: a.to,
																};
															u || (w.push(S), b.push(!1)),
																w.push(s),
																b.push(!0),
																f || (w.push(_), b.push(!1)),
																h.splice.apply(h, o([i, 1], w)),
																c.splice.apply(c, o([i, 1], b));
														}
													}
												}
											}),
											{
												path: h,
												pathFrames: c,
											}
										);
									}),
									(e.prototype.visionIndexRange = function (e) {
										for (
											var t = this.frames[0].polygon.box.center.x,
												n = e.findIndex(function (e) {
													return e.from < t && t < e.to;
												}),
												r = n;
											0 !== r && 'corner' !== e[r].type;

										)
											r--;
										var i = r;
										for (
											r = n;
											r < e.length - 1 && 'corner' !== e[r + 1].type && r !== e.length - 1;

										)
											r++;
										return {
											from: i,
											end: r,
										};
									}),
									(e.prototype.moveToCenter = function (e, t, n, r) {
										var i = e.slice().splice(n, r - n + 1),
											o = t.slice().splice(n, r - n + 1),
											a = i.filter(function (e, t) {
												return e instanceof l.default.Segment && o[t];
											}),
											s = i.filter(function (e) {
												return e instanceof l.default.Arc;
											}),
											h = a.length > 0 ? a : s,
											c = l.default.segment(h[0].start, h[h.length - 1].end),
											u = c.tangentInStart().angleTo(l.default.vector(1, 0)),
											p = c.middle();
										return (e = e.map(function (e) {
											return e.translate(l.default.vector(p, l.default.point()));
										})).map(function (e) {
											return e.rotate(u, l.default.point());
										});
									}),
									(e.prototype.align3DArcSide = function (e, t, n, r) {
										for (var i = -1, o = n; o <= r; o++) {
											var a = t[o];
											if (a.start.x < 0 && 0 < a.end.x) {
												i = o;
												break;
											}
										}
										for (o = 0; o < i; o++)
											'arc' === (s = e[o]).type &&
												(s.connectorOnLeft && this.leftSideTurnToArcLeft(o, e, t),
												s.connectorOnRight && this.arcTurnToRight(o, e, t));
										for (o = i + 1; o < e.length; o++) {
											var s;
											'arc' === (s = e[o]).type &&
												(s.connectorOnRight && this.rightSideTurnToArcRight(o, e, t),
												s.connectorOnLeft && this.arcTurnToLeft(o, e, t));
										}
										var l = e[i];
										'arc' === l.type &&
											(l.connectorOnLeft && this.leftSideTurnToArcLeft(i, e, t),
											l.connectorOnRight && this.rightSideTurnToArcRight(i, e, t));
									}),
									(e.prototype.leftSideTurnToArcLeft = function (e, t, n) {
										var r = t[e];
										if ('arc' === r.type)
											for (
												var i = r.arc.tangentInStart().invert(),
													o = n[e],
													a = l.default
														.segment(o.start, o.end)
														.tangentInStart()
														.invert()
														.angleTo(i),
													s = 0;
												s < e;
												s++
											)
												n[s] = n[s].rotate(a, o.start);
									}),
									(e.prototype.arcTurnToRight = function (e, t, n) {
										if ('arc' === t[e].type) {
											var r = n[e + 1];
											if (r)
												for (
													var i = (
															r instanceof l.default.Arc ? l.default.segment(r.start, r.end) : r
														).tangentInStart(),
														o = n[e],
														a = o.tangentInEnd().invert().angleTo(i),
														s = 0;
													s <= e;
													s++
												)
													n[s] = n[s].rotate(a, o.end);
										}
									}),
									(e.prototype.rightSideTurnToArcRight = function (e, t, n) {
										var r = t[e];
										if ('arc' === r.type)
											for (
												var i = r.arc.tangentInEnd().invert(),
													o = n[e],
													a = l.default.segment(o.start, o.end).tangentInEnd().invert().angleTo(i),
													s = e + 1;
												s < t.length;
												s++
											)
												n[s] = n[s].rotate(a, o.end);
									}),
									(e.prototype.arcTurnToLeft = function (e, t, n) {
										if ('arc' === t[e].type) {
											var r = n[e - 1];
											if (r)
												for (
													var i = (
															r instanceof l.default.Arc ? l.default.segment(r.start, r.end) : r
														).tangentInEnd(),
														o = n[e],
														a = o.tangentInStart().invert().angleTo(i),
														s = e;
													s < t.length;
													s++
												)
													n[s] = n[s].rotate(a, o.start);
										}
									}),
									(e.prototype.makeSegment = function (e, t, n) {
										var r = (t = t || l.default.segment(l.default.point(-1, 0), l.default.point()))
												.end,
											i = (n && 'arc' === n.type ? l.default.segment(t.start, t.end) : t)
												.tangentInEnd()
												.invert();
										if ('extend' === e.type) {
											var o = e.to - e.from;
											return l.default.segment(r, r.translate(i.multiply(o)));
										}
										if ('corner' === e.type) {
											var a = e.to - e.from,
												s = i.rotate(Math.PI - (e.angle * Math.PI) / 180);
											return l.default.segment(r, r.translate(s.multiply(a)));
										}
										var h = e.arc.clone(),
											c = l.default.vector(h.start, r),
											u = l.default.segment(h.start, h.end).tangentInStart();
										return (h = h.rotate(u.angleTo(i), h.start)).translate(c);
									}),
									(e.prototype.sideSegments = function (e, t, n) {
										void 0 === n && (n = !1);
										for (
											var r = e.map(function (e) {
													return p.Utils.sideMirror(e, t, n);
												}),
												i = 0;
											i < r.length - 1;
											i++
										) {
											var o = r[i],
												a = r[(i + 1) % r.length];
											(o instanceof l.default.Segment &&
												a instanceof l.default.Segment &&
												p.Utils.isParallel(o, a)) ||
												h.Frametify.edgeIntersection(r, i);
										}
										return r;
									}),
									(e.prototype.closeMirrorPath = function (e, t) {
										return (
											(t = t.map(function (e) {
												return e.clone().reverse();
											})).reverse(),
											new u.WinPolygon(
												o(e, [l.default.segment(e[e.length - 1].end, t[0].start)], t, [
													l.default.segment(t[t.length - 1].end, e[0].start),
												]),
											)
										);
									}),
									Object.defineProperty(e.prototype, 'cornerSize', {
										get: function () {
											return this.profileSizes && this.profileSizes.cornerJoiner
												? this.profileSizes.cornerJoiner
												: 150;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.output = function () {
										var e = this,
											t = {
												bgWall: this.backgroundWallStruct(),
												corners: this.corners
													.filter(function (e) {
														return e.hostFrame;
													})
													.map(function (t) {
														return new v(t, e.view).output();
													}),
												connectors: this.connectors.map(function (e) {
													return new w(e).output();
												}),
												walls: this.walls.map(function (t) {
													return new b(t, e.view).output();
												}),
												frames: this.framesJson3d(),
												unsupported: this.containUnsupported3DRender(),
												thickness: 0,
												isOutward: this.view.shapeManager.reverseInnerOuter,
												version: '1.0.1',
											};
										if (
											(t.frames.length > 0 &&
												(t.thickness = t.frames.sort(function (e, t) {
													return t.thickness - e.thickness;
												})[0].thickness),
											this.view.mometoManager.isDirty && !this.view.shapeManager.isEmpty)
										) {
											this.view.mometoManager.checkPoint();
											var n = c.DrawParams.Ins.sashMullionFixedToSashBottom;
											(c.DrawParams.Ins.sashMullionFixedToSashBottom = !1),
												this.view.mometoManager.undo(),
												(c.DrawParams.Ins.sashMullionFixedToSashBottom = n);
										} else this.view.shapeManager.draw();
										return t;
									}),
									(e.prototype.containUnsupported3DRender = function () {
										return this.frames.some(function (e) {
											return !!e.polygon.circlePolygon();
										});
									}),
									(e.prototype.framesJson3d = function () {
										var e = [],
											t = {
												profileInjection: this.profileInjection,
												sizes: this.profileSizes,
												insertions: this.profileInsertions,
												usage: this.profileUsage,
												profileSeries: void 0,
												view: this.view,
											},
											n = this.frames
												.filter(function (e) {
													return void 0 === e.polygon.circlePolygon();
												})
												.map(function (e) {
													return new S(e, t);
												});
										if (
											this.corners.some(function (e) {
												return e instanceof g.PanoramicCornerJoiner;
											}) &&
											this.frames.some(function (e) {
												return e.polygon instanceof u.SingleTrackPolygon;
											})
										) {
											var r = n.find(function (e) {
												return (
													e.frame.polygon instanceof u.SingleTrackPolygon &&
													e.profileSeries !== m.Sash
												);
											});
											if (r) {
												var i = r.profileSeries,
													o = Object.assign(t, {
														profileSeries: i,
													});
												e = n.map(function (e) {
													return e.frame.polygon instanceof u.SingleTrackPolygon &&
														e.profileSeries === m.Sash
														? new S(e.frame, o).output()
														: e.output();
												});
											} else
												e = n.map(function (e) {
													return e.output();
												});
										} else
											e = n.map(function (e) {
												return e.output();
											});
										return e;
									}),
									(e.prototype.fetchProfileSizes = function (e) {
										var t = e.profiles.data,
											n = function (e) {
												var n = t.find(function (t) {
													return t.profileType && e
														? t.profileType.toLowerCase() === e.toLowerCase()
														: t.profileType === e;
												});
												return n ? 1e3 * n.widthm : void 0;
											};
										return {
											frame: n(d.ccTypeEnum.frame),
											bead: n(d.ccTypeEnum.fixedBead),
											frameMullion: n(d.ccTypeEnum.mullion),
											sash: n(d.ccTypeEnum.Sash),
											screen: n(d.ccTypeEnum.Screen),
											antiTheftMullion: n(d.ccTypeEnum.antitheftMullion),
											cornerJoiner: n(d.ccTypeEnum.cornerJoiner),
											upTrack: n(d.ccTypeEnum.UpTrack),
											fixedUpTrack: n(d.ccTypeEnum.FixedUpTrack),
											downTrack: n(d.ccTypeEnum.DownTrack),
											fixedDownTrack: n(d.ccTypeEnum.FixedDownTrack),
											upDownTrack: n(d.ccTypeEnum.UpDownTrack),
											sideTrack: n(d.ccTypeEnum.SideTrack),
											slideSashUpBar: n(d.ccTypeEnum.SlideSashUpBar),
											slideSashDownBar: n(d.ccTypeEnum.SlideSashDownBar),
											slideSashCollisionLeftBar: n(d.ccTypeEnum.SlideSashCollisionLeftBar),
											slideSashCollisionRightBar: n(d.ccTypeEnum.SlideSashCollisionRightBar),
											slideSashEdgeBar: n(d.ccTypeEnum.SlideSashEdgeBar),
											slideSashSingleBar: n(d.ccTypeEnum.SlideSashSingleBar),
											slideSashDoubleBar: n(d.ccTypeEnum.SlideSashDoubleBar),
											slideSashNoneBar: n(d.ccTypeEnum.SlideSashNoneBar),
										};
									}),
									(e.prototype.fetchProfileUsage = function (e) {
										var t = e.profiles.data,
											n = function (e) {
												return (
													void 0 !==
													t.find(function (t) {
														return t.profileType === e;
													})
												);
											};
										return {
											sashBead: n(d.ccTypeEnum.sashBead),
											screenBead: n(d.ccTypeEnum.screenBead),
										};
									}),
									(e.prototype.fetchProfileInsertions = function (e) {
										return e.profileCrosss.data.map(function (e) {
											return {
												from: e.profile_id_src,
												to: e.profile_id_des,
												offset: 1e3 * e.value,
												attrs: e.attrs,
											};
										});
									}),
									e
								);
							})();
						t.Json3d = y;
						var m,
							v = (function () {
								function e(e, t) {
									(this.corner = e), (this.view = t);
								}
								return (
									(e.prototype.output = function () {
										var e = this.corner.centerEdge,
											t = new d.FrameUtil(this.view).getCoupleEdgeConnectedComponents(
												this.corner,
												this.corner.cornerEdge,
											),
											n = this.connectWalls(
												t.filter(function (e) {
													return e instanceof g.Frame;
												}),
											);
										return (
											t.push.apply(t, o(n)),
											{
												id: this.corner.id,
												type: this.corner.type,
												squareCorner: this.corner.squareCorner,
												hostFrameId: this.corner.hostFrame.id,
												cornerFrameIds: t.map(function (e) {
													return e.id;
												}),
												angle: this.corner.skewAngle,
												startPt: _.Ins.point(e.start),
												endPt: _.Ins.point(e.end),
												wh: this.corner.size / 1e3,
												colors: {
													bar: this.corner.colorManager.toJSON().bn,
												},
												marks: [this.corner.dimForWidth]
													.filter(function (e) {
														return !e.hidden;
													})
													.map(function (e) {
														return _.Ins.dim(e);
													}),
											}
										);
									}),
									(e.prototype.connectWalls = function (e) {
										var t = [];
										return (
											this.view.shapeManager.walls.forEach(function (n) {
												e.forEach(function (e) {
													d.EdgeFinder.Instance.isPolygonConnected(e.polygon, n.polygon) &&
														t.push(n);
												});
											}),
											t
										);
									}),
									e
								);
							})(),
							w = (function () {
								function e(e) {
									this.connector = e;
								}
								return (
									(e.prototype.output = function () {
										var e = this.connector.middleEdge;
										return {
											id: this.connector.id,
											width: this.connector.size / 1e3,
											startPt: _.Ins.point(e.start),
											endPt: _.Ins.point(e.end),
											colors: {
												bar: this.connector.colorManager.toJSON().bn,
											},
											marks: [this.connector.dimForWidth]
												.filter(function (e) {
													return !e.hidden;
												})
												.map(function (e) {
													return _.Ins.dim(e);
												}),
										};
									}),
									e
								);
							})(),
							b = (function () {
								function e(e, t) {
									(this.wall = e), (this.view = t), (this.thickness = 240);
								}
								return (
									(e.prototype.output = function () {
										var e,
											t,
											n = this.wall.polygon.clone(),
											r = this.expand(d.Direction.Left),
											i = d.EdgeFinder.Instance.findIndex(d.Direction.Left, this.wall.polygon);
										n = n.dragEdge(i, l.default.vector(-r, 0));
										var o = this.expand(d.Direction.Right),
											s = d.EdgeFinder.Instance.findIndex(d.Direction.Right, this.wall.polygon);
										n = n.dragEdge(s, l.default.vector(o, 0));
										var h = 'normal',
											c = 0,
											u = !1;
										try {
											for (
												var p = a(this.view.shapeManager.shapem), f = p.next();
												!f.done;
												f = p.next()
											) {
												var y = f.value;
												if (y instanceof g.ThreedArcFrame) {
													var m = y.findWall(!0),
														v = y.findWall(!1);
													if ((m && m === this.wall) || (v && v === this.wall)) {
														(h = '3dArc'), (c = y.threedHeight / 1e3), (u = y.arcFaceInner);
														break;
													}
												}
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												f && !f.done && (t = p.return) && t.call(p);
											} finally {
												if (e) throw e.error;
											}
										}
										return {
											id: this.wall.id,
											pts: n.edges.map(function (e) {
												return _.Ins.point(e.start);
											}),
											type: h,
											arcHeight: c,
											arcFaceInner: u,
											marks: this.wall.dims
												.filter(function (e) {
													return !e.hidden;
												})
												.map(function (e) {
													return _.Ins.dim(e);
												}),
										};
									}),
									(e.prototype.expand = function (e) {
										var t = this,
											n = d.EdgeFinder.Instance,
											r = this.view.shapeManager.shapem
												.filter(function (e) {
													return e.polygon.edges
														.filter(function (e) {
															return e instanceof l.default.Segment && p.Utils.isSegHorizontal(e);
														})
														.some(function (e) {
															return n.isPolygonConnectedWithEdge(e, t.wall.polygon);
														});
												})
												.pop();
										if (!r) return 0;
										var i = 0,
											o = n.findIndex(e, r.polygon),
											a = new d.FrameUtil(this.view).connectedComponents(r, o).pop();
										if (a instanceof g.Couple || a instanceof g.CornerJoiner) {
											if (
												!this.wall.polygon.edges
													.map(function (e) {
														return e.start;
													})
													.some(function (e) {
														return a.polygon.contains(e);
													})
											)
												return 0;
											var s = n.connectedEdgeIndex(this.wall.polygon, a.polygon);
											if (n.findDirection(this.wall.polygon, s) === e) return 0;
										}
										if ((a instanceof g.Couple && (i = a.size / 2), a instanceof g.CornerJoiner)) {
											var h = Math.abs(Math.tan(((a.skewAngle / 180) * Math.PI) / 2) * i);
											i = ((h + this.thickness / 2) * i) / h;
										}
										return i;
									}),
									e
								);
							})(),
							S = (function () {
								function e(e, t) {
									var n,
										r = this;
									(this.frm = e),
										(this.systemSizes = {
											frame: 60,
											bead: 15,
											frameMullion: 90,
											sash: 60,
											screen: 60,
											sashMullion: 60,
											kfcWaist: 200,
											antiTheft: 24,
											antiTheftMullion: 45,
											cornerJoiner: 100,
										}),
										e instanceof g.ThreedArcFrame && (n = e.threedHeight),
										(this.slideCcBar = new d.SlideCCBar([e])),
										e.sashManager.slides.forEach(function (e) {
											return r.markSlideProfile(e);
										}),
										this.allKfcSashes.forEach(function (e) {
											return r.markKfcProfile(e);
										}),
										(this.profileSeries = t.profileSeries
											? t.profileSeries
											: this.matchProfileSeries()),
										(this.profileSizes = t.profileInjection ? t.sizes : this.defaultProfileSize()),
										(this.profileSizes = Object.assign(this.systemSizes, this.profileSizes)),
										(this.insertions = t.profileInjection
											? t.insertions
											: this.defaultProfileInsertion()),
										(this.usage = t.profileInjection ? t.usage : this.defaultProfileUsage()),
										(this.view = t.view),
										this.applyProfileSizes(),
										this.slideCcBar.markProfiles([e]),
										this.distinctTurningFrame(),
										e instanceof g.ThreedArcFrame && (e.threedHeight = n);
								}
								return (
									(e.prototype.distinctTurningFrame = function () {
										var e = [];
										o(this.frm.sashManager.sashes, this.frm.sashManager.doubleSashes).forEach(
											function (t) {
												e.some(function (e) {
													return t.polyId.equalTo(e);
												})
													? (t.withTurningFrame = !1)
													: e.push(t.polyId);
											},
										);
									}),
									(e.prototype.output = function () {
										var e,
											t,
											n,
											r,
											i = this,
											a = {
												id: this.frm.id,
												seriesId: this.profileSeries,
												thickness: this.thicknessOfSeries(this.profileSeries),
												glassLeafs: [],
												screenLeafs: [],
												glasses: [],
												shade: [],
												guardSash: [],
												panels: [],
												slides: [],
												foldLeafs: [],
												antiTheft: [],
												frameType: 'normal',
												arcHeight: 0,
												arcFaceInner: !1,
												closeObject: [],
												mullions: [],
												sideTrackFixeds: [],
												fixedTurningFrames: [],
												sashTurningFrames: [],
												isSimpleClosed: this.frm.polygon.isSimpleClosed,
												boundary: this.frm.polygon.boundary,
											};
										Object.assign(a, this.frameTo3D()),
											(a.fixedTurningFrames = this.frm.mulManager.glasses
												.filter(function (e) {
													return e.withTurningFrame;
												})
												.map(function (e) {
													return i.turningFrameTo3D(e);
												})),
											(a.sashTurningFrames = o(
												this.frm.sashManager.sashes,
												this.frm.sashManager.doubleSashes,
											)
												.filter(function (e) {
													return e.withTurningFrame;
												})
												.map(function (e) {
													return i.turningFrameTo3D(e);
												})),
											(a.glasses = this.frm.mulManager.glasses
												.filter(function (e) {
													return e instanceof g.Glass;
												})
												.map(function (e) {
													return i.fixGlassTo3D(e);
												})),
											(a.shade = this.frm.mulManager.glasses
												.filter(function (e) {
													return e instanceof g.Shade;
												})
												.map(function (e) {
													return i.fixShadeTo3D(e);
												})),
											(a.sideTrackFixeds = a.glasses
												.map(function (e) {
													return e.sideTrackFixeds;
												})
												.flat()),
											(a.panels = this.frm.mulManager.glasses
												.filter(function (e) {
													return e instanceof g.Panel;
												})
												.map(function (e) {
													return i.fixPanelTo3D(e);
												}));
										var s = this.doubles
												.filter(function (e) {
													return e.type === g.ShapeType.DoubleScreen;
												})
												.map(function (e) {
													return i.doubleSashTo3D(e);
												})
												.flat(),
											h = this.doubles
												.filter(function (e) {
													return e.type !== g.ShapeType.DoubleScreen;
												})
												.map(function (e) {
													return i.doubleSashTo3D(e);
												})
												.flat();
										return (
											(e = a.screenLeafs).push.apply(e, o(s)),
											(t = a.glassLeafs).push.apply(t, o(h)),
											(s = this.pushableSashes
												.filter(function (e) {
													return e.type === g.ShapeType.Screen;
												})
												.map(function (e) {
													return i.pushSashTo3D(e);
												})),
											(h = this.pushableSashes
												.filter(function (e) {
													return e.type !== g.ShapeType.Screen;
												})
												.map(function (e) {
													return i.pushSashTo3D(e);
												})),
											(n = a.screenLeafs).push.apply(n, o(s)),
											(r = a.glassLeafs).push.apply(r, o(h)),
											(a.guardSash = this.guardSashes.map(function (e) {
												return i.guardSashTo3D(e);
											})),
											(a.slides = this.frm.sashManager.slides.map(function (e) {
												return i.slidesTo3D(e);
											})),
											(a.antiTheft = this.frm.sashManager.thefts.map(function (e) {
												return i.theftTo3D(e);
											})),
											(a.foldLeafs = this.frm.sashManager.folds.map(function (e) {
												return i.foldTo3D(e);
											})),
											'3dArc' === a.frameType &&
												l.default.Utils.GE(Math.abs(a.arcHeight), 0) &&
												(this.handleThreeDFrameBars(a.closeObject.bars, a.arcHeight),
												this.handleThreeDFrameBars(a.mullions, a.arcHeight),
												a.glassLeafs.forEach(function (e) {
													i.handleThreeDFrameBars(e.closeObject.bars, a.arcHeight),
														i.handleThreeDFrameBars(e.mullions, a.arcHeight);
												}),
												a.screenLeafs.forEach(function (e) {
													i.handleThreeDFrameBars(e.closeObject.bars, a.arcHeight),
														i.handleThreeDFrameBars(e.mullions, a.arcHeight);
												}),
												a.slides.forEach(function (e) {
													e.slideLeafs.forEach(function (e) {
														e.forEach(function (e) {
															i.handleThreeDFrameBars(e.closeObject.bars, a.arcHeight),
																i.handleThreeDFrameBars(e.mullions, a.arcHeight);
														});
													});
												})),
											a
										);
									}),
									Object.defineProperty(e.prototype, 'pushableSashes', {
										get: function () {
											return o(
												this.frm.sashManager.sashes,
												this.frm.sashManager.kfcSashes,
												this.frm.sashManager.shadePushSashes,
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'guardSashes', {
										get: function () {
											return this.frm.sashManager.guardSashes;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'doubles', {
										get: function () {
											return o(
												this.frm.sashManager.doubleSashes,
												this.frm.sashManager.doubleKfcSashes,
												this.frm.sashManager.doubleShadePushSashes,
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allKfcSashes', {
										get: function () {
											return o(
												this.frm.sashManager.kfcSashes,
												this.frm.sashManager.doubleKfcSashes
													.map(function (e) {
														return e.sashes;
													})
													.flat(),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allPushableSashes', {
										get: function () {
											return o(
												this.pushableSashes,
												this.doubles
													.map(function (e) {
														return e.sashes;
													})
													.flat(),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'frame', {
										get: function () {
											return this.frm;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.frameTo3D = function () {
										var e = this,
											t = this.anchor(),
											n = i(this.preHandleThreeDFrame(), 3),
											r = n[0],
											a = n[1],
											s = n[2],
											h = this.barsTo3d(this.frm.frameManager.bars, this.frm.polygon);
										if (this.frm.polygon instanceof u.SingleTrackPolygon) {
											var c = this.frm.polygon.hidden,
												p = new d.FrameUtil(this.view);
											if (
												c.some(function (e) {
													return e === d.Direction.Left;
												})
											) {
												var f = h.find(function (e) {
														return (
															e.hasOwnProperty('attrs') && e.attrs.direction === d.Direction.Up
														);
													}),
													y = h.find(function (e) {
														return (
															e.hasOwnProperty('attrs') && e.attrs.direction === d.Direction.Down
														);
													}),
													m = p.getFrameEdgeConnectedComponents(this.frm, 0)[0];
												if (m instanceof g.PanoramicCornerJoiner) {
													var v = m.skewAngle / 2;
													void 0 !== f &&
														Object.assign(f.attrs, {
															etCutAngle: v,
														}),
														void 0 !== y &&
															Object.assign(y.attrs, {
																stCutAngle: v,
															});
												}
											}
											if (
												c.some(function (e) {
													return e === d.Direction.Right;
												})
											) {
												var w = h.find(function (e) {
														return (
															e.hasOwnProperty('attrs') && e.attrs.direction === d.Direction.Up
														);
													}),
													b = h.find(function (e) {
														return (
															e.hasOwnProperty('attrs') && e.attrs.direction === d.Direction.Down
														);
													}),
													S = p.getFrameEdgeConnectedComponents(this.frm, 2)[0];
												if (S instanceof g.PanoramicCornerJoiner) {
													var P = S.skewAngle / 2;
													void 0 !== w &&
														Object.assign(w.attrs, {
															stCutAngle: P,
														}),
														void 0 !== b &&
															Object.assign(b.attrs, {
																etCutAngle: P,
															});
												}
											}
										}
										var x = this.frm.mulManager.bars.map(function (t) {
												return e.mulBarTo3d(t);
											}),
											D = this.frm
												.getIDimInfo()
												.filter(function (e) {
													return e instanceof g.DimInfo;
												})
												.filter(function (e) {
													return e.dimSeg;
												})
												.map(function (e) {
													return {
														startPt: _.Ins.point(e.dimSeg.start),
														endPt: _.Ins.point(e.dimSeg.end),
													};
												}),
											T = this.frm.sashManager.allSashes
												.map(function (e) {
													return e.hardwareManager.hardwares;
												})
												.flat()
												.filter(function (e) {
													return !e.hidden && !e.dim.hidden;
												})
												.map(function (e) {
													return _.Ins.dim(e.dim);
												}),
											O = o(D, T),
											M = this.frm.colorManager.toJSON(),
											E = {
												bar: M.bn,
												bead: M.ben,
												glass: this.rgbToHex(M.g),
												hardware: M.hd,
											},
											I = this.frm.polygon.isSimpleClosed,
											C = this.frm.polygon.boundary.edges;
										return (
											this.frm.polygon.orientation === l.default.ORIENTATION.CCW &&
												(C = C.map(function (e) {
													return e.reverse();
												}).reverse()),
											{
												anchor: t,
												closeObject: {
													bars: h,
												},
												mullions: x,
												frameType: r,
												arcHeight: a,
												colors: E,
												arcFaceInner: s,
												marks: O,
												isSimpleClosed: I,
												boundary: C.map(function (e) {
													return {
														startPt: _.Ins.point(e.start),
														endPt: _.Ins.point(e.end),
													};
												}),
												tCorner: this.frm.atTCorner,
											}
										);
									}),
									(e.prototype.rgbToHex = function (e) {
										if (-1 === e.indexOf('rgb')) return e;
										var t = e.indexOf(',') > -1 ? ',' : ' ',
											n = -1 === e.indexOf('rgba') ? 4 : 5,
											r = e.substr(n).split(')')[0].split(t),
											i = (+r[0]).toString(16),
											o = (+r[1]).toString(16),
											a = (+r[2]).toString(16);
										return (
											1 === i.length && (i = '0' + i),
											1 === o.length && (o = '0' + o),
											1 === a.length && (a = '0' + a),
											'#' + i + o + a
										);
									}),
									(e.prototype.preHandleThreeDFrame = function () {
										var e = 'normal',
											t = 0,
											n = !1;
										return (
											this.frm instanceof g.ThreedArcFrame &&
												((e = '3dArc'),
												(t = this.frm.threedHeight / 1e3),
												(n = this.frm.arcFaceInner)),
											[e, t, n]
										);
									}),
									(e.prototype.handleThreeDFrameBars = function (e, t) {
										e.forEach(function (e) {
											p.Utils.isSegHorizontal(
												l.default.segment(
													l.default.point(e.startPt.x, e.startPt.y),
													l.default.point(e.endPt.x, e.endPt.y),
												),
											) && (e.arcHeight = t);
										});
									}),
									(e.prototype.shapeTypeToCcTypeEnum = function (e) {
										var t = new Map([
											[g.ShapeType.Frame, d.ccTypeEnum.frame],
											[g.ShapeType.FrameMullion, d.ccTypeEnum.mullion],
											[g.ShapeType.SashMullion, d.ccTypeEnum.sashMullion],
											[g.ShapeType.KfcWaist, d.ccTypeEnum.sashMullion],
											[g.ShapeType.ScreenMullion, d.ccTypeEnum.screenMullion],
											[g.ShapeType.AntiTheft, d.ccTypeEnum.AntiTheft],
											[g.ShapeType.Sash, d.ccTypeEnum.Sash],
											[g.ShapeType.Screen, d.ccTypeEnum.Screen],
											[g.ShapeType.KfcSash, d.ccTypeEnum.Sash],
											[g.ShapeType.AntiTheftMullion, d.ccTypeEnum.antitheftMullion],
											[g.ShapeType.UpTrack, d.ccTypeEnum.UpTrack],
											[g.ShapeType.FixedUpTrack, d.ccTypeEnum.FixedUpTrack],
											[g.ShapeType.DownTrack, d.ccTypeEnum.DownTrack],
											[g.ShapeType.FixedDownTrack, d.ccTypeEnum.FixedDownTrack],
											[g.ShapeType.UpDownTrack, d.ccTypeEnum.UpDownTrack],
											[g.ShapeType.SideTrack, d.ccTypeEnum.SideTrack],
											[g.ShapeType.DoubleSideTrack, d.ccTypeEnum.DoubleSideTrack],
											[g.ShapeType.SlideSashUpBar, d.ccTypeEnum.SlideSashUpBar],
											[g.ShapeType.SlideSashDownBar, d.ccTypeEnum.SlideSashDownBar],
											[
												g.ShapeType.SlideSashCollisionLeftBar,
												d.ccTypeEnum.SlideSashCollisionLeftBar,
											],
											[
												g.ShapeType.SlideSashCollisionRightBar,
												d.ccTypeEnum.SlideSashCollisionRightBar,
											],
											[g.ShapeType.SlideSashEdgeBar, d.ccTypeEnum.SlideSashEdgeBar],
											[g.ShapeType.SlideSashSingleBar, d.ccTypeEnum.SlideSashSingleBar],
											[g.ShapeType.SlideSashDoubleBar, d.ccTypeEnum.SlideSashDoubleBar],
											[g.ShapeType.SlideSashNoneBar, d.ccTypeEnum.SlideSashNoneBar],
											[g.ShapeType.KfcSashUpBar, d.ccTypeEnum.KfcSashUpBar],
											[g.ShapeType.KfcSashDownBar, d.ccTypeEnum.KfcSashDownBar],
											[g.ShapeType.KfcSashLeftBar, d.ccTypeEnum.KfcSashLeftBar],
											[g.ShapeType.KfcSashRightBar, d.ccTypeEnum.KfcSashRightBar],
											[g.ShapeType.ShadePushSash, d.ccTypeEnum.ShadePushSash],
											[g.ShapeType.GuardSash, d.ccTypeEnum.GuardSash],
										]).get(e);
										if (!t) throw new Error(e + ' cannot convert to ccTypeEnum');
										return t;
									}),
									(e.prototype.expandOffsets = function (e, t, n) {
										var r,
											i = this,
											o = this.containerOfShape(e);
										if (o)
											return e.polygon.edDock.docks.map(function (e) {
												if (e.type === p.DockType.None) return 1e-5;
												var a,
													s = e.dockBar(o);
												return s
													? (i.slideCcBar.isSlideProfile(s.type) &&
															((r = i.shapeTypeToCcTypeEnum(s.type)),
															(a = i.matchInsertion(t, r, n))),
													  a ||
															((r = i.shapeTypeToCcTypeEnum(s.where)),
															(a = i.matchInsertion(t, r, n))),
													  a ? a.offset : 0)
													: 0;
											});
										var a = this.insertions.find(function (e) {
											return e.from === t && void 0 === e.to;
										});
										return (
											a ||
												(a = this.insertions.find(function (e) {
													return e.from === t;
												})),
											a ? a.offset : 0
										);
									}),
									(e.prototype.matchInsertion = function (e, t, n) {
										var r = function (e, t) {
												return (
													(void 0 === e && void 0 === t) ||
													(void 0 !== e && void 0 !== t && e.toLowerCase() === t.toLowerCase())
												);
											},
											i = this.insertions.filter(function (t) {
												return r(t.from, e);
											}),
											o = i.find(function (t) {
												return r(t.from, e);
											}),
											a = i.find(function (n) {
												return r(n.from, e) && r(n.to, t);
											});
										return (
											i.find(function (i) {
												var o = i.attrs === n;
												return (
													i.attrs &&
														n &&
														(o = Object.keys(n).every(function (e) {
															return n[e] === i.attrs[e];
														})),
													r(i.from, e) && r(i.to, t) && o
												);
											}) ||
											a ||
											o
										);
									}),
									(e.prototype.fixGlassTo3D = function (e) {
										var t,
											n = this,
											r = [];
										this.frm.frameManager.bars
											.filter(function (e) {
												return e.type === g.ShapeType.SideTrack;
											})
											.forEach(function (t) {
												e.polygon.edges.forEach(function (e, n) {
													e instanceof l.default.Segment &&
														d.EdgeFinder.Instance.isPolygonConnectedWithEdge(e, t.polygon) &&
														r.push(n);
												});
											});
										var i = this.areaTo3D(e, this.frm, {}, function (e, n) {
												n &&
													(t = n.edges
														.filter(function (e, t) {
															return r.some(function (e) {
																return t === e;
															});
														})
														.map(function (e) {
															return {
																startPt: _.Ins.point(e.start),
																endPt: _.Ins.point(e.end),
															};
														}));
											}),
											o = this.frm.sashManager.thefts.some(function (t) {
												return t.polyId.equalTo(e.polygon.polyId);
											}),
											a = [d.Direction.Left, d.Direction.Right].map(function (t) {
												var r = d.EdgeFinder.Instance.findIndex(t, e.polygon);
												return e.polygon.edDock.docks[r].dockBar(n.frm)
													? {
															dockDirection: t,
															dockBar: !0,
													  }
													: {
															dockDirection: t,
															dockBar: !1,
													  };
											});
										return Object.assign(i, {
											sideTrackFixeds: t,
											hasTheft: o,
											dockInfos: a,
										});
									}),
									(e.prototype.fixShadeTo3D = function (e) {
										var t = [];
										this.frm.frameManager.bars
											.filter(function (e) {
												return e.type === g.ShapeType.SideTrack;
											})
											.forEach(function (n) {
												e.polygon.edges.forEach(function (e, r) {
													e instanceof l.default.Segment &&
														d.EdgeFinder.Instance.isPolygonConnectedWithEdge(e, n.polygon) &&
														t.push(r);
												});
											});
										var n = this.areaTo3D(e, this.frm, {});
										return Object.assign(n, {
											padding: 0.001 * e.padding,
											shadeWidth: 0.001 * e.mulManager.width,
											gap: 0.001 * e.gap,
										});
									}),
									(e.prototype.fixPanelTo3D = function (e) {
										var t = _.Ins.polygon(e.polygon),
											n = this.expandOffsets(e, d.ccTypeEnum.fixedPanel);
										return {
											pts: _.Ins.polygon(e.polygon.parallelPoly(n, !1)),
											opts: t,
										};
									}),
									(e.prototype.anchor = function () {
										var e = this.frm.polygon.box;
										return _.Ins.point(l.default.point(e.center.x, e.ymax));
									}),
									(e.prototype.generateTrack = function (e) {
										var t = e.polygon,
											n = d.EdgeFinder.Instance.find(
												d.Direction.Up,
												t.edges,
												t.orientation,
											).clone(),
											r = d.EdgeFinder.Instance.find(
												d.Direction.Down,
												t.edges,
												t.orientation,
											).clone();
										return {
											up: {
												startPt: _.Ins.point(r.start),
												endPt: _.Ins.point(r.end),
											},
											down: {
												startPt: _.Ins.point(n.start),
												endPt: _.Ins.point(n.end),
											},
										};
									}),
									(e.prototype.fetchSlideJoinType = function (e, t, n) {
										var r = e.sashes.filter(function (e) {
											return e.columnIndex === t;
										});
										if (r.length > 0) {
											if (
												r.find(function (e) {
													return e.trackIndex === n;
												})
											)
												return [d.slideJoinType.collision, 0];
											var i = r.filter(function (e) {
												return e.trackIndex === n - 1 || e.trackIndex === n + 1;
											}).length;
											return 0 === i ? [d.slideJoinType.none, 0] : [d.slideJoinType.overlap, i];
										}
										return [d.slideJoinType.none, 0];
									}),
									(e.prototype.isMarkedProfile = function (e) {
										var t = [
											g.ShapeType.KfcSashUpBar,
											g.ShapeType.KfcSashDownBar,
											g.ShapeType.KfcSashLeftBar,
											g.ShapeType.KfcSashRightBar,
										].some(function (t) {
											return t === e;
										});
										return this.slideCcBar.isSlideProfile(e) || t;
									}),
									(e.prototype.markKfcProfile = function (e) {
										var t = e.polygon.edges,
											n = e.polygon.box.center;
										t.forEach(function (t, r) {
											l.default.segment(n, n.translate(0, -9999)).intersect(t).length > 0
												? (e.frameManager.bars[r].type = g.ShapeType.KfcSashUpBar)
												: l.default.segment(n, n.translate(9999, 0)).intersect(t).length > 0
												? (e.frameManager.bars[r].type = g.ShapeType.KfcSashRightBar)
												: l.default.segment(n, n.translate(0, 9999)).intersect(t).length > 0
												? (e.frameManager.bars[r].type = g.ShapeType.KfcSashDownBar)
												: l.default.segment(n, n.translate(-9999, 0)).intersect(t).length > 0 &&
												  (e.frameManager.bars[r].type = g.ShapeType.KfcSashLeftBar);
										});
									}),
									(e.prototype.markSlideProfile = function (e) {
										var t = this,
											n = [];
										e.sashes.map(function (r, o) {
											r.frameManager.bars.forEach(function (a, s) {
												var l = r.trackIndex,
													h = r.columnIndex,
													c = d.EdgeFinder.Instance.findDirection(r.polygon, s);
												if (
													(c === d.Direction.Up
														? (c = d.Direction.Down)
														: c === d.Direction.Down && (c = d.Direction.Up),
													c)
												) {
													var u = d.slideJoinType.none,
														p = 0;
													if (e.expandHorizontally)
														if (
															((c !== d.Direction.Down && c !== d.Direction.Up) ||
																((u = d.slideJoinType.none), (p = 0)),
															c === d.Direction.Left)
														)
															if (0 === h) (u = d.slideJoinType.edge), (p = 0);
															else {
																var f = i(t.fetchSlideJoinType(e, h - 1, l), 2);
																(u = f[0]), (p = f[1]);
															}
														else if (c === d.Direction.Right)
															if (h === e.appliedOption.items[0].length - 1)
																(u = d.slideJoinType.edge), (p = 0);
															else {
																var g = i(t.fetchSlideJoinType(e, h + 1, l), 2);
																(u = g[0]), (p = g[1]);
															}
														else (u = d.slideJoinType.none), (p = 0);
													else if (
														((c !== d.Direction.Left && c !== d.Direction.Right) ||
															((u = d.slideJoinType.none), (p = 0)),
														c === d.Direction.Down)
													)
														if (0 === h) (u = d.slideJoinType.edge), (p = 0);
														else {
															var y = i(t.fetchSlideJoinType(e, h - 1, l), 2);
															(u = y[0]), (p = y[1]);
														}
													else if (c === d.Direction.Up)
														if (h === e.appliedOption.items[0].length - 1)
															(u = d.slideJoinType.edge), (p = 0);
														else {
															var m = i(t.fetchSlideJoinType(e, h + 1, l), 2);
															(u = m[0]), (p = m[1]);
														}
													else (u = d.slideJoinType.none), (p = 0);
													n.push({
														sashIndex: o,
														barIndex: s,
														joinType: u,
														overlapsCount: p,
													}),
														t.markSlideSashBarType(a, c, u, p);
												}
											});
										});
									}),
									(e.prototype.markSlideSashBarType = function (e, t, n, r) {
										if (
											n !== d.slideJoinType.none ||
											(t !== d.Direction.Left && t !== d.Direction.Right)
										)
											if (t === d.Direction.Down) e.type = g.ShapeType.SlideSashDownBar;
											else if (t === d.Direction.Up) e.type = g.ShapeType.SlideSashUpBar;
											else if (n === d.slideJoinType.edge) e.type = g.ShapeType.SlideSashEdgeBar;
											else if (n === d.slideJoinType.collision && t === d.Direction.Left)
												e.type = g.ShapeType.SlideSashCollisionRightBar;
											else if (n === d.slideJoinType.collision && t === d.Direction.Right)
												e.type = g.ShapeType.SlideSashCollisionLeftBar;
											else if (n === d.slideJoinType.overlap && 1 === r)
												e.type = g.ShapeType.SlideSashSingleBar;
											else {
												if (n !== d.slideJoinType.overlap || 2 !== r)
													throw new Error('unknown slide position');
												e.type = g.ShapeType.SlideSashDoubleBar;
											}
										else e.type = g.ShapeType.SlideSashNoneBar;
									}),
									(e.prototype.doubleSashTo3D = function (e) {
										var t = this,
											n = e.sashes[0],
											r =
												n.type === g.ShapeType.Sash || n.type === g.ShapeType.KfcSash
													? d.ccTypeEnum.Sash
													: d.ccTypeEnum.Screen,
											i = this.expandOffsets(e, r);
										return (
											e.updatePoly(e.polygon.parallelPoly(i, !1)),
											e.sashes.map(function (e) {
												return (
													(e.polygon.edDock.docks = []),
													e.updatePoly(),
													e instanceof g.KfcSash && t.markKfcProfile(e),
													t.pushableSashTo3D(e)
												);
											})
										);
									}),
									(e.prototype.slidesTo3D = function (e) {
										for (
											var t = this,
												n = d.SlideOptions.Ins.options[e.appliedOptionIndex],
												r = [],
												i = e.polygon,
												o = function (n) {
													e.updatePoly(i);
													var o = a.expandOffsets(e, d.ccTypeEnum.Slide, {
														trackIndex: n,
													});
													e.updatePoly(i.parallelPoly(o, !1));
													var s = e.sashes.filter(function (e) {
														return e.trackIndex === n;
													});
													s.forEach(function (e) {
														(e.polygon.edDock.docks = []), e.updatePoly();
													}),
														a.markSlideProfile(e);
													var l = e.pushOpenToward,
														h = s.map(function (n) {
															var r = t.sashTo3D(n);
															return (
																t.pushActionParams(n.pushSashHardwareManager, n.polygon, r),
																e.asPtDoor &&
																	n.pushSashHardwareManager.openDirection ===
																		f.OpenDirection.None &&
																	(r.isOutward = l === f.OpenToward.Outward),
																(r.movex = e.expandHorizontally ? t.slideMovement(n, e) : 0),
																(r.movey = e.expandHorizontally ? 0 : t.slideMovement(n, e)),
																(r.pathWay = n.trackIndex),
																r
															);
														});
													r.push(h);
												},
												a = this,
												s = 0;
											s < n.tracksCount;
											s++
										)
											o(s);
										var l = this.generateTrack(e),
											h = e.guards.map(function (e) {
												return t.guardSashTo3D(e);
											}),
											c = e.thefts.map(function (e) {
												return t.theftTo3D(e);
											});
										return {
											slideLeafs: r,
											guardSashes: h,
											thefts: c,
											slidePathWayUp: l.up,
											slidePathWayDown: l.down,
											type: e.sashAssignWay,
											asPtDoor: e.asPtDoor,
										};
									}),
									(e.prototype.theftTo3D = function (e) {
										var t = this.expandOffsets(e, d.ccTypeEnum.AntiTheft);
										e.updatePoly(e.polygon.parallelPoly(t, !1));
										var n = this.barsTo3d(e.frameManager.bars, e.polygon, d.ccTypeEnum.AntiTheft),
											r = e.shutManager.bars.map(function (e) {
												var t = e.polygon.mulShape;
												return {
													profileId: d.ccTypeEnum.antitheftMullion,
													isCenter: !0,
													startPt: _.Ins.point(t.start),
													endPt: _.Ins.point(t.end),
												};
											}),
											i = {
												axis: {
													x: 0,
													y: 0,
												},
												axisArrow: [],
											};
										if (!e.withSash && e.openable) {
											var o = d.EdgeFinder.Instance.findIndex(d.Direction.Down, e.polygon),
												a = e.polygon.edge(o),
												s = _.Ins.point(a.start),
												l = _.Ins.point(a.end);
											(i.axis = _.Ins.point(a.middle())),
												(i.axisArrow = [
													{
														x: s.x - l.x,
														y: s.y - l.y,
													},
												]);
										}
										return {
											closeObject: {
												bars: n,
											},
											securityBoxArray: r,
											actionInfo: i,
										};
									}),
									(e.prototype.foldTo3D = function (e) {
										var t = e.polygon.box;
										return {
											posLD: _.Ins.point(l.default.point(t.xmin, t.ymax)),
											posLU: _.Ins.point(l.default.point(t.xmin, t.ymin)),
											posRD: _.Ins.point(l.default.point(t.xmax, t.ymax)),
											posRU: _.Ins.point(l.default.point(t.xmax, t.ymin)),
											leftCount: e.leftCount,
											rightCount: e.rightCount,
											isOut: e.openToward === f.OpenToward.Outward,
											horizontally: e.expandHorizontally,
											sideSlide: e.sideSlide,
										};
									}),
									(e.prototype.slideMovement = function (e, t) {
										if (e.isFixed) return 0;
										var n = t.polygon.box,
											r = t.expandHorizontally,
											i = e.hardwareManager.openDirection;
										if (r) {
											var o = e.polygon.box;
											return i === f.OpenDirection.None
												? 0
												: (i === f.OpenDirection.Left ? -(o.xmin - n.xmin) : n.xmax - o.xmax) / 1e3;
										}
										return this.slidableMovement(e, i, r);
									}),
									(e.prototype.slidableMovement = function (e, t, n) {
										void 0 === n && (n = !0);
										var r = e.polygon.box,
											i = n ? r.xmax - r.xmin : r.ymax - r.ymin;
										return t === f.OpenDirection.None
											? 0
											: (i / 1e3) *
													((n && t === f.OpenDirection.Left) || (!n && t === f.OpenDirection.Down)
														? -1
														: 1);
									}),
									(e.prototype.pushSashTo3D = function (e) {
										var t = this.expandOffsets(
												e,
												e.type === g.ShapeType.Sash || e.type === g.ShapeType.KfcSash
													? d.ccTypeEnum.Sash
													: d.ccTypeEnum.Screen,
											),
											n = e.polygon.parallelPoly(t, !1);
										return (
											(n.edDock.docks = []),
											e.updatePoly(n),
											e instanceof g.KfcSash && this.markKfcProfile(e),
											this.pushableSashTo3D(e)
										);
									}),
									(e.prototype.turningFrameTo3D = function (e) {
										var t = e instanceof g.Area,
											n = this.expandOffsets(
												e,
												t ? d.ccTypeEnum.turningFrame : d.ccTypeEnum.sashTurningFrame,
											);
										return {
											closeObject: {
												bars: e.polygon
													.clone()
													.parallelPoly(n, !1)
													.edges.map(function (e) {
														return {
															startPt: _.Ins.point(e.start),
															endPt: _.Ins.point(e.end),
															startAngle: 45,
															endAngle: 45,
														};
													}),
											},
										};
									}),
									(e.prototype.pushActionParams = function (e, t, n) {
										var r = e.hingeEdge;
										r || (r = e.edgeRotateBasedByOpenDirection());
										var i = r,
											o = i.middle(),
											a = _.Ins.point(i.start),
											s = _.Ins.point(i.end),
											h = o,
											c = [
												{
													x: a.x - s.x,
													y: a.y - s.y,
												},
											],
											u = -1,
											p = e.openDirection;
										if (
											(p.endsWith('with_up')
												? (u = d.EdgeFinder.Instance.findIndex(d.Direction.Down, t))
												: p.endsWith('with_down') &&
												  (u = d.EdgeFinder.Instance.findIndex(d.Direction.Up, t)),
											-1 !== u)
										) {
											var g = t.edge(u),
												y = _.Ins.point(g.start),
												m = _.Ins.point(g.end);
											(h = l.default
												.line(g.start, g.end)
												.intersect(l.default.line(i.start, i.end))[0]),
												c.push({
													x: y.x - m.x,
													y: y.y - m.y,
												});
										}
										if (
											e.openDirection !== f.OpenDirection.None &&
											((n.isOutward = e.openToward === f.OpenToward.Outward),
											(n.axis = _.Ins.point(h)),
											(n.axisArrow = c),
											[
												f.OpenDirection.Up_Rotate,
												f.OpenDirection.Down_Rotate,
												f.OpenDirection.Left_Rotate,
												f.OpenDirection.Right_Rotate,
											].some(function (t) {
												return e.openDirection === t;
											}))
										) {
											var v = e.sash.polygon.box,
												w = v.center;
											if (
												e.pivotAtSide &&
												(e.openDirection === f.OpenDirection.Left_Rotate ||
													e.openDirection === f.OpenDirection.Right_Rotate)
											) {
												var b = e.openDirection === f.OpenDirection.Left_Rotate,
													S = (v.xmax - v.xmin) / 4;
												w = l.default.point(b ? v.xmin + S : v.xmax - S, w.y);
											}
											(n.axis = _.Ins.point(w)), (n.axisArrow = []);
										}
									}),
									(e.prototype.pushableSashTo3D = function (e) {
										var t = this.sashTo3D(e);
										return (
											this.pushActionParams(e.hardwareManager, e.polygon, t),
											e instanceof g.PushSash && (t.movex = this.slidableMovement(e, e.slide)),
											t
										);
									}),
									(e.prototype.hardwareToData = function (e) {
										return e.hardwares
											.filter(function (e) {
												return !e.hidden;
											})
											.map(function (e) {
												var t = e.hardwareShapeLength,
													n = _.Ins.vector(e.hardwareShapeDirection()),
													r = {
														type: e.hardwareShape,
														direction: n,
														length: t,
													};
												return Object.assign(r, _.Ins.point(e.position));
											});
									}),
									(e.prototype.sashTo3D = function (e) {
										var t = this,
											n = e.polygon,
											r = {
												sashNumber: e.sashNumber,
												sashAssignWay: this.assignWayOfSash(e),
											},
											i = this.barsTo3d(e.frameManager.bars, n, void 0, r);
										i.forEach(function (t) {
											e.type !== g.ShapeType.KfcSash &&
												(t.profileId =
													e.type === g.ShapeType.Screen ? d.ccTypeEnum.Screen : d.ccTypeEnum.Sash);
										});
										var o = e.mulManager.bars.map(function (n) {
												var i = t.mulBarTo3d(n);
												return (
													(i.profileId =
														e.type === g.ShapeType.Screen
															? d.ccTypeEnum.screenMullion
															: d.ccTypeEnum.sashMullion),
													Object.assign(i, r),
													i
												);
											}),
											a = e.mulManager.glasses
												.filter(function (e) {
													return e instanceof g.Glass;
												})
												.map(function (n) {
													return t.areaTo3D(n, e, r);
												}),
											s = e.mulManager.glasses
												.filter(function (e) {
													return e instanceof g.ScreenFiller;
												})
												.map(function (n) {
													return t.areaTo3D(n, e, r);
												}),
											l = e.mulManager.glasses
												.filter(function (e) {
													return e instanceof g.Shade;
												})
												.map(function (n) {
													var i = n,
														o = t.areaTo3D(n, e, r);
													return Object.assign(o, {
														padding: 0.001 * i.padding,
														shadeWidth: 0.001 * i.mulManager.width,
														gap: 0.001 * i.gap,
													});
												}),
											h = e.mulManager.glasses
												.filter(function (e) {
													return e instanceof g.Panel;
												})
												.map(function (n) {
													return t.areaTo3D(n, e, r);
												}),
											c = !1,
											u = 80;
										return (
											e instanceof g.PushSash
												? ((c = e.isDoor), (u = e.openDegree))
												: e instanceof g.KfcSash && (c = !0),
											{
												closeObject: {
													bars: i,
												},
												mullions: o,
												glass: a,
												flyScreen: s,
												shade: l,
												panel: h,
												hardwares: this.hardwareToData(e.hardwareManager),
												openDirection: e.hardwareManager.openDirection,
												isDoor: c,
												openDegree: u,
											}
										);
									}),
									(e.prototype.guardSashTo3D = function (e) {
										var t = this,
											n = e.polygon,
											r = {
												sashNumber: e.sashNumber,
												sashAssignWay: this.assignWayOfSash(e),
											},
											i = this.barsTo3d(e.frameManager.bars, n, void 0, r);
										return (
											i.forEach(function (e) {
												return (e.profileId = d.ccTypeEnum.GuardSash);
											}),
											{
												closeObject: {
													bars: i,
												},
												glass: e.mulManager.glasses
													.filter(function (e) {
														return e instanceof g.Glass;
													})
													.map(function (n) {
														return t.areaTo3D(n, e, r);
													}),
												openDirection: f.OpenDirection.None,
												isDoor: !1,
											}
										);
									}),
									(e.prototype.areaTo3D = function (e, t, n, r) {
										var i,
											o,
											a = this,
											s = e instanceof g.ScreenFiller,
											l = !0;
										t instanceof g.Frame
											? ((i = s ? d.ccTypeEnum.fixedNet : d.ccTypeEnum.fixedGlass),
											  (o = s ? d.ccTypeEnum.fixedNetBead : d.ccTypeEnum.fixedBead))
											: ((i = s ? d.ccTypeEnum.screenNet : d.ccTypeEnum.sashGlass),
											  (l = s ? this.usage.screenBead : this.usage.sashBead),
											  (o = s ? d.ccTypeEnum.screenBead : d.ccTypeEnum.sashBead));
										var h = e.polygon,
											c = {
												pts: [],
												ptBulges: [],
												opts: [],
												optBulges: [],
												holes: [],
												closeObject: {
													bars: [],
												},
												decBars: [],
												decPoly: [],
												withShade: !1,
											},
											u = h.edges;
										(c.opts = u.map(function (e) {
											return _.Ins.point(e.start);
										})),
											(c.optBulges = u.map(function (e) {
												return _.Ins.edgeBulge(e);
											}));
										var p,
											f = this.expandOffsets(e, i),
											y = h.parallelPoly(f, !1),
											m = y.edges;
										if (
											((c.pts = m.map(function (e) {
												return _.Ins.point(e.start);
											})),
											(c.ptBulges = m.map(function (e) {
												return _.Ins.edgeBulge(e);
											})),
											e instanceof g.Glass &&
												((c.holes = e.holes.map(function (e) {
													return _.Ins.polygon(e.holeShape()[0]);
												})),
												(c.withShade = e.withShade)),
											l && e.bead)
										) {
											var v = this.expandOffsets(e, o),
												w = h;
											try {
												w = h.parallelPoly(v, !1);
											} catch (e) {
												if (-1 === e.message.indexOf('invalid polygon')) throw e;
											}
											var b = new g.Area(t, w);
											(b.bead = new g.Bead(b)),
												(p = b.bead.polygon),
												(c.closeObject.bars = this.barsTo3d(
													b.bead.frameManager.bars,
													b.bead.polygon,
													o,
													n,
												)),
												b.remove(),
												b.recycle(!0);
										}
										r && r(y, p);
										var S = e.host;
										if (S instanceof g.Frame || S instanceof g.Sash) {
											var P = S.mulManager.decorationBarManager.getDecorationBar(e.polygon.polyId);
											if (P) {
												var x = p || y;
												(P.decorationBar.hostPoly = x),
													(c.decBars = P.decorationBar.split().map(function (e) {
														return a.decorationPolygonTo3d(e);
													})),
													(c.decPoly = _.Ins.polygon(x));
											}
										}
										return c;
									}),
									(e.prototype.assignWayOfSash = function (e) {
										var t = e.parent;
										return t instanceof g.Slide || t instanceof g.Fold || t instanceof g.DoubleSash
											? t.sashAssignWay
											: e instanceof g.PushSash
											? e.sashAssignWay
											: '';
									}),
									(e.prototype.barsTo3d = function (e, t, n, i) {
										var o = this;
										void 0 === i && (i = {});
										var a = t.edges,
											s = [];
										return (
											e.forEach(function (e) {
												var l,
													h,
													c = e.polygon.edges,
													u = e.polygon.mulShape;
												if (
													((l = c.findIndex(function (e) {
														return u.contains(e.middle());
													})),
													(h = a.findIndex(function (e) {
														return u.contains(e.middle());
													})),
													-1 === l)
												)
													return !1;
												var p = o.barTo3d(e, l);
												p.profileId =
													n ||
													o.shapeTypeToCcTypeEnum(o.isMarkedProfile(e.type) ? e.type : e.where);
												var f = o.containerOfShape(e);
												f &&
													((p.startProfile = o.dockProfile(e.epDock.stDock, f)),
													(p.endProfile = o.dockProfile(e.epDock.etDock, f)));
												var g = d.EdgeFinder.Instance.findDirection(t, h);
												g === d.Direction.Up
													? (g = d.Direction.Down)
													: g === d.Direction.Down && (g = d.Direction.Up),
													Object.assign(
														p.attrs,
														r(
															{
																direction: g,
															},
															i,
														),
													),
													s.push(p);
											}),
											s.filter(function (e) {
												return e;
											})
										);
									}),
									(e.prototype.segmentBarTo3d = function (e, t) {
										var n = this.flattenEdges(e.polygon.edges, t),
											r = this.edgeAngle(
												l.default.vector(n.prevEdge.end, n.prevEdge.start),
												l.default.vector(n.currEdge.start, n.currEdge.end),
											),
											i = this.edgeAngle(
												l.default.vector(n.currEdge.end, n.currEdge.start),
												l.default.vector(n.nextEdge.start, n.nextEdge.end),
											);
										return {
											startPt: _.Ins.point(n.currEdge.start),
											endPt: _.Ins.point(n.currEdge.end),
											startAngle: r,
											endAngle: i,
										};
									}),
									(e.prototype.arcToBuldge = function (e, t, n, r, i) {
										i && n >= r ? (n -= 2 * Math.PI) : !i && r >= n && (r -= 2 * Math.PI),
											e.x,
											Math.cos(n),
											e.y,
											Math.sin(n),
											e.x,
											Math.cos(r),
											e.y,
											Math.sin(r);
										var o = r - n;
										return -Math.tan(o / 4);
									}),
									(e.prototype.arcBarTo3d = function (e, t) {
										var n = e.polygon.mulShape;
										if (n.start.equalTo(n.end)) return this.circleBarTo3d(e);
										var r = this.flattenEdges(e.polygon.edges, t),
											i = n.start,
											o = n.end,
											a = r.oppoEdge.end,
											s = r.oppoEdge.start,
											h = this.arcToBuldge(
												n.center,
												n.r.valueOf(),
												n.startAngle,
												n.endAngle,
												n.counterClockwise,
											),
											c = i;
										l.default.line(n.center, i).intersect(r.oppoEdge).length > 0 &&
											(c = n.center.translate(
												l.default.vector(n.center, a).normalize().multiply(n.r.valueOf()),
											));
										var u = o;
										return (
											l.default.line(n.center, o).intersect(r.oppoEdge).length > 0 &&
												(u = n.center.translate(
													l.default.vector(n.center, s).normalize().multiply(n.r.valueOf()),
												)),
											{
												startPt: _.Ins.point(r.currEdge.start),
												endPt: _.Ins.point(r.currEdge.end),
												arcCenter: _.Ins.point(n.center),
												arcHeight: this.arcHeight(n),
												startOutPt: _.Ins.point(i),
												endOutPt: _.Ins.point(o),
												startInPt: _.Ins.point(a),
												endInPt: _.Ins.point(s),
												startOutRealPt: _.Ins.point(c),
												endOutRealPt: _.Ins.point(u),
												buldge: h,
											}
										);
									}),
									(e.prototype.barTo3d = function (e, t) {
										var n = {
											profileId: '0',
											buldge: void 0,
											startPt: void 0,
											endPt: void 0,
											startAngle: void 0,
											endAngle: void 0,
											arcCenter: void 0,
											arcHeight: void 0,
											startOutPt: void 0,
											endOutPt: void 0,
											startInPt: void 0,
											endInPt: void 0,
											startOutRealPt: void 0,
											endOutRealPt: void 0,
											startProfile: void 0,
											endProfile: void 0,
											attrs: {
												type: this.slideCcBar.isSlideProfile(e.type) ? e.type : e.where,
												direction: void 0,
											},
										};
										return Object.assign(
											n,
											e.polygon.mulShape instanceof l.default.Arc
												? this.arcBarTo3d(e, t)
												: this.segmentBarTo3d(e, t),
										);
									}),
									(e.prototype.circleBarTo3d = function (e) {
										return {
											arcCenter: _.Ins.point(e.polygon.mulShape.center),
											arcRadius: 0.001 * e.polygon.mulShape.r.valueOf(),
										};
									}),
									(e.prototype.mulBarTo3d = function (e) {
										var t = this.slideCcBar.isSlideProfile(e.type) ? e.type : e.where,
											n = {
												profileId: this.shapeTypeToCcTypeEnum(t),
												opts: void 0,
												startPt: void 0,
												endPt: void 0,
												arcHeight: void 0,
												arcCenterPt: void 0,
												startOutPt: void 0,
												endOutPt: void 0,
												startInPt: void 0,
												endInPt: void 0,
												startOutRealPt: void 0,
												endOutRealPt: void 0,
												startProfile: void 0,
												endProfile: void 0,
												attrs: {
													type: t,
												},
											};
										return Object.assign(
											n,
											e.polygon.mulShape instanceof l.default.Arc
												? this.arcMulBarTo3d(e)
												: this.segmentMulBarTo3d(e),
										);
									}),
									(e.prototype.arcMulBarTo3d = function (e) {
										var t = e.polygon.mulShape;
										if (t.start.equalTo(t.end)) return this.circleBarTo3d(e);
										var n = this.segmentMulBarTo3d(e),
											r = this.arcHeight(t),
											i = e.polygon.edges.filter(function (e) {
												return e instanceof l.default.Arc;
											});
										2 !== i.length && console.error('edges count of the bar is not 2'),
											i.sort(function (e, t) {
												return r > 0
													? e.r.valueOf() - t.r.valueOf()
													: t.r.valueOf() - e.r.valueOf();
											});
										var o = i[0],
											a = i[1];
										t.counterClockwise !== a.counterClockwise &&
											((o = o.reverse()), (a = a.reverse()));
										var s,
											h,
											c = a.start,
											u = a.end,
											p = o.end,
											f = o.start;
										if (l.default.line(a.center, c).intersect(o).length > 0) {
											var d = l.default.vector(a.center, p);
											s = a.center.translate(d.normalize().multiply(a.r.valueOf()));
										} else s = c;
										if (l.default.line(a.center, u).intersect(o).length > 0) {
											var g = l.default.vector(a.center, f);
											h = a.center.translate(g.normalize().multiply(a.r.valueOf()));
										} else h = u;
										return (
											(r = this.arcHeight(l.default.Arc.arcSE(a.center, s, h, a.counterClockwise))),
											Object.assign(n, {
												arcCenterPt: _.Ins.point(a.center),
												arcHeight: r,
												startOutPt: _.Ins.point(c),
												endOutPt: _.Ins.point(u),
												startInPt: _.Ins.point(p),
												endInPt: _.Ins.point(f),
												startOutRealPt: _.Ins.point(s),
												endOutRealPt: _.Ins.point(h),
											})
										);
									}),
									(e.prototype.containerOfShape = function (e) {
										var t = e.parent;
										if (t) {
											for (
												var n;
												!(
													(n = t) instanceof g.Frame ||
													n instanceof g.Sash ||
													n instanceof g.Bead ||
													n instanceof g.AntiTheft
												);

											)
												if (!(t = t.parent)) return;
											return t;
										}
									}),
									(e.prototype.dockProfile = function (e, t) {
										t instanceof g.Bead && (t = t.parent.parent);
										var n = e.dockBar(t),
											r = n ? n.type : void 0;
										return r === g.ShapeType.SideTrack
											? d.ccTypeEnum.SideTrack
											: r === g.ShapeType.UpTrack
											? d.ccTypeEnum.UpTrack
											: r === g.ShapeType.FixedUpTrack
											? d.ccTypeEnum.FixedUpTrack
											: r === g.ShapeType.DownTrack
											? d.ccTypeEnum.DownTrack
											: r === g.ShapeType.FixedDownTrack
											? d.ccTypeEnum.FixedDownTrack
											: r === g.ShapeType.UpDownTrack
											? d.ccTypeEnum.UpDownTrack
											: e.type === p.DockType.Frame && t instanceof g.Frame
											? d.ccTypeEnum.frame
											: e.type === p.DockType.Mullion && t instanceof g.Frame
											? d.ccTypeEnum.mullion
											: e.type === p.DockType.Frame && t instanceof g.Sash
											? t.type === g.ShapeType.Screen
												? d.ccTypeEnum.Screen
												: d.ccTypeEnum.Sash
											: e.type === p.DockType.Mullion && t instanceof g.Sash
											? t.type === g.ShapeType.Screen
												? d.ccTypeEnum.screenMullion
												: d.ccTypeEnum.sashMullion
											: void 0;
									}),
									(e.prototype.decorationPolygonTo3d = function (e) {
										var t = this;
										return {
											decBarEdges: e.edges.map(function (e) {
												var n = {
													startPt: _.Ins.point(e.start),
													endPt: _.Ins.point(e.end),
													arcHeight: 0,
													arcCenter: _.Ins.point(l.default.point(0, 0)),
													arcCCW: !1,
												};
												return (
													e instanceof l.default.Arc &&
														((n.arcCenter = _.Ins.point(e.center)),
														(n.arcHeight = t.arcHeight(e)),
														(n.arcCCW = e.counterClockwise)),
													n
												);
											}),
										};
									}),
									(e.prototype.segmentMulBarTo3d = function (e) {
										var t,
											n,
											r = this.containerOfShape(e);
										r &&
											((t = this.dockProfile(e.epDock.stDock, r)),
											(n = this.dockProfile(e.epDock.etDock, r)));
										var i = e.polygon.mulShape;
										return {
											startProfile: t,
											endProfile: n,
											opts: e.polygon.edges.map(function (e) {
												return _.Ins.point(e.start);
											}),
											startPt: _.Ins.point(i.start),
											endPt: _.Ins.point(i.end),
											isVertical: l.default.Utils.EQ_0(i.start.x - i.end.x),
											isHorizontal: l.default.Utils.EQ_0(i.start.y - i.end.y),
										};
									}),
									(e.prototype.edgeAngle = function (e, t) {
										var n = (180 * e.angleTo(t)) / Math.PI,
											r = (180 * t.angleTo(e)) / Math.PI;
										return Math.min(n, r);
									}),
									(e.prototype.arcHeight = function (e) {
										return (
											((e.middle().leftTo(l.default.line(e.start, e.end)) ? 1 : -1) *
												e.chordHeight()) /
											1e3
										);
									}),
									(e.prototype.defaultProfileSize = function () {
										var e = {
											frame: 45,
											bead: 22,
											frameMullion: 32.4,
											sash: 67,
											screen: 67,
										};
										return new Map([
											[
												m.Sash,
												{
													frame: 59.5,
													bead: 24,
													frameMullion: 79.5,
													sash: 80.5,
													screen: 82.5,
												},
											],
											[
												m.Slide2,
												{
													frame: 32.4,
													bead: 22,
													frameMullion: 32.4,
													sash: 72,
													screen: 72,
												},
											],
											[
												m.Slide3,
												{
													frame: 32.4,
													bead: 22,
													frameMullion: 32.4,
													sash: 72,
													screen: 72,
												},
											],
											[
												m.AntiTheft,
												{
													frame: 45,
													bead: 22,
													frameMullion: 45,
													sash: 90,
													screen: 90,
													antiTheft: 25,
													antiTheftMullion: 30,
												},
											],
											[
												m.Sash2,
												{
													frame: 62,
													bead: 22,
													frameMullion: 84,
													sash: 80,
													screen: 86.5,
													antiTheftMullion: 30,
												},
											],
											[
												m.KFC,
												{
													frame: 44,
													bead: 17,
													frameMullion: 46,
													sash: 65,
													screen: 65,
													kfcWaist: 136,
													kfcSashUpBar: 65,
													kfcSashRightBar: 60,
													kfcSashDownBar: 120,
													kfcSashLeftBar: 60,
												},
											],
											[
												m.AntiTheft2,
												{
													frame: 56.5,
													bead: 20,
													frameMullion: 76,
													sash: 76.3,
													screen: 76.3,
													antiTheft: 57.5,
													antiTheftMullion: 28,
												},
											],
											[
												m.SashMullion,
												{
													frame: 50,
													bead: 23,
													frameMullion: 50,
													sash: 92,
													screen: 89,
													sashMullion: 88,
													screenMullion: 83,
												},
											],
											[
												m.ScreenMullion,
												{
													frame: 50,
													bead: 23,
													frameMullion: 50,
													sash: 92,
													screen: 89,
													sashMullion: 88,
													screenMullion: 83,
												},
											],
											[
												m.ChineseDecoration1,
												{
													frame: 68,
													bead: 19.8,
													frameMullion: 83.2,
													sash: 87.5,
													sashMullion: 85.4,
												},
											],
											[
												m.ChineseDecoration2,
												{
													frame: 53,
													bead: 25,
													frameMullion: 53,
													sash: 87.5,
													sashMullion: 87.5,
													screen: 88,
													screenMullion: 82,
												},
											],
											[m.Slide4, e],
											[m.Slide5, e],
											[m.Slide6, e],
											[m.Slide7, e],
										]).get(this.profileSeries);
									}),
									(e.prototype.defaultProfileUsage = function () {
										var e = new Map([
											[
												m.Sash2,
												{
													sashBead: !0,
													screenBead: !1,
												},
											],
											[
												m.KFC,
												{
													sashBead: !0,
												},
											],
										]).get(this.profileSeries);
										return Object.assign(
											{
												sashBead: !1,
												screenBead: !0,
											},
											e,
										);
									}),
									(e.prototype.defaultProfileInsertion = function () {
										var e = new Map([
												[
													m.AntiTheft,
													[
														{
															from: d.ccTypeEnum.fixedBead,
															offset: 4,
														},
														{
															from: d.ccTypeEnum.AntiTheft,
															offset: 5,
														},
													],
												],
												[
													m.Sash2,
													[
														{
															from: d.ccTypeEnum.fixedGlass,
															offset: 30,
														},
														{
															from: d.ccTypeEnum.Sash,
															offset: 25.5,
														},
														{
															from: d.ccTypeEnum.Screen,
															offset: 28,
														},
													],
												],
												[
													m.Slide2,
													[
														{
															from: d.ccTypeEnum.fixedBead,
															offset: 0,
														},
														{
															from: d.ccTypeEnum.Slide,
															offset: 0,
														},
													],
												],
												[
													m.Slide3,
													[
														{
															from: d.ccTypeEnum.fixedBead,
															offset: 0,
														},
														{
															from: d.ccTypeEnum.Slide,
															offset: 0,
														},
													],
												],
												[
													m.Slide7,
													[
														{
															from: d.ccTypeEnum.fixedBead,
															offset: 0,
														},
														{
															from: d.ccTypeEnum.Slide,
															offset: 24,
														},
													],
												],
												[
													m.KFC,
													[
														{
															from: d.ccTypeEnum.Sash,
															offset: 0,
														},
														{
															from: d.ccTypeEnum.fixedBead,
															offset: 0,
														},
														{
															from: d.ccTypeEnum.sashBead,
															offset: 0,
														},
													],
												],
												[
													m.AntiTheft2,
													[
														{
															from: d.ccTypeEnum.Sash,
															offset: -6,
														},
														{
															from: d.ccTypeEnum.Screen,
															offset: 15,
														},
														{
															from: d.ccTypeEnum.AntiTheft,
															offset: 25,
														},
													],
												],
												[
													m.SashMullion,
													[
														{
															from: d.ccTypeEnum.fixedBead,
															offset: 5,
														},
														{
															from: d.ccTypeEnum.Sash,
															offset: 6,
														},
														{
															from: d.ccTypeEnum.Screen,
															offset: 6,
														},
													],
												],
												[
													m.ScreenMullion,
													[
														{
															from: d.ccTypeEnum.fixedBead,
															offset: 5,
														},
														{
															from: d.ccTypeEnum.Sash,
															offset: 6,
														},
														{
															from: d.ccTypeEnum.Screen,
															offset: 6,
														},
													],
												],
												[
													m.ChineseDecoration1,
													[
														{
															from: d.ccTypeEnum.fixedBead,
															offset: 17,
														},
														{
															from: d.ccTypeEnum.Sash,
															offset: 20,
														},
													],
												],
												[
													m.ChineseDecoration2,
													[
														{
															from: d.ccTypeEnum.fixedBead,
															offset: 5,
														},
														{
															from: d.ccTypeEnum.Sash,
															offset: 5.5,
														},
														{
															from: d.ccTypeEnum.Screen,
															offset: 6,
														},
													],
												],
											]).get(this.profileSeries),
											t = [
												{
													from: d.ccTypeEnum.fixedGlass,
													offset: 11,
												},
												{
													from: d.ccTypeEnum.fixedBead,
													offset: 23,
												},
												{
													from: d.ccTypeEnum.Sash,
													offset: 25.5,
												},
												{
													from: d.ccTypeEnum.sashGlass,
													offset: 11,
												},
												{
													from: d.ccTypeEnum.sashBead,
													offset: 22.7,
												},
												{
													from: d.ccTypeEnum.Screen,
													offset: 27.2,
												},
												{
													from: d.ccTypeEnum.screenNet,
													offset: 20,
												},
												{
													from: d.ccTypeEnum.screenBead,
													offset: 22.7,
												},
											],
											n = t.slice();
										return e
											? (e.forEach(function (e) {
													var r = t.find(function (t) {
														return t.from === e.from && t.to === e.to;
													});
													r ? (r.offset = e.offset) : n.push(e);
											  }),
											  n)
											: n;
									}),
									(e.prototype.applyProfileSizes = function () {
										var e = this;
										(this.frm.frameManager.edgeWidth = this.frm.frameManager.allBars.map(function (
											t,
										) {
											return t.type === g.ShapeType.SideTrack && e.profileSizes.sideTrack
												? e.profileSizes.sideTrack
												: t.type === g.ShapeType.UpTrack && e.profileSizes.upTrack
												? e.profileSizes.upTrack
												: t.type === g.ShapeType.DownTrack && e.profileSizes.downTrack
												? e.profileSizes.downTrack
												: e.profileSizes.frame;
										})),
											(this.frm.mulManager.splitter.lineProfileSizes = this.frm.mulManager.bars.map(
												function (t) {
													return t.type === g.ShapeType.SideTrack && e.profileSizes.sideTrack
														? e.profileSizes.sideTrack
														: t.type === g.ShapeType.FixedUpTrack && e.profileSizes.fixedUpTrack
														? e.profileSizes.fixedUpTrack
														: t.type === g.ShapeType.FixedDownTrack && e.profileSizes.fixedDownTrack
														? e.profileSizes.fixedDownTrack
														: e.profileSizes.frameMullion;
												},
											)),
											(this.frm.profileSizeManager.bead = this.profileSizes.bead),
											this.allPushableSashes.forEach(function (t) {
												var n = t.frameManager.bars.map(function (n) {
													return n.type === g.ShapeType.KfcSashUpBar && e.profileSizes.kfcSashUpBar
														? e.profileSizes.kfcSashUpBar
														: n.type === g.ShapeType.KfcSashDownBar && e.profileSizes.kfcSashDownBar
														? e.profileSizes.kfcSashDownBar
														: n.type === g.ShapeType.KfcSashLeftBar && e.profileSizes.kfcSashLeftBar
														? e.profileSizes.kfcSashLeftBar
														: n.type === g.ShapeType.KfcSashRightBar &&
														  e.profileSizes.kfcSashRightBar
														? e.profileSizes.kfcSashRightBar
														: t.type === g.ShapeType.Screen && e.profileSizes.screen
														? e.profileSizes.screen
														: e.profileSizes.sash;
												});
												(t.frameManager.edgeWidth = n),
													(t.type !== g.ShapeType.KfcSash && t.type !== g.ShapeType.Sash) ||
													!e.profileSizes.sashMullion
														? t.type === g.ShapeType.Screen &&
														  e.profileSizes.screenMullion &&
														  (t.mulManager.allProfileSize = e.profileSizes.screenMullion)
														: (t.mulManager.allProfileSize = e.profileSizes.sashMullion);
											}),
											this.frm.sashManager.slides.forEach(function (t) {
												t.sashes.forEach(function (t) {
													var n = Array.isArray(e.profileSizes.sash)
														? e.profileSizes.sash[0]
														: e.profileSizes.sash;
													t.type === g.ShapeType.Screen && (n = e.profileSizes.screen),
														(t.frameManager.edgeWidth = t.frameManager.bars.map(function (t) {
															if (
																t.type === g.ShapeType.SlideSashUpBar &&
																e.profileSizes.slideSashUpBar
															)
																return e.profileSizes.slideSashUpBar;
															if (
																t.type === g.ShapeType.SlideSashDownBar &&
																e.profileSizes.slideSashDownBar
															)
																return e.profileSizes.slideSashDownBar;
															if (
																t.type === g.ShapeType.SlideSashCollisionLeftBar &&
																e.profileSizes.slideSashCollisionLeftBar
															)
																return e.profileSizes.slideSashCollisionLeftBar;
															if (
																t.type === g.ShapeType.SlideSashCollisionRightBar &&
																e.profileSizes.slideSashCollisionRightBar
															)
																return e.profileSizes.slideSashCollisionRightBar;
															if (
																t.type === g.ShapeType.SlideSashEdgeBar &&
																e.profileSizes.slideSashEdgeBar
															)
																return e.profileSizes.slideSashEdgeBar;
															if (
																t.type === g.ShapeType.SlideSashSingleBar &&
																e.profileSizes.slideSashSingleBar
															)
																return e.profileSizes.slideSashSingleBar;
															if (
																t.type === g.ShapeType.SlideSashDoubleBar &&
																e.profileSizes.slideSashDoubleBar
															)
																return e.profileSizes.slideSashDoubleBar;
															if (
																t.type === g.ShapeType.SlideSashNoneBar &&
																e.profileSizes.slideSashNoneBar
															)
																return e.profileSizes.slideSashNoneBar;
															if (!n) throw new Error('Sash profile size not found.');
															return n;
														}));
												});
											}),
											(this.frm.profileSizeManager.kfcWaist = this.profileSizes.kfcWaist),
											(this.frm.profileSizeManager.antiTheft = this.profileSizes.antiTheft),
											(this.frm.profileSizeManager.antiTheftMullion =
												this.profileSizes.antiTheftMullion),
											this.frm.frameManager.recreated(this.frm.polygon);
									}),
									(e.prototype.matchProfileSeries = function () {
										if (
											this.frm.polygon instanceof u.KfcPolygon ||
											this.frm.sashManager.kfcSashes.length > 0 ||
											this.frm.sashManager.doubleKfcSashes.length > 0
										)
											return m.KFC;
										if (this.hasChineseDecoration && this.glassPushSashExists(f.OpenToward.Outward))
											return this.frm.sashManager.sashes.filter(function (e) {
												return e.type === g.ShapeType.Screen;
											}).length > 0
												? m.ChineseDecoration2
												: m.ChineseDecoration1;
										if (this.frm.sashManager.folds.length > 0) return m.Fold;
										var e = this.frm.sashManager.slides;
										if (e.length > 0) {
											var t = d.SlideOptions.Ins.options[e[0].appliedOptionIndex].tracksCount;
											return 1 === t
												? m.Slide7
												: 2 === t
												? m.Slide2
												: 3 === t
												? m.Slide3
												: 4 === t
												? m.Slide4
												: 5 === t
												? m.Slide5
												: m.Slide6;
										}
										return this.frm.sashManager.thefts.length > 0
											? this.glassPushSashExists(f.OpenToward.Inward) ||
											  this.screenPushSashExists(f.OpenToward.Outward)
												? m.AntiTheft2
												: m.AntiTheft
											: this.allPushableSashes.filter(function (e) {
													return e.mulManager.bars.length > 0;
											  }).length > 0
											? this.allPushableSashes.filter(function (e) {
													return (
														e.type === g.ShapeType.Sash &&
														e.hardwareManager.openToward === f.OpenToward.Outward
													);
											  }).length > 0
												? m.SashMullion
												: m.ScreenMullion
											: o(
													this.frm.sashManager.sashes,
													this.frm.sashManager.doubleSashes
														.map(function (e) {
															return e.sashes;
														})
														.flat(),
											  ).some(function (e) {
													return (
														e.type === g.ShapeType.Sash &&
														e.hardwareManager.openToward === f.OpenToward.Inward
													);
											  })
											? m.Sash2
											: m.Sash;
									}),
									(e.prototype.glassPushSashExists = function (e) {
										return this.frm.sashManager.sashes
											.filter(function (e) {
												return e.type === g.ShapeType.Sash;
											})
											.some(function (t) {
												return t.hardwareManager.openToward === e;
											});
									}),
									(e.prototype.screenPushSashExists = function (e) {
										return this.frm.sashManager.sashes
											.filter(function (e) {
												return e.type === g.ShapeType.Screen;
											})
											.some(function (t) {
												return t.hardwareManager.openToward === e;
											});
									}),
									Object.defineProperty(e.prototype, 'hasChineseDecoration', {
										get: function () {
											return o(
												[this.frm.mulManager],
												this.frm.sashManager.sashes.map(function (e) {
													return e.mulManager;
												}),
											).some(function (e) {
												return Array.from(e.decorationBarManager.decorationBars.values())
													.map(function (e) {
														return e.decorationBar._type;
													})
													.some(function (e) {
														return (
															e === g.DecorationBarType.decorationChinese ||
															e === g.DecorationBarType.decorationChinese2
														);
													});
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.thicknessOfSeries = function (e) {
										switch (e) {
											case m.Slide2:
												return 90;
											case m.Slide3:
												return 140;
											case m.Slide7:
												return 28;
											case m.AntiTheft:
												return 146;
											case m.Fold:
												return 74;
											case m.Sash2:
												return 130;
											case m.ChineseDecoration1:
												return 75;
											default:
												return 130;
										}
									}),
									(e.prototype.flattenEdges = function (e, t) {
										var n = e[t];
										return {
											prevEdge: e[(t + e.length - 1) % e.length],
											currEdge: n,
											nextEdge: e[(t + 1) % e.length],
											oppoEdge: e[(t + 2) % e.length],
										};
									}),
									e
								);
							})(),
							_ = (function () {
								function e() {
									this.canvasHeight = 0;
								}
								return (
									Object.defineProperty(e, 'Ins', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.polygon = function (t, n) {
										void 0 === n && (n = !0);
										var r = [],
											i = t.circlePolygon();
										return (
											(i ? [i.toArc()] : t.edges).forEach(function (e) {
												if (e instanceof l.default.Arc) {
													var t = p.Utils.splitArcToPoints(e, 50);
													t.slice(0, t.length - 1).forEach(function (e) {
														return r.push(e);
													});
												} else r.push(e.start);
											}),
											r.map(function (t) {
												return e.Ins.point(t, n);
											})
										);
									}),
									(e.prototype.point = function (e, t) {
										return (
											void 0 === t && (t = !0),
											{
												x: 0.001 * e.x,
												y: 0.001 * (t ? this.canvasHeight - e.y : e.y),
											}
										);
									}),
									(e.prototype.vector = function (e) {
										return {
											x: e.x,
											y: -e.y,
										};
									}),
									(e.prototype.dim = function (t) {
										return {
											startPt: e.Ins.point(t.from),
											endPt: e.Ins.point(t.to),
										};
									}),
									(e.prototype.edgeBulge = function (e) {
										if (e instanceof l.default.Segment) return 0;
										var t = e.counterClockwise ? -1 : 1;
										return (
											e.counterClockwise || (e = e.reverse()),
											(e = e.rotate(-e.startAngle, e.center)),
											Math.tan(e.endAngle / 4) * t
										);
									}),
									e
								);
							})();
						!(function (e) {
							(e[(e.Sash = 1)] = 'Sash'),
								(e[(e.Slide2 = 2)] = 'Slide2'),
								(e[(e.Slide3 = 3)] = 'Slide3'),
								(e[(e.AntiTheft = 4)] = 'AntiTheft'),
								(e[(e.Fold = 5)] = 'Fold'),
								(e[(e.Sash2 = 6)] = 'Sash2'),
								(e[(e.KFC = 7)] = 'KFC'),
								(e[(e.AntiTheft2 = 8)] = 'AntiTheft2'),
								(e[(e.SashMullion = 9)] = 'SashMullion'),
								(e[(e.ScreenMullion = 10)] = 'ScreenMullion'),
								(e[(e.ChineseDecoration1 = 11)] = 'ChineseDecoration1'),
								(e[(e.ChineseDecoration2 = 12)] = 'ChineseDecoration2'),
								(e[(e.Slide4 = 13)] = 'Slide4'),
								(e[(e.Slide5 = 14)] = 'Slide5'),
								(e[(e.Slide6 = 15)] = 'Slide6'),
								(e[(e.Slide7 = 16)] = 'Slide7');
						})(m || (m = {}));
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Json2d = void 0);
						var i = r(n(0)),
							o = n(1),
							a = n(13),
							s = (function () {
								function e(e) {
									(this.shapeManager = e), (this.pointMatrix = new i.default.Matrix());
								}
								return (
									(e.prototype.serialize = function () {
										var e = this,
											t = this.shapeManager.shapem.map(function (t) {
												if (t.gshape && t.gshape.parent) {
													var n = t.gshape.parent.getTransform().m;
													e.pointMatrix = i.default.matrix(n[0], n[1], n[2], n[3], n[4], n[5]);
												}
												var r = {
													frame: t.frameManager.bars.map(function (t) {
														return e.barToData(t);
													}),
													mullions: t.mulManager.bars.map(function (t) {
														return e.barToData(t);
													}),
													beads: t.mulManager.glasses
														.filter(function (e) {
															return e.bead;
														})
														.map(function (t) {
															return t.bead.frameManager.bars.map(function (t) {
																return e.barToData(t);
															});
														}),
													glasses: t.mulManager.glasses
														.filter(function (e) {
															return e.bead;
														})
														.map(function (t) {
															return t.bead.frameManager.innerPoly[0].edges.map(function (t) {
																return e.edgeToData(t);
															});
														}),
													sashes: t.sashManager.allSashes.map(function (t) {
														return {
															type: t.type,
															frame: t.frameManager.bars.map(function (t) {
																return e.barToData(t);
															}),
															mullions: t.mulManager.bars.map(function (t) {
																return e.barToData(t);
															}),
															beads: t.mulManager.glasses
																.filter(function (e) {
																	return e.bead;
																})
																.map(function (t) {
																	return t.bead.frameManager.bars.map(function (t) {
																		return e.barToData(t);
																	});
																}),
															glasses: t.mulManager.glasses
																.filter(function (e) {
																	return e.bead;
																})
																.map(function (t) {
																	return t.bead.frameManager.innerPoly[0].edges.map(function (t) {
																		return e.edgeToData(t);
																	});
																}),
															hardware: e.hardwareToData(t.hardwareManager),
														};
													}),
												};
												return (e.pointMatrix = new i.default.Matrix()), r;
											}),
											n = this.shapeManager.walls.map(function (t) {
												return t.polygon.edges.map(function (t) {
													return e.edgeToData(t);
												});
											}),
											r = this.shapeManager.couples.map(function (t) {
												return e.coupleToData(t);
											});
										return {
											box: this.boxToData(this.shapeManager.shapeBox),
											main: t,
											walls: n,
											couples: r,
										};
									}),
									(e.prototype.coupleToData = function (e) {
										return {
											polygon: this.barToData(e),
											angle: e instanceof o.CornerJoiner ? e.skewAngle : 180,
										};
									}),
									(e.prototype.hardwareToData = function (e) {
										var t = this,
											n = {
												handle: void 0,
												hinges: [],
											};
										return (
											e instanceof a.PushSashHardwareManager || e instanceof a.FoldHardwareManager
												? e.handle instanceof o.HardwareOnFrame &&
												  (e.handle.edge && (n.handle = this.pointToData(e.handle.handlePosition)),
												  (n.hinges = e.hinges.map(function (e) {
														return t.pointToData(e.position);
												  })))
												: e instanceof a.SlideHardwareManager &&
												  e.locks.length > 0 &&
												  (n.handle = this.pointToData(e.locks[0].position)),
											n
										);
									}),
									(e.prototype.barToData = function (e) {
										var t = this;
										return e.polygon.edges.map(function (e) {
											return t.edgeToData(e);
										});
									}),
									(e.prototype.edgeToData = function (e) {
										return e instanceof i.default.Arc ? this.arcToData(e) : this.segmentToData(e);
									}),
									(e.prototype.segmentToData = function (e) {
										return {
											start: this.pointToData(e.start),
											end: this.pointToData(e.end),
										};
									}),
									(e.prototype.arcToData = function (e) {
										return {
											radius: e.r.valueOf(),
											center: this.pointToData(e.center),
											startAngle: e.startAngle,
											endAngle: e.endAngle,
											counterClockwise: e.counterClockwise,
										};
									}),
									(e.prototype.pointToData = function (e) {
										return {
											x: (e = e.clone().transform(this.pointMatrix)).x,
											y: e.y,
										};
									}),
									(e.prototype.boxToData = function (e) {
										return {
											xmin: e.xmin,
											xmax: e.xmax,
											ymin: e.ymin,
											ymax: e.ymax,
										};
									}),
									e
								);
							})();
						t.Json2d = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__assign) ||
								function () {
									return (r =
										Object.assign ||
										function (e) {
											for (var t, n = 1, r = arguments.length; n < r; n++)
												for (var i in (t = arguments[n]))
													Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
											return e;
										}).apply(this, arguments);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								},
							a =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.JsonCc = void 0);
						var l,
							h,
							c,
							u,
							p = s(n(0)),
							f = n(7),
							d = n(2),
							g = n(11),
							y = n(13),
							m = n(1),
							v = (function () {
								function e(e) {
									(this.view = e), (this.shapeManager = e.shapeManager);
								}
								return (
									(e.prototype.serialize = function () {
										var e = this;
										this.view.mometoManager.checkPoint(!0), this.alignToGround();
										var t = this.shapeManager.shapem.map(function (t) {
												return e.frameToData(t);
											}),
											n = this.shapeManager.couples.map(function (t) {
												return e.coupleToData(t);
											});
										if (
											(n.push.apply(n, o(this.freeConnectOfFrames())),
											this.view.mometoManager.isDirty && !this.view.shapeManager.isEmpty)
										) {
											this.view.mometoManager.checkPoint();
											var r = f.DrawParams.Ins.sashMullionFixedToSashBottom;
											(f.DrawParams.Ins.sashMullionFixedToSashBottom = !1),
												this.view.mometoManager.undo(),
												(f.DrawParams.Ins.sashMullionFixedToSashBottom = r);
										}
										return {
											FrameList: t,
											JoinBarList: n,
										};
									}),
									(e.prototype.freeConnectOfFrames = function () {
										var e,
											t,
											n,
											i,
											o,
											s,
											l,
											h,
											u = [],
											f = [],
											g = this.shapeManager.shapem;
										try {
											for (var y = a(g), m = y.next(); !m.done; m = y.next()) {
												var v = m.value;
												try {
													for (var w = ((n = void 0), a(g)), b = w.next(); !b.done; b = w.next()) {
														var S = b.value;
														if (v !== S) {
															var _ = v.polygon,
																P = S.polygon,
																x = _.edges,
																D = P.edges;
															try {
																for (
																	var T = ((o = void 0), a(x)), O = T.next();
																	!O.done;
																	O = T.next()
																) {
																	var M = O.value,
																		E = function (e) {
																			if (M instanceof p.default.Arc) return 'continue';
																			if (e instanceof p.default.Arc) return 'continue';
																			var t = d.Utils.roundSeg(M),
																				n = d.Utils.roundSeg(e),
																				i = t.intersect(n);
																			if (2 === i.length) {
																				var o = p.default.segment(i[0], i[1]);
																				if (
																					f.some(function (e) {
																						return e.contains(o.middle());
																					})
																				)
																					return 'continue';
																				f.push(o);
																				var a = d.Utils.isSegHorizontal(o),
																					s = [v, S];
																				s.sort(function (e, t) {
																					var n = e.polygon.box,
																						r = t.polygon.box;
																					return a
																						? n.center.x - r.center.x
																						: n.center.y - r.center.y;
																				});
																				var l = a
																						? {
																								UpGuidGroup: [s[0].id.toString()],
																								DownGuidGroup: [s[1].id.toString()],
																						  }
																						: {
																								LeftGuidGroup: [s[0].id.toString()],
																								RightGuidGroup: [s[1].id.toString()],
																						  },
																					h = r(
																						{
																							type: c.SeparationWithOutJoin,
																							CornerAngle: 0,
																							UpGuidGroup: [],
																							DownGuidGroup: [],
																							LeftGuidGroup: [],
																							RightGuidGroup: [],
																						},
																						I.segmentToData(o),
																					);
																				(h = Object.assign(h, l)), u.push(h);
																			}
																		},
																		I = this;
																	try {
																		for (
																			var C = ((l = void 0), a(D)), k = C.next();
																			!k.done;
																			k = C.next()
																		)
																			E(k.value);
																	} catch (e) {
																		l = {
																			error: e,
																		};
																	} finally {
																		try {
																			k && !k.done && (h = C.return) && h.call(C);
																		} finally {
																			if (l) throw l.error;
																		}
																	}
																}
															} catch (e) {
																o = {
																	error: e,
																};
															} finally {
																try {
																	O && !O.done && (s = T.return) && s.call(T);
																} finally {
																	if (o) throw o.error;
																}
															}
														}
													}
												} catch (e) {
													n = {
														error: e,
													};
												} finally {
													try {
														b && !b.done && (i = w.return) && i.call(w);
													} finally {
														if (n) throw n.error;
													}
												}
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												m && !m.done && (t = y.return) && t.call(y);
											} finally {
												if (e) throw e.error;
											}
										}
										return u;
									}),
									(e.prototype.coupleToData = function (e) {
										var t = e.polygon,
											n = this.connectedFrame(e, g.Direction.Up),
											i = this.connectedFrame(e, g.Direction.Down),
											o = this.connectedFrame(e, g.Direction.Left),
											a = this.connectedFrame(e, g.Direction.Right),
											s = !1;
										if (o) {
											var l = g.EdgeFinder.Instance.findIndex(g.Direction.Right, o.polygon);
											o.frameManager.allBars[l].virtual && (s = !0);
										}
										if (a) {
											var h = g.EdgeFinder.Instance.findIndex(g.Direction.Left, a.polygon);
											a.frameManager.allBars[h].virtual && (s = !0);
										}
										var u = c.Null;
										return (
											(u =
												e instanceof m.CornerJoiner
													? s
														? c.WithFrameCorner
														: c.WithOutFrameCorner
													: s
													? c.MiddleInFrame
													: c.SeparationWithJoin),
											r(
												{
													type: u,
													CornerAngle: e instanceof m.CornerJoiner ? e.skewAngle : 0,
													UpGuidGroup: n ? [n.id.toString()] : [],
													DownGuidGroup: i ? [i.id.toString()] : [],
													LeftGuidGroup: o ? [o.id.toString()] : [],
													RightGuidGroup: a ? [a.id.toString()] : [],
												},
												this.polygonToData(t),
											)
										);
									}),
									(e.prototype.connectedFrame = function (e, t) {
										var n = e.polygon,
											r = g.EdgeFinder.Instance.findIndex(t, n),
											i = new g.FrameUtil(this.view).getIntersectFrames(n.edge(r), void 0).pop();
										return i instanceof m.Frame ? i : void 0;
									}),
									(e.prototype.connectedFrameIds = function (e, t) {
										var n = e.polygon,
											r = g.EdgeFinder.Instance.findIndex(t, n);
										return new g.FrameUtil(this.view)
											.getIntersectFrames(n.edge(r), void 0)
											.map(function (e) {
												return e.id.toString();
											});
									}),
									(e.prototype.frameToData = function (e) {
										var t,
											n = this,
											r = e.polygon;
										if (r.isRectangle()) t = this.normalFrameBarToData(e);
										else if (r instanceof m.TrapezoidPoly && r.direction === g.Direction.Up)
											t = this.bewFrameBarToData(e, r);
										else if (r instanceof m.PeakPentagonPoly) t = this.trFrameBarToData(e, r);
										else if (r instanceof m.EarPolygon) {
											var i = !r.isVertical && !r.xFlip && !r.yFlip,
												o = !r.isVertical && r.xFlip && !r.yFlip;
											(i || o) && (t = this.earFrameBarToData(e));
										} else
											r instanceof m.Ear2Polygon
												? ((i = r.isVertical && !r.xFlip && !r.yFlip),
												  (o = r.isVertical && r.xFlip && !r.yFlip),
												  (i || o) && (t = this.ear2FrameBarToData(e)))
												: r instanceof m.DoubleEarsPolygon &&
												  r.earPosition === g.Direction.Up &&
												  (t = this.doubleEarFrameBarToData(e));
										var a = Object.assign(
												{
													ProductID: 0,
													guid: e.id,
												},
												t,
											),
											s = e.mulManager.bars.map(function (t) {
												return n.mullionToData(t, e);
											}),
											l = e.sashManager.sashes
												.filter(function (e) {
													return e.type === m.ShapeType.Sash;
												})
												.map(function (e) {
													return n.pushSashToData(e);
												}),
											h = e.sashManager.sashes
												.filter(function (e) {
													return e.type === m.ShapeType.Screen;
												})
												.map(function (e) {
													return n.pushSashToData(e);
												}),
											c = e.mulManager.glasses.map(function (e) {
												return n.glassToData(e);
											}),
											u = e.sashManager.doubleSashes
												.filter(function (e) {
													return e.sashType === m.ShapeType.Sash;
												})
												.map(function (e) {
													return n.doubleSashToData(e);
												}),
											p = e.sashManager.doubleSashes
												.filter(function (e) {
													return e.sashType === m.ShapeType.Screen;
												})
												.map(function (e) {
													return n.doubleSashToData(e);
												}),
											f = e.sashManager.slides
												.filter(function (e) {
													return !e.appliedOption.screenOnly;
												})
												.map(function (e) {
													return n.slideToData(e);
												}),
											d = e.sashManager.slides
												.filter(function (e) {
													return e.appliedOption.screenOnly;
												})
												.map(function (e) {
													return n.slideToData(e);
												});
										return Object.assign(a, {
											Mullions: s,
											Leaves: l,
											ScreenLeaves: h,
											Glasses: c,
											FlyScreens: [],
											DoubleLeaves: u,
											DoubleScreenLeaves: p,
											Sashs: f,
											ScreenSashs: d,
										});
									}),
									(e.prototype.alignToGround = function () {
										var e = new p.default.Box();
										this.shapeManager.shapem.forEach(function (t) {
											isNaN(t.polygon.box.xmax) || (e = e.merge(t.polygon.boundary.box));
										}),
											this.shapeManager.walls.forEach(function (t) {
												isNaN(t.polygon.box.xmax) || (e = e.merge(t.polygon.box));
											}),
											this.shapeManager.translate(p.default.vector(-e.center.x, -e.ymax));
									}),
									(e.prototype.slideToData = function (e) {
										var t = e.appliedOption,
											n = {
												count: t.columnsCount,
												openPath: t.serialInCC,
												barJoinType: this.joinWayToData(e.sashes[0].frameManager),
												fillerSpec: this.fillerSpecOfSash(e),
											};
										return Object.assign(n, this.polygonToData(e.polygon));
									}),
									(e.prototype.glassToData = function (e) {
										var t = {
											spec: e.glassSpec.spec,
											rectHoleList: [],
											circleHoleList: [],
										};
										return Object.assign(t, this.polygonToData(e.polygon));
									}),
									(e.prototype.mullionToData = function (e, t) {
										var n = this.segmentToData(e.polygon.mulShape),
											r = t.mulManager.splitter.lines[e.polyId.idx].alignType,
											i = e.polygon.mulShape;
										return (
											i instanceof p.default.Segment &&
												d.Utils.isSegVertical(i) &&
												(r === m.AlignTypeEnum.left
													? (r = m.AlignTypeEnum.right)
													: r === m.AlignTypeEnum.right && (r = m.AlignTypeEnum.left)),
											Object.assign(n, {
												alignType: r,
											})
										);
									}),
									(e.prototype.pushSashToData = function (e) {
										var t = {
											openWay: this.openWayOfPushSash(e),
											barJoinType: this.joinWayToData(e.frameManager),
											fillerSpec: this.fillerSpecOfSash(e),
										};
										return Object.assign(t, this.polygonToData(e.polygon));
									}),
									(e.prototype.doubleSashToData = function (e) {
										var t = {
											openMethod: this.openWayOfDoubleSash(e),
											barJoinType: this.joinWayToData(e.sashes[0].frameManager),
											fillerSpec: this.fillerSpecOfSash(e),
										};
										return Object.assign(t, this.polygonToData(e.polygon));
									}),
									(e.prototype.normalFrameBarToData = function (e) {
										var t = this,
											n = e.polygon.edges.map(function (n, r) {
												var i = e.frameManager.allBars[r].virtual,
													o = t.edgeToData(n);
												return Object.assign(o, {
													hidden: i,
												});
											});
										return Object.assign(
											{
												FrameType: 0,
												BarJoinType: this.joinWayToData(e.frameManager),
												edges: n,
											},
											this.polygonToData(e.polygon),
										);
									}),
									(e.prototype.earFrameBarToData = function (e) {
										var t = e.polygon,
											n = t.edges,
											r = new m.WinPolygon([
												p.default.segment(n[0].start, n[3].end),
												n[4],
												n[5],
												p.default.segment(n[5].end, n[0].start),
											]).box,
											i = r.xmax - r.xmin,
											o = r.ymax - r.ymin,
											a = !t.isVertical && t.xFlip && !t.yFlip;
										return Object.assign(
											{
												FrameType: 1,
												BarJoinType: this.joinWayToData(e.frameManager),
												LeftWindowWidth: i,
												LeftWindowHeight: o,
												RightWindowWidth: i,
												RightWindowHeight: o,
												DoorWindowType: a ? 'LeftSingleWindow' : 'RightSingleWindow',
											},
											this.polygonToData(t.boundary),
										);
									}),
									(e.prototype.ear2FrameBarToData = function (e) {
										var t = e.polygon,
											n = t.edges,
											r = new m.WinPolygon([
												p.default.segment(n[0].start, n[6].end),
												p.default.segment(n[6].end, n[4].end),
												n[5],
												p.default.segment(n[5].end, n[0].start),
											]).box,
											i = r.xmax - r.xmin,
											o = r.ymax - r.ymin,
											a = !t.isVertical && t.xFlip && !t.yFlip;
										return Object.assign(
											{
												FrameType: 1,
												BarJoinType: this.joinWayToData(e.frameManager),
												LeftWindowWidth: i,
												LeftWindowHeight: o,
												RightWindowWidth: i,
												RightWindowHeight: o,
												TopWindowHeight: n[0].start.y - n[3].start.y,
												DoorWindowType: a ? 'LeftSingleWindow' : 'RightSingleWindow',
											},
											this.polygonToData(t.boundary),
										);
									}),
									(e.prototype.doubleEarFrameBarToData = function (e) {
										var t = e.polygon.edges,
											n = new m.WinPolygon([
												t[1],
												t[2],
												p.default.segment(t[2].end, t[3].start),
												p.default.segment(t[3].start, t[1].start),
											]).box,
											r = new m.WinPolygon([
												t[6],
												t[7],
												p.default.segment(t[7].end, t[5].end),
												p.default.segment(t[5].end, t[6].start),
											]).box;
										return Object.assign(
											{
												FrameType: 1,
												BarJoinType: this.joinWayToData(e.frameManager),
												LeftWindowWidth: n.xmax - n.xmin,
												LeftWindowHeight: n.ymax - n.ymin,
												RightWindowWidth: r.xmax - r.xmin,
												RightWindowHeight: r.ymax - r.ymin,
												DoorWindowType: 'DoubleWindow ',
											},
											this.polygonToData(e.polygon.boundary),
										);
									}),
									(e.prototype.bewFrameBarToData = function (e, t) {
										var n = t.edge(0).length,
											r = t.edge(2).length,
											i = t.edge(1).length,
											o = this.normalFrameBarToData(e),
											a = Object.assign(o, {
												FrameType: 4,
												leftHeightMM: n,
												rightHeightMM: r,
												widthMM: i,
											});
										return (a.quaDrangleBarJoinType = a.BarJoinType), a;
									}),
									(e.prototype.trFrameBarToData = function (e, t) {
										var n = t.height,
											r = t.width,
											i = t.triangleHeight,
											o = this.normalFrameBarToData(e);
										return Object.assign(o, {
											FrameType: 3,
											heightMM: n,
											widthMM: r,
											triHeightMM: i,
										});
									}),
									(e.prototype.pointToData = function (e) {
										return {
											x: e.x,
											y: -e.y,
										};
									}),
									(e.prototype.segmentToData = function (e) {
										return {
											p1: this.pointToData(e.start),
											p2: this.pointToData(e.end),
										};
									}),
									(e.prototype.edgeToData = function (e) {
										var t = new p.default.Matrix();
										return (t = t.scale(0, -1)), e.transform(t).toJSON();
									}),
									(e.prototype.polygonToData = function (e) {
										var t = e.box;
										return {
											p1: this.pointToData(p.default.point(t.xmin, t.ymax)),
											p2: this.pointToData(p.default.point(t.xmax, t.ymin)),
										};
									}),
									(e.prototype.joinWayToData = function (e) {
										var t =
											e.ejw.find(function (e) {
												return void 0 !== e;
											}) || d.EdgeJointWay.Default;
										return t === d.EdgeJointWay.Default || t === d.EdgeJointWay.Diagonal
											? u.Straight45
											: t === d.EdgeJointWay.Horizontal
											? u.StraightH
											: t === d.EdgeJointWay.Vertical
											? u.StraightV
											: u.Straight45;
									}),
									(e.prototype.openWayOfDoubleSash = function (e) {
										return e.openToward === y.OpenToward.Outward ? h.Out : h.In;
									}),
									(e.prototype.openWayOfPushSash = function (e) {
										var t = l.None,
											n = e.hardwareManager;
										return (
											this.openWayMap.forEach(function (e, r) {
												n.openToward !== e.toward ||
													n.openDirection !== e.direction ||
													e.isSlide ||
													(t = r);
											}),
											t
										);
									}),
									(e.prototype.fillerSpecOfSash = function (e) {
										var t = (e = e instanceof m.Sash ? e : e.sashes[0]).mulManager.glasses
											.slice()
											.pop();
										return t ? t.glassSpec.spec : '';
									}),
									Object.defineProperty(e.prototype, 'openWayMap', {
										get: function () {
											return new Map([
												[
													l.OutwardRight,
													{
														toward: y.OpenToward.Outward,
														direction: y.OpenDirection.Right,
													},
												],
												[
													l.OutwardLeft,
													{
														toward: y.OpenToward.Outward,
														direction: y.OpenDirection.Left,
													},
												],
												[
													l.InwardRight,
													{
														toward: y.OpenToward.Inward,
														direction: y.OpenDirection.Right,
													},
												],
												[
													l.InwardLeft,
													{
														toward: y.OpenToward.Inward,
														direction: y.OpenDirection.Left,
													},
												],
												[
													l.OutwardUp,
													{
														toward: y.OpenToward.Outward,
														direction: y.OpenDirection.Down,
													},
												],
												[
													l.OutwardDown,
													{
														toward: y.OpenToward.Outward,
														direction: y.OpenDirection.Up,
													},
												],
												[
													l.InwardUp,
													{
														toward: y.OpenToward.Inward,
														direction: y.OpenDirection.Up,
													},
												],
												[
													l.InwardDown,
													{
														toward: y.OpenToward.Inward,
														direction: y.OpenDirection.Down,
													},
												],
												[
													l.OutwardRightDown,
													{
														toward: y.OpenToward.Outward,
														direction: y.OpenDirection.Right_With_Up,
													},
												],
												[
													l.OutwardLeftDown,
													{
														toward: y.OpenToward.Outward,
														direction: y.OpenDirection.Left_With_Up,
													},
												],
												[
													l.InwardRightDown,
													{
														toward: y.OpenToward.Inward,
														direction: y.OpenDirection.Right_With_Up,
													},
												],
												[
													l.InwardLeftDown,
													{
														toward: y.OpenToward.Inward,
														direction: y.OpenDirection.Left_With_Up,
													},
												],
												[
													l.OutwardRightUp,
													{
														toward: y.OpenToward.Outward,
														direction: y.OpenDirection.Right_With_Down,
													},
												],
												[
													l.OutwardLeftUp,
													{
														toward: y.OpenToward.Outward,
														direction: y.OpenDirection.Left_With_Down,
													},
												],
												[
													l.InwardRightUp,
													{
														toward: y.OpenToward.Inward,
														direction: y.OpenDirection.Right_With_Down,
													},
												],
												[
													l.InwardLeftUp,
													{
														toward: y.OpenToward.Inward,
														direction: y.OpenDirection.Left_With_Down,
													},
												],
												[
													l.LeftPush,
													{
														isSlide: !0,
														direction: y.OpenDirection.Left,
													},
												],
												[
													l.RightPush,
													{
														isSlide: !0,
														direction: y.OpenDirection.Right,
													},
												],
											]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						(t.JsonCc = v),
							(function (e) {
								(e[(e.None = 0)] = 'None'),
									(e[(e.OutwardRight = 1)] = 'OutwardRight'),
									(e[(e.OutwardLeft = 2)] = 'OutwardLeft'),
									(e[(e.InwardRight = 3)] = 'InwardRight'),
									(e[(e.InwardLeft = 4)] = 'InwardLeft'),
									(e[(e.OutwardUp = 5)] = 'OutwardUp'),
									(e[(e.OutwardDown = 6)] = 'OutwardDown'),
									(e[(e.InwardUp = 7)] = 'InwardUp'),
									(e[(e.InwardDown = 8)] = 'InwardDown'),
									(e[(e.OutwardRightDown = 9)] = 'OutwardRightDown'),
									(e[(e.OutwardLeftDown = 10)] = 'OutwardLeftDown'),
									(e[(e.InwardRightDown = 11)] = 'InwardRightDown'),
									(e[(e.InwardLeftDown = 12)] = 'InwardLeftDown'),
									(e[(e.OutwardRightUp = 13)] = 'OutwardRightUp'),
									(e[(e.OutwardLeftUp = 14)] = 'OutwardLeftUp'),
									(e[(e.InwardRightUp = 15)] = 'InwardRightUp'),
									(e[(e.InwardLeftUp = 16)] = 'InwardLeftUp'),
									(e[(e.LeftPush = 17)] = 'LeftPush'),
									(e[(e.RightPush = 18)] = 'RightPush'),
									(e[(e.UpPush = 19)] = 'UpPush'),
									(e[(e.InwardUpRightPush = 20)] = 'InwardUpRightPush'),
									(e[(e.InwardUpLeftPush = 21)] = 'InwardUpLeftPush'),
									(e[(e.OutPush = 22)] = 'OutPush');
							})(l || (l = {})),
							(function (e) {
								(e[(e.Fixed = 0)] = 'Fixed'), (e[(e.In = 1)] = 'In'), (e[(e.Out = 2)] = 'Out');
							})(h || (h = {})),
							(function (e) {
								(e[(e.Null = 0)] = 'Null'),
									(e[(e.SeparationWithJoin = 1)] = 'SeparationWithJoin'),
									(e[(e.SeparationWithOutJoin = 2)] = 'SeparationWithOutJoin'),
									(e[(e.MiddleInFrame = 3)] = 'MiddleInFrame'),
									(e[(e.WithOutFrameCorner = 4)] = 'WithOutFrameCorner'),
									(e[(e.WithFrameCorner = 5)] = 'WithFrameCorner');
							})(c || (c = {})),
							(function (e) {
								(e[(e.Default = -1)] = 'Default'),
									(e[(e.StraightV = 0)] = 'StraightV'),
									(e[(e.StraightH = 1)] = 'StraightH'),
									(e[(e.Straight45 = 2)] = 'Straight45');
							})(u || (u = {}));
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DrawingInfo = void 0);
						var a = o(n(0)),
							s = n(16),
							l = n(2),
							h = n(11),
							c = n(7),
							u = n(1),
							p = (function () {
								function e(e, t) {
									(this.shapeManager = e), (this.frames = t);
								}
								return (
									Object.defineProperty(e.prototype, 'frameVariables', {
										get: function () {
											var e = this,
												t = this.shapeManager.shapem
													.map(function (e) {
														return e.mulManager.glasses;
													})
													.flat(),
												n = this.shapeManager.shapem
													.map(function (t) {
														return e.frameSashes(t);
													})
													.flat(),
												r = this.shapeManager.shapem
													.map(function (e) {
														return e.sashManager.thefts;
													})
													.flat().length,
												i = this.shapeManager.cornerJoiners,
												o = this.shapeManager.connectors,
												s = 0,
												p = 0,
												f = 0,
												d = 0;
											return (
												i.forEach(function (e) {
													(s += e.length), (p += e.area);
												}),
												o.forEach(function (e) {
													(f += e.length), (d += e.area);
												}),
												this.frames.map(function (g) {
													var y = g.polygon.box,
														m = 0,
														v = 0,
														w = e.frameSashes(g);
													return (
														g.frameManager.bars.forEach(function (e) {
															a.default.Utils.EQ_0(e.stAngle - 45) && m++;
														}),
														g.frameManager.ejw.forEach(function (e) {
															e === l.EdgeJointWay.Separated && v++;
														}),
														{
															frameId: g.id,
															frameUid: g.uid,
															variables: [
																{
																	name: '整框转向',
																	value: g.turned ? '是' : '否',
																},
																{
																	name: '系列',
																	value: e.seriesOfFrame(g),
																},
																{
																	name: '固玻数量',
																	value: t.filter(function (e) {
																		return e instanceof u.Glass;
																	}).length,
																},
																{
																	name: '固纱数量',
																	value: t.filter(function (e) {
																		return e instanceof u.ScreenFiller;
																	}).length,
																},
																{
																	name: '玻扇数量',
																	value: n.filter(function (e) {
																		return (
																			e.type === u.ShapeType.Sash || e.type === u.ShapeType.KfcSash
																		);
																	}).length,
																},
																{
																	name: '框玻扇数量',
																	value: w.filter(function (e) {
																		return (
																			e.type === u.ShapeType.Sash || e.type === u.ShapeType.KfcSash
																		);
																	}).length,
																},
																{
																	name: '纱扇数量',
																	value: n.filter(function (e) {
																		return e.type === u.ShapeType.Screen;
																	}).length,
																},
																{
																	name: '防盗框数量',
																	value: r,
																},
																{
																	name: '左边框',
																	value:
																		e.frameBar(g, h.Direction.Left).type === u.ShapeType.SideTrack
																			? '边封'
																			: '边框',
																},
																{
																	name: '右边框',
																	value:
																		e.frameBar(g, h.Direction.Right).type === u.ShapeType.SideTrack
																			? '边封'
																			: '边框',
																},
																{
																	name: '转角长度',
																	value: c.UnitConvertion.Ins.lengthForOutput(s),
																},
																{
																	name: '转角面积',
																	value: c.UnitConvertion.Ins.area(p),
																},
																{
																	name: '转角数量',
																	value: i.length,
																},
																{
																	name: '内转角数量',
																	value: i.filter(function (e) {
																		return e.skewAngle < 180;
																	}).length,
																},
																{
																	name: '外转角数量',
																	value: i.filter(function (e) {
																		return e.skewAngle > 180;
																	}).length,
																},
																{
																	name: '连接件长度',
																	value: c.UnitConvertion.Ins.lengthForOutput(f),
																},
																{
																	name: '连接件面积',
																	value: c.UnitConvertion.Ins.area(d),
																},
																{
																	name: '连接件数量',
																	value: o.length,
																},
																{
																	name: '框宽',
																	value: c.UnitConvertion.Ins.lengthForOutput(y.xmax - y.xmin),
																},
																{
																	name: '框高',
																	value: c.UnitConvertion.Ins.lengthForOutput(y.ymax - y.ymin),
																},
																{
																	name: '立体圆弧',
																	value: g instanceof u.ThreedArcFrame ? '是' : '否',
																},
																{
																	name: '空连接数',
																	value: v,
																},
																{
																	name: '斜连接数',
																	value: m,
																},
																{
																	name: '固玻',
																	value:
																		g.mulManager.glasses.filter(function (e) {
																			return e instanceof u.Glass;
																		}).length > 0
																			? '有'
																			: '无',
																},
																{
																	name: '框整焊',
																	value: c.DrawParams.Ins.nonGapFrame ? '是' : '否',
																},
																{
																	name: '固压线整焊',
																	value: c.DrawParams.Ins.nonGapFixedBead ? '是' : '否',
																},
																{
																	name: '扇整焊',
																	value: c.DrawParams.Ins.nonGapSash ? '是' : '否',
																},
																{
																	name: '扇压线整焊',
																	value: c.DrawParams.Ins.nonGapSashBead ? '是' : '否',
																},
																{
																	name: '圆弧区面积',
																	value: e.areaOfArc(g.polygon),
																},
																{
																	name: '弧框',
																	value: g.polygon.edges.some(function (e) {
																		return e instanceof a.default.Arc;
																	})
																		? '是'
																		: '否',
																},
																{
																	name: '异型框',
																	value: g.polygon.isRectangle() ? '否' : '是',
																},
																{
																	name: '缺角位数量',
																	value: g.polygon.cutAnglesCount,
																},
															],
														}
													);
												})
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.frameSashes = function (e) {
										return i(
											e.sashManager.sashes,
											e.sashManager.doubleSashes
												.map(function (e) {
													return e.sashes;
												})
												.flat(),
											e.sashManager.kfcSashes,
											e.sashManager.doubleKfcSashes
												.map(function (e) {
													return e.sashes;
												})
												.flat(),
											e.sashManager.slides
												.map(function (e) {
													return e.sashes;
												})
												.flat(),
											e.sashManager.folds
												.map(function (e) {
													return e.sashes;
												})
												.flat(),
										);
									}),
									(e.prototype.areaOfArc = function (e) {
										if (!e.isSimpleClosed) return e.area;
										var t = e.area,
											n = e.edges.map(function (e) {
												return a.default.segment(e.start, e.end);
											});
										return t - new s.WinPolygon(n).area;
									}),
									(e.prototype.frameBar = function (e, t) {
										var n = h.EdgeFinder.Instance.findIndex(t, e.polygon);
										return e.frameManager.allBars[n];
									}),
									(e.prototype.seriesOfFrame = function (e) {
										return e.sashManager.slides.length > 0
											? '推拉'
											: e.sashManager.folds.length > 0
											? '折叠'
											: 0 === e.sashManager.allSashes.length
											? '边框'
											: '平开';
									}),
									e
								);
							})();
						t.DrawingInfo = p;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__assign) ||
								function () {
									return (r =
										Object.assign ||
										function (e) {
											for (var t, n = 1, r = arguments.length; n < r; n++)
												for (var i in (t = arguments[n]))
													Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
											return e;
										}).apply(this, arguments);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								},
							a =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CcBar = t.slideJoinType = t.sizeTypeEnum = t.LineType = t.ccTypeEnum = void 0);
						var l,
							h,
							c,
							u = s(n(0)),
							p = n(9),
							f = n(7),
							d = n(13),
							g = n(2),
							y = n(11),
							m = n(1);
						!(function (e) {
							(e.frame = 'frame'),
								(e.subFrame = 'subFrame'),
								(e.mullion = 'mullion'),
								(e.steelLiner = 'steelLiner'),
								(e.cornerJoiner = 'cornerJoiner'),
								(e.connector = 'connector'),
								(e.fixedBead = 'fixedBead'),
								(e.fixedNetBead = 'fixedNetBead'),
								(e.fixedPanelBead = 'fixedPanelBead'),
								(e.glass = 'glass'),
								(e.fixedGlass = 'fixedGlass'),
								(e.panel = 'panel'),
								(e.fixedPanel = 'fixedPanel'),
								(e.net = 'net'),
								(e.fixedNet = 'fixedNet'),
								(e.shade = 'shade'),
								(e.fixedShade = 'fixedShade'),
								(e.sashShade = 'sashShade'),
								(e.shadeMullion = 'shadeMullion'),
								(e.sashMullion = 'sashMullion'),
								(e.sashGlass = 'sashGlass'),
								(e.sashPanel = 'sashPanel'),
								(e.sashBead = 'sashBead'),
								(e.screenMullion = 'screenMullion'),
								(e.screenNet = 'screenNet'),
								(e.screenBead = 'screenBead'),
								(e.panelBead = 'panelBead'),
								(e.fixedShadeBead = 'fixedShadeBead'),
								(e.decorationBar = 'decorationBar'),
								(e.shadeSashMullion = 'shadeSashMullion'),
								(e.shadeSashBead = 'shadeSashBead'),
								(e.doubleSashMullion = 'doubleSashMullion'),
								(e.doubleSashGlass = 'doubleSashGlass'),
								(e.doubleSashPanel = 'doubleSashPanel'),
								(e.doubleSashBead = 'doubleSashBead'),
								(e.doubleScreenMullion = 'doubleScreenMullion'),
								(e.doubleScreenNet = 'doubleScreenNet'),
								(e.doubleScreenBead = 'doubleScreenBead'),
								(e.foldSashMullion = 'foldSashMullion'),
								(e.foldSashGlass = 'foldSashGlass'),
								(e.foldSashPanel = 'foldSashPanel'),
								(e.foldSashBead = 'foldSashBead'),
								(e.foldScreenMullion = 'foldScreenMullion'),
								(e.foldScreenNet = 'foldScreenNet'),
								(e.foldScreenBead = 'foldScreenBead'),
								(e.slideSashMullion = 'slideSashMullion'),
								(e.slideSashGlass = 'slideSashGlass'),
								(e.slideSashPanel = 'slideSashPanel'),
								(e.slideSashBead = 'slideSashBead'),
								(e.trackBar = 'trackBar'),
								(e.turningFrame = 'turningFrame'),
								(e.sashTurningFrame = 'sashTurningFrame'),
								(e.screenFrame = 'screenFrame'),
								(e.sideTrackFixed = 'sideTrackFixed'),
								(e.sideTrackThroughFixed = 'sideTrackThroughFixed'),
								(e.sideTrackSlide = 'sideTrackSlide'),
								(e.sideTrackSlideEmbedded = 'sideTrackSlideEmbedded'),
								(e.sideTrackCouple = 'sideTrackCouple'),
								(e.sideTrackThroughCouple = 'sideTrackThroughCouple'),
								(e.antitheftMullion = 'antitheftMullion'),
								(e.frameCornerBrace = 'frameCornerBrace'),
								(e.fixedTurningFrameCornerBrace = 'fixedTurningFrameCornerBrace'),
								(e.subFrameCornerBrace = 'subFrameCornerBrace'),
								(e.sashCornerBrace = 'sashCornerBrace'),
								(e.screenCornerBrace = 'screenCornerBrace'),
								(e.sashTurningFrameCornerBrace = 'sashTurningFrameCornerBrace'),
								(e.mullionConnector = 'mullionConnector'),
								(e.Sash = 'Sash'),
								(e.Screen = 'Screen'),
								(e.ShadePushSash = 'ShadePushSash'),
								(e.GuardSash = 'GuardSash'),
								(e.AntiTheft = 'AntiTheft'),
								(e.Slide = 'Slide'),
								(e.UpTrack = 'UpTrack'),
								(e.FixedUpTrack = 'FixedUpTrack'),
								(e.DownTrack = 'DownTrack'),
								(e.FixedDownTrack = 'FixedDownTrack'),
								(e.UpDownTrack = 'UpDownTrack'),
								(e.SideTrack = 'SideTrack'),
								(e.DoubleSideTrack = 'DoubleSideTrack'),
								(e.SlideSashUpBar = 'SlideSashUpBar'),
								(e.SlideSashDownBar = 'SlideSashDownBar'),
								(e.SlideSashCollisionLeftBar = 'SlideSashCollisionLeftBar'),
								(e.SlideSashCollisionRightBar = 'SlideSashCollisionRightBar'),
								(e.SlideSashEdgeBar = 'SlideSashEdgeBar'),
								(e.SlideSashSingleBar = 'SlideSashSingleBar'),
								(e.SlideSashDoubleBar = 'SlideSashDoubleBar'),
								(e.SlideSashNoneBar = 'SlideSashNoneBar'),
								(e.KfcSashUpBar = 'KfcSashUpBar'),
								(e.KfcSashDownBar = 'KfcSashDownBar'),
								(e.KfcSashLeftBar = 'KfcSashLeftBar'),
								(e.KfcSashRightBar = 'KfcSashRightBar');
						})((l = t.ccTypeEnum || (t.ccTypeEnum = {}))),
							(function (e) {
								(e.Seg = 'Seg'), (e.Arc = 'Arc');
							})((h = t.LineType || (t.LineType = {}))),
							(function (e) {
								(e[(e.width = 0)] = 'width'),
									(e[(e.height = 1)] = 'height'),
									(e[(e.any = 2)] = 'any');
							})((c = t.sizeTypeEnum || (t.sizeTypeEnum = {}))),
							(function (e) {
								(e[(e.none = 0)] = 'none'),
									(e[(e.edge = 1)] = 'edge'),
									(e[(e.collision = 2)] = 'collision'),
									(e[(e.overlap = 3)] = 'overlap');
							})(t.slideJoinType || (t.slideJoinType = {}));
						var v = (function () {
							function e(e) {
								var t = this;
								(this.shapeManager = e),
									(this.frames = []),
									(this.reflections = []),
									(this.theftSvgs = []),
									(this.option = {
										withHoleSegments: !1,
										cutAngleSort: !1,
										equalSplitGlass: !1,
										sashBarsCutAngleSort: !1,
									}),
									(this.holeShape = []),
									(this.vconnectors = []),
									(this.hconnectors = []),
									(this.vcorners = []),
									(this.hcorners = []),
									e.shapem.forEach(function (e) {
										var n = t.cloneFrame(e);
										n.sashManager.resetOffvec(),
											n.sashManager.allSashes
												.filter(function (e) {
													return e instanceof m.PushSash || e instanceof m.SlideSash;
												})
												.forEach(function (e) {
													(e instanceof m.PushSash ? [e.hardwareManager.handle] : e.locks).forEach(
														function (e) {
															e.hidden ||
																((e.dimToSash.hidden = !1),
																e.dimToSash.updatePoly(),
																(e.lockDimToSash = !e.autoOffset));
														},
													);
												}),
											t.frames.push(n);
									}),
									(this.slideCCBar = new y.SlideCCBar(this.frames, e.cornerJoiners)),
									this.applySlideProfileSize(),
									(this.foldCCBar = new y.FoldCCBar(this.frames)),
									(this.pushSlideCCBar = new y.PushSlideCCBar(this.frames)),
									(this.innerFrameCCBar = new y.InnerFrameCCBar(this.frames)),
									(this.frameCCBar = new y.FrameCCBar(this.frames)),
									m.Area.calcSerial(this.frames, !0),
									this.generateBarSerial(),
									(this.equalSplitGlassOptimizer = new y.EqualSplitGlassOptimizer(
										this.shapeManager,
										this,
									)),
									(this.reverseTowardRegions = this.frames.map(function (e) {
										return {
											frameId: e.id,
											region: t.computeReverseTowardRegion(e),
										};
									}));
							}
							return (
								(e.prototype.isSpecificType = function (e) {
									return this.slideCCBar.isSlideProfile(e) || this.innerFrameCCBar.isInnerFrame(e);
								}),
								(e.prototype.applySlideProfileSize = function () {
									var e = !1;
									this.frames.forEach(function (t) {
										t.applySlideProfileSize() && (e = !0);
									}),
										e && this.slideCCBar.markProfiles(this.frames);
								}),
								(e.prototype.freshICcBar = function () {
									var e = this.shapeManager.ccBar;
									return e && ((e.reflections = this.reflections), (e.option = this.option)), e;
								}),
								Object.defineProperty(e.prototype, 'unit', {
									get: function () {
										return f.DrawParams.Ins.unit;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'defaultGlassSpec', {
									get: function () {
										return f.DrawParams.Ins.glassSpec.clone();
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.optimizeEqualSplitGlass = function (e) {
									return this.equalSplitGlassOptimizer.optimize(e);
								}),
								(e.prototype.resetFrames = function () {
									var e = this.shapeManager.shapem;
									if (0 !== e.length) {
										var t = e[0].view;
										e.forEach(function (e) {
											e.updatePoly(), e.draw(t);
										}),
											m.Glass.calcSerial(e);
									}
								}),
								(e.prototype.markGlassesSpec = function (e) {
									var t = this.shapeManager.shapem[0].view;
									this.shapeManager.shapem
										.map(function (e) {
											var t = e.mulManager.glasses,
												n = e.sashManager.allSashes
													.map(function (e) {
														return e.mulManager.glasses;
													})
													.flat();
											return o(t, n);
										})
										.flat()
										.forEach(function (n) {
											var r = e.get(n.serial.text);
											r && ((n.spec.text = r), n.updatePoly(), n.draw(t));
										});
								}),
								(e.prototype.getDrawingInfo = function () {
									return new y.DrawingInfo(this.shapeManager, this.frames).frameVariables;
								}),
								(e.prototype.getCcBars = function (e, t) {
									var n = this,
										r = [];
									(void 0 !== e && 0 !== e.length) ||
										r.push.apply(
											r,
											o(
												this.getHoleCCBars(),
												this.getFrameConnectCCBars(),
												this.getCoupleBars(),
												this.getSubFrameCCBars(),
												this.getSubFrameCornerBraces(),
											),
										);
									var i = this.getFrameCCBars(e, t),
										a = this.getMullionCCBars(e, t);
									r.push.apply(
										r,
										o(
											i.all,
											a,
											this.getFrameGlasses(e, t),
											this.getFrameBeads(e, t),
											this.getPushSashBars(e, t),
											this.getISashBars(e, t),
											this.getAntitheftBars(e, t),
										),
									),
										r.push.apply(r, o(this.getSteelLinerCCBars(i.origin, a))),
										this.fetchFrames(e, t).forEach(function (e) {
											r.push.apply(r, o(n.getFrmCornerBraces(l.frameCornerBrace, e.frameManager)));
										}),
										r.push.apply(r, o(this.getMulConnectors(a))),
										this.slideCCBar.parseSlideAux(r);
									var s = this.shapeManager.couples.filter(function (e) {
										return e.type === m.ShapeType.CornerJoiner;
									});
									return (
										this.slideCCBar.parseBead(r, s),
										r.forEach(function (e) {
											return n.convertUnit(e);
										}),
										this.toFixed(r),
										this.frameCCBar.addFrameSerial(r),
										r
									);
								}),
								(e.prototype.getMulConnectors = function (e) {
									var t = [];
									return (
										e.forEach(function (e) {
											if ('number' == typeof e.connectCount)
												for (var n = 0; n < e.connectCount; n++)
													t.push({
														shapeId: -1,
														frameId: e.frameId,
														type: l.mullionConnector,
														cc: 1,
														aa: 1,
														sizeType: c.any,
														posType: g.BarPositionType.NoneNone,
														cutAngle: '90-90',
														lineType: h.Seg,
														isReinforced: e.isReinforced,
													});
										}),
										t
									);
								}),
								(e.prototype.getHoleCCBars = function () {
									var e = this,
										t = this.shapeManager.couples.map(function (e) {
											return e.polygon;
										}),
										n = t
											.map(function (e) {
												return e.edges;
											})
											.flat(),
										r = this.frames
											.map(function (e) {
												return e.polygon;
											})
											.filter(function (t) {
												return !e.shouldExcludePolygon(t);
											})
											.map(function (e) {
												return e.boundary;
											}),
										i = o(r, t)
											.sort(function (e, t) {
												return e.box.center.x - t.box.center.x;
											})
											.map(function (e) {
												return e.orientation === u.default.ORIENTATION.CCW
													? e.polygon.clone().reverse()
													: e.polygon.clone();
											}),
										a = new u.default.Polygon();
									try {
										i.forEach(function (e) {
											return (a = u.default.BooleanOperations.unify(a, e));
										});
									} catch (e) {
										a = i[0];
									}
									var s = Array.from(a.edges).map(function (e) {
										return e.shape;
									});
									this.holeShape = s;
									var l = a.box.center;
									return s
										.filter(function (e) {
											return !n.some(function (t) {
												return g.Utils.isSameEdge(e, t);
											});
										})
										.map(function (e) {
											var t = e instanceof u.default.Segment && g.Utils.isSegVertical(e),
												n = t
													? u.default.line(l, u.default.vector(1, 0))
													: u.default.line(l, u.default.vector(0, 1)),
												r = e.middle().leftTo(n),
												i = t
													? r
														? y.Direction.Right
														: y.Direction.Left
													: r
													? y.Direction.Down
													: y.Direction.Up;
											return {
												cc: e.length,
												aa: e.length,
												type: 'holeAddon',
												position: i,
											};
										});
								}),
								(e.prototype.getFrameConnectCCBars = function () {
									var e = this.frames
											.map(function (e) {
												return e.polygon;
											})
											.map(function (e) {
												return e.edges.filter(function (e) {
													return e instanceof u.default.Segment;
												});
											})
											.flat(),
										t = [];
									e.forEach(function (n, r) {
										var i = e.slice();
										i.splice(r, 1),
											i.forEach(function (e) {
												var r = n.intersect(e);
												2 === r.length && t.push(u.default.segment(r[0], r[1]));
											});
									});
									var n = [];
									return (
										t.forEach(function (e) {
											n.some(function (t) {
												return (
													t.middle().equalTo(e.middle()) &&
													u.default.Utils.EQ_0(t.length - e.length)
												);
											}) || n.push(e);
										}),
										n.map(function (e) {
											return {
												cc: e.length,
												aa: e.length,
												type: 'frameConnectAddon',
											};
										})
									);
								}),
								(e.prototype.getInnerGlassPolyes = function (e, t) {
									var n = this,
										i = [];
									return (
										this.fetchFrames(e, t).forEach(function (e) {
											var t = e.profileSizeManager.glassGap;
											e.mulManager.glasses
												.filter(function (e) {
													return e instanceof m.Glass && !e.polygon.isRectangle();
												})
												.forEach(function (o) {
													var a = n.getDetailAreaType(o.type, l.fixedGlass),
														s = o.polygon.parallelPoly(t, !0),
														h = s.box;
													i.push(
														r(
															r(
																{
																	frameId: e.id,
																	oriPoly: o.polygon.toJSON(),
																	innerPoly: s.toJSON(),
																	svg: s.toSvgWithDim(300, o.glassSpec.spec),
																	svgRaw: s.toSvgRaw(),
																	type: a,
																	serial: o.serial.text,
																	area: f.UnitConvertion.Ins.area(s.area),
																	perimeter: s.perimeter,
																	originArea: s.boxArea,
																	width: h.xmax - h.xmin,
																	height: h.ymax - h.ymin,
																	name: o.glassSpec.name,
																	spec: o.fixedSpecDesc,
																	specs: o.fixedSpecDesc,
																	mainSpec: o.glassSpec.spec,
																	thickness: o.glassSpec.thickness,
																},
																o.glassSpec.customAttrs,
															),
															{
																withTurningFrame: o.withTurningFrame,
															},
														),
													);
												});
										}),
										i
									);
								}),
								(e.prototype.getSashCcBars = function (e) {
									var t = this;
									if (0 === e.length) return [];
									var n = [];
									return (
										e.forEach(function (e) {
											var r = f.UnitConvertion.Ins.unitlessLength(e.width),
												a = f.UnitConvertion.Ins.unitlessLength(e.height),
												s = t.getSashById(e.id);
											if (s)
												if (s instanceof m.Sash)
													t.adjustSash(s, r, a),
														t.generateBarSerial(),
														n.push.apply(
															n,
															o(
																(function (e, n, r) {
																	var a = [];
																	a.push.apply(a, o(t.getOneSashBars(e, n, r)));
																	var s = i(t.getDetailItemType(e.type), 3),
																		h = s[0],
																		c = s[1],
																		u = s[2],
																		p = e.topFrame.profileSizeManager;
																	if (
																		(a.push.apply(a, o(t.getSashMullionBars(e, p, h))),
																		a.push.apply(a, o(t.getSashGlasses(e, p, c))),
																		a.push.apply(a, o(t.getSashBeads(e, p, u))),
																		a.push.apply(
																			a,
																			o(
																				t.getFrmCornerBraces(
																					e.type === m.ShapeType.Screen
																						? l.screenCornerBrace
																						: l.sashCornerBrace,
																					e.frameManager,
																				),
																			),
																		),
																		!e.hardwareManager.handle.hidden)
																	) {
																		var f = t.getPushHandle(e, n, r);
																		(f.isashId = e.id), a.push(f);
																	}
																	return (
																		a.forEach(function (t) {
																			(t.sashAssignWay = e.sashAssignWay),
																				(t.isDoor = e.isDoor),
																				(t.withTurningFrame = e.withTurningFrame);
																		}),
																		a
																	);
																})(s, r, a),
															),
														),
														t.collectMulDimReflections(s),
														t.collectDimToSashReflections(s);
												else {
													var h = s.sashes.map(function (e) {
														return t.distanceToSash(e);
													});
													t.adjustSash(s, r, a), t.generateBarSerial();
													var c = t.getOneISashBars(s, r, a, h);
													c.forEach(function (e) {
														(e.allFixedWidth = 0),
															(e.fixedSashesCount = 0),
															(s instanceof m.Slide ||
																s instanceof m.DoubleSash ||
																s instanceof m.Fold) &&
																((e.allFixedWidth = s.fixedWidth),
																(e.fixedSashesCount = s.fixedColumnsCount));
													}),
														n.push.apply(n, o(c));
												}
										}),
										n.forEach(function (e) {
											return t.convertUnit(e);
										}),
										this.toFixed(n),
										this.slideCCBar.parseBead(n),
										this.frameCCBar.addFrameSerial(n),
										n
									);
								}),
								(e.prototype.distanceToSash = function (e) {
									if (e instanceof m.PushSash) return e.hardwareManager.handle.dimToSash.value;
									if (e instanceof m.SlideSash) {
										var t = e.locks;
										if (t.length > 0) return t[0].dimToSash.value;
									}
									return 0;
								}),
								(e.prototype.getAntitheftCcBars = function (e) {
									var t = this;
									if (0 === e.length) return [];
									var n = [];
									return (
										e.forEach(function (e) {
											var r = f.UnitConvertion.Ins.unitlessLength(e.width),
												a = f.UnitConvertion.Ins.unitlessLength(e.height),
												s = t.getAntitheftById(e.id);
											if (s) {
												t.adjustSash(s, r, a);
												var l = new y.TheftDimSvg(s),
													h = l.defaultViewBox();
												t.theftSvgs.push({
													serial: s.sashSerial,
													svg: l.output(),
													width: h.width,
													height: h.height,
												}),
													n.push.apply(
														n,
														o(
															(function (e, n, r) {
																var a = e.sashSerial,
																	s = [];
																s.push.apply(s, o(t.getOneSashBars(e, n, r)));
																var l = i(t.getDetailItemType(e.type), 3),
																	h = l[0],
																	c = (l[1], l[2], e.topFrame.profileSizeManager);
																return (
																	s.push.apply(s, o(t.getAntitheftMullionBars(e, c, h))),
																	s.forEach(function (t) {
																		(t.openable = e.openable),
																			(t.withSash = e.withSash),
																			(t.serial = a);
																	}),
																	s
																);
															})(s, r, a),
														),
													);
											}
										}),
										n.forEach(function (e) {
											return t.convertUnit(e);
										}),
										this.toFixed(n),
										this.slideCCBar.parseBead(n),
										this.frameCCBar.addFrameSerial(n),
										n
									);
								}),
								(e.prototype.getSlideDockOfSize = function (e) {
									var t = function (t) {
										var n = e.find(function (e) {
											return e.position === t;
										});
										return n ? n.slidePosition : y.SlidePosition.none;
									};
									return {
										width: [t(y.Direction.Left), t(y.Direction.Right)],
										height: [t(y.Direction.Up), t(y.Direction.Down)],
									};
								}),
								(e.prototype.getInnerSashCcBars = function (e) {
									var t = this;
									if (0 === e.length) return [];
									var n = [];
									return (
										e.forEach(function (e) {
											var r = f.UnitConvertion.Ins.unitlessLength(e.width),
												a = f.UnitConvertion.Ins.unitlessLength(e.height),
												s = t.getSashById(e.id);
											if (s) {
												if (s instanceof m.Sash) throw new Error('sash type not support1');
												if (!s) throw new Error('sash type not support2');
												var h = s.sashes;
												if (!(e.sashNumber <= 0 || e.sashNumber > h.length)) {
													var c = s.sashes.find(function (t) {
														return t.sashNumber === e.sashNumber;
													});
													n.push.apply(
														n,
														o(
															(function (e, n, r, a, s) {
																var h = [];
																t.adjustSash(n, a, s), t.generateBarSerial();
																var c = t.getOneSashBars(n, a, s, !0),
																	u = t.getSlideDockOfSize(c);
																h.push.apply(h, o(c));
																var p = i(t.getDetailItemType(n.type), 3),
																	f = p[0],
																	d = p[1],
																	g = p[2],
																	y = n.topFrame.profileSizeManager;
																h.push.apply(h, o(t.getSashMullionBars(n, y, f, !0)));
																var v = t.getSashGlasses(n, y, d);
																v.forEach(function (e) {
																	return (e.slidePosType = u);
																}),
																	h.push.apply(h, o(v)),
																	h.push.apply(h, o(t.getSashBeads(n, y, g))),
																	h.push.apply(
																		h,
																		o(
																			t.getFrmCornerBraces(
																				n.type === m.ShapeType.Screen
																					? l.screenCornerBrace
																					: l.sashCornerBrace,
																				n.frameManager,
																			),
																		),
																	),
																	n instanceof m.SlideSash &&
																		h.push.apply(h, o(t.getSlideLocks(n, a, s))),
																	n instanceof m.PushSash &&
																		!n.hardwareManager.handle.hidden &&
																		h.push(t.getPushHandle(n, a, s));
																var w =
																	e instanceof m.DoubleSash ? n.sashAssignWay : e.sashAssignWay;
																return (
																	h.map(function (t) {
																		return (
																			(t.isashId = e.id),
																			(t.sashNumber = r),
																			(t.sashCount = e.sashCount),
																			(t.columnCount = e.columnCount),
																			(t.sashAssignWay = w),
																			(t.isDoor = e.isDoor),
																			n instanceof m.SlideSash &&
																				((t.trackNo = n.trackNo),
																				(t.width = a),
																				(t.height = s),
																				(t.isFixed = n.isFixed)),
																			t
																		);
																	}),
																	t.collectDimToInnerSashReflections(n, e, r),
																	h
																);
															})(s, c, e.sashNumber, r, a),
														),
													);
												}
											}
										}),
										n.forEach(function (e) {
											return t.convertUnit(e);
										}),
										this.toFixed(n),
										this.slideCCBar.parseBead(n),
										this.frameCCBar.addFrameSerial(n),
										n
									);
								}),
								(e.prototype.getPushHandle = function (e, t, n) {
									var r = e.hardwareManager.handle,
										i =
											r instanceof m.Handle
												? y.EdgeFinder.Instance.findDirection(e.polygon, r.edgeIndex, !0)
												: void 0;
									return {
										shapeId: -1,
										frameId: e.topFrame.id,
										sashId: e.id,
										type: 'pushHandleAddon',
										cc: 1,
										aa: 1,
										isScreen: e.type === m.ShapeType.Screen,
										direction: i,
										distanceToSash: r.dimToSash.value,
										width: t,
										height: n,
									};
								}),
								(e.prototype.getSlideLocks = function (e, t, n) {
									var r = [];
									return (
										e.locks.forEach(function (i) {
											i.hidden ||
												r.push({
													shapeId: -1,
													frameId: e.topFrame.id,
													type: 'slideLockAddon',
													cc: 1,
													aa: 1,
													isCrescentLock: i.hardwareShape === m.HardwareShape.Lock2,
													isScreen: e.type === m.ShapeType.Screen,
													direction: y.EdgeFinder.Instance.findDirection(
														e.polygon,
														i.edgeIndex,
														!0,
													),
													code: e.attrs.lockCode,
													name: e.attrs.lockName,
													decorationLock: e.attrs.decorationLock || !1,
													distanceToSash: i.dimToSash.value,
													width: t,
													height: n,
												});
										}),
										r
									);
								}),
								(e.prototype.toFixed = function (e, t) {
									void 0 === t && (t = 4),
										e.forEach(function (e) {
											e.cc.width
												? ((e.cc.width = +e.cc.width.toFixed(t)),
												  (e.cc.height = +e.cc.height.toFixed(t)))
												: (e.cc = +e.cc.toFixed(t)),
												e.aa.width
													? ((e.aa.width = +e.aa.width.toFixed(t)),
													  (e.aa.height = +e.aa.height.toFixed(t)))
													: (e.aa = +e.aa.toFixed(t));
										});
								}),
								(e.prototype.getAntitheftById = function (e) {
									var t, n, r, i;
									try {
										for (var o = a(this.frames), s = o.next(); !s.done; s = o.next()) {
											var l = s.value;
											try {
												for (
													var h = ((r = void 0), a(l.sashManager.thefts)), c = h.next();
													!c.done;
													c = h.next()
												) {
													var u = c.value;
													if (u.id === e) return u;
												}
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													c && !c.done && (i = h.return) && i.call(h);
												} finally {
													if (r) throw r.error;
												}
											}
										}
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											s && !s.done && (n = o.return) && n.call(o);
										} finally {
											if (t) throw t.error;
										}
									}
								}),
								(e.prototype.getSashById = function (e) {
									var t, n, r, i, o, s, l, h, c, u, p, f, d, g, y, m;
									try {
										for (var v = a(this.frames), w = v.next(); !w.done; w = v.next()) {
											var b = w.value;
											try {
												for (
													var S = ((r = void 0), a(b.sashManager.sashes)), _ = S.next();
													!_.done;
													_ = S.next()
												)
													if ((A = _.value).id === e) return A;
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													_ && !_.done && (i = S.return) && i.call(S);
												} finally {
													if (r) throw r.error;
												}
											}
											try {
												for (
													var P = ((o = void 0), a(b.sashManager.kfcSashes)), x = P.next();
													!x.done;
													x = P.next()
												)
													if ((A = x.value).id === e) return A;
											} catch (e) {
												o = {
													error: e,
												};
											} finally {
												try {
													x && !x.done && (s = P.return) && s.call(P);
												} finally {
													if (o) throw o.error;
												}
											}
											try {
												for (
													var D = ((l = void 0), a(b.sashManager.shadePushSashes)), T = D.next();
													!T.done;
													T = D.next()
												)
													if ((A = T.value).id === e) return A;
											} catch (e) {
												l = {
													error: e,
												};
											} finally {
												try {
													T && !T.done && (h = D.return) && h.call(D);
												} finally {
													if (l) throw l.error;
												}
											}
											try {
												for (
													var O = ((c = void 0), a(b.sashManager.doubleSashes)), M = O.next();
													!M.done;
													M = O.next()
												)
													if ((A = M.value).id === e) return A;
											} catch (e) {
												c = {
													error: e,
												};
											} finally {
												try {
													M && !M.done && (u = O.return) && u.call(O);
												} finally {
													if (c) throw c.error;
												}
											}
											try {
												for (
													var E = ((p = void 0), a(b.sashManager.doubleKfcSashes)), I = E.next();
													!I.done;
													I = E.next()
												)
													if ((A = I.value).id === e) return A;
											} catch (e) {
												p = {
													error: e,
												};
											} finally {
												try {
													I && !I.done && (f = E.return) && f.call(E);
												} finally {
													if (p) throw p.error;
												}
											}
											try {
												for (
													var C = ((d = void 0), a(b.sashManager.slides)), k = C.next();
													!k.done;
													k = C.next()
												)
													if ((A = k.value).id === e) return A;
											} catch (e) {
												d = {
													error: e,
												};
											} finally {
												try {
													k && !k.done && (g = C.return) && g.call(C);
												} finally {
													if (d) throw d.error;
												}
											}
											try {
												for (
													var F = ((y = void 0), a(b.sashManager.folds)), j = F.next();
													!j.done;
													j = F.next()
												) {
													var A;
													if ((A = j.value).id === e) return A;
												}
											} catch (e) {
												y = {
													error: e,
												};
											} finally {
												try {
													j && !j.done && (m = F.return) && m.call(F);
												} finally {
													if (y) throw y.error;
												}
											}
										}
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											w && !w.done && (n = v.return) && n.call(v);
										} finally {
											if (t) throw t.error;
										}
									}
								}),
								(e.prototype.checkStandardSeg = function (e, t) {
									var n = e.polygon.mulShape;
									if (!(n instanceof u.default.Segment)) return !1;
									if (e.polygon.epDock.stDock.type !== g.DockType.None) {
										var r = e.polygon.epDock.stDock.dockBar(t);
										if (r) {
											if (!((o = r.polygon.mulShape) instanceof u.default.Segment)) return !1;
											if (!g.Utils.isZero(n.tangentInEnd().dot(o.tangentInEnd()))) return !1;
										}
									}
									if (e.polygon.epDock.etDock.type !== g.DockType.None) {
										var i = e.polygon.epDock.etDock.dockBar(t);
										if (i) {
											var o;
											if (!((o = i.polygon.mulShape) instanceof u.default.Segment)) return !1;
											if (!g.Utils.isZero(n.tangentInEnd().dot(o.tangentInEnd()))) return !1;
										}
									}
									return !0;
								}),
								(e.prototype.adjustSash = function (e, t, n) {
									var r = e.polygon.edges;
									if (e.polygon.isRectangle()) {
										var i, o;
										g.Utils.isSegHorizontal(r[0])
											? ((i = r[0].length), (o = r[1].length))
											: ((o = r[0].length), (i = r[1].length));
										var a = t / i,
											s = n / o,
											l = e.polygon.box.center;
										r.forEach(function (e, t) {
											r[t] = e
												.translate(-l.x, -l.y)
												.transform(u.default.matrix(a, 0, 0, s, 0, 0))
												.translate(l.x, l.y);
										});
										var h = e.polygon.cloneWith(r);
										e.updatePoly(h), m.Area.calcSerial(this.frames, !0);
									}
								}),
								(e.prototype.getMullionCCBars = function (e, t) {
									var n = this,
										r = [];
									return (
										this.fetchFrames(e, t).forEach(function (e) {
											var t = n.truncateBars(e).mullions,
												i = e.profileSizeManager,
												a = e.mulManager.bars,
												s = n.getFrameMullionBarData(a, i, l.mullion, void 0, e);
											r.push.apply(r, o(s)),
												s.forEach(function (e) {
													var t = e.epDock.stDock.type === g.DockType.None ? 2 : 1;
													t += e.epDock.etDock.type === g.DockType.None ? 2 : 1;
													var n = e.epDock.stDock.type === g.DockType.Mullion ? 1 : 0;
													(n += e.epDock.etDock.type === g.DockType.Mullion ? 1 : 0),
														delete e.epDock,
														(e.connectCount = t),
														(e.mulDockCount = n);
												}),
												n.pushSlideCCBar.parseScreenSlide(e, s, a);
											var h = e.sashManager.glassSashes.shift(),
												c =
													h && !n.partialReverseTowardExists(e.id)
														? h.sashAssignWay
														: e.defaultSashAssignWay;
											s.forEach(function (r) {
												var i = a.find(function (e) {
													return e.id === r.shapeId;
												});
												(r.belongsToSash = n.belongsToSash(i, e)),
													(r.belongsToSashBothSide =
														!!r.belongsToSash && n.belongsToSashBothSide(i, e));
												var o = t.find(function (e) {
													return e.bar === i;
												});
												(r.truncate = !!o),
													(r.truncateEdgeMul = !!o && o.frameDockOnly),
													(r.hasTruncation = !1),
													(r.sashAssignWay = c),
													n.inReverseTowardRegion(i.polygon.box.center, e.id) && n.reverseToward(r);
											});
										}),
										r
									);
								}),
								(e.prototype.getSteelLinerCCBars = function (e, t) {
									return o(e, t)
										.filter(function (e) {
											return e.lineType === h.Seg;
										})
										.map(function (e) {
											var t = Object.assign({}, e);
											return (t.installPosition = t.type), (t.type = l.steelLiner), t;
										});
								}),
								(e.prototype.getSizeType = function (e) {
									var t = c.any,
										n = e.polygon.mulShape;
									return (
										n instanceof u.default.Segment &&
											(g.Utils.isSegHorizontal(n)
												? (t = c.width)
												: g.Utils.isSegVertical(n) && (t = c.height)),
										t
									);
								}),
								(e.prototype.dockCount = function (e) {
									var t = o(this.shapeManager.couples, this.frames),
										n = e.polygon.epDock,
										r = 0;
									if (n.stDock.type !== g.DockType.None) r++;
									else if (u.default.Utils.EQ_0(e.stAngle - 90)) {
										var i = e.polygon.stIdx,
											a = e.polygon.edge(i);
										t.findIndex(function (t) {
											return (
												t !== e.topFrame &&
												u.default.Utils.EQ_0(t.polygon.polygon.distanceTo(a.middle())[0])
											);
										}) >= 0 && r++;
									}
									if (n.etDock.type !== g.DockType.None) r++;
									else if (u.default.Utils.EQ_0(e.etAngle - 90)) {
										var s = e.polygon.etIdx,
											l = e.polygon.edge(s);
										t.findIndex(function (t) {
											return (
												t !== e.topFrame &&
												u.default.Utils.EQ_0(t.polygon.polygon.distanceTo(l.middle())[0])
											);
										}) >= 0 && r++;
									}
									return r;
								}),
								(e.prototype.belongsToCj = function (e) {
									var t = e.sideEdges.filter(function (e) {
										return e instanceof u.default.Segment;
									});
									return this.shapeManager.couples
										.filter(function (e) {
											return e instanceof m.CornerJoiner && e.type === m.ShapeType.CornerJoiner;
										})
										.find(function (e) {
											return t.some(function (t) {
												return g.Utils.polyConcideSeg(e.polygon, t);
											});
										});
								}),
								(e.prototype.belongsToConnector = function (e) {
									var t = e.sideEdges.filter(function (e) {
										return e instanceof u.default.Segment;
									});
									return this.shapeManager.connectors.find(function (e) {
										return t.some(function (t) {
											return g.Utils.polyConcideSeg(e.polygon, t);
										});
									});
								}),
								(e.prototype.belongsToOtherFrame = function (e) {
									var t = e.sideEdges.filter(function (e) {
										return e instanceof u.default.Segment;
									});
									return this.frames
										.filter(function (t) {
											return t !== e.topFrame;
										})
										.find(function (e) {
											return t.some(function (t) {
												return g.Utils.polyConcideSeg(e.polygon, t);
											});
										});
								}),
								(e.prototype.belongsToSash = function (e, t) {
									var n = o(
										t.sashManager.sashes,
										t.sashManager.doubleSashes,
										t.sashManager.kfcSashes,
										t.sashManager.doubleKfcSashes,
									).find(function (t) {
										return y.EdgeFinder.Instance.isPolygonConnected(e.polygon, t.polygon);
									});
									if (n) {
										var r = y.EdgeFinder.Instance.connectedEdgeIndex(n.polygon, e.polygon),
											i = y.EdgeFinder.Instance.findDirection(n.polygon, r);
										return (
											i === y.Direction.Up
												? (i = y.Direction.Down)
												: i === y.Direction.Down && (i = y.Direction.Up),
											i
										);
									}
								}),
								(e.prototype.belongsToSashBothSide = function (e, t) {
									var n = e.sideEdges.filter(function (e) {
											return e instanceof u.default.Segment;
										}),
										r = o(
											t.sashManager.sashes,
											t.sashManager.doubleSashes,
											t.sashManager.kfcSashes,
											t.sashManager.doubleKfcSashes,
										);
									return (
										n.filter(function (e) {
											return r.some(function (t) {
												return g.Utils.polyConcideSeg(t.polygon, e);
											});
										}).length > 1
									);
								}),
								(e.prototype.bottomOfDoor = function (e, t) {
									var n = o(
										t.sashManager.sashes,
										t.sashManager.doubleSashes,
										t.sashManager.kfcSashes,
										t.sashManager.doubleKfcSashes,
									)
										.filter(function (e) {
											return e.isDoor;
										})
										.find(function (t) {
											return y.EdgeFinder.Instance.isPolygonConnected(e.polygon, t.polygon);
										});
									if (!n) return !1;
									var r = y.EdgeFinder.Instance.connectedEdgeIndex(n.polygon, e.polygon);
									return y.EdgeFinder.Instance.findDirection(n.polygon, r) === y.Direction.Up;
								}),
								(e.prototype.belongsToFixedSlideSash = function (e, t) {
									return t.sashManager.slides
										.map(function (e) {
											return e.sashes.filter(function (e) {
												return e.isFixed;
											});
										})
										.flat()
										.some(function (t) {
											return y.EdgeFinder.Instance.isPolygonConnected(e.polygon, t.polygon);
										});
								}),
								(e.prototype.belongsToFoldSide = function (e, t) {
									return t.sashManager.folds.some(function (t) {
										var n = y.EdgeFinder.Instance.findIndex2(y.Direction.Left, t.polygon),
											r = y.EdgeFinder.Instance.findIndex2(y.Direction.Right, t.polygon),
											i = t.polygon.edges;
										return [i[n], i[r]].some(function (t) {
											return t instanceof u.default.Segment && g.Utils.polyConcideSeg(e.polygon, t);
										});
									});
								}),
								(e.prototype.fixLength = function (e, t, n) {
									var r, i;
									(e.cc = m.Bar.getLongestLength(t.polygon)),
										(t.polygon.epDock.stDock.type === g.DockType.None ||
											(r = t.polygon.epDock.stDock.dockBar(n))) &&
											(t.polygon.epDock.etDock.type === g.DockType.None ||
												(i = t.polygon.epDock.etDock.dockBar(n))) &&
											((e.cc = this.adjustInsertLength(
												n.profileSizeManager.millingFrame,
												t.polygon,
												r,
												i,
											)),
											r &&
												(e.cc +=
													t.polygon.epDock.stDock.type === g.DockType.Frame
														? r.width
														: r.width / 2),
											i &&
												(e.cc +=
													t.polygon.epDock.etDock.type === g.DockType.Frame
														? i.width
														: i.width / 2));
								}),
								(e.prototype.getFrameCCBars = function (e, t) {
									var n = this,
										r = [],
										i = [];
									return (
										this.fetchFrames(e, t).forEach(function (e) {
											if (e.polygon.circlePolygon()) {
												var t = n.getCircleFrameData(e);
												return r.push.apply(r, o(t)), void i.push.apply(i, o(t));
											}
											var a,
												s = e.sashManager.truncateSashes.length > 0,
												l = n.getCommonFrameData(e);
											s
												? ((a = n.getTruncateFrameData(e)), r.push.apply(r, o(a)))
												: r.push.apply(r, o(l)),
												l.forEach(function (e) {
													e.hasTruncation =
														void 0 !== a &&
														a.length > 0 &&
														a.filter(function (t) {
															return t.shapeId === e.shapeId;
														}).length > 1;
												}),
												i.push.apply(i, o(l));
										}),
										{
											all: r,
											origin: i,
										}
									);
								}),
								(e.prototype.fetchFrames = function (e, t) {
									var n = this.frames;
									return (
										e &&
											e.length > 0 &&
											(n = n.filter(function (t) {
												return e.some(function (e) {
													return e === t.uid;
												});
											})),
										t &&
											t.length > 0 &&
											(n = n.filter(function (e) {
												return !t.some(function (t) {
													return t === e.uid;
												});
											})),
										n
									);
								}),
								(e.prototype.getCircleFrameData = function (e) {
									var t = e.frameManager.bars[0],
										n = t.polygon.mulShape,
										r = n.middle();
									return n.split(r).map(function (n, r) {
										return {
											shapeId: t.id,
											frameId: e.id,
											type: l.frame,
											cc: n.length,
											aa: n.length,
											posType: g.BarPositionType.NoneNone,
											position: 0 === r ? y.Direction.Up : y.Direction.Down,
											sizeType: c.any,
											belongsToCJ: !1,
											cutAngle: '90-90',
											dockCount: 0,
											lineType: h.Arc,
										};
									});
								}),
								(e.prototype.getFrmCornerBraces = function (e, t) {
									var n = [],
										r = {
											shapeId: -1,
											frameId: t.host.topFrame.id,
											type: e,
											cc: 1,
											aa: 1,
											sizeType: c.any,
											posType: g.BarPositionType.NoneNone,
											cutAngle: '90-90',
											lineType: h.Seg,
										};
									return (
										t.bars.forEach(function (e) {
											u.default.Utils.EQ_0(e.stAngle - 45)
												? n.push(
														Object.assign(
															{
																braceType: '斜',
															},
															r,
														),
												  )
												: u.default.Utils.EQ_0(e.stAngle - 90) &&
												  n.push(
														Object.assign(
															{
																braceType: '横竖',
															},
															r,
														),
												  );
										}),
										t.ejw.forEach(function (e) {
											e === g.EdgeJointWay.Separated &&
												n.push(
													Object.assign(
														{
															braceType: '空',
														},
														r,
													),
												);
										}),
										n
									);
								}),
								(e.prototype.getTFCornerBraces = function (e, t) {
									for (var n = [], r = 0; r < 4; r++)
										n.push({
											shapeId: -1,
											frameId: t,
											type: e,
											cc: 1,
											aa: 1,
											sizeType: c.any,
											posType: g.BarPositionType.NoneNone,
											cutAngle: '90-90',
											lineType: h.Seg,
										});
									return n;
								}),
								(e.prototype.getSubFrameCornerBraces = function () {
									return this.shapeManager.subFrames
										.map(function (e) {
											return e.parts.map(function (e) {
												return e.bars.map(function (e) {
													return (function (e, t) {
														var n = {
															shapeId: -1,
															type: l.subFrameCornerBrace,
															cc: 1,
															aa: 1,
															sizeType: c.any,
															posType: g.BarPositionType.NoneNone,
															cutAngle: '90-90',
															lineType: h.Seg,
														};
														return (
															u.default.Utils.EQ_0(e.stAngle - 45)
																? (n = Object.assign(
																		{
																			braceType: '斜',
																		},
																		n,
																  ))
																: u.default.Utils.EQ_0(e.stAngle - 90) &&
																  (n = Object.assign(
																		{
																			braceType: '横竖',
																		},
																		n,
																  )),
															n
														);
													})(e);
												});
											});
										})
										.flat()
										.flat();
								}),
								(e.prototype.cutAngleToward = function (e) {
									var t = e.polygon.mulShape,
										n = e.polygon.stIdx,
										r = e.polygon.etIdx,
										i = e.polygon.edges,
										o = i[n],
										a = i[r],
										s = e.polygon.orientation === u.default.ORIENTATION.CW,
										l = s
											? o.tangentInEnd().angleTo(t.tangentInStart())
											: t.tangentInEnd().angleTo(o.tangentInStart()),
										h = s
											? t.tangentInEnd().angleTo(a.tangentInStart())
											: a.tangentInEnd().angleTo(t.tangentInStart());
									return {
										st: -1 !== n && u.default.Utils.GT(l, Math.PI / 2),
										et: -1 !== r && u.default.Utils.GT(h, Math.PI / 2),
									};
								}),
								(e.prototype.partialReverseTowardExists = function (e) {
									return (
										void 0 !==
										this.reverseTowardRegions.find(function (t) {
											return t.frameId === e;
										}).region
									);
								}),
								(e.prototype.inReverseTowardRegion = function (e, t) {
									var n = this.reverseTowardRegions.find(function (e) {
										return e.frameId === t;
									});
									if (void 0 === n.region) return !1;
									var r = n.region.baseLine,
										i = u.default
											.line(e, r.norm.rotate90CW())
											.intersect(r)[0]
											.distanceTo(n.region.from)[0];
									return (
										-1 !==
										n.region.validRanges.findIndex(function (e) {
											return e.from <= i && i <= e.to;
										})
									);
								}),
								(e.prototype.reverseToward = function (e) {
									e.sashAssignWay &&
										(-1 !== e.sashAssignWay.indexOf('I')
											? (e.sashAssignWay = e.sashAssignWay.replace('I', 'O'))
											: -1 !== e.sashAssignWay.indexOf('O') &&
											  (e.sashAssignWay = e.sashAssignWay.replace('O', 'I')));
								}),
								(e.prototype.getCommonFrameData = function (e) {
									var t = this,
										n = [];
									return (
										e.frameManager.bars.forEach(function (r, i) {
											var o = t.getCommonFrameBarData(r, e);
											t.inReverseTowardRegion(r.polygon.box.center, e.id) && t.reverseToward(o),
												n.push(o);
										}),
										e.polygon.fixFrameCCBars(n),
										this.pushSlideCCBar.parseScreenSlide(e, n, e.frameManager.bars),
										n
									);
								}),
								(e.prototype.getCommonFrameBarData = function (e, t) {
									var n = this,
										r = e.polygon,
										i = r.mulShape,
										o = e.polygon.edges,
										a = this.getSizeType(e),
										s = this.getPosition(u.default.segment(i.start, i.end), t.polygon.box),
										h = this.belongsToCj(e),
										p = this.belongsToConnector(e),
										f = this.belongsToOtherFrame(e),
										d = h && h.attrs ? h.attrs.code : void 0,
										v = this.fillLineType(i),
										w = this.belongsToSash(e, t),
										b = this.bottomOfDoor(e, t),
										S = this.belongsToFixedSlideSash(e, t),
										_ = this.isDoubleSideFrame(e, t),
										P = this.belongsToFoldSide(e, t) ? l.frame : '',
										x = t.sashManager.glassSashes.shift(),
										D =
											x && !this.partialReverseTowardExists(t.id)
												? x.sashAssignWay
												: t.defaultSashAssignWay,
										T = !!x && x.isDoor,
										O = this.holeShape.some(function (t) {
											return t.contains(e.polygon.mulShape.middle());
										}),
										M = 0,
										E = 0;
									a === c.width
										? (this.vconnectors.some(function (e) {
												return e.polygon.contains(i.start);
										  }) && M++,
										  this.vconnectors.some(function (e) {
												return e.polygon.contains(i.end);
										  }) && M++,
										  this.vcorners.some(function (e) {
												return e.polygon.contains(i.start);
										  }) && E++,
										  this.vcorners.some(function (e) {
												return e.polygon.contains(i.end);
										  }) && E++)
										: a === c.height &&
										  (this.hconnectors.some(function (e) {
												return e.polygon.contains(i.start);
										  }) && M++,
										  this.hconnectors.some(function (e) {
												return e.polygon.contains(i.end);
										  }) && M++,
										  this.hcorners.some(function (e) {
												return e.polygon.contains(i.start);
										  }) && E++,
										  this.hcorners.some(function (e) {
												return e.polygon.contains(i.end);
										  }) && E++);
									var I,
										C,
										k,
										F,
										j = i.length,
										A = new y.DockParam(),
										L = o.find(function (e) {
											return i.contains(e.middle());
										});
									if (L && L instanceof u.default.Segment) {
										var H = L.tangentInStart(),
											R = i.tangentInStart();
										if (
											((L = u.default.Utils.EQ_0(H.dot(R) - 1) ? L : L.reverse()),
											-1 !== (A = this.getDimParam1(e.epDock, L, t)).a || -1 !== A.b)
										) {
											var B = t.profileSizeManager;
											j = this.getAdjustedLength(L.length, e.epDock, B.frame, B.frameMullion, A, t);
										}
									}
									if (i instanceof u.default.Segment && t instanceof m.ThreedArcFrame) {
										var W = t,
											z = t.shortArcDim ? t.depthStruct.frame : 0;
										j = this.fixDepthPosition(i, W.arcInTopView.r.valueOf(), j, z);
									}
									var N = this.cutAngleToward(e);
									(this.option.cutAngleSort &&
										t.polygon.orientation === u.default.ORIENTATION.CCW) ||
									(!this.option.cutAngleSort && t.polygon.orientation === u.default.ORIENTATION.CW)
										? ((I = e.stAngle), (C = e.etAngle), (k = N.st), (F = N.et))
										: ((this.option.cutAngleSort &&
												t.polygon.orientation !== u.default.ORIENTATION.CCW) ||
												(!this.option.cutAngleSort &&
													t.polygon.orientation !== u.default.ORIENTATION.CW)) &&
										  ((I = e.etAngle), (C = e.stAngle), (k = N.et), (F = N.st));
									var U = e.epDock.stDock.type === g.DockType.Mullion,
										J = e.epDock.etDock.type === g.DockType.Mullion,
										V = e.epDock.stDock.type,
										G = e.epDock.etDock.type;
									t.polygon.orientation === u.default.ORIENTATION.CW &&
										((U = e.epDock.etDock.type === g.DockType.Mullion),
										(J = e.epDock.stDock.type === g.DockType.Mullion),
										(V = e.epDock.etDock.type),
										(G = e.epDock.stDock.type));
									var q = {
										serial: e.serial,
										barSerial: e.serial,
										shapeId: e.id,
										frameId: t.id,
										type: this.isSpecificType(e.type) ? e.type : l.frame,
										cc: j,
										aa: m.Bar.getLongestLength(r),
										posType: e.epDock.posType(e.topFrame),
										position: s,
										sizeType: a,
										belongsToCJ: !!h,
										cjCode: d || '',
										belongsToConnector: !!p,
										belongsToOtherFrame: !!f,
										cutAngle: e.cutAngle,
										dockCount: this.dockCount(e),
										lineType: v,
										truncate: !1,
										belongsToSash: w,
										bottomOfDoor: b,
										belongsToFixedSlideSash: S,
										isDoubleSideFrame: _,
										foldSideTrack: P,
										epDock: e.epDock,
										separatedJointsCount: this.separatedJointsCount(e, t),
										stAngle: I,
										stAngleOppositeToward: k,
										etAngle: C,
										etAngleOppositeToward: F,
										sashAssignWay: D,
										isDoor: T,
										splitAtStart: U,
										splitAtEnd: J,
										stDockType: V,
										etDockType: G,
										belongsToHole: O,
										connectorDockCount: M,
										cornerDockCount: E,
									};
									if (
										(-1 !== A.a && (q.a = A.a),
										-1 !== A.b && (q.b = A.b),
										!this.checkStandardSeg(e, t) || !this.checkConvex(e, t))
									) {
										if (4 !== o.length) return;
										this.fixLength(q, e, t);
									}
									if (this.option.withHoleSegments) {
										var K = this.barSegments(e, t);
										t.polygon.orientation === u.default.ORIENTATION.CW &&
											K.forEach(function (e) {
												n.reverseSegments(e.segments), e.dockBars.reverse();
											}),
											(q.segments = K);
									}
									return q;
								}),
								(e.prototype.isDoubleSideFrame = function (e, t) {
									var n =
										this.frames
											.map(function (e) {
												return o(e.sashManager.slides, e.sashManager.folds);
											})
											.flat().length > 0;
									if (this.frames.length < 2 || n) return !1;
									var r = this.frames
										.filter(function (e) {
											return e !== t;
										})
										.map(function (e) {
											return o(
												e.sashManager.sashes,
												e.sashManager.doubleSashes,
												e.mulManager.glasses,
											);
										})
										.flat();
									return (
										e.polygon.edges.filter(function (e) {
											return (
												e instanceof u.default.Segment &&
												r.some(function (t) {
													return g.Utils.polyConcideSeg(t.polygon, e);
												})
											);
										}).length > 0
									);
								}),
								(e.prototype.barSegments = function (e, t) {
									var n = this,
										r = e.sideEdgesWithDirection.map(function (r) {
											var i = n.dockMuls(e, r.edge, t);
											return {
												side: r.direction,
												segments: n.barSegmentsOnSide(e, r.edge, i, t),
												dockBars: n.dockBarsOnSide(e, i, t),
											};
										});
									if (
										[m.ShapeType.Frame, m.ShapeType.Sash].some(function (t) {
											return t === e.where;
										})
									) {
										var i = r.find(function (e) {
											return e.segments.some(function (e) {
												return e.dock.length > 0;
											});
										});
										r = i ? [i] : [];
									}
									return r;
								}),
								(e.prototype.reverseSegments = function (e) {
									e.forEach(function (e) {
										var t = e.startProfileSize;
										(e.startProfileSize = e.endProfileSize), (e.endProfileSize = t);
										var n = e.startProfileType;
										(e.startProfileType = e.endProfileType), (e.endProfileType = n);
									}),
										e.reverse();
								}),
								(e.prototype.dockMuls = function (e, t, n) {
									var r = e.polygon.mulShape,
										i = u.default.line(r.start, r.end),
										o = n.mulManager.bars
											.filter(function (t) {
												return t !== e;
											})
											.filter(function (e) {
												return e.polygon.mulShape instanceof u.default.Segment;
											})
											.filter(function (e) {
												return g.Utils.polyConcideSeg(e.polygon, t);
											});
									return (
										o.sort(function (e, t) {
											var n = e.polygon.mulShape.middle().projectionOn(i),
												o = t.polygon.mulShape.middle().projectionOn(i);
											return r.start.distanceTo(n)[0] - r.start.distanceTo(o)[0];
										}),
										o
									);
								}),
								(e.prototype.dockBarsOnSide = function (e, t, n) {
									return t.map(function (e) {
										return {
											reinforcedMullion:
												e.where === m.ShapeType.FrameMullion &&
												n instanceof m.Frame &&
												n.mulManager.splitter.lines[e.polyId.idx].reinforced,
											profileSize: n.mulManager.splitter.lineProfileSizes[e.polyId.idx],
										};
									});
								}),
								(e.prototype.distinctSashesByPolyId = function (e) {
									var t = [],
										n = [];
									return (
										e.sort(function (e, t) {
											var n = function (e) {
												return e === m.ShapeType.Sash
													? 1
													: e === m.ShapeType.DoubleSash
													? 2
													: e === m.ShapeType.Screen
													? 3
													: 4;
											};
											return n(e.type) - n(t.type);
										}),
										e.forEach(function (e) {
											t.some(function (t) {
												return e.polyId.equalTo(t);
											}) || (t.push(e.polyId), n.push(e));
										}),
										n
									);
								}),
								(e.prototype.barSegmentsOnSide = function (e, t, n, r) {
									var i = e.polygon.mulShape,
										a = e.polygon.epDock,
										s = r.polygon.edges.length;
									if (e.where === m.ShapeType.Frame) {
										var h = function (e) {
												var t = e.dockBar(r);
												return e.type === g.DockType.Frame
													? t.width
													: e.type === g.DockType.Mullion
													? t.width / 2
													: 0;
											},
											c = h(a.stDock),
											p = h(a.etDock);
										i = u.default.segment(
											i.start.translate(i.tangentInStart().multiply(c)),
											i.end.translate(i.tangentInEnd().multiply(p)),
										);
									}
									var f = u.default.line(i.start, i.end),
										d = n.map(function (e) {
											return e.polygon.mulShape.middle().projectionOn(f);
										}),
										y = [];
									d.sort(function (e, t) {
										var n = i.start.distanceTo(e)[0] - i.start.distanceTo(t)[0];
										return y.push(n), n;
									});
									var v = 0,
										w = 0;
									if (e.where === m.ShapeType.Frame) {
										var b = function (e) {
												return e.type !== g.DockType.Frame && e.type !== g.DockType.Mullion;
											},
											S = (e.polyId.idx - 1 + s) % s;
										v = b(a.stDock) ? r.frameManager.getEdgeWidth(S) : 0;
										var _ = (e.polyId.idx + 1) % s;
										w = b(a.etDock) ? r.frameManager.getEdgeWidth(_) : 0;
									} else if (e.where === m.ShapeType.FrameMullion) {
										var P = r.profileSizeManager.frame,
											x = r.mulManager.splitter.lines[e.polyId.idx];
										x.start.split && a.stDock.type === g.DockType.None && (v = P),
											x.end.split && a.etDock.type === g.DockType.None && (w = P);
									}
									n.sort(function () {
										return y.shift();
									});
									var D = n.map(function (e) {
											return e.width / 2;
										}),
										T = o([v], D, [w]),
										O = a.stDock.type === g.DockType.Mullion ? l.mullion : l.frame,
										M = a.etDock.type === g.DockType.Mullion ? l.mullion : l.frame,
										E = o(
											[O],
											n.map(function () {
												return l.mullion;
											}),
											[M],
										),
										I = r.mulManager.glasses.filter(function (e) {
											return e instanceof m.Glass;
										}),
										C = o(r.sashManager.sashes, r.sashManager.doubleSashes),
										k = r instanceof m.Frame ? this.distinctSashesByPolyId(C) : [],
										F = o(I, k).filter(function (e) {
											return g.Utils.polyConcideSeg(e.polygon, t);
										});
									F.sort(function (e, t) {
										var n = e.polygon.box.center,
											r = t.polygon.box.center,
											o = n.projectionOn(f),
											a = r.projectionOn(f);
										return i.start.distanceTo(o)[0] - i.start.distanceTo(a)[0];
									});
									var j = [];
									return (
										d.unshift(i.start),
										d.push(i.end),
										d.forEach(function (e, t) {
											if (t !== d.length - 1) {
												var n = d[t + 1];
												j.push(n.distanceTo(e)[0]);
											}
										}),
										j.map(function (e, t) {
											var n = [],
												r = F[t];
											if ((r && n.push(r), r instanceof m.PushSash || r instanceof m.DoubleSash)) {
												var i = C.find(function (e) {
													return e !== r && e.polyId.equalTo(r.polyId);
												});
												i && n.push(i);
											}
											return {
												length: e,
												dock: n.map(function (e) {
													return {
														dockType: e.type,
														sashAssignWay: e instanceof m.PushSash ? e.sashAssignWay : void 0,
													};
												}),
												startProfileSize: T[t],
												endProfileSize: T[t + 1],
												startProfileType: E[t],
												endProfileType: E[t + 1],
											};
										})
									);
								}),
								(e.prototype.computeReverseTowardRegion = function (e) {
									var t = [],
										n = [],
										r = [];
									if (
										(e.sashManager.sashes.forEach(function (i) {
											if (i.openToward !== e.openToward) {
												var o = !1;
												i.polygon.edDock.docks.forEach(function (r) {
													var i = r.dockBar(e);
													if (
														i &&
														!t.some(function (e) {
															return e === i;
														}) &&
														i.where === m.ShapeType.FrameMullion
													) {
														var a = e.mulManager.splitter.lines[i.polyId.idx];
														a.line instanceof u.default.Line &&
															a.start.split &&
															a.end.split &&
															((o = !0), n.push(a.line), t.push(i));
													}
												}),
													o && r.push(i);
											}
										}),
										0 !== n.length)
									) {
										var i = u.default.line(u.default.point(), n[0].norm.rotate90CW()),
											o = e.polygon.box.low.projectionOn(i),
											a = e.polygon.box.high.projectionOn(i).distanceTo(o)[0],
											s = n
												.map(function (e) {
													return e.intersect(i)[0].distanceTo(o)[0];
												})
												.sort(function (e, t) {
													return e - t;
												}),
											l = [];
										l.push({
											from: 0,
											to: s[0],
										}),
											s.forEach(function (e, t) {
												var n = t === s.length - 1 ? a : s[t + 1];
												l.push({
													from: e,
													to: n,
												});
											});
										var h = r.map(function (e) {
												return e.polygon.box.center.projectionOn(i).distanceTo(o)[0];
											}),
											c = l.filter(function (e) {
												return h.some(function (t) {
													return e.from < t && t < e.to;
												});
											});
										return {
											from: o,
											baseLine: i,
											validRanges: c,
										};
									}
								}),
								(e.prototype.splitMuls = function (e) {
									var t = [];
									return (
										e.sashManager.sashes.forEach(function (n) {
											n.openToward !== e.openToward &&
												n.polygon.edDock.docks.forEach(function (r) {
													var i = r.dockBar(e);
													if (i && i.where === m.ShapeType.FrameMullion) {
														var o = e.mulManager.splitter.lines[i.polyId.idx];
														o.line instanceof u.default.Line &&
															o.start.split &&
															o.end.split &&
															t.push({
																bar: i,
																sash: n,
															});
													}
												});
										}),
										t
									);
								}),
								(e.prototype.truncateBars = function (e) {
									var t = [],
										n = [];
									return (
										e.sashManager.truncateSashes.forEach(function (r) {
											r.polygon.edDock.docks.forEach(function (i) {
												var o = i.dockBar(e);
												if (o.where === m.ShapeType.FrameMullion) {
													var a = o.polygon.mulShape;
													if (!(a instanceof u.default.Segment || a instanceof u.default.Arc))
														return;
													if (
														n.some(function (e) {
															return e.bar === o;
														})
													)
														return;
													var s =
														o.epDock.stDock.type === g.DockType.Frame &&
														o.epDock.etDock.type === g.DockType.Frame;
													n.push({
														bar: o,
														sashPosition: r.polygon.box.center,
														frameDockOnly: s,
													});
												} else if (o.where === m.ShapeType.Frame) {
													if (
														t.some(function (e) {
															return e === o;
														})
													)
														return;
													t.push(o);
												}
											});
										}),
										{
											mullions: n,
											frames: t,
										}
									);
								}),
								(e.prototype.getTruncateFrameData = function (e) {
									var t = this,
										n = [],
										r = this.truncateBars(e);
									return (
										e.frameManager.bars.forEach(function (i, o) {
											var a = i.polygon,
												s = a.mulShape,
												l = t.getCommonFrameBarData(i, e),
												h = r.mullions.filter(function (e) {
													return (
														!!e.frameDockOnly &&
														e.bar.endpointEdges
															.filter(function (e) {
																return e instanceof u.default.Segment;
															})
															.some(function (e) {
																return g.Utils.polyConcideSeg(a, e);
															})
													);
												});
											if (h.length > 0) {
												var c = h.map(function (e) {
													return e.sashPosition;
												});
												h.sort(function (e, t) {
													var n = e.bar.polygon.mulShape,
														r = u.default.line(n.start, n.end).intersect(s).pop(),
														i = t.bar.polygon.mulShape,
														o = u.default.line(i.start, i.end).intersect(s).pop();
													return s.start.distanceTo(r)[0] - s.start.distanceTo(o)[0];
												});
												for (
													var p = s.start,
														f = function (t) {
															var r = u.default.point();
															if (t < h.length) {
																var o = h[t].bar.polygon.mulShape;
																r = u.default.line(o.start, o.end).intersect(s).pop();
															} else r = s.end;
															var a = Object.assign({}, l),
																f = u.default.segment(p, r);
															(a.cc = f.length), (a.aa = f.length);
															var d = 0 === t ? i.polygon.epDock.stDock : g.Dock.None(),
																y = t === h.length ? i.polygon.epDock.etDock : g.Dock.None();
															a.posType = new g.EndpointDock(d, y).posType(e);
															var m = 0 === t ? i.stAngle : '90',
																v = t === h.length ? i.etAngle : '90';
															(a.cutAngle = [m, v].sort().join('-')), (a.dockCount = 0);
															var w = c.some(function (e) {
																return e.projectionOn(u.default.line(s.start, s.end)).on(f);
															});
															(a.truncate = w), n.push(a), (p = r);
														},
														d = 0;
													d <= h.length;
													d++
												)
													f(d);
											} else
												r.frames.some(function (e) {
													return e === i;
												}) && (l.truncate = !0),
													n.push(l);
										}),
										n
									);
								}),
								(e.prototype.checkConvex = function (e, t) {
									if (e.parent && e.parent.polygon.isRectangle()) return !0;
									var n = t.polygon;
									if (n.isRectangle()) return !0;
									var r = e.polygon.mulShape;
									if (!(r instanceof u.default.Segment)) return !1;
									var i = t.polygon.edges,
										o = g.Utils.getPrevIdx(e.polyId.idx, i.length),
										a = g.Utils.getNextIdx(e.polyId.idx, i.length),
										s = i[o],
										l = i[a];
									if (void 0 === s || void 0 === l) throw new Error('no edge');
									var h = u.default.vector(s.start, s.end).cross(u.default.vector(r.start, r.end)),
										c = u.default.vector(r.start, r.end).cross(u.default.vector(l.start, l.end));
									return n.orientation === u.default.ORIENTATION.CCW
										? u.default.Utils.GE(h, 0) && u.default.Utils.GE(c, 0)
										: u.default.Utils.LT(h, 0) && u.default.Utils.LT(c, 0);
								}),
								(e.prototype.separatedJointsCount = function (e, t) {
									var n = t.frameManager.ejw,
										r = n[e.polyId.idx] === g.EdgeJointWay.Separated,
										i = t.polygon.edges.length;
									return (
										(r ? 1 : 0) + (n[(e.polyId.idx + 1) % i] === g.EdgeJointWay.Separated ? 1 : 0)
									);
								}),
								(e.prototype.getPosition = function (e, t) {
									var n;
									if (g.Utils.isSegVertical(e))
										g.Utils.isZero(e.start.x - t.xmin)
											? (n = y.Direction.Left)
											: g.Utils.isZero(e.start.x - t.xmax) && (n = y.Direction.Right);
									else if (g.Utils.isSegHorizontal(e))
										g.Utils.isZero(e.start.y - t.ymin)
											? (n = y.Direction.Up)
											: g.Utils.isZero(e.start.y - t.ymax) && (n = y.Direction.Down);
									else {
										var r = e instanceof u.default.Segment && g.Utils.isSegVertical(e),
											i = r
												? u.default.line(t.center, u.default.vector(1, 0))
												: u.default.line(t.center, u.default.vector(0, 1)),
											o = e.middle().leftTo(i);
										n = r
											? o
												? y.Direction.Right
												: y.Direction.Left
											: o
											? y.Direction.Down
											: y.Direction.Up;
									}
									return n;
								}),
								(e.prototype.shouldExcludePolygon = function (e) {
									return (
										e instanceof m.Ear2Polygon ||
										e instanceof m.PointedEarPolygon ||
										e instanceof m.Kfc3Polygon
									);
								}),
								(e.prototype.getCoupleBars = function () {
									var e = this,
										t = [],
										n = this.shapeManager.connectors,
										r = this.shapeManager.cornerJoiners,
										i = n
											.map(function (e) {
												return e.sideEdges;
											})
											.flat(),
										o = r
											.map(function (e) {
												return e.sideEdges;
											})
											.flat();
									return (
										this.shapeManager.couples.forEach(function (n) {
											if (
												!(n instanceof m.WallCornerJoiner || n instanceof m.PanoramicCornerJoiner)
											) {
												var r = n.endpointEdges,
													a = r.filter(function (e) {
														return i.some(function (t) {
															return g.Utils.segCoincide(t, e);
														});
													}).length,
													s = r.filter(function (e) {
														return o.some(function (t) {
															return g.Utils.segCoincide(t, e);
														});
													}).length,
													l = n.polygon.mulShape,
													h = e.getSizeType(n);
												n instanceof m.Connector
													? h === c.width
														? e.hconnectors.push(n)
														: h === c.height && e.vconnectors.push(n)
													: n instanceof m.CornerJoiner &&
													  n.type === m.ShapeType.CornerJoiner &&
													  (h === c.width
															? e.hcorners.push(n)
															: h === c.height && e.vcorners.push(n));
												var u = e.fillLineType(l),
													p = n.cutAngle,
													f = {
														shapeId: n.id,
														type: n.type,
														cc: l.length,
														aa: l.length,
														posType: g.BarPositionType.NoneNone,
														sizeType: h,
														lineType: u,
														cutAngle: p,
														attrs: n.attrs,
														profileSize: n.profileSize,
														screwTimes: n.screwTimes,
														connectorDockCount: a,
														cornerDockCount: s,
													};
												t.push(f),
													n instanceof m.CornerJoiner &&
														((f.squareCorner = n.squareCorner), (f.angle = n.skewAngle));
											}
										}),
										t
									);
								}),
								(e.prototype.getSubFrameCCBars = function () {
									var e = this;
									return this.shapeManager.subFrames
										.map(function (t) {
											return t.parts.map(function (t) {
												return t.bars.map(function (n) {
													return (function (t, n) {
														var r = t.polygon.mulShape,
															i = e.getPosition(r, n.polygon.box),
															o = e.getSizeType(t),
															a = e.fillLineType(r),
															s = t.epDock.posType(void 0),
															h = 0;
														return (
															t.epDock.stDock.type !== g.DockType.None && h++,
															t.epDock.etDock.type !== g.DockType.None && h++,
															{
																serial: t.serial,
																barSerial: t.serial,
																cc: r.length,
																aa: m.Bar.getLongestLength(t.polygon),
																type: l.subFrame,
																cutAngle: t.cutAngle,
																posType: s,
																sizeType: o,
																lineType: a,
																position: i,
																dockCount: h,
															}
														);
													})(n, t);
												});
											});
										})
										.flat()
										.flat();
								}),
								(e.prototype.getPushSashBars = function (e, t) {
									var n = this,
										r = [];
									return (
										this.fetchFrames(e, t).forEach(function (e) {
											var t = e.profileSizeManager,
												i = t.frame,
												a = t.frameMullion,
												s = [],
												h = [],
												c = o(
													e.sashManager.sashes,
													e.sashManager.shadePushSashes,
													e.sashManager.kfcSashes,
												);
											c.sort(function (e, t) {
												return e.type === m.ShapeType.Sash ? -1 : 0;
											}),
												c.forEach(function (e) {
													if (e.polygon.isRectangle()) {
														var t = n.getStandardBarData(
																e.frameManager.bars.filter(function (e) {
																	return (
																		e.polygon.mulShape instanceof u.default.Segment &&
																		g.Utils.isHorizOrVer(e.polygon.mulShape)
																	);
																}),
																i,
																a,
																e.type,
																e.polygon.box,
																e.topFrame,
																!1,
															),
															c = e.mulManager.glasses.find(function (e) {
																return e.serial.text;
															});
														if (
															(t.forEach(function (t) {
																(t.id = e.id),
																	(t.sashAssignWay = e.sashAssignWay),
																	(t.isDoor = e.isDoor),
																	(t.isSlide = e.slide !== d.OpenDirection.None),
																	(t.serial = c ? c.serial.text : void 0),
																	(t.originDistanceToSash = n.distanceToSash(e)),
																	(t.lockPosition = n.lockPosition(e)),
																	(t.withTurningFrame = e.withTurningFrame),
																	(t.multiLockPoints = e.hardwareManager.multiLockPoints),
																	(t.hingeCount = e.hardwareManager.hingeCount),
																	(t.openDegree = e.openDegree);
															}),
															r.push.apply(r, o(t)),
															s.every(function (t) {
																return !t.equalTo(e.polyId);
															}) &&
																e.withTurningFrame &&
																(s.push(e.polyId),
																t.forEach(function (t) {
																	var i = Object.assign({}, t);
																	if (((i.type = l.sashTurningFrame), 'down' === i.position)) {
																		var o = y.EdgeFinder.Instance.findIndex2(
																			y.Direction.Down,
																			e.polygon,
																		);
																		if (!e.polygon.edDock.docks[o].dockBar(e.topFrame)) return;
																		i.segments = n.mockSashTurningFrameSegments(i, e);
																	}
																	r.push(i);
																}),
																r.push.apply(
																	r,
																	o(
																		n.getTFCornerBraces(
																			l.sashTurningFrameCornerBrace,
																			e.topFrame.id,
																		),
																	),
																)),
															h.every(function (t) {
																return !t.equalTo(e.polyId);
															}) && e.type === m.ShapeType.Screen)
														) {
															h.push(e.polyId);
															var p = t.map(function (e) {
																var t = Object.assign({}, e);
																return (t.type = l.screenFrame), t;
															});
															r.push.apply(r, o(p));
														}
													}
												});
										}),
										r
									);
								}),
								(e.prototype.mockSashTurningFrameSegments = function (e, t) {
									var n = this,
										r = t.polygon.box,
										i = r.xmax - r.xmin,
										o = function (e) {
											return e === g.DockType.Mullion ? l.mullion : l.frame;
										},
										a = [
											{
												side: y.Direction.Up,
												segments: [
													{
														length: i,
														dock: [
															{
																dockType: t.type,
																sashAssignWay: t instanceof m.PushSash ? t.sashAssignWay : void 0,
															},
														],
														startProfileSize: 0,
														endProfileSize: 0,
														startProfileType: o(e.epDock.stDock.type),
														endProfileType: o(e.epDock.etDock.type),
													},
												],
												dockBars: [],
											},
										];
									return (
										t.polygon.orientation === u.default.ORIENTATION.CW &&
											a.forEach(function (e) {
												return n.reverseSegments(e.segments);
											}),
										a
									);
								}),
								(e.prototype.lockPosition = function (e) {
									var t = e.hardwareManager.handleEdge;
									if (t && t instanceof u.default.Segment && !e.hardwareManager.handle.hidden)
										return this.getPosition(t, e.polygon.box);
								}),
								(e.prototype.getAntitheftBars = function (e, t) {
									var n = this,
										r = [];
									return (
										this.fetchFrames(e, t).forEach(function (e) {
											var t = e.profileSizeManager,
												i = t.frame,
												a = t.frameMullion;
											e.sashManager.thefts.forEach(function (e) {
												var t = n.getStandardBarData(
													e.frameManager.bars.filter(function (e) {
														return (
															e.polygon.mulShape instanceof u.default.Segment &&
															g.Utils.isHorizOrVer(e.polygon.mulShape)
														);
													}),
													i,
													a,
													e.type,
													e.polygon.box,
													e.topFrame,
													!0,
												);
												t.forEach(function (t) {
													(t.id = e.id),
														(t.serial = e.sashSerial),
														(t.openable = e.openable),
														(t.withSash = e.withSash);
												}),
													r.push.apply(r, o(t));
											});
										}),
										r
									);
								}),
								(e.prototype.getOneSashBars = function (e, t, n, r) {
									var i = this;
									void 0 === r && (r = !1);
									var o = e.topFrame.profileSizeManager,
										a = o.frame,
										s = o.frameMullion,
										l = [];
									if (!e.polygon.isRectangle()) return [];
									var h = e.frameManager.bars.filter(function (e) {
										return (
											e.polygon.mulShape instanceof u.default.Segment &&
											g.Utils.isHorizOrVer(e.polygon.mulShape)
										);
									});
									return (
										this.getStandardBarData(h, a, s, e.type, e.polygon.box, e, !1, r).forEach(
											function (r, o) {
												if (((r.id = e.id), (r.isashId = e.id), r.sizeType === c.width))
													(r.cc = t), (r.aa = t);
												else {
													if (r.sizeType !== c.height) return;
													(r.cc = n), (r.aa = n);
												}
												var a = h[o];
												if (i.option.withHoleSegments && e instanceof m.Sash) {
													var s = i.barSegments(a, e);
													e.polygon.orientation === u.default.ORIENTATION.CW &&
														s.forEach(function (e) {
															i.reverseSegments(e.segments), e.dockBars.reverse();
														}),
														(r.segments = s);
												}
												if (e instanceof m.PushSash) {
													var p = void 0,
														f = void 0;
													(i.option.sashBarsCutAngleSort &&
														a.polygon.orientation === u.default.ORIENTATION.CCW) ||
													(!i.option.sashBarsCutAngleSort &&
														a.polygon.orientation === u.default.ORIENTATION.CW)
														? ((p = a.stAngle), (f = a.etAngle))
														: ((i.option.sashBarsCutAngleSort &&
																a.polygon.orientation !== u.default.ORIENTATION.CCW) ||
																(!i.option.sashBarsCutAngleSort &&
																	a.polygon.orientation !== u.default.ORIENTATION.CW)) &&
														  ((p = a.etAngle), (f = a.stAngle)),
														(r.stAngle = p),
														(r.etAngle = f);
												}
												l.push(r);
											},
										),
										e instanceof m.SlideSash && this.slideCCBar.addSlideInfo(l, e),
										l
									);
								}),
								(e.prototype.getOneISashBars = function (e, t, n, r) {
									var i = this,
										o = e.topFrame.profileSizeManager,
										a = o.frame,
										s = o.frameMullion,
										l = [];
									if (
										(e.sashes.forEach(function (o, h) {
											if (o.polygon.isRectangle()) {
												var p = i.getStandardBarData(
														o.frameManager.bars.filter(function (e) {
															return (
																e.polygon.mulShape instanceof u.default.Segment &&
																g.Utils.isHorizOrVer(e.polygon.mulShape)
															);
														}),
														a,
														s,
														o.type,
														o.polygon.box,
														o,
														!1,
													),
													f = r[h];
												p.forEach(function (r) {
													if (
														((r.id = e.id),
														(r.sashNumber = o.sashNumber),
														(r.sashCount = e.sashCount),
														(r.columnCount = e.columnCount),
														(r.expandHorizontally = e.expandHorizontally),
														(r.barOverlapsCount = e.barOverlapsCount),
														(r.sashGapsCount = e.sashGapsCount),
														e instanceof m.Fold &&
															((r.connectGapsCount = e.connectGapsCount),
															(r.touchGapsCount = e.touchGapsCount),
															(r.sideTouchGapsCount = e.sideTouchGapsCount)),
														r.sizeType === c.width)
													)
														(r.cc = t), (r.aa = t);
													else {
														if (r.sizeType !== c.height) return;
														(r.cc = n), (r.aa = n);
													}
													if (((r.sashAssignWay = e.sashAssignWay), e instanceof m.DoubleSash)) {
														r.sashAssignWay = o.sashAssignWay;
														var a = o,
															s = a.mulManager.glasses.find(function (e) {
																return e.serial.text;
															});
														(r.serial = s ? s.serial.text : void 0),
															(r.lockPosition = i.lockPosition(a));
													}
													(r.isDoor = e.isDoor),
														(o instanceof m.SlideSash ||
															o instanceof m.PushSash ||
															o instanceof m.FoldSash) &&
															(-1 !== o.fixedWidth && (r.fixedWidth = o.fixedWidth),
															o instanceof m.PushSash &&
																((r.originDistanceToSash = f),
																(r.multiLockPoints = o.hardwareManager.multiLockPoints),
																(r.hingeCount = o.hardwareManager.hingeCount)),
															o instanceof m.SlideSash &&
																((r.originDistanceToSash = f),
																(r.isFixed = o.isFixed),
																(r.trackIndex = o.trackNo),
																(r.trackCount = o.host.realTracksCount),
																(r.screenTracksCount = o.host.screenTracksCount))),
														l.push(r);
												});
											}
										}),
										e instanceof m.Slide && e.topFrame instanceof m.ThreedArcFrame)
									) {
										var h = e.topFrame.depthStruct,
											p = h.sash,
											f = e.appliedOption.tracksCount;
										if (2 === f && f === p.length) {
											var d = e.topFrame.arcInTopView,
												y = e.topFrame.shortArcDim ? d.r.valueOf() + h.frame : d.r.valueOf(),
												v = p.map(function (e) {
													return y - e;
												}),
												w = (g.Utils.totalAngleOfArc(d) * t) / d.length,
												b = v.map(function (e, t) {
													var n = v[(t + 1) % v.length];
													return ((w * n) / (e + n)) * 2 * e;
												});
											l.forEach(function (e) {
												e.sizeType === c.width && (e.cc = b[e.trackIndex - 1]);
											});
										}
									}
									return l;
								}),
								(e.prototype.getISashBars = function (e, t) {
									var n = this,
										r = [];
									return (
										this.fetchFrames(e, t).forEach(function (e) {
											var t = e.profileSizeManager,
												i = t.frame,
												a = t.frameMullion,
												s = e.sashManager.doubleSashes;
											s.sort(function (e, t) {
												return e.type === m.ShapeType.DoubleSash ? -1 : 0;
											});
											var h = o(
													s,
													e.sashManager.doubleKfcSashes,
													e.sashManager.folds,
													e.sashManager.slides,
												),
												p = [];
											h.forEach(function (t) {
												var s = [],
													h = t.polygon.edges;
												if (t.polygon.isRectangle()) {
													var f = new g.EndpointDock(),
														d = new g.EndpointDock(),
														v = t.polygon.edDock.docks,
														w = {
															wseg: u.default.segment(),
															hseg: u.default.segment(),
														};
													g.Utils.isSegVertical(h[0])
														? ((w.wseg = h[1]),
														  (w.hseg = h[0]),
														  v[0].dockBar(t.topFrame),
														  h[0].contains(w.wseg.start)
																? ((f.stDock = v[0]), (f.etDock = v[2]))
																: ((f.stDock = v[2]), (f.etDock = v[0])),
														  v[3].dockBar(t.topFrame),
														  h[3].contains(w.hseg.start)
																? ((d.stDock = v[3]), (d.etDock = v[1]))
																: ((d.stDock = v[1]), (d.etDock = v[3])))
														: ((w.wseg = h[0]),
														  (w.hseg = h[1]),
														  v[3].dockBar(t.topFrame),
														  h[3].contains(w.wseg.start)
																? ((f.stDock = v[3]), (f.etDock = v[1]))
																: ((f.stDock = v[1]), (f.etDock = v[3])),
														  v[0].dockBar(t.topFrame),
														  h[0].contains(w.hseg.start)
																? ((d.stDock = v[0]), (d.etDock = v[2]))
																: ((d.stDock = v[2]), (d.etDock = v[0])));
													var b = t.polygon.box,
														S = b.xmax - b.xmin,
														_ = b.ymax - b.ymin,
														P = t.sashes[0],
														x = P.frameManager.bars,
														D = n.getDimParam1(f, w.wseg, t.topFrame),
														T = n.getAdjustedLength(S, f, i, a, D, e),
														O = n.getDimParam1(d, w.hseg, t.topFrame),
														M = n.getAdjustedLength(_, d, i, a, O, e);
													n
														.getStandardBarData(
															x.filter(function (e) {
																return (
																	e.polygon.mulShape instanceof u.default.Segment &&
																	g.Utils.isHorizOrVer(e.polygon.mulShape)
																);
															}),
															i,
															a,
															t.type,
															P.polygon.box,
															P,
															!1,
														)
														.forEach(function (i, o) {
															if (
																((i.id = t.id),
																(i.serial = t.serial),
																(i.sashAssignWay = t.sashAssignWay),
																(i.sashNumber = 0),
																(i.sashCount = t.sashCount),
																(i.columnCount = t.columnCount),
																(i.isDoor = t.isDoor),
																(i.barOverlapsCount = t.barOverlapsCount),
																(i.sashGapsCount = t.sashGapsCount),
																t instanceof m.DoubleSash
																	? ((i.withTurningFrame = t.withTurningFrame),
																	  (i.isScreen = t.type === m.ShapeType.DoubleScreen))
																	: t instanceof m.Fold &&
																	  (i.slidePositionsCount = t.slidePositionsCount),
																i.sizeType === c.width)
															)
																(i.cc = T),
																	(i.aa = S),
																	(i.posType = f.posType(e)),
																	(i.reinforcedDockCount = n.getReinforcedDockCount(f, e)),
																	-1 !== D.a && (i.a = D.a),
																	-1 !== D.b && (i.b = D.b);
															else {
																if (i.sizeType !== c.height) return;
																(i.cc = M),
																	(i.aa = _),
																	(i.posType = d.posType(e)),
																	(i.reinforcedDockCount = n.getReinforcedDockCount(d, e)),
																	-1 !== O.a && (i.a = O.a),
																	-1 !== O.b && (i.b = O.b);
															}
															if ((r.push(i), t instanceof m.DoubleSash)) {
																if (t.withTurningFrame) {
																	var a = Object.assign({}, i);
																	if (((a.type = l.sashTurningFrame), 'down' === a.position)) {
																		var h = y.EdgeFinder.Instance.findIndex2(
																			y.Direction.Down,
																			t.polygon,
																		);
																		if (!t.polygon.edDock.docks[h].dockBar(t.topFrame)) return;
																		a.segments = n.mockSashTurningFrameSegments(a, t);
																	}
																	s.push(a);
																}
																if (t.type === m.ShapeType.DoubleScreen) {
																	var u = Object.assign({}, i);
																	(u.type = l.screenFrame), r.push(u);
																}
															} else if (
																t instanceof m.Slide &&
																((i.screenTracksCount = t.screenTracksCount),
																(t.expandHorizontally &&
																	i.sizeType === c.width &&
																	i.position === y.Direction.Down) ||
																	(!t.expandHorizontally &&
																		i.sizeType === c.height &&
																		i.position === y.Direction.Left))
															)
																for (var p = 0; p < t.appliedOption.tracksCount; p++) {
																	var g = Object.assign({}, i);
																	(g.type = l.trackBar),
																		(g.trackNo = t.trackIndexToNo(p)),
																		r.push(g);
																}
														}),
														p.some(function (e) {
															return e.equalTo(t.polyId);
														}) ||
															(r.push.apply(r, o(s)),
															t instanceof m.DoubleSash &&
																t.withTurningFrame &&
																r.push.apply(
																	r,
																	o(
																		n.getTFCornerBraces(
																			l.sashTurningFrameCornerBrace,
																			t.topFrame.id,
																		),
																	),
																)),
														p.push(t.polyId);
												}
											});
										}),
										r
									);
								}),
								(e.prototype.getReinforcedDockCount = function (e, t) {
									var n = e.stDock.dockBar(t),
										r = e.etDock.dockBar(t),
										i = 0;
									return (
										t instanceof m.Frame &&
											(e.stDock.type === g.DockType.Mullion &&
												n &&
												(i += t.mulManager.splitter.lines[n.polyId.idx].reinforced ? 1 : 0),
											e.etDock.type === g.DockType.Mullion &&
												r &&
												(i += t.mulManager.splitter.lines[r.polyId.idx].reinforced ? 1 : 0)),
										i
									);
								}),
								(e.prototype.getPushSlideMulCount = function (e, t) {
									if (!(t instanceof m.Frame)) return 0;
									var n = t.sashManager.sashes.filter(function (e) {
										return e.slide !== d.OpenDirection.None;
									});
									if (0 === n.length) return 0;
									var r = e.stDock.dockBar(t),
										i = e.etDock.dockBar(t),
										o = function (e) {
											if (!e) return !1;
											for (
												var t = new Map([
														[d.OpenDirection.Left, y.Direction.Left],
														[d.OpenDirection.Right, y.Direction.Right],
														[d.OpenDirection.Up, y.Direction.Down],
														[d.OpenDirection.Down, y.Direction.Up],
													]),
													r = n.map(function (e) {
														return y.EdgeFinder.Instance.findIndex(t.get(e.slide), e.polygon);
													}),
													i = 0;
												i < n.length;
												i++
											)
												for (var o = n[i].polygon.edges, a = 0; a < o.length; a++) {
													var s = o[a];
													if (
														s instanceof u.default.Segment &&
														g.Utils.polyConcideSeg(e.polygon, s) &&
														r[i] === a
													)
														return !0;
												}
											return !1;
										};
									return (o(r) ? 1 : 0) + (o(i) ? 1 : 0);
								}),
								(e.prototype.betweenPushTrack = function (e, t, n) {
									if (!(t instanceof m.Frame)) return 0;
									var r = t.sashManager.sashes.filter(function (e) {
										return e.slide === d.OpenDirection.Left || e.slide === d.OpenDirection.Right;
									});
									if (0 === r.length) return 0;
									var i = e.stDock.dockBar(t),
										o = e.etDock.dockBar(t),
										s = new Map([
											[d.OpenDirection.Left, y.Direction.Left],
											[d.OpenDirection.Right, y.Direction.Right],
											[d.OpenDirection.Up, y.Direction.Down],
											[d.OpenDirection.Down, y.Direction.Up],
										]),
										l = function (e) {
											var i, o, l, h;
											if (!e) return !1;
											try {
												for (var c = a(r), u = c.next(); !u.done; u = c.next()) {
													var p = u.value,
														f = y.EdgeFinder.Instance.findIndex(s.get(p.slide), p.polygon),
														d = y.EdgeFinder.Instance.findIndex(y.Direction.Up, p.polygon),
														m = y.EdgeFinder.Instance.findIndex(y.Direction.Down, p.polygon),
														v = p.polygon.edDock.docks[d].dockBar(t),
														w = p.polygon.edDock.docks[m].dockBar(t),
														b = p.polygon.edDock.docks[f].dockBar(t);
													if (!v || !w || !b) return !1;
													var S = v.id === e.id || w.id === e.id,
														_ = b.polygon.edges;
													try {
														for (
															var P = ((l = void 0), a(_)), x = P.next();
															!x.done;
															x = P.next()
														) {
															var D = x.value;
															if (S && g.Utils.polyConcideSeg(n, D)) return !0;
														}
													} catch (e) {
														l = {
															error: e,
														};
													} finally {
														try {
															x && !x.done && (h = P.return) && h.call(P);
														} finally {
															if (l) throw l.error;
														}
													}
												}
											} catch (e) {
												i = {
													error: e,
												};
											} finally {
												try {
													u && !u.done && (o = c.return) && o.call(c);
												} finally {
													if (i) throw i.error;
												}
											}
											return !1;
										};
									return l(i) && l(o) ? 1 : 0;
								}),
								(e.prototype.getAdjustedLength = function (e, t, n, r, i, o) {
									if (t.stDock.type === g.DockType.Frame)
										(a = t.stDock.dockBar(o)) && a.width > 0 ? (e += a.width) : (e += n);
									else if (t.stDock.type === g.DockType.Mullion) {
										var a;
										(a = t.stDock.dockBar(o)) && a.width > 0
											? (e += i.co_st * a.width)
											: (e += i.co_st * r);
									}
									if (t.etDock.type === g.DockType.Frame)
										(s = t.etDock.dockBar(o)) && s.width > 0 ? (e += s.width) : (e += n);
									else if (t.etDock.type === g.DockType.Mullion) {
										var s;
										(s = t.etDock.dockBar(o)) && s.width > 0
											? (e += i.co_et * s.width)
											: (e += i.co_et * r);
									}
									return e;
								}),
								(e.prototype.getShadeCcBars = function (e) {
									var t = this,
										n = [],
										r = this.frames
											.map(function (e) {
												return e.mulManager.shades;
											})
											.flat(),
										i = this.frames
											.map(function (e) {
												return e.sashManager.allSashes
													.map(function (e) {
														return e.mulManager.shades;
													})
													.flat();
											})
											.flat(),
										a = o(r, i);
									return (
										e.forEach(function (e) {
											var r = a.find(function (t) {
												return t.id === e.id;
											});
											r &&
												(t.adjustSash(r, e.width, e.height),
												(r.withBead = !1),
												r.mulManager.updatePoly(),
												t.collectShadeReflections(r),
												r.mulManager.bars.forEach(function (t) {
													n.push({
														shapeId: r.id,
														frameId: r.topFrame.id,
														type: l.shadeMullion,
														cc: e.width,
														aa: e.width,
														posType: t.epDock.posType(void 0),
														epDock: t.epDock,
														sizeType: c.width,
														position: void 0,
														cutAngle: t.cutAngle,
														lineType: h.Seg,
														attrs: r.attrs,
													});
												}));
										}),
										n
									);
								}),
								(e.prototype.getFrameGlasses = function (e, t) {
									var n = this,
										r = [];
									return (
										this.fetchFrames(e, t).forEach(function (e) {
											var t = e.profileSizeManager,
												i = t.frame,
												a = t.frameMullion;
											r.push.apply(
												r,
												o(n.getGlassData(e.mulManager.glasses, i, a, l.fixedGlass, e)),
											);
										}),
										r
									);
								}),
								(e.prototype.matchBeadType = function (e, t) {
									return t
										? e instanceof m.ScreenFiller
											? l.screenBead
											: e instanceof m.Panel
											? l.panelBead
											: e instanceof m.Shade
											? l.shadeSashBead
											: l.sashBead
										: e instanceof m.ScreenFiller
										? l.fixedNetBead
										: e instanceof m.Panel
										? l.fixedPanelBead
										: e instanceof m.Shade
										? l.fixedShadeBead
										: l.fixedBead;
								}),
								(e.prototype.getFrameBeads = function (e, t) {
									var n = this,
										r = [];
									return (
										this.fetchFrames(e, t).forEach(function (e) {
											var t = e.sashManager.glassSashes.shift(),
												i =
													t && !n.partialReverseTowardExists(e.id)
														? t.sashAssignWay
														: e.defaultSashAssignWay;
											e.mulManager.glasses.forEach(function (t) {
												if (t.bead) {
													var a = n.getBeadBarData(
														t.bead.frameManager.bars,
														e.profileSizeManager,
														n.matchBeadType(t, !1),
														t.bead.polygon.box,
														t.parent,
														!0,
														!1,
														t.serial.text,
													);
													a.forEach(function (r) {
														(r.sashAssignWay = i),
															n.inReverseTowardRegion(t.polygon.box.center, e.id) &&
																n.reverseToward(r),
															(r.withTurningFrame = t.withTurningFrame),
															t instanceof m.Glass && (r.withTheft = t.withTheft);
													}),
														r.push.apply(r, o(a));
												}
											}),
												e.mulManager.glasses.forEach(function (t) {
													if (t.bead && t.withTurningFrame) {
														var a = t.bead.polygon.edges;
														(t.bead.frameManager.ejw = a.map(function () {
															return g.EdgeJointWay.Default;
														})),
															t.bead.frameManager.recreateBars();
														var s = n.getBeadBarData(
															t.bead.frameManager.bars,
															e.profileSizeManager,
															n.matchBeadType(t, !1),
															t.bead.polygon.box,
															t.parent,
															!0,
															!1,
															t.serial.text,
														);
														s.forEach(function (e) {
															(e.sashAssignWay = i),
																(e.withTurningFrame = t.withTurningFrame),
																t instanceof m.Glass && (e.withTheft = t.withTheft);
														});
														var h = s.map(function (r, o) {
															var a = Object.assign({}, r);
															(a.type = l.turningFrame),
																(a.sashAssignWay = i),
																n.inReverseTowardRegion(t.polygon.box.center, e.id) &&
																	n.reverseToward(a),
																r.ii && ((a.aa = r.ii), delete r.ii, delete a.ii);
															var s = {
																	st: !1,
																	et: !1,
																},
																h = t.bead.frameManager.bars.find(function (e) {
																	return e.id === r.shapeId;
																});
															h && (s = n.cutAngleToward(h));
															var c = r.stAngle,
																p = r.etAngle,
																f = s.st,
																d = s.et,
																g = c,
																y = p,
																m = f,
																v = d;
															return (
																((n.option.cutAngleSort &&
																	e.polygon.orientation !== u.default.ORIENTATION.CCW) ||
																	(!n.option.cutAngleSort &&
																		e.polygon.orientation !== u.default.ORIENTATION.CW)) &&
																	((g = p), (y = c), (m = d), (v = f)),
																(a.stAngle = g),
																(a.etAngle = y),
																(a.stAngleOppositeToward = m),
																(a.etAngleOppositeToward = v),
																a
															);
														});
														r.push.apply(r, o(h)),
															r.push.apply(
																r,
																o(
																	n.getTFCornerBraces(
																		l.fixedTurningFrameCornerBrace,
																		t.topFrame.id,
																	),
																),
															);
													}
												});
										}),
										r
									);
								}),
								(e.prototype.adjustInsertLength = function (e, t, n, r) {
									var o = 0,
										a = m.Bar.getLongestLength(t),
										s = m.Bar.getCenterMulshape(t),
										l = t.epDock,
										h = t.edges,
										c = h.findIndex(function (e) {
											return g.Utils.isParallelOrSameCenter(e, s);
										});
									if (-1 === c) return a;
									var u = i(this.getInsertLine(s, n, r), 4),
										f = u[0],
										d = u[1],
										y = u[2],
										v = u[3];
									if (void 0 !== f)
										if (
											l.stDock.type === g.DockType.Frame ||
											l.stDock.type === g.DockType.Mullion
										) {
											var w = h.findIndex(function (e) {
												return (
													g.Utils.isParallelOrSameCenter(f, e) && g.Utils.isZero(f.distanceTo(e)[0])
												);
											});
											if (-1 !== w) {
												var b = g.Utils.getMovedEdge(h[w], d, e);
												(h[w] = b),
													p.Frametify.edgeIntersection(h, (w - 1 + h.length) % h.length),
													p.Frametify.edgeIntersection(h, w),
													(o += e);
											}
										} else if (l.stDock.type !== g.DockType.None)
											throw new Error('stDock type not implemented');
									if (void 0 !== y)
										if (
											l.etDock.type === g.DockType.Frame ||
											l.etDock.type === g.DockType.Mullion
										) {
											var S = h.findIndex(function (e) {
												return (
													g.Utils.isParallelOrSameCenter(y, e) && g.Utils.isZero(y.distanceTo(e)[0])
												);
											});
											if (-1 !== S) {
												var _ = g.Utils.getMovedEdge(h[S], v, e);
												(h[S] = _),
													p.Frametify.edgeIntersection(h, (S - 1 + h.length) % h.length),
													p.Frametify.edgeIntersection(h, S),
													(o += e);
											}
										} else if (l.etDock.type !== g.DockType.None)
											throw new Error('etDock type not implemented');
									var P = new m.WinPolygon(h);
									return (P.mulShape = h[c]), P.equalTo(t) ? a : m.Bar.getLongestLength(P) - o;
								}),
								(e.prototype.getInsertBar = function (e, t) {
									var n,
										r,
										o,
										a = e.polygon.mulShape;
									if (void 0 === a) return [void 0, void 0];
									var s = i(t.mulManager.dockMgr.getDockBars(e.polyId, t), 2),
										l = s[0],
										h = s[1];
									if (void 0 === l && void 0 === h) return [void 0, void 0];
									if (void 0 === l) {
										if (
											!(
												h.polygon.mulShape instanceof u.default.Segment ||
												h.polygon.mulShape instanceof u.default.Arc
											)
										)
											return [void 0, void 0];
										a.start.distanceTo(h.polygon.mulShape)[0] <
											a.end.distanceTo(h.polygon.mulShape)[0] &&
											((l = (n = i([h, l], 2))[0]), (h = n[1]));
									} else if (void 0 === h) {
										if (
											!(
												l.polygon.mulShape instanceof u.default.Segment ||
												l.polygon.mulShape instanceof u.default.Arc
											)
										)
											return [void 0, void 0];
										a.start.distanceTo(l.polygon.mulShape)[0] >
											a.end.distanceTo(l.polygon.mulShape)[0] &&
											((l = (r = i([h, l], 2))[0]), (h = r[1]));
									} else {
										if (
											!(
												l.polygon.mulShape instanceof u.default.Segment ||
												l.polygon.mulShape instanceof u.default.Arc
											)
										)
											return [void 0, void 0];
										if (
											!(
												h.polygon.mulShape instanceof u.default.Segment ||
												h.polygon.mulShape instanceof u.default.Arc
											)
										)
											return [void 0, void 0];
										a.start.distanceTo(l.polygon.mulShape)[0] >
											a.end.distanceTo(l.polygon.mulShape)[0] &&
											((l = (o = i([h, l], 2))[0]), (h = o[1]));
									}
									return [l, h];
								}),
								(e.prototype.getInsertLine = function (e, t, n) {
									var r, i, o, a;
									if (t) {
										var s = t.polygon.edges;
										if (
											void 0 ===
											(r = s.find(function (n) {
												return (
													n.contains(e.start) &&
													g.Utils.isParallelOrSameCenter(n, t.polygon.mulShape)
												);
											}))
										)
											return [void 0, void 0, void 0, void 0];
										if (
											void 0 ===
											(i = s.find(function (e) {
												return e !== r && g.Utils.isParallelOrSameCenter(e, r);
											}))
										)
											return [void 0, void 0, void 0, void 0];
									}
									if (n) {
										var l = n.polygon.edges;
										if (
											void 0 ===
											(o = l.find(function (t) {
												return (
													t.contains(e.end) && g.Utils.isParallelOrSameCenter(t, n.polygon.mulShape)
												);
											}))
										)
											return [void 0, void 0, void 0, void 0];
										if (
											void 0 ===
											(a = l.find(function (e) {
												return e !== o && g.Utils.isParallelOrSameCenter(e, o);
											}))
										)
											return [void 0, void 0, void 0, void 0];
									}
									return [r, i, o, a];
								}),
								(e.prototype.getFrameMullionBarData = function (e, t, n, r, i, a) {
									var s = this;
									if ((void 0 === a && (a = !1), 0 === e.length)) return [];
									var h = i.topFrame.id,
										p = [],
										f = [],
										d = [];
									e.forEach(function (e) {
										s.checkStandardSeg(e, i) ? f.push(e) : d.push(e);
									});
									var y = t.frame,
										v = t.frameMullion;
									return (
										a &&
											((y = i.type === m.ShapeType.Screen ? t.screen : t.sash),
											(v = t.sashMullion)),
										(p = o(this.getStandardBarData(f, y, v, n, r, i, !0))).forEach(function (e) {
											var t = f.find(function (t) {
												return t.id === e.shapeId;
											});
											if (t.parent instanceof m.Frame) {
												e.foldSideTrack = s.belongsToFoldSide(t, i) ? l.mullion : '';
												var n = i.mulManager.splitter.lines[t.polyId.idx],
													r = n.steelsCount;
												e.steelsCount = r;
												var o = t.polygon.mulShape,
													a =
														(e.sizeType === c.height && o.start.y > o.end.y) ||
														(e.sizeType === c.width && o.start.x > o.end.x),
													h = n.start.split,
													u = n.end.split,
													p = t.stAngle,
													d = t.etAngle,
													g = t.epDock.stDock.type,
													y = t.epDock.etDock.type;
												if (
													(a &&
														((h = n.end.split),
														(u = n.start.split),
														(p = t.etAngle),
														(d = t.stAngle),
														(g = t.epDock.etDock.type),
														(y = t.epDock.stDock.type)),
													(e.splitAtStart = h),
													(e.splitAtEnd = u),
													(e.stAngle = p),
													(e.etAngle = d),
													(e.stDockType = g),
													(e.etDockType = y),
													s.option.withHoleSegments && t)
												) {
													var v = s.barSegments(t, i);
													a &&
														v.forEach(function (e) {
															s.reverseSegments(e.segments), e.dockBars.reverse();
														}),
														(e.segments = v);
												}
											}
										}),
										d.forEach(function (e) {
											var r = e.polygon.mulShape;
											if (4 === e.polygon.edges.length) {
												var o = i.mulManager.splitter.lines[e.polyId.idx],
													a = o.steelsCount,
													l = s.getSizeType(e),
													c = s.getReinforcedDockCount(e.polygon.epDock, i),
													f = o.reinforced,
													d = s.properNonstardardMulSize(e.polygon, t, i),
													m = s.getDimParam(e),
													w = s.getAdjustedLength(d, e.epDock, y, v, m, i),
													b = o.start.split,
													S = o.end.split,
													_ = e.stAngle,
													P = e.etAngle,
													x = e.epDock.stDock.type,
													D = e.epDock.etDock.type,
													T = e.polygon.mulShape;
												T instanceof u.default.Segment &&
													((g.Utils.isSegHorizontal(T) && T.start.x > T.end.x) ||
														(g.Utils.isSegVertical(T) && T.start.y > T.end.y)) &&
													((b = o.end.split),
													(S = o.start.split),
													(_ = e.etAngle),
													(P = e.stAngle),
													(x = e.epDock.etDock.type),
													(D = e.epDock.stDock.type));
												var O = {
													shapeId: e.id,
													frameId: h,
													type: s.isSpecificType(e.type) ? e.type : n,
													cc: w,
													aa: d,
													posType: e.epDock.posType(i),
													epDock: e.epDock,
													sizeType: l,
													position: '',
													cutAngle: e.cutAngle,
													lineType: s.fillLineType(r),
													steelsCount: a,
													dockCount: 2,
													reinforcedDockCount: c,
													isReinforced: f,
													stAngle: _,
													etAngle: P,
													splitAtStart: b,
													splitAtEnd: S,
													stDockType: x,
													etDockType: D,
													foldSideTrack: '',
												};
												-1 !== m.a && (O.a = m.a), -1 !== m.b && (O.b = m.b), p.push(O);
											}
										}),
										p
									);
								}),
								(e.prototype.properNonstardardMulSize = function (e, t, n) {
									var r = e.mulShape,
										i = e.edges,
										o = [];
									i.forEach(function (e, t) {
										e.contains(r.start) || e.contains(r.end) || o.push(t);
									});
									var a = e.orientation === u.default.ORIENTATION.CW,
										s = this.nonstardardMulSize(e, n, t.millingFrame);
									if (t.frameMullion >= t.frameMullionLg) return s;
									var l = this.lgFaceSizeSelf(e, o, a, t),
										h = this.nonstardardMulSize(l, n, t.millingFrame);
									return h > s ? h : s;
								}),
								(e.prototype.lgFaceSizeSelf = function (e, t, n, r) {
									var i = (r.frameMullionLg - r.frameMullion) / 2,
										o = e.edges;
									return (
										t.forEach(function (e) {
											(o[e] = g.Utils.sideMirror(o[e], i, n)),
												p.Frametify.edgeIntersection(o, (e - 1 + o.length) % o.length),
												p.Frametify.edgeIntersection(o, e);
										}),
										e.cloneWith(o)
									);
								}),
								(e.prototype.nonstardardMulSize = function (e, t, n) {
									var r = m.Bar.getLongestLength(e),
										i = e.epDock.stDock,
										o = e.epDock.etDock;
									if (i.type !== g.DockType.None || o.type !== g.DockType.None) {
										var a = i.dockBar(t),
											s = o.dockBar(t);
										r = this.adjustInsertLength(n, e, a, s);
									}
									return r;
								}),
								(e.prototype.getBeadBarData = function (e, t, n, r, i, o, a, s) {
									var p = this;
									void 0 === o && (o = !0), void 0 === a && (a = !1);
									var f = i.topFrame,
										v = f instanceof m.ThreedArcFrame,
										w = [],
										b = [];
									e.forEach(function (e, t) {
										p.checkStandardSeg(e, i) && p.checkConvex(e, i) ? w.push(e) : b.push(e);
									});
									var S = i.topFrame.id,
										_ = [],
										P = t.frame,
										x = t.frameMullion;
									return (
										a &&
											((P = i.type === m.ShapeType.Screen ? t.screen : t.sash),
											(x = t.sashMullion)),
										w.forEach(function (e, t) {
											var a = e.polygon.mulShape,
												h = p.getDimParam(e),
												u = p.getAdjustedLength(a.length, e.epDock, P, x, h, i);
											if (v) {
												var y = f,
													w = 0;
												y.shortArcDim
													? n === l.fixedBead
														? (w = y.depthStruct.fixedBead)
														: n === l.sashBead && (w = -y.depthStruct.sashGlass)
													: n === l.fixedBead
													? (w = -(y.depthStruct.frame - y.depthStruct.fixedBead))
													: n === l.sashBead && (w = -y.depthStruct.sashGlass),
													(u = p.fixDepthPosition(a, y.arcInTopView.r.valueOf(), u, w));
											}
											var b = g.Utils.isSegHorizontal(a) ? c.width : c.height,
												D = r ? p.getPosition(a, r) : '',
												T = 0;
											e.polygon.contains(a.start) || T++, e.polygon.contains(a.end) || T++;
											var O = p.isSashSideOfMul(e, i),
												M = {
													shapeId: e.id,
													frameId: S,
													type: p.isSpecificType(e.type) ? e.type : n,
													cc: u,
													aa: m.Bar.getLongestLength(e.polygon),
													ii: a.length,
													posType: o ? e.epDock.posType(i) : e.epDock.posType(void 0),
													epDock: e.epDock,
													sizeType: b,
													position: D,
													cutAngle: e.cutAngle,
													stAngle: e.stAngle,
													stAngleOppositeToward: !1,
													etAngle: e.etAngle,
													etAngleOppositeToward: !1,
													dockCount: T,
													lineType: p.fillLineType(a, v),
													serial: s,
													reinforcedDockCount: p.getReinforcedDockCount(e.epDock, i),
													pushSlideMulCount: p.getPushSlideMulCount(e.epDock, i),
													betweenPushTrack: p.betweenPushTrack(e.epDock, i, e.polygon),
													isSashSideOfMul: O,
												};
											-1 !== h.a && (M.a = h.a),
												-1 !== h.b && (M.b = h.b),
												i instanceof m.PushSash &&
													((M.pushSlide = i.slide), (M.isSlide = i.slide !== d.OpenDirection.None)),
												_.push(M);
										}),
										b.forEach(function (t, a) {
											var l = t.polygon.ringPolygon();
											if (l) {
												var f = {
													shapeId: t.id,
													frameId: S,
													type: n,
													cc: i.polygon.edge(0).length / 2,
													aa: Math.PI * l.or,
													posType: g.BarPositionType.NoneNone,
													epDock: t.epDock,
													sizeType: c.width,
													cutAngle: '90-90',
													dockCount: 0,
													lineType: h.Arc,
													serial: s,
												};
												return (
													_.push(
														Object.assign(
															{
																position: y.Direction.Up,
															},
															f,
														),
													),
													_.push(
														Object.assign(
															{
																position: y.Direction.Down,
															},
															f,
														),
													),
													_
												);
											}
											var d = t.polygon.mulShape;
											if (4 === t.polygon.edges.length) {
												var v = p.getSizeType(t),
													w = m.Bar.getLongestLength(t.polygon),
													b = 0;
												if (!t.polygon.contains(d.start)) {
													if (
														!(O = e.find(function (e) {
															return e.polyId.equalTo(t.polyId);
														}))
													)
														return;
													var D = g.Utils.getPrevIdx(O.polyId.idx, e.length),
														T = e.find(function (e) {
															return e.polyId.equalTo(new g.PolyId(D, -1));
														});
													if (!T) return;
													(w += T.width), b++;
												}
												if (!t.polygon.contains(d.end)) {
													var O;
													if (
														!(O = e.find(function (e) {
															return e.polyId.equalTo(t.polyId);
														}))
													)
														return;
													var M = g.Utils.getNextIdx(O.polyId.idx, e.length),
														E = e.find(function (e) {
															return e.polyId.equalTo(new g.PolyId(M, -1));
														});
													if (!E) return;
													(w += E.width), b++;
												}
												var I = p.getDimParam(t);
												w = p.getAdjustedLength(w, t.epDock, P, x, I, i);
												var C = r ? p.getPosition(u.default.segment(d.start, d.end), r) : '',
													k = {
														shapeId: t.id,
														frameId: S,
														type: p.isSpecificType(t.type) ? t.type : n,
														cc: w,
														aa: d.length,
														posType: o ? t.epDock.posType(i) : t.epDock.posType(void 0),
														epDock: t.epDock,
														sizeType: v,
														position: C,
														cutAngle: t.cutAngle,
														stAngle: t.stAngle,
														stAngleOppositeToward: !1,
														etAngle: t.etAngle,
														etAngleOppositeToward: !1,
														dockCount: b,
														lineType: p.fillLineType(d),
														serial: s,
														reinforcedDockCount: p.getReinforcedDockCount(t.epDock, i),
													};
												-1 !== I.a && (k.a = I.a), -1 !== I.b && (k.b = I.b), _.push(k);
											}
										}),
										_
									);
								}),
								(e.prototype.isSashSideOfMul = function (e, t) {
									if (!(t instanceof m.Frame)) return !1;
									var n = o(t.mulManager.bars, t.frameManager.bars),
										r = t.sashManager.sashes,
										i = e.polygon.mulShape;
									return n.some(function (e) {
										var t = e.polygon.edges,
											n = t.findIndex(function (e) {
												return e instanceof u.default.Segment && g.Utils.segCoincide(e, i);
											});
										if (-1 === n) return !1;
										var o = t[n];
										return r.some(function (e) {
											return g.Utils.polyConcideSeg(e.polygon, o);
										});
									});
								}),
								(e.prototype.fixDepthPosition = function (e, t, n, r) {
									return (
										void 0 === r && (r = 0), r && g.Utils.isSegHorizontal(e) ? (n * (t + r)) / t : n
									);
								}),
								(e.prototype.getStandardBarData = function (e, t, n, r, i, o, a, s) {
									var h = this;
									void 0 === a && (a = !0),
										void 0 === s && (s = !1),
										r === m.ShapeType.KfcSash
											? (r = m.ShapeType.Sash)
											: r === m.ShapeType.DoubleKfcSash && (r = m.ShapeType.DoubleSash);
									var u = o.topFrame,
										p = u instanceof m.ThreedArcFrame,
										f = u.id,
										v = [];
									return (
										e.forEach(function (e) {
											var w = e.polygon.mulShape,
												b = h.getDimParam(e),
												S = h.getAdjustedLength(w.length, e.epDock, t, n, b, o);
											if (p) {
												var _ = u,
													P = 0;
												if (_.shortArcDim) {
													if (r === l.mullion) P = _.depthStruct.frame;
													else if (r === m.ShapeType.Sash) {
														var x = _.depthStruct.sash[0];
														o instanceof m.SlideSash && (x = _.depthStruct.sash[o.trackNo - 1]),
															(P = _.depthStruct.frame - x);
													}
												} else r === m.ShapeType.Sash && (P = -_.depthStruct.sash);
												s || (S = h.fixDepthPosition(w, _.arcInTopView.r.valueOf(), S, P));
											}
											var D = g.Utils.isSegHorizontal(w) ? c.width : c.height,
												T = i ? h.getPosition(w, i) : '',
												O = {
													serial: e.serial,
													barSerial: e.serial,
													shapeId: e.id,
													frameId: f,
													frameUid: o.topFrame.uid,
													type: h.isSpecificType(e.type) ? e.type : r,
													cc: S,
													aa: w.length,
													posType: a ? e.epDock.posType(o) : e.epDock.posType(void 0),
													epDock: e.epDock,
													sizeType: D,
													position: T,
													cutAngle: e.cutAngle,
													lineType: h.fillLineType(w, p),
												};
											if (
												((r !== l.mullion &&
													r !== l.Sash &&
													r !== l.Screen &&
													r !== l.ShadePushSash &&
													r !== l.AntiTheft) ||
													((O.reinforcedDockCount = h.getReinforcedDockCount(e.polygon.epDock, o)),
													(O.isReinforced =
														e.where === m.ShapeType.FrameMullion &&
														o instanceof m.Frame &&
														o.mulManager.splitter.lines[e.polyId.idx].reinforced)),
												-1 !== b.a && (O.a = b.a),
												-1 !== b.b && (O.b = b.b),
												o instanceof m.PushSash)
											) {
												if (
													(o.slide === O.position
														? (O.pushSlide = o.slide)
														: (O.pushSlide = 'none'),
													(O.isSlide = o.slide !== d.OpenDirection.None),
													(O.belongsToDownFrame = !1),
													O.position === y.Direction.Down)
												) {
													var M = y.EdgeFinder.Instance.findIndex(y.Direction.Up, o.polygon);
													o.polygon.edDock.docks[M].dockBar(u) && (O.belongsToDownFrame = !0);
												}
												if (r === l.sashMullion) {
													var E = o.mulManager.splitter.lines[e.polyId.idx];
													(O.steelsCount = E.steelsCount), (O.kfcWaist = E.kfcWaist);
												}
											}
											if (o instanceof m.Sash) {
												var I = 0;
												e.polygon.contains(w.start) || I++,
													e.polygon.contains(w.end) || I++,
													(O.dockCount = I),
													(O.serial = o.serial);
											}
											r === l.mullion && (O.dockCount = h.dockCount(e)), v.push(O);
										}),
										v
									);
								}),
								(e.prototype.getDimParam = function (e) {
									if (e.where === m.ShapeType.AntiTheftMullion) return new y.DockParam();
									if (
										e.where === m.ShapeType.SashMullion ||
										e.where === m.ShapeType.ScreenMullion ||
										e.where === m.ShapeType.KfcWaist
									)
										return new y.DockParam();
									if (e.where === m.ShapeType.ShadePushSashMullion) return new y.DockParam();
									if (
										e.where === m.ShapeType.Bead &&
										(e.parent.parent.parent.type === m.ShapeType.Sash ||
											e.parent.parent.parent.type === m.ShapeType.KfcSash ||
											e.parent.parent.parent.type === m.ShapeType.Screen)
									)
										return new y.DockParam();
									var t = e.polygon.mulShape,
										n = this.getDimParam1(e.epDock, t, e.topFrame);
									return this.reverseDimParam(n, e.epDock, e.topFrame), n;
								}),
								(e.prototype.reverseDimParam = function (e, t, n) {
									var r = t.stDock.dockBar(n),
										i = t.etDock.dockBar(n);
									if (
										t.stDock.type === g.DockType.Mullion &&
										t.etDock.type === g.DockType.Mullion &&
										r.type !== i.type
									) {
										var o = [
											m.ShapeType.Bar,
											m.ShapeType.FixedUpTrack,
											m.ShapeType.FixedDownTrack,
											m.ShapeType.SideTrack,
											m.ShapeType.DoubleSideTrack,
											m.ShapeType.UpDownTrack,
										];
										o.findIndex(function (e) {
											return e === r.type;
										}) <
											o.findIndex(function (e) {
												return e === i.type;
											}) || e.reverse();
									}
								}),
								(e.prototype.getDimParam1 = function (e, t, n) {
									var r = new y.DockParam(),
										i = function (e, i) {
											if (e.type === g.DockType.Mullion) {
												var o = e.dockBar(n),
													a = o.polygon.mulShape;
												if (a instanceof u.default.Segment)
													if (g.Utils.isSegVertical(a)) {
														var s = i ? t.start.x : t.end.x;
														u.default.Utils.GE(s, a.start.x)
															? o.dimAlignment === m.AlignTypeEnum.center
																? r.setParam(i, 0.5)
																: o.dimAlignment === m.AlignTypeEnum.left
																? r.setParam(i, 1)
																: o.dimAlignment === m.AlignTypeEnum.right && r.setParam(i, 0)
															: o.dimAlignment === m.AlignTypeEnum.center
															? r.setParam(i, 0.5)
															: o.dimAlignment === m.AlignTypeEnum.left
															? r.setParam(i, 0)
															: o.dimAlignment === m.AlignTypeEnum.right && r.setParam(i, 1);
													} else {
														var l = i ? t.start.y : t.end.y;
														u.default.Utils.GE(l, a.start.y)
															? o.dimAlignment === m.AlignTypeEnum.center
																? r.setParam(i, 0.5)
																: o.dimAlignment === m.AlignTypeEnum.left
																? r.setParam(i, 1)
																: o.dimAlignment === m.AlignTypeEnum.right && r.setParam(i, 0)
															: o.dimAlignment === m.AlignTypeEnum.center
															? r.setParam(i, 0.5)
															: o.dimAlignment === m.AlignTypeEnum.left
															? r.setParam(i, 0)
															: o.dimAlignment === m.AlignTypeEnum.right && r.setParam(i, 1);
													}
												else r.setParam(i, 0.5);
											}
										};
									return i(e.stDock, !0), i(e.etDock, !1), r;
								}),
								(e.prototype.getGlassData = function (e, t, n, r, o) {
									var a = this,
										s = o.topFrame,
										h = s instanceof m.ThreedArcFrame,
										c = (h && s.arcInTopView, o instanceof m.Frame ? o.id : o.topFrame.id),
										p = [];
									return (
										e
											.filter(function (e) {
												return e.polygon.isRectangle();
											})
											.forEach(function (e) {
												var f = 0,
													d = 0;
												if (h) {
													var v = s;
													if (
														(v.shortArcDim
															? r === l.fixedGlass
																? (f = v.depthStruct.frame - v.depthStruct.fixed)
																: r === l.sashGlass && (f = -v.depthStruct.sashGlass)
															: r === l.fixedGlass
															? (f = -v.depthStruct.fixed)
															: r === l.sashGlass && (f = -v.depthStruct.sashGlass),
														(d = v.arcInTopView.r.valueOf()),
														r === l.sashGlass)
													) {
														var w = v.depthStruct.sash[0];
														o instanceof m.SlideSash && (w = v.depthStruct.sash[o.trackNo - 1]),
															v.shortArcDim ? (d += v.depthStruct.frame - w) : (d -= w);
													}
												}
												var b = a.getDetailAreaType(e.type, r),
													S = e.polygon.edges,
													_ = 0;
												g.Utils.isSegHorizontal(S[_]) || (_ = 1);
												var P = function (r) {
														var i = S[r],
															s = i.length,
															l = g.Utils.getPrevIdx(r, S.length),
															c = g.Utils.getNextIdx(r, S.length),
															p = e.polygon.edDock.docks[l],
															v = e.polygon.edDock.docks[c],
															w = new g.EndpointDock();
														(w.stDock = p), (w.etDock = v);
														var b = a.getReinforcedDockCount(w, o),
															_ = a.getPushSlideMulCount(w, o),
															P = a.betweenPushTrack(w, o, e.polygon),
															x = new y.DockParam();
														o instanceof m.Frame &&
															((x = a.getDimParam1(w, S[r], e.topFrame)),
															a.reverseDimParam(x, w, o));
														var D = a.getAdjustedLength(s, w, t, n, x, o);
														return (
															i instanceof u.default.Segment &&
																h &&
																(D = a.fixDepthPosition(i, d, D, f)),
															[D, s, w, x, b, _, P]
														);
													},
													x = i(P(_), 7),
													D = x[0],
													T = x[1],
													O = x[2],
													M = x[3],
													E = x[4],
													I = x[5],
													C = x[6],
													k = g.Utils.getNextIdx(_, S.length),
													F = i(P(k), 7),
													j = F[0],
													A = F[1],
													L = F[2],
													H = F[3],
													R = F[4],
													B = F[5],
													W = F[6],
													z = [];
												e instanceof m.Glass &&
													(z = e.holes.map(function (e) {
														return {
															style: e.style,
															margin: e.constraint,
															marginToProfile: e.dimToProfile,
															diameter: e.size,
														};
													}));
												var N = {
													id: e.id,
													isashId: o.id,
													frameId: c,
													frameUid: o.topFrame.uid,
													type: b,
													cc: {
														width: D,
														height: j,
													},
													aa: {
														width: T,
														height: A,
													},
													posType: {
														width: O.posType(o),
														height: L.posType(o),
													},
													serial: e.serial.text,
													withShade: e instanceof m.Glass && e.withShade,
													withTurningFrame: o instanceof m.Frame && e.withTurningFrame,
													reinforcedDockCount: {
														width: E,
														height: R,
													},
													pushSlideMulCount: {
														width: I,
														height: B,
													},
													betweenPushTrack: {
														width: C,
														height: W,
													},
													holes: z,
												};
												if (o instanceof m.PushSash)
													(N.sashAssignWay = o.sashAssignWay), (N.isDoor = o.isDoor);
												else if (o instanceof m.Frame) {
													var U = o.sashManager.glassSashes.shift(),
														J =
															U && !a.partialReverseTowardExists(o.id)
																? U.sashAssignWay
																: o.defaultSashAssignWay;
													(N.sashAssignWay = J),
														a.inReverseTowardRegion(e.polygon.box.center, o.id) &&
															a.reverseToward(N);
												} else N.sashAssignWay = '';
												if (
													(e.scriptBasedSpec ||
														Object.assign(N, {
															spec: e.fixedSpecDesc,
															mainSpec: e.glassSpec.spec,
															additionMargin: {
																width: e.glassSpec.techMargin.width,
																height: e.glassSpec.techMargin.height,
															},
															name: e.glassSpec.name,
															thickness: e.glassSpec.thickness,
															originMeterWeight: e.glassSpec.meterWeight,
															bom_id: e.glassSpec.id,
															customAttrs: e.glassSpec.customAttrs,
														}),
													(N.dim = {
														width: {},
														height: {},
													}),
													-1 !== M.a && (N.dim.width.a = M.a),
													-1 !== M.b && (N.dim.width.b = M.b),
													-1 !== H.a && (N.dim.height.a = H.a),
													-1 !== H.b && (N.dim.height.b = H.b),
													e instanceof m.Panel && (N.cutStyle = e.cutStyle),
													h && (N.threedArcRadius = d + f),
													p.push(N),
													e.host.mulManager.decorationBarManager.getDecorationBar(e.polygon.polyId))
												) {
													var V = Object.assign({}, N);
													(V.cc = Object.assign({}, N.cc)),
														(V.aa = Object.assign({}, N.aa)),
														(V.type = l.decorationBar),
														p.push(V);
												}
											}),
										p
									);
								}),
								(e.prototype.threedArcGlassSvg = function (e, t, n, r) {
									var i = e / n,
										o = u.default.arc(u.default.point(), n, 0, i),
										a = o.chordHeight(),
										s = o.start.distanceTo(o.end)[0],
										l = u.default.point(),
										h = l.translate(s, 0),
										c = h.translate(0, t),
										d = c.translate(-s, 0),
										g = p.ArcUtils.CreateArcFrom3Points(
											l,
											h,
											u.default.segment(l, h).middle().translate(0, -a),
										),
										y = u.default.segment(h, c),
										v = p.ArcUtils.CreateArcFrom3Points(
											c,
											d,
											u.default.segment(c, d).middle().translate(0, -a),
										),
										w = u.default.segment(d, l),
										b = new m.WinPolygon([g, y, v, w]),
										S = b.box,
										_ = Math.max(S.xmax - S.xmin, S.ymax - S.ymin),
										P = b.scale(200 / _),
										x = P.box.low;
									P.translate(u.default.vector(x, u.default.point(50, 55)));
									var D = P.edges,
										T = D[3].translate(-15, 0),
										O = D[2].translate(0, 15);
									O = u.default.segment(O.start, O.end);
									var M = 1;
									P.orientation === u.default.ORIENTATION.CCW && (M = -1);
									var E = function (e, t) {
											var n = e.svg({
													stroke: 'red',
												}),
												r =
													u.default.circle(e.start, 4).svg({
														stroke: 'red',
														fill: 'red',
													}) +
													u.default.circle(e.end, 4).svg({
														stroke: 'red',
														fill: 'red',
													}),
												i = u.default.line(e.start, e.end),
												o = i.slope,
												a = (180 * i.slope) / Math.PI;
											((o >= (3 * Math.PI) / 4 && o <= (5 * Math.PI) / 4) ||
												(o > Math.PI / 4 && o < (3 * Math.PI) / 4)) &&
												(a -= 180);
											var s = e.middle().translate(i.norm.multiply(17 * M));
											return (
												n +
												r +
												'<text x="' +
												s.x +
												'" y="' +
												s.y +
												'" fill="blue" transform="rotate(' +
												a +
												' ' +
												s.x +
												',' +
												s.y +
												')" text-anchor="middle" alignment-baseline="middle">' +
												t +
												'</text>'
											);
										},
										I =
											E(O, f.UnitConvertion.Ins.lengthForOutput(s).toString()) +
											E(T, f.UnitConvertion.Ins.lengthForOutput(t).toString()),
										C = P.polygon.svg(),
										k = '立体圆弧半径：' + f.UnitConvertion.Ins.lengthForOutput(n),
										F =
											'<text x="' +
											P.box.center.x +
											'" y="20" fill="blue" text-anchor="middle" alignment-baseline="middle">' +
											k +
											'</text>',
										j =
											'弧长：' +
											f.UnitConvertion.Ins.lengthForOutput(e) +
											'&nbsp;&nbsp;&nbsp;&nbsp;拱高：' +
											f.UnitConvertion.Ins.lengthForOutput(a),
										A =
											'<text x="' +
											P.box.center.x +
											'" y="40" fill="blue" text-anchor="middle" alignment-baseline="middle">' +
											j +
											'</text>',
										L = '';
									return (
										r &&
											(L =
												'\n      <text x="' +
												P.box.center.x +
												'" y="' +
												P.box.center.y +
												'" fill="blue" text-anchor="middle" alignment-baseline="middle">' +
												r +
												'</text>\n      '),
										C + I + F + A + L
									);
								}),
								(e.prototype.getAntitheftMullionBars = function (e, t, n) {
									var r = t.antiTheft,
										i = t.antiTheftMullion;
									return this.getStandardBarData(
										e.shutManager.bars.filter(function (e) {
											return (
												e.polygon.mulShape instanceof u.default.Segment &&
												g.Utils.isHorizOrVer(e.polygon.mulShape)
											);
										}),
										r,
										i,
										n,
										void 0,
										e,
										!1,
									);
								}),
								(e.prototype.getSashMullionBars = function (e, t, n, r) {
									void 0 === r && (r = !1);
									var i = e.type === m.ShapeType.Screen ? t.screen : t.sash,
										o = t.sashMullion;
									return this.getStandardBarData(
										e.mulManager.bars.filter(function (e) {
											return (
												e.polygon.mulShape instanceof u.default.Segment &&
												g.Utils.isHorizOrVer(e.polygon.mulShape)
											);
										}),
										i,
										o,
										n,
										void 0,
										e,
										!1,
										r,
									);
								}),
								(e.prototype.getSashGlasses = function (e, t, n) {
									var r = e.type === m.ShapeType.Screen ? t.screen : t.sash,
										i = t.sashMullion,
										o = this.getGlassData(e.mulManager.glasses, r, i, n, e);
									return (
										e instanceof m.SlideSash &&
											o.forEach(function (t) {
												(t.trackNo = e.trackNo), (t.isFixed = e.isFixed);
											}),
										e instanceof m.PushSash &&
											o.forEach(function (t) {
												return (t.isSlide = e.slide !== d.OpenDirection.None);
											}),
										o
									);
								}),
								(e.prototype.getSashBeads = function (e, t, n) {
									var r = this,
										i = [];
									return (
										e.mulManager.glasses.forEach(function (e) {
											e.bead &&
												i.push.apply(
													i,
													o(
														r.getBeadBarData(
															e.bead.frameManager.bars,
															t,
															r.matchBeadType(e, !0),
															e.bead.polygon.box,
															e.parent,
															!0,
															!0,
															e.serial.text,
														),
													),
												);
										}),
										i
									);
								}),
								(e.prototype.cloneFrame = function (e) {
									var t;
									return (
										((t =
											e instanceof m.ThreedArcFrame
												? new m.ThreedArcFrame(e.polygon, e.view, !0)
												: new m.Frame(e.polygon, e.view, !0)).id = -1),
										t.deserialize(e.toJSON()),
										(t.id = e.id),
										t instanceof m.ThreedArcFrame && t.resetArc(),
										t
									);
								}),
								(e.prototype.getDetailItemType = function (e) {
									if (e === m.ShapeType.Sash || e === m.ShapeType.KfcSash)
										return [l.sashMullion, l.sashGlass, l.sashBead];
									if (e === m.ShapeType.Screen) return [l.screenMullion, l.screenNet, l.screenBead];
									if (e === m.ShapeType.ShadePushSash)
										return [l.shadeSashMullion, l.sashShade, l.shadeSashBead];
									if (e === m.ShapeType.DoubleSash || e === m.ShapeType.DoubleKfcSash)
										return [l.doubleSashMullion, l.doubleSashGlass, l.doubleSashBead];
									if (e === m.ShapeType.DoubleScreen)
										return [l.doubleScreenMullion, l.doubleScreenNet, l.doubleScreenBead];
									if (e === m.ShapeType.Slide)
										return [l.slideSashMullion, l.slideSashGlass, l.slideSashBead];
									if (e === m.ShapeType.FoldSash)
										return [l.foldSashMullion, l.foldSashGlass, l.foldSashBead];
									if (e === m.ShapeType.FoldScreen)
										return [l.foldScreenMullion, l.foldScreenNet, l.foldScreenBead];
									if (e === m.ShapeType.AntiTheft)
										return [l.antitheftMullion, l.antitheftMullion, l.antitheftMullion];
									throw new Error('detail type not support');
								}),
								(e.prototype.getDetailAreaType = function (e, t) {
									var n = t;
									return (
										e === m.ShapeType.Panel &&
											(t === l.fixedGlass
												? (n = l.fixedPanel)
												: t === l.sashGlass && (n = l.sashPanel)),
										e === m.ShapeType.Screen && t === l.fixedGlass && (n = l.fixedNet),
										e === m.ShapeType.Shade &&
											(t === l.fixedGlass
												? (n = l.fixedShade)
												: t === l.sashGlass && (n = l.sashShade)),
										n
									);
								}),
								(e.prototype.generateBarSerial = function () {
									y.BarUID.Ins.generate(this.frames, this.shapeManager.subFrames);
								}),
								(e.prototype.convertUnit = function (e) {
									e.cc &&
										(isNaN(e.cc)
											? ((e.cc.width = f.UnitConvertion.Ins.length(e.cc.width)),
											  (e.cc.height = f.UnitConvertion.Ins.length(e.cc.height)))
											: (e.cc = f.UnitConvertion.Ins.length(e.cc))),
										e.aa &&
											(isNaN(e.aa)
												? ((e.aa.width = f.UnitConvertion.Ins.length(e.aa.width)),
												  (e.aa.height = f.UnitConvertion.Ins.length(e.aa.height)))
												: (e.aa = f.UnitConvertion.Ins.length(e.aa)));
								}),
								(e.prototype.fillLineType = function (e, t) {
									if ((void 0 === t && (t = !1), e instanceof u.default.Segment))
										return t && g.Utils.isSegHorizontal(e) ? h.Arc : h.Seg;
									if (e instanceof u.default.Arc) return h.Arc;
									throw new Error('not support line type');
								}),
								(e.prototype.getSashBarsForTest = function (e) {
									var t = new Map();
									e.map(function (e) {
										if ('Sash' === e.type || 'Screen' === e.type) {
											var n = e.id,
												r = t.get(n);
											0 === e.sizeType
												? r
													? (r.width = e.cc)
													: (r = {
															width: e.cc,
															height: 0,
													  })
												: r
												? (r.height = e.cc)
												: (r = {
														width: 0,
														height: e.cc,
												  }),
												t.set(n, r);
										}
									});
									var n = [];
									return (
										t.forEach(function (e, t) {
											n.push({
												id: t,
												width: e.width,
												height: e.height,
											});
										}),
										this.getSashCcBars(n)
									);
								}),
								(e.prototype.collectMulDimReflections = function (e) {
									var t = this;
									e.dim.diMgr.visualDims.forEach(function (n) {
										var r = {
											target: 'mulDim',
											frameId: e.topFrame.id,
											edgeIdx: n.edgeIdx,
											mulDimIdx: n.mulDimIdx,
											mulStart: n.mulStart,
											type: n.type,
											value: n.value,
										};
										e instanceof m.PushSash && ((r.sashPolyId = e.polyId), (r.sashType = e.type)),
											t.reflections.push(r);
									});
								}),
								(e.prototype.collectDimToSashReflections = function (e) {
									var t = e.hardwareManager.handle;
									if (t.autoOffset) {
										var n = t.dimToSash;
										this.reflections.push({
											target: 'dimToSash',
											frameId: e.topFrame.id,
											sashPolyId: e.polyId,
											sashType: e.type,
											value: n.value,
										});
									}
								}),
								(e.prototype.collectDimToInnerSashReflections = function (e, t, n) {
									var r;
									if (
										(e instanceof m.PushSash
											? (r = e.hardwareManager.handle)
											: e instanceof m.SlideSash
											? (r = o(e.hardwareManager.locks, e.hardwareManager.lock2s).find(function (
													e,
											  ) {
													return !e.hidden && !e.dimToSash.hidden;
											  }))
											: e instanceof m.FoldSash && (r = e.hardwareManager.handle),
										r && r.autoOffset && !r.hidden && !r.dimToSash.hidden)
									) {
										var i = r.dimToSash;
										this.reflections.push({
											target: 'dimToInnerSash',
											frameId: t.topFrame.id,
											iSashPolyId: t.polyId,
											sashNumber: n,
											value: i.value,
										});
									}
								}),
								(e.prototype.collectShadeReflections = function (e) {
									this.reflections.push({
										target: 'shade',
										frameId: e.topFrame.id,
										shadePolyId: e.polygon.polyId,
										sashPolyId: e.parent instanceof m.Sash ? e.parent.polyId : void 0,
										padding: e.padding,
										gap: e.gap,
									});
								}),
								(e.prototype.showBarSerials = function () {
									y.BarUID.Ins.generate(this.shapeManager.shapem, this.shapeManager.subFrames);
									var e = this.shapeManager.view;
									this.shapeManager.shapem.forEach(function (t) {
										t.frameManager.bars.forEach(function (t) {
											return t.drawSerial(e);
										}),
											t.mulManager.bars.forEach(function (t) {
												return t.drawSerial(e);
											});
									});
								}),
								(e.prototype.clearBarHoles = function () {
									this.shapeManager.shapem.forEach(function (e) {
										e.frameManager.bars.forEach(function (e) {
											return e.clearHoles();
										}),
											e.mulManager.bars.forEach(function (e) {
												return e.clearHoles();
											}),
											e.sashManager.allSashes.forEach(function (e) {
												e.frameManager.bars.forEach(function (e) {
													return e.clearHoles();
												}),
													e.mulManager.bars.forEach(function (e) {
														return e.clearHoles();
													});
											});
									});
								}),
								(e.prototype.showBarHoles = function (e) {
									var t = this;
									y.BarUID.Ins.generate(this.shapeManager.shapem, this.shapeManager.subFrames),
										e.forEach(function (e) {
											e.holes &&
												e.holes.forEach(function (n) {
													return t.addHoleOnBar(e.barSerial, +n.position, n.ccw);
												});
										});
								}),
								(e.prototype.addHoleOnBar = function (e, t, n) {
									var r = y.BarUID.Ins.find(e, this.shapeManager);
									if (r) {
										var i = !1;
										if (r.where === m.ShapeType.FrameMullion) {
											var o = r.polygon.mulShape;
											if (!(o instanceof u.default.Segment)) return;
											(g.Utils.isSegHorizontal(o) ? o.start.x > o.end.x : o.start.y > o.end.y) !==
												n && (i = !0);
										} else
											(r.parent.polygon.orientation === u.default.ORIENTATION.CW) !== n && (i = !0);
										r.holes.push(t * (i ? -1 : 1)), r.drawHoles(this.shapeManager.view);
									}
								}),
								(e.prototype.reflect = function () {
									var e = this,
										t = this.shapeManager.shapem[0].view;
									this.reflections.forEach(function (n) {
										if ('mulDim' === n.target) {
											var r = e.shapeManager.shapem.find(function (e) {
													return e.id === n.frameId;
												}),
												i = (a = n.sashPolyId
													? r.sashManager.sashes.find(function (e) {
															return e.type === n.sashType && e.polyId.equalTo(n.sashPolyId);
													  })
													: r).dim.diMgr.visualDims.find(function (e) {
													return (
														e.edgeIdx === n.edgeIdx &&
														e.mulDimIdx === n.mulDimIdx &&
														e.mulStart === n.mulStart &&
														e.type === n.type
													);
												});
											if (!i) return;
											(i.displayLength = n.value), a.dim.draw(t, !0);
										} else if ('shade' === n.target) {
											r = e.shapeManager.shapem.find(function (e) {
												return e.id === n.frameId;
											});
											var a,
												s = (a = n.sashPolyId
													? r.sashManager.shadePushSashes.find(function (e) {
															return e.polyId.equalTo(n.sashPolyId);
													  })
													: r).mulManager.shades.find(function (e) {
													return e.polygon.polyId.equalTo(n.shadePolyId);
												});
											(s.paddingLabel.text = s.paddingDesc(n.padding)),
												s.paddingLabel.updatePoly(),
												s.paddingLabel.draw(t),
												(s.gapLabel.text = s.gapDesc(n.gap)),
												s.gapLabel.updatePoly(),
												s.gapLabel.draw(t);
										} else if ('dimToSash' === n.target) {
											var l = (r = e.shapeManager.shapem.find(function (e) {
												return e.id === n.frameId;
											})).sashManager.sashes.find(function (e) {
												return e.type === n.sashType && e.polyId.equalTo(n.sashPolyId);
											});
											if (!l) return;
											var h = l.hardwareManager.handle.dimToSash;
											(h.displayLength = n.value), h.draw(t, !0);
										} else if ('dimToInnerSash' === n.target) {
											r = e.shapeManager.shapem.find(function (e) {
												return e.id === n.frameId;
											});
											var c = o(
												r.sashManager.doubleSashes,
												r.sashManager.slides,
												r.sashManager.folds,
											).find(function (e) {
												return e.polyId.equalTo(n.iSashPolyId);
											});
											if (!c) return;
											var u = c.sashes.find(function (e) {
													return e.sashNumber === n.sashNumber;
												}),
												p = void 0;
											if (
												(u instanceof m.PushSash
													? (p = u.hardwareManager.handle)
													: u instanceof m.SlideSash
													? (p = o(u.hardwareManager.locks, u.hardwareManager.lock2s).find(
															function (e) {
																return !e.hidden && !e.dimToSash.hidden;
															},
													  ))
													: u instanceof m.FoldSash && (p = u.hardwareManager.handle),
												!p)
											)
												return;
											(p.dimToSash.displayLength = n.value), p.dimToSash.draw(t, !0);
										}
									}),
										t.refresh();
								}),
								(e.prototype.mockTargetsForOfferPrice = function () {
									var e = this.shapeManager.shapem,
										t = this.shapeManager.couples,
										n = e
											.map(function (e) {
												return e.sashManager.allSashes;
											})
											.flat(),
										r = n.filter(function (e) {
											return e.type === m.ShapeType.Sash || e.type === m.ShapeType.KfcSash;
										}),
										i = [];
									f.DrawParams.Ins.fixedSashToFixedGlass &&
										((i = r.filter(function (e) {
											return e instanceof m.SlideSash && e.isFixed;
										})),
										(r = r.filter(function (e) {
											return !(e instanceof m.SlideSash && e.isFixed);
										})));
									var a = n.filter(function (e) {
											return e.type === m.ShapeType.Screen;
										}),
										s = n.filter(function (e) {
											return e.type === m.ShapeType.ShadePushSash;
										}),
										l = e
											.map(function (e) {
												return e.sashManager.doubleSashes;
											})
											.flat(),
										h = e
											.map(function (e) {
												return e.sashManager.doubleKfcSashes;
											})
											.flat(),
										c = e
											.map(function (e) {
												return e.sashManager.thefts;
											})
											.flat(),
										u = e
											.map(function (e) {
												return e.mulManager.glasses.filter(function (e) {
													return e.type === m.ShapeType.Glass;
												});
											})
											.flat();
									if (f.DrawParams.Ins.fixedSashToFixedGlass) {
										var p = i
											.map(function (e) {
												return e.mulManager.glasses.filter(function (e) {
													return e.type === m.ShapeType.Glass;
												});
											})
											.flat();
										u.push.apply(u, o(p));
									}
									var g = e
											.map(function (e) {
												return e.mulManager.glasses.filter(function (e) {
													return e.type === m.ShapeType.Shade;
												});
											})
											.flat(),
										y = r
											.map(function (e) {
												return e.mulManager.glasses.filter(function (e) {
													return e.type === m.ShapeType.Glass;
												});
											})
											.flat(),
										v = t.filter(function (e) {
											return e.type === m.ShapeType.CornerJoiner;
										}),
										w = t.filter(function (e) {
											return e.type === m.ShapeType.Connector;
										}),
										b = function (e) {
											return e.parent instanceof m.DoubleSash
												? 'doubleSash'
												: e.parent instanceof m.Slide
												? 'slide'
												: e.parent instanceof m.Fold
												? 'fold'
												: 'sash';
										},
										S = function (e) {
											return e instanceof m.PushSash
												? e.sashAssignWay
												: e instanceof m.SlideSash || e instanceof m.FoldSash
												? e.host.sashAssignWay
												: '';
										},
										_ = function (e) {
											return e instanceof m.PushSash && e.isDoor;
										},
										P = function (e) {
											return e instanceof m.PushSash && e.slide !== d.OpenDirection.None;
										},
										x = e.map(function (e) {
											return {
												type: 'frame',
												innerPoly: !0,
												originArea: e.polygon.area,
												rectArea: e.polygon.rectArea,
												arcBoxArea: e.polygon.arcBoxArea,
												frameId: e.topFrame.id,
											};
										}),
										D = r.map(function (e) {
											return {
												type: 'sash',
												innerPoly: !0,
												originArea: e.polygon.area,
												frameId: e.topFrame.id,
												hostType: b(e),
												sashAssignWay: S(e),
												isDoor: _(e),
												isSlide: P(e),
												width: e.polygon.boxWidth,
												height: e.polygon.boxHeight,
												mulsCount: e.mulManager.bars.length,
												mulHeight: e.mulHeight,
												inScreenSashGroup: e.inScreenSashGroup,
												distanceToSash: e instanceof m.PushSash && e.handleHeight,
												lockCount: e.lockCount,
												hingeCount: e.hingeCount,
											};
										}),
										T = a.map(function (e) {
											return {
												type: 'screen',
												innerPoly: !0,
												originArea: e.polygon.area,
												frameId: e.topFrame.id,
												hostType: b(e),
												sashAssignWay: S(e),
												isDoor: _(e),
												isSlide: P(e),
												width: e.polygon.boxWidth,
												height: e.polygon.boxHeight,
												mulsCount: e.mulManager.bars.length,
												mulHeight: e.mulHeight,
												inScreenSashGroup: e.inScreenSashGroup,
												distanceToSash: e instanceof m.PushSash && e.handleHeight,
												lockCount: e.lockCount,
												hingeCount: e.hingeCount,
											};
										}),
										O = s.map(function (e) {
											return {
												type: 'sashShade',
												innerPoly: !0,
												originArea: e.polygon.area,
												width: e.polygon.boxWidth,
												height: e.polygon.boxHeight,
												frameId: e.topFrame.id,
											};
										}),
										M = o(l, h).map(function (e) {
											return {
												type: 'doubleSash',
												innerPoly: !0,
												originArea: e.polygon.area,
												width: e.polygon.boxWidth,
												height: e.polygon.boxHeight,
												frameId: e.topFrame.id,
												sashAssignWay: e.sashAssignWay,
												isDoor: e.isDoor,
											};
										}),
										E = c.map(function (e) {
											return {
												type: 'antiTheft',
												innerPoly: !0,
												originArea: e.polygon.area,
												width: e.polygon.boxWidth,
												height: e.polygon.boxHeight,
												frameId: e.topFrame.id,
											};
										}),
										I = u.map(function (e) {
											return {
												type: 'fixedGlass',
												originArea: e.polygon.area,
												width: e.polygon.boxWidth,
												height: e.polygon.boxHeight,
												frameId: e.topFrame.id,
												specs: e.glassSpec.spec,
												thickness: e.glassSpec.thickness,
												innerPoly: !e.polygon.isRectangle(),
												serial: e.serial.text,
											};
										}),
										C = g.map(function (e) {
											return {
												type: 'fixedShade',
												innerPoly: !0,
												originArea: e.polygon.area,
												width: e.polygon.boxWidth,
												height: e.polygon.boxHeight,
												frameId: e.topFrame.id,
											};
										}),
										k = y.map(function (e) {
											return {
												type: 'sashGlass',
												originArea: e.polygon.area,
												width: e.polygon.boxWidth,
												height: e.polygon.boxHeight,
												frameId: e.topFrame.id,
												specs: e.glassSpec.spec,
												thickness: e.glassSpec.thickness,
												innerPoly: !e.polygon.isRectangle(),
											};
										}),
										F = v.map(function (e) {
											return {
												type: 'cornerJoiner',
												length: e.length,
												target: {
													profileSize: e.profileSize,
													origin_angle: e.skewAngle,
												},
											};
										}),
										j = w.map(function (e) {
											return {
												type: 'connector',
												length: e.length,
												profileSize: e.profileSize,
											};
										});
									return o(x, D, T, O, M, E, I, C, k, F, j);
								}),
								e
							);
						})();
						t.CcBar = v;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SlideCCBar = t.SlidePosition = void 0);
						var a,
							s = n(2),
							l = n(11),
							h = n(1);
						!(function (e) {
							(e.up = 'up'),
								(e.down = 'down'),
								(e.collisionLeft = 'collisionLeft'),
								(e.collisionRight = 'collisionRight'),
								(e.edge = 'edge'),
								(e.single = 'single'),
								(e.double = 'double'),
								(e.none = 'none');
						})((a = t.SlidePosition || (t.SlidePosition = {})));
						var c = (function () {
							function e(e, t) {
								void 0 === t && (t = []),
									(this.frames = e),
									(this.cjs = t),
									this.markProfiles(this.frames);
							}
							return (
								(e.prototype.isSlideProfile = function (e) {
									return [
										h.ShapeType.UpTrack,
										h.ShapeType.FixedUpTrack,
										h.ShapeType.DownTrack,
										h.ShapeType.FixedDownTrack,
										h.ShapeType.SideTrack,
										h.ShapeType.DoubleSideTrack,
										h.ShapeType.UpDownTrack,
										h.ShapeType.SlideSashUpBar,
										h.ShapeType.SlideSashDownBar,
										h.ShapeType.SlideSashCollisionLeftBar,
										h.ShapeType.SlideSashCollisionRightBar,
										h.ShapeType.SlideSashEdgeBar,
										h.ShapeType.SlideSashSingleBar,
										h.ShapeType.SlideSashDoubleBar,
										h.ShapeType.SlideSashNoneBar,
									].some(function (t) {
										return t === e;
									});
								}),
								(e.prototype.parseSlideAux = function (e) {
									this.parseSlideCountAux(e), this.parseSideTrackAux(e);
								}),
								(e.prototype.addSlideInfo = function (e, t) {
									var n = this;
									e.forEach(function (e) {
										(e.trackIndex = t.trackNo),
											(e.trackCount = t.host.realTracksCount),
											(e.screenTracksCount = t.host.screenTracksCount);
										var i = t.host,
											o = t.trackIndex,
											a = t.columnIndex,
											s = function (e, t) {
												var n = i.sashes.filter(function (t) {
													return t.columnIndex === e;
												});
												if (n.length > 0) {
													if (
														n.find(function (e) {
															return e.trackIndex === t;
														})
													)
														return [l.slideJoinType.collision, 0];
													var r = n.filter(function (e) {
														return e.trackIndex === o - 1 || e.trackIndex === o + 1;
													}).length;
													return 0 === r ? [l.slideJoinType.none, 0] : [l.slideJoinType.overlap, r];
												}
												return [l.slideJoinType.none, 0];
											};
										if (i.expandHorizontally)
											if (
												((e.position !== l.Direction.Down && e.position !== l.Direction.Up) ||
													((e.slideJoinType = l.slideJoinType.none), (e.slideOverlapCount = 0)),
												e.position === l.Direction.Left)
											)
												if (0 === a)
													(e.slideJoinType = l.slideJoinType.edge), (e.slideOverlapCount = 0);
												else {
													var h = r(s(a - 1, o), 2),
														c = h[0],
														u = h[1];
													(e.slideJoinType = c), (e.slideOverlapCount = u);
												}
											else if (e.position === l.Direction.Right)
												if (a === i.appliedOption.items[0].length - 1)
													(e.slideJoinType = l.slideJoinType.edge), (e.slideOverlapCount = 0);
												else {
													var p = r(s(a + 1, o), 2),
														f = p[0],
														d = p[1];
													(e.slideJoinType = f), (e.slideOverlapCount = d);
												}
											else (e.slideJoinType = l.slideJoinType.none), (e.slideOverlapCount = 0);
										else if (
											((e.position !== l.Direction.Left && e.position !== l.Direction.Right) ||
												((e.slideJoinType = l.slideJoinType.none), (e.slideOverlapCount = 0)),
											e.position === l.Direction.Down)
										)
											if (0 === a)
												(e.slideJoinType = l.slideJoinType.edge), (e.slideOverlapCount = 0);
											else {
												var g = r(s(a - 1, o), 2);
												(c = g[0]), (u = g[1]), (e.slideJoinType = c), (e.slideOverlapCount = u);
											}
										else if (e.position === l.Direction.Up)
											if (a === i.appliedOption.items[0].length - 1)
												(e.slideJoinType = l.slideJoinType.edge), (e.slideOverlapCount = 0);
											else {
												var y = r(s(a + 1, o), 2);
												(f = y[0]), (d = y[1]), (e.slideJoinType = f), (e.slideOverlapCount = d);
											}
										else (e.slideJoinType = l.slideJoinType.none), (e.slideOverlapCount = 0);
										n.getSlidePosition(e);
									}),
										this.addSlidePosType(e, t);
								}),
								(e.prototype.addSlidePosType = function (e, t) {
									var n = t.frameManager.ejw[0],
										r = function (t) {
											var n = e.find(function (e) {
												return e.position === t;
											});
											return n ? n.slidePosition : a.none;
										},
										i = r(l.Direction.Left),
										o = r(l.Direction.Right),
										h = r(l.Direction.Up),
										c = r(l.Direction.Down),
										u = [i, o],
										p = [h, c],
										f = [a.none, a.none];
									e.forEach(function (e) {
										n !== s.EdgeJointWay.Horizontal ||
										(e.position !== l.Direction.Left && e.position !== l.Direction.Right)
											? n !== s.EdgeJointWay.Vertical ||
											  (e.position !== l.Direction.Up && e.position !== l.Direction.Down)
												? (e.slidePosType = f)
												: (e.slidePosType = u)
											: (e.slidePosType = p);
									});
								}),
								(e.prototype.getSlidePosition = function (e) {
									if (
										e.slideJoinType !== l.slideJoinType.none ||
										(e.position !== l.Direction.Left && e.position !== l.Direction.Right)
									)
										if (e.position === l.Direction.Down) e.slidePosition = a.down;
										else if (e.position === l.Direction.Up) e.slidePosition = a.up;
										else if (e.slideJoinType === l.slideJoinType.edge) e.slidePosition = a.edge;
										else if (
											e.slideJoinType === l.slideJoinType.collision &&
											e.position === l.Direction.Left
										)
											e.slidePosition = a.collisionRight;
										else if (
											e.slideJoinType === l.slideJoinType.collision &&
											e.position === l.Direction.Right
										)
											e.slidePosition = a.collisionLeft;
										else if (
											e.slideJoinType === l.slideJoinType.overlap &&
											1 === e.slideOverlapCount
										)
											e.slidePosition = a.single;
										else {
											if (e.slideJoinType !== l.slideJoinType.overlap || 2 !== e.slideOverlapCount)
												throw new Error('unknown slide position');
											e.slidePosition = a.double;
										}
									else e.slidePosition = a.none;
								}),
								(e.prototype.parseSlideCountAux = function (e) {
									var t = new Map(),
										n = new Map();
									this.frames.forEach(function (e) {
										var r = i(e.frameManager.bars, e.mulManager.bars);
										e.sashManager.slides.forEach(function (e) {
											e.polygon.edges.map(function (i, o) {
												var a = i,
													s = l.EdgeFinder.Instance.findConnectedEdge(a, r).bar;
												if (s) {
													var h = t.get(s.id);
													void 0 !== h
														? e.realTracksCount > h && t.set(s.id, e.realTracksCount)
														: (t.set(s.id, e.realTracksCount), n.set(s.id, e.screenTracksCount));
												}
											});
										});
									}),
										e.forEach(function (e) {
											(e.type !== h.ShapeType.SideTrack &&
												e.type !== h.ShapeType.UpDownTrack &&
												e.type !== h.ShapeType.UpTrack &&
												e.type !== h.ShapeType.DownTrack &&
												e.type !== h.ShapeType.FixedDownTrack &&
												e.type !== h.ShapeType.FixedUpTrack) ||
												(void 0 !== t.get(e.shapeId) &&
													((e.trackCount = t.get(e.shapeId)),
													(e.screenTracksCount = n.get(e.shapeId))));
										});
								}),
								(e.prototype.markDoubleSideTrack = function () {
									if (0 !== this.frames.length) {
										var e = this.frames[0].view.shapeManager.shapem
												.map(function (e) {
													return e.sashManager.slides;
												})
												.flat(),
											t = this.frames[0].view.shapeManager.shapem
												.map(function (e) {
													return e.mulManager.glasses;
												})
												.flat();
										this.frames
											.map(function (e) {
												return i(e.frameManager.bars, e.mulManager.bars);
											})
											.flat()
											.forEach(function (n) {
												n.type === h.ShapeType.SideTrack &&
													n.polygon.edges.filter(function (n) {
														var r = e.some(function (e) {
																return l.EdgeFinder.Instance.isPolygonConnectedWithEdge(
																	n,
																	e.polygon,
																);
															}),
															i = t.some(function (e) {
																return l.EdgeFinder.Instance.isPolygonConnectedWithEdge(
																	n,
																	e.polygon,
																);
															});
														return r || i;
													}).length >= 2 &&
													(n.type = h.ShapeType.DoubleSideTrack);
											});
									}
								}),
								(e.prototype.parseSideTrackAux = function (e) {
									var t = this,
										n = [],
										r = this.frames
											.map(function (e) {
												return e.sashManager.slides;
											})
											.flat(),
										o = this.frames
											.map(function (e) {
												return e.mulManager.glasses;
											})
											.flat()
											.filter(function (e) {
												return e.bead;
											})
											.map(function (e) {
												return e.bead.frameManager.bars;
											})
											.flat(),
										a = this.frames
											.map(function (e) {
												return i(e.frameManager.bars, e.mulManager.bars);
											})
											.flat()
											.filter(function (e) {
												return (
													e.type === h.ShapeType.SideTrack || e.type === h.ShapeType.DoubleSideTrack
												);
											}),
										c = a.filter(function (e) {
											var t = e.topFrame;
											return (
												e.where === h.ShapeType.Frame && t.frameManager.asSideTracks[e.polyId.idx]
											);
										}),
										u = this.cjs.filter(function (e) {
											return r.some(function (t) {
												return s.Utils.polyCoincide(e.polygon, t.polygon);
											});
										});
									i(a, u).forEach(function (a) {
										var h = c.some(function (e) {
												return e === a;
											}),
											u = a.sideEdges.find(function (e) {
												return !e.contains(a.polygon.mulShape.middle());
											});
										a.polygon.edges.forEach(function (a) {
											var c = u && a.contains(u.middle()),
												p = o.filter(function (e) {
													return a.contains(e.polygon.mulShape.middle());
												}),
												f = r.find(function (e) {
													return s.Utils.edgeCoincidedPolyEdges(a, e.polygon.edges);
												});
											if (
												(p.forEach(function (t) {
													var r = e.find(function (e) {
														return e.shapeId === t.id && e.type === l.ccTypeEnum.fixedBead;
													});
													if (r) {
														var i = Object.assign({}, r);
														(i.type = f
															? l.ccTypeEnum.sideTrackFixed
															: l.ccTypeEnum.sideTrackCouple),
															h && c && (i.type = l.ccTypeEnum.sideTrackFixed),
															(i.shapeId = -1),
															n.push(i);
													}
												}),
												p.length > 1)
											) {
												var d = t.matchSideTrackThroughFixed(p, e).map(function (t) {
													var n = e.find(function (e) {
															return e.shapeId === t.id && e.type !== l.ccTypeEnum.turningFrame;
														}),
														r = Object.assign({}, n),
														i = new s.EndpointDock();
													return (
														(i.stDock = t.stDock.clone()),
														(i.etDock = t.etDock.clone()),
														(r.posType = i.posType(p[0].topFrame)),
														(r.cutAngle = [t.stAngle, t.etAngle].sort().reverse().join('-')),
														(r.cc = t.cc),
														(r.type = f
															? l.ccTypeEnum.sideTrackThroughFixed
															: l.ccTypeEnum.sideTrackThroughCouple),
														r
													);
												});
												n.push.apply(n, i(d));
											}
										});
									}),
										this.frames.forEach(function (r) {
											return t.parseSlideSideTrack(r, e, n);
										}),
										e.push.apply(e, i(n));
								}),
								(e.prototype.matchSideTrackThroughFixed = function (e, t) {
									for (
										var n = e.map(function (e) {
												var n = t.find(function (t) {
													return (
														t.shapeId === e.id &&
														(t.type === l.ccTypeEnum.fixedBead ||
															t.type === l.ccTypeEnum.fixedNetBead ||
															t.type === l.ccTypeEnum.fixedPanelBead ||
															t.type === l.ccTypeEnum.fixedShadeBead)
													);
												});
												return {
													id: e.id,
													stDock: e.epDock.stDock,
													etDock: e.epDock.etDock,
													stAngle: e.stAngle,
													etAngle: e.etAngle,
													cc: n.cc,
													combined: !1,
												};
											}),
											r = this.findSameDockBeadsInList(n);
										void 0 !== r;

									)
										[r.jIndex, r.mIndex]
											.sort()
											.reverse()
											.forEach(function (e) {
												return n.splice(e, 1);
											}),
											n.push(r.combined),
											(r = this.findSameDockBeadsInList(n));
									return n.filter(function (e) {
										return e.combined;
									});
								}),
								(e.prototype.findSameDockBeadsInList = function (e) {
									for (var t = 0; t < e.length; t++)
										for (var n = e[t], r = 0; r < e.length; r++) {
											var i = e[r];
											if (t !== r) {
												var o = n.id,
													a = new s.Dock(),
													l = new s.Dock(),
													h = -1,
													c = -1,
													u = n.cc + i.cc;
												if (n.stDock.equalTo(i.stDock))
													(a = n.etDock), (l = i.etDock), (h = n.etAngle), (c = i.etAngle);
												else if (n.stDock.equalTo(i.etDock))
													(a = n.etDock), (l = i.stDock), (h = n.etAngle), (c = i.stAngle);
												else if (n.etDock.equalTo(i.stDock))
													(a = n.stDock), (l = i.etDock), (h = n.stAngle), (c = i.etAngle);
												else {
													if (!n.etDock.equalTo(i.etDock)) continue;
													(a = n.stDock), (l = i.stDock), (h = n.stAngle), (c = i.stAngle);
												}
												return {
													jIndex: t,
													mIndex: r,
													combined: {
														id: o,
														stDock: a,
														etDock: l,
														stAngle: h,
														etAngle: c,
														cc: u,
														combined: !0,
													},
												};
											}
										}
								}),
								(e.prototype.parseSlideSideTrack = function (e, t, n) {
									var r = this,
										i = new Map();
									t.filter(function (t) {
										return t.frameId === e.id && t.type === h.ShapeType.Slide;
									}).forEach(function (e) {
										var t, a;
										if (!i.has(e.id)) {
											var s = void 0;
											try {
												for (var c = o(r.frames), u = c.next(); !u.done; u = c.next()) {
													var p = u.value.sashManager.slides.find(function (t) {
														return t.id === e.id;
													});
													if (p) {
														s = p;
														break;
													}
												}
											} catch (e) {
												t = {
													error: e,
												};
											} finally {
												try {
													u && !u.done && (a = c.return) && a.call(c);
												} finally {
													if (t) throw t.error;
												}
											}
											if (s) {
												var f = s.columnCount,
													d = [],
													g = [],
													y = [],
													m = [];
												if (s.expandHorizontally)
													for (
														var v = function (e) {
																if (
																	(s.emptyTrackAppended === h.EmptyTrackPosition.Bottom &&
																		1 === e) ||
																	(s.emptyTrackAppended === h.EmptyTrackPosition.Top &&
																		e === s.realTracksCount)
																)
																	return 'continue';
																void 0 !==
																s.sashes.find(function (t) {
																	return t.trackNo === e && 0 === t.columnIndex;
																})
																	? d.push(e)
																	: g.push(e),
																	void 0 !==
																	s.sashes.find(function (t) {
																		return t.trackNo === e && t.columnIndex === f - 1;
																	})
																		? y.push(e)
																		: m.push(e);
															},
															w = 1;
														w <= s.realTracksCount;
														w++
													)
														v(w);
												else d.push(1), y.push(1);
												i.set(e.id, [d, y, g, m, s]);
											}
										}
										if (e.sizeType === l.sizeTypeEnum.height) {
											var b = i.get(e.id);
											if (void 0 === b) return;
											var S = b[0],
												_ = b[1],
												P = b[2],
												x = b[3];
											if (((s = b[4]), e.position === l.Direction.Left)) {
												if (
													(S.forEach(function (t) {
														var r = Object.assign({}, e);
														(r.type = l.ccTypeEnum.sideTrackSlide),
															(r.trackNo = t),
															(r.shapeId = -1),
															n.push(r);
													}),
													!s.expandHorizontally)
												)
													return;
												P.forEach(function (t) {
													var r = Object.assign({}, e);
													(r.type = l.ccTypeEnum.sideTrackSlideEmbedded),
														(r.trackNo = t),
														(r.shapeId = -1),
														n.push(r);
												});
											} else if (e.position === l.Direction.Right) {
												if (
													(_.forEach(function (t) {
														var r = Object.assign({}, e);
														(r.type = l.ccTypeEnum.sideTrackSlide),
															(r.trackNo = t),
															(r.shapeId = -1),
															n.push(r);
													}),
													!s.expandHorizontally)
												)
													return;
												x.forEach(function (t) {
													var r = Object.assign({}, e);
													(r.type = l.ccTypeEnum.sideTrackSlideEmbedded),
														(r.trackNo = t),
														(r.shapeId = -1),
														n.push(r);
												});
											}
										}
									});
								}),
								(e.prototype.markProfiles = function (e) {
									var t = this;
									e.forEach(function (e) {
										e.frameManager.bars.forEach(function (t) {
											e.frameManager.asSideTracks[t.polyId.idx] && (t.type = h.ShapeType.SideTrack);
										});
										var n = new Map(),
											r = i(e.frameManager.bars, e.mulManager.bars);
										e.sashManager.slides.forEach(function (i) {
											return t.markSlideProfiles(e, n, r);
										}),
											r.forEach(function (e) {
												var t = n.get(e.id);
												t &&
													t.find(function (e) {
														return e === h.ShapeType.FixedUpTrack;
													}) &&
													t.find(function (e) {
														return e === h.ShapeType.FixedDownTrack;
													}) &&
													(e.type = h.ShapeType.UpDownTrack);
											});
									}),
										this.markDoubleSideTrack();
								}),
								(e.prototype.markSlideProfiles = function (e, t, n) {
									e.sashManager.slides.forEach(function (e) {
										e.polygon.edges.map(function (r, i) {
											var o = l.EdgeFinder.Instance.findDirection(e.polygon, i),
												a = r,
												s = l.EdgeFinder.Instance.findConnectedEdge(a, n).bar;
											if (s) {
												var c = t.get(s.id);
												[l.Direction.Left, l.Direction.Right].some(function (e) {
													return e === o;
												})
													? (s.type = h.ShapeType.SideTrack)
													: o === l.Direction.Down
													? ((s.type =
															'FrameMullion' === s.where
																? h.ShapeType.FixedUpTrack
																: h.ShapeType.UpTrack),
													  c ? c.push(s.type) : t.set(s.id, [s.type]))
													: o === l.Direction.Up &&
													  ((s.type =
															'FrameMullion' === s.where
																? h.ShapeType.FixedDownTrack
																: h.ShapeType.DownTrack),
													  c ? c.push(s.type) : t.set(s.id, [s.type]));
											}
										});
									});
								}),
								(e.prototype.parseBead = function (e, t) {
									var n = this;
									void 0 === t && (t = []),
										e.forEach(function (o) {
											if (
												-1 !==
												[
													l.ccTypeEnum.fixedBead,
													l.ccTypeEnum.sashBead,
													l.ccTypeEnum.fixedBead,
													l.ccTypeEnum.panelBead,
													l.ccTypeEnum.screenBead,
													l.ccTypeEnum.fixedNetBead,
													l.ccTypeEnum.foldSashBead,
													l.ccTypeEnum.slideSashBead,
													l.ccTypeEnum.doubleSashBead,
													l.ccTypeEnum.fixedPanelBead,
													l.ccTypeEnum.foldScreenBead,
													l.ccTypeEnum.doubleScreenBead,
												].indexOf(o.type)
											) {
												o.installPosition = 'unknown';
												var a = o.position;
												(a !== l.Direction.Up && a !== l.Direction.Down) ||
													(a = l.EdgeFinder.Instance.getOppositeDirection(a));
												var s = r(n.findBead(o), 2),
													h = s[0],
													c = s[1];
												if (h) {
													var u = l.EdgeFinder.Instance.find(
														a,
														h.polygon.edges,
														h.polygon.orientation,
													);
													if (u) {
														var p = i(c.frameManager.bars, t);
														n.changeInstallPosition(o, p, e, u) ||
															n.changeInstallPosition(o, c.mulManager.bars, e, u);
													}
												}
											}
										});
								}),
								(e.prototype.findBead = function (e) {
									var t, n, r, i, a, s, l, h, c, u, p, f, d, g;
									try {
										for (var y = o(this.frames), m = y.next(); !m.done; m = y.next()) {
											var v = m.value;
											try {
												for (
													var w = ((r = void 0), o(v.mulManager.glasses)), b = w.next();
													!b.done;
													b = w.next()
												)
													if ((M = b.value).bead) {
														try {
															for (
																var S = ((a = void 0), o(M.bead.frameManager.bars)), _ = S.next();
																!_.done;
																_ = S.next()
															)
																if ((C = _.value).id === e.shapeId) {
																	(d = C), (g = v);
																	break;
																}
														} catch (e) {
															a = {
																error: e,
															};
														} finally {
															try {
																_ && !_.done && (s = S.return) && s.call(S);
															} finally {
																if (a) throw a.error;
															}
														}
														if (d) break;
													}
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													b && !b.done && (i = w.return) && i.call(w);
												} finally {
													if (r) throw r.error;
												}
											}
											if (d) break;
											try {
												for (
													var P = ((l = void 0), o(v.sashManager.allSashes)), x = P.next();
													!x.done;
													x = P.next()
												) {
													var D = x.value;
													try {
														for (
															var T = ((c = void 0), o(D.mulManager.glasses)), O = T.next();
															!O.done;
															O = T.next()
														) {
															var M;
															if ((M = O.value).bead) {
																try {
																	for (
																		var E = ((p = void 0), o(M.bead.frameManager.bars)),
																			I = E.next();
																		!I.done;
																		I = E.next()
																	) {
																		var C;
																		if ((C = I.value).id === e.shapeId) {
																			(d = C), (g = D);
																			break;
																		}
																	}
																} catch (e) {
																	p = {
																		error: e,
																	};
																} finally {
																	try {
																		I && !I.done && (f = E.return) && f.call(E);
																	} finally {
																		if (p) throw p.error;
																	}
																}
																if (d) break;
															}
														}
													} catch (e) {
														c = {
															error: e,
														};
													} finally {
														try {
															O && !O.done && (u = T.return) && u.call(T);
														} finally {
															if (c) throw c.error;
														}
													}
												}
											} catch (e) {
												l = {
													error: e,
												};
											} finally {
												try {
													x && !x.done && (h = P.return) && h.call(P);
												} finally {
													if (l) throw l.error;
												}
											}
											if (d) break;
										}
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											m && !m.done && (n = y.return) && n.call(y);
										} finally {
											if (t) throw t.error;
										}
									}
									return [d, g];
								}),
								(e.prototype.changeInstallPosition = function (e, t, n, r) {
									var i;
									if (
										(i = t.find(function (e) {
											return e.polygon.edges.some(function (e) {
												return e.contains(r.middle());
											});
										}))
									) {
										var o = n.find(function (e) {
											return e.shapeId === i.id;
										});
										if (o) return (e.installPosition = o.type), !0;
									}
									return !1;
								}),
								e
							);
						})();
						t.SlideCCBar = c;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FoldCCBar = void 0);
						var o = n(1),
							a = n(11),
							s = (function () {
								function e(e) {
									(this.frames = e), this.markProfiles(this.frames);
								}
								return (
									(e.prototype.markProfiles = function (e) {
										e.forEach(function (e) {
											var t = i(e.frameManager.bars, e.mulManager.bars);
											e.sashManager.folds.forEach(function (e) {
												e.polygon.edges.map(function (n, r) {
													var i = a.EdgeFinder.Instance.findDirection(e.polygon, r),
														s = n,
														l = a.EdgeFinder.Instance.findConnectedEdge(s, t).bar;
													l &&
														([a.Direction.Left, a.Direction.Right].some(function (e) {
															return e === i;
														})
															? (l.type = o.ShapeType.SideTrack)
															: i === a.Direction.Down
															? (l.type =
																	'FrameMullion' === l.where
																		? o.ShapeType.FixedUpTrack
																		: o.ShapeType.UpTrack)
															: i === a.Direction.Up &&
															  (l.type =
																	'FrameMullion' === l.where
																		? o.ShapeType.FixedDownTrack
																		: o.ShapeType.DownTrack));
												});
											});
										});
									}),
									e
								);
							})();
						t.FoldCCBar = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__values) ||
							function (e) {
								var t = 'function' == typeof Symbol && Symbol.iterator,
									n = t && e[t],
									r = 0;
								if (n) return n.call(e);
								if (e && 'number' == typeof e.length)
									return {
										next: function () {
											return (
												e && r >= e.length && (e = void 0),
												{
													value: e && e[r++],
													done: !e,
												}
											);
										},
									};
								throw new TypeError(
									t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
								);
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PushSlideCCBar = void 0);
						var i = n(13),
							o = n(1),
							a = n(81),
							s = (function () {
								function e(e) {
									this.frames = e;
								}
								return (
									(e.prototype.parseScreenSlide = function (e, t, n) {
										var s,
											l,
											h = e.sashManager.sashes.filter(function (e) {
												return e instanceof o.PushSash && e.slide !== i.OpenDirection.None;
											});
										t.forEach(function (e) {
											(e.isSlide = !1), (e.isPushSlide = !1), (e.isPushTrack = !1);
										});
										var c = function (r) {
											n.forEach(function (e) {
												if (a.EdgeFinder.Instance.isPolygonConnected(e.polygon, r.polygon)) {
													var n = t.find(function (t) {
														return t.shapeId === e.id;
													});
													n && (n.isSlide = !0);
												}
											});
											var i = a.EdgeFinder.Instance.getOpenDirectionToDirection(r.slide),
												o = a.EdgeFinder.Instance.findIndex(i, r.polygon),
												s = r.polygon.edDock.docks[o].dockBar(e),
												l = t.find(function (e) {
													return e.shapeId === s.id;
												});
											if (
												(l && (l.isPushSlide = !0),
												i === a.Direction.Right || i === a.Direction.Left)
											) {
												var h = a.EdgeFinder.Instance.findIndex(a.Direction.Up, r.polygon),
													c = r.polygon.edDock.docks[h].dockBar(e),
													u = t.find(function (e) {
														return e.shapeId === c.id;
													});
												u && (u.isPushTrack = !0);
												var p = a.EdgeFinder.Instance.findIndex(a.Direction.Down, r.polygon),
													f = r.polygon.edDock.docks[p].dockBar(e),
													d = t.find(function (e) {
														return e.shapeId === f.id;
													});
												d && (d.isPushTrack = !0);
											}
										};
										try {
											for (var u = r(h), p = u.next(); !p.done; p = u.next()) c(p.value);
										} catch (e) {
											s = {
												error: e,
											};
										} finally {
											try {
												p && !p.done && (l = u.return) && l.call(u);
											} finally {
												if (s) throw s.error;
											}
										}
									}),
									e
								);
							})();
						t.PushSlideCCBar = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DxfExporter = void 0);
						var i,
							o = r(n(0)),
							a = r(n(120)),
							s = r(n(120)),
							l = n(1),
							h = n(13),
							c = (function () {
								function e(e) {
									(this.view = e), (this.dxf = new s.default());
								}
								return (
									Object.defineProperty(e.prototype, 'manager', {
										get: function () {
											return this.view.shapeManager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.export = function () {
										var e = this;
										this.dxf.setUnits('Millimeters'),
											this.dxf.addLineType('DASHED', '_ ', [50, -50]),
											this.dxf.addLayer(i.DASHED, a.default.ACI.WHITE, 'DASHED');
										var t = this.manager.shapeBox.center,
											n = o.default.vector(t, o.default.point());
										return (
											this.manager.translate(n),
											this.manager.shapem.forEach(function (t) {
												e.drawFrame(t.frameManager),
													e.drawMullion(t.mulManager),
													t.mulManager.glasses.forEach(function (t) {
														return e.drawFiller(t);
													}),
													t.dim.diMgr.visualDims.forEach(function (t) {
														return e.drawDim(t);
													}),
													t.sashManager.allSashes.forEach(function (t) {
														e.drawFrame(t.frameManager),
															e.drawMullion(t.mulManager),
															t.mulManager.glasses.forEach(function (t) {
																return e.drawFiller(t);
															}),
															e.drawHardware(t.hardwareManager);
													}),
													t.sashManager.thefts.forEach(function (t) {
														e.drawFrame(t.frameManager), e.drawShutter(t.shutManager);
													});
											}),
											this.manager.couples.forEach(function (t) {
												return e.drawPolygon(t.polygon);
											}),
											this.manager.walls.forEach(function (t) {
												e.drawPolygon(t.polygon),
													t.dims.forEach(function (t) {
														return e.drawDim(t);
													});
											}),
											this.manager.translate(n.invert()),
											this.dxf.toDxfString()
										);
									}),
									(e.prototype.drawFrame = function (e) {
										var t = this;
										e.bars.forEach(function (e) {
											return t.drawPolygon(e.polygon);
										});
									}),
									(e.prototype.drawMullion = function (e) {
										var t = this;
										e.bars.forEach(function (e) {
											return t.drawPolygon(e.polygon);
										}),
											e.glasses
												.filter(function (e) {
													return e.bead;
												})
												.forEach(function (e) {
													return t.drawFrame(e.bead.frameManager);
												});
									}),
									(e.prototype.drawShutter = function (e) {
										var t = this;
										e.bars.forEach(function (e) {
											return t.drawPolygon(e.polygon);
										});
									}),
									(e.prototype.drawFiller = function (e) {
										var t = this;
										if (e instanceof l.ScreenFiller) {
											for (
												var n = e.renderPolygon,
													r = n.box,
													i = r.high,
													a = r.low,
													s = a,
													h = o.default.line(),
													c = [];
												s.x < i.x || s.y < i.y;

											) {
												if (
													((h = o.default.line(s, o.default.vector(1, 1))),
													(c = n.intersect(h)).length >= 2)
												) {
													var u = o.default.segment(c[0], c[1]);
													this.drawLine(u);
												}
												s = s.translate(o.default.vector(30, 30));
											}
											for (
												i = o.default.point(r.xmin, r.ymax),
													s = a = o.default.point(r.xmax, r.ymin),
													h = o.default.line(),
													c = [];
												s.x > i.x || s.y < i.y;

											)
												(h = o.default.line(s, o.default.vector(-1, 1))),
													(c = n.intersect(h)).length >= 2 &&
														((u = o.default.segment(c[0], c[1])), this.drawLine(u)),
													(s = s.translate(o.default.vector(-30, 30)));
										}
										var p = e.parent.mulManager.decorationBarManager.getDecorationBar(
											e.polygon.polyId,
										);
										if (p && e.type === l.ShapeType.Glass) {
											var f = p.bars
													.map(function (e) {
														return e.polygon;
													})
													.sort(function (e, t) {
														return e.box.center.x - t.box.center.x;
													})
													.map(function (e) {
														return e.orientation === o.default.ORIENTATION.CCW
															? e.polygon.clone().reverse()
															: e.polygon.clone();
													}),
												d = new o.default.Polygon();
											f.forEach(function (e) {
												return (d = o.default.BooleanOperations.unify(d, e));
											});
											var g = e.renderPolygon,
												y =
													g.orientation === o.default.ORIENTATION.CCW
														? g.polygon.clone().reverse()
														: g.polygon.clone();
											(d = o.default.BooleanOperations.intersect(d, y)),
												Array.from(d.faces).forEach(function (e) {
													var n = e.edges.map(function (e) {
														return e.shape;
													});
													t.drawPolygon(new l.WinPolygon(n));
												});
										}
									}),
									(e.prototype.drawHardware = function (e) {
										var t = this;
										e.hardwares.forEach(function (e) {
											e.shapes.forEach(function (e) {
												return t.drawPolygon(e);
											}),
												e.hidden || t.drawDim(e.dim);
										}),
											e instanceof h.PushSashHardwareManager &&
												e.indicator.shapes.forEach(function (e) {
													t.withLayer(e.dashed ? i.DASHED : i.Default, function () {
														t.drawPath(e.poly);
													});
												}),
											e instanceof h.SlideHardwareManager &&
												e.indicatorForSlide.shapes.forEach(function (e) {
													return t.drawPath(e.poly);
												});
									}),
									(e.prototype.withLayer = function (e, t) {
										this.dxf.setActiveLayer(e), t(), this.dxf.setActiveLayer(i.Default);
									}),
									(e.prototype.drawDim = function (e) {
										var t = this;
										if (
											(!(e instanceof l.DimInfo) || e.dimShow) &&
											!(e instanceof l.Dimension && e.hidden)
										) {
											var n = (Math.round(10 * e.value) / 10).toString(),
												r = e instanceof l.DimInfo ? e.lines : e.shapes[0],
												i = r[2].middle(),
												a = 50 * n.length * 0.9,
												s = a + 40;
											this.drawText(n, i, 50),
												r.forEach(function (e, n) {
													if (2 === n) {
														var r = l.PolygonCreator.Ins.joinRelativePro(
															[
																o.default.vector(s, 0),
																o.default.vector(0, 90),
																o.default.vector(-s, 0),
															],
															o.default.point(i.x - a / 2 - 20, i.y - 25 - 20),
														).intersect(e);
														2 === r.length &&
															(t.drawLine(o.default.segment(e.start, r[0])),
															t.drawLine(o.default.segment(r[1], e.end)));
													} else t.drawLine(e);
												});
										}
									}),
									(e.prototype.drawText = function (e, t, n) {
										this.dxf.drawText(t.x, -t.y, n, 0, e, 'center', 'middle');
									}),
									(e.prototype.drawPolygon = function (e) {
										var t = e.ringPolygon();
										if (t)
											return (
												this.dxf.drawCircle(t.pc.x, -t.pc.y, t.ir),
												void this.dxf.drawCircle(t.pc.x, -t.pc.y, t.or)
											);
										var n = e.circlePolygon();
										if (n) this.dxf.drawCircle(n.pc.x, -n.pc.y, n.r);
										else {
											var r = e.edges.map(function (e) {
													var t;
													if (e instanceof o.default.Arc) {
														var n = e.chordHeight(),
															r = e.start.distanceTo(e.end)[0];
														t = (2 * (e.counterClockwise ? -1 : 1) * n) / r;
													}
													return [e.start.x, -e.start.y, t];
												}),
												i = e.edges[e.edges.length - 1];
											r.push([i.end.x, -i.end.y]), this.dxf.drawPolyline(r, !0);
										}
									}),
									(e.prototype.drawPath = function (e) {
										var t = e.edges.map(function (e) {
												return [e.start.x, -e.start.y];
											}),
											n = e.edges[e.edges.length - 1].end;
										t.push([n.x, -n.y]), this.dxf.drawPolyline(t, closed);
									}),
									(e.prototype.drawLine = function (e) {
										var t = [e.start, e.end].map(function (e) {
											return [e.x, -e.y];
										});
										this.dxf.drawPolyline(t, !1);
									}),
									e
								);
							})();
						(t.DxfExporter = c),
							(function (e) {
								(e.Default = '0'), (e.DASHED = '1');
							})(i || (i = {}));
					},
					function (e, t, n) {
						const r = n(290),
							i = n(291),
							o = n(292),
							a = n(293),
							s = n(294),
							l = n(295),
							h = n(296),
							c = n(297),
							u = n(298),
							p = n(299);
						class f {
							constructor() {
								(this.layers = {}),
									(this.activeLayer = null),
									(this.lineTypes = {}),
									(this.headers = {}),
									this.setUnits('Unitless');
								for (let e = 0; e < f.LINE_TYPES.length; ++e)
									this.addLineType(
										f.LINE_TYPES[e].name,
										f.LINE_TYPES[e].description,
										f.LINE_TYPES[e].elements,
									);
								for (let e = 0; e < f.LAYERS.length; ++e)
									this.addLayer(
										f.LAYERS[e].name,
										f.LAYERS[e].colorNumber,
										f.LAYERS[e].lineTypeName,
									);
								this.setActiveLayer('0');
							}
							addLineType(e, t, n) {
								return (this.lineTypes[e] = new r(e, t, n)), this;
							}
							addLayer(e, t, n) {
								return (this.layers[e] = new i(e, t, n)), this;
							}
							setActiveLayer(e) {
								return (this.activeLayer = this.layers[e]), this;
							}
							drawLine(e, t, n, r) {
								return this.activeLayer.addShape(new o(e, t, n, r)), this;
							}
							drawPoint(e, t) {
								return this.activeLayer.addShape(new p(e, t)), this;
							}
							drawRect(e, t, n, r) {
								return (
									this.activeLayer.addShape(new o(e, t, n, t)),
									this.activeLayer.addShape(new o(e, r, n, r)),
									this.activeLayer.addShape(new o(e, t, e, r)),
									this.activeLayer.addShape(new o(n, t, n, r)),
									this
								);
							}
							drawArc(e, t, n, r, i) {
								return this.activeLayer.addShape(new a(e, t, n, r, i)), this;
							}
							drawCircle(e, t, n) {
								return this.activeLayer.addShape(new s(e, t, n)), this;
							}
							drawText(e, t, n, r, i, o = 'left', a = 'baseline') {
								return this.activeLayer.addShape(new l(e, t, n, r, i, o, a)), this;
							}
							drawPolyline(e, t = !1, n = 0, r = 0) {
								return this.activeLayer.addShape(new h(e, t, n, r)), this;
							}
							drawPolyline3d(e) {
								return (
									e.forEach((e) => {
										if (3 !== e.length) throw 'Require 3D coordinate';
									}),
									this.activeLayer.addShape(new c(e)),
									this
								);
							}
							setTrueColor(e) {
								return this.activeLayer.setTrueColor(e), this;
							}
							drawFace(e, t, n, r, i, o, a, s, l, h, c, p) {
								return this.activeLayer.addShape(new u(e, t, n, r, i, o, a, s, l, h, c, p)), this;
							}
							_getDxfLtypeTable() {
								let e = '0\nTABLE\n';
								e += '2\nLTYPE\n';
								for (let t in this.lineTypes) e += this.lineTypes[t].toDxfString();
								return (e += '0\nENDTAB\n'), e;
							}
							_getDxfLayerTable() {
								let e = '0\nTABLE\n';
								e += '2\nLAYER\n';
								for (let t in this.layers) e += this.layers[t].toDxfString();
								return (e += '0\nENDTAB\n'), e;
							}
							header(e, t) {
								return (this.headers[e] = t), this;
							}
							_getHeader(e, t) {
								let n = '9\n$' + e + '\n';
								for (let r of t) n += `${r[0]}\n${r[1]}\n`;
								return n;
							}
							setUnits(e) {
								return (
									void 0 !== f.UNITS[e] ? f.UNITS[e] : f.UNITS.Unitless,
									this.header('INSUNITS', [[70, f.UNITS[e]]]),
									this
								);
							}
							toDxfString() {
								let e = '';
								(e += '0\nSECTION\n'), (e += '2\nHEADER\n');
								for (let t in this.headers) e += this._getHeader(t, this.headers[t]);
								(e += '0\nENDSEC\n'),
									(e += '0\nSECTION\n'),
									(e += '2\nTABLES\n'),
									(e += this._getDxfLtypeTable()),
									(e += this._getDxfLayerTable()),
									(e += '0\nENDSEC\n'),
									(e += '0\nSECTION\n'),
									(e += '2\nENTITIES\n');
								for (let t in this.layers) e += this.layers[t].shapesToDxf();
								return (e += '0\nENDSEC\n'), (e += '0\nEOF'), e;
							}
						}
						(f.ACI = {
							LAYER: 0,
							RED: 1,
							YELLOW: 2,
							GREEN: 3,
							CYAN: 4,
							BLUE: 5,
							MAGENTA: 6,
							WHITE: 7,
						}),
							(f.LINE_TYPES = [
								{
									name: 'CONTINUOUS',
									description: '______',
									elements: [],
								},
								{
									name: 'DASHED',
									description: '_ _ _ ',
									elements: [5, -5],
								},
								{
									name: 'DOTTED',
									description: '. . . ',
									elements: [0, -5],
								},
							]),
							(f.LAYERS = [
								{
									name: '0',
									colorNumber: f.ACI.WHITE,
									lineTypeName: 'CONTINUOUS',
								},
							]),
							(f.UNITS = {
								Unitless: 0,
								Inches: 1,
								Feet: 2,
								Miles: 3,
								Millimeters: 4,
								Centimeters: 5,
								Meters: 6,
								Kilometers: 7,
								Microinches: 8,
								Mils: 9,
								Yards: 10,
								Angstroms: 11,
								Nanometers: 12,
								Microns: 13,
								Decimeters: 14,
								Decameters: 15,
								Hectometers: 16,
								Gigameters: 17,
								'Astronomical units': 18,
								'Light years': 19,
								Parsecs: 20,
							}),
							(e.exports = f);
					},
					function (e, t) {
						e.exports = class {
							constructor(e, t, n) {
								(this.name = e), (this.description = t), (this.elements = n);
							}
							toDxfString() {
								let e = '0\nLTYPE\n';
								(e += '72\n65\n'),
									(e += '70\n64\n'),
									(e += `2\n${this.name}\n`),
									(e += `3\n${this.description}\n`),
									(e += `73\n${this.elements.length}\n`),
									(e += `40\n${this.getElementsSum()}\n`);
								for (let t = 0; t < this.elements.length; ++t) e += `49\n${this.elements[t]}\n`;
								return e;
							}
							getElementsSum() {
								let e = 0;
								for (let t = 0; t < this.elements.length; ++t) e += Math.abs(this.elements[t]);
								return e;
							}
						};
					},
					function (e, t) {
						e.exports = class {
							constructor(e, t, n) {
								(this.name = e),
									(this.colorNumber = t),
									(this.lineTypeName = n),
									(this.shapes = []),
									(this.trueColor = -1);
							}
							toDxfString() {
								let e = '0\nLAYER\n';
								return (
									(e += '70\n64\n'),
									(e += `2\n${this.name}\n`),
									-1 !== this.trueColor
										? (e += `420\n${this.trueColor}\n`)
										: (e += `62\n${this.colorNumber}\n`),
									(e += `6\n${this.lineTypeName}\n`),
									e
								);
							}
							setTrueColor(e) {
								this.trueColor = e;
							}
							addShape(e) {
								this.shapes.push(e), (e.layer = this);
							}
							getShapes() {
								return this.shapes;
							}
							shapesToDxf() {
								let e = '';
								for (let t = 0; t < this.shapes.length; ++t) e += this.shapes[t].toDxfString();
								return e;
							}
						};
					},
					function (e, t) {
						e.exports = class {
							constructor(e, t, n, r) {
								(this.x1 = e), (this.y1 = t), (this.x2 = n), (this.y2 = r);
							}
							toDxfString() {
								let e = '0\nLINE\n';
								return (
									(e += `8\n${this.layer.name}\n`),
									(e += `10\n${this.x1}\n20\n${this.y1}\n30\n0\n`),
									(e += `11\n${this.x2}\n21\n${this.y2}\n31\n0\n`),
									e
								);
							}
						};
					},
					function (e, t) {
						e.exports = class {
							constructor(e, t, n, r, i) {
								(this.x1 = e),
									(this.y1 = t),
									(this.r = n),
									(this.startAngle = r),
									(this.endAngle = i);
							}
							toDxfString() {
								let e = '0\nARC\n';
								return (
									(e += `8\n${this.layer.name}\n`),
									(e += `10\n${this.x1}\n20\n${this.y1}\n30\n0\n`),
									(e += `40\n${this.r}\n50\n${this.startAngle}\n51\n${this.endAngle}\n`),
									e
								);
							}
						};
					},
					function (e, t) {
						e.exports = class {
							constructor(e, t, n) {
								(this.x1 = e), (this.y1 = t), (this.r = n);
							}
							toDxfString() {
								let e = '0\nCIRCLE\n';
								return (
									(e += `8\n${this.layer.name}\n`),
									(e += `10\n${this.x1}\n20\n${this.y1}\n30\n0\n`),
									(e += `40\n${this.r}\n`),
									e
								);
							}
						};
					},
					function (e, t) {
						const n = ['left', 'center', 'right'],
							r = ['baseline', 'bottom', 'middle', 'top'];
						e.exports = class {
							constructor(e, t, n, r, i, o = 'left', a = 'baseline') {
								(this.x1 = e),
									(this.y1 = t),
									(this.height = n),
									(this.rotation = r),
									(this.value = i),
									(this.hAlign = o),
									(this.vAlign = a);
							}
							toDxfString() {
								let e = '0\nTEXT\n';
								return (
									(e += `8\n${this.layer.name}\n`),
									(e += `1\n${this.value}\n`),
									(e += `10\n${this.x1}\n20\n${this.y1}\n30\n0\n`),
									(e += `40\n${this.height}\n50\n${this.rotation}\n`),
									(n.includes(this.hAlign, 1) || r.includes(this.vAlign, 1)) &&
										((e += `11\n${this.x1}\n21\n${this.y1}\n31\n0\n`),
										(e += `72\n${Math.max(n.indexOf(this.hAlign), 0)}\n`),
										(e += `73\n${Math.max(r.indexOf(this.vAlign), 0)}\n`)),
									e
								);
							}
						};
					},
					function (e, t) {
						e.exports = class {
							constructor(e, t = !1, n = 0, r = 0) {
								(this.points = e), (this.closed = t), (this.startWidth = n), (this.endWidth = r);
							}
							toDxfString() {
								let e = '0\nPOLYLINE\n';
								(e += `8\n${this.layer.name}\n`),
									(e += `66\n1\n70\n${this.closed ? 1 : 0}\n`),
									(0 === this.startWidth && 0 === this.endWidth) ||
										(e += `40\n${this.startWidth}\n41\n${this.endWidth}\n`);
								for (let t = 0; t < this.points.length; ++t)
									(e += '0\nVERTEX\n'),
										(e += `8\n${this.layer.name}\n`),
										(e += '70\n0\n'),
										(e += `10\n${this.points[t][0]}\n20\n${this.points[t][1]}\n`),
										void 0 !== this.points[t][2] && (e += `42\n${this.points[t][2]}\n`);
								return (e += '0\nSEQEND\n'), e;
							}
						};
					},
					function (e, t) {
						e.exports = class {
							constructor(e) {
								this.points = e;
							}
							toDxfString() {
								let e = '0\nPOLYLINE\n';
								(e += `8\n${this.layer.name}\n`), (e += '66\n1\n70\n8\n');
								for (let t = 0; t < this.points.length; ++t)
									(e += '0\nVERTEX\n'),
										(e += `8\n${this.layer.name}\n`),
										(e += '70\n0\n'),
										(e += `10\n${this.points[t][0]}\n20\n${this.points[t][1]}\n30\n${this.points[t][2]}\n`);
								return (e += '0\nSEQEND\n'), e;
							}
						};
					},
					function (e, t) {
						e.exports = class {
							constructor(e, t, n, r, i, o, a, s, l, h, c, u) {
								(this.x1 = e),
									(this.y1 = t),
									(this.z1 = n),
									(this.x2 = r),
									(this.y2 = i),
									(this.z2 = o),
									(this.x3 = a),
									(this.y3 = s),
									(this.z3 = l),
									(this.x4 = h),
									(this.y4 = c),
									(this.z4 = u);
							}
							toDxfString() {
								let e = '0\n3DFACE\n';
								return (
									(e += `8\n${this.layer.name}\n`),
									(e += `10\n${this.x1}\n20\n${this.y1}\n30\n${this.z1}\n`),
									(e += `11\n${this.x2}\n21\n${this.y2}\n31\n${this.z2}\n`),
									(e += `12\n${this.x3}\n22\n${this.y3}\n32\n${this.z3}\n`),
									(e += `13\n${this.x4}\n23\n${this.y4}\n33\n${this.z4}\n`),
									e
								);
							}
						};
					},
					function (e, t) {
						e.exports = class {
							constructor(e, t) {
								(this.x = e), (this.y = t);
							}
							toDxfString() {
								let e = '0\nPOINT\n';
								return (
									(e += `8\n${this.layer.name}\n`),
									(e += `10\n${this.x}\n20\n${this.y}\n30\n0\n`),
									e
								);
							}
						};
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EqualSplitGlassOptimizer = void 0);
						var i = r(n(0)),
							o = n(1),
							a = n(2),
							s = (function () {
								function e(e, t) {
									(this.shapeManager = e),
										(this.ccbar = t),
										(this.adjustedSplitters = []),
										(this.realGlassSizes = []),
										(this.view = this.shapeManager.shapem[0].view);
								}
								return (
									(e.prototype.realGlassSize = function (e) {
										return this.realGlassSizes.find(function (t) {
											return t.serial === e;
										});
									}),
									(e.prototype.optimize = function (e) {
										var t = this;
										return (
											0 !== e.length &&
											((this.realGlassSizes = e.map(function (e) {
												return {
													serial: e.serial,
													width: e.width,
													height: e.height,
												};
											})),
											this.shapeManager.shapem.forEach(function (e) {
												var n = e.mulManager.splitter;
												(n.equalizeForCalc = t.calcOffsets.bind(t)),
													(n.twiceEqualSplitRequire = !1),
													n.tweakEqualSplit(),
													(n.equalizeForCalc = void 0);
											}),
											!this.shapeManager.shapem.some(function (e) {
												return e.mulManager.splitter.twiceEqualSplitRequire;
											}) &&
												(this.shapeManager.shapem.forEach(function (e) {
													e.mulManager.splitter.lines.forEach(function (e) {
														e.equalSplit !== a.EqualSplitType.None &&
															((e.equalSplit = a.EqualSplitType.None), t.adjustedSplitters.push(e));
													}),
														e.updateFrame(!0),
														e.draw(t.view);
												}),
												o.Glass.calcSerial(this.shapeManager.shapem),
												this.view.refresh(),
												this.shapeManager.shapem.forEach(function (e) {
													return t.ccbar.collectMulDimReflections(e);
												}),
												this.adjustedSplitters.forEach(function (e) {
													return (e.equalSplit = a.EqualSplitType.Outter);
												}),
												!0))
										);
									}),
									(e.prototype.calcOffsets = function (e, t, n) {
										var r = this,
											s = n.filter(function (t) {
												return a.Utils.polyConcideSeg(t.polygon, e, !1);
											});
										s.sort(function (t, n) {
											var r = i.default.line(e.start, e.end),
												o = t.polygon.box.center.projectionOn(r),
												a = n.polygon.box.center.projectionOn(r);
											return o.distanceTo(e.start)[0] - a.distanceTo(e.start)[0];
										});
										var l = a.Utils.isSegHorizontal(e),
											h = [],
											c = [],
											u = !1,
											p = !1,
											f = !1;
										if (
											(s.forEach(function (e, n) {
												var i = e instanceof o.PushSash,
													a = e instanceof o.Glass,
													s = r.fetchTargetSerial(e),
													d = r.realGlassSize(s);
												if (void 0 !== d) {
													i && 0 !== t[n] && (p = !0), a && 0 !== t[n] && (f = !0);
													var g = l ? d.width : d.height;
													h.push(0 === t[n] ? 0 : g), c.push(0 === t[n] ? g : 0);
												} else u = !0;
											}),
											!(s.length < t.length || u || (p && f)))
										) {
											var d =
													h.reduce(function (e, t) {
														return e + t;
													}) /
													t.reduce(function (e, t) {
														return e + t;
													}),
												g = [];
											if (
												(t.forEach(function (e, t) {
													0 === e ? g.push(c[t]) : g.push(d * e);
												}),
												!s.every(function (e, t) {
													var n = r.realGlassSize(r.fetchTargetSerial(e)),
														o = l ? n.width : n.height;
													return i.default.Utils.EQ_0(o - g[t]);
												}))
											) {
												var y = 0,
													m = [];
												return (
													s.forEach(function (e, t) {
														if (t !== s.length - 1) {
															var n = r.realGlassSize(r.fetchTargetSerial(e)),
																i = l ? n.width : n.height,
																o = g[t] - i + y;
															m.push(o), (y = o);
														}
													}),
													m
												);
											}
										}
									}),
									(e.prototype.fetchTargetSerial = function (e) {
										if (e instanceof o.Area) return e.serial.text;
										if (e instanceof o.Sash) {
											var t = e.mulManager.glasses.find(function (e) {
												return e.serial.text;
											});
											return t ? t.serial.text : '';
										}
										return e.serial;
									}),
									e
								);
							})();
						t.EqualSplitGlassOptimizer = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__values) ||
							function (e) {
								var t = 'function' == typeof Symbol && Symbol.iterator,
									n = t && e[t],
									r = 0;
								if (n) return n.call(e);
								if (e && 'number' == typeof e.length)
									return {
										next: function () {
											return (
												e && r >= e.length && (e = void 0),
												{
													value: e && e[r++],
													done: !e,
												}
											);
										},
									};
								throw new TypeError(
									t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
								);
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerUtils = void 0);
						var i = n(2),
							o = (function () {
								function e(e, t) {
									(this.shapeManager = e), (this.view = t);
								}
								return (
									(e.prototype.changeShadeCount = function (e, t, n) {
										var r = new i.PolyId().deserialize(t),
											o = this.getHostFrame(e);
										if (o) {
											var a = o.mulManager.fillerManager.fillers.find(function (e) {
												return e.polygon.polyId.equalTo(r);
											});
											if (a) {
												var s = o.mulManager.fillerManager.changeShadeFillerCount(a.polygon, n);
												s &&
													(s.updatePoly(),
													s.draw(this.view),
													this.view.refresh(),
													this.view.mometoManager.checkPoint());
											}
										}
									}),
									(e.prototype.getHostFrame = function (e) {
										var t,
											n,
											i,
											o,
											a = this.shapeManager.shapem.find(function (t) {
												return t.id === e;
											});
										if (a) return a;
										try {
											for (
												var s = r(this.shapeManager.shapem), l = s.next();
												!l.done;
												l = s.next()
											) {
												var h = l.value;
												try {
													for (
														var c = ((i = void 0), r(h.sashManager.allSashes)), u = c.next();
														!u.done;
														u = c.next()
													) {
														var p = u.value;
														if (p.id === e) return p;
													}
												} catch (e) {
													i = {
														error: e,
													};
												} finally {
													try {
														u && !u.done && (o = c.return) && o.call(c);
													} finally {
														if (i) throw i.error;
													}
												}
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												l && !l.done && (n = s.return) && n.call(s);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									e
								);
							})();
						t.FillerUtils = o;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShadeUtil = t.BarWidthUtils = void 0);
						var a = o(n(0)),
							s = n(59),
							l = n(7),
							h = n(81),
							c = n(2),
							u = n(1),
							p = (function () {
								function e(e, t) {
									(this.shapeManager = e), (this.view = t);
								}
								return (
									(e.prototype.setFrameBarWidth = function (e, t, n) {
										if (!(n <= 0)) {
											var r = this.shapeManager.shapem[e];
											r && r.frameManager.setEdgeWidth(t, n, this.view);
										}
									}),
									(e.prototype.setMullionWidth = function (e, t, n) {
										if (!(n <= 0)) {
											var r = this.shapeManager.shapem[e];
											r && r.mulManager.setEdgeWidth(t, n, this.view);
										}
									}),
									(e.prototype.setSashBarWidth = function (e, t, n, r) {
										if (!(r <= 0)) {
											var i = this.shapeManager.shapem[e];
											if (i) {
												var o = i.sashManager.sashes[t];
												o && o.frameManager.setEdgeWidth(n, r, this.view, !0);
											}
										}
									}),
									(e.prototype.setSashMullionWidth = function (e, t, n, r) {
										if (!(r <= 0)) {
											var i = this.shapeManager.shapem[e];
											if (i) {
												var o = i.sashManager.sashes[t];
												o && o.mulManager.setEdgeWidth(n, r, this.view);
											}
										}
									}),
									(e.prototype.setDoubleSashBarWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.doubleSashes[t];
												if (a) {
													var s = a.sashes[n];
													s && s.frameManager.setEdgeWidth(r, i, this.view, !0);
												}
											}
										}
									}),
									(e.prototype.setDoubleSashMullionWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.doubleSashes[t];
												if (a) {
													var s = a.sashes[n];
													s && s.mulManager.setEdgeWidth(r, i, this.view);
												}
											}
										}
									}),
									(e.prototype.setKfcSashBarWidth = function (e, t, n, r) {
										if (!(r <= 0)) {
											var i = this.shapeManager.shapem[e];
											if (i) {
												var o = i.sashManager.kfcSashes[t];
												o && o.frameManager.setEdgeWidth(n, r, this.view, !0);
											}
										}
									}),
									(e.prototype.setKfcSashMullionWidth = function (e, t, n, r) {
										if (!(r <= 0)) {
											var i = this.shapeManager.shapem[e];
											if (i) {
												var o = i.sashManager.kfcSashes[t];
												o && o.mulManager.setEdgeWidth(n, r, this.view);
											}
										}
									}),
									(e.prototype.setDoubleKfcSashBarWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.doubleKfcSashes[t];
												if (a) {
													var s = a.sashes[n];
													s && s.frameManager.setEdgeWidth(r, i, this.view, !0);
												}
											}
										}
									}),
									(e.prototype.setDoubleKfcSashMullionWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.doubleKfcSashes[t];
												if (a) {
													var s = a.sashes[n];
													s && s.mulManager.setEdgeWidth(r, i, this.view);
												}
											}
										}
									}),
									(e.prototype.setShadePushSashBarWidth = function (e, t, n, r) {
										if (!(r <= 0)) {
											var i = this.shapeManager.shapem[e];
											if (i) {
												var o = i.sashManager.shadePushSashes[t];
												o && o.frameManager.setEdgeWidth(n, r, this.view, !0);
											}
										}
									}),
									(e.prototype.setShadePushSashMullionWidth = function (e, t, n, r) {
										if (!(r <= 0)) {
											var i = this.shapeManager.shapem[e];
											if (i) {
												var o = i.sashManager.shadePushSashes[t];
												o && o.mulManager.setEdgeWidth(n, r, this.view);
											}
										}
									}),
									(e.prototype.setDoubleShadePushSashBarWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.doubleShadePushSashes[t];
												if (a) {
													var s = a.sashes[n];
													s && s.frameManager.setEdgeWidth(r, i, this.view, !0);
												}
											}
										}
									}),
									(e.prototype.setDoubleShadePushSashMullionWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.doubleShadePushSashes[t];
												if (a) {
													var s = a.sashes[n];
													s && s.mulManager.setEdgeWidth(r, i, this.view);
												}
											}
										}
									}),
									(e.prototype.setSlideBarWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.slides[t];
												if (a) {
													var s = a.sashes[n];
													s && s.frameManager.setEdgeWidth(r, i, this.view, !0);
												}
											}
										}
									}),
									(e.prototype.setSlideMullionWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.slides[t];
												if (a) {
													var s = a.sashes[n];
													s && s.mulManager.setEdgeWidth(r, i, this.view);
												}
											}
										}
									}),
									(e.prototype.setFoldSashBarWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.folds[t];
												if (a) {
													var s = a.sashes[n];
													s && s.frameManager.setEdgeWidth(r, i, this.view, !0);
												}
											}
										}
									}),
									(e.prototype.setFoldSashMullionWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.folds[t];
												if (a) {
													var s = a.sashes[n];
													s && s.mulManager.setEdgeWidth(r, i, this.view);
												}
											}
										}
									}),
									(e.prototype.setFoldShadeBarWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.foldShades[t];
												if (a) {
													var s = a.sashes[n];
													s && s.frameManager.setEdgeWidth(r, i, this.view, !0);
												}
											}
										}
									}),
									(e.prototype.setFoldShadeMullionWidth = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.foldShades[t];
												if (a) {
													var s = a.sashes[n];
													s && s.mulManager.setEdgeWidth(r, i, this.view);
												}
											}
										}
									}),
									(e.prototype.setShadePushSashCount = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.shadePushSashes[t];
												if (a) {
													var s = a.mulManager.fillerManager.fillers.find(function (e) {
														return e.polygon.polyId.equalTo(
															new c.PolyId().deserialize({
																idx: n,
																pos: r,
															}),
														);
													});
													if (s) {
														var l = a.mulManager.fillerManager.changeShadeFillerCount(s.polygon, i);
														l && (l.updatePoly(), l.draw(this.view), this.view.refresh());
													}
												}
											}
										}
									}),
									(e.prototype.setDoubleShadePushSashCount = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.doubleShadePushSashes[t];
												if (a) {
													var s = a.sashes[n];
													if (s) {
														var l = s.mulManager.fillerManager.fillers.find(function (e) {
															return e.polygon.polyId.equalTo(
																new c.PolyId().deserialize({
																	idx: r,
																	pos: -1,
																}),
															);
														});
														if (l) {
															var h = s.mulManager.fillerManager.changeShadeFillerCount(
																l.polygon,
																i,
															);
															h && (h.updatePoly(), h.draw(this.view), this.view.refresh());
														}
													}
												}
											}
										}
									}),
									(e.prototype.setFoldShadeCount = function (e, t, n, r, i) {
										if (!(i <= 0)) {
											var o = this.shapeManager.shapem[e];
											if (o) {
												var a = o.sashManager.foldShades[t];
												if (a) {
													var s = a.sashes[n];
													if (s) {
														var l = s.mulManager.fillerManager.fillers.find(function (e) {
															return e.polygon.polyId.equalTo(
																new c.PolyId().deserialize({
																	idx: r,
																	pos: -1,
																}),
															);
														});
														if (l) {
															var h = s.mulManager.fillerManager.changeShadeFillerCount(
																l.polygon,
																i,
															);
															h && (h.updatePoly(), h.draw(this.view), this.view.refresh());
														}
													}
												}
											}
										}
									}),
									e
								);
							})();
						t.BarWidthUtils = p;
						var f = (function () {
							function e(e, t) {
								(this.shapeManager = e), (this.view = t), (this.barWidthUtils = new p(e, t));
							}
							return (
								(e.prototype.findUpAndDownEdgeIdx = function (e) {
									var t = [];
									if (
										(e.edges.forEach(function (e, n) {
											return t.push([e, n]);
										}),
										0 === t.length)
									)
										throw new Error('no edge');
									return (
										t.sort(function (e, t) {
											return e[0].middle().y - t[0].middle().y;
										}),
										[t[0][1], t[t.length - 1][1]]
									);
								}),
								(e.prototype.getMullionLine = function (e, t) {
									if (!e.polygon.isRectangle()) throw new Error('shadePush not rectangle');
									var n = e.innerPoly[0],
										r = n.box.center,
										i = n.box.ymax,
										o = n.box.ymin,
										s = [],
										l = e.topFrame.polygon.box.ymax;
									return (
										t.forEach(function (e) {
											var t = l - e;
											if (t < o || t > i) throw new Error('mullion_position out of range');
											s.push(a.default.line(a.default.point(r.x, t), a.default.vector(0, -1)));
										}),
										s
									);
								}),
								(e.prototype.getSortedShadeFillers = function (e) {
									var t = [];
									e.forEach(function (e) {
										t.push([e.polygon, e.polygon.polyId]);
									}),
										t.sort(function (e, t) {
											return e[0].box.center.y - t[0].box.center.y;
										});
									var n = [];
									return (
										t.forEach(function (e) {
											return n.push(e[1]);
										}),
										n
									);
								}),
								(e.prototype.setBarWidth = function (e, t, n, i, o) {
									var a = r(this.findUpAndDownEdgeIdx(e.polygon), 2),
										s = a[0],
										l = a[1];
									this.barWidthUtils.setShadePushSashBarWidth(t, n, s, i),
										this.barWidthUtils.setShadePushSashBarWidth(t, n, l, o),
										e.mulManager.fillerManager.clear(),
										e.mulManager.splitter.lines.splice(0),
										e.updatePoly();
								}),
								(e.prototype.adjustMullion = function (e, t) {
									this.getMullionLine(e, t).forEach(function (t) {
										e.mulManager.addMullion(t), e.updatePoly(), e.mulManager.toJSON();
									});
								}),
								(e.prototype.setSashCount = function (e, t, n, r) {
									var i = this,
										o = this.getSortedShadeFillers(
											e.mulManager.fillerManager.fillers.filter(function (e) {
												return e.type === s.ShapeType.Shade;
											}),
										);
									t.forEach(function (e, t) {
										e <= 0 || i.barWidthUtils.setShadePushSashCount(n, r, o[t].idx, o[t].pos, e);
									});
								}),
								(e.prototype.clearAllShapes = function () {
									this.shapeManager.notes.forEach(function (e) {
										e.remove();
									}),
										this.shapeManager.notes.splice(0, this.shapeManager.notes.length),
										this.shapeManager.shapem.forEach(function (e) {
											e.extraDimManager.extraDims.forEach(function (e) {
												return e.remove();
											});
										});
								}),
								(e.prototype.addNote = function (e, t) {
									var n = new u.Note(e, t, t);
									n.updatePoly(), n.draw(this.view), this.shapeManager.notes.push(n);
								}),
								(e.prototype.addEdgeWidthNotes = function (e) {
									var t = this;
									e.polygon.edges.forEach(function (n, r) {
										var i = h.EdgeFinder.Instance.findDirection(e.polygon, r);
										(h.Direction.Up !== i && h.Direction.Down !== i) ||
											t.addNote(
												e.frameManager.edgeWidth[r].toString(),
												e.frameManager.bars[r].polygon.box.center,
											);
									});
								}),
								(e.prototype.addExtraDims = function (e) {
									var t = h.EdgeFinder.Instance.find(
										h.Direction.Up,
										e.topFrame.polygon.edges,
										e.topFrame.polygon.orientation,
									);
									if (t instanceof a.default.Segment) {
										var n = h.EdgeFinder.Instance.findIndex(
												h.Direction.Left,
												e.polygon,
												e.polygon.edges,
											),
											r = [];
										if (
											(e.mulManager.dockMgr.forDoTask(function (e, t) {
												return -1 === e.pos && e.idx === n
													? (r.push.apply(r, i(t)), c.DockTaskStatus.Return)
													: c.DockTaskStatus.Continue;
											}),
											0 !== r.length)
										) {
											var o = r
												.sort(function (e, t) {
													return t.pt.y - e.pt.y;
												})
												.map(function (e) {
													return e.pt;
												});
											if (0 !== r.length) {
												var s = o[0].projectionOn(a.default.line(t.start, t.end)),
													p = 2 * l.DrawParams.Ins.dimFontH;
												o.forEach(function (t, n) {
													var r = a.default.vector(p * n, 0),
														i = new u.ExtraDimArbitrary(s.translate(r), t.translate(r), e.topFrame);
													i.createFrameRelation(), e.topFrame.addExtraDim(i);
												});
											}
										}
									}
								}),
								(e.prototype.recoverHandleShape = function (e, t) {
									var n = this;
									e.mulManager.shades.forEach(function (r) {
										r.handleType !== t &&
											((r.handleType = t), r.updatePoly(), r.draw(n.view), e.mulManager.toJSON());
									});
								}),
								(e.prototype.adjustAllShades = function (e) {
									var t = this;
									if (e.shade_count.length !== e.mullion_position.length + 1)
										throw new Error('shade_count wrong');
									this.clearAllShapes(),
										this.shapeManager.shapem.forEach(function (n, r) {
											n.sashManager.shadePushSashes.forEach(function (n, i) {
												var o = n.mulManager.shades.slice().pop(),
													a = o ? o.handleType : u.ShadeHandleType.None;
												t.setBarWidth(n, r, i, e.up_track_width, e.down_track_width),
													t.adjustMullion(n, e.mullion_position),
													t.setSashCount(n, e.shade_count, r, i),
													t.addEdgeWidthNotes(n),
													t.addExtraDims(n),
													t.recoverHandleShape(n, a);
											}),
												n.draw(t.view);
										}),
										this.view.refresh();
								}),
								e
							);
						})();
						t.ShadeUtil = f;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DrawingSummary = void 0);
						var o = n(1),
							a = (function () {
								function e(e) {
									this.shapeManager = e;
								}
								return (
									Object.defineProperty(e.prototype, 'framesCount', {
										get: function () {
											return this.frames.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'glassSashesCount', {
										get: function () {
											return this.sashes.filter(function (e) {
												return e.type === o.ShapeType.Sash;
											}).length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'screenSashesCount', {
										get: function () {
											return this.sashes.filter(function (e) {
												return e.type === o.ShapeType.Screen;
											}).length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'theftsCount', {
										get: function () {
											return this.frames
												.map(function (e) {
													return e.sashManager.thefts;
												})
												.flat().length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'fixedGlassesCount', {
										get: function () {
											return this.frames
												.map(function (e) {
													return e.mulManager.fillerManager.fillers.filter(function (e) {
														return e instanceof o.Glass;
													});
												})
												.flat().length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'connectorsCount', {
										get: function () {
											return this.couples.filter(function (e) {
												return e instanceof o.Connector;
											}).length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'cornerJoinersCount', {
										get: function () {
											return this.couples.filter(function (e) {
												return e instanceof o.CornerJoiner;
											}).length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'all', {
										get: function () {
											return [
												{
													name: '外框数量',
													value: this.framesCount,
												},
												{
													name: '玻扇数量',
													value: this.glassSashesCount,
												},
												{
													name: '纱扇数量',
													value: this.screenSashesCount,
												},
												{
													name: '防盗框数量',
													value: this.theftsCount,
												},
												{
													name: '固玻数量',
													value: this.fixedGlassesCount,
												},
												{
													name: '连接件数量',
													value: this.connectorsCount,
												},
												{
													name: '转角数量',
													value: this.cornerJoinersCount,
												},
											];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'frames', {
										get: function () {
											return this.shapeManager.shapem;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'couples', {
										get: function () {
											return this.shapeManager.couples;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sashes', {
										get: function () {
											return this.frames
												.map(function (e) {
													return i(
														e.sashManager.sashes,
														e.sashManager.doubleSashes
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
														e.sashManager.slides
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
														e.sashManager.folds
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
													);
												})
												.flat();
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.DrawingSummary = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrameCCBar = void 0);
						var a = (function () {
							function e(e) {
								this.frames = e;
							}
							return (
								(e.prototype.addFrameSerial = function (e) {
									var t = this,
										n = new Map();
									e.forEach(function (e) {
										var i, a;
										if (e.frameId) {
											if (void 0 !== n.get(e.frameId))
												return void (e.frameSerial = n.get(e.frameId));
											try {
												for (var s = r(t.frames), l = s.next(); !l.done; l = s.next()) {
													var h = l.value;
													h.id === e.frameId
														? ((e.frameSerial = h.serial.text), n.set(e.frameId, h.serial.text))
														: o(h.sashManager.allSashes, h.sashManager.thefts).forEach(function (
																t,
														  ) {
																t.id === e.frameId &&
																	((e.frameSerial = t.topFrame.serial.text),
																	n.set(e.frameId, t.topFrame.serial.text));
														  });
												}
											} catch (e) {
												i = {
													error: e,
												};
											} finally {
												try {
													l && !l.done && (a = s.return) && a.call(s);
												} finally {
													if (i) throw i.error;
												}
											}
										}
									});
								}),
								e
							);
						})();
						t.FrameCCBar = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrameIdentity = void 0);
						var s = a(n(306)),
							l = a(n(0)),
							h = n(81),
							c = n(2),
							u = (function () {
								function e(e) {
									this.shapeManager = e;
								}
								return (
									(e.prototype.getFrameIdentity = function () {
										var e = this,
											t = this.shapeManager.shapem
												.filter(function (e) {
													return !0;
												})
												.sort(function (e, t) {
													return e.polygon.box.center.x < t.polygon.box.center.x
														? -1
														: e.polygon.box.center.x > t.polygon.box.center.x
														? 1
														: e.polygon.box.center.y <= t.polygon.box.center.y
														? -1
														: 1;
												}),
											n = [];
										if (
											(t.forEach(function (t) {
												var i,
													o,
													a = e.getMullionIdentity(t.polygon, t.mulManager);
												if ('' !== a[0]) {
													var s = e.getPolygonIdentity(t.polygon);
													if ('' !== s.str) {
														var l = e.getSashIdentity(t, s.frameRet, t.sashManager, a[1]),
															h = JSON.parse(l);
														try {
															for (var c = r(h), u = c.next(); !u.done; u = c.next()) {
																var p = u.value;
																if ('' === p.poly) return;
																if ('' === p.mullion[0]) return;
															}
														} catch (e) {
															i = {
																error: e,
															};
														} finally {
															try {
																u && !u.done && (o = c.return) && o.call(c);
															} finally {
																if (i) throw i.error;
															}
														}
														n.push({
															poly: s,
															mul: a[0],
															sash: l,
														});
													}
												}
											}),
											0 !== n.length)
										) {
											var i = JSON.stringify(n);
											return [s.default(i), i, n];
										}
									}),
									(e.prototype.getPolygonIdentity = function (e) {
										var t,
											n,
											i = e.edges;
										try {
											for (var o = r(i), a = o.next(); !a.done; a = o.next())
												if (!(a.value instanceof l.default.Segment))
													return {
														str: '',
														frameRet: [],
													};
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (n = o.return) && n.call(o);
											} finally {
												if (t) throw t.error;
											}
										}
										var s = this.getEdgesFromUpLeft(i),
											h = [],
											c = [];
										return (
											s.forEach(function (e, t) {
												var n = i.findIndex(function (t) {
													return t.equalTo(e);
												});
												c.push({
													oriIdx: n,
													idx: t,
													slope: +e.slope.toFixed(1),
												}),
													h.push(e.slope.toFixed(1));
											}),
											{
												str: JSON.stringify(h),
												frameRet: c,
											}
										);
									}),
									(e.prototype.getSashIdentity = function (e, t, n, i) {
										var o,
											a,
											s,
											c,
											u = this,
											p = n.allSashes,
											f = [];
										try {
											for (var d = r(p), g = d.next(); !g.done; g = d.next()) {
												var y = g.value,
													m = y.polygon.edges.map(function (e) {
														return e.clone();
													});
												m.sort(function (e, t) {
													return e.middle().x < t.middle().x
														? -1
														: e.middle().x > t.middle().x
														? 1
														: e.middle().y <= t.middle().y
														? -1
														: 1;
												});
												var v = [],
													w = function (n) {
														if (!(n instanceof l.default.Segment))
															return {
																value: '',
															};
														var r = h.EdgeFinder.Instance.findConnectedEdge(n, e.frameManager.bars);
														if (r.bar) {
															var o = t.find(function (e) {
																return e.oriIdx === r.bar.polyId.idx;
															});
															if (!o)
																return {
																	value: '',
																};
															v.push({
																idx: o.idx,
															});
														} else {
															if (
																!(r = h.EdgeFinder.Instance.findConnectedEdge(n, e.mulManager.bars))
															)
																return {
																	value: '',
																};
															var a = i.find(function (e) {
																return e.oriPolyId.idx === r.bar.polyId.idx;
															});
															if (!a)
																return {
																	value: '',
																};
															v.push({
																idx: a.idx,
															});
														}
													};
												try {
													for (var b = ((s = void 0), r(m)), S = b.next(); !S.done; S = b.next()) {
														var _ = w(S.value);
														if ('object' == typeof _) return _.value;
													}
												} catch (e) {
													s = {
														error: e,
													};
												} finally {
													try {
														S && !S.done && (c = b.return) && c.call(b);
													} finally {
														if (s) throw s.error;
													}
												}
												f.push({
													pos: JSON.stringify(v),
													detail: v,
													sash: y,
												});
											}
										} catch (e) {
											o = {
												error: e,
											};
										} finally {
											try {
												g && !g.done && (a = d.return) && a.call(d);
											} finally {
												if (o) throw o.error;
											}
										}
										f.sort(function (e, t) {
											return e.pos < t.pos ? -1 : 1;
										});
										var P = [];
										return (
											f.forEach(function (e) {
												var t = e.sash;
												P.push({
													pos: e.pos,
													type: t.type,
													poly: u.getPolygonIdentity(t.polygon),
													mullion: u.getMullionIdentity(t.polygon, t.mulManager)[0],
												});
											}),
											JSON.stringify(P)
										);
									}),
									(e.prototype.getMullionIdentity = function (e, t) {
										var n,
											i,
											o,
											a,
											s = t.dockMgr.dockData,
											h = t.splitter.lines,
											u = e.edges;
										try {
											for (var p = r(h), f = p.next(); !f.done; f = p.next())
												if (!((S = f.value).line instanceof l.default.Line)) return ['', []];
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												f && !f.done && (i = p.return) && i.call(p);
											} finally {
												if (n) throw n.error;
											}
										}
										var d = new Map();
										if (
											(s.forEach(function (e, t) {
												d.set(t, JSON.parse(JSON.stringify(e)));
											}),
											0 === d.size)
										)
											return ['', []];
										d.forEach(function (e, t) {
											var n,
												r = JSON.parse(t);
											(n =
												-1 === r.pos
													? l.default.line(u[r.idx].start, u[r.idx].end)
													: h[r.idx].line),
												e.forEach(function (e) {
													e.pt = l.default.point(e.pt.x, e.pt.y).projectionOn(n);
												});
										});
										var g = t.bars,
											y = [];
										try {
											for (var m = r(g), v = m.next(); !v.done; v = m.next()) {
												var w = v.value,
													b = w.polyId,
													S = w.polygon.spLine.line,
													_ = this.findEdge(b, d, S);
												if (!_) return ['', []];
												y.push({
													line: S,
													seg: _.seg,
													points: _.points,
													polyId: b,
												});
											}
										} catch (e) {
											o = {
												error: e,
											};
										} finally {
											try {
												v && !v.done && (a = m.return) && a.call(m);
											} finally {
												if (o) throw o.error;
											}
										}
										var P = new Map();
										u.forEach(function (e, t) {
											P.set(t, new c.PolyId(t, -1));
										});
										var x = this.getIdentityHelper(-1, e, e.clone(), y, P),
											D = x.map(function (e) {
												return {
													st: e.st,
													et: e.et,
													slope: e.slope.toFixed(1),
												};
											});
										return [JSON.stringify(D), x];
									}),
									(e.prototype.getIdentityHelper = function (e, t, n, r, i, a) {
										void 0 === a && (a = []);
										var s = [];
										e++;
										var h = this.findFirstSpLine(e, t, r, i);
										if (!h) return [];
										s.push(h);
										var c = t.partitionTwo(l.default.line(h.seg.start, h.seg.end)),
											u = this.getEdgeMap(c[0], n, o(s, a)),
											p = this.getEdgeMap(c[1], n, o(s, a));
										if (!u || !p) return [];
										var f = this.getIdentityHelper(e, c[0], n, r, u, o(s, a));
										s.push.apply(s, o(f));
										var d = this.getIdentityHelper(e, c[1], n, r, p, o(s, a));
										return s.push.apply(s, o(d)), s;
									}),
									(e.prototype.findEdge = function (e, t, n) {
										var r = [];
										if (
											(t.forEach(function (t, n) {
												t.forEach(function (t) {
													var i = t.idx;
													if (i.idx === e.idx && i.pos === e.pos) {
														var o = JSON.parse(n);
														r.push({
															pt: l.default.point(t.pt.x, t.pt.y),
															polyId: new c.PolyId(o.idx, o.pos),
														});
													}
												});
											}),
											2 === r.length)
										) {
											var i = Array.from(r);
											return {
												seg:
													l.default.vector(i[0].pt, i[1].pt).cross(n.norm) > 0
														? l.default.segment(i[0].pt, i[1].pt)
														: l.default.segment(i[1].pt, i[0].pt),
												points: r,
											};
										}
									}),
									(e.prototype.findFirstSpLine = function (e, t, n, r) {
										for (
											var i = t.edges,
												o = t.edges.length,
												a = n.filter(function (e) {
													return (
														!(
															!i.some(function (t) {
																return e.seg.start.on(t);
															}) ||
															!i.some(function (t) {
																return e.seg.end.on(t);
															})
														) &&
														!i.find(function (t) {
															return c.Utils.segCoincide(t, e.seg);
														})
													);
												}),
												s = function (t) {
													var n = i[t],
														o = a.filter(function (e) {
															return !!e.points.find(function (e) {
																return e.pt.on(n);
															});
														});
													if (0 === o.length) return 'continue';
													o.sort(function (e, t) {
														var r = e.seg.start.on(n) ? e.seg.start : e.seg.end,
															i = t.seg.start.on(n) ? t.seg.start : t.seg.end;
														return n.start.distanceTo(r)[0] - n.start.distanceTo(i)[0];
													});
													var s = o[0],
														l = s.seg.start.on(n) ? s.seg.end : s.seg.start,
														h = i.findIndex(function (e) {
															return l.on(e);
														}),
														u = new p();
													return (
														(u.idx = e),
														(u.st = r.get(t)),
														(u.et = r.get(h)),
														(u.slope = +c.Utils.cliffSlope(s.seg.slope).toFixed(1)),
														(u.seg = s.seg.clone()),
														(u.oriSlope = +s.seg.slope.toFixed(1)),
														(u.oriPolyId = s.polyId),
														{
															value: u,
														}
													);
												},
												l = 0;
											l < o;
											l++
										) {
											var h = s(l);
											if ('object' == typeof h) return h.value;
										}
									}),
									(e.prototype.getEdgeMap = function (e, t, n) {
										for (
											var r = e.edges,
												i = t.edges,
												o = new Map(),
												a = function (e) {
													var t = r[e];
													if (!(t instanceof l.default.Segment))
														return {
															value: void 0,
														};
													var a = void 0;
													if (
														(a = i.find(function (e) {
															return e instanceof l.default.Segment && c.Utils.segCoincide(t, e);
														}))
													)
														o.set(e, new c.PolyId(e, -1));
													else {
														if (
															!(a = n.find(function (e) {
																return c.Utils.segCoincide(t, e.seg);
															}))
														)
															return {
																value: void 0,
															};
														o.set(e, new c.PolyId(a.idx, 0));
													}
												},
												s = 0;
											s < r.length;
											s++
										) {
											var h = a(s);
											if ('object' == typeof h) return h.value;
										}
										return o;
									}),
									(e.prototype.getDimInfoMatch = function (e, t, n, i) {
										var o,
											a,
											s,
											h,
											u = e.edges,
											p = n.edges;
										try {
											for (var f = r(u), d = f.next(); !d.done; d = f.next())
												if (!(d.value instanceof l.default.Segment)) return;
										} catch (e) {
											o = {
												error: e,
											};
										} finally {
											try {
												d && !d.done && (a = f.return) && a.call(f);
											} finally {
												if (o) throw o.error;
											}
										}
										try {
											for (var g = r(p), y = g.next(); !y.done; y = g.next())
												if (!(y.value instanceof l.default.Segment)) return;
										} catch (e) {
											s = {
												error: e,
											};
										} finally {
											try {
												y && !y.done && (h = g.return) && h.call(g);
											} finally {
												if (s) throw s.error;
											}
										}
										if (e.orientation === n.orientation) {
											var m = this.getEdgesFromUpLeft(u),
												v = this.getEdgesFromUpLeft(p);
											if (m.length === v.length) {
												for (var w = 0; w < m.length; w++) {
													var b = m[w],
														S = v[w];
													if (!c.Utils.isZero(b.slope - S.slope)) return;
												}
												var _ = m[0],
													P = m.findIndex(function (e) {
														return e.start.equalTo(_.start) && e.end.equalTo(_.end);
													}),
													x = v[0],
													D = v.findIndex(function (e) {
														return e.start.equalTo(x.start) && e.end.equalTo(x.end);
													}),
													T = this.getFrameNameMap(P, t, D, i);
												if (T) {
													var O = this.getMullionNameMap(P, t, D, i);
													if (O)
														return {
															frame: T,
															mullion: O,
														};
												}
											}
										}
									}),
									(e.prototype.getFrameNameMap = function (e, t, n, r) {
										var i = t
												.filter(function (e) {
													return e.frameDim;
												})
												.sort(function (e, t) {
													return e.edgeIdx - t.edgeIdx;
												}),
											a = i.findIndex(function (t) {
												return t.edgeIdx === e;
											}),
											s = o(i.slice(a), i.slice(0, a)),
											l = r
												.filter(function (e) {
													return e.frameDim;
												})
												.sort(function (e, t) {
													return e.edgeIdx - t.edgeIdx;
												}),
											h = l.findIndex(function (e) {
												return e.edgeIdx === n;
											}),
											c = o(l.slice(h), l.slice(0, h));
										if (s.length === c.length) {
											var u = [];
											return (
												c.forEach(function (e, t) {
													u.push({
														dstName: e.name,
														srcName: s[t].name,
													});
												}),
												u
											);
										}
									}),
									(e.prototype.getMullionNameMap = function (e, t, n, r) {
										var i = t
												.filter(function (e) {
													return !e.frameDim;
												})
												.sort(function (e, t) {
													return e.edgeIdx < t.edgeIdx ||
														(e.edgeIdx === t.edgeIdx && e.mulDimIdx <= t.mulDimIdx)
														? -1
														: 1;
												}),
											a = i.findIndex(function (t) {
												return t.edgeIdx === e;
											}),
											s = o(i.slice(a), i.slice(0, a)),
											l = r
												.filter(function (e) {
													return !e.frameDim;
												})
												.sort(function (e, t) {
													return e.edgeIdx < t.edgeIdx ||
														(e.edgeIdx === t.edgeIdx && e.mulDimIdx <= t.mulDimIdx)
														? -1
														: 1;
												}),
											h = l.findIndex(function (e) {
												return e.edgeIdx === n;
											}),
											c = o(l.slice(h), l.slice(0, h));
										if (s.length === c.length) {
											for (var u = [], p = 0; p < c.length; p++) {
												if (s[p].mulDimIdx !== c[p].mulDimIdx) return;
												u.push({
													dstName: c[p].name,
													srcName: s[p].name,
												});
											}
											return u;
										}
									}),
									(e.prototype.getEdgesFromUpLeft = function (e) {
										var t = e
												.filter(function (e) {
													return !0;
												})
												.sort(function (e, t) {
													return e.middle().x < t.middle().x
														? -1
														: e.middle().x > t.middle().x
														? 1
														: e.middle().y <= t.middle().y
														? -1
														: 1;
												})[0],
											n = e.findIndex(function (e) {
												return e.start.equalTo(t.start) && e.end.equalTo(t.end);
											});
										return o(e.slice(n), e.slice(0, n));
									}),
									e
								);
							})();
						t.FrameIdentity = u;
						var p = function () {};
					},
					function (e, t, n) {
						var r;
						!(function (i) {
							'use strict';
							function o(e, t) {
								var n = (65535 & e) + (65535 & t);
								return (((e >> 16) + (t >> 16) + (n >> 16)) << 16) | (65535 & n);
							}
							function a(e, t, n, r, i, a) {
								return o(((s = o(o(t, e), o(r, a))) << (l = i)) | (s >>> (32 - l)), n);
								var s, l;
							}
							function s(e, t, n, r, i, o, s) {
								return a((t & n) | (~t & r), e, t, i, o, s);
							}
							function l(e, t, n, r, i, o, s) {
								return a((t & r) | (n & ~r), e, t, i, o, s);
							}
							function h(e, t, n, r, i, o, s) {
								return a(t ^ n ^ r, e, t, i, o, s);
							}
							function c(e, t, n, r, i, o, s) {
								return a(n ^ (t | ~r), e, t, i, o, s);
							}
							function u(e, t) {
								var n, r, i, a, u;
								(e[t >> 5] |= 128 << t % 32), (e[14 + (((t + 64) >>> 9) << 4)] = t);
								var p = 1732584193,
									f = -271733879,
									d = -1732584194,
									g = 271733878;
								for (n = 0; n < e.length; n += 16)
									(r = p),
										(i = f),
										(a = d),
										(u = g),
										(p = s(p, f, d, g, e[n], 7, -680876936)),
										(g = s(g, p, f, d, e[n + 1], 12, -389564586)),
										(d = s(d, g, p, f, e[n + 2], 17, 606105819)),
										(f = s(f, d, g, p, e[n + 3], 22, -1044525330)),
										(p = s(p, f, d, g, e[n + 4], 7, -176418897)),
										(g = s(g, p, f, d, e[n + 5], 12, 1200080426)),
										(d = s(d, g, p, f, e[n + 6], 17, -1473231341)),
										(f = s(f, d, g, p, e[n + 7], 22, -45705983)),
										(p = s(p, f, d, g, e[n + 8], 7, 1770035416)),
										(g = s(g, p, f, d, e[n + 9], 12, -1958414417)),
										(d = s(d, g, p, f, e[n + 10], 17, -42063)),
										(f = s(f, d, g, p, e[n + 11], 22, -1990404162)),
										(p = s(p, f, d, g, e[n + 12], 7, 1804603682)),
										(g = s(g, p, f, d, e[n + 13], 12, -40341101)),
										(d = s(d, g, p, f, e[n + 14], 17, -1502002290)),
										(p = l(
											p,
											(f = s(f, d, g, p, e[n + 15], 22, 1236535329)),
											d,
											g,
											e[n + 1],
											5,
											-165796510,
										)),
										(g = l(g, p, f, d, e[n + 6], 9, -1069501632)),
										(d = l(d, g, p, f, e[n + 11], 14, 643717713)),
										(f = l(f, d, g, p, e[n], 20, -373897302)),
										(p = l(p, f, d, g, e[n + 5], 5, -701558691)),
										(g = l(g, p, f, d, e[n + 10], 9, 38016083)),
										(d = l(d, g, p, f, e[n + 15], 14, -660478335)),
										(f = l(f, d, g, p, e[n + 4], 20, -405537848)),
										(p = l(p, f, d, g, e[n + 9], 5, 568446438)),
										(g = l(g, p, f, d, e[n + 14], 9, -1019803690)),
										(d = l(d, g, p, f, e[n + 3], 14, -187363961)),
										(f = l(f, d, g, p, e[n + 8], 20, 1163531501)),
										(p = l(p, f, d, g, e[n + 13], 5, -1444681467)),
										(g = l(g, p, f, d, e[n + 2], 9, -51403784)),
										(d = l(d, g, p, f, e[n + 7], 14, 1735328473)),
										(p = h(
											p,
											(f = l(f, d, g, p, e[n + 12], 20, -1926607734)),
											d,
											g,
											e[n + 5],
											4,
											-378558,
										)),
										(g = h(g, p, f, d, e[n + 8], 11, -2022574463)),
										(d = h(d, g, p, f, e[n + 11], 16, 1839030562)),
										(f = h(f, d, g, p, e[n + 14], 23, -35309556)),
										(p = h(p, f, d, g, e[n + 1], 4, -1530992060)),
										(g = h(g, p, f, d, e[n + 4], 11, 1272893353)),
										(d = h(d, g, p, f, e[n + 7], 16, -155497632)),
										(f = h(f, d, g, p, e[n + 10], 23, -1094730640)),
										(p = h(p, f, d, g, e[n + 13], 4, 681279174)),
										(g = h(g, p, f, d, e[n], 11, -358537222)),
										(d = h(d, g, p, f, e[n + 3], 16, -722521979)),
										(f = h(f, d, g, p, e[n + 6], 23, 76029189)),
										(p = h(p, f, d, g, e[n + 9], 4, -640364487)),
										(g = h(g, p, f, d, e[n + 12], 11, -421815835)),
										(d = h(d, g, p, f, e[n + 15], 16, 530742520)),
										(p = c(
											p,
											(f = h(f, d, g, p, e[n + 2], 23, -995338651)),
											d,
											g,
											e[n],
											6,
											-198630844,
										)),
										(g = c(g, p, f, d, e[n + 7], 10, 1126891415)),
										(d = c(d, g, p, f, e[n + 14], 15, -1416354905)),
										(f = c(f, d, g, p, e[n + 5], 21, -57434055)),
										(p = c(p, f, d, g, e[n + 12], 6, 1700485571)),
										(g = c(g, p, f, d, e[n + 3], 10, -1894986606)),
										(d = c(d, g, p, f, e[n + 10], 15, -1051523)),
										(f = c(f, d, g, p, e[n + 1], 21, -2054922799)),
										(p = c(p, f, d, g, e[n + 8], 6, 1873313359)),
										(g = c(g, p, f, d, e[n + 15], 10, -30611744)),
										(d = c(d, g, p, f, e[n + 6], 15, -1560198380)),
										(f = c(f, d, g, p, e[n + 13], 21, 1309151649)),
										(p = c(p, f, d, g, e[n + 4], 6, -145523070)),
										(g = c(g, p, f, d, e[n + 11], 10, -1120210379)),
										(d = c(d, g, p, f, e[n + 2], 15, 718787259)),
										(f = c(f, d, g, p, e[n + 9], 21, -343485551)),
										(p = o(p, r)),
										(f = o(f, i)),
										(d = o(d, a)),
										(g = o(g, u));
								return [p, f, d, g];
							}
							function p(e) {
								var t,
									n = '',
									r = 32 * e.length;
								for (t = 0; t < r; t += 8) n += String.fromCharCode((e[t >> 5] >>> t % 32) & 255);
								return n;
							}
							function f(e) {
								var t,
									n = [];
								for (n[(e.length >> 2) - 1] = void 0, t = 0; t < n.length; t += 1) n[t] = 0;
								var r = 8 * e.length;
								for (t = 0; t < r; t += 8) n[t >> 5] |= (255 & e.charCodeAt(t / 8)) << t % 32;
								return n;
							}
							function d(e) {
								var t,
									n,
									r = '';
								for (n = 0; n < e.length; n += 1)
									(t = e.charCodeAt(n)),
										(r +=
											'0123456789abcdef'.charAt((t >>> 4) & 15) +
											'0123456789abcdef'.charAt(15 & t));
								return r;
							}
							function g(e) {
								return unescape(encodeURIComponent(e));
							}
							function y(e) {
								return (function (e) {
									return p(u(f(e), 8 * e.length));
								})(g(e));
							}
							function m(e, t) {
								return (function (e, t) {
									var n,
										r,
										i = f(e),
										o = [],
										a = [];
									for (
										o[15] = a[15] = void 0, i.length > 16 && (i = u(i, 8 * e.length)), n = 0;
										n < 16;
										n += 1
									)
										(o[n] = 909522486 ^ i[n]), (a[n] = 1549556828 ^ i[n]);
									return (r = u(o.concat(f(t)), 512 + 8 * t.length)), p(u(a.concat(r), 640));
								})(g(e), g(t));
							}
							function v(e, t, n) {
								return t ? (n ? m(t, e) : d(m(t, e))) : n ? y(e) : d(y(e));
							}
							void 0 ===
								(r = function () {
									return v;
								}.call(t, n, t, e)) || (e.exports = r);
						})();
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DockParam = void 0);
						var r = (function () {
							function e() {
								(this.st = -1), (this.et = -1);
							}
							return (
								(e.prototype.setParam = function (e, t) {
									e ? (this.st = t) : (this.et = t);
								}),
								Object.defineProperty(e.prototype, 'co_st', {
									get: function () {
										return -1 === this.st ? 0.5 : this.st;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'co_et', {
									get: function () {
										return -1 === this.et ? 0.5 : this.et;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'a', {
									get: function () {
										return -1 === this.st && -1 === this.et
											? -1
											: -1 !== this.st
											? this.st
											: this.et;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'b', {
									get: function () {
										return -1 !== this.st && -1 !== this.et ? this.et : -1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.reverse = function () {
									var e = this.st;
									(this.st = this.et), (this.et = e);
								}),
								e
							);
						})();
						t.DockParam = r;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.LoadKJL = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(13),
							h = n(11),
							c = n(1),
							u = (function () {
								function e(e, t) {
									(this.openModeMap = new Map([
										[0, l.OpenDirection.Custom],
										[2, l.OpenDirection.Left],
										[3, l.OpenDirection.Right],
									])),
										(this.PJGYMap = [
											s.EdgeJointWay.Default,
											s.EdgeJointWay.Vertical,
											s.EdgeJointWay.Horizontal,
										]),
										(this.kjlOpenDirectionMap = new Map([
											[0, l.OpenDirection.Left],
											[1, l.OpenDirection.Right],
											[2, l.OpenDirection.Up],
											[3, l.OpenDirection.Down],
											[5, l.OpenDirection.None],
											[6, l.OpenDirection.Left_With_Up],
											[7, l.OpenDirection.Left_With_Down],
											[8, l.OpenDirection.Right_With_Up],
											[9, l.OpenDirection.Right_With_Down],
										])),
										(this.kjlPushOrPullMap = [l.OpenToward.Inward, l.OpenToward.Outward]),
										(this.kjlOutlineCategoryArr = [2080, 2103, 2104, 2356, 2134, 2151]),
										(this.kjlFrameCategoryArr = [2072, 2107, 2106, 2108, 2109, 2110, 2111]),
										(this.kjlMullionCategoryArr = [2073, 2074]),
										(this.kjlDoublesashArr = [2198]),
										(this.kjlSashCategoryArr = [2112, 2336]),
										(this.kjlScreenCategoryArr = [2113, 2337]),
										(this.kjlSlideCategoryArr = [2132]),
										(this.kjlSlideSashCategoryArr = [2115]),
										(this.kjlSlideScreenCategoryArr = [2116]),
										(this.kjlZhkCategoryArr = [2179, 2094]),
										(this.kjlZjlCategoryArr = [713, 2118]),
										(this.kjlLjjCategoryArr = [2119]),
										(this.kjlGlassCategoryArr = [2079]),
										(this.shapeManager = e),
										(this.view = t);
								}
								return (
									(e.prototype.load = function (e) {
										var t = this,
											n = this.shapeManager.displayTurningLabel,
											r = this.shapeManager.withTurningFrame;
										(this.shapeManager.displayTurningLabel = !0),
											(this.shapeManager.withTurningFrame = !1);
										var o = e.doorWindows,
											s = [],
											h = [],
											u = [];
										return (
											o.forEach(function (e) {
												try {
													var n = [];
													if (
														e.parts.some(function (e) {
															return t.kjlOutlineCategoryArr.includes(e.category);
														})
													) {
														var r,
															o = e.parts.filter(function (e) {
																return t.kjlZjlCategoryArr.includes(e.category);
															});
														0 !== o.length &&
															(r = JSON.parse(
																e.parameters.find(function (e) {
																	return 'wallAngles' === e.name;
																}).value,
															));
														var p = e.parts.filter(function (e) {
																return t.kjlOutlineCategoryArr.includes(e.category);
															}),
															f = [],
															d = a.default.vector();
														p.forEach(function (e) {
															if ((f.push(e), r)) {
																var t = r.find(function (t) {
																	return t.aid === e.id;
																});
																if (t) {
																	var n = t.aid + ',' + t.bid,
																		i = o.find(function (e) {
																			return (
																				e.parameters.find(function (e) {
																					return 'linkModelIds' === e.name;
																				}).value === n
																			);
																		});
																	i && ((i.wallAngle = t.wallAngle), f.push(i));
																}
															}
														}),
															f.forEach(function (e) {
																if (t.kjlOutlineCategoryArr.includes(e.category)) {
																	var r = t.createWindow(e, d);
																	n.push(r.custom), u.push.apply(u, i(r.glassInfos));
																	var o = e.parts.find(function (e) {
																		return t.kjlLjjCategoryArr.includes(e.category);
																	});
																	if (o) {
																		var s = a.default
																				.segment(
																					a.default.point(
																						parseFloat(o.profile2ds[0].p0.x.toFixed(1)),
																						parseFloat(o.profile2ds[0].p0.y.toFixed(1)),
																					),
																					a.default.point(
																						parseFloat(o.profile2ds[0].p1.x.toFixed(1)),
																						parseFloat(o.profile2ds[0].p1.y.toFixed(1)),
																					),
																				)
																				.translate(d.invert()),
																			p = s.tangentInStart().normalize().multiply(o.faceWidth),
																			f = t.shapeManager.addConnector(s.middle());
																		f &&
																			(o.bgCode && (h.push(o.bgCode), (f.attrs.code = o.bgCode)),
																			f.resize(parseFloat(o.faceWidth.toFixed(1))),
																			f.updatePoly(),
																			(d = d.subtract(p)));
																	}
																	l.ShapeActor.emitStructureChanged(t.view);
																} else if (t.kjlZjlCategoryArr.includes(e.category)) {
																	var g = a.default
																			.segment(
																				a.default.point(
																					parseFloat(e.profile2ds[0].p0.x.toFixed(1)),
																					parseFloat(e.profile2ds[0].p0.y.toFixed(1)),
																				),
																				a.default.point(
																					parseFloat(e.profile2ds[0].p1.x.toFixed(1)),
																					parseFloat(e.profile2ds[0].p1.y.toFixed(1)),
																				),
																			)
																			.translate(d.invert()),
																		y = t.shapeManager.addCornerJoiner(g.middle());
																	y &&
																		(e.bgCode && (h.push(e.bgCode), (y.attrs.code = e.bgCode)),
																		y.updateSkewAngle(e.wallAngle, t.view, c.SkewPartEnum.TopView),
																		y.resize(parseFloat(e.faceWidth.toFixed(1))),
																		y.updatePoly(),
																		(d = d.subtract(a.default.vector(-e.faceWidth, 0))));
																}
															});
													} else {
														var g = t.createWindow(e);
														n.push(g.custom),
															u.push.apply(u, i(g.glassInfos)),
															l.ShapeActor.emitStructureChanged(t.view);
													}
													s.push({
														drawingData: t.shapeManager.serialize(),
														img: t.shapeManager.toData(),
														custom: n,
														coupleCodes: Array.from(new Set(h)),
														glassCodes: Array.from(new Set(u)),
														error: '',
													});
												} catch (e) {
													s.push({
														drawingData: '',
														img: '',
														custom: '',
														coupleCodes: [],
														glassCodes: [],
														error: ('' + e).split(/\r?\n/)[0],
													});
												}
												t.shapeManager.clear();
											}),
											(this.shapeManager.withTurningFrame = r),
											(this.shapeManager.displayTurningLabel = n),
											s
										);
									}),
									(e.prototype.createWindow = function (e, t) {
										var n = this;
										void 0 === t && (t = a.default.vector());
										var r = e.doorWindowType,
											o = e.parts,
											l = e.parameters,
											u = l.find(function (e) {
												return 'H' === e.name;
											}).value,
											p = new a.default.Matrix().scale(1, -1).translate(0, -u),
											f = [],
											d = [],
											g = o.filter(function (e) {
												return n.kjlFrameCategoryArr.includes(e.category);
											}),
											y = o.filter(function (e) {
												return n.kjlMullionCategoryArr.includes(e.category);
											}),
											m = o.filter(function (e) {
												return (
													n.kjlSashCategoryArr.includes(e.category) ||
													n.kjlScreenCategoryArr.includes(e.category) ||
													n.kjlDoublesashArr.includes(e.category) ||
													n.kjlSlideCategoryArr.includes(e.category)
												);
											}),
											v = o.filter(function (e) {
												return n.kjlZhkCategoryArr.includes(e.category);
											});
										o.filter(function (e) {
											return n.kjlGlassCategoryArr.includes(e.category);
										}).forEach(function (e) {
											var t = e.parts.find(function (e) {
												return 2070 === e.category;
											});
											t && t.bgCode && d.push(t);
										});
										var w,
											b = g.map(function (e) {
												var n = e.profile2ds[0];
												if ('ARC2' === n.tp) {
													var r = n.circle;
													return {
														edge: a.default
															.arc(
																a.default.point(
																	parseFloat(r.c.x.toFixed(1)),
																	parseFloat(r.c.y.toFixed(1)),
																),
																parseFloat(r.r.toFixed(1)),
																n.s,
																n.e,
															)
															.transform(p)
															.translate(t),
														modelId: e.id,
													};
												}
												return {
													edge: a.default
														.segment(
															a.default.point(
																parseFloat(n.p0.x.toFixed(1)),
																parseFloat(n.p0.y.toFixed(1)),
															),
															a.default.point(
																parseFloat(n.p1.x.toFixed(1)),
																parseFloat(n.p1.y.toFixed(1)),
															),
														)
														.transform(p)
														.translate(t),
													modelId: e.id,
												};
											}),
											S = b.concat(),
											_ = JSON.parse(
												l.find(function (e) {
													return 'produce' === e.name;
												}).value,
											),
											P = _.crafts,
											x = _.profile,
											D = _.customCode,
											T = _.customParam,
											O = [],
											M = [],
											E = P.length,
											I = [],
											C = [];
										if (x.length > E) {
											x.forEach(function (e) {
												var t = a.default.point(
														parseFloat(e.startPoint._x.toFixed(1)),
														parseFloat(e.startPoint._y.toFixed(1)),
													),
													n = a.default.point(
														parseFloat(e.endPoint._x.toFixed(1)),
														parseFloat(e.endPoint._y.toFixed(1)),
													),
													r = a.default.segment(t, n),
													i = a.default.line(t, n).standard,
													o = h.Direction.Down;
												a.default.Utils.EQ_0(i[0]) &&
													(o = a.default.Utils.EQ_0(i[2]) ? h.Direction.Down : h.Direction.Up),
													a.default.Utils.EQ_0(i[1]) &&
														(o = a.default.Utils.EQ_0(i[2]) ? h.Direction.Left : h.Direction.Right),
													e.isVirtual && I.push(o),
													C.push({
														edge: r,
														modelId: e.modelId,
														direction: o,
													});
											});
											var k = [
													h.Direction.Left,
													h.Direction.Down,
													h.Direction.Right,
													h.Direction.Up,
												],
												F = C.sort(function (e, t) {
													return k.indexOf(e.direction) - k.indexOf(t.direction);
												}),
												j = F.length;
											if (
												(F.forEach(function (e, t) {
													var r = s.EdgeJointWay.Default,
														i = P.find(function (t) {
															return t.modelId === e.modelId;
														});
													if (
														(S.splice(
															S.findIndex(function (t) {
																return t.modelId === e.modelId;
															}),
															1,
														),
														i && 0 !== i.startConnectType)
													) {
														var o = F[(t + j - 1) % j];
														if ('' === o.modelId) M.push(r);
														else {
															var l = o.edge,
																h = n.checkHv(i.edge, l);
															if (2 === i.startConnectType) {
																r =
																	'h' === h.fst
																		? s.EdgeJointWay.Vertical
																		: s.EdgeJointWay.Horizontal;
																var c = C.find(function (t) {
																		return t.modelId === e.modelId;
																	}),
																	u = a.default.line(c.edge.start, c.edge.end),
																	p = a.default.line(l.start, l.end);
																c.edge = a.default.segment(u.intersect(p)[0], c.edge.end);
															} else
																1 === i.startConnectType &&
																	(r =
																		'h' === h.fst
																			? s.EdgeJointWay.Horizontal
																			: s.EdgeJointWay.Vertical);
															M.push(r);
														}
													}
													O.push(e.edge);
												}),
												(O = O.map(function (e) {
													return e.transform(p).translate(t);
												})),
												(w = new c.SingleTrackPolygon(a.default.point(), I, O)),
												1 === r && 1 === I.length && I[0] === h.Direction.Down)
											) {
												var A = l.find(function (e) {
														return 'SWDJ' === e.name;
													}).value,
													L = parseInt(
														l.find(function (e) {
															return 'DJGD' === e.name;
														}).value,
														10,
													);
												w instanceof c.SingleTrackPolygon &&
													A &&
													w.pullingHeight.set(h.Direction.Down, L);
											}
										} else
											P.forEach(function (e, t) {
												var r = b.find(function (t) {
													return t.modelId === e.modelId;
												});
												if (void 0 !== r) {
													S.splice(
														S.findIndex(function (t) {
															return t.modelId === e.modelId;
														}),
														1,
													);
													var i = s.EdgeJointWay.Default;
													if (r.edge instanceof a.default.Segment) {
														if (0 !== e.startConnectType) {
															var o = b.find(function (e) {
																	return e.modelId === P[(t + E - 1) % E].modelId;
																}).edge,
																l = n.checkHv(r.edge, o);
															if (2 === e.startConnectType) {
																i =
																	'h' === l.fst
																		? s.EdgeJointWay.Vertical
																		: s.EdgeJointWay.Horizontal;
																var h = a.default.line(r.edge.start, r.edge.end),
																	c = a.default.line(o.start, o.end);
																r.edge = a.default.segment(h.intersect(c)[0], r.edge.end);
															} else
																1 === e.startConnectType &&
																	(i =
																		'h' === l.fst
																			? s.EdgeJointWay.Horizontal
																			: s.EdgeJointWay.Vertical);
														}
														if (2 === e.endConnectType) {
															h = a.default.line(r.edge.start, r.edge.end);
															var u = b.find(function (e) {
																	return e.modelId === P[(t + 1) % E].modelId;
																}).edge,
																p = a.default.line(u.start, u.end);
															r.edge = a.default.segment(r.edge.start, h.intersect(p)[0]);
														}
													}
													O.push(r.edge), M.push(i);
												}
											}),
												(w = new c.WinPolygon(O));
										var H = this.shapeManager.add(w),
											R =
												g[0].parameters.find(function (e) {
													return 'H' === e.name;
												}).value * Math.sqrt(3),
											B = y.map(function (e) {
												var n = e.profile2ds;
												return {
													seg: a.default
														.segment(
															a.default.point(
																parseFloat(n[0].p0.x.toFixed(1)),
																parseFloat(n[0].p0.y.toFixed(1)),
															),
															a.default.point(
																parseFloat(n[0].p1.x.toFixed(1)),
																parseFloat(n[0].p1.y.toFixed(1)),
															),
														)
														.transform(p)
														.translate(t),
													stDock: !1,
													edDock: !1,
												};
											});
										if (0 !== S.length) {
											var W = S.map(function (e) {
												return {
													seg: a.default.segment(e.edge.start, e.edge.end),
													stDock: !1,
													edDock: !1,
												};
											});
											B.push.apply(B, i(W));
										}
										this.sortKjlMullionLines(B, O, R).forEach(function (e) {
											H.addMullion(a.default.line(e.middle(), e.tangentInStart().rotate90CW())),
												H.mulManager.toJSON(),
												H.draw(n.view);
										});
										var z = v.map(function (e) {
												var n = e.profile2ds[0];
												if ('ARC2' === n.tp) {
													var r = n.circle;
													return a.default
														.arc(
															a.default.point(
																parseFloat(r.c.x.toFixed(1)),
																parseFloat(r.c.y.toFixed(1)),
															),
															parseFloat(r.r.toFixed(1)),
															n.s,
															n.e,
														)
														.transform(p)
														.translate(t);
												}
												return a.default
													.segment(
														a.default.point(
															parseFloat(n.p0.x.toFixed(1)),
															parseFloat(n.p0.y.toFixed(1)),
														),
														a.default.point(
															parseFloat(n.p1.x.toFixed(1)),
															parseFloat(n.p1.y.toFixed(1)),
														),
													)
													.transform(p)
													.translate(t);
											}),
											N = new c.WinPolygon(z);
										m.forEach(function (e) {
											var o = e.profile2ds,
												s = e.parameters,
												l = [];
											o.forEach(function (e) {
												var t = a.default.point(e.p0.x, e.p0.y);
												l.push(t);
											});
											var u = new a.default.Polygon(l).box.center.transform(p).translate(t);
											if (n.kjlDoublesashArr.includes(e.category)) {
												if (
													e.parts.some(function (e) {
														return n.kjlSashCategoryArr.includes(e.category);
													})
												) {
													H.addDoubleSash(u);
													var f = e.parts.filter(function (e) {
															return n.kjlSashCategoryArr.includes(e.category);
														}),
														g = H.sashManager.doubleSashes.find(function (e) {
															return e.type === c.ShapeType.DoubleSash && e.polygon.contains(u);
														});
													f.forEach(function (e, t) {
														n.PushSash_set(e.parts, e.parameters, g.sashes[t]);
														var r = e.parts.filter(function (e) {
															return 2070 === e.category;
														});
														d.push.apply(d, i(r));
													}),
														(g.withTurningFrame = !!N.contains(u)),
														g.updatePoly();
												}
												if (
													e.parts.some(function (e) {
														return n.kjlScreenCategoryArr.includes(e.category);
													})
												) {
													H.addDoubleSash(u, c.ShapeType.DoubleScreen);
													var y = e.parts.filter(function (e) {
															return n.kjlScreenCategoryArr.includes(e.category);
														}),
														m = H.sashManager.doubleSashes.find(function (e) {
															return e.type === c.ShapeType.DoubleScreen && e.polygon.contains(u);
														});
													y.forEach(function (e, t) {
														n.PushSash_set(e.parts, e.parameters, m.sashes[t]);
													}),
														m.updatePoly();
												}
												if (
													e.parts.some(function (e) {
														return n.kjlSashCategoryArr.includes(e.category);
													})
												) {
													var v = H.sashManager.doubleSashes.find(function (e) {
														return e.type === c.ShapeType.DoubleSash && e.polygon.contains(u);
													});
													v.isDoor = 1 === r;
													var w = e.parameters.find(function (e) {
														return 'windowPushOrPull' === e.name;
													}).value;
													(v.openToward = n.kjlPushOrPullMap[w]), v.updatePoly();
												}
												if (
													e.parts.some(function (e) {
														return n.kjlScreenCategoryArr.includes(e.category);
													})
												) {
													var b = H.sashManager.doubleSashes.find(function (e) {
														return e.type === c.ShapeType.DoubleScreen && e.polygon.contains(u);
													});
													b.isDoor = 1 === r;
													var S = e.parameters.find(function (e) {
														return 'gauzePushOrPull' === e.name;
													}).value;
													(b.openToward = n.kjlPushOrPullMap[S]), b.updatePoly();
												}
											} else if (n.kjlSashCategoryArr.includes(e.category)) {
												H.addSash(u);
												var _ = N.contains(u),
													P = H.sashManager.sashes.find(function (e) {
														return e.polygon.contains(u);
													});
												n.PushSash_set(e.parts, s, P, _), (P.isDoor = 1 === r);
												var x = e.parts.filter(function (e) {
													return 2070 === e.category;
												});
												d.push.apply(d, i(x));
											} else if (n.kjlScreenCategoryArr.includes(e.category))
												H.addSash(u, c.ShapeType.Screen),
													(P = H.sashManager.sashes.find(function (e) {
														return e.polygon.contains(u);
													})),
													n.PushSash_set(e.parts, s, P),
													(P.isDoor = 1 === r);
											else if (n.kjlSlideCategoryArr.includes(e.category)) {
												var D = e.parameters.find(function (e) {
														return 'gridRegion' === e.name;
													}).value,
													T = parseInt(D.split('-')[0], 10),
													O = parseInt(D.split('-')[1], 10),
													M = e.parts.map(function (e) {
														var t = JSON.parse(
																e.parameters.find(function (e) {
																	return 'cellPosition' === e.name;
																}).value,
															),
															r = c.ShapeType.Glass;
														return (
															n.kjlSlideScreenCategoryArr.includes(e.category) &&
																(r = c.ShapeType.Screen),
															{
																x: t.x,
																y: t.y,
																slideSashType: r,
															}
														);
													}),
													E = n.kjlSlideMapping(T, O, M);
												if (void 0 === E) throw new Error('slide option not find!');
												H.addSlide(u, E);
												var I = H.sashManager.slides.find(function (e) {
													return e.polygon.contains(u);
												});
												(I.isDoor = 1 === r),
													e.parts.forEach(function (t) {
														var r = e.parts.filter(function (e) {
															return 2070 === e.category;
														});
														d.push.apply(d, i(r));
														var o = JSON.parse(
																t.parameters.find(function (e) {
																	return 'cellPosition' === e.name;
																}).value,
															),
															a = t.parameters.find(function (e) {
																return 'openMode' === e.name;
															}).value,
															s = I.sashes.find(function (e) {
																return e.trackIndex === o.y && e.columnIndex === o.x;
															});
														if (
															((s.isFixed = !1),
															s.updatePoly(),
															s.draw(n.view),
															'0' === a
																? ((s.isFixed = !0), s.updatePoly(), s.draw(n.view))
																: ((s.hardwareManager.openDirection = n.openModeMap.get(
																		parseInt(a, 10),
																  )),
																  s.hardwareManager.updatePoly(),
																  s.hardwareManager.draw(n.view)),
															s.hardwareManager.locks.forEach(function (e) {
																return s.remove(e);
															}),
															(s.hardwareManager.locks = []),
															t.parts.some(function (e) {
																return (
																	2249 === e.category ||
																	2250 === e.category ||
																	2243 === e.category ||
																	2248 === e.category
																);
															}))
														) {
															var l;
															I.appliedOption.items.forEach(function (e, t) {
																e.forEach(function (e, n) {
																	e && s.columnIndex === n && s.trackIndex === t && (l = e);
																});
															});
															var u = I.expandHorizontally
																? [h.Direction.Left, h.Direction.Right]
																: [h.Direction.Up, h.Direction.Down];
															l && 1 === l.defaultLocks.length && (u = l.defaultLocks);
															for (var p = 0; p < 1; p++) {
																var f = c.Handle.lock(s.hardwareManager);
																(f.edgeIndex = h.EdgeFinder.Instance.findIndex(u[p], s.polygon)),
																	f.updatePoly(),
																	f.draw(n.view),
																	s.hardwareManager.locks.push(f);
															}
														}
													});
											}
											H.mulManager.toJSON();
										}),
											H.polygon.edges.forEach(function (e, t) {
												H.frameManager.ejw[t] = M[t];
											}),
											H.frameManager.recreated(H.polygon, this.view),
											H.draw(this.view);
										var U = l.find(function (e) {
												return 'materialBrandGoodId' === e.name;
											}).value,
											J = l.find(function (e) {
												return 'materialBrandGoodIdB' === e.name;
											}).value;
										d.forEach(function (e) {
											var n = e.bgCode;
											if (void 0 !== e.code) {
												var r = e.profile2ds,
													i = [];
												r.forEach(function (e) {
													return i.push(a.default.point(e.p0.x, e.p0.y));
												});
												var o = new a.default.Polygon(i).box.center.transform(p).translate(t);
												f.push({
													glassCode: n,
													center: o,
												});
											}
										}),
											this.kjlGlassSet(f, H);
										var V = [];
										return (
											f.forEach(function (e) {
												return V.push(e.glassCode);
											}),
											{
												frame: H,
												custom: {
													customCode: D,
													customParam: T,
													outcolor: J,
													incolor: U,
												},
												glassInfos: V,
											}
										);
									}),
									(e.prototype.PushSash_set = function (e, t, n, r) {
										void 0 === r && (r = !1);
										var i = t.find(function (e) {
												return 'windowOpenDirection' === e.name;
											}),
											o = t.find(function (e) {
												return 'pushOrPull' === e.name;
											}),
											a = t.find(function (e) {
												return 'PJFS' === e.name;
											});
										(n.hardwareManager.openDirection = this.kjlOpenDirectionMap.get(
											parseInt(i.value, 10),
										)),
											(n.hardwareManager.openToward = this.kjlPushOrPullMap[o.value]),
											n.hardwareManager.updatePoly(),
											(n.withTurningFrame = r);
										var s = n.siblingSash;
										s && ((s.withTurningFrame = r), s.updatePoly(), s.draw(this.view)),
											(n.jointWay = this.PJGYMap[parseInt(void 0 === a ? 0 : a.value, 10)]),
											n.updatePoly();
									}),
									(e.prototype.sortKjlMullionLines = function (e, t, n) {
										var r = [],
											i = [],
											o = e.concat();
										return 1 === o.length
											? (r.push(o[0].seg), r)
											: (e.forEach(function (e) {
													if (!e.stDock) {
														var o = e.seg.tangentInEnd().normalize().multiply(n),
															s = t.some(function (t) {
																return (
																	0 !==
																	a.default
																		.segment(e.seg.start.translate(o), e.seg.end)
																		.intersect(t).length
																);
															});
														e.stDock = s;
													}
													if (!e.edDock) {
														var l = e.seg.tangentInStart().normalize().multiply(n),
															h = t.some(function (t) {
																return (
																	0 !==
																	a.default
																		.segment(e.seg.start, e.seg.end.translate(l))
																		.intersect(t).length
																);
															});
														e.edDock = h;
													}
													e.stDock && e.edDock && (r.push(e.seg), i.push(e.seg));
											  }),
											  (e = e.filter(function (e) {
													return -1 === i.indexOf(e.seg);
											  })),
											  (t = t.concat(i)),
											  r.length < o.length && (r = r.concat(this.sortKjlMullionLines(e, t, n))),
											  r);
									}),
									(e.prototype.checkHv = function (e, t) {
										var n = 0,
											r = 0;
										e instanceof a.default.Segment && (n = e.slope),
											e instanceof a.default.Arc &&
												(n = a.default.segment(e.start, e.middle()).slope),
											t instanceof a.default.Segment && (r = t.slope),
											t instanceof a.default.Arc &&
												(r = a.default.segment(t.start, t.middle()).slope);
										var i = n > Math.PI ? n - Math.PI : n,
											o = r > Math.PI ? r - Math.PI : r;
										return Math.abs(i - Math.PI / 2) > Math.abs(o - Math.PI / 2)
											? {
													fst: 'h',
													scd: 'v',
											  }
											: {
													fst: 'v',
													scd: 'h',
											  };
									}),
									(e.prototype.kjlSlideMapping = function (e, t, n) {
										var r = h.SlideOptions.Ins.options,
											i = r.filter(function (n) {
												return (
													n.columnsCount === e && n.tracksCount === t && !1 === n.isVerticalSlide
												);
											});
										return (
											n.forEach(function (e) {
												i = i.filter(function (t) {
													return (
														void 0 !== t.items[e.y][e.x] &&
														t.items[e.y][e.x].fill === e.slideSashType &&
														!t.items[e.y][e.x].hidden
													);
												});
											}),
											0 !== i.length
												? r.findIndex(function (e) {
														return e === i[0];
												  })
												: void 0
										);
									}),
									(e.prototype.kjlGlassSet = function (e, t) {
										i(
											t.mulManager.glasses.flat(),
											t.sashManager.allSashes
												.flat()
												.map(function (e) {
													return e.mulManager.glasses;
												})
												.flat(),
										).forEach(function (t) {
											e.forEach(function (e) {
												t.polygon.contains(e.center) &&
													Object.assign(t.glassSpec, {
														customAttrs: {
															code: e.glassCode,
														},
													});
											});
										});
									}),
									e
								);
							})();
						t.LoadKJL = u;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HandDrawnRecognition = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(1),
							h = (function () {
								function e(e) {
									this.shapeManager = e;
								}
								return (
									(e.prototype.recognize = function (e) {
										var t = this,
											n = this.toGuiGuiPlanks(e),
											r = this.findFramePoly(n),
											i = this.findSplitters(n, r),
											o = this.flipYForPoly(r),
											a = i.map(function (e) {
												return t.flipYForLine(e);
											});
										this.shapeManager.add(o),
											a.forEach(function (e) {
												return t.shapeManager.addMullion(e);
											}),
											this.shapeManager.moveShapeToCenter();
									}),
									(e.prototype.flipYForPoly = function (e) {
										var t = new a.default.Matrix();
										return (t = t.scale(1, -1)), e.transform(t);
									}),
									(e.prototype.flipYForLine = function (e) {
										return a.default.line(a.default.point(e.pt.x, -e.pt.y), e.norm);
									}),
									(e.prototype.findFramePoly = function (e) {
										var t = this.unifyPolys(e),
											n = this.fetchFaces(t);
										if (n.length < 2) throw new Error('Invalid closed.');
										var r = n.pop(),
											i = this.faceToWinPoly(r);
										return s.Utils.optimizePolygon(i);
									}),
									(e.prototype.findSplitters = function (e, t) {
										var n,
											r = [],
											i = e.filter(function (e) {
												return t.polygon.intersect(e).length > 0;
											}),
											o = e.filter(function (e) {
												return !i.some(function (t) {
													return t === e;
												});
											}),
											a = i;
										do {
											if (-1 !== (n = this.findValidMullion(a, o)).validMullionFPolyIndex) {
												var s = o.splice(n.validMullionFPolyIndex, 1)[0];
												a.push(s), r.push(n.splitterLine);
											}
										} while (-1 !== n.validMullionFPolyIndex);
										return r;
									}),
									(e.prototype.makeSplitterLine = function (e) {
										if (2 !== e.length) return a.default.line();
										var t = e.map(function (e) {
												return e.middle();
											}),
											n = a.default.segment.apply(a.default, i(t));
										return a.default.line(n.middle(), n.tangentInStart().rotate90CW());
									}),
									(e.prototype.findValidMullion = function (e, t) {
										var n = this,
											r = this.unifyPolys(e),
											i = this.fetchFaces(r);
										i.pop();
										var o = i.map(function (e) {
												return n.faceToWinPoly(e);
											}),
											l = [];
										return {
											validMullionFPolyIndex: t.findIndex(function (e) {
												var t = n.fPolyToWinPoly(e).edges.filter(function (e) {
													return e instanceof a.default.Segment;
												});
												return (
													2 ===
													(l = t.filter(function (e) {
														return o.some(function (t) {
															return s.Utils.polyConcideSeg(t, e);
														});
													})).length
												);
											}),
											splitterLine: this.makeSplitterLine(l),
										};
									}),
									(e.prototype.fetchFaces = function (e) {
										return Array.from(e.faces).sort(function (e, t) {
											return e.area() - t.area();
										});
									}),
									(e.prototype.unifyPolys = function (e) {
										var t = e.slice(),
											n = t.shift();
										return (
											t.forEach(function (e) {
												return (n = a.default.BooleanOperations.unify(n, e));
											}),
											n
										);
									}),
									(e.prototype.fPolyToWinPoly = function (e) {
										var t = Array.from(e.faces)[0];
										return this.faceToWinPoly(t);
									}),
									(e.prototype.faceToWinPoly = function (e) {
										var t = new l.WinPolygon();
										return t.polygon.addFace(e.shapes), t;
									}),
									(e.prototype.toGuiGuiPlanks = function (e) {
										return e.map(function (e) {
											var t = e.x / 1,
												n = e.y / 1,
												r = e.width / 1,
												i = e.height / 1,
												o = r >= i,
												s = o ? r : 50,
												l = o ? 50 : i,
												h = a.default.point(t, n),
												c = a.default.point(t + s, n),
												u = a.default.point(t + s, n + l),
												p = a.default.point(t, n + l),
												f = new a.default.Polygon([
													a.default.segment(h, c),
													a.default.segment(c, u),
													a.default.segment(u, p),
													a.default.segment(p, h),
												]);
											return (
												Array.from(f.faces)[0].orientation() === a.default.ORIENTATION.CCW &&
													f.reverse(),
												f
											);
										});
									}),
									e
								);
							})();
						t.HandDrawnRecognition = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__values) ||
							function (e) {
								var t = 'function' == typeof Symbol && Symbol.iterator,
									n = t && e[t],
									r = 0;
								if (n) return n.call(e);
								if (e && 'number' == typeof e.length)
									return {
										next: function () {
											return (
												e && r >= e.length && (e = void 0),
												{
													value: e && e[r++],
													done: !e,
												}
											);
										},
									};
								throw new TypeError(
									t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
								);
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.BarUIDType = t.BarUID = void 0);
						var i,
							o = n(1),
							a = (function () {
								function e() {
									(this.counter = new Map()),
										(this.prefix = new Map([
											[i.frame, 'bk'],
											[i.mullion, 'zt'],
											[i.fixedBead, 'yx'],
											[i.sashFrame, 'sbk'],
											[i.sashMullion, 'szt'],
											[i.sashBead, 'syx'],
											[i.subFrame, 'fk'],
										])),
										this.resetCounter();
								}
								return (
									Object.defineProperty(e, 'Ins', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.resetCounter = function () {
										this.counter = new Map([
											[i.frame, 0],
											[i.mullion, 0],
											[i.fixedBead, 0],
											[i.sashFrame, 0],
											[i.sashMullion, 0],
											[i.sashBead, 0],
											[i.subFrame, 0],
										]);
									}),
									(e.prototype.frame = function (e, t) {
										var n = i.frame;
										return (
											t instanceof o.Sash
												? (n = i.sashFrame)
												: t instanceof o.Bead &&
												  (n = t.parent instanceof o.Sash ? i.sashBead : i.fixedBead),
											this.countMulti(e, n)
										);
									}),
									(e.prototype.mullion = function (e, t) {
										var n = i.mullion;
										return t instanceof o.Sash && (n = i.sashMullion), this.countMulti(e, n);
									}),
									(e.prototype.count = function (e) {
										var t = this.counter.get(e),
											n = this.prefix.get(e);
										return this.counter.set(e, t + 1), n + (t + 1).toString();
									}),
									(e.prototype.countMulti = function (e, t) {
										var n = this.counter.get(t),
											r = this.prefix.get(t),
											i = Array(e).fill('');
										return (
											i.forEach(function (e, t) {
												i[t] = r + (n + t + 1).toString();
											}),
											this.counter.set(t, n + e),
											i
										);
									}),
									(e.prototype.generate = function (e, t) {
										var n = this;
										this.resetCounter(),
											t.forEach(function (e) {
												e.parts.forEach(function (e) {
													e.frameManager.bars.forEach(function (e) {
														return (e.serial = n.count(i.subFrame));
													});
												});
											}),
											e.forEach(function (e) {
												e.frameManager.bars.forEach(function (e) {
													return (e.serial = n.count(i.frame));
												}),
													e.mulManager.bars.forEach(function (e) {
														return (e.serial = n.count(i.mullion));
													}),
													e.sashManager.allSashes.forEach(function (e) {
														e.frameManager.bars.forEach(function (e) {
															return (e.serial = n.count(i.sashFrame));
														}),
															e.mulManager.bars.forEach(function (e) {
																return (e.serial = n.count(i.sashMullion));
															});
													});
											});
									}),
									(e.prototype.find = function (e, t) {
										var n, i, o, a, s, l, h, c;
										try {
											for (var u = r(t.subFrames), p = u.next(); !p.done; p = u.next()) {
												var f = p.value;
												try {
													for (
														var d = ((o = void 0), r(f.parts)), g = d.next();
														!g.done;
														g = d.next()
													)
														if (
															(v = g.value.frameManager.bars.find(function (t) {
																return t.serial === e;
															}))
														)
															return v;
												} catch (e) {
													o = {
														error: e,
													};
												} finally {
													try {
														g && !g.done && (a = d.return) && a.call(d);
													} finally {
														if (o) throw o.error;
													}
												}
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												p && !p.done && (i = u.return) && i.call(u);
											} finally {
												if (n) throw n.error;
											}
										}
										try {
											for (var y = r(t.shapem), m = y.next(); !m.done; m = y.next()) {
												var v,
													w = m.value;
												if (
													(v = w.frameManager.bars.find(function (t) {
														return t.serial === e;
													}))
												)
													return v;
												if (
													(v = w.mulManager.bars.find(function (t) {
														return t.serial === e;
													}))
												)
													return v;
												var b = w.sashManager.allSashes;
												try {
													for (var S = ((h = void 0), r(b)), _ = S.next(); !_.done; _ = S.next()) {
														var P = _.value;
														if (
															(v = P.frameManager.bars.find(function (t) {
																return t.serial === e;
															}))
														)
															return v;
														if (
															(v = P.mulManager.bars.find(function (t) {
																return t.serial === e;
															}))
														)
															return v;
													}
												} catch (e) {
													h = {
														error: e,
													};
												} finally {
													try {
														_ && !_.done && (c = S.return) && c.call(S);
													} finally {
														if (h) throw h.error;
													}
												}
											}
										} catch (e) {
											s = {
												error: e,
											};
										} finally {
											try {
												m && !m.done && (l = y.return) && l.call(y);
											} finally {
												if (s) throw s.error;
											}
										}
									}),
									e
								);
							})();
						(t.BarUID = a),
							(function (e) {
								(e[(e.frame = 0)] = 'frame'),
									(e[(e.mullion = 1)] = 'mullion'),
									(e[(e.fixedBead = 2)] = 'fixedBead'),
									(e[(e.sashFrame = 3)] = 'sashFrame'),
									(e[(e.sashMullion = 4)] = 'sashMullion'),
									(e[(e.sashBead = 5)] = 'sashBead'),
									(e[(e.subFrame = 6)] = 'subFrame');
							})((i = t.BarUIDType || (t.BarUIDType = {})));
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.TheftDimSvg = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(16),
							h = n(13),
							c = n(11),
							u = (function () {
								function e(e) {
									(this.theft = e),
										(this.fontSize = 40),
										(this.dimMargin = 50),
										(this.dimContentMargin = 10),
										(this.minDimSizeLeft = 40),
										(this.sideShutInners = []),
										(this.midShutInners = []),
										(this.viewPositions = []);
								}
								return (
									Object.defineProperty(e.prototype, 'boundary', {
										get: function () {
											return this.theft.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'charSize', {
										get: function () {
											return this.fontSize / 1.7;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isHorz', {
										get: function () {
											return this.theft.shutManager.orientation === h.ShutterOrientation.horizon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.output = function () {
										this.analyseInners();
										var e = this.profiles();
										return (
											(e += this.serialLabel()),
											(e += this.innerDims()),
											(e += this.profileDims()),
											this.wrapSvgElem(e)
										);
									}),
									(e.prototype.serialLabel = function () {
										var e = this.theft.sashSerial;
										if (e && this.handleInner) return this.svgText(e, this.handleInner.box.center);
									}),
									(e.prototype.innerDims = function () {
										var e = this,
											t = '';
										this.sideShutInners.forEach(function (n, r) {
											var i = e.isHorz ? c.Direction.Right : c.Direction.Down,
												o = e.polyDimTo(i, n);
											(t += o.svg),
												(0 !== r && r !== e.sideShutInners.length - 1) ||
													e.viewPositions.push(o.position);
										});
										var n = [];
										if (
											(this.midShutInners.forEach(function (r) {
												var i =
														e.handleHole === c.Direction.Right
															? c.Direction.Left
															: c.Direction.Right,
													o = e.polyDimTo(i, r);
												(t += o.svg), n.push(o.position);
											}),
											this.viewPositions.push(this.centerOfPoints(n)),
											this.handleInner)
										) {
											var r =
													this.handleHole === c.Direction.Right
														? c.Direction.Right
														: c.Direction.Left,
												i = this.polyDimTo(r, this.handleInner);
											t += i.svg;
											var o = this.polyDimToInner(c.Direction.Down, this.handleInner);
											(t += o.svg),
												this.viewPositions.push(this.centerOfPoints([i.position, o.position]));
										}
										return t;
									}),
									(e.prototype.centerOfPoints = function (e) {
										var t = e.map(function (e) {
												return e.x;
											}),
											n = e.map(function (e) {
												return e.y;
											}),
											r = Math.max.apply(Math, i(t)),
											o = Math.min.apply(Math, i(t)),
											s = Math.max.apply(Math, i(n)),
											l = Math.min.apply(Math, i(n));
										return a.default.point((r + o) / 2, (s + l) / 2);
									}),
									(e.prototype.profileDims = function () {
										var e = function (e) {
												var t = e.polygon.mulShape,
													n = a.default
														.line(t.middle(), t.tangentInStart())
														.intersect(e.polygon.polygon);
												return a.default.segment(n[0], n[1]);
											},
											t = '',
											n = a.default.point(),
											r = a.default.point();
										if (this.isHorz) {
											var i = c.EdgeFinder.Instance.findIndex2(c.Direction.Up, this.theft.polygon);
											if (
												(u = this.theft.frameManager.bars.find(function (e) {
													return e.polyId.idx === i;
												}))
											) {
												var o = e(u);
												(t += (p = this.segDimTo(c.Direction.Left, o)).svg), (n = p.position);
											}
											if (
												((f = (f = this.theft.shutManager.bars).filter(function (e) {
													return s.Utils.isSegHorizontal(e.polygon.mulShape);
												})).sort(function (e, t) {
													return e.polygon.mulShape.middle().y - t.polygon.mulShape.middle().y;
												}),
												(g = f[0]))
											) {
												var l = e(g),
													h = this.sideShutInners[0].box;
												h.ymax - h.ymin < 2 * this.charSize && (l = e((g = f[1]))),
													(t += (y = this.segDimTo(c.Direction.Left, l)).svg),
													(r = y.position);
											}
										} else {
											var u,
												p,
												f,
												d = c.EdgeFinder.Instance.findIndex2(c.Direction.Left, this.theft.polygon);
											(o = e(
												(u = this.theft.frameManager.bars.find(function (e) {
													return e.polyId.idx === d;
												})),
											)),
												(t += (p = this.segDimTo(c.Direction.Up, o)).svg),
												(n = p.position),
												(f = this.theft.shutManager.bars).sort(function (e, t) {
													return e.polygon.mulShape.middle().x - t.polygon.mulShape.middle().x;
												}),
												(l = e((g = f[0])));
											var g,
												y,
												m = this.sideShutInners[0].box;
											m.xmax - m.xmin < 2 * this.charSize && (l = e((g = f[1]))),
												(t += (y = this.segDimTo(c.Direction.Up, l)).svg),
												(r = y.position);
										}
										return this.viewPositions.push(this.centerOfPoints([n, r])), t;
									}),
									(e.prototype.defaultViewBox = function () {
										var e = this.boundary.box,
											t = this.dimMargin + this.fontSize + this.dimContentMargin,
											n = 2 * this.charSize,
											r = this.isHorz ? t : n,
											i = this.isHorz ? n : t;
										return {
											x: e.xmin - r,
											y: e.ymin - i,
											width: e.xmax - e.xmin + 2 * r,
											height: e.ymax - e.ymin + 2 * i,
										};
									}),
									(e.prototype.detailViewBox = function (e) {
										var t = this.viewPositions[e];
										return {
											x: t.x - 250,
											y: t.y - 250,
											width: 500,
											height: 500,
										};
									}),
									(e.prototype.wrapSvgElem = function (e) {
										var t = this.defaultViewBox();
										return (
											'<svg xmlns="http://www.w3.org/2000/svg"\n    viewBox="' +
											t.x +
											' ' +
											t.y +
											' ' +
											t.width +
											' ' +
											t.height +
											'">\n    ' +
											e +
											'\n    </svg>'
										);
									}),
									(e.prototype.polyDimToInner = function (e, t) {
										var n = t.edge(c.EdgeFinder.Instance.findIndex2(e, t)),
											r =
												t.orientation === a.default.ORIENTATION.CW
													? n.tangentInStart().rotate90CW()
													: n.tangentInStart().rotate90CCW();
										return this.svgDim(n, r, this.dimMargin);
									}),
									(e.prototype.polyDimTo = function (e, t) {
										var n = t.edge(c.EdgeFinder.Instance.findIndex2(e, t)),
											r = this.closestDistance(n, this.boundary),
											i = r[0],
											o = r[1].tangentInStart();
										return this.svgDim(n, o, i + this.dimMargin);
									}),
									(e.prototype.segDimTo = function (e, t) {
										((e === c.Direction.Left && t.start.y > t.end.y) ||
											(e === c.Direction.Right && t.start.y < t.end.y) ||
											(e === c.Direction.Up && t.start.x > t.end.x) ||
											(e === c.Direction.Down && t.start.x < t.end.x)) &&
											(t = t.reverse());
										var n = this.boundary.edge(c.EdgeFinder.Instance.findIndex2(e, this.boundary)),
											r = t.middle().distanceTo(n),
											i = r[0],
											o = r[1].tangentInStart();
										return this.svgDim(t, o, i + this.dimMargin);
									}),
									(e.prototype.closestDistance = function (e, t) {
										var n = e.middle(),
											r = a.default.line(n, e.tangentInStart()),
											i = t.edges
												.map(function (e) {
													var t = Number.MAX_SAFE_INTEGER,
														i = e.intersect(r);
													return (
														1 === i.length && (t = n.distanceTo(i[0])[0]),
														{
															edge: e,
															distance: t,
														}
													);
												})
												.sort(function (e, t) {
													return e.distance - t.distance;
												})
												.shift().edge;
										return n.distanceTo(i);
									}),
									(e.prototype.svgDim = function (e, t, n) {
										var r = this,
											i = '',
											o = e.translate(t.multiply(n)),
											s = o.translate(t.invert().multiply(30));
										[
											o,
											a.default.segment(o.start, s.start),
											a.default.segment(o.end, s.end),
										].forEach(function (e) {
											i += r.svgSeg(e);
										});
										var l = Number.parseFloat(e.length.toFixed(2)).toString(),
											h = this.charSize * l.length + this.minDimSizeLeft > o.length,
											c = o.middle();
										h && (c = c.translate(t.multiply(this.fontSize / 2 + this.dimContentMargin)));
										var u = o.tangentInStart().angleTo(a.default.vector(1, 0));
										return {
											position: c,
											svg: (i += this.svgText(l, c, u, !h)),
										};
									}),
									(e.prototype.svgText = function (e, t, n, r) {
										void 0 === n && (n = 0), void 0 === r && (r = !1), (n = (n / Math.PI) * 180);
										var i = this.fontSize,
											o =
												'<text\n    x="' +
												t.x +
												'"\n    y="' +
												t.y +
												'"\n    fill="blue"\n    font-size="' +
												i +
												'px"\n    transform="rotate(' +
												n +
												' ' +
												t.x +
												',' +
												t.y +
												')"\n    style="dominant-baseline:central;text-anchor:middle;"\n    >' +
												e +
												'</text>',
											a = '';
										if (r) {
											var s = (i / 1.5) * e.length,
												l = i;
											a =
												'<rect\n      fill="#fff"\n      x="' +
												(t.x - s / 2) +
												'"\n      y="' +
												(t.y - l / 2) +
												'"\n      width="' +
												s +
												'"\n      height="' +
												l +
												'"\n      transform="rotate(' +
												n +
												' ' +
												t.x +
												',' +
												t.y +
												')"\n      ></rect>';
										}
										return a + o;
									}),
									(e.prototype.svgSeg = function (e) {
										var t = new l.WinPolygon();
										t.add(e), t.done();
										var n = t.polygon.svg();
										return this.stroke('blue', n);
									}),
									(e.prototype.analyseInners = function () {
										var e = this,
											t = this.theft.shutManager.pushSash;
										this.isHorz &&
											this.theft.showHandleBars &&
											t &&
											(t.hardwareManager.isLeftOpen
												? (this.handleHole = c.Direction.Right)
												: t.hardwareManager.isRightOpen && (this.handleHole = c.Direction.Left));
										var n = this.theft.shutManager.bars,
											r = this.theft.shutManager.innerPolys,
											i = n.find(function (e) {
												return s.Utils.isSegVertical(e.polygon.mulShape);
											}),
											o = [];
										void 0 !== this.handleHole &&
											i &&
											((o = r.filter(function (e) {
												return s.Utils.polyCoincide(i.polygon, e);
											})),
											(this.handleInner = o.find(function (t) {
												var n = t.box.center.x - i.polygon.box.center.x;
												return e.handleHole === c.Direction.Right ? n > 0 : n < 0;
											})),
											this.handleInner &&
												(this.midShutInners = o.filter(function (t) {
													return t !== e.handleInner;
												}))),
											(this.sideShutInners = r.filter(function (e) {
												return o.every(function (t) {
													return t !== e;
												});
											})),
											this.sideShutInners.sort(function (t, n) {
												return e.isHorz
													? t.box.center.y - n.box.center.y
													: t.box.center.x - n.box.center.x;
											});
									}),
									(e.prototype.profiles = function () {
										var e = '';
										return (
											i(this.theft.frameManager.bars, this.theft.shutManager.bars).forEach(
												function (t) {
													e += t.polygon.polygon.svg();
												},
											),
											(e = this.fill('#eee', e))
										);
									}),
									(e.prototype.fill = function (e, t) {
										return t.replace(/fill=".+?"/g, 'fill="' + e + '"');
									}),
									(e.prototype.stroke = function (e, t) {
										return t.replace(/stroke=".+?"/g, 'stroke="' + e + '"');
									}),
									e
								);
							})();
						t.TheftDimSvg = u;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.InnerFrameCCBar = void 0);
						var r = n(9),
							i = n(1),
							o = (function () {
								function e(e) {
									e.forEach(function (e) {
										e.mulManager.bars.forEach(function (e) {
											e.polygon.spLine.line instanceof r.FrametifyLike &&
												(e.type = i.ShapeType.InnerFrame);
										});
									});
								}
								return (
									(e.prototype.isInnerFrame = function (e) {
										return e === i.ShapeType.InnerFrame;
									}),
									e
								);
							})();
						t.InnerFrameCCBar = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SingleTrackPolygon = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(7),
							h = n(9),
							c = n(6),
							u = n(16),
							p = (function (e) {
								function t(t, n, r) {
									void 0 === n && (n = [s.Direction.Right]);
									var i = e.call(this, r) || this;
									return (
										(i.position = t),
										(i.hidden = n),
										(i.size = 2100),
										(i.pullingHeight = new Map()),
										r || i.initLayout(),
										i
									);
								}
								return (
									i(t, e),
									(t.createFromBox = function (e, n) {
										var r = a.default.point(e.xmin, e.ymin),
											i = a.default.point(e.xmin, e.ymax),
											o = a.default.point(e.xmax, e.ymax),
											s = a.default.point(e.xmax, e.ymin),
											l = [
												a.default.segment(r, i),
												a.default.segment(i, o),
												a.default.segment(o, s),
												a.default.segment(s, r),
											];
										return new t(e.center, n, l);
									}),
									Object.defineProperty(t.prototype, 'validEjwIds', {
										get: function () {
											var e = [];
											return (
												this.hidden.some(function (e) {
													return e === s.Direction.Left;
												}) && e.push(0, 1),
												this.hidden.some(function (e) {
													return e === s.Direction.Right;
												}) && e.push(2, 3),
												this.hidden.some(function (e) {
													return e === s.Direction.Down;
												}) && e.push(1, 2),
												this.hidden.some(function (e) {
													return e === s.Direction.Up;
												}) && e.push(3, 0),
												[0, 1, 2, 3].filter(function (t) {
													return !e.some(function (e) {
														return e === t;
													});
												})
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											return new u.WinPolygon(this.edges);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isSimpleClosed', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = u.PolyType.singleTrack),
											(t.cpt = this.position.toJSON()),
											(t.ep = this.hidden),
											(t.ph = Array.from(this.pullingHeight)),
											t
										);
									}),
									(t.prototype._clone = function () {
										var e = new t(this.position, this.hidden);
										return (e.pullingHeight = this.pullingHeight), e;
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 4; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										(this.imIdx = new Map([
											[0, 0],
											[1, 1],
											[2, 2],
											[3, 3],
										])),
											this.hidden &&
												(this.hidden.some(function (e) {
													return e === s.Direction.Right;
												}) &&
													(this.ctlRobs.set(2, {
														arc: !1,
														endpoint: !1,
													}),
													this.ctlRobs.set(3, {
														arc: !1,
														endpoint: !1,
													})),
												this.hidden.some(function (e) {
													return e === s.Direction.Left;
												}) &&
													(this.ctlRobs.set(0, {
														arc: !1,
														endpoint: !1,
													}),
													this.ctlRobs.set(1, {
														arc: !1,
														endpoint: !1,
													})),
												this.hidden.some(function (e) {
													return e === s.Direction.Down;
												}) &&
													(this.ctlRobs.set(1, {
														arc: !1,
														endpoint: !1,
													}),
													this.ctlRobs.set(2, {
														arc: !1,
														endpoint: !1,
													})),
												this.hidden.some(function (e) {
													return e === s.Direction.Up;
												}) &&
													(this.ctlRobs.set(3, {
														arc: !1,
														endpoint: !1,
													}),
													this.ctlRobs.set(0, {
														arc: !1,
														endpoint: !1,
													})));
									}),
									(t.prototype.initLayout = function () {
										var e = this;
										this.initPoly(),
											this.clear(),
											u.PolygonCreator.Ins.joinRelativePro(
												[
													a.default.vector(0, this.size),
													a.default.vector(this.size, 0),
													a.default.vector(0, -this.size),
												],
												a.default.point(-this.size / 2, -this.size / 2),
											).edges.forEach(function (t) {
												return e.add(t);
											}),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.frametify = function (e, t) {
										return new h.SingleTrackFrametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.edges;
										i[e] = i[e].translate(n);
										var o = i.length;
										h.Frametify.edgeIntersection(i, (e + o - 1) % o),
											h.Frametify.edgeIntersection(i, e);
										var s = new t(this.position, this.hidden, i);
										return (s.pullingHeight = this.pullingHeight), s;
									}),
									(t.prototype.dragArc = function (e, t) {
										return this.dragEdge(e, t);
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return void 0 === r && (r = a.default.point()), this.dragEdge(e, t);
									}),
									(t.prototype.updatePullingHeightLabel = function (e) {
										var t = this.pullingHeight.get(s.Direction.Down);
										t &&
											((e.text = l.DrawParams.Ins.lang('pulling_height') + t.toString()),
											(e.position = this.edge(1).middle()),
											(e.position = e.position.translate(
												a.default.vector(0, (0.75 * e.fontSize) / 2 - t),
											))),
											(e.hidden = !t),
											e.updatePoly();
									}),
									(t.prototype.pullingHeightMigration = function (e) {
										var t = this.pullingHeight.get(s.Direction.Down);
										if (t) {
											var n = e.splitter.subs
												.filter(function (e) {
													return !e.IsMullion;
												})
												.sort(function (e, t) {
													return e.polygon.box.ymax - t.polygon.box.ymax;
												})
												.pop();
											n && (e.splitter.setPullingHeight(n.polyId, t), this.pullingHeight.clear());
										}
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[0].dimShow = !1),
											(t[1] = {
												idx: 1,
												dimShow: !0,
											}),
											(t[2] = {
												idx: 2,
												dimShow: !0,
											}),
											(t[3].dimShow = !1),
											t
										);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: c.EventType.single_track_frame_settings,
											payload: new c.SingleTrackFrameSettings(e, e.view),
										});
									}),
									t
								);
							})(u.WinPolygon);
						t.SingleTrackPolygon = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EarPolygon = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(9),
							h = n(6),
							c = n(16),
							u = n(2),
							p = (function (e) {
								function t(t, n, r, i, o) {
									void 0 === n && (n = !1), void 0 === r && (r = !1), void 0 === i && (i = !1);
									var a = e.call(this, o) || this;
									return (
										(a.position = t),
										(a.isVertical = n),
										(a.xFlip = r),
										(a.yFlip = i),
										(a.size = 2100),
										(a.hasBase = !0),
										(a.pullingHeight = []),
										o || a.initLayout(),
										a
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											var e = this.edges,
												t = c.PolygonCreator.Ins.joinPointsWithSegment([
													e[5].end,
													e[0].end,
													e[1].end,
													e[2].end,
													e[3].end,
													e[4].end,
												]);
											return new c.WinPolygon(t);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'earSize', {
										get: function () {
											return (this.size / 3) * 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'center', {
										get: function () {
											var e = this.edges,
												t = new a.default.Box();
											return (t = (t = t.merge(e[2].box)).merge(e[3].box)).center;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.initLayout = function () {
										var e = this;
										this.clear();
										var t = this.initEdges();
										t.forEach(function (t) {
											return e.add(t);
										}),
											(this.pullingHeight = Array(t.length).fill(0)),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = c.PolyType.ear),
											(t.cpt = this.position.toJSON()),
											(t.isVertical = this.isVertical),
											(t.xFlip = this.xFlip),
											(t.yFlip = this.yFlip),
											(t.hb = this.hasBase),
											(t.ph = this.pullingHeight),
											t
										);
									}),
									(t.prototype.flipX = function () {
										var e = this,
											n = this.edges,
											r = this.center;
										return new t(
											this.position,
											this.isVertical,
											!this.xFlip,
											this.yFlip,
											n.map(function (t) {
												return e.flipXForSeg(t, r);
											}),
										);
									}),
									(t.prototype.flipY = function () {
										var e = this,
											n = this.edges,
											r = this.center;
										return new t(
											this.position,
											this.isVertical,
											this.xFlip,
											!this.yFlip,
											n.map(function (t) {
												return e.flipYForSeg(t, r);
											}),
										);
									}),
									(t.prototype.frametify = function (e, t) {
										return new l.EarFrametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.edges,
											o = i.length;
										i[e] = i[e].translate(n);
										var s = a.default.line(i[e].start, i[e].end);
										if (0 === e) {
											var h = s.intersect(a.default.line(i[1].start, i[1].end))[0],
												c = s.intersect(a.default.line(i[3].start, i[3].end))[0],
												u = s.intersect(a.default.line(i[5].start, i[5].end))[0];
											(i[0] = a.default.segment(c, h)),
												(i[1] = a.default.segment(h, i[1].end)),
												(i[5] = a.default.segment(i[5].start, u)),
												(i[6] = a.default.segment(u, c));
										} else if (3 === e) {
											var p = s.intersect(a.default.line(i[0].start, i[0].end))[0],
												f = s.intersect(a.default.line(i[2].start, i[2].end))[0],
												d = s.intersect(a.default.line(i[4].start, i[4].end))[0];
											(i[0] = a.default.segment(p, i[0].end)),
												(i[2] = a.default.segment(i[2].start, f)),
												(i[4] = a.default.segment(d, i[4].end)),
												(i[6] = a.default.segment(i[6].start, p)),
												(i[3] = a.default.segment(f, d));
										} else if (5 === e)
											(p = a.default.line(i[0].start, i[0].end).intersect(s)[0]),
												(d = a.default.line(i[4].start, i[4].end).intersect(s)[0]),
												(i[6] = a.default.segment(p, i[6].end)),
												(i[4] = a.default.segment(i[4].start, d)),
												(i[5] = a.default.segment(d, p));
										else {
											if (6 === e) return this.dragEdge(0, n);
											l.Frametify.edgeIntersection(i, (e + o - 1) % o),
												l.Frametify.edgeIntersection(i, e);
										}
										var g = new t(this.position, this.isVertical, this.xFlip, this.yFlip, i);
										return (g.hasBase = this.hasBase), (g.pullingHeight = this.pullingHeight), g;
									}),
									(t.prototype.dragVertex = function (e, n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = this.edges;
										n = n.projectionOn(a.default.vector(0, 1));
										var s = o[e].start.translate(n);
										if (2 === e)
											(o[1] = a.default.segment(o[1].start, s)),
												(o[2] = a.default.segment(s, o[2].end));
										else if (3 === e) {
											var l = a.default
												.line(s, o[3].end)
												.intersect(a.default.line(o[0].start, o[0].end))[0];
											(o[0] = a.default.segment(l, o[0].end)),
												(o[3] = a.default.segment(s, o[3].end)),
												(o[2] = a.default.segment(o[2].start, s));
										} else if (4 === e)
											(l = a.default
												.line(o[3].start, s)
												.intersect(a.default.line(o[0].start, o[0].end))[0]),
												(o[0] = a.default.segment(l, o[0].end)),
												(o[3] = a.default.segment(o[3].start, s)),
												(o[4] = a.default.segment(s, o[4].end));
										else if (5 === e)
											(o[4] = a.default.segment(o[4].start, s)),
												(o[5] = a.default.segment(s, o[5].end));
										else {
											if (6 !== e) return this;
											(o[5] = a.default.segment(o[5].start, s)),
												(o[6] = a.default.segment(s, o[6].end));
										}
										var h = new t(this.position, this.isVertical, this.xFlip, this.yFlip, o);
										return (h.hasBase = this.hasBase), (h.pullingHeight = this.pullingHeight), h;
									}),
									(t.prototype.editDim = function (e, t, n) {
										var r = this.edges,
											i = a.default.Utils.EQ_0(r[0].length - r[2].length),
											o = a.default.Utils.EQ_0(r[4].length - r[6].length),
											s = r[0],
											l = r[5],
											h = r[3],
											c = a.default.Utils.EQ_0(s.tangentInStart().dot(l.tangentInStart())),
											u =
												a.default.Utils.EQ_0(h.tangentInStart().dot(a.default.vector(0, 1))) ||
												a.default.Utils.EQ_0(h.tangentInStart().dot(a.default.vector(1, 0)));
										return 0 === e
											? o
												? this.dragEdge(5, n)
												: this.dragVertex(6, n.invert(), !1)
											: 2 === e
											? i
												? this.dragEdge(2, n)
												: this.dragVertex(2, n, !1)
											: 3 === e
											? i
												? this.dragEdge(3, n)
												: this.dragVertex(3, n, !1)
											: 4 === e
											? i
												? this.dragEdge(4, n)
												: this.dragVertex(3, n.invert(), !1)
											: 5 === e
											? c && u
												? this.dragEdge(5, n)
												: c && !u
												? this.dragVertex(4, n.invert(), !1)
												: this.dragVertex(5, n, !1)
											: this.dragEdge(e, n);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: h.EventType.ear_frame_settings,
											payload: new h.EarFrameSettings(e, e.view),
										});
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(this.position, this.isVertical, this.xFlip, this.yFlip, e)
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 7; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										this.ctlRobs.set(0, {
											arc: !1,
											endpoint: !1,
										}),
											(this.imIdx = new Map([
												[0, 0],
												[1, 1],
												[2, 2],
												[3, 3],
												[4, 4],
												[5, 5],
												[6, 0],
												[7, 3],
											]));
									}),
									(t.prototype.initEdges = function () {
										var e = this,
											t = this.size,
											n = this.earSize,
											r = this.size - this.earSize,
											i = a.default.point(r, 0),
											o = a.default.point(r, t),
											s = a.default.point(0, t),
											l = a.default.point(0, 0),
											h = a.default.point(t, 0),
											c = a.default.point(t, n),
											u = a.default.point(r, n),
											p = [
												a.default.segment(i, o),
												a.default.segment(o, s),
												a.default.segment(s, l),
												a.default.segment(l, h),
												a.default.segment(h, c),
												a.default.segment(c, u),
												a.default.segment(u, i),
											];
										return (
											p.forEach(function (n, r) {
												(p[r] = n.translate(a.default.vector(-t / 2, -t / 2))),
													e.isVertical && (p[r] = p[r].rotate(-Math.PI / 2)),
													e.xFlip && (p[r] = e.flipXForSeg(p[r])),
													e.yFlip && (p[r] = e.flipYForSeg(p[r]));
											}),
											(this.pullingHeight = Array(p.length).fill(0)),
											p
										);
									}),
									(t.prototype.flipXForSeg = function (e, t) {
										void 0 === t && (t = a.default.point());
										var n = t.x;
										return a.default.segment(
											a.default.point(2 * n - e.start.x, e.start.y),
											a.default.point(2 * n - e.end.x, e.end.y),
										);
									}),
									(t.prototype.flipYForSeg = function (e, t) {
										void 0 === t && (t = a.default.point());
										var n = t.y;
										return a.default.segment(
											a.default.point(e.start.x, 2 * n - e.start.y),
											a.default.point(e.end.x, 2 * n - e.end.y),
										);
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[0];
										this.toMulCCBar(t),
											(t.connectCount =
												e[0].epDock.etDock.type === u.DockType.None &&
												e[1].epDock.stDock.type === u.DockType.None
													? 2
													: 3),
											(t.dockCount = e[0].epDock.etDock.type === u.DockType.Frame ? 2 : 1);
									}),
									Object.defineProperty(t.prototype, 'asMulEdgeIndexes', {
										get: function () {
											return [0];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.updatePullingHeightLabel = function (e) {
										var t = this.pullingHeight[1];
										!this.hasBase &&
											t &&
											((e.text = s.DrawParams.Ins.lang('pulling_height') + t.toString()),
											(e.position = this.edge(1).middle()),
											(e.position = e.position.translate(
												a.default.vector(0, (0.75 * e.fontSize) / 2 - t),
											))),
											(e.hidden = !t),
											e.updatePoly();
									}),
									(t.prototype.pullingHeightMigration = function (e, t) {
										var n = this.pullingHeight[1];
										if (!this.hasBase && n) {
											var r = this.edges,
												i = new c.WinPolygon(
													c.PolygonCreator.Ins.joinPointsWithSegment([
														r[0].start,
														r[0].end,
														r[2].start,
														r[2].end,
													]),
												),
												o = e.splitter.subs
													.filter(function (e) {
														return !e.IsMullion && i.contains(e.box.center);
													})
													.sort(function (e, t) {
														return e.polygon.box.ymax - t.polygon.box.ymax;
													})
													.pop();
											o &&
												(e.splitter.setPullingHeight(o.polyId, n),
												t.setVirtual(new u.PolyId(1, -1), !0),
												(this.pullingHeight[1] = 0),
												(this.hasBase = !0));
										}
									}),
									t
								);
							})(c.WinPolygon);
						t.EarPolygon = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PointedEarPolygon = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(11),
							h = n(87),
							c = n(16),
							u = n(6),
							p = n(9),
							f = n(2),
							d = (function (e) {
								function t(t, n, r, i) {
									void 0 === n && (n = l.Direction.Right), void 0 === r && (r = !1);
									var o = e.call(this, i) || this;
									return (
										(o.position = t),
										(o.earPosition = n),
										(o.floatReverse = r),
										(o.size = 2100),
										(o.hasBase = !0),
										(o.pullingHeight = []),
										i || o.initLayout(),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'earSize', {
										get: function () {
											return (this.size / 3) * 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = c.PolyType.pointedEar),
											(t.cpt = this.position.toJSON()),
											(t.ep = this.earPosition),
											(t.fr = this.floatReverse),
											(t.hb = this.hasBase),
											(t.ph = this.pullingHeight),
											t
										);
									}),
									(t.prototype._clone = function () {
										return new t(this.position);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 1; e < 5; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										this.ctlRobs.set(5, {
											arc: !1,
											endpoint: !1,
										}),
											this.ctlRobs.set(0, {
												arc: !1,
												endpoint: !1,
											}),
											(this.imIdx = new Map([
												[0, 0],
												[1, 1],
												[2, 2],
												[3, 3],
												[4, 3],
												[5, 4],
												[6, 5],
											]));
									}),
									(t.prototype.initLayout = function () {
										var e,
											t = this;
										switch ((this.clear(), this.earPosition)) {
											case l.Direction.Left:
												e = this.initLeftEarEdges(!this.floatReverse);
												break;
											case l.Direction.Up:
												e = this.initTopEarEdges(!this.floatReverse);
												break;
											case l.Direction.Right:
												e = this.initRightEarEdges(!this.floatReverse);
												break;
											default:
												e = this.initBottomEarEdges(!this.floatReverse);
										}
										e.forEach(function (e) {
											return t.add(e);
										}),
											(this.pullingHeight = Array(e.length).fill(0)),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.initRightEarEdges = function (e) {
										void 0 === e && (e = !0);
										var t = e ? 1 : -1;
										return h.PolygonCreator.Ins.joinRelativePro(
											[
												a.default.vector(0, t * this.size),
												a.default.vector(-(this.size - this.earSize), 0),
												a.default.vector(0, t * -this.size),
												a.default.vector(this.size, 0),
												a.default.vector(-this.earSize, t * this.earSize),
												a.default.vector(0, -t * this.earSize),
											],
											a.default.point((this.size - this.earSize) / 2, (t * -this.size) / 2),
											!1,
										).edges;
									}),
									(t.prototype.initLeftEarEdges = function (e) {
										void 0 === e && (e = !0);
										var t = e ? 1 : -1;
										return h.PolygonCreator.Ins.joinRelativePro(
											[
												a.default.vector(0, t * this.size),
												a.default.vector(this.size - this.earSize, 0),
												a.default.vector(0, t * -this.size),
												a.default.vector(-this.size, 0),
												a.default.vector(this.earSize, t * this.earSize),
												a.default.vector(0, -t * this.earSize),
											],
											a.default.point(-(this.size - this.earSize) / 2, (t * -this.size) / 2),
											!1,
										).edges;
									}),
									(t.prototype.initTopEarEdges = function (e) {
										void 0 === e && (e = !0);
										var t = e ? 1 : -1;
										return h.PolygonCreator.Ins.joinRelativePro(
											[
												a.default.vector(t * this.size, 0),
												a.default.vector(0, this.size - this.earSize),
												a.default.vector(t * -this.size, 0),
												a.default.vector(0, -this.size),
												a.default.vector(t * this.earSize, this.earSize),
												a.default.vector(-t * this.earSize, 0),
											],
											a.default.point((t * -this.size) / 2, -(this.size - this.earSize) / 2),
											!1,
										).edges;
									}),
									(t.prototype.initBottomEarEdges = function (e) {
										void 0 === e && (e = !0);
										var t = e ? 1 : -1;
										return h.PolygonCreator.Ins.joinRelativePro(
											[
												a.default.vector(t * this.size, 0),
												a.default.vector(0, -(this.size - this.earSize)),
												a.default.vector(t * -this.size, 0),
												a.default.vector(0, this.size),
												a.default.vector(t * this.earSize, -this.earSize),
												a.default.vector(-t * this.earSize, 0),
											],
											a.default.point((t * -this.size) / 2, (this.size - this.earSize) / 2),
											!1,
										).edges;
									}),
									(t.prototype.frametify = function (e, t) {
										return new p.PointedEarFrametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.edges,
											o = i.length - 1;
										i[e] = i[e].translate(n);
										var s = i[e];
										if (0 === e) {
											var l = i[o - 1];
											l.pe = a.default
												.line(s.start, s.end)
												.intersect(a.default.line(l.start, l.end))[0]
												.clone();
										} else p.Frametify.edgeIntersection(i.slice(0, o), (e + o - 1) % o);
										if (4 === e) {
											var h = i[0];
											s.pe = a.default
												.line(h.start, h.end)
												.intersect(a.default.line(s.start, s.end))[0]
												.clone();
										} else p.Frametify.edgeIntersection(i.slice(0, o), e);
										if (0 === e || 3 === e) {
											h = i[0];
											var c = i[3];
											h.ps = a.default
												.line(c.start, c.end)
												.intersect(a.default.line(h.start, h.end))[0]
												.clone();
										}
										i[o] = a.default.segment(
											i[o - 1].end.clone(),
											a.default
												.line(i[0].start, i[0].end)
												.intersect(a.default.line(i[3].start, i[3].end))[0],
										);
										var u = new t(this.position, this.earPosition, this.floatReverse, i);
										return (u.hasBase = this.hasBase), (u.pullingHeight = this.pullingHeight), u;
									}),
									(t.prototype.dragArc = function (e, t) {
										return this.dragEdge(e, t);
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return void 0 === r && (r = a.default.point()), this.dragEdge(e, t);
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[0].dimShow = !1),
											(t[2] = {
												idx: 2,
												dimShow: !0,
											}),
											(t[3] = {
												idx: 3,
												dimShow: !0,
											}),
											(t[4] = {
												idx: 4,
												dimShow: !1,
											}),
											(t[5] = {
												idx: 5,
												dimShow: !0,
												mulHide: !0,
											}),
											t
										);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: u.EventType.pointed_ear_frame_settings,
											payload: new u.PointedEarsFrameSettings(e, e.view),
										});
									}),
									(t.prototype.parallelPoly = function (e, t) {
										var n = [];
										e instanceof Array
											? e.forEach(function (e) {
													return n.push(e);
											  })
											: this.edges.forEach(function (t) {
													return n.push(e);
											  });
										var r = new c.WinPolygon(
											this.edges
												.map(function (e) {
													return e.clone();
												})
												.slice(0, this.edges.length - 1),
										);
										return p.Frametify.findPoly(r, n, t);
									}),
									(t.prototype.editDim = function (e, t, n) {
										if (1 === e) {
											var r = (i = this.edges)[this.edges.length - 2].end.translate(n.invert());
											return (
												(i[this.edges.length - 2] = a.default.segment(
													i[this.edges.length - 2].start,
													r,
												)),
												(i[this.edges.length - 1] = a.default.segment(
													r,
													i[this.edges.length - 1].end,
												)),
												((o = this.cloneWith(i)).hasBase = this.hasBase),
												(o.pullingHeight = this.pullingHeight),
												o
											);
										}
										var i, o;
										return 4 === e
											? ((r = (i = this.edges)[3].end.translate(n)),
											  (i[3] = a.default.segment(i[3].start, r)),
											  (i[4] = a.default.segment(r, i[4].end)),
											  ((o = this.cloneWith(i)).hasBase = this.hasBase),
											  (o.pullingHeight = this.pullingHeight),
											  o)
											: this.dragEdge(e, n);
									}),
									(t.prototype.updatePullingHeightLabel = function (e) {
										var t = this.pullingHeight[1];
										!this.hasBase &&
											t &&
											((e.text = s.DrawParams.Ins.lang('pulling_height') + t.toString()),
											(e.position = this.edge(1).middle()),
											(e.position = e.position.translate(
												a.default.vector(0, (0.75 * e.fontSize) / 2 - t),
											))),
											(e.hidden = !t),
											e.updatePoly();
									}),
									(t.prototype.pullingHeightMigration = function (e, t) {
										var n = this.pullingHeight[1];
										if (!this.hasBase && n) {
											var r = this.edges,
												i = new c.WinPolygon(
													h.PolygonCreator.Ins.joinPointsWithSegment([
														r[0].start,
														r[0].end,
														r[2].start,
														r[2].end,
													]),
												),
												o = e.splitter.subs
													.filter(function (e) {
														return !e.IsMullion && i.contains(e.box.center);
													})
													.sort(function (e, t) {
														return e.polygon.box.ymax - t.polygon.box.ymax;
													})
													.pop();
											o &&
												(e.splitter.setPullingHeight(o.polyId, n),
												t.setVirtual(new f.PolyId(1, -1), !0),
												(this.pullingHeight[1] = 0),
												(this.hasBase = !0));
										}
									}),
									t
								);
							})(c.WinPolygon);
						t.PointedEarPolygon = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoubleEarsPolygon = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(7),
							h = n(87),
							c = n(9),
							u = n(16),
							p = n(6),
							f = n(2),
							d = (function (e) {
								function t(t, n, r) {
									void 0 === n && (n = s.Direction.Up);
									var i = e.call(this, r) || this;
									return (
										(i.position = t),
										(i.earPosition = n),
										(i.size = 2100),
										(i.hasBase = !0),
										(i.pullingHeight = []),
										r || i.initLayout(),
										i
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'smBoxSize', {
										get: function () {
											return (this.size / 3) * 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											var e = this.edges;
											return new u.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													e[0].end,
													e[1].end,
													e[2].end,
													e[3].end,
													e[4].end,
													e[6].start,
													e[6].end,
													e[7].end,
												]),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isSimpleClosed', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = u.PolyType.doubleEars),
											(t.cpt = this.position.toJSON()),
											(t.ep = this.earPosition),
											(t.hb = this.hasBase),
											(t.ph = this.pullingHeight),
											t
										);
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(this.position, this.earPosition, e)
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 8; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										this.ctlRobs.set(3, {
											arc: !1,
											endpoint: !1,
										}),
											this.ctlRobs.set(6, {
												arc: !1,
												endpoint: !1,
											}),
											(this.imIdx = new Map([
												[0, 0],
												[1, 1],
												[2, 2],
												[3, 3],
												[4, 3],
												[5, 4],
												[6, 5],
												[7, 0],
												[8, 5],
												[9, 6],
												[10, 7],
												[11, 0],
											]));
									}),
									(t.prototype.initLayout = function () {
										var e,
											t = this;
										switch ((this.clear(), this.earPosition)) {
											case s.Direction.Left:
												e = this.initHorizontalEdges(!1);
												break;
											case s.Direction.Right:
												e = this.initHorizontalEdges(!0);
												break;
											case s.Direction.Up:
												e = this.initVerticalEdges(!1);
												break;
											default:
												e = this.initVerticalEdges(!0);
										}
										e.forEach(function (e) {
											return t.add(e);
										}),
											(this.pullingHeight = Array(e.length).fill(0)),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.initHorizontalEdges = function (e) {
										void 0 === e && (e = !0);
										var t,
											n = e ? 1 : -1,
											r = this.size - this.smBoxSize;
										return (
											1 === n
												? (((t = h.PolygonCreator.Ins.joinRelativePro(
														[
															a.default.vector(0, 3 * -this.smBoxSize),
															a.default.vector(-this.smBoxSize, 0),
															a.default.vector(0, this.smBoxSize),
															a.default.vector(-r, 0),
															a.default.vector(0, this.smBoxSize),
															a.default.vector(r, 0),
															a.default.vector(0, this.smBoxSize),
															a.default.vector(this.smBoxSize, 0),
														],
														a.default.point(0, 2 * this.smBoxSize),
														!1,
												  ).edges)[3] = a.default.segment(
														a.default.point(),
														a.default.point(-this.size, 0),
												  )),
												  (t[5] = a.default.segment(
														a.default.point(-this.size, this.smBoxSize),
														a.default.point(0, this.smBoxSize),
												  )))
												: (((t = h.PolygonCreator.Ins.joinRelativePro(
														[
															a.default.vector(0, 3 * this.smBoxSize),
															a.default.vector(this.smBoxSize, 0),
															a.default.vector(0, -this.smBoxSize),
															a.default.vector(r, 0),
															a.default.vector(0, -this.smBoxSize),
															a.default.vector(-r, 0),
															a.default.vector(0, -this.smBoxSize),
															a.default.vector(-this.smBoxSize, 0),
														],
														a.default.point(0, 2 * -this.smBoxSize),
														!1,
												  ).edges)[3] = a.default.segment(
														a.default.point(),
														a.default.point(this.size, 0),
												  )),
												  (t[5] = a.default.segment(
														a.default.point(this.size, -this.smBoxSize),
														a.default.point(0, -this.smBoxSize),
												  ))),
											t
										);
									}),
									(t.prototype.initVerticalEdges = function (e) {
										void 0 === e && (e = !0);
										var t,
											n = e ? 1 : -1,
											r = this.size - this.smBoxSize;
										return (
											1 === n
												? (((t = h.PolygonCreator.Ins.joinRelativePro(
														[
															a.default.vector(3 * this.smBoxSize, 0),
															a.default.vector(0, -this.smBoxSize),
															a.default.vector(-this.smBoxSize, 0),
															a.default.vector(0, -r),
															a.default.vector(-this.smBoxSize, 0),
															a.default.vector(0, r),
															a.default.vector(-this.smBoxSize, 0),
															a.default.vector(0, this.smBoxSize),
														],
														a.default.point(2 * -this.smBoxSize, 0),
														!1,
												  ).edges)[3] = a.default.segment(
														a.default.point(),
														a.default.point(0, -this.size),
												  )),
												  (t[5] = a.default.segment(
														a.default.point(-this.smBoxSize, -this.size),
														a.default.point(-this.smBoxSize, 0),
												  )))
												: (((t = h.PolygonCreator.Ins.joinRelativePro(
														[
															a.default.vector(3 * -this.smBoxSize, 0),
															a.default.vector(0, this.smBoxSize),
															a.default.vector(this.smBoxSize, 0),
															a.default.vector(0, r),
															a.default.vector(this.smBoxSize, 0),
															a.default.vector(0, -r),
															a.default.vector(this.smBoxSize, 0),
															a.default.vector(0, -this.smBoxSize),
														],
														a.default.point(2 * this.smBoxSize, 0),
														!1,
												  ).edges)[3] = a.default.segment(
														a.default.point(),
														a.default.point(0, this.size),
												  )),
												  (t[5] = a.default.segment(
														a.default.point(this.smBoxSize, this.size),
														a.default.point(this.smBoxSize, 0),
												  ))),
											t
										);
									}),
									(t.prototype.frametify = function (e, t) {
										return new c.DoubleEarsFrametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									Object.defineProperty(t.prototype, 'flatTop', {
										get: function () {
											var e = this.edges[0];
											return !(
												this.earPosition !== s.Direction.Up ||
												!a.default.Utils.EQ_0(e.slope - Math.PI)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !this.flatTop;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = this.edges,
											s = a.default.line(o[n].start, o[n].end),
											l = a.default.line(s.pt.translate(r), s.norm);
										if (1 === n || 4 === n || 7 === n)
											o = e.prototype.dragEdge.call(this, n, r, i).edges;
										else if (0 === n) {
											var h = a.default.line(o[1].start, o[1].end).intersect(l)[0],
												c = a.default.line(o[3].start, o[3].end).intersect(l)[0],
												u = a.default.line(o[7].start, o[7].end).intersect(l)[0],
												p = a.default.line(o[5].start, o[5].end).intersect(l)[0];
											(o[0] = a.default.segment(u, h)),
												(o[1] = a.default.segment(h, o[1].end)),
												(o[3] = a.default.segment(c, o[3].end)),
												(o[5] = a.default.segment(o[5].start, p)),
												(o[7] = a.default.segment(o[7].start, u));
										} else if (2 === n)
											(h = a.default.line(o[1].start, o[1].end).intersect(l)[0]),
												(u = a.default.line(o[3].start, o[3].end).intersect(l)[0]),
												(o[1] = a.default.segment(o[1].start, h)),
												(o[2] = a.default.segment(h, u));
										else if (6 === n)
											(h = a.default.line(o[5].start, o[5].end).intersect(l)[0]),
												(u = a.default.line(o[7].start, o[7].end).intersect(l)[0]),
												(o[6] = a.default.segment(h, u)),
												(o[7] = a.default.segment(u, o[7].end));
										else if (3 === n) {
											var f = a.default.line(o[0].start, o[0].end).intersect(l)[0],
												d = a.default.line(o[2].start, o[2].end).intersect(l)[0],
												g = a.default.line(o[4].start, o[4].end).intersect(l)[0];
											(o[2] = a.default.segment(o[2].start, d)),
												(o[3] = a.default.segment(f, g)),
												(o[4] = a.default.segment(g, o[4].end));
										} else
											5 === n &&
												((f = a.default.line(o[0].start, o[0].end).intersect(l)[0]),
												(d = a.default.line(o[6].start, o[6].end).intersect(l)[0]),
												(g = a.default.line(o[4].start, o[4].end).intersect(l)[0]),
												(o[4] = a.default.segment(o[4].start, g)),
												(o[5] = a.default.segment(g, f)),
												(o[6] = a.default.segment(d, o[6].end)));
										var y = new t(this.position, this.earPosition, o);
										return (y.hasBase = this.hasBase), (y.pullingHeight = this.pullingHeight), y;
									}),
									(t.prototype.dragArc = function (e, t) {
										return this.dragEdge(e, t);
									}),
									(t.prototype.dragVertex = function (e, n, r, i) {
										if (
											(void 0 === i && (i = a.default.point()),
											this.earPosition === s.Direction.Up && (0 === e || 1 === e))
										) {
											var o = this.edges;
											n = n.projectionOn(a.default.vector(0, 1));
											var l = o[e].start.translate(n),
												h = o[3],
												c = o[5],
												u = a.default.line(h.start, h.end),
												p = a.default.line(c.start, c.end);
											0 === e
												? ((o[0] = a.default.segment(l, o[0].end)),
												  (o[7] = a.default.segment(o[7].start, l)))
												: 1 === e &&
												  ((o[0] = a.default.segment(o[0].start, l)),
												  (o[1] = a.default.segment(l, o[1].end)));
											var f = a.default.line(o[0].start, o[0].end),
												d = f.intersect(u)[0],
												g = f.intersect(p)[0];
											(o[3] = a.default.segment(d, h.end)), (o[5] = a.default.segment(c.start, g));
											var y = new t(this.position, this.earPosition, o);
											return (y.hasBase = this.hasBase), (y.pullingHeight = this.pullingHeight), y;
										}
										return this.dragEdge(e, n);
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[2] = {
												idx: 2,
												dimShow: !0,
											}),
											(t[3] = {
												idx: 3,
												dimShow: !0,
												mulHide: !0,
											}),
											(t[4] = {
												idx: 4,
												dimShow: !0,
											}),
											(t[5] = {
												idx: 5,
												dimShow: !1,
												mulHide: !0,
											}),
											(t[6] = {
												idx: 6,
												dimShow: !0,
											}),
											(t[7] = {
												idx: 7,
												dimShow: !0,
											}),
											t
										);
									}),
									(t.prototype.editDim = function (e, t, n) {
										return this.flatTop
											? this.dragEdge(e, n)
											: 0 === e
											? this.dragVertex(0, n, !1)
											: 2 === e
											? this.dragVertex(1, n.invert(), !1)
											: this.dragEdge(e, n);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: p.EventType.double_ears_frame_settings,
											payload: new p.DoubleEarsFrameSettings(e, e.view),
										});
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[3];
										this.toMulCCBar(t),
											(t.connectCount =
												e[3].epDock.etDock.type === f.DockType.None &&
												e[4].epDock.stDock.type === f.DockType.None
													? 2
													: 3),
											(t.dockCount = e[3].epDock.etDock.type === f.DockType.Frame ? 2 : 1);
										var n = e[5];
										this.toMulCCBar(n),
											(n.connectCount =
												e[4].epDock.etDock.type === f.DockType.None &&
												e[5].epDock.stDock.type === f.DockType.None
													? 2
													: 3),
											(n.dockCount = e[5].epDock.stDock.type === f.DockType.Frame ? 2 : 1);
									}),
									Object.defineProperty(t.prototype, 'asMulEdgeIndexes', {
										get: function () {
											return [3, 5];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.updatePullingHeightLabel = function (e) {
										var t = this.pullingHeight[4];
										!this.hasBase &&
											t &&
											((e.text = l.DrawParams.Ins.lang('pulling_height') + t.toString()),
											(e.position = this.edge(4).middle()),
											(e.position = e.position.translate(
												a.default.vector(0, (0.75 * e.fontSize) / 2 - t),
											))),
											(e.hidden = !t),
											e.updatePoly();
									}),
									(t.prototype.pullingHeightMigration = function (e, t) {
										var n = this.pullingHeight[4];
										if (!this.hasBase && n) {
											var r = this.edges,
												i = new u.WinPolygon(
													h.PolygonCreator.Ins.joinPointsWithSegment([
														r[3].start,
														r[3].end,
														r[5].start,
														r[5].end,
													]),
												),
												o = e.splitter.subs
													.filter(function (e) {
														return !e.IsMullion && i.contains(e.box.center);
													})
													.sort(function (e, t) {
														return e.polygon.box.ymax - t.polygon.box.ymax;
													})
													.pop();
											o &&
												(e.splitter.setPullingHeight(o.polyId, n),
												t.setVirtual(new f.PolyId(4, -1), !0),
												(this.pullingHeight[4] = 0),
												(this.hasBase = !0));
										}
									}),
									t
								);
							})(u.WinPolygon);
						t.DoubleEarsPolygon = d;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DescriptivePolygonPoints = void 0);
						var i = r(n(0)),
							o = n(9),
							a = n(2),
							s = (function () {
								function e() {
									(this.vertexIndex = -1),
										(this.vertex = i.default.point()),
										(this.type = ''),
										(this.nextPtIndex = -1),
										(this.prevPtIndex = -1),
										(this.controlPoint = i.default.point()),
										(this.ccw = !1);
								}
								return (
									(e.prototype.clone = function () {
										var t = new e();
										return (
											(t.vertexIndex = this.vertexIndex),
											(t.vertex = this.vertex),
											(t.type = this.type),
											(t.nextPtIndex = this.nextPtIndex),
											(t.prevPtIndex = this.prevPtIndex),
											(t.controlPoint = this.controlPoint.clone()),
											(t.ccw = this.ccw),
											t
										);
									}),
									e
								);
							})(),
							l = (function () {
								function e(e) {
									var t = this;
									(this.polygon = e), (this.vertexes = []), (this.relationData = []);
									var n = e.edges,
										r = n.length;
									if (r < 3) throw new Error('edge cannot be smaller than 3');
									n.forEach(function (e, n) {
										t.vertexes.push(e.start.clone());
										var o = new s();
										if (
											((o.vertexIndex = n),
											(o.vertex = e.ps),
											(o.prevPtIndex = (n - 1 + r) % r),
											(o.nextPtIndex = (n + 1) % r),
											e instanceof i.default.Arc)
										)
											(o.type = 'arc'), (o.controlPoint = e.middle()), (o.ccw = e.counterClockwise);
										else {
											if (!(e instanceof i.default.Segment))
												throw new Error('unknown edge type1,DescriptivePolygonPoints');
											(o.type = 'segment'), (o.controlPoint = e.middle());
										}
										t.relationData.push(o);
									});
								}
								return (
									(e.prototype.buildWinEdges = function () {
										var e = this,
											t = [];
										return (
											this.relationData.forEach(function (n, r, a) {
												if ('segment' === n.type) {
													var s = n.vertexIndex,
														l = n.nextPtIndex;
													t.push(i.default.segment(e.vertexes[s], e.vertexes[l]));
												} else {
													if ('arc' !== n.type)
														throw new Error('unknown edge type2,DescriptivePolygonPoints');
													(s = n.vertexIndex), (l = n.nextPtIndex);
													var h = n.controlPoint,
														c = n.ccw,
														u = o.ArcUtils.CreateArcFrom3Points(e.vertexes[s], e.vertexes[l], h);
													(u.counterClockwise = c),
														i.default.Utils.GE(u.startAngle, 2 * Math.PI) &&
															(u.startAngle -= 2 * Math.PI),
														i.default.Utils.LE(u.startAngle, 2 * -Math.PI) &&
															(u.startAngle += 2 * Math.PI),
														i.default.Utils.GE(u.endAngle, 2 * Math.PI) &&
															(u.endAngle -= 2 * Math.PI),
														i.default.Utils.LE(u.endAngle, 2 * -Math.PI) &&
															(u.endAngle += 2 * Math.PI),
														t.push(u);
												}
											}),
											t
										);
									}),
									(e.prototype.lineMirror = function (e, t, n, r) {
										var o = this;
										void 0 === n && (n = !1), void 0 === r && (r = !1);
										var s = i.default.line(e, t);
										if (2 !== this.polygon.intersect(s).length)
											throw new Error('mirror type not support2');
										var l = this.vertexes.length,
											h = this.vertexes.findIndex(function (e, t) {
												var n = o.vertexes[(t - 1 + l) % l];
												return !n.leftTo(s) && !n.on(s) && (e.leftTo(s) || e.on(s));
											});
										if (-1 === h) throw new Error('startPt not found');
										var c = this.vertexes.findIndex(function (e, t) {
											var n = o.vertexes[(t + 1) % l];
											return !n.leftTo(s) && !n.on(s) && (e.leftTo(s) || e.on(s));
										});
										if (-1 === c) throw new Error('endPt not found');
										if (c === h) throw new Error('startPt equals to endPt');
										var u = 2 * (c > h ? c - h + 1 : c + l - h + 1);
										if ((this.vertexes[h].on(s) && u--, this.vertexes[c].on(s) && u--, u !== l))
											throw new Error('mirror type not support1');
										var p,
											f = (c + 1) % l,
											d = 0,
											g = 0;
										for (this.vertexes[c].on(s) && (g = 1); f !== h; )
											(this.vertexes[f] = a.Utils.mirrorLine(
												this.vertexes[(c + l - d - g) % l],
												s,
											)),
												d++,
												(f = (f + 1) % l);
										for (f = (c + 1) % l, d = 0; f !== h; ) {
											var y = this.relationData[(c - 1 + l - d - g) % l];
											((p = this.relationData[f]).controlPoint = a.Utils.mirrorLine(
												y.controlPoint,
												s,
											)),
												(p.type = y.type),
												(p.ccw = y.ccw),
												d++,
												(f = (f + 1) % l);
										}
										this.vertexes[c].on(s) &&
											((y = this.relationData[(c - 1 + l) % l]),
											((p = this.relationData[c]).controlPoint = a.Utils.mirrorLine(
												y.controlPoint,
												s,
											)),
											(p.type = y.type),
											(p.ccw = y.ccw));
									}),
									e
								);
							})();
						t.DescriptivePolygonPoints = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DiamondPoly = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(7),
							h = n(2),
							c = n(16),
							u = (function (e) {
								function t(n, r, i, o) {
									var a = e.call(this, o || t.create(n, r, i)) || this;
									return (a.cpt = n), (a.width = r), (a.height = i), a;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t, n) {
										return c.PolygonCreator.Ins.joinRelative(e, [
											a.default.vector(0, -n / 2),
											a.default.vector(t / 2, n / 2),
											a.default.vector(-t / 2, n / 2),
											a.default.vector(-t / 2, -n / 2),
										]).edges;
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.width, this.height, []);
									}),
									(t.prototype.scale = function (t) {
										return (this.width *= t), (this.height *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = c.PolyType.diamond),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											(t.height = this.height),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.cpt,
											o = a.default.vector(i, r),
											s = a.default.vector(i, r.translate(n)),
											l = s.projectionOn(o),
											h = 1;
										if (!l.normalize().equalTo(o.normalize()))
											throw new Error('drag reverse not support');
										h = Math.sqrt(s.x * s.x + s.y * s.y) / Math.sqrt(o.x * o.x + o.y * o.y);
										var c = this.edges;
										return (
											c.forEach(function (e, t) {
												c[t] = e
													.translate(-i.x, -i.y)
													.transform(a.default.matrix(h, 0, 0, h, 0, 0))
													.translate(i.x, i.y);
											}),
											new t(this.cpt, this.width, this.height, c)
										);
									}),
									(t.prototype.dragVertex = function (e, n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = this.edges[e].start,
											s = o.translate(n);
										return (
											a.default.Utils.EQ_0(this.cpt.x - o.x)
												? (this.height = 2 * Math.abs(this.cpt.y - s.y))
												: (this.width = 2 * Math.abs(this.cpt.x - s.x)),
											new t(this.cpt, this.width, this.height)
										);
									}),
									(t.prototype.dragArc = function (e, n) {
										var r = this.edges,
											i = r[e],
											o = i.middle().translate(n),
											c = a.default.line(i.start, i.end).distanceTo(o)[0];
										if (
											c > l.DrawParams.Ins.arcDummy ||
											(i instanceof a.default.Segment && c > 1)
										) {
											var u = s.ArcUtils.CreateArcFrom3Points(i.start, i.end, o),
												p = a.default.line(i.start, i.end),
												f = u.middle().distanceTo(p)[0];
											(f = u.middle().leftTo(p) ? -f : f),
												r.forEach(function (e, t) {
													var n = a.default.segment(e.start, e.end),
														i = a.default.line(n.middle(), n.tangentInStart()),
														o = h.Utils.lineDirPt(i, f, i.pt);
													r[t] = s.ArcUtils.CreateArcFrom3Points(e.start, e.end, o);
												});
										} else
											r.forEach(function (e, t) {
												r[t] = a.default.segment(e.start, e.end);
											});
										return new t(this.cpt, this.width, this.height, r);
									}),
									(t.prototype.initDimInfo = function () {
										return this.edges.map(function (e, t) {
											return {
												idx: t,
												dimShow: 0 === t,
											};
										});
									}),
									(t.prototype.editDim = function (e, t, n) {
										return this.transform(a.default.matrix(t, 0, 0, t, 0, 0));
									}),
									t
								);
							})(c.WinPolygon);
						t.DiamondPoly = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.TrapezoidPoly = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(9),
							h = n(6),
							c = n(16),
							u = (function (e) {
								function t(n, r, i, o, a, l) {
									void 0 === r && (r = s.Direction.Up),
										void 0 === i && (i = 1440),
										void 0 === o && (o = 1e3),
										void 0 === a && (a = 1880);
									var h = e.call(this, l || t.create(n, i, o, a, r)) || this;
									return (
										(h.cpt = n),
										(h.direction = r),
										(h.width = i),
										(h.leftHeight = o),
										(h.rightHeight = a),
										h
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'cutAnglesCount', {
										get: function () {
											return 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, n, r, i, o) {
										var s = c.PolygonCreator.Ins.joinRelativePro([
												a.default.vector(0, r),
												a.default.vector(n, 0),
												a.default.vector(0, -i),
											]),
											l = s.box.center.clone();
										return (
											s.translate(a.default.vector(l, e)),
											(l = s.box.center.clone()),
											s.rotate(t.angleByDirection(o), l),
											s.edges
										);
									}),
									(t.angleByDirection = function (e) {
										return new Map([
											[s.Direction.Left, -Math.PI / 2],
											[s.Direction.Up, 0],
											[s.Direction.Right, Math.PI / 2],
											[s.Direction.Down, Math.PI],
										]).get(e);
									}),
									(t.prototype.turnTo = function (e) {
										var n = t.angleByDirection(this.direction),
											r = t.angleByDirection(e),
											i = this.box.center.clone();
										this.rotate(r - n, i), (this.direction = e);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 4; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (t[2].dimShow = !0), t;
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i,
											o,
											l = this.edges;
										switch (this.direction) {
											case s.Direction.Up:
												(i = 3), (o = 1);
												break;
											case s.Direction.Left:
												(i = 2), (o = 0);
												break;
											case s.Direction.Down:
												(i = 1), (o = 3);
												break;
											default:
												(i = 0), (o = 2);
										}
										var h = e === i || e === o ? a.default.vector(0, 1) : a.default.vector(1, 0);
										return (
											(l[e] = l[e].translate(n.projectionOn(h))),
											this.reIntersect(l),
											(this.leftHeight = l[0].length),
											(this.rightHeight = l[2].length),
											(this.width = l[1].length),
											new t(
												this.cpt,
												this.direction,
												this.width,
												this.leftHeight,
												this.rightHeight,
												l,
											)
										);
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return void 0 === r && (r = a.default.point()), this;
									}),
									(t.prototype.editDim = function (e, n, r) {
										var i = this.edges,
											o = a.default.vector();
										if (2 === e)
											(o = r),
												(i[2] = i[2].translate(o)),
												(i[3] = a.default.segment(i[2].end, i[3].end)),
												this.reIntersect(i);
										else if (3 === e)
											(o = r),
												(i[3] = a.default.segment(i[3].start.translate(o), i[3].end)),
												l.Frametify.edgeIntersection(i, 2);
										else if (1 === e) {
											o = r.invert();
											var s = i[0].start.translate(o);
											(i[0] = a.default.segment(s, i[0].end)),
												(i[3] = a.default.segment(i[3].start, s)),
												l.Frametify.edgeIntersection(i, 0);
										}
										return (
											(this.leftHeight = i[0].length),
											(this.rightHeight = i[2].length),
											(this.width = i[1].length),
											new t(
												this.cpt,
												this.direction,
												this.width,
												this.leftHeight,
												this.rightHeight,
												i,
											)
										);
									}),
									(t.prototype.scale = function (t) {
										return (
											(this.width *= t),
											(this.leftHeight *= t),
											(this.rightHeight *= t),
											e.prototype.scale.call(this, t)
										);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = c.PolyType.trapezoid),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											(t.leftHeight = this.leftHeight),
											(t.rightHeight = this.rightHeight),
											(t.direction = this.direction),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype._clone = function () {
										return new t(
											this.cpt.clone(),
											this.direction,
											this.width,
											this.leftHeight,
											this.rightHeight,
											[],
										);
									}),
									(t.prototype.reIntersect = function (e) {
										for (var t = 0; t < e.length; t++) l.Frametify.edgeIntersection(e, t);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: h.EventType.trapezoid_frame_settings,
											payload: new h.TrapezoidFrameSettings(e, e.view),
										});
									}),
									t
								);
							})(c.WinPolygon);
						t.TrapezoidPoly = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HollowSidePoly = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(16),
							h = (function (e) {
								function t(n, r, i, o, a) {
									void 0 === r && (r = s.Direction.Right),
										void 0 === i && (i = 2400),
										void 0 === o && (o = 1600);
									var l = e.call(this, a || t.create(n, r, i, o)) || this;
									return (l.cpt = n), (l.direction = r), (l.width = i), (l.height = o), l;
								}
								return (
									i(t, e),
									(t.create = function (e, t, n, r) {
										var i,
											o = r / 2.5;
										switch (t) {
											case s.Direction.Down:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(-n, 0),
													a.default.vector(0, r),
													a.default.vector(n - o, 0),
													a.default.vector(0, -o),
													a.default.vector(o, 0),
												]);
												break;
											case s.Direction.Left:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(0, -r),
													a.default.vector(-n, 0),
													a.default.vector(0, r - o),
													a.default.vector(o, 0),
													a.default.vector(0, o),
												]);
												break;
											case s.Direction.Up:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(0, r),
													a.default.vector(-n, 0),
													a.default.vector(0, -(r - o)),
													a.default.vector(o, 0),
													a.default.vector(0, -o),
												]);
												break;
											default:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(0, r),
													a.default.vector(n, 0),
													a.default.vector(0, -(r - o)),
													a.default.vector(-o, 0),
													a.default.vector(0, -o),
												]);
										}
										return i.translate(a.default.vector(i.box.center.clone(), e)), i.edges;
									}),
									(t.prototype.scale = function (t) {
										return (this.width *= t), (this.height *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.type = l.PolyType.hollowSize), (t.cpt = this.cpt.toJSON()), t;
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.direction, this.width, this.height, []);
									}),
									t
								);
							})(l.WinPolygon);
						t.HollowSidePoly = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HollowPoly = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(16),
							h = (function (e) {
								function t(n, r, i, o, a) {
									void 0 === r && (r = s.Direction.Up),
										void 0 === i && (i = 2400),
										void 0 === o && (o = 1600);
									var l = e.call(this, a || t.create(n, r, i, o)) || this;
									return (l.cpt = n), (l.direction = r), (l.width = i), (l.height = o), l;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'cutAnglesCount', {
										get: function () {
											return 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hollowDistance', {
										get: function () {
											return this.edges[7].length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hollowCenterDistance', {
										get: function () {
											return this.hollowDistance + this.hollowSize / 2;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hollowSize', {
										get: function () {
											return this.edges[5].length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'bottomSize', {
										get: function () {
											return this.edges[1].length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.moveHollow = function (e, t) {
										t = t || this;
										var n = this.edges[1].tangentInStart();
										return (t = t.dragEdge(6, n.multiply(e))).dragEdge(4, n.multiply(e));
									}),
									(t.create = function (e, t, n, r) {
										var i,
											o = r / 2.5,
											h = (n - o) / 2;
										if (t === s.Direction.Left || t === s.Direction.Right) {
											var c = n;
											(n = r), (r = c);
										}
										switch (t) {
											case s.Direction.Down:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(0, -r),
													a.default.vector(-n, 0),
													a.default.vector(0, r),
													a.default.vector(h, 0),
													a.default.vector(0, -o),
													a.default.vector(o, 0),
													a.default.vector(0, o),
												]);
												break;
											case s.Direction.Left:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(n, 0),
													a.default.vector(0, -r),
													a.default.vector(-n, 0),
													a.default.vector(0, h),
													a.default.vector(o, 0),
													a.default.vector(0, o),
													a.default.vector(-o, 0),
												]);
												break;
											case s.Direction.Up:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(0, r),
													a.default.vector(n, 0),
													a.default.vector(0, -r),
													a.default.vector(-h, 0),
													a.default.vector(0, o),
													a.default.vector(-o, 0),
													a.default.vector(0, -o),
												]);
												break;
											default:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(-n, 0),
													a.default.vector(0, r),
													a.default.vector(n, 0),
													a.default.vector(0, -h),
													a.default.vector(-o, 0),
													a.default.vector(0, -o),
													a.default.vector(o, 0),
												]);
										}
										return i.translate(a.default.vector(i.box.center.clone(), e)), i.edges;
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.type = l.PolyType.hollow), (t.cpt = this.cpt.toJSON()), t;
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.editDim = function (e, n, r) {
										var i = this;
										if (2 === e) {
											var o = this.hollowCenterDistance / this.bottomSize,
												a = this.bottomSize * n * o - this.hollowSize / 2 - this.hollowDistance;
											(i = this.dragEdge(e, r)), (i = this.moveHollow(a, i));
										} else
											0 === e
												? ((a = this.hollowDistance * (n - 1)), (i = this.moveHollow(a)))
												: 4 === e
												? ((a = -this.edge(3).length * (n - 1)), (i = this.moveHollow(a)))
												: 3 === e
												? ((e = 1), (r = r.invert()), (i = this.dragEdge(e, r)))
												: 7 === e
												? ((e = 5), (r = r.invert()), (i = this.dragEdge(e, r)))
												: (i = this.dragEdge(e, r));
										var s = i.edges;
										return (
											(this.width = s[1].length),
											(this.height = s[0].length),
											new t(this.cpt, this.direction, this.width, this.height, s)
										);
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.direction, this.width, this.height, []);
									}),
									t
								);
							})(l.WinPolygon);
						t.HollowPoly = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ConvexPoly = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(16),
							h = (function (e) {
								function t(n, r, i, o, a) {
									void 0 === r && (r = s.Direction.Up),
										void 0 === i && (i = 2400),
										void 0 === o && (o = 1600);
									var l = e.call(this, a || t.create(n, r, i, o)) || this;
									return (l.cpt = n), (l.direction = r), (l.width = i), (l.height = o), l;
								}
								return (
									i(t, e),
									(t.create = function (e, t, n, r) {
										var i,
											o = r / 2,
											h = 2 * o,
											c = (n - h) / 2;
										if (t === s.Direction.Left || t === s.Direction.Right) {
											var u = n;
											(n = r), (r = u);
										}
										switch (t) {
											case s.Direction.Down:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(0, -r),
													a.default.vector(-n, 0),
													a.default.vector(0, r),
													a.default.vector(c, 0),
													a.default.vector(0, o),
													a.default.vector(h, 0),
													a.default.vector(0, -o),
												]);
												break;
											case s.Direction.Left:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(n, 0),
													a.default.vector(0, -r),
													a.default.vector(-n, 0),
													a.default.vector(0, c),
													a.default.vector(-o, 0),
													a.default.vector(0, h),
													a.default.vector(o, 0),
												]);
												break;
											case s.Direction.Up:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(0, r),
													a.default.vector(n, 0),
													a.default.vector(0, -r),
													a.default.vector(-c, 0),
													a.default.vector(0, -o),
													a.default.vector(-h, 0),
													a.default.vector(0, o),
												]);
												break;
											default:
												i = l.PolygonCreator.Ins.joinRelativePro([
													a.default.vector(-n, 0),
													a.default.vector(0, r),
													a.default.vector(n, 0),
													a.default.vector(0, -c),
													a.default.vector(o, 0),
													a.default.vector(0, -h),
													a.default.vector(-o, 0),
												]);
										}
										return i.translate(a.default.vector(i.box.center.clone(), e)), i.edges;
									}),
									Object.defineProperty(t.prototype, 'cutAnglesCount', {
										get: function () {
											return 2;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.type = l.PolyType.convex), (t.cpt = this.cpt.toJSON()), t;
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.direction, this.width, this.height, []);
									}),
									t
								);
							})(l.WinPolygon);
						t.ConvexPoly = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.RegularPoly = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(7),
							h = n(2),
							c = n(6),
							u = n(16),
							p = (function (e) {
								function t(n, r, i, o) {
									var a = e.call(this, o || t.create(n, r, i)) || this;
									return (a.cpt = n), (a.radius = r), (a.edgeCount = i), a;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t, n) {
										if (n < 3) throw new Error('edgeCount must be greater than 2');
										var r = [],
											i = (2 * Math.PI) / n,
											o = a.default.point(0, -t);
										r.push(n % 2 ? o : o.rotate(-i / 2));
										for (var s = 1; s < n; s++) r.push(r[0].rotate(s * i));
										var l = u.PolygonCreator.Ins.joinPointsWithSegment(r);
										return (
											l.forEach(function (t, n) {
												return (l[n] = t.translate(a.default.vector(e.x, e.y)));
											}),
											l
										);
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.radius, this.edgeCount, []);
									}),
									(t.prototype.scale = function (t) {
										return (this.radius *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = u.PolyType.regular),
											(t.cpt = this.cpt.toJSON()),
											(t.radius = this.radius),
											(t.edgeCount = this.edgeCount),
											t
										);
									}),
									(t.prototype.changeEdgesCount = function (e) {
										return new t(this.cpt.clone(), this.radius, e);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.cpt,
											o = a.default.vector(i, r),
											s = a.default.vector(i, r.translate(n)),
											l = s.projectionOn(o),
											h = 1;
										if (!l.normalize().equalTo(o.normalize()))
											throw new Error('drag reverse not support');
										h = Math.sqrt(s.x * s.x + s.y * s.y) / Math.sqrt(o.x * o.x + o.y * o.y);
										var c = this.edges;
										return (
											c.forEach(function (e, t) {
												c[t] = e
													.translate(-i.x, -i.y)
													.transform(a.default.matrix(h, 0, 0, h, 0, 0))
													.translate(i.x, i.y);
											}),
											new t(this.cpt.clone(), this.radius, this.edgeCount, c)
										);
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return void 0 === r && (r = a.default.point()), this.dragEdge(e, t, r);
									}),
									(t.prototype.dragArc = function (e, n) {
										var r = this.edges,
											i = r[e],
											o = i.middle().translate(n),
											c = a.default.line(i.start, i.end).distanceTo(o)[0];
										if (
											c > l.DrawParams.Ins.arcDummy ||
											(i instanceof a.default.Segment && c > 1)
										) {
											var u = s.ArcUtils.CreateArcFrom3Points(i.start, i.end, o),
												p = a.default.line(i.start, i.end),
												f = u.middle().distanceTo(p)[0];
											(f = u.middle().leftTo(p) ? -f : f),
												r.forEach(function (e, t) {
													var n = a.default.segment(e.start, e.end),
														i = a.default.line(n.middle(), n.tangentInStart()),
														o = h.Utils.lineDirPt(i, f, i.pt);
													r[t] = s.ArcUtils.CreateArcFrom3Points(e.start, e.end, o);
												});
										} else
											r.forEach(function (e, t) {
												r[t] = a.default.segment(e.start, e.end);
											});
										return new t(this.cpt.clone(), this.radius, this.edgeCount, r);
									}),
									(t.prototype.initDimInfo = function () {
										return this.edges.map(function (e, t) {
											return {
												idx: t,
												dimShow: 0 === t,
											};
										});
									}),
									(t.prototype.editDim = function (e, t, n) {
										return this.transform(a.default.matrix(t, 0, 0, t, 0, 0));
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: c.EventType.regular_frame_settings,
											payload: new c.RegularFrameSettings(e, e.view),
										});
									}),
									t
								);
							})(u.WinPolygon);
						t.RegularPoly = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.QuatrefoilPoly = void 0);
						var a = o(n(0)),
							s = n(16),
							l = (function (e) {
								function t(n, r, i) {
									var o = e.call(this, i || t.create(n, r)) || this;
									return (o.cpt = n), (o.rectWidth = r), o;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t) {
										var n = ((t / 5) * 3) / 2,
											r = (t - 2 * n) / 2;
										return s.PolygonCreator.Ins.joinAbsolute(e, [
											a.default.vector(-t / 2, -t / 2),
											a.default.vector(-t / 2, -t / 2 + r),
											a.default.arc(
												e.translate(a.default.vector(-t / 2, 0)),
												n,
												1.5 * Math.PI,
												Math.PI / 2,
												!1,
											),
											a.default.vector(-t / 2, t / 2 - r),
											a.default.vector(-t / 2, t / 2),
											a.default.vector(-t / 2 + r, t / 2),
											a.default.arc(e.translate(a.default.vector(0, t / 2)), n, Math.PI, 0, !1),
											a.default.vector(t / 2 - r, t / 2),
											a.default.vector(t / 2, t / 2),
											a.default.vector(t / 2, t / 2 - r),
											a.default.arc(
												e.translate(a.default.vector(t / 2, 0)),
												n,
												Math.PI / 2,
												1.5 * Math.PI,
												!1,
											),
											a.default.vector(t / 2, -t / 2 + r),
											a.default.vector(t / 2, -t / 2),
											a.default.vector(t / 2 - r, -t / 2),
											a.default.arc(e.translate(a.default.vector(0, -t / 2)), n, 0, Math.PI, !1),
										]).edges;
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.rectWidth, []);
									}),
									(t.prototype.scale = function (t) {
										return (this.rectWidth *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = s.PolyType.quatrefoil),
											(t.cpt = this.cpt.toJSON()),
											(t.rectWidth = this.rectWidth),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (e, n) {
										var r = this.edges[e].translate(n),
											i = this.cpt.distanceTo(this.edges[e])[0],
											o = this.cpt.distanceTo(r)[0];
										if (a.default.Utils.EQ_0(i)) return new t(this.cpt, this.rectWidth);
										var s = o / i;
										return new t(this.cpt, this.rectWidth * s);
									}),
									(t.prototype.dragVertex = function (e, t, n) {
										return this.dragEdge(e, t);
									}),
									(t.prototype.dragArc = function (e, t) {
										return this.dragEdge(e, t);
									}),
									(t.prototype.editDim = function (e, t, n) {
										return this.transform(a.default.matrix(t, 0, 0, t, 0, 0));
									}),
									(t.prototype.initDimInfo = function () {
										return this.edges.map(function (e, t) {
											return {
												idx: t,
												dimShow: [8, 10].some(function (e) {
													return e === t;
												}),
											};
										});
									}),
									t
								);
							})(s.WinPolygon);
						t.QuatrefoilPoly = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SpringlinePoly = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(16),
							h = (function (e) {
								function t(n, r, i, o, a) {
									var s = e.call(this, a || t.create(n, r, i, o)) || this;
									return (s.cpt = n), (s.width = r), (s.height = i), (s.arcHeight = o), s;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.initPoly = function () {
										this.ctlRobs.set(0, {
											arc: !1,
											endpoint: !0,
										}),
											this.ctlRobs.set(1, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(2, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(3, {
												arc: !0,
												endpoint: !0,
											});
									}),
									(t.create = function (e, t, n, r) {
										return l.PolygonCreator.Ins.joinRelativePro(
											[
												a.default.vector(0, n),
												a.default.vector(t, 0),
												a.default.vector(0, -n),
												[a.default.vector(-t, 0), -r],
											],
											e.translate(a.default.vector(-t / 2, -n / 2)),
											!1,
										).edges;
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.width, this.height, this.arcHeight, []);
									}),
									(t.prototype.scale = function (t) {
										return (this.height *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.springline),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											(t.height = this.height),
											(t.arcHeight = this.arcHeight),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										try {
											if (2 === n) {
												var o = a.default.vector(-r.x, r.y),
													s = e.prototype.dragEdge.call(this, n, r, i);
												((c = new l.DescriptivePolygonPoints(s)).vertexes[0].x =
													c.vertexes[0].x + o.x),
													(c.vertexes[0].y = c.vertexes[3].y),
													(c.vertexes[1].x = c.vertexes[1].x + o.x),
													(c.vertexes[1].y = c.vertexes[2].y);
												var h = c.buildWinEdges();
												return new t(this.cpt, this.width, this.height, this.arcHeight, h);
											}
											var c;
											return 0 === n
												? ((o = a.default.vector(-r.x, r.y)),
												  (s = e.prototype.dragEdge.call(this, n, r, i)),
												  ((c = new l.DescriptivePolygonPoints(s)).vertexes[2].x =
														c.vertexes[2].x + o.x),
												  (c.vertexes[2].y = c.vertexes[1].y),
												  (c.vertexes[3].x = c.vertexes[3].x + o.x),
												  (c.vertexes[3].y = c.vertexes[0].y),
												  (h = c.buildWinEdges()),
												  new t(this.cpt, this.width, this.height, this.arcHeight, h))
												: ((h = e.prototype.dragEdge.call(this, n, r, i).edges),
												  new t(this.cpt, this.width, this.height, this.arcHeight, h));
										} catch (e) {
											return console.warn(('' + e).split(/\r?\n/)[0]), this;
										}
									}),
									(t.prototype.dragVertex = function () {
										return this;
									}),
									(t.prototype.dragArc = function (n, r) {
										var i = e.prototype.dragArc.call(this, n, r);
										return new t(this.cpt, this.width, this.height, this.arcHeight, i.edges);
									}),
									(t.prototype.editDim = function (e, n, r) {
										var i = this.edge(3),
											o = new l.DescriptivePolygonPoints(this),
											h = o.vertexes.length;
										(o.vertexes[e].x = o.vertexes[e].x + r.x),
											(o.vertexes[e].y = o.vertexes[e].y + r.y),
											(o.vertexes[(e + 1) % h].x = o.vertexes[(e + 1) % h].x + r.x),
											(o.vertexes[(e + 1) % h].y = o.vertexes[(e + 1) % h].y + r.y);
										var c = o.buildWinEdges();
										return (
											i instanceof a.default.Arc &&
												(i.start.equalTo(c[3].start)
													? i.end.equalTo(c[3].end) ||
													  (c[3] = s.ArcUtils.getArcWithSameChord(i, c[3].end, !1))
													: (c[3] = s.ArcUtils.getArcWithSameChord(i, c[3].start, !0))),
											new t(this.cpt, this.width, this.height, this.arcHeight, c)
										);
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[3] = {
												idx: 3,
												dimShow: !0,
											}),
											t
										);
									}),
									t
								);
							})(l.WinPolygon);
						t.SpringlinePoly = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.GothicPoly = void 0);
						var a = o(n(0)),
							s = n(16),
							l = (function (e) {
								function t(n, r, i) {
									var o = e.call(this, i || t.create(n, r)) || this;
									return (o.cpt = n), (o.radius = r), o;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t) {
										var n = (Math.PI / 180) * 45,
											r = t - t * Math.cos(n),
											i = e.translate(a.default.vector(0, (t * Math.sin(n)) / 3)),
											o = i.translate(a.default.vector(r - t, 0)),
											l = i.translate(a.default.vector(t - r, 0));
										return s.PolygonCreator.Ins.joinAbsolute(
											i,
											[
												a.default.arc(l, t, Math.PI + n, Math.PI, !1),
												a.default.vector(-r, 0),
												a.default.vector(r, 0),
												a.default.arc(o, t, 0, -n, !1),
											],
											!1,
										).edges;
									}),
									(t.prototype.scale = function (t) {
										return (this.radius *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.radius, []);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = s.PolyType.gothic),
											(t.cpt = this.cpt.toJSON()),
											(t.radius = this.radius),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										try {
											var o = 0;
											if ((0 === n && (o = 2), 0 === n || 2 === n)) {
												var s = a.default.vector(-r.x, r.y),
													l = e.prototype.dragEdge.call(this, n, r, i).dragEdge(o, s, i);
												return new t(this.cpt, this.radius, l.edges);
											}
											var h = e.prototype.dragEdge.call(this, n, r, i).edges;
											return new t(this.cpt, this.radius, h);
										} catch (e) {
											return console.warn(('' + e).split(/\r?\n/)[0]), this;
										}
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return (
											void 0 === r && (r = a.default.point()),
											1 === e && (e = 0),
											this.dragEdge(e, t, r)
										);
									}),
									(t.prototype.dragArc = function (n, r) {
										if (1 === n) {
											var i = e.prototype.dragArc.call(this, n, r);
											return new t(this.cpt, this.radius, i.edges);
										}
										var o = 0;
										0 === n && (o = 2);
										var s = a.default.vector(-r.x, r.y),
											l = e.prototype.dragArc.call(this, n, r).dragArc(o, s);
										return new t(this.cpt, this.radius, l.edges);
									}),
									(t.prototype.editDim = function (e, t, n) {
										return this.transform(a.default.matrix(t, 0, 0, t, 0, 0));
									}),
									t
								);
							})(s.WinPolygon);
						t.GothicPoly = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.QuarterCirclePoly = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(16),
							h = (function (e) {
								function t(n, r, i, o) {
									void 0 === i && (i = s.Direction.Right);
									var a = e.call(this, o || t.create(n, r, i)) || this;
									return (a.position = n), (a.radius = r), (a.direction = i), a;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t, n) {
										var r,
											i = [];
										return (
											n === s.Direction.Left
												? ((r = e.translate(a.default.vector(t, t))),
												  (i = l.PolygonCreator.Ins.joinRelative(
														e,
														[
															a.default.vector(t, -t),
															a.default.vector(0, 2 * t),
															a.default.vector(2 * -t, 0),
															a.default.arc(r, 2 * t, Math.PI, (Math.PI / 2) * 3, !0),
														],
														!1,
												  ).edges))
												: ((r = e.translate(a.default.vector(-t, t))),
												  (i = l.PolygonCreator.Ins.joinRelative(
														e,
														[
															a.default.vector(-t, -t),
															a.default.vector(0, 2 * t),
															a.default.vector(2 * t, 0),
															a.default.arc(r, 2 * t, 0, -Math.PI / 2, !1),
														],
														!1,
												  ).edges)),
											i
										);
									}),
									(t.prototype.scale = function (t) {
										return (this.radius *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype._clone = function () {
										return new t(this.position.clone(), this.radius, this.direction, []);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.quarterCircle),
											(t.position = this.position.toJSON()),
											(t.radius = this.radius),
											(t.dir = this.direction),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t),
											(this.position = this.position.translate(t)),
											this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n),
											(this.position = this.position.rotate(t, n)),
											this
										);
									}),
									(t.prototype.resize = function (e, n) {
										var r = e || n;
										return (
											(this.radius = r ? r / 2 : this.radius),
											new t(this.position, this.radius, this.direction)
										);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.position,
											o = a.default.vector(i, r),
											s = a.default.vector(i, r.translate(n)),
											l = s.projectionOn(o),
											h = 1;
										if (!l.normalize().equalTo(o.normalize()))
											throw new Error('drag reverse not support');
										h = Math.sqrt(s.x * s.x + s.y * s.y) / Math.sqrt(o.x * o.x + o.y * o.y);
										var c = this.edges;
										return (
											c.forEach(function (e, t) {
												c[t] = e
													.translate(-i.x, -i.y)
													.transform(a.default.matrix(h, 0, 0, h, 0, 0))
													.translate(i.x, i.y);
											}),
											new t(this.position, this.radius, this.direction, c)
										);
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return void 0 === r && (r = a.default.point()), this.dragEdge(e, t, r);
									}),
									(t.prototype.dragArc = function (e, t) {
										return this;
									}),
									(t.prototype.editDim = function (e, t, n) {
										var r = this.edge(0).end;
										this.translate(a.default.vector(r, a.default.point()));
										var i = new a.default.Matrix();
										return (
											(i = i.scale(t, t)),
											this.transform(i),
											this.translate(a.default.vector(a.default.point(), r)),
											this
										);
									}),
									t
								);
							})(l.WinPolygon);
						t.QuarterCirclePoly = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.IsoscelesTrianglePoly = void 0);
						var a = o(n(0)),
							s = n(16),
							l = n(6),
							h = (function (e) {
								function t(n, r, i, o) {
									var a = e.call(this, o || t.create(n, r, i)) || this;
									return (a.cpt = n), (a.width = r), (a.height = i), a;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t, n) {
										return s.PolygonCreator.Ins.joinAbsolute(e, [
											a.default.vector(0, (2 * -n) / 3),
											a.default.vector(-t / 2, n / 3),
											a.default.vector(t / 2, n / 3),
										]).edges;
									}),
									(t.prototype.heightTo = function (e) {
										return this.dragVertex(0, a.default.vector(0, this.height - e), !1);
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.width, this.height, []);
									}),
									(t.prototype.scale = function (t) {
										return (this.width *= t), (this.height *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = s.PolyType.isoscelesTriangle),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											(t.height = this.height),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										try {
											var o = 0;
											if ((0 === n && (o = 2), 0 === n || 2 === n)) {
												var s = a.default.vector(-r.x, r.y),
													l = e.prototype.dragEdge.call(this, n, r, i).dragEdge(o, s, i);
												return (
													this.compute(l.edges), new t(this.cpt, this.width, this.height, l.edges)
												);
											}
											var h = e.prototype.dragEdge.call(this, n, r, i).edges;
											return this.compute(h), new t(this.cpt, this.width, this.height, h);
										} catch (e) {
											return console.warn(('' + e).split(/\r?\n/)[0]), this;
										}
									}),
									(t.prototype.compute = function (e) {
										var t = e[0].start,
											n = e[1];
										(this.width = n.length),
											(this.height = t.distanceTo(n)[0]),
											(this.cpt = t.translate(a.default.vector(0, (2 * this.height) / 3)));
									}),
									(t.prototype.dragVertex = function (e, n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = this.edges[e].start.translate(n);
										if (0 === e) {
											var s = n.dot(a.default.vector(0, -1));
											return (
												(this.height += s),
												(this.cpt = this.cpt.translate(a.default.vector(0, -s / 3))),
												new t(this.cpt, this.width, this.height)
											);
										}
										return (
											(this.width = 2 * Math.abs(this.cpt.x - o.x)),
											new t(this.cpt, this.width, this.height)
										);
									}),
									(t.prototype.dragArc = function (e, t) {
										return this.dragEdge(e, t);
									}),
									(t.prototype.editDim = function (e, n, r) {
										var i = this.edge(1),
											o = this.edge(0),
											s = this.edge(2);
										if (2 === e) {
											var l = r.multiply(0.5),
												h = a.default.segment(o.start, o.end.translate(l.invert())),
												c = a.default.segment(s.start.translate(l), s.end),
												u = a.default.segment(i.start.translate(l.invert()), i.end.translate(l)),
												p = u.start.y - h.start.y;
											return new t(this.cpt, u.length, p, [h, u, c]);
										}
										var f = o.length * n;
										if (f <= i.length / 2) return this;
										p = Math.sqrt(Math.pow(f, 2) - Math.pow(i.length / 2, 2));
										var d = i.middle().translate(0, -p);
										return (
											(h = a.default.segment(d, i.start)),
											(c = a.default.segment(i.end, d)),
											new t(this.cpt, this.width, p, [h, i, c])
										);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: l.EventType.isosceles_triangle_frame_settings,
											payload: new l.IsoscelesTriangleFrameSettings(e, e.view),
										});
									}),
									t
								);
							})(s.WinPolygon);
						t.IsoscelesTrianglePoly = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.IsoscelesTrapezoidPoly = void 0);
						var a = o(n(0)),
							s = n(16),
							l = n(6),
							h = (function (e) {
								function t(n, r, i, o, a) {
									void 0 === r && (r = 1600), void 0 === i && (i = 1400), void 0 === o && (o = 600);
									var s = e.call(this, a || t.create(n, r, i, o)) || this;
									return (s.cpt = n), (s.width = r), (s.height = i), (s.cutWidth = o), s;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t, n, r) {
										return s.PolygonCreator.Ins.joinRelativePro(
											[
												a.default.vector(2 * r + t, 0),
												a.default.vector(-r, -n),
												a.default.vector(-t, 0),
												a.default.vector(-r, n),
											],
											e.translate(a.default.vector(-(2 * r + t) / 2, n / 2)),
											!1,
										).edges;
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.width, this.height, this.cutWidth, []);
									}),
									(t.prototype.heightTo = function (e) {
										return this.dragEdge(2, a.default.vector(0, this.height - e));
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = s.PolyType.isoscelesTrapezoid),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											(t.height = this.height),
											(t.cutWidth = this.cutWidth),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = e.prototype.dragEdge.call(this, n, r, i).edges;
										return (
											this.compute(o), new t(this.cpt, this.width, this.height, this.cutWidth, o)
										);
									}),
									(t.prototype.compute = function (e) {
										var t = e[2],
											n = e[0];
										(this.width = t.length),
											(this.height = t.distanceTo(n.middle())[0]),
											(this.cutWidth = (n.length - t.length) / 2),
											(this.cpt = t.middle().translate(a.default.vector(0, this.height / 2)));
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return void 0 === r && (r = a.default.point()), this;
									}),
									(t.prototype.dragArc = function (e, t) {
										return this;
									}),
									(t.prototype.editDim = function (e, n, r) {
										if (1 === e) {
											var i = r.multiply(0.5);
											((s = this.edges)[0] = a.default.segment(
												s[0].start.translate(i.invert()),
												s[0].end.translate(i),
											)),
												(s[1] = a.default.segment(s[1].start.translate(i), s[1].end)),
												(s[3] = a.default.segment(s[3].start, s[3].end.translate(i.invert())));
											var o = (s[0].length - s[2].length) / 2;
											return new t(this.cpt, s[0].length, this.height, o, s);
										}
										var s;
										return 3 === e
											? ((i = r.multiply(0.5).invert()),
											  console.warn(i),
											  ((s = this.edges)[2] = a.default.segment(
													s[2].start.translate(i),
													s[2].end.translate(i.invert()),
											  )),
											  (s[1] = a.default.segment(s[1].start, s[1].end.translate(i))),
											  (s[3] = a.default.segment(s[3].start.translate(i.invert()), s[3].end)),
											  (o = (s[0].length - s[2].length) / 2),
											  new t(this.cpt, s[0].length, this.height, o, s))
											: 0 === e
											? this.dragEdge(0, r)
											: 2 === e
											? this.dragEdge(0, r.invert())
											: this;
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: l.EventType.isosceles_trapezoid_frame_settings,
											payload: new l.IsoscelesTrapezoidFrameSettings(e, e.view),
										});
									}),
									t
								);
							})(s.WinPolygon);
						t.IsoscelesTrapezoidPoly = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CirclePoly = void 0);
						var a = o(n(0)),
							s = n(16),
							l = (function (e) {
								function t(n, r, i) {
									var o = e.call(this, i || t.create(n, r)) || this;
									return (o.cpt = n), (o.radius = r), o;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t) {
										return [a.default.circle(e, t).toArc()];
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.radius, []);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = s.PolyType.circle),
											(t.cpt = this.cpt.toJSON()),
											(t.radius = this.radius),
											t
										);
									}),
									(t.prototype.scale = function (t) {
										return (this.radius *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										var i = this;
										void 0 === r && (r = a.default.point());
										var o = r.translate(n).distanceTo(this.cpt)[0],
											s = o / this.radius,
											l = this.edges;
										return (
											l.forEach(function (e, t) {
												l[t] = e
													.translate(-i.cpt.x, -i.cpt.y)
													.transform(a.default.matrix(s, 0, 0, s, 0, 0))
													.translate(i.cpt.x, i.cpt.y);
											}),
											new t(this.cpt.clone(), o, l)
										);
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return void 0 === r && (r = a.default.point()), this.dragEdge(e, t, r);
									}),
									(t.prototype.dragArc = function (e, n) {
										var r = this.edges[0].middle().translate(n);
										return new t(this.cpt.clone(), this.cpt.distanceTo(r)[0]);
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (t[0].dimShow = !0), t;
									}),
									(t.prototype.editDim = function (e, t, n) {
										var r = this.transform(a.default.matrix(t, 0, 0, t, 0, 0)),
											i = r.edges[0];
										return (this.radius = i.r.valueOf()), (this.cpt = i.center), r;
									}),
									t
								);
							})(s.WinPolygon);
						t.CirclePoly = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ThreeDimensionalArcPoly = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(6),
							h = n(16),
							c = (function (e) {
								function t(n, r, i) {
									var o = e.call(this, i || t.create(n, r)) || this;
									return (o.cpt = n), (o.height = r), o;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'frontViewPolygon', {
										get: function () {
											var e = this.edges;
											return new h.WinPolygon([
												e[0],
												a.default.segment(e[0].end, e[2].start),
												e[2],
												a.default.segment(e[2].end, e[0].start),
											]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'box', {
										get: function () {
											return this.frontViewPolygon.polygon.box;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t) {
										var n = 1.5 * t;
										return h.PolygonCreator.Ins.joinRelative(a.default.point(), [
											a.default.vector(-n / 2, -t / 2),
											a.default.vector(0, t),
											a.default.vector(n, 0),
											a.default.vector(0, -t),
										]).translate(a.default.vector(e.x, e.y)).edges;
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.height, []);
									}),
									(t.prototype.scale = function (t) {
										return (this.height *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = h.PolyType.threeDimensionalArc),
											(t.cpt = this.cpt.toJSON()),
											(t.height = this.height),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragArc = function (n, r) {
										if (1 === n || 3 === n) {
											var i = 1;
											1 === n && (i = 3);
											var o = (l = e.prototype.dragArc.call(this, n, r)).edges,
												s = o[n];
											if (s instanceof a.default.Segment)
												o[i] = a.default.segment(o[i].start, o[i].end);
											else {
												if (!(s instanceof a.default.Arc)) throw new Error('not support');
												o[i] = a.default.arc(
													s.center,
													s.center.distanceTo(o[i].start)[0],
													a.default.segment(s.center, o[i].start).slope,
													a.default.segment(s.center, o[i].end).slope,
													!s.counterClockwise,
												);
											}
											return new t(this.cpt, 0, o);
										}
										var l = e.prototype.dragArc.call(this, n, r);
										return new t(this.cpt, 0, l.edges);
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return void 0 === r && (r = a.default.point()), this;
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										var o,
											l = function (e, t) {
												if (t[1] instanceof a.default.Arc) {
													var n = a.default.segment(t[1].start, t[1].end),
														r = a.default.vector(0, t[1].middle().y - n.middle().y),
														i = a.default.segment(e[0].end, e[2].start).middle().translate(r);
													e[1] = s.ArcUtils.CreateArcFrom3Points(e[0].end, e[2].start, i);
													var o = a.default.segment(t[3].start, t[3].end),
														l = a.default.vector(0, t[3].middle().y - o.middle().y),
														h = a.default.segment(e[2].end, e[0].start).middle().translate(l);
													e[3] = s.ArcUtils.CreateArcFrom3Points(e[2].end, e[0].start, h);
												} else
													(e[1] = a.default.segment(e[0].end, e[2].start)),
														(e[3] = a.default.segment(e[2].end, e[0].start));
											};
										if (0 === n) {
											var h = this.edges;
											return (
												((o = this.edges)[0] = o[0].translate(a.default.vector(r.x, 0))),
												l(o, h),
												new t(this.cpt, 0, o)
											);
										}
										if (2 === n)
											return (
												(h = this.edges),
												((o = this.edges)[2] = o[2].translate(a.default.vector(r.x, 0))),
												l(o, h),
												new t(this.cpt, 0, o)
											);
										if (!(this.edges[3] instanceof a.default.Arc))
											return (
												(u = e.prototype.dragEdge.call(this, n, r, i)), new t(this.cpt, 0, u.edges)
											);
										var c = this.edges[3].center.clone();
										try {
											var u;
											return (
												((h = (u = e.prototype.dragEdge.call(this, n, r, i)).edges)[n] =
													a.default.arc(
														c,
														c.distanceTo(h[n].start)[0],
														a.default.segment(c, h[n].start).slope,
														a.default.segment(c, h[n].end).slope,
														h[n].counterClockwise,
													)),
												new t(this.cpt, 0, h)
											);
										} catch (e) {
											return this;
										}
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: l.EventType.threed_arc_frame_settings,
											payload: new l.ThreedArcFrameSettings(e, e.view),
										});
									}),
									t
								);
							})(h.WinPolygon);
						t.ThreeDimensionalArcPoly = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ParallelogramPoly = void 0);
						var a = o(n(0)),
							s = n(16),
							l = (function (e) {
								function t(n, r, i) {
									var o = e.call(this, i || t.create(n, r)) || this;
									return (o.cpt = n), (o.width = r), o;
								}
								return (
									i(t, e),
									(t.create = function (e, t) {
										var n = t;
										return s.PolygonCreator.Ins.joinRelative(e, [
											a.default.vector(-t / 2, -n / 2),
											a.default.vector(0, n),
											a.default.vector(t, 0),
											a.default.vector(0, -n),
										]).edges;
									}),
									(t.prototype.scale = function (t) {
										return (this.width *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.width, []);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = s.PolyType.parallelogram),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = e.prototype.dragEdge.call(this, n, r, i);
										return new t(this.cpt.clone(), 0, o.edges);
									}),
									(t.prototype.dragVertex = function (n, r, i, o) {
										var s;
										if ((void 0 === o && (o = a.default.point()), 0 === n)) s = 1;
										else if (1 === n) s = 0;
										else if (2 === n) s = 3;
										else {
											if (3 !== n) return this;
											s = 2;
										}
										var l = e.prototype.dragVertex.call(this, n, r, i, o).dragVertex(s, r, i, o);
										return new t(this.cpt, 0, l.edges);
									}),
									(t.prototype.dragArc = function (n, r) {
										var i;
										1 === n || 3 === n
											? ((i = 1), 1 === n && (i = 3))
											: ((i = 0), 0 === n && (i = 1));
										var o = e.prototype.dragArc.call(this, n, r).dragArc(i, r);
										return new t(this.cpt, 0, o.edges);
									}),
									t
								);
							})(s.WinPolygon);
						t.ParallelogramPoly = l;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PolyParser = void 0);
						var i = r(n(0)),
							o = n(11),
							a = n(2),
							s = n(16),
							l = (function () {
								function e() {}
								return (
									(e.parse = function (e) {
										switch (e.type) {
											case s.PolyType.regular:
												return this.parseRegular(e);
											case s.PolyType.circle:
												return this.parseCircle(e);
											case s.PolyType.diamond:
												return this.parseDiamond(e);
											case s.PolyType.trapezoid:
												return this.parseTrapezoid(e);
											case s.PolyType.hollow:
												return this.parseHollow(e);
											case s.PolyType.hollow2:
												return this.parseHollow2(e);
											case s.PolyType.hollowSize:
												return this.parseHollowSize(e);
											case s.PolyType.convex:
												return this.parseConvex(e);
											case s.PolyType.gothic:
												return this.parseGothic(e);
											case s.PolyType.isoscelesTriangle:
												return this.parseIsoscelesTriangle(e);
											case s.PolyType.parallelogram:
												return this.parseParallelogram(e);
											case s.PolyType.quarterCircle:
												return this.parseQuarterCircle(e);
											case s.PolyType.quatrefoil:
												return this.parseQuatrefoil(e);
											case s.PolyType.springline:
												return this.parseSpringline(e);
											case s.PolyType.threeDimensionalArc:
												return this.parseThreeDimensionalArc(e);
											case s.PolyType.halfCircle:
												return this.parseHalfCircle(e);
											case s.PolyType.ear:
												return this.parseEar(e);
											case s.PolyType.ear2:
												return this.parseEar2(e);
											case s.PolyType.ear3:
												return this.parseEar3(e);
											case s.PolyType.pointedEar:
												return this.parsePointedEar(e);
											case s.PolyType.singleTrack:
												return this.parseSingleTrack(e);
											case s.PolyType.doubleEars:
												return this.parseDoubleEars(e);
											case s.PolyType.wave:
												return this.parseWave(e);
											case s.PolyType.onion:
												return this.parseOnion(e);
											case s.PolyType.mosque:
												return this.parseMosque(e);
											case s.PolyType.halfKfc:
												return this.parseHalfKfc(e);
											case s.PolyType.halfKfc2:
												return this.parseHalfKfc2(e);
											case s.PolyType.kfc:
												return this.parseKfc(e);
											case s.PolyType.kfc2:
												return this.parseKfc2(e);
											case s.PolyType.kfc3:
												return this.parseKfc3(e);
											case s.PolyType.kfc4:
												return this.parseKfc4(e);
											case s.PolyType.door:
												return this.parseDoor(e);
											case s.PolyType.peakPentagon:
												return this.parsePeakPentagon(e);
											case s.PolyType.angledPentagon:
												return this.parseAngledPentagon(e);
											case s.PolyType.angledHexagon:
												return this.parseAngledHexagon(e);
											case s.PolyType.angledHexagon2:
												return this.parseAngledHexagon2(e);
											case s.PolyType.roundedRectanglePolygon:
												return this.parseRoundedRectanglePolygon(e);
											case s.PolyType.isoscelesTrapezoid:
												return this.parseIsoscelesTrapezoid(e);
										}
										return this.parsePolygon(e);
									}),
									(e.parseEdges = function (e) {
										var t = [];
										return (
											e.polygon[0].forEach(function (e) {
												'segment' === e.name
													? t.push(a.Utils.parseSegment(e))
													: t.push(a.Utils.parseArc(e));
											}),
											t
										);
									}),
									(e.parsePolygon = function (e) {
										var t = new s.WinPolygon(this.parseEdges(e));
										return (t.editTool = e.editTool), t;
									}),
									(e.parseEar = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = this.parseEdges(e);
										6 === n.length && n.push(i.default.segment(n[5].end, n[0].start));
										var r = new s.EarPolygon(
											t,
											!!e.isVertical && e.isVertical,
											!!e.xFlip && e.xFlip,
											!!e.yFlip && e.yFlip,
											n,
										);
										return (
											(r.hasBase = void 0 !== e.hph ? !e.hph : void 0 === e.hb || e.hb),
											(r.pullingHeight = e.ph ? e.ph : Array(n.length).fill(0)),
											(r.editTool = e.editTool),
											r
										);
									}),
									(e.parseEar2 = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = this.parseEdges(e),
											r = new s.Ear2Polygon(t, e.isVertical, e.xFlip, e.yFlip, n);
										return (
											(r.editTool = e.editTool),
											(r.hasBase = void 0 !== e.hph ? !e.hph : void 0 === e.hb || e.hb),
											(r.pullingHeight = e.ph ? e.ph : Array(n.length).fill(0)),
											r
										);
									}),
									(e.parseEar3 = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = this.parseEdges(e),
											r = new s.Ear3Polygon(t, n);
										return (r.editTool = e.editTool), r;
									}),
									(e.parsePointedEar = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = this.parseEdges(e),
											r = new s.PointedEarPolygon(
												t,
												e.ep ? e.ep : o.Direction.Right,
												!!e.fr && e.fr,
												n,
											);
										return (
											(r.hasBase = void 0 !== e.hph ? !e.hph : void 0 === e.hb || e.hb),
											(r.pullingHeight = e.ph ? e.ph : Array(n.length).fill(0)),
											(r.editTool = e.editTool),
											r
										);
									}),
									(e.parseSingleTrack = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.SingleTrackPolygon(
												t,
												e.ep ? e.ep : o.Direction.Right,
												this.parseEdges(e),
											);
										return (
											(n.pullingHeight = void 0 === e.ph ? new Map() : new Map(e.ph)),
											(n.editTool = e.editTool),
											n
										);
									}),
									(e.parseDoubleEars = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = this.parseEdges(e),
											r = new s.DoubleEarsPolygon(t, e.ep ? e.ep : o.Direction.Up, n);
										return (
											(r.editTool = e.editTool),
											(r.hasBase = void 0 !== e.hph ? !e.hph : void 0 === e.hb || e.hb),
											(r.pullingHeight = e.ph ? e.ph : Array(n.length).fill(0)),
											r
										);
									}),
									(e.parseWave = function (e) {
										var t = i.default.point(e.position.x, e.position.y),
											n = i.default.point(e.tangentPoint.x, e.tangentPoint.y),
											r = new s.WavePoly(t, n, e.width, e.height, this.parseEdges(e));
										return (r.editTool = e.editTool), r;
									}),
									(e.parseMosque = function (e) {
										var t = i.default.point(e.position.x, e.position.y),
											n = i.default.point(e.tangentPoint.x, e.tangentPoint.y),
											r = new s.MosquePoly(
												t,
												n,
												e.width,
												e.smArcRadius,
												e.fixedHeight,
												this.parseEdges(e),
											);
										return (r.editTool = e.editTool), r;
									}),
									(e.parseHalfKfc = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.HalfKfcPolygon(t, e.xFlip, e.profileSize, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseHalfKfc2 = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.HalfKfc2Polygon(t, e.xFlip, e.profileSize, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseKfc = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = this.parseEdges(e);
										n[3].start.y < n[3].end.y && ((n[3] = n[3].reverse()), (n[5] = n[5].reverse()));
										var r = new s.KfcPolygon(t, n);
										return (
											(r.editTool = e.editTool),
											void 0 === e.bid ? (r.bottomInnerDim = !1) : (r.bottomInnerDim = e.bid),
											r
										);
									}),
									(e.parseKfc2 = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = this.parseEdges(e),
											r = new s.Kfc2Polygon(t, n);
										return (
											(r.editTool = e.editTool),
											(r.pullingHeight = e.ph ? e.ph : Array(n.length).fill(0)),
											r
										);
									}),
									(e.parseKfc3 = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.Kfc3Polygon(t, this.parseEdges(e));
										return (
											(n.editTool = e.editTool),
											(n.bottomInnerDim = e.bid),
											(n.hiddenSides = e.hs),
											n
										);
									}),
									(e.parseKfc4 = function (e) {
										var t = new s.Kfc4Polygon(this.parseEdges(e));
										return (t.editTool = e.editTool), t;
									}),
									(e.parseHollow2 = function (e) {
										var t = new s.Hollow2Polygon(this.parseEdges(e));
										return (t.editTool = e.editTool), t;
									}),
									(e.parseDoor = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.DoorPolygon(t, [o.Direction.Down], this.parseEdges(e));
										return (
											(n.pullingHeight = void 0 === e.ph ? new Map() : new Map(e.ph)),
											(n.editTool = e.editTool),
											n
										);
									}),
									(e.parsePeakPentagon = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y);
										return new s.PeakPentagonPoly(
											t,
											e.width,
											e.height,
											e.triangleHeight,
											this.parseEdges(e),
										);
									}),
									(e.parseAngledPentagon = function (e) {
										return new s.AngledPentagonPoly(this.parseEdges(e));
									}),
									(e.parseAngledHexagon = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y);
										return new s.AngledHexagonPoly(t, e.width, e.height, e.rw, e.rh);
									}),
									(e.parseAngledHexagon2 = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y);
										return new s.AngledHexagon2Poly(
											t,
											e.width,
											e.height,
											e.rh,
											e.rw,
											e.la,
											e.ra,
											e.it,
											this.parseEdges(e),
										);
									}),
									(e.parseRoundedRectanglePolygon = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y);
										return new s.RoundedRectanglePolygon(
											t,
											e.width,
											e.height,
											e.br,
											e.it,
											this.parseEdges(e),
										);
									}),
									(e.parseRegular = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.RegularPoly(t, e.radius, e.edgeCount, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseCircle = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.CirclePoly(t, e.radius, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseDiamond = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.DiamondPoly(t, e.width, e.height, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseTrapezoid = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.TrapezoidPoly(
												t,
												e.direction ? e.direction : o.Direction.Up,
												e.width,
												e.leftHeight,
												e.rightHeight,
												this.parseEdges(e),
											);
										return (n.editTool = e.editTool), n;
									}),
									(e.parseHollow = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.HollowPoly(t, e.direction, e.width, e.height, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseHollowSize = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.HollowSidePoly(
												t,
												e.direction,
												e.width,
												e.height,
												this.parseEdges(e),
											);
										return (n.editTool = e.editTool), n;
									}),
									(e.parseConvex = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.ConvexPoly(t, e.direction, e.width, e.height, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseGothic = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.GothicPoly(t, e.radius, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseOnion = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.OnionPoly(t, e.radius, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseIsoscelesTriangle = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.IsoscelesTrianglePoly(t, e.width, e.height, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseIsoscelesTrapezoid = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.IsoscelesTrapezoidPoly(
												t,
												e.width,
												e.height,
												e.cutWidth,
												this.parseEdges(e),
											);
										return (n.editTool = e.editTool), n;
									}),
									(e.parseParallelogram = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.ParallelogramPoly(t, e.width, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseQuarterCircle = function (e) {
										var t = i.default.point(e.position.x, e.position.y),
											n = new s.QuarterCirclePoly(t, e.radius, e.dir, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseQuatrefoil = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.QuatrefoilPoly(t, e.rectWidth, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseSpringline = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.SpringlinePoly(
												t,
												e.width ? e.width : (e.height / 3) * 5,
												e.height,
												e.arcHeight ? e.arcHeight : e.height / 3,
												this.parseEdges(e),
											);
										return (n.editTool = e.editTool), n;
									}),
									(e.parseThreeDimensionalArc = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.ThreeDimensionalArcPoly(t, e.height, this.parseEdges(e));
										return (n.editTool = e.editTool), n;
									}),
									(e.parseHalfCircle = function (e) {
										var t = i.default.point(e.cpt.x, e.cpt.y),
											n = new s.HalfCirclePoly(
												t,
												e.radius,
												void 0 !== e.bottomHidden && e.bottomHidden,
												this.parseEdges(e),
											);
										return (n.editTool = e.editTool), n;
									}),
									e
								);
							})();
						t.PolyParser = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HalfCirclePoly = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(16),
							h = n(9),
							c = (function (e) {
								function t(n, r, i, o) {
									void 0 === i && (i = !1);
									var a = e.call(this, o || t.create(n, r)) || this;
									return (a.cpt = n), (a.radius = r), (a.bottomHidden = i), a;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t) {
										var n = e.translate(a.default.vector(0, t / 2));
										return l.PolygonCreator.Ins.joinRelative(
											n,
											[
												a.default.vector(-t, 0),
												a.default.vector(2 * t, 0),
												a.default.arc(n, t, 0, Math.PI, !1),
											],
											!1,
										).edges;
									}),
									(t.prototype.scale = function (t) {
										return (this.radius *= t), e.prototype.scale.call(this, t);
									}),
									Object.defineProperty(t.prototype, 'bottomEdge', {
										get: function () {
											return this.edge(0);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'arcEdge', {
										get: function () {
											return this.edge(1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.frametify = function (e, t) {
										return new h.HalfCircleFrametify(this).run(e, t);
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.radius, this.bottomHidden, []);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.halfCircle),
											(t.cpt = this.cpt.toJSON()),
											(t.radius = this.radius),
											(t.bottomHidden = this.bottomHidden),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.resize = function (e, n) {
										return e
											? ((this.radius = e / 2), new t(this.cpt, this.radius))
											: n
											? ((this.radius = n), new t(this.cpt, this.radius))
											: this;
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.edge(0),
											o = this.edge(1),
											s = [i, o];
										if ((0 === e && (s[0] = i.translate(n)), 1 === e)) {
											var l = a.default.vector(o.center, r),
												c = n.projectionOn(l),
												u = (c.dot(l) < 0 ? -1 : 1) * c.length,
												p = a.default.arc(
													o.center,
													o.r.valueOf() + u,
													o.startAngle,
													o.endAngle,
													o.counterClockwise,
												);
											s[1] = p;
										}
										return (
											h.Frametify.edgeIntersection(s, 0),
											h.Frametify.edgeIntersection(s, 1),
											(this.radius = s[1].r.valueOf()),
											(this.cpt = s[1].center),
											new t(this.cpt, this.radius, this.bottomHidden, s)
										);
									}),
									(t.prototype.dragVertex = function (e, n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = this.edge(0),
											s = this.edge(1),
											l = [o, s],
											c = 0 === e ? n.x : -n.x,
											u = a.default.point(o.box.xmin + c, o.box.ymin),
											p = a.default.point(o.box.xmax - c, o.box.ymin);
										if (u.x === p.x) return new t(this.cpt, this.radius, this.bottomHidden, l);
										if (u.x > p.x) {
											var f = u.clone();
											(u = p.clone()), (p = f.clone());
										}
										return (
											(l[1] = h.ArcUtils.CreateArcFrom3Points(p, u, s.middle())),
											h.Frametify.edgeIntersection(l, 0),
											h.Frametify.edgeIntersection(l, 1),
											(this.radius = l[1].r.valueOf()),
											(this.cpt = l[1].center),
											new t(this.cpt, this.radius, this.bottomHidden, l)
										);
									}),
									(t.prototype.dragArc = function (e, n) {
										if (0 === e) return this.dragEdge(e, n);
										if (1 === e) {
											var r = this.edge(0),
												i = this.edge(1),
												o = [r, i];
											return (
												(o[1] = h.ArcUtils.CreateArcFrom3Points(
													i.start,
													i.end,
													i.middle().translate(n),
												)),
												h.Frametify.edgeIntersection(o, 0),
												h.Frametify.edgeIntersection(o, 1),
												(this.radius = o[1].r.valueOf()),
												(this.cpt = o[1].center),
												new t(this.cpt, this.radius, this.bottomHidden, o)
											);
										}
										throw new Error('unknown idx');
									}),
									(t.prototype.editDim = function (e, t, n) {
										return this.transform(a.default.matrix(t, 0, 0, t, 0, 0));
									}),
									(t.prototype.initDimInfo = function () {
										return this.edges.map(function (e, t) {
											return {
												idx: t,
												dimShow: !0,
											};
										});
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: s.EventType.half_circle_frame_settings,
											payload: new s.HalfCircleFrameSettings(e, e.view),
										});
									}),
									t
								);
							})(l.WinPolygon);
						t.HalfCirclePoly = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.WavePoly = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(2),
							h = n(16),
							c = (function (e) {
								function t(n, r, i, o, a) {
									void 0 === i && (i = 4e3), void 0 === o && (o = 2e3);
									var s = e.call(this, a || t.create(n, r, i, o)) || this;
									return (s.position = n), (s.tangentPoint = r), (s.width = i), (s.height = o), s;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t, n, r) {
										void 0 === n && (n = 4e3), void 0 === r && (r = 2e3);
										var i = new h.WinPolygon(),
											o = this.mirrorPoint(t, e),
											l = e.translate(a.default.vector(0, -r)),
											c = s.ArcUtils.CreateArcFrom3Points(o, t, l),
											u = c.tangentInEnd(),
											p = n / 2 - t.distanceTo(o)[0] / 2,
											f = a.default.vector(-1, 0).angleTo(u.rotate90CW()),
											d = Math.tan(f) * p,
											g = t.translate(-p, -d),
											y = p / Math.cos(f),
											m = g.translate(0, y),
											v = this.mirrorPoint(m, e),
											w = this.mirrorPoint(g, e),
											b = a.default.Arc.arcSE(g, t, m, !0),
											S = r - c.chordHeight() - (y - d),
											_ = m.translate(a.default.vector(0, S)),
											P = _.translate(n, 0),
											x = a.default.Arc.arcSE(w, v, o, !0);
										return (
											i.add(x),
											i.add(c),
											i.add(b),
											i.add(a.default.segment(m, _)),
											i.add(a.default.segment(_, P)),
											i.doneSmart(),
											i.translate(a.default.vector(0, r / 2)),
											i.edges
										);
									}),
									(t.prototype.scale = function (t) {
										return (
											(this.width *= t),
											(this.height *= t),
											(this.tangentPoint = l.Utils.scalePoint(
												this.tangentPoint,
												this.polygon.box.center,
												t,
											)),
											e.prototype.scale.call(this, t)
										);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = h.PolyType.wave),
											(t.position = this.position.toJSON()),
											(t.tangentPoint = this.tangentPoint.toJSON()),
											(t.width = this.width),
											(t.height = this.height),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t),
											(this.position = this.position.translate(t)),
											(this.tangentPoint = this.tangentPoint.translate(t)),
											this
										);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										if ((void 0 === r && (r = a.default.point()), 3 === e || 5 === e)) {
											var i = n.projectionOn(a.default.vector(1, 0));
											return (
												3 === e && (i = i.invert()),
												new t(this.position, this.tangentPoint, this.width + 2 * i.x, this.height)
											);
										}
										return 4 === e
											? ((i = n.projectionOn(a.default.vector(0, 1))),
											  new t(
													this.position.translate(i.multiply(0.5)),
													this.tangentPoint.translate(i.invert().multiply(0.5)),
													this.width,
													this.height + i.y,
											  ))
											: this;
									}),
									(t.prototype.dragVertex = function (e, n, r, i) {
										return (
											void 0 === i && (i = a.default.point()),
											1 === e || 2 === e
												? (1 === e && (n = a.default.vector(-n.x, n.y)),
												  new t(
														this.position,
														this.tangentPoint.translate(n),
														this.width,
														this.height,
												  ))
												: this
										);
									}),
									(t.prototype.dragArc = function (e, n) {
										if (1 === e) {
											var r = n.projectionOn(a.default.vector(0, 1));
											return new t(
												this.position.translate(r.multiply(0.5)),
												this.tangentPoint,
												this.width,
												this.height - r.y,
											);
										}
										return this;
									}),
									(t.prototype.editDim = function (e, n, r) {
										return 5 === e
											? new t(this.position, this.tangentPoint, this.width * n, this.height)
											: 4 === e
											? new t(
													this.position.translate(r.multiply(0.5)),
													this.tangentPoint.translate(r.invert().multiply(0.5)),
													this.width,
													this.height + r.y,
											  )
											: this;
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[0] = {
												idx: 0,
												dimShow: !1,
											}),
											(t[1] = {
												idx: 1,
												dimShow: !0,
											}),
											(t[2] = {
												idx: 2,
												dimShow: !1,
											}),
											(t[3] = {
												idx: 3,
												dimShow: !0,
											}),
											(t[4] = {
												idx: 4,
												dimShow: !0,
											}),
											(t[5] = {
												idx: 5,
												dimShow: !1,
											}),
											t
										);
									}),
									(t.prototype._clone = function () {
										return new t(
											this.position.clone(),
											this.tangentPoint.clone(),
											this.width,
											this.height,
											[],
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 6; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !1,
											});
										this.ctlRobs.set(0, {
											arc: !1,
											endpoint: !0,
										}),
											this.ctlRobs.set(1, {
												arc: !0,
												endpoint: !0,
											}),
											this.ctlRobs.set(2, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(3, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(4, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(5, {
												arc: !1,
												endpoint: !0,
											});
									}),
									(t.mirrorPoint = function (e, t) {
										return a.default.point(2 * t.x - e.x, e.y);
									}),
									t
								);
							})(h.WinPolygon);
						t.WavePoly = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.OnionPoly = void 0);
						var a = o(n(0)),
							s = n(16),
							l = (function (e) {
								function t(n, r, i) {
									var o = e.call(this, i || t.create(n, r)) || this;
									return (o.cpt = n), (o.radius = r), o;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t) {
										var n = (Math.PI / 180) * 45,
											r = t - t * Math.cos(n),
											i = e.translate(a.default.vector(0, (t * Math.sin(n)) / 3)),
											o = i.translate(a.default.vector(r - t, 0)),
											l = i.translate(a.default.vector(t - r, 0));
										return s.PolygonCreator.Ins.joinAbsolute(
											i,
											[
												a.default.arc(l, t, Math.PI + n, Math.PI, !1),
												a.default.vector(-r, 0),
												a.default.vector(-r, 2 * r),
												a.default.vector(r, 2 * r),
												a.default.vector(r, 0),
												a.default.arc(o, t, 0, -n, !1),
											],
											!1,
										).edges;
									}),
									(t.prototype.initPoly = function () {
										this.ctlRobs.set(1, {
											arc: !1,
											endpoint: !0,
										}),
											this.ctlRobs.set(2, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(3, {
												arc: !1,
												endpoint: !0,
											});
									}),
									(t.prototype._clone = function () {
										return new t(this.cpt.clone(), this.radius, []);
									}),
									(t.prototype.scale = function (t) {
										return (this.radius *= t), e.prototype.scale.call(this, t);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = s.PolyType.onion),
											(t.cpt = this.cpt.toJSON()),
											(t.radius = this.radius),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										try {
											var o = void 0,
												l = a.default.segment(this.edge(2).start, this.edge(2).end).middle(),
												h = l.translate(0, 1),
												c = a.default.vector(-r.x, r.y);
											if (1 === n) {
												r.y = 0;
												var u = e.prototype.dragEdgeSmartly.call(this, n, r, i);
												(p = new s.DescriptivePolygonPoints(u)).lineMirror(l, h),
													(o = p.buildWinEdges());
											} else if (3 === n)
												(r.y = 0),
													(u = e.prototype.dragEdgeSmartly.call(this, n, r, i)),
													(p = new s.DescriptivePolygonPoints(u)).lineMirror(h, l),
													(o = p.buildWinEdges());
											else if (0 === n) {
												u = e.prototype.dragEdge.call(this, 0, r, i);
												var p = new s.DescriptivePolygonPoints(u),
													f = u.dragEdge(4, c, i);
												(p.vertexes[0] = f.vertices[0].clone()),
													p.lineMirror(l, h),
													(o = p.buildWinEdges());
											} else
												4 === n
													? ((u = e.prototype.dragEdge.call(this, 4, r, i)),
													  (p = new s.DescriptivePolygonPoints(u)),
													  (f = u.dragEdge(0, c, i)),
													  (p.vertexes[0] = f.vertices[0].clone()),
													  p.lineMirror(h, l),
													  (o = p.buildWinEdges()))
													: (o = e.prototype.dragEdge.call(this, n, r, i).edges);
											return new t(this.cpt, this.radius, o);
										} catch (e) {
											return console.warn(('' + e).split(/\r?\n/)[0]), this;
										}
									}),
									(t.prototype.dragVertex = function (n, r, i, o) {
										if ((void 0 === o && (o = a.default.point()), 0 === n)) {
											r.x = 0;
											var s = e.prototype.dragVertex.call(this, n, r, i, o);
											return new t(this.cpt, this.radius, s.edges);
										}
										return 2 === n ? (n = 1) : 4 === n && (n = 3), this.dragEdge(n, r, o);
									}),
									(t.prototype.dragArc = function (n, r) {
										if (2 === n) {
											r.x = 0;
											var i = e.prototype.dragArc.call(this, n, r);
											return new t(this.cpt, this.radius, i.edges);
										}
										var o = 0;
										0 === n ? (o = 4) : 1 === n ? (o = 3) : 3 === n ? (o = 1) : 4 === n && (o = 0);
										var s = a.default.vector(-r.x, r.y),
											l = e.prototype.dragArc.call(this, n, r).dragArc(o, s);
										return new t(this.cpt, this.radius, l.edges);
									}),
									(t.prototype.editDim = function (n, r, i) {
										if (2 === n || 4 === n) {
											var o = e.prototype.editDim.call(this, n, r, i);
											return new t(this.cpt, this.radius, o.edges);
										}
										return 3 === n
											? ((o = this.transform(a.default.matrix(r, 0, 0, r, 0, 0))),
											  new t(this.cpt, this.radius, o.edges))
											: ((o = e.prototype.editDim.call(this, n, r, i)),
											  new t(this.cpt, this.radius, o.edges));
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[2] = {
												idx: 2,
												dimShow: !0,
											}),
											t
										);
									}),
									t
								);
							})(s.WinPolygon);
						t.OnionPoly = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.MosquePoly = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(16),
							h = (function (e) {
								function t(n, r, i, o, a, s) {
									void 0 === i && (i = 4e3), void 0 === o && (o = 500), void 0 === a && (a = 200);
									var l = e.call(this, s || t.create(n, r, i, o, a)) || this;
									return (
										(l.position = n),
										(l.tangentPoint = r),
										(l.width = i),
										(l.smArcRadius = o),
										(l.fixedHeight = a),
										l
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t, n, r, i) {
										void 0 === n && (n = 4e3), void 0 === r && (r = 500), void 0 === i && (i = 200);
										var o = new l.WinPolygon(),
											s = a.default.vector(0, 1).rotate((Math.PI / 180) * -10),
											h = a.default.line(t, s),
											c = e.translate(a.default.vector(-n / 2, 0)),
											u = a.default.line(c, a.default.vector(1, 0)),
											p = h.intersect(u)[0],
											f = p.translate(s.rotate90CW().multiply(c.distanceTo(p)[0]));
										if (f.x >= e.x)
											throw new Error('leftTangentPoint.x must be less then position.x');
										var d = a.default.segment(c, f).middle(),
											g = a.default.line(d, a.default.vector(c, f).normalize()),
											y = a.default.line(c, a.default.vector(0, 1)),
											m = g.intersect(y)[0],
											v = a.default.Arc.arcSE(m, c, f, !0),
											w = f.translate(s.invert().multiply(r)),
											b = a.default
												.arc(w, r, 0, 2 * Math.PI)
												.intersect(a.default.line(e, a.default.vector(1, 0)))
												.sort(function (e, t) {
													return t.y - e.y;
												})[0],
											S = a.default.Arc.arcSE(w, f, b, !1),
											_ = this.mirrorPoint(w, e),
											P = this.mirrorPoint(f, e),
											x = a.default.Arc.arcSE(_, b, P, !1),
											D = this.mirrorPoint(c, e),
											T = this.mirrorPoint(m, e),
											O = a.default.Arc.arcSE(T, P, D, !0),
											M = D.translate(a.default.vector(0, i)),
											E = M.translate(a.default.vector(-n, 0));
										return (
											o.add(v),
											o.add(S),
											o.add(x),
											o.add(O),
											o.add(a.default.segment(D, M)),
											o.add(a.default.segment(M, E)),
											o.doneSmart(),
											o.edges
										);
									}),
									(t.prototype.scale = function (t) {
										return (
											(this.width *= t),
											(this.smArcRadius *= t),
											(this.fixedHeight *= t),
											(this.tangentPoint = s.Utils.scalePoint(
												this.tangentPoint,
												this.polygon.box.center,
												t,
											)),
											e.prototype.scale.call(this, t)
										);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.mosque),
											(t.position = this.position.toJSON()),
											(t.tangentPoint = this.tangentPoint.toJSON()),
											(t.width = this.width),
											(t.smArcRadius = this.smArcRadius),
											(t.fixedHeight = this.fixedHeight),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t),
											(this.position = this.position.translate(t)),
											(this.tangentPoint = this.tangentPoint.translate(t)),
											this
										);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										if ((void 0 === r && (r = a.default.point()), 4 === e || 6 === e)) {
											var i = n.projectionOn(a.default.vector(1, 0));
											return (
												6 === e && (i = i.invert()),
												new t(
													this.position,
													this.tangentPoint,
													this.width + 2 * i.x,
													this.smArcRadius,
													this.fixedHeight,
												)
											);
										}
										return 5 === e
											? ((i = n.projectionOn(a.default.vector(0, 1))),
											  new t(
													this.position,
													this.tangentPoint,
													this.width,
													this.smArcRadius,
													this.fixedHeight + i.y,
											  ))
											: this;
									}),
									(t.prototype.dragVertex = function (e, n, r, i) {
										if ((void 0 === i && (i = a.default.point()), 1 === e || 3 === e))
											return (
												3 === e && (n = a.default.vector(-n.x, n.y)),
												new t(
													this.position,
													this.tangentPoint.translate(n),
													this.width,
													this.smArcRadius,
													this.fixedHeight,
												)
											);
										if (2 === e) {
											var o = this.edges[e].start,
												s = n.projectionOn(a.default.vector(0, 1)),
												l = o.translate(s),
												h = a.default.vector(0, 1).rotate((Math.PI / 180) * -10),
												c = a.default.line(this.tangentPoint, h),
												u = this.position.translate(a.default.vector(-this.width / 2, 0)),
												p = a.default.line(u, a.default.vector(1, 0)),
												f = c.intersect(p)[0],
												d = f.translate(h.rotate90CW().multiply(u.distanceTo(f)[0])),
												g = a.default.line(d, h.rotate90CW()),
												y = a.default.line(
													a.default.segment(d, l).middle(),
													a.default.vector(d, l).normalize(),
												),
												m = g.intersect(y)[0].distanceTo(d)[0];
											return new t(
												this.position,
												this.tangentPoint,
												this.width,
												m,
												this.fixedHeight,
											);
										}
										return this;
									}),
									(t.prototype.dragArc = function (e, t) {
										return this;
									}),
									(t.prototype.editDim = function (e, n, r) {
										if (5 === e)
											return new t(
												this.position,
												this.tangentPoint,
												this.width,
												this.smArcRadius,
												this.fixedHeight * n,
											);
										if (6 === e) {
											var i = this.width * (n - 1);
											return new t(
												this.position,
												this.tangentPoint.translate(a.default.vector(-i / 2, -i / 2.5)),
												this.width * n,
												this.smArcRadius * n,
												this.fixedHeight,
											);
										}
										return this;
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[0] = {
												idx: 0,
												dimShow: !1,
											}),
											(t[1] = {
												idx: 1,
												dimShow: !1,
											}),
											(t[2] = {
												idx: 2,
												dimShow: !1,
											}),
											(t[3] = {
												idx: 3,
												dimShow: !1,
											}),
											(t[4] = {
												idx: 4,
												dimShow: !0,
											}),
											(t[5] = {
												idx: 5,
												dimShow: !0,
											}),
											(t[6] = {
												idx: 6,
												dimShow: !1,
											}),
											t
										);
									}),
									(t.prototype._clone = function () {
										return new t(
											this.position.clone(),
											this.tangentPoint.clone(),
											this.width,
											this.smArcRadius,
											this.fixedHeight,
											[],
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 6; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !1,
											});
										this.ctlRobs.set(0, {
											arc: !1,
											endpoint: !1,
										}),
											this.ctlRobs.set(1, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(2, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(3, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(4, {
												arc: !1,
												endpoint: !1,
											}),
											this.ctlRobs.set(5, {
												arc: !1,
												endpoint: !0,
											}),
											this.ctlRobs.set(6, {
												arc: !1,
												endpoint: !0,
											});
									}),
									(t.mirrorPoint = function (e, t) {
										return a.default.point(2 * t.x - e.x, e.y);
									}),
									t
								);
							})(l.WinPolygon);
						t.MosquePoly = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.KfcPolygon = void 0);
						var a = o(n(0)),
							s = n(118),
							l = n(16),
							h = n(2),
							c = (function (e) {
								function t(t, n) {
									var r = e.call(this, n) || this;
									return (
										(r.position = t),
										(r.size = 2100),
										(r.pullingHeight = 0),
										(r.bottomInnerDim = !1),
										n || r.initLayout(),
										r
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											var e = this.edges;
											return new l.WinPolygon(
												l.PolygonCreator.Ins.joinPointsWithSegment([
													e[0].end,
													e[1].end,
													e[2].end,
													e[4].end,
													e[6].end,
													e[7].end,
												]),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isSimpleClosed', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.kfc),
											(t.cpt = this.position.toJSON()),
											(t.bid = this.bottomInnerDim),
											t
										);
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(this.position, e)
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 8; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										this.ctlRobs.set(4, {
											arc: !1,
											endpoint: !1,
										}),
											this.ctlRobs.set(5, {
												arc: !1,
												endpoint: !1,
											}),
											(this.imIdx = new Map([
												[0, 1],
												[1, 2],
												[2, 3],
												[3, 0],
												[4, 3],
												[5, 4],
												[6, 5],
												[7, 0],
												[8, 5],
												[9, 6],
												[10, 7],
												[11, 0],
											]));
									}),
									(t.prototype.initLayout = function () {
										var e = this;
										this.clear(),
											this.initEdges().forEach(function (t) {
												return e.add(t);
											}),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.initEdges = function () {
										var e = this,
											t = this.size / 3,
											n = a.default.point(0, 0),
											r = a.default.point(t, 0),
											i = a.default.point(2 * t, 0),
											o = a.default.point(3 * t, 0),
											s = a.default.point(0, this.size),
											l = a.default.point(t, this.size),
											h = a.default.point(2 * t, this.size),
											c = a.default.point(3 * t, this.size),
											u = [
												a.default.segment(o, n),
												a.default.segment(n, s),
												a.default.segment(s, l),
												a.default.segment(l, r),
												a.default.segment(l, h),
												a.default.segment(i, h),
												a.default.segment(h, c),
												a.default.segment(c, o),
											];
										return (
											u.forEach(function (t, n) {
												u[n] = t.translate(a.default.vector(-e.size / 2, -e.size / 2));
											}),
											u
										);
									}),
									(t.prototype.frametify = function (e, t) {
										return new s.KfcFrametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = this.edges,
											s = a.default.line(o[n].start, o[n].end),
											l = a.default.line(s.pt.translate(r), s.norm);
										if (1 === n || 7 === n) o = e.prototype.dragEdge.call(this, n, r, i).edges;
										else if (2 === n || 4 === n || 6 === n) {
											var h = l.intersect(a.default.line(o[1].start, o[1].end))[0],
												c = l.intersect(a.default.line(o[3].start, o[3].end))[0],
												u = l.intersect(a.default.line(o[5].start, o[5].end))[0],
												p = l.intersect(a.default.line(o[7].start, o[7].end))[0];
											(o[1] = a.default.segment(o[1].start, h)),
												(o[2] = a.default.segment(h, c)),
												(o[3] = a.default.segment(c, o[3].end)),
												(o[4] = a.default.segment(c, u)),
												(o[5] = a.default.segment(o[5].start, u)),
												(o[6] = a.default.segment(u, p)),
												(o[7] = a.default.segment(p, o[7].end));
										} else if (0 === n)
											(h = l.intersect(a.default.line(o[1].start, o[1].end))[0]),
												(c = l.intersect(a.default.line(o[3].start, o[3].end))[0]),
												(u = l.intersect(a.default.line(o[5].start, o[5].end))[0]),
												(p = l.intersect(a.default.line(o[7].start, o[7].end))[0]),
												(o[0] = a.default.segment(p, h)),
												(o[1] = a.default.segment(h, o[1].end)),
												(o[3] = a.default.segment(o[3].start, c)),
												(o[5] = a.default.segment(u, o[5].end)),
												(o[7] = a.default.segment(o[7].start, p));
										else if (3 === n) {
											var f = l.intersect(a.default.line(o[0].start, o[0].end))[0],
												d = l.intersect(a.default.line(o[2].start, o[2].end))[0];
											(o[3] = a.default.segment(d, f)),
												(o[2] = a.default.segment(o[2].start, d)),
												(o[4] = a.default.segment(d, o[4].end));
										} else if (5 === n) {
											f = l.intersect(a.default.line(o[0].start, o[0].end))[0];
											var g = l.intersect(a.default.line(o[6].start, o[6].end))[0];
											(o[5] = a.default.segment(f, g)),
												(o[4] = a.default.segment(o[4].start, g)),
												(o[6] = a.default.segment(g, o[6].end));
										}
										var y = new t(this.position, o);
										return (
											(y.pullingHeight = this.pullingHeight),
											(y.bottomInnerDim = this.bottomInnerDim),
											y
										);
									}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return void 0 === r && (r = a.default.point()), this;
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[3];
										this.toMulCCBar(t),
											(t.connectCount = 2),
											(t.dockCount = t.epDock.stDock.type === h.DockType.Frame ? 2 : 1);
										var n = e[4];
										this.toMulCCBar(n),
											(n.connectCount = 2),
											(n.dockCount = n.epDock.etDock.type === h.DockType.Frame ? 2 : 1);
									}),
									Object.defineProperty(t.prototype, 'asMulEdgeIndexes', {
										get: function () {
											return [3, 5];
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(l.WinPolygon);
						t.KfcPolygon = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Kfc2Polygon = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(11),
							h = n(87),
							c = n(16),
							u = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, l.Direction.Up, n) || this;
									return (r.position = t), (r.hasBase = !1), n || r.initLayout(), r;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											var e = this.edges;
											return new c.WinPolygon(
												h.PolygonCreator.Ins.joinPointsWithSegment([
													e[0].end,
													e[1].end,
													e[2].end,
													e[3].end,
													e[4].end,
													e[6].start,
													e[6].end,
													e[7].end,
												]),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isSimpleClosed', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.type = c.PolyType.kfc2), t;
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(this.position, e)
										);
									}),
									(t.prototype.initLayout = function () {
										var e = this;
										this.clear(),
											this.initVerticalEdges(!1).forEach(function (t) {
												return e.add(t);
											}),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.initVerticalEdges = function (e) {
										var t,
											n = this;
										void 0 === e && (e = !0);
										var r = this.size - (20 * this.smBoxSize) / 7;
										return (
											((t = h.PolygonCreator.Ins.joinRelativePro(
												[
													a.default.vector(3 * -this.smBoxSize, 0),
													a.default.vector(0, (20 * this.smBoxSize) / 7),
													a.default.vector(this.smBoxSize, 0),
													a.default.vector(0, r),
													a.default.vector(this.smBoxSize, 0),
													a.default.vector(0, -r),
													a.default.vector(this.smBoxSize, 0),
													a.default.vector(0, (20 * -this.smBoxSize) / 7),
												],
												a.default.point(2 * this.smBoxSize, 0),
												!1,
											).edges)[3] = a.default.segment(
												a.default.point(),
												a.default.point(0, this.size),
											)),
											(t[5] = a.default.segment(
												a.default.point(this.smBoxSize, this.size),
												a.default.point(this.smBoxSize, 0),
											)),
											t.forEach(function (e, r) {
												t[r] = e.translate(a.default.vector(-n.size / 6, -n.size / 3));
											}),
											(this.pullingHeight = Array(t.length).fill(0)),
											t
										);
									}),
									(t.prototype.frametify = function (e, t) {
										return new s.Kfc2Frametify(this).run(e, t);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = e.prototype.dragEdge.call(this, n, r, i),
											s = new t(this.position, o.edges);
										return (s.pullingHeight = this.pullingHeight), s;
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[2] = {
												idx: 2,
												dimShow: !0,
											}),
											(t[3] = {
												idx: 3,
												dimShow: !0,
											}),
											(t[4] = {
												idx: 4,
												dimShow: !0,
											}),
											(t[5] = {
												idx: 5,
												dimShow: !1,
											}),
											(t[6] = {
												idx: 6,
												dimShow: !0,
											}),
											(t[7] = {
												idx: 7,
												dimShow: !0,
											}),
											t
										);
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[3];
										this.toMulCCBar(t), (t.connectCount = 2), (t.dockCount = 1);
										var n = e[4];
										this.toMulCCBar(n), (n.connectCount = 2), (n.dockCount = 1);
									}),
									t
								);
							})(c.DoubleEarsPolygon);
						t.Kfc2Polygon = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoorPolygon = void 0);
						var o = n(11),
							a = n(16),
							s = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (t.hidden = [o.Direction.Down]), t;
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.type = a.PolyType.door), t;
									}),
									(t.prototype._clone = function () {
										var e = new t(this.position);
										return (e.pullingHeight = this.pullingHeight), e;
									}),
									t
								);
							})(a.SingleTrackPolygon);
						t.DoorPolygon = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PeakPentagonPoly = void 0);
						var a = o(n(0)),
							s = n(16),
							l = n(6),
							h = (function (e) {
								function t(n, r, i, o, a) {
									var s = e.call(this, a || t.create(n, r, i, o)) || this;
									return (s.cpt = n), (s.width = r), (s.height = i), (s.triangleHeight = o), s;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'cutAnglesCount', {
										get: function () {
											return 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.create = function (e, t, n, r) {
										var i = t,
											o = i / 2,
											l = n,
											h = l - r,
											c = new s.WinPolygon(
												s.PolygonCreator.Ins.joinPointsWithSegment([
													a.default.point(0, 0),
													a.default.point(i, -0),
													a.default.point(i, -h),
													a.default.point(o, -l),
													a.default.point(0, -h),
												]),
											);
										return (c = c.translate(a.default.vector(a.default.point(o, -l / 2), e))).edges;
									}),
									(t.prototype._clone = function () {
										return new t(
											this.cpt.clone(),
											this.width,
											this.height,
											this.triangleHeight,
											[],
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 6; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: l.EventType.peak_pentagon_frame_settings,
											payload: new l.PeakPentagonFrameSettings(e, e.view),
										});
									}),
									(t.prototype.scale = function (t) {
										return (
											(this.width *= t),
											(this.height *= t),
											(this.triangleHeight *= t),
											e.prototype.scale.call(this, t)
										);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = s.PolyType.peakPentagon),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											(t.height = this.height),
											(t.triangleHeight = this.triangleHeight),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return (
											e.prototype.translate.call(this, t), (this.cpt = this.cpt.translate(t)), this
										);
									}),
									(t.prototype.rotate = function (t, n) {
										return (
											e.prototype.rotate.call(this, t, n), (this.cpt = this.cpt.rotate(t, n)), this
										);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										try {
											if (1 === n || 4 === n)
												return (
													(this.width += 2 * r.dot(a.default.vector(1 === n ? 1 : -1, 0))),
													new t(this.cpt, this.width, this.height, this.triangleHeight)
												);
											if (2 === n || 3 === n)
												return (
													(this.height += r.dot(a.default.vector(0, -1))),
													(this.cpt = this.cpt.translate(
														r.projectionOn(a.default.vector(0, -1)).multiply(0.5),
													)),
													new t(this.cpt, this.width, this.height, this.triangleHeight)
												);
											var o = e.prototype.dragEdge.call(this, n, r, i);
											return (
												this.compute(o.edges),
												new t(this.cpt, this.width, this.height, this.triangleHeight, o.edges)
											);
										} catch (e) {
											return console.warn(('' + e).split(/\r?\n/)[0]), this;
										}
									}),
									(t.prototype.dragVertex = function (e, n) {
										if (0 === e || 1 === e) {
											var r = n.dot(a.default.vector(0 === e ? -1 : 1, 0)),
												i = n.dot(a.default.vector(0, 1));
											return (
												(this.width += 2 * r),
												(this.height += i),
												(this.cpt = this.cpt.translate(a.default.vector(0, i / 2))),
												new t(this.cpt, this.width, this.height, this.triangleHeight)
											);
										}
										if (2 === e || 4 === e)
											return (
												(r = n.dot(a.default.vector(2 === e ? 1 : -1, 0))),
												(i = n.dot(a.default.vector(0, -1))),
												(this.width += 2 * r),
												(this.height += i),
												(this.cpt = this.cpt.translate(a.default.vector(0, -i / 2))),
												new t(this.cpt, this.width, this.height, this.triangleHeight)
											);
										var o = n.dot(a.default.vector(0, -1));
										return (
											(this.triangleHeight += o),
											(this.height += o),
											(this.cpt = this.cpt.translate(a.default.vector(0, -o / 2))),
											new t(this.cpt, this.width, this.height, this.triangleHeight)
										);
									}),
									(t.prototype.editDim = function (e, t, n) {
										if (1 === e) return this.dragEdge(1, n.multiply(0.5));
										if (2 === e) return this.dragEdge(0, n.invert());
										if (0 === e) return this.dragEdge(0, n);
										if (3 === e || 4 === e) {
											var r = this.edge(3 === e ? 2 : 3),
												i = r.length + n.dot(r.tangentInStart());
											if (i <= this.width / 2) return this;
											var o = Math.sqrt(Math.pow(i, 2) - Math.pow(this.width / 2, 2)),
												s = a.default.vector(0, this.triangleHeight - o);
											return this.dragVertex(3, s);
										}
										return this.transform(a.default.matrix(t, 0, 0, t, 0, 0));
									}),
									(t.prototype.compute = function (e) {
										var t = e[3].start,
											n = e[0];
										(this.width = n.length),
											(this.height = t.distanceTo(n)[0]),
											(this.triangleHeight = Math.abs(e[3].start.y - e[3].end.y)),
											(this.cpt = a.default.segment(t, n.middle()).middle());
									}),
									t
								);
							})(s.WinPolygon);
						t.PeakPentagonPoly = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Kfc3Polygon = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(9),
							h = n(6),
							c = n(16),
							u = (function (e) {
								function t(t, n) {
									var r = e.call(this, n) || this;
									return (
										(r.position = t),
										(r.width = 3500),
										(r.height = 2100),
										(r.bottomInnerDim = !1),
										(r.hiddenSides = []),
										n || r.initLayout(),
										r
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'leftSideHidden', {
										get: function () {
											return this.hiddenSides.some(function (e) {
												return e === s.Direction.Left;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'rightSideHidden', {
										get: function () {
											return this.hiddenSides.some(function (e) {
												return e === s.Direction.Right;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											var e = this.edges;
											return new c.WinPolygon(
												c.PolygonCreator.Ins.joinPointsWithSegment([
													e[0].end,
													e[1].end,
													e[2].end,
													e[4].end,
													e[6].end,
													e[8].end,
													e[10].end,
													e[11].end,
												]),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isSimpleClosed', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = c.PolyType.kfc3),
											(t.cpt = this.position.toJSON()),
											(t.bid = this.bottomInnerDim),
											(t.hs = this.hiddenSides),
											t
										);
									}),
									(t.prototype._clone = function () {
										var e = [];
										this.edges.forEach(function (t) {
											return e.push(t.clone());
										});
										var n = new t(this.position, e);
										return (
											(n.bottomInnerDim = this.bottomInnerDim),
											(n.hiddenSides = this.hiddenSides),
											n
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 12; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										this.ctlRobs.set(5, {
											arc: !1,
											endpoint: !1,
										}),
											this.ctlRobs.set(9, {
												arc: !1,
												endpoint: !1,
											}),
											(this.imIdx = new Map([
												[0, 1],
												[1, 2],
												[2, 3],
												[3, 0],
												[4, 3],
												[5, 4],
												[6, 5],
												[7, 0],
												[8, 5],
												[9, 6],
												[10, 7],
												[11, 0],
												[12, 7],
												[13, 8],
												[14, 9],
												[15, 0],
												[16, 9],
												[17, 10],
												[18, 11],
												[19, 0],
											]));
									}),
									(t.prototype.initLayout = function () {
										var e = this;
										this.clear(),
											this.initEdges().forEach(function (t) {
												return e.add(t);
											}),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.initEdges = function () {
										var e = this,
											t = this.width / 5,
											n = a.default.point(0 * t, 0),
											r = a.default.point(1 * t, 0),
											i = a.default.point(2 * t, 0),
											o = a.default.point(3 * t, 0),
											s = a.default.point(4 * t, 0),
											l = a.default.point(5 * t, 0),
											h = a.default.point(0 * t, -this.height),
											c = a.default.point(1 * t, -this.height),
											u = a.default.point(2 * t, -this.height),
											p = a.default.point(3 * t, -this.height),
											f = a.default.point(4 * t, -this.height),
											d = a.default.point(5 * t, -this.height),
											g = [
												a.default.segment(d, h),
												a.default.segment(h, n),
												a.default.segment(n, r),
												a.default.segment(r, c),
												a.default.segment(r, i),
												a.default.segment(u, i),
												a.default.segment(i, o),
												a.default.segment(o, p),
												a.default.segment(o, s),
												a.default.segment(f, s),
												a.default.segment(s, l),
												a.default.segment(l, d),
											];
										return (
											g.forEach(function (t, n) {
												g[n] = t.translate(a.default.vector(-e.width / 2, e.height / 2));
											}),
											g
										);
									}),
									(t.prototype.frametify = function (e, t) {
										return new l.Kfc3Frametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (n, r, i) {
										void 0 === i && (i = a.default.point());
										var o = this.edges,
											s = a.default.line(o[n].start, o[n].end),
											l = a.default.line(s.pt.translate(r), s.norm);
										if (1 === n || 11 === n) o = e.prototype.dragEdge.call(this, n, r, i).edges;
										else if (2 === n || 6 === n || 10 === n) {
											var h = l.intersect(a.default.line(o[1].start, o[1].end))[0],
												c = l.intersect(a.default.line(o[3].start, o[3].end))[0],
												u = l.intersect(a.default.line(o[5].start, o[5].end))[0],
												p = l.intersect(a.default.line(o[7].start, o[7].end))[0],
												f = l.intersect(a.default.line(o[9].start, o[9].end))[0],
												d = l.intersect(a.default.line(o[11].start, o[11].end))[0];
											(o[1] = a.default.segment(o[1].start, h)),
												(o[2] = a.default.segment(h, c)),
												(o[3] = a.default.segment(c, o[3].end)),
												(o[4] = a.default.segment(c, u)),
												(o[5] = a.default.segment(o[5].start, u)),
												(o[6] = a.default.segment(u, p)),
												(o[7] = a.default.segment(p, o[7].end)),
												(o[8] = a.default.segment(p, f)),
												(o[9] = a.default.segment(o[9].start, f)),
												(o[10] = a.default.segment(f, d)),
												(o[11] = a.default.segment(d, o[11].end));
										} else if (0 === n) {
											var g = l.intersect(a.default.line(o[1].start, o[1].end))[0],
												y = l.intersect(a.default.line(o[3].start, o[3].end))[0],
												m = l.intersect(a.default.line(o[5].start, o[5].end))[0],
												v = l.intersect(a.default.line(o[7].start, o[7].end))[0],
												w = l.intersect(a.default.line(o[9].start, o[9].end))[0],
												b = l.intersect(a.default.line(o[11].start, o[11].end))[0];
											(o[0] = a.default.segment(b, g)),
												(o[1] = a.default.segment(g, o[1].end)),
												(o[3] = a.default.segment(o[3].start, y)),
												(o[5] = a.default.segment(m, o[5].end)),
												(o[7] = a.default.segment(o[7].start, v)),
												(o[9] = a.default.segment(w, o[9].end)),
												(o[11] = a.default.segment(o[11].start, b));
										} else if (3 === n) {
											var S = l.intersect(a.default.line(o[0].start, o[0].end))[0],
												_ = l.intersect(a.default.line(o[2].start, o[2].end))[0];
											(o[3] = a.default.segment(_, S)),
												(o[2] = a.default.segment(o[2].start, _)),
												(o[4] = a.default.segment(_, o[4].end));
										} else
											5 === n
												? ((S = l.intersect(a.default.line(o[0].start, o[0].end))[0]),
												  (_ = l.intersect(a.default.line(o[2].start, o[2].end))[0]),
												  (o[5] = a.default.segment(S, _)),
												  (o[4] = a.default.segment(o[4].start, _)),
												  (o[6] = a.default.segment(_, o[6].end)))
												: 7 === n
												? ((S = l.intersect(a.default.line(o[0].start, o[0].end))[0]),
												  (_ = l.intersect(a.default.line(o[2].start, o[2].end))[0]),
												  (o[7] = a.default.segment(_, S)),
												  (o[6] = a.default.segment(o[6].start, _)),
												  (o[8] = a.default.segment(_, o[8].end)))
												: 9 === n &&
												  ((S = l.intersect(a.default.line(o[0].start, o[0].end))[0]),
												  (_ = l.intersect(a.default.line(o[2].start, o[2].end))[0]),
												  (o[9] = a.default.segment(S, _)),
												  (o[8] = a.default.segment(o[8].start, _)),
												  (o[10] = a.default.segment(_, o[10].end)));
										var P = new t(this.position, o);
										return (
											(P.bottomInnerDim = this.bottomInnerDim),
											(P.hiddenSides = this.hiddenSides),
											P
										);
									}),
									(t.prototype.editDim = function (e, t, n) {
										return 1 === e ? this.dragEdge(11, n.invert()) : this.dragEdge(e, n);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: h.EventType.kfc_frame_settings,
											payload: new h.KfcFrameSettings(e, e.view),
										});
									}),
									t
								);
							})(c.WinPolygon);
						t.Kfc3Polygon = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Ear2Polygon = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(9),
							h = n(6),
							c = n(16),
							u = n(2),
							p = (function (e) {
								function t(t, n, r, i, o) {
									void 0 === n && (n = !1), void 0 === r && (r = !1), void 0 === i && (i = !1);
									var a = e.call(this, o) || this;
									return (
										(a.position = t),
										(a.isVertical = n),
										(a.xFlip = r),
										(a.yFlip = i),
										(a.width = 2500),
										(a.width1 = 500),
										(a.width2 = 400),
										(a.height = 1600),
										(a.height1 = 500),
										(a.hasBase = !0),
										(a.pullingHeight = []),
										o || a.initLayout(),
										a
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											var e = this.edges;
											return new c.WinPolygon(
												c.PolygonCreator.Ins.joinPointsWithSegment([
													e[5].end,
													e[0].end,
													e[1].end,
													e[2].end,
													e[3].end,
													e[4].end,
												]),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'center', {
										get: function () {
											var e = this.edges,
												t = new a.default.Box();
											return (t = (t = t.merge(e[2].box)).merge(e[3].box)).center;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.initLayout = function () {
										var e = this;
										this.clear();
										var t = this.initEdges();
										t.forEach(function (t) {
											return e.add(t);
										}),
											(this.pullingHeight = Array(t.length).fill(0)),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = c.PolyType.ear2),
											(t.cpt = this.position.toJSON()),
											(t.isVertical = this.isVertical),
											(t.xFlip = this.xFlip),
											(t.yFlip = this.yFlip),
											(t.hb = this.hasBase),
											(t.ph = this.pullingHeight),
											t
										);
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(this.position, this.isVertical, this.xFlip, this.yFlip, e)
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 7; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										this.ctlRobs.set(0, {
											arc: !1,
											endpoint: !1,
										}),
											this.ctlRobs.set(6, {
												arc: !1,
												endpoint: !1,
											}),
											this.ctlRobs.set(7, {
												arc: !1,
												endpoint: !1,
											}),
											(this.imIdx = new Map([
												[0, 0],
												[1, 1],
												[2, 2],
												[3, 6],
												[4, 4],
												[5, 6],
												[6, 2],
												[7, 3],
												[8, 4],
												[9, 5],
												[10, 0],
												[11, 6],
											]));
									}),
									(t.prototype.frametify = function (e, t) {
										return new l.Ear2Frametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.edges,
											o = a.default.line(i[e].start, i[e].end),
											s = a.default.line(o.pt.translate(n), o.norm);
										if (((n = n.projectionOn(o.norm)), 0 === e)) {
											var l = s.intersect(a.default.line(i[1].start, i[1].end))[0],
												h = s.intersect(a.default.line(i[5].start, i[5].end))[0];
											(i[0] = i[0].translate(n)),
												(i[1] = a.default.segment(l, i[1].end)),
												(i[5] = a.default.segment(i[5].start, h));
										} else if (5 === e) {
											var c = s.intersect(a.default.line(i[4].start, i[4].end))[0],
												u = s.intersect(a.default.line(i[0].start, i[0].end))[0];
											(i[5] = a.default.segment(c, u)), (i[4] = a.default.segment(i[4].start, c));
										} else if (6 === e) {
											u = s.intersect(a.default.line(i[0].start, i[0].end))[0];
											var p = s.intersect(a.default.line(i[7].start, i[7].end))[0];
											(i[6] = i[6].translate(n)),
												(i[0] = a.default.segment(u, i[0].end)),
												(i[7] = a.default.segment(p, i[7].end));
										} else if (4 === e) {
											var f = s.intersect(a.default.line(i[3].start, i[3].end))[0],
												d =
													((h = s.intersect(a.default.line(i[5].start, i[5].end))[0]),
													s.intersect(a.default.line(i[6].start, i[6].end))[0]);
											(i[4] = a.default.segment(f, h)),
												(i[3] = a.default.segment(i[3].start, f)),
												(i[5] = a.default.segment(h, i[5].end)),
												(i[6] = a.default.segment(i[6].start, d));
										} else if (3 === e) {
											var g = s.intersect(a.default.line(i[2].start, i[2].end))[0];
											(c = s.intersect(a.default.line(i[4].start, i[4].end))[0]),
												(p = s.intersect(a.default.line(i[7].start, i[7].end))[0]),
												(i[3] = a.default.segment(g, c)),
												(i[2] = a.default.segment(i[2].start, g)),
												(i[4] = a.default.segment(c, i[4].end)),
												(i[7] = a.default.segment(i[7].start, p));
										} else
											2 === e
												? ((l = s.intersect(a.default.line(i[1].start, i[1].end))[0]),
												  (d = s.intersect(a.default.line(i[6].start, i[6].end))[0]),
												  (f = s.intersect(a.default.line(i[3].start, i[3].end))[0]),
												  (i[2] = a.default.segment(l, f)),
												  (i[7] = a.default.segment(d, f)),
												  (i[1] = a.default.segment(i[1].start, l)),
												  (i[6] = a.default.segment(d, i[6].end)),
												  (i[3] = a.default.segment(f, i[3].end)))
												: 1 === e &&
												  ((u = s.intersect(a.default.line(i[0].start, i[0].end))[0]),
												  (g = s.intersect(a.default.line(i[2].start, i[2].end))[0]),
												  (i[1] = i[1].translate(n)),
												  (i[0] = a.default.segment(i[0].start, u)),
												  (i[2] = a.default.segment(g, i[2].end)));
										var y = new t(this.position, this.isVertical, this.xFlip, this.yFlip, i);
										return (y.hasBase = this.hasBase), (y.pullingHeight = this.pullingHeight), y;
									}),
									(t.prototype.editDim = function (e, t, n) {
										return 0 === e
											? this.dragEdge(6, n.invert())
											: 3 === e
											? this.dragEdge(1, n.invert())
											: 6 === e
											? this.dragEdge(0, n)
											: this.dragEdge(e, n);
									}),
									(t.prototype.flipX = function () {
										var e = this,
											n = this.edges,
											r = this.center;
										return new t(
											this.position,
											this.isVertical,
											!this.xFlip,
											this.yFlip,
											n.map(function (t) {
												return e.flipXForSeg(t, r);
											}),
										);
									}),
									(t.prototype.flipY = function () {
										var e = this,
											n = this.edges,
											r = this.center;
										return new t(
											this.position,
											this.isVertical,
											this.xFlip,
											!this.yFlip,
											n.map(function (t) {
												return e.flipYForSeg(t, r);
											}),
										);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: h.EventType.ear2_frame_settings,
											payload: new h.Ear2FrameSettings(e, e.view),
										});
									}),
									(t.prototype.initEdges = function () {
										var e = this,
											t = this.width,
											n = this.width1,
											r = t - n,
											i = t - n - this.width2,
											o = this.height,
											s = o - this.height1,
											l = a.default.point(r, s),
											h = a.default.point(0, s),
											c = a.default.point(0, 0),
											u = a.default.point(t, 0),
											p = a.default.point(t, o),
											f = a.default.point(i, o),
											d = a.default.point(i, s),
											g = a.default.point(r, 0),
											y = a.default.point(r, o),
											m = [
												a.default.segment(l, h),
												a.default.segment(h, c),
												a.default.segment(c, u),
												a.default.segment(u, p),
												a.default.segment(p, f),
												a.default.segment(f, d),
												a.default.segment(g, y),
												a.default.segment(g, u),
											];
										return (
											m.forEach(function (t, n) {
												(m[n] = t.translate(a.default.vector(-e.width / 2, -e.height / 2))),
													e.isVertical && (m[n] = m[n].rotate(-Math.PI / 2)),
													e.xFlip && (m[n] = e.flipXForSeg(m[n])),
													e.yFlip && (m[n] = e.flipYForSeg(m[n]));
											}),
											m
										);
									}),
									(t.prototype.flipXForSeg = function (e, t) {
										void 0 === t && (t = a.default.point());
										var n = t.x;
										return a.default.segment(
											a.default.point(2 * n - e.start.x, e.start.y),
											a.default.point(2 * n - e.end.x, e.end.y),
										);
									}),
									(t.prototype.flipYForSeg = function (e, t) {
										void 0 === t && (t = a.default.point());
										var n = t.y;
										return a.default.segment(
											a.default.point(e.start.x, 2 * n - e.start.y),
											a.default.point(e.end.x, 2 * n - e.end.y),
										);
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[0];
										this.toMulCCBar(t),
											(t.connectCount =
												e[0].epDock.etDock.type === u.DockType.None &&
												e[1].epDock.stDock.type === u.DockType.None
													? 2
													: 3),
											(t.dockCount = e[0].epDock.etDock.type === u.DockType.Frame ? 2 : 1);
										var n = e[6];
										this.toMulCCBar(n), (n.connectCount = 3), (n.dockCount = 2);
									}),
									Object.defineProperty(t.prototype, 'asMulEdgeIndexes', {
										get: function () {
											return [0, 6];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.updatePullingHeightLabel = function (e) {
										var t = this.pullingHeight[1];
										!this.hasBase &&
											t &&
											((e.text = s.DrawParams.Ins.lang('pulling_height') + t.toString()),
											(e.position = this.edge(1).middle()),
											(e.position = e.position.translate(
												a.default.vector(0, (0.75 * e.fontSize) / 2 - t),
											))),
											(e.hidden = !t),
											e.updatePoly();
									}),
									(t.prototype.pullingHeightMigration = function (e, t) {
										var n = this.pullingHeight[1];
										if (!this.hasBase && n) {
											var r = this.edges,
												i = new c.WinPolygon(
													c.PolygonCreator.Ins.joinPointsWithSegment([
														r[0].start,
														r[0].end,
														r[2].start,
														r[6].start,
													]),
												),
												o = e.splitter.subs
													.filter(function (e) {
														return !e.IsMullion && i.contains(e.box.center);
													})
													.sort(function (e, t) {
														return e.polygon.box.ymax - t.polygon.box.ymax;
													})
													.pop();
											o &&
												(e.splitter.setPullingHeight(o.polyId, n),
												t.setVirtual(new u.PolyId(1, -1), !0),
												(this.pullingHeight[1] = 0),
												(this.hasBase = !0));
										}
									}),
									(t.prototype.dragVertex = function (e, n, r, i) {
										if (this.isVertical) {
											if (1 === e || 2 === e || 3 === e || 4 === e || 5 === e) {
												var o = this.edges;
												n = n.projectionOn(a.default.vector(0, 1));
												var s = o[e].start.translate(n),
													l = (e - 1) % o.length;
												return (
													(o[e] = a.default.segment(s, o[e].end)),
													(o[l] = a.default.segment(o[l].start, s)),
													3 === e && (o[7] = a.default.segment(o[6].start, o[2].end)),
													new t(this.position, this.isVertical, this.xFlip, this.yFlip, o)
												);
											}
											return this;
										}
										return this;
									}),
									t
								);
							})(c.WinPolygon);
						t.Ear2Polygon = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Ear3Polygon = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(16),
							h = n(2),
							c = (function (e) {
								function t(t, n) {
									var r = e.call(this, n) || this;
									return (
										(r.position = t),
										(r.width = 1500),
										(r.width1 = 500),
										(r.width2 = 550),
										(r.height = 1600),
										(r.height1 = 500),
										(r.hasBase = !0),
										(r.pullingHeight = []),
										n || r.initLayout(),
										r
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											var e = this.edges;
											return new l.WinPolygon(
												l.PolygonCreator.Ins.joinPointsWithSegment([
													e[5].end,
													e[0].end,
													e[1].end,
													e[2].end,
													e[3].end,
													e[4].end,
												]),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.initLayout = function () {
										var e = this;
										this.clear(),
											this.initEdges().forEach(function (t) {
												return e.add(t);
											}),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.ear3),
											(t.cpt = this.position.toJSON()),
											(t.hb = this.hasBase),
											(t.ph = this.pullingHeight),
											t
										);
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(this.position, e)
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = this, t = 0; t < 12; t++)
											this.ctlRobs.set(t, {
												arc: !1,
												endpoint: !0,
											});
										[0, 3, 6, 8, 9, 10, 11].forEach(function (t) {
											e.ctlRobs.set(t, {
												arc: !1,
												endpoint: !1,
											});
										}),
											(this.imIdx = new Map([
												[0, 0],
												[1, 9],
												[2, 6],
												[3, 7],
												[4, 0],
												[5, 8],
												[6, 4],
												[7, 9],
												[8, 0],
												[9, 1],
												[10, 2],
												[11, 8],
												[12, 2],
												[13, 3],
												[14, 4],
												[15, 8],
												[16, 6],
												[17, 9],
												[18, 4],
												[19, 5],
											]));
									}),
									(t.prototype.frametify = function (e, t) {
										return new s.Ear3Frametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.edges,
											o = a.default.line(i[e].start, i[e].end),
											s = a.default.line(o.pt.translate(n), o.norm);
										if (((n = n.projectionOn(o.norm)), 0 === e)) {
											var l = s.intersect(a.default.line(i[1].start, i[1].end))[0],
												h = s.intersect(a.default.line(i[7].start, i[7].end))[0],
												c = s.intersect(a.default.line(i[8].start, i[8].end))[0],
												u = s.intersect(a.default.line(i[9].start, i[9].end))[0];
											(i[0] = i[0].translate(n)),
												(i[1] = a.default.segment(l, i[1].end)),
												(i[7] = a.default.segment(i[7].start, h)),
												(i[8] = a.default.segment(c, i[8].end)),
												(i[9] = a.default.segment(u, i[9].end));
										} else if (1 === e) {
											var p = s.intersect(a.default.line(i[0].start, i[0].end))[0],
												f = s.intersect(a.default.line(i[2].start, i[2].end))[0];
											(i[1] = i[1].translate(n)),
												(i[0] = a.default.segment(i[0].start, p)),
												(i[2] = a.default.segment(f, i[2].end));
										} else if (2 === e) {
											l = s.intersect(a.default.line(i[1].start, i[1].end))[0];
											var d = s.intersect(a.default.line(i[3].start, i[3].end))[0];
											(i[1] = a.default.segment(i[1].start, l)),
												(i[2] = i[2].translate(n)),
												(i[3] = a.default.segment(d, i[3].end)),
												(i[10] = i[10].translate(n));
										} else if (3 === e) {
											var g = s.intersect(a.default.line(i[4].start, i[4].end))[0],
												y = s.intersect(a.default.line(i[10].start, i[10].end))[0];
											(i[3] = i[3].translate(n)),
												(i[4] = a.default.segment(g, i[4].end)),
												(i[10] = a.default.segment(i[10].start, y));
										} else if (4 === e) {
											d = s.intersect(a.default.line(i[3].start, i[3].end))[0];
											var m = s.intersect(a.default.line(i[5].start, i[5].end))[0];
											(c = s.intersect(a.default.line(i[8].start, i[8].end))[0]),
												(u = s.intersect(a.default.line(i[9].start, i[9].end))[0]),
												(i[4] = i[4].translate(n)),
												(i[3] = a.default.segment(i[3].start, d)),
												(i[5] = a.default.segment(m, i[5].end)),
												(i[8] = a.default.segment(i[8].start, c)),
												(i[9] = a.default.segment(i[9].start, u));
										} else if (5 === e) {
											g = s.intersect(a.default.line(i[4].start, i[4].end))[0];
											var v = s.intersect(a.default.line(i[11].start, i[11].end))[0];
											(i[5] = i[5].translate(n)),
												(i[4] = a.default.segment(i[4].start, g)),
												(i[11] = a.default.segment(v, i[11].end));
										} else if (6 === e)
											(m = s.intersect(a.default.line(i[5].start, i[5].end))[0]),
												(h = s.intersect(a.default.line(i[7].start, i[7].end))[0]),
												(i[5] = a.default.segment(i[5].start, m)),
												(i[6] = i[6].translate(n)),
												(i[7] = a.default.segment(h, i[7].end)),
												(i[11] = i[11].translate(n));
										else if (7 === e) {
											p = s.intersect(a.default.line(i[0].start, i[0].end))[0];
											var w = s.intersect(a.default.line(i[6].start, i[6].end))[0];
											(i[0] = a.default.segment(p, i[0].end)),
												(i[6] = a.default.segment(i[6].start, w)),
												(i[7] = i[7].translate(n));
										} else
											8 === e
												? ((f = s.intersect(a.default.line(i[2].start, i[2].end))[0]),
												  (i[8] = i[8].translate(n)),
												  (i[2] = a.default.segment(i[2].start, f)),
												  (i[10] = a.default.segment(f, i[10].end)))
												: 9 === e &&
												  ((w = s.intersect(a.default.line(i[6].start, i[6].end))[0]),
												  (i[9] = i[9].translate(n)),
												  (i[6] = a.default.segment(w, i[6].end)),
												  (i[11] = a.default.segment(i[11].start, w)));
										return new t(this.position, i);
									}),
									(t.prototype.editDim = function (e, t, n) {
										return 0 === e
											? this.dragEdge(9, n)
											: 1 === e
											? this.dragEdge(1, n.multiply(0.5)).dragEdge(7, n.multiply(0.5).invert())
											: 5 === e
											? this.dragEdge(5, n.multiply(0.5)).dragEdge(3, n.multiply(0.5).invert())
											: 3 === e
											? this.dragEdge(1, n.invert())
											: 9 === e || 10 === e
											? this.dragEdge(0, n.invert())
											: 11 === e
											? this.dragEdge(8, n.invert())
											: this.dragEdge(e, n);
									}),
									(t.prototype.initEdges = function () {
										var e = this,
											t = this.width,
											n = this.width1,
											r = t - n,
											i = t - n - this.width2,
											o = this.height,
											s = o - this.height1,
											l = a.default.point(0, 0),
											h = a.default.point(2 * t, 0),
											c = a.default.point(2 * t, s),
											u = a.default.point(2 * t - r, s),
											p = a.default.point(2 * t - i, s),
											f = a.default.point(2 * t - i, o),
											d = a.default.point(i, o),
											g = a.default.point(i, s),
											y = a.default.point(r, s),
											m = a.default.point(0, s),
											v = a.default.point(t + n, 0),
											w = a.default.point(t + n, o),
											b = a.default.point(t - n, 0),
											S = a.default.point(t - n, o),
											_ = [
												a.default.segment(l, h),
												a.default.segment(h, c),
												a.default.segment(c, u),
												a.default.segment(p, f),
												a.default.segment(f, d),
												a.default.segment(d, g),
												a.default.segment(y, m),
												a.default.segment(m, l),
												a.default.segment(v, w),
												a.default.segment(b, S),
												a.default.segment(u, p),
												a.default.segment(g, y),
											];
										return (
											_.forEach(function (t, n) {
												_[n] = t.translate(a.default.vector(-e.width / 2, -e.height / 2));
											}),
											_
										);
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[2],
											n = e[6],
											r = e[8],
											i = e[9];
										this.toMulCCBar(t),
											this.toMulCCBar(n),
											this.toMulCCBar(r),
											this.toMulCCBar(i),
											(t.connectCount = 2),
											(t.dockCount = t.epDock.stDock.type === h.DockType.Frame ? 2 : 1),
											(n.connectCount = 2),
											(n.dockCount = n.epDock.etDock.type === h.DockType.Frame ? 2 : 1),
											(r.connectCount = 3),
											(r.dockCount = 2),
											(i.connectCount = 3),
											(i.dockCount = 2);
									}),
									Object.defineProperty(t.prototype, 'asMulEdgeIndexes', {
										get: function () {
											return [8, 9];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.updatePullingHeightLabel = function (e) {}),
									(t.prototype.pullingHeightMigration = function (e, t) {}),
									(t.prototype.dragVertex = function (e, t, n, r) {
										return this;
									}),
									t
								);
							})(l.WinPolygon);
						t.Ear3Polygon = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HalfKfcPolygon = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(16),
							h = n(2),
							c = n(6),
							u = (function (e) {
								function t(t, n, r, i) {
									void 0 === n && (n = !1), void 0 === r && (r = 60);
									var o = e.call(this, i) || this;
									return (
										(o.position = t),
										(o.xFlip = n),
										(o.profileSize = r),
										(o.width = 2500),
										(o.width1 = 1740),
										(o.height = 1600),
										i || o.initLayout(),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											return new l.WinPolygon(this.box);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'area', {
										get: function () {
											return this.boxArea;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'center', {
										get: function () {
											var e = this.edges,
												t = new a.default.Box();
											return (t = (t = t.merge(e[1].box)).merge(e[2].box)).center;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.initLayout = function () {
										var e = this;
										this.clear(),
											this.initEdges().forEach(function (t) {
												return e.add(t);
											}),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.halfKfc),
											(t.cpt = this.position.toJSON()),
											(t.xFlip = this.xFlip),
											(t.profileSize = this.profileSize),
											t
										);
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(this.position, this.xFlip, this.profileSize, e)
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 5; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										this.ctlRobs.set(0, {
											arc: !1,
											endpoint: !1,
										}),
											(this.imIdx = new Map([
												[0, 0],
												[1, 1],
												[2, 4],
												[3, 5],
												[4, 4],
												[5, 1],
												[6, 2],
												[7, 3],
											]));
									}),
									(t.prototype.frametify = function (e, t) {
										var n = this;
										if (this.profileSize !== e[0]) {
											var r = this.edges;
											(r[5] = a.default.segment(
												r[5].start,
												r[5].end.translate(r[5].tangentInEnd().multiply(e[0] - this.profileSize)),
											)),
												(this.profileSize = e[0]),
												this.clear(),
												r.forEach(function (e) {
													return n.add(e);
												}),
												this.done();
										}
										return new s.HalfKfcFrametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.edges,
											o = a.default.line(i[e].start, i[e].end),
											s = a.default.line(o.pt.translate(n), o.norm);
										if (((n = n.projectionOn(o.norm)), 0 === e)) {
											var l = s.intersect(a.default.line(i[1].start, i[1].end))[0],
												h = s.intersect(a.default.line(i[5].start, i[5].end))[0];
											(i[0] = a.default.segment(i[0].start.translate(n), l)),
												(i[1] = a.default.segment(l, i[1].end)),
												(i[5] = this.fixInnerDimEdge(a.default.segment(i[5].start, h)));
										} else if (1 === e) {
											var c = s.intersect(a.default.line(i[0].start, i[0].end))[0],
												u = s.intersect(a.default.line(i[4].start, i[4].end))[0],
												p = s.intersect(a.default.line(i[2].start, i[2].end))[0];
											(i[1] = a.default.segment(c, p)),
												(i[0] = a.default.segment(i[0].start, c)),
												(i[4] = a.default.segment(i[4].start, u)),
												(i[2] = a.default.segment(p, i[2].end));
										} else if (2 === e) {
											l = s.intersect(a.default.line(i[1].start, i[1].end))[0];
											var f = s.intersect(a.default.line(i[3].start, i[3].end))[0];
											(i[2] = a.default.segment(l, i[2].end.translate(n))),
												(i[1] = a.default.segment(i[1].start, l)),
												(i[3] = a.default.segment(f, i[3].end));
										} else
											3 === e
												? ((c = s.intersect(a.default.line(i[0].start, i[0].end))[0]),
												  (u = s.intersect(a.default.line(i[4].start, i[4].end))[0]),
												  (p = s.intersect(a.default.line(i[2].start, i[2].end))[0]),
												  (i[3] = i[3].translate(n)),
												  (i[5] = i[5].translate(n)),
												  (i[0] = a.default.segment(c, i[0].end)),
												  (i[4] = a.default.segment(u, i[4].end)),
												  (i[2] = a.default.segment(i[2].start, p)))
												: 4 === e &&
												  ((l = s.intersect(a.default.line(i[1].start, i[1].end))[0]),
												  (f = s.intersect(a.default.line(i[3].start, i[3].end))[0]),
												  (i[4] = a.default.segment(f, l)),
												  (i[3] = a.default.segment(i[3].start, f)),
												  (i[5] = this.fixInnerDimEdge(a.default.segment(f, i[0].start))));
										return new t(this.position, this.xFlip, this.profileSize, i);
									}),
									(t.prototype.dragVertex = function (e, n) {
										var r = this.edges;
										n = n.projectionOn(a.default.vector(0, 1));
										var i = r[e].start.translate(n);
										if (1 === e) {
											(r[0] = a.default.segment(r[0].start, i)),
												(r[1] = a.default.segment(i, r[1].end));
											var o = a.default
												.line(i, r[1].end)
												.intersect(a.default.line(r[4].start, r[4].end))[0];
											r[4] = a.default.segment(r[4].start, o);
										} else
											2 === e &&
												((r[1] = a.default.segment(r[1].start, i)),
												(r[2] = a.default.segment(i, r[2].end)),
												(o = a.default
													.line(r[1].start, i)
													.intersect(a.default.line(r[4].start, r[4].end))[0]),
												(r[4] = a.default.segment(r[4].start, o)));
										return new t(this.position, this.xFlip, this.profileSize, r);
									}),
									(t.prototype.editDim = function (e, t, n) {
										return 0 === e
											? this.dragEdge(4, n.invert())
											: 1 === e
											? this.dragVertex(1, n)
											: 3 === e
											? this.dragVertex(2, n.invert())
											: 5 === e
											? this.dragEdge(1, n)
											: 2 === e
											? this.dragEdge(0, n.invert()).dragEdge(4, n.invert())
											: this.dragEdge(e, n);
									}),
									(t.prototype.flipX = function () {
										var e = this;
										this.xFlip = !this.xFlip;
										var n = this.edges,
											r = this.center;
										return new t(
											this.position,
											this.xFlip,
											this.profileSize,
											n.map(function (t) {
												return e.flipXForSeg(t, r);
											}),
										);
									}),
									(t.prototype.setProfileSize = function (e) {
										this.profileSize = e;
										var n = this.edges;
										return (
											(n[5] = a.default.segment(
												n[5].start,
												n[0].start.translate(n[5].tangentInEnd().multiply(e)),
											)),
											new t(this.position, this.xFlip, this.profileSize, n)
										);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: c.EventType.half_kfc_frame_settings,
											payload: new c.HalfKfcFrameSettings(e, e.view),
										});
									}),
									(t.prototype.initEdges = function () {
										var e = this,
											t = this.width,
											n = t - this.width1,
											r = this.height,
											i = a.default.point(0, r),
											o = a.default.point(0, 0),
											s = a.default.point(t, 0),
											l = a.default.point(t, r),
											h = a.default.point(n, r),
											c = a.default.point(n, 0),
											u = [
												a.default.segment(i, o),
												a.default.segment(o, s),
												a.default.segment(s, l),
												a.default.segment(l, h),
												a.default.segment(h, c),
												a.default.segment(h, i),
											];
										return (
											(u[5] = this.fixInnerDimEdge(u[5])),
											u.forEach(function (t, n) {
												(u[n] = t.translate(a.default.vector(-e.width / 2, -e.height / 2))),
													e.xFlip && (u[n] = e.flipXForSeg(u[n]));
											}),
											u
										);
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[4];
										this.toMulCCBar(t),
											(t.connectCount =
												e[3].epDock.etDock.type === h.DockType.None &&
												t.epDock.stDock.type === h.DockType.None
													? 1
													: 2),
											(t.dockCount = t.epDock.stDock.type === h.DockType.Frame ? 2 : 1);
									}),
									Object.defineProperty(t.prototype, 'asMulEdgeIndexes', {
										get: function () {
											return [4];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.fixInnerDimEdge = function (e) {
										return a.default.segment(
											e.start,
											e.end.translate(e.tangentInEnd().multiply(this.profileSize)),
										);
									}),
									(t.prototype.flipXForSeg = function (e, t) {
										void 0 === t && (t = a.default.point());
										var n = t.x;
										return a.default.segment(
											a.default.point(2 * n - e.start.x, e.start.y),
											a.default.point(2 * n - e.end.x, e.end.y),
										);
									}),
									t
								);
							})(l.WinPolygon);
						t.HalfKfcPolygon = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.AngledPentagonPoly = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(16),
							h = n(11),
							c = (function (e) {
								function t(n) {
									return e.call(this, n || t.create().edges) || this;
								}
								return (
									i(t, e),
									(t.create = function (e, n, r, i, o, s) {
										void 0 === e && (e = a.default.point()),
											void 0 === n && (n = 1200),
											void 0 === r && (r = 1920),
											void 0 === i && (i = 600),
											void 0 === o && (o = 600),
											void 0 === s && (s = h.Direction.Up);
										var c = l.PolygonCreator.Ins.joinRelativePro([
											a.default.vector(n, 0),
											a.default.vector(0, -r),
											a.default.vector(-i, 0),
											a.default.vector(-(n - i), r - o),
										]);
										return (
											s === h.Direction.Right
												? c.transform(new a.default.Matrix().scale(-1, 1))
												: s === h.Direction.Down
												? c.transform(new a.default.Matrix().scale(-1, -1))
												: s === h.Direction.Left &&
												  c.transform(new a.default.Matrix().scale(1, -1)),
											c.translate(a.default.vector(c.box.center, e)),
											new t(c.edges)
										);
									}),
									Object.defineProperty(t.prototype, 'cutAnglesCount', {
										get: function () {
											return 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.type = l.PolyType.angledPentagon), t;
									}),
									(t.prototype.translate = function (t) {
										return e.prototype.translate.call(this, t), this;
									}),
									(t.prototype.dragEdge = function (e, n) {
										var r = this.edges,
											i = a.default.line(r[e].start, r[e].end),
											o = a.default.line(i.pt.translate(n), i.norm);
										if (((n = n.projectionOn(i.norm)), 2 === e)) {
											var l = o.intersect(a.default.line(r[1].start, r[1].end))[0];
											(r[1] = a.default.segment(r[1].start, l)),
												(r[2] = r[2].translate(n)),
												(r[3] = a.default.segment(r[2].end, r[3].end));
										} else if (3 === e);
										else if (4 === e) {
											var h = o.intersect(a.default.line(r[0].start, r[0].end))[0];
											(r[4] = r[4].translate(n)),
												(r[3] = a.default.segment(r[3].start, r[4].start)),
												(r[0] = a.default.segment(h, r[0].end));
										} else
											(r[e] = r[e].translate(n)),
												s.Frametify.edgeIntersection(r, e),
												s.Frametify.edgeIntersection(r, (e + r.length - 1) % r.length);
										return this.invalid(r) ? this : new t(r);
									}),
									(t.prototype.editDim = function (e, t, n) {
										return this.dragEdge(e, n);
									}),
									(t.prototype.dragVertex = function () {
										return this;
									}),
									(t.prototype._clone = function () {
										return new t();
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 5; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
									}),
									(t.prototype.invalid = function (e) {
										return (
											!!a.default.Utils.EQ_0(e[2].length - e[0].length) ||
											!!a.default.Utils.EQ_0(e[4].length - e[1].length)
										);
									}),
									t
								);
							})(l.WinPolygon);
						t.AngledPentagonPoly = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Kfc4Polygon = void 0);
						var s = a(n(0)),
							l = n(9),
							h = n(16),
							c = n(6),
							u = n(2),
							p = (function (e) {
								function t(n) {
									var r,
										i,
										a = e.call(this, n) || this;
									if (n) return a;
									var s = t.initEdges();
									try {
										for (var l = o(s), h = l.next(); !h.done; h = l.next()) {
											var c = h.value;
											a.add(c);
										}
									} catch (e) {
										r = {
											error: e,
										};
									} finally {
										try {
											h && !h.done && (i = l.return) && i.call(l);
										} finally {
											if (r) throw r.error;
										}
									}
									return a.done(), a;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'area', {
										get: function () {
											return this.boxArea;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											return new h.WinPolygon(this.box);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.initEdges = function (e, t, n, r, i) {
										void 0 === e && (e = s.default.point()),
											void 0 === t && (t = 3e3),
											void 0 === n && (n = 500),
											void 0 === r && (r = 800),
											void 0 === i && (i = 300);
										var o = t,
											a = n,
											l = r,
											h = i,
											c = s.default.point(a, h),
											u = s.default.point(a, l),
											p = s.default.point(0, l),
											f = s.default.point(0, 0),
											d = s.default.point(o, 0),
											g = s.default.point(o, l),
											y = s.default.point(o - a, l),
											m = s.default.point(o - a, h),
											v = s.default.point(o, h),
											w = s.default.point(0, h),
											b = s.default.point(o - a, l),
											S = s.default.point(a, l),
											_ = [
												s.default.segment(c, u),
												s.default.segment(u, p),
												s.default.segment(p, f),
												s.default.segment(f, d),
												s.default.segment(d, g),
												s.default.segment(g, y),
												s.default.segment(y, m),
												s.default.segment(v, w),
												s.default.segment(b, S),
											],
											P = new s.default.Box();
										_.forEach(function (e) {
											return (P = P.merge(e.box));
										});
										var x = s.default.vector(P.center, e);
										return _.map(function (e) {
											return e.translate(x);
										});
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.type = h.PolyType.kfc4), t;
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(e)
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 9; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										this.ctlRobs.set(0, {
											arc: !1,
											endpoint: !1,
										}),
											this.ctlRobs.set(7, {
												arc: !1,
												endpoint: !1,
											}),
											this.ctlRobs.set(8, {
												arc: !1,
												endpoint: !1,
											}),
											(this.imIdx = new Map([
												[0, 0],
												[1, 1],
												[2, 2],
												[3, 7],
												[4, 4],
												[5, 7],
												[6, 2],
												[7, 3],
												[8, 4],
												[9, 5],
												[10, 6],
												[11, 7],
												[12, 6],
												[13, 8],
												[14, 0],
												[15, 7],
											]));
									}),
									(t.prototype.frametify = function (e, t) {
										return new l.Kfc4Frametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (e, t, n) {
										void 0 === n && (n = s.default.point());
										var r = this.edges,
											i = s.default.line(r[e].start, r[e].end),
											o = s.default.line(i.pt.translate(t), i.norm);
										if (((t = t.projectionOn(i.norm)), 0 === e)) {
											var a = o.intersect(s.default.line(r[1].start, r[1].end))[0];
											(r[0] = r[0].translate(t)),
												(r[1] = s.default.segment(a, r[1].end)),
												(r[8] = s.default.segment(r[8].start, a));
										} else if (1 === e || 5 === e || 8 === e) {
											var l = o.intersect(s.default.line(r[0].start, r[0].end))[0],
												h = o.intersect(s.default.line(r[2].start, r[2].end))[0],
												c = o.intersect(s.default.line(r[4].start, r[4].end))[0],
												u = o.intersect(s.default.line(r[6].start, r[6].end))[0];
											(r[1] = s.default.segment(l, h)),
												(r[0] = s.default.segment(r[0].start, l)),
												(r[2] = s.default.segment(h, r[2].end)),
												(r[5] = s.default.segment(c, u)),
												(r[4] = s.default.segment(r[4].start, c)),
												(r[6] = s.default.segment(u, r[6].end)),
												(r[8] = s.default.segment(u, l));
										} else if (2 === e) {
											a = o.intersect(s.default.line(r[1].start, r[1].end))[0];
											var p = o.intersect(s.default.line(r[3].start, r[3].end))[0],
												f = o.intersect(s.default.line(r[7].start, r[7].end))[0];
											(r[2] = s.default.segment(a, p)),
												(r[1] = s.default.segment(r[1].start, a)),
												(r[3] = s.default.segment(p, r[3].end)),
												(r[7] = s.default.segment(r[7].start, f));
										} else if (3 === e)
											(h = o.intersect(s.default.line(r[2].start, r[2].end))[0]),
												(c = o.intersect(s.default.line(r[4].start, r[4].end))[0]),
												(r[3] = s.default.segment(h, c)),
												(r[4] = s.default.segment(c, r[4].end)),
												(r[2] = s.default.segment(r[2].start, h));
										else if (4 === e) {
											p = o.intersect(s.default.line(r[3].start, r[3].end))[0];
											var d = o.intersect(s.default.line(r[5].start, r[5].end))[0];
											(f = o.intersect(s.default.line(r[7].start, r[7].end))[0]),
												(r[4] = s.default.segment(p, d)),
												(r[3] = s.default.segment(r[3].start, p)),
												(r[5] = s.default.segment(d, r[5].end)),
												(r[7] = s.default.segment(f, r[7].end));
										} else
											6 === e
												? ((d = o.intersect(s.default.line(r[5].start, r[5].end))[0]),
												  (r[6] = r[6].translate(t)),
												  (r[5] = s.default.segment(r[5].start, d)),
												  (r[8] = s.default.segment(d, r[8].end)))
												: 7 === e &&
												  ((l = o.intersect(s.default.line(r[0].start, r[0].end))[0]),
												  (u = o.intersect(s.default.line(r[6].start, r[6].end))[0]),
												  (r[7] = r[7].translate(t)),
												  (r[0] = s.default.segment(l, r[0].end)),
												  (r[6] = s.default.segment(r[6].start, u)));
										return this.wrapEdges(r);
									}),
									(t.prototype.wrapEdges = function (e) {
										return new t(e);
									}),
									(t.prototype.dragVertex = function (e, t) {
										return this;
									}),
									(t.prototype.editDim = function (e, t, n) {
										return 0 === e
											? this.dragEdge(6, n.invert())
											: 1 === e
											? this.dragEdge(7, n.invert())
											: 2 === e
											? this.dragEdge(0, n.invert())
											: this.dragEdge(e, n);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: c.EventType.frame_settings,
											payload: new c.FrameSettings(e, e.view),
										});
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[0];
										this.toMulCCBar(t),
											(t.connectCount =
												t.epDock.etDock.type === u.DockType.None &&
												e[1].epDock.stDock.type === u.DockType.None
													? 1
													: 2),
											(t.dockCount = t.epDock.stDock.type === u.DockType.Frame ? 2 : 1);
										var n = e[6];
										this.toMulCCBar(n),
											(n.connectCount =
												e[5].epDock.etDock.type === u.DockType.None &&
												n.epDock.stDock.type === u.DockType.None
													? 1
													: 2),
											(n.dockCount = n.epDock.stDock.type === u.DockType.Frame ? 2 : 1);
										var r = e[7];
										this.toMulCCBar(r), (r.connectCount = 2), (r.dockCount = 2);
									}),
									Object.defineProperty(t.prototype, 'asMulEdgeIndexes', {
										get: function () {
											return [0, 6, 7];
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(h.WinPolygon);
						t.Kfc4Polygon = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Hollow2Polygon = void 0);
						var o = n(9),
							a = n(16),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'asMulEdgeIndexes', {
										get: function () {
											return [7];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.type = a.PolyType.hollow2), t;
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(e)
										);
									}),
									(t.prototype.initPoly = function () {
										e.prototype.initPoly.call(this),
											(this.imIdx = new Map([
												[0, 0],
												[1, 1],
												[2, 2],
												[3, 7],
												[4, 4],
												[5, 7],
												[6, 2],
												[7, 3],
												[8, 4],
												[9, 5],
												[10, 6],
												[11, 7],
											]));
									}),
									(t.prototype.frametify = function (e, t) {
										return new o.Hollow2Frametify(this).run(e, t);
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[7];
										this.toMulCCBar(t), (t.connectCount = 2), (t.dockCount = 2);
									}),
									(t.prototype.wrapEdges = function (e) {
										return new t(e);
									}),
									t
								);
							})(a.Kfc4Polygon);
						t.Hollow2Polygon = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.AngledHexagonPoly = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(16),
							h = n(6),
							c = (function (e) {
								function t(n, r, i, o, a, s) {
									var l = e.call(this, s || t.create(n, r, i, o, a).edges) || this;
									return (
										(l.cpt = n),
										(l.width = r),
										(l.height = i),
										(l.remainingWidth = o),
										(l.remainingHeight = a),
										l
									);
								}
								return (
									i(t, e),
									(t.create = function (e, n, r, i, o) {
										void 0 === e && (e = a.default.point()),
											void 0 === n && (n = 2400),
											void 0 === r && (r = 1920),
											void 0 === i && (i = 600),
											void 0 === o && (o = 520);
										var s = new l.WinPolygon(
											l.PolygonCreator.Ins.joinPointsWithSegment([
												a.default.point(0, 0),
												a.default.point(n, 0),
												a.default.point(n, o - r),
												a.default.point(n - i, -r),
												a.default.point(i, -r),
												a.default.point(0, o - r),
											]),
										);
										return new t(
											e,
											n,
											r,
											i,
											o,
											(s = s.translate(a.default.vector(s.box.center, e))).edges,
										);
									}),
									Object.defineProperty(t.prototype, 'cutAnglesCount', {
										get: function () {
											return 2;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.angledHexagon),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											(t.height = this.height),
											(t.rw = this.remainingWidth),
											(t.rh = this.remainingHeight),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return e.prototype.translate.call(this, t), this;
									}),
									(t.prototype.dragEdge = function (e, n) {
										var r = this.edges,
											i = a.default.line(r[e].start, r[e].end),
											o = a.default.line(i.pt.translate(n), i.norm);
										if (((n = n.projectionOn(i.norm)), 3 === e)) {
											(r[3] = r[3].translate(n)),
												(r[2] = a.default.segment(r[1].end, r[3].start)),
												(r[4] = a.default.segment(r[3].end, r[4].end));
											var l = r[2];
											if (a.default.Utils.EQ_0(l.slope - Math.PI)) return this;
											var h = this.remainingHeight;
											(this.remainingHeight = l.length * Math.abs(Math.sin(l.slope))),
												(this.remainingWidth = l.length * Math.abs(Math.cos(l.slope))),
												(this.height = this.height - h + this.remainingHeight),
												(this.cpt = a.default.segment(r[3].middle(), r[0].middle()).middle());
										} else if (2 === e || 4 === e);
										else if (5 === e) {
											r[5] = r[5].translate(n);
											var c = o.intersect(a.default.line(r[4].start, r[4].end))[0];
											(r[4] = a.default.segment(r[4].start, c)),
												(l = r[4]),
												(this.remainingWidth = l.length * Math.abs(Math.cos(l.slope))),
												(this.width = r[3].length + 2 * this.remainingWidth),
												(this.remainingHeight = l.length * Math.abs(Math.sin(l.slope))),
												(this.cpt = a.default.segment(r[3].middle(), r[0].middle()).middle());
										} else if (1 === e) {
											var u = o.intersect(a.default.line(r[2].start, r[2].end))[0];
											(r[2] = a.default.segment(u, r[2].end)),
												(l = r[2]),
												(this.remainingWidth = l.length * Math.abs(Math.cos(l.slope))),
												(this.width = r[3].length + 2 * this.remainingWidth),
												(this.remainingHeight = l.length * Math.abs(Math.sin(l.slope))),
												(this.cpt = a.default.segment(r[3].middle(), r[0].middle()).middle());
										} else
											0 === e &&
												((r[0] = r[0].translate(n)),
												s.Frametify.edgeIntersection(r, 0),
												s.Frametify.edgeIntersection(r, (0 + r.length - 1) % r.length),
												(this.height = r[1].length + this.remainingHeight),
												(this.cpt = a.default.segment(r[3].middle(), r[0].middle()).middle()));
										return new t(
											this.cpt,
											this.width,
											this.height,
											this.remainingWidth,
											this.remainingHeight,
										);
									}),
									(t.prototype.editDim = function (e, n, r) {
										if (2 === e || 0 === e)
											return (
												((i = this.edges)[0] = i[0].translate(r.invert())),
												s.Frametify.edgeIntersection(i, 0),
												s.Frametify.edgeIntersection(i, (0 + i.length - 1) % i.length),
												(this.height = i[1].length + this.remainingHeight),
												(this.cpt = a.default.segment(i[3].middle(), i[0].middle()).middle()),
												new t(
													this.cpt,
													this.width,
													this.height,
													this.remainingWidth,
													this.remainingHeight,
												)
											);
										if (1 === e) return (r = r.multiply(0.5)), this.dragEdge(e, r);
										if (4 === e) {
											var i = this.edges,
												o = a.default.line(i[4].start, i[4].end),
												l = a.default.line(o.pt.translate(r.multiply(0.5)), o.norm);
											r = r.projectionOn(o.norm);
											var h = l.intersect(a.default.line(i[3].start, i[3].end))[0];
											return (
												(c = a.default.segment(h, i[4].end)) instanceof a.default.Segment &&
													(this.remainingWidth = c.length * Math.abs(Math.cos(c.slope))),
												new t(
													this.cpt,
													this.width,
													this.height,
													this.remainingWidth,
													this.remainingHeight,
												)
											);
										}
										if (5 === e) {
											i = this.edges;
											var c = a.default.segment(i[4].start, i[4].end.translate(r));
											return (
												(this.remainingWidth = Math.sqrt(
													Math.pow(c.length, 2) - Math.pow(this.remainingHeight, 2),
												)),
												(this.width = i[3].length + 2 * this.remainingWidth),
												(this.cpt = a.default.segment(i[3].middle(), i[0].middle()).middle()),
												new t(
													this.cpt,
													this.width,
													this.height,
													this.remainingWidth,
													this.remainingHeight,
												)
											);
										}
										return 3 === e
											? ((i = this.edges),
											  (c = a.default.segment(i[2].start.translate(r.invert()), i[2].end)),
											  (this.remainingWidth = Math.sqrt(
													Math.pow(c.length, 2) - Math.pow(this.remainingHeight, 2),
											  )),
											  (this.width = i[3].length + 2 * this.remainingWidth),
											  (this.cpt = a.default.segment(i[3].middle(), i[0].middle()).middle()),
											  new t(
													this.cpt,
													this.width,
													this.height,
													this.remainingWidth,
													this.remainingHeight,
											  ))
											: this;
									}),
									(t.prototype.dragVertex = function () {
										return this;
									}),
									(t.prototype._clone = function () {
										return new t(
											this.cpt,
											this.width,
											this.height,
											this.remainingWidth,
											this.remainingHeight,
											this.edges,
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 6; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: h.EventType.angled_frame_settings,
											payload: new h.AngledFrameSettings(e, e.view),
										});
									}),
									t
								);
							})(l.WinPolygon);
						t.AngledHexagonPoly = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HalfKfc2Polygon = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(16),
							h = n(6),
							c = n(2),
							u = (function (e) {
								function t(t, n, r, i) {
									void 0 === n && (n = !1), void 0 === r && (r = 60);
									var o = e.call(this, i) || this;
									return (
										(o.position = t),
										(o.xFlip = n),
										(o.profileSize = r),
										(o.width = 2500),
										(o.width1 = 1740),
										(o.height = 1600),
										(o.height1 = 500),
										i || o.initLayout(),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'center', {
										get: function () {
											var e = this.edges,
												t = new a.default.Box();
											return (t = (t = t.merge(e[1].box)).merge(e[2].box)).center;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'boundary', {
										get: function () {
											return new l.WinPolygon(this.box);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.initLayout = function () {
										var e = this;
										this.clear(),
											this.initEdges().forEach(function (t) {
												return e.add(t);
											}),
											this.done(),
											this.translate(a.default.vector(this.position.x, this.position.y));
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.halfKfc2),
											(t.cpt = this.position.toJSON()),
											(t.xFlip = this.xFlip),
											(t.profileSize = this.profileSize),
											t
										);
									}),
									(t.prototype._clone = function () {
										var e = [];
										return (
											this.edges.forEach(function (t) {
												return e.push(t.clone());
											}),
											new t(this.position, this.xFlip, this.profileSize, e)
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 7; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
										this.ctlRobs.set(0, {
											arc: !1,
											endpoint: !1,
										}),
											this.ctlRobs.set(5, {
												arc: !1,
												endpoint: !1,
											}),
											this.ctlRobs.set(6, {
												arc: !1,
												endpoint: !1,
											}),
											(this.imIdx = new Map([
												[0, 0],
												[1, 5],
												[2, 4],
												[3, 6],
												[4, 0],
												[5, 1],
												[6, 2],
												[7, 5],
												[8, 4],
												[9, 5],
												[10, 2],
												[11, 3],
											]));
									}),
									(t.prototype.frametify = function (e, t) {
										var n = this;
										if (this.profileSize !== e[0]) {
											var r = this.edges;
											(r[6] = a.default.segment(
												r[6].start,
												r[6].end.translate(r[6].tangentInEnd().multiply(e[0] - this.profileSize)),
											)),
												(this.profileSize = e[0]),
												this.clear(),
												r.forEach(function (e) {
													return n.add(e);
												}),
												this.done();
										}
										return new s.HalfKfc2Frametify(this).run(e, t);
									}),
									(t.prototype.idxFromInner = function (e) {
										return this.imIdx.get(e);
									}),
									(t.prototype.dragEdge = function (e, n, r) {
										void 0 === r && (r = a.default.point());
										var i = this.edges,
											o = a.default.line(i[e].start, i[e].end),
											s = a.default.line(o.pt.translate(n), o.norm);
										if (((n = n.projectionOn(o.norm)), 0 === e)) {
											var l = s.intersect(a.default.line(i[1].start, i[1].end))[0],
												h = s.intersect(a.default.line(i[5].start, i[5].end))[0],
												c = s.intersect(a.default.line(i[6].start, i[6].end))[0];
											(i[0] = a.default.segment(i[0].start.translate(n), l)),
												(i[1] = a.default.segment(l, i[1].end)),
												(i[5] = a.default.segment(i[5].start, h)),
												(i[6] = this.fixInnerDimEdge(a.default.segment(i[6].start, c)));
										} else if (1 === e) {
											var u = s.intersect(a.default.line(i[0].start, i[0].end))[0],
												p = s.intersect(a.default.line(i[2].start, i[2].end))[0];
											(i[1] = a.default.segment(u, p)),
												(i[0] = a.default.segment(i[0].start, u)),
												(i[2] = a.default.segment(p, i[2].end));
										} else if (2 === e) {
											(l = s.intersect(a.default.line(i[1].start, i[1].end))[0]),
												(h = s.intersect(a.default.line(i[5].start, i[5].end))[0]);
											var f = s.intersect(a.default.line(i[3].start, i[3].end))[0];
											(i[1] = a.default.segment(i[1].start, l)),
												(i[2] = a.default.segment(l, f)),
												(i[5] = a.default.segment(h, i[5].end)),
												(i[3] = a.default.segment(f, i[3].end));
										} else if (3 === e) {
											u = s.intersect(a.default.line(i[0].start, i[0].end))[0];
											var d = s.intersect(a.default.line(i[4].start, i[4].end))[0];
											(p = s.intersect(a.default.line(i[2].start, i[2].end))[0]),
												(i[3] = i[3].translate(n)),
												(i[6] = i[6].translate(n)),
												(i[0] = a.default.segment(u, i[0].end)),
												(i[4] = a.default.segment(d, i[4].end)),
												(i[2] = a.default.segment(i[2].start, p));
										} else
											4 === e
												? ((f = s.intersect(a.default.line(i[3].start, i[3].end))[0]),
												  (h = s.intersect(a.default.line(i[5].start, i[5].end))[0]),
												  (i[4] = a.default.segment(f, h)),
												  (i[3] = a.default.segment(i[3].start, f)),
												  (i[6] = this.fixInnerDimEdge(a.default.segment(f, i[0].start))))
												: 5 === e &&
												  ((d = s.intersect(a.default.line(i[4].start, i[4].end))[0]),
												  (i[4] = a.default.segment(i[4].start, d)),
												  (i[5] = i[5].translate(n)));
										return new t(this.position, this.xFlip, this.profileSize, i);
									}),
									(t.prototype.dragVertex = function (e, t) {
										return this;
									}),
									(t.prototype.editDim = function (e, t, n) {
										return 0 === e
											? this.dragEdge(4, n.invert())
											: 3 === e
											? this.dragEdge(1, n.invert())
											: 5 === e
											? this.dragEdge(3, n.invert())
											: this.dragEdge(e, n);
									}),
									(t.prototype.flipX = function () {
										var e = this;
										this.xFlip = !this.xFlip;
										var n = this.edges,
											r = this.center;
										return new t(
											this.position,
											this.xFlip,
											this.profileSize,
											n.map(function (t) {
												return e.flipXForSeg(t, r);
											}),
										);
									}),
									(t.prototype.setProfileSize = function (e) {
										this.profileSize = e;
										var n = this.edges;
										return (
											(n[6] = a.default.segment(
												n[6].start,
												n[0].start.translate(n[6].tangentInEnd().multiply(e)),
											)),
											new t(this.position, this.xFlip, this.profileSize, n)
										);
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: h.EventType.half_kfc2_frame_settings,
											payload: new h.HalfKfc2FrameSettings(e, e.view),
										});
									}),
									(t.prototype.initEdges = function () {
										var e = this,
											t = this.width,
											n = t - this.width1,
											r = this.height,
											i = this.height1,
											o = a.default.point(0, r),
											s = a.default.point(0, 0),
											l = a.default.point(t, 0),
											h = a.default.point(t, r),
											c = a.default.point(n, r),
											u = a.default.point(n, i),
											p = a.default.point(t, i),
											f = a.default.point(0, i),
											d = [
												a.default.segment(o, s),
												a.default.segment(s, l),
												a.default.segment(l, h),
												a.default.segment(h, c),
												a.default.segment(c, u),
												a.default.segment(p, f),
												a.default.segment(c, o),
											];
										return (
											(d[6] = this.fixInnerDimEdge(d[6])),
											d.forEach(function (t, n) {
												(d[n] = t.translate(a.default.vector(-e.width / 2, -e.height / 2))),
													e.xFlip && (d[n] = e.flipXForSeg(d[n]));
											}),
											d
										);
									}),
									(t.prototype.fixFrameCCBars = function (e) {
										var t = e[4];
										this.toMulCCBar(t),
											(t.connectCount =
												e[3].epDock.etDock.type === c.DockType.None &&
												t.epDock.stDock.type === c.DockType.None
													? 1
													: 2),
											(t.dockCount = t.epDock.stDock.type === c.DockType.Frame ? 2 : 1);
										var n = e[5];
										this.toMulCCBar(n), (n.connectCount = 2), (n.dockCount = 2);
									}),
									Object.defineProperty(t.prototype, 'asMulEdgeIndexes', {
										get: function () {
											return [4, 5];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.fixInnerDimEdge = function (e) {
										return a.default.segment(
											e.start,
											e.end.translate(e.tangentInEnd().multiply(this.profileSize)),
										);
									}),
									(t.prototype.flipXForSeg = function (e, t) {
										void 0 === t && (t = a.default.point());
										var n = t.x;
										return a.default.segment(
											a.default.point(2 * n - e.start.x, e.start.y),
											a.default.point(2 * n - e.end.x, e.end.y),
										);
									}),
									t
								);
							})(l.WinPolygon);
						t.HalfKfc2Polygon = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.AngledHexagon2Poly = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(16),
							h = n(6),
							c = (function (e) {
								function t(n, r, i, o, a, s, l, h, c) {
									void 0 === h && (h = !0);
									var u = e.call(this, c || t.create(n, r, i, a, o, s, l, h).edges) || this;
									return (
										(u.cpt = n),
										(u.width = r),
										(u.height = i),
										(u.remainingHeight = o),
										(u.remainingWidth = a),
										(u.leftArcHeight = s),
										(u.rightArcHeight = l),
										(u.isTangency = h),
										u
									);
								}
								return (
									i(t, e),
									(t.create = function (e, t, n, r, i, o, s, h) {
										var c;
										return (
											void 0 === e && (e = a.default.point()),
											void 0 === t && (t = 2400),
											void 0 === n && (n = 1920),
											void 0 === r && (r = 600),
											void 0 === i && (i = 600),
											void 0 === o && (o = 600 - 300 * Math.sqrt(2)),
											void 0 === s && (s = 600 - 300 * Math.sqrt(2)),
											void 0 === h && (h = !0),
											h
												? ((o = i - (i / 2) * Math.SQRT2),
												  (s = i - (i / 2) * Math.SQRT2),
												  (c = new l.WinPolygon(
														l.PolygonCreator.Ins.joinRelativePro(
															[
																a.default.vector(0, n - i),
																a.default.vector(t, 0),
																a.default.vector(0, -n + i),
																[a.default.vector(-r, -i), -s],
																a.default.vector(2 * r - t, 0),
																[a.default.vector(-r, i), -o],
															],
															e.translate(a.default.vector(-t / 2, -n / 2)),
															!1,
														).edges,
												  )))
												: (c = new l.WinPolygon(
														l.PolygonCreator.Ins.joinRelativePro(
															[
																a.default.vector(0, n - i),
																a.default.vector(t, 0),
																a.default.vector(0, -n + i),
																[a.default.vector(-r, -i), -s],
																a.default.vector(2 * r - t, 0),
																[a.default.vector(-r, i), -o],
															],
															e.translate(a.default.vector(-t / 2, -n / 2)),
															!1,
														).edges,
												  )),
											c.translate(a.default.vector(c.box.center, e))
										);
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.angledHexagon2),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											(t.height = this.height),
											(t.rw = this.remainingWidth),
											(t.rh = this.remainingHeight),
											(t.la = this.leftArcHeight),
											(t.ra = this.rightArcHeight),
											(t.it = this.isTangency),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return e.prototype.translate.call(this, t), this;
									}),
									(t.prototype.dragEdge = function (e, n) {
										var r = this.edges,
											i = a.default.line(r[e].start, r[e].end);
										if (
											(a.default.line(i.pt.translate(n), i.norm),
											(n = n.projectionOn(i.norm)),
											1 === e)
										) {
											(r[1] = r[1].translate(n)),
												s.Frametify.edgeIntersection(r, 1),
												s.Frametify.edgeIntersection(r, 0),
												(this.height = r[2].length + this.remainingHeight);
											var o = new a.default.Box();
											r.forEach(function (e) {
												return (o = o.merge(e.box));
											}),
												(this.cpt = o.center);
										} else if (4 === e) {
											(r[4] = r[4].translate(n)),
												(r[2] = a.default.segment(r[2].start, r[2].end.translate(n))),
												(r[0] = a.default.segment(r[0].start.translate(n), r[0].end)),
												(r[3] = r[3].translate(n)),
												(r[5] = r[5].translate(n)),
												(this.height = r[2].length + this.remainingHeight);
											var l = new a.default.Box();
											r.forEach(function (e) {
												return (l = l.merge(e.box));
											}),
												(this.cpt = l.center);
										} else if (0 === e || 2 === e) {
											2 === e && (n = n.invert());
											var h = r[1],
												c = a.default.segment(h.start.translate(n), h.end.translate(n.invert())),
												u = this.width - 2 * this.remainingWidth;
											(this.width = c.length),
												this.isTangency &&
													(this.remainingHeight = this.remainingWidth = (this.width - u) / 2);
										}
										return new t(
											this.cpt,
											this.width,
											this.height,
											this.remainingHeight,
											this.remainingWidth,
											this.leftArcHeight,
											this.rightArcHeight,
											this.isTangency,
										);
									}),
									(t.prototype.editDim = function (e, n, r) {
										if (1 === e) return this.dragEdge(e, r);
										if (5 === e) {
											var i = this.edges,
												o = a.default.line(i[5].start, i[5].end),
												s = a.default.line(o.pt.translate(r.multiply(0.5)), o.norm);
											r = r.projectionOn(o.norm);
											var l = s.intersect(a.default.line(i[4].start, i[4].end))[0],
												h = a.default.segment(l, i[5].end);
											return (
												(this.remainingWidth = h.length * Math.abs(Math.cos(h.slope))),
												this.isTangency && (this.remainingHeight = this.remainingWidth),
												new t(
													this.cpt,
													this.width,
													this.height,
													this.remainingHeight,
													this.remainingWidth,
													this.leftArcHeight,
													this.rightArcHeight,
													this.isTangency,
												)
											);
										}
										return 2 === e ? ((r = r.multiply(0.5)), this.dragEdge(0, r.invert())) : this;
									}),
									(t.prototype.editArcDim = function (e, t) {}),
									(t.prototype.editChordDim = function (e, t) {
										return this;
									}),
									(t.prototype.dragVertex = function () {
										return this;
									}),
									(t.prototype._clone = function () {
										return new t(
											this.cpt,
											this.width,
											this.height,
											this.remainingHeight,
											this.remainingWidth,
											this.leftArcHeight,
											this.rightArcHeight,
											this.isTangency,
											this.edges,
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 6; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: h.EventType.angled_frame2_settings,
											payload: new h.AngledFrame2Settings(e, e.view),
										});
									}),
									(t.prototype.cloneWith = function (t) {
										var n = t[3],
											r = t[5];
										return (
											(this.rightArcHeight = n.chordHeight()),
											(this.leftArcHeight = r.chordHeight()),
											e.prototype.cloneWith.call(this, t)
										);
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[3] = {
												idx: 3,
												dimShow: !1,
											}),
											(t[5] = {
												idx: 5,
												dimShow: !1,
											}),
											t
										);
									}),
									t
								);
							})(l.WinPolygon);
						t.AngledHexagon2Poly = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.RoundedRectanglePolygon = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(16),
							h = (function (e) {
								function t(n, r, i, o, a, s) {
									void 0 === a && (a = !0);
									var l = e.call(this, s || t.create(n, r, i, o).edges) || this;
									return (
										(l.cpt = n),
										(l.width = r),
										(l.height = i),
										(l.borderRadius = o),
										(l.isTangency = a),
										l
									);
								}
								return (
									i(t, e),
									(t.create = function (e, t, n, r) {
										var i;
										void 0 === e && (e = a.default.point()),
											void 0 === t && (t = 2400),
											void 0 === n && (n = 1920),
											void 0 === r && (r = 600);
										var o = r - (r / 2) * Math.SQRT2;
										return (i = new l.WinPolygon(
											l.PolygonCreator.Ins.joinRelativePro(
												[
													a.default.vector(0, n - 2 * r),
													[a.default.vector(r, r), -o],
													a.default.vector(t - r, 0),
													[a.default.vector(r, -r), -o],
													a.default.vector(0, 2 * r - n),
													[a.default.vector(-r, -r), -o],
													a.default.vector(-t + r, 0),
													[a.default.vector(-r, r), -o],
												],
												e.translate(a.default.vector(-t / 2, -n / 2)),
												!1,
											).edges,
										)).translate(a.default.vector(i.box.center, e));
									}),
									Object.defineProperty(t.prototype, 'controlDimFlag', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.type = l.PolyType.roundedRectanglePolygon),
											(t.cpt = this.cpt.toJSON()),
											(t.width = this.width),
											(t.height = this.height),
											(t.br = this.borderRadius),
											(t.it = this.isTangency),
											t
										);
									}),
									(t.prototype.translate = function (t) {
										return e.prototype.translate.call(this, t), this;
									}),
									(t.prototype.dragEdge = function (e, n) {
										var r = this.edges,
											i = a.default.line(r[e].start, r[e].end);
										if (((n = n.projectionOn(i.norm)), 1 === e || 3 === e || 5 === e || 7 === e))
											return this;
										0 === e
											? ((r[0] = r[0].translate(n)),
											  (r[2] = a.default.segment(r[2].start.translate(n), r[2].end)),
											  (r[6] = a.default.segment(r[6].start, r[6].end.translate(n))),
											  (r[1] = r[1].translate(n)),
											  (r[7] = r[7].translate(n)),
											  (this.width = r[0].distanceTo(r[4])[0]))
											: 4 === e
											? ((r[4] = r[4].translate(n)),
											  (r[2] = a.default.segment(r[2].start, r[2].end.translate(n))),
											  (r[6] = a.default.segment(r[6].start.translate(n), r[6].end)),
											  (r[3] = r[3].translate(n)),
											  (r[5] = r[5].translate(n)),
											  (this.width = r[0].distanceTo(r[4])[0]))
											: 2 === e
											? ((r[2] = r[2].translate(n)),
											  (r[0] = a.default.segment(r[0].start, r[0].end.translate(n))),
											  (r[4] = a.default.segment(r[4].start.translate(n), r[4].end)),
											  (r[1] = r[1].translate(n)),
											  (r[3] = r[3].translate(n)),
											  (this.height = r[2].distanceTo(r[6])[0]))
											: 6 === e &&
											  ((r[6] = r[6].translate(n)),
											  (r[0] = a.default.segment(r[0].start.translate(n), r[0].end)),
											  (r[4] = a.default.segment(r[4].start, r[4].end.translate(n))),
											  (r[5] = r[5].translate(n)),
											  (r[7] = r[7].translate(n)),
											  (this.height = r[2].distanceTo(r[6])[0]));
										var o = new a.default.Box();
										return (
											r.forEach(function (e) {
												return (o = o.merge(e.box));
											}),
											(this.cpt = o.center),
											new t(
												this.cpt,
												this.width,
												this.height,
												this.borderRadius,
												this.isTangency,
												r,
											)
										);
									}),
									(t.prototype.editDim = function (e, t, n) {
										var r = (e + 1) % this.edges.length;
										return 1 === e || 3 === e || 5 === e || 7 === e ? this.dragEdge(r, n) : this;
									}),
									(t.prototype.editArcDim = function (e, t) {}),
									(t.prototype.editChordDim = function (e, t) {
										return this;
									}),
									(t.prototype.dragVertex = function () {
										return this;
									}),
									(t.prototype._clone = function () {
										return new t(
											this.cpt,
											this.width,
											this.height,
											this.borderRadius,
											this.isTangency,
											this.edges,
										);
									}),
									(t.prototype.initPoly = function () {
										for (var e = 0; e < 8; e++)
											this.ctlRobs.set(e, {
												arc: !1,
												endpoint: !0,
											});
									}),
									(t.prototype.raiseFrameEvent = function (e) {
										e.view.eventBus.emit({
											type: s.EventType.rounded_rectang_frame_settings,
											payload: new s.RoundedRectangFrameSettings(e, e.view),
										});
									}),
									(t.prototype.initDimInfo = function () {
										var t = e.prototype.initDimInfo.call(this);
										return (
											(t[1] = {
												idx: 1,
												dimShow: !1,
											}),
											(t[3] = {
												idx: 3,
												dimShow: !1,
											}),
											(t[5] = {
												idx: 5,
												dimShow: !1,
											}),
											(t[7] = {
												idx: 7,
												dimShow: !1,
											}),
											t
										);
									}),
									t
								);
							})(l.WinPolygon);
						t.RoundedRectanglePolygon = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.TextAlign = t.Text = void 0);
						var a,
							s = o(n(0)),
							l = n(2),
							h = n(7),
							c = n(16),
							u = (function () {
								function e(e, t, n, r, i, o, c) {
									void 0 === t && (t = s.default.point()),
										void 0 === n && (n = a.Center),
										void 0 === r && (r = !0),
										void 0 === i && (i = h.DrawParams.Ins.dimFontSize),
										void 0 === o && (o = !1),
										void 0 === c && (c = l.ShapeColor.darkMode ? 'yellow' : 'blue'),
										(this.content = e),
										(this.position = t),
										(this.align = n),
										(this.draggable = r),
										(this.bold = o),
										(this.color = c),
										(this.widths = []),
										(this.padding = 30),
										(this.offset = s.default.vector()),
										(this.asNumber = !1),
										(this.angle = 0),
										(this.lineHeightRatio = 1),
										(this._fontSize = i),
										this.analyseSize();
								}
								return (
									Object.defineProperty(e.prototype, 'width', {
										get: function () {
											return Math.max.apply(Math, i(this.widths));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'height', {
										get: function () {
											return this.lineHeight * this.contentLines.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lineHeight', {
										get: function () {
											return this._fontSize * this.lineHeightRatio;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'contentLines', {
										get: function () {
											return this.content.split('\n');
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'font', {
										get: function () {
											var e = (
												this.asNumber ? h.DrawParams.Ins.numFont : h.DrawParams.Ins.textFont
											).replace(/(.+)px/, this.fontSize.toString() + 'px');
											return (
												this.bold
													? this.bold && null === e.match(/bold/) && (e = 'bold ' + e)
													: (e = e.replace(/bold/, '')),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'fontSize', {
										get: function () {
											return this._fontSize;
										},
										set: function (e) {
											(this._fontSize = e), this.analyseSize();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'box', {
										get: function () {
											return this.border().box;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.contains = function (e) {
										return this.border().contains(e);
									}),
									(e.prototype.border = function () {
										var e = this.width + 2 * this.padding,
											t = this.height + 2 * this.padding,
											n = s.default.vector();
										return (
											this.align === a.Left && (n = s.default.vector(this.width / 2, 0)),
											this.align === a.Right && (n = s.default.vector(-this.width / 2, 0)),
											c.PolygonCreator.Ins.joinRelativePro(
												[s.default.vector(e, 0), s.default.vector(0, t), s.default.vector(-e, 0)],
												s.default.point(
													this.position.x - this.width / 2 - this.padding,
													this.position.y - this.height / 2 - this.padding,
												),
											)
												.translate(n)
												.translate(this.offset)
										);
									}),
									(e.prototype.translate = function (e) {
										this.position = this.position.translate(e);
									}),
									(e.prototype.analyseSize = function () {
										var e = document.createElement('canvas').getContext('2d');
										e &&
											((e.font = this.font),
											(this.widths = this.contentLines.map(function (t) {
												return e.measureText(t).width;
											})));
									}),
									e
								);
							})();
						(t.Text = u),
							(function (e) {
								(e[(e.Center = 0)] = 'Center'),
									(e[(e.Left = 1)] = 'Left'),
									(e[(e.Right = 2)] = 'Right');
							})((a = t.TextAlign || (t.TextAlign = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Bar = void 0);
						var l = s(n(0)),
							h = n(13),
							c = n(7),
							u = n(82),
							p = n(11),
							f = n(1),
							d = n(2),
							g = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = f.ShapeType.Bar);
									var i = e.call(this, r, t) || this;
									return (
										(i.where = n),
										(i.vshapes = []),
										(i.holeVShapes = []),
										(i._virtual = !1),
										(i.holes = []),
										(i.serial = ''),
										(i._virtual = t.virtual),
										i
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'polyId', {
										get: function () {
											return this.polygon.polyId;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'epDock', {
										get: function () {
											return this.polygon.epDock;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isReinforcedMul', {
										get: function () {
											return (
												this.where === f.ShapeType.FrameMullion &&
												this.parent.mulManager.splitter.lines[this.polyId.idx].reinforced
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.draw = function (t) {
										if (!this._virtual) {
											e.prototype.draw.call(this, t);
											var n = this.getDrawPoly();
											0 === this.vshapes.length &&
												((this.vshapes[0] = c.Artisan.recycleShape(n, t)),
												this.addToGroup(this.vshapes));
											var r = p.BarDragger.Ins.canDrag(this.where),
												i = d.ShapeColor.barNormal,
												o = this.top;
											if (o instanceof f.Frame) {
												var a = o.colorManager;
												i =
													this.where === f.ShapeType.Bead
														? a.beadNormal
														: this.parent instanceof f.Shade && this.parent.glassShade
														? d.ShapeColor.glass
														: a.barNormal;
											} else
												o instanceof f.PartialSubFrame && (i = o.subFrame.colorManager.barNormal);
											if (
												(this.vshapes[0].setAttr('data', {
													poly: n,
													fcolor: i,
													drag: r,
													stroke: d.ShapeColor.windowStrokeColor,
													strokeWidth: c.DrawParams.Ins.windowStrokeWidth,
												}),
												this.vshapes[0].setAttr('robot', this),
												r)
											) {
												var s = this.polygon.editTool
													? this.polygon.editTool
													: p.BarDragger.Ins.getTool(this.where);
												this.vshapes[0].setAttr('tool', s);
											}
										}
									}),
									(t.prototype.drawHoles = function (e) {
										var t = this;
										this.holes.forEach(function (n, r) {
											var i = t.holePoly(n);
											t.holeVShapes[r] ||
												((t.holeVShapes[r] = c.Artisan.recycleShape(i, e)),
												t.addToGroup([t.holeVShapes[r]])),
												t.holeVShapes[r].setAttr('data', {
													poly: i,
													fcolor: 'grey',
													drag: !1,
												}),
												t.holeVShapes[r].setAttr('robot', 'bar-hole');
										});
									}),
									(t.prototype.drawSerial = function (e) {
										if (this.serial) {
											var t = new f.Text(this.serial),
												n = this.holeLineShape;
											(t.position = n.middle()),
												(t.angle = l.default.vector(n.start, n.end).slope % Math.PI),
												(t.fontSize = c.DrawParams.Ins.labelFontSize),
												(t.blur = 'rgba(255, 255, 255, 1)'),
												this.serialVShape ||
													((this.serialVShape = c.Artisan.recycleShape(t, e)),
													this.addToGroup([this.serialVShape])),
												this.serialVShape.setAttr('data', {
													poly: t,
												}),
												this.serialVShape.setAttr('robot', 'bar-serial');
										}
									}),
									(t.prototype.clearHoles = function () {
										this.recycleHoles(), (this.holes = []);
									}),
									(t.prototype.holePoly = function (e) {
										var t = this.holeLineShape,
											n = f.HardwareShapeCreator.Ins._roundRect(16, 30, 8);
										e = e < 0 ? t.length + e : e;
										var r = d.Utils.edgeDirPt(t, e, t.start),
											i = t.split(r),
											o = i[1] ? i[1].tangentInStart() : t.tangentInStart(),
											a = l.default.vector(0, 1).angleTo(o);
										return (
											n.rotate(a, l.default.point()),
											n.translate(l.default.vector(l.default.point(), r)),
											n
										);
									}),
									(t.prototype.updatePoly = function (e) {
										e && (this.polygon = e);
									}),
									(t.prototype.highlight = function (e) {
										this.vshapes.forEach(function (t) {
											return d.DisplayUtils.highlight(e, t);
										});
									}),
									Object.defineProperty(t.prototype, 'highlighted', {
										get: function () {
											return d.DisplayUtils.isHighlight(this.vshapes[0]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hitTest = function (e) {
										var t = d.Utils.applyMatrixMultiply(this.topFrame.getParentMatrices());
										return this.polygon.clone().transform(t).contains(e);
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, !0),
											this.vshapes.forEach(function (e) {
												e.hide(), e.moveTo(e.getLayer());
											}),
											(this.vshapes = []),
											this.recycleHoles(),
											this.recycleBarSerial();
									}),
									(t.prototype.recycleHoles = function () {
										this.holeVShapes.forEach(function (e) {
											e.hide(), e.moveTo(e.getLayer());
										}),
											(this.holeVShapes = []);
									}),
									(t.prototype.recycleBarSerial = function () {
										this.serialVShape &&
											(this.serialVShape.hide(),
											this.serialVShape.moveTo(this.serialVShape.getLayer()),
											(this.serialVShape = void 0));
									}),
									(t.prototype.translate = function (e) {
										this.polygon.translate(e),
											c.DrawParams.Ins.drawPolyType === f.DrawPolyType.steelPlastic &&
												this.vshapes.length > 0 &&
												this.vshapes[0] &&
												this.vshapes[0].getAttr('data') &&
												(this.vshapes[0].getAttr('data').poly = this.getDrawPoly());
									}),
									(t.prototype.snapEdge = function (e, n, r) {
										if (
											!(
												r instanceof t &&
												r.parentId === this.parentId &&
												r.polygon.polyId.equalTo(this.polygon.polyId)
											)
										) {
											var i = this.polygon.mulShape;
											if (i instanceof l.default.Segment && !i.equalTo(e))
												return d.Utils.canSnap(e, i, n) ? i : void 0;
										}
									}),
									Object.defineProperty(t.prototype, 'editTool', {
										get: function () {
											return this.vshapes[0].attrs.tool;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'virtual', {
										get: function () {
											return this._virtual;
										},
										set: function (e) {
											this._virtual = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'cutAngle', {
										get: function () {
											var e = [this.stAngle, this.etAngle].sort(function (e, t) {
												return e - t;
											});
											if (
												(this.parent instanceof f.Frame &&
													this.where === f.ShapeType.FrameMullion) ||
												(this.parent instanceof f.PushSash &&
													this.where === f.ShapeType.SashMullion)
											) {
												var t = this.parent.mulManager.splitter.lines[this.polyId.idx].start.steel,
													n = this.parent.mulManager.splitter.lines[this.polyId.idx].end.steel;
												if (t && n) return 'v-v';
												if (t && !n) return 'v-' + this.etAngle;
												if (!t && n) return 'v-' + this.stAngle;
											}
											return e[0] + '-' + e[1];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'stAngle', {
										get: function () {
											var e = this.polygon.stIdx;
											return -1 === e ? 90 : this._stetAngle(e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'etAngle', {
										get: function () {
											var e = this.polygon.etIdx;
											if (-1 === e) return 90;
											var t = d.Utils.getPrevIdx(e, this.polygon.edges.length);
											return this._stetAngle(t);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype._stetAngle = function (e) {
										var t = this.polygon.edges,
											n = t[e],
											r = t[(e + 1) % t.length];
										return this.calcAngle(n, r);
									}),
									(t.prototype.calcAngle = function (e, t) {
										var n = e.tangentInEnd().invert().angleTo(t.tangentInStart());
										return (
											(n *= 180 / Math.PI),
											+(n = (n = (n = Math.abs(n)) > 180 ? 360 - n : n) > 90 ? 180 - n : n).toFixed(
												1,
											)
										);
									}),
									Object.defineProperty(t.prototype, 'dimAlignment', {
										get: function () {
											return this.where === f.ShapeType.SashMullion ||
												this.where === f.ShapeType.ScreenMullion
												? u.AlignTypeEnum.center
												: this.topFrame.mulManager.splitter.lines[this.polyId.idx].alignType;
										},
										set: function (e) {
											if (
												this.where !== f.ShapeType.ScreenMullion &&
												this.where !== f.ShapeType.SashMullion
											) {
												var t = this.getRelativeDimInfo();
												t &&
													t
														.filter(function (e) {
															return !!e && e[0] && e[1] && e[2];
														})
														.forEach(function (t) {
															var n = e,
																r = t[0],
																i = t[1],
																o = t[2];
															(d.Utils.isSegVertical(l.default.segment(o.start, o.end))
																? !!l.default.Utils.LE(o.start.y, r.y)
																: !!l.default.Utils.LE(o.start.x, r.x)) ||
																(e === u.AlignTypeEnum.left
																	? (n = u.AlignTypeEnum.right)
																	: e === u.AlignTypeEnum.right && (n = u.AlignTypeEnum.left)),
																(i.alignType = n);
														});
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.getRelativeDimInfo = function () {
										var e = this,
											t = [];
										if (
											(this.topFrame.mulManager.dockMgr.forDoTask(function (n, r) {
												for (var i = 0; i < r.length; i++) {
													var o = r[i];
													if (e.polyId.equalTo(o.idx)) {
														t.push([o.pt.clone(), n, i]);
														break;
													}
												}
												return d.DockTaskStatus.OK;
											}),
											2 === t.length)
										)
											return (
												t.forEach(function (n, r) {
													var i,
														o = n[0],
														a = n[1],
														s = n[2];
													if (-1 === a.pos) {
														if ((i = e.topFrame.polygon.edge(a.idx)).start.equalTo(i.end))
															return void (t[r] = void 0);
														var h = e.topFrame.dim.diMgr.findMulDim(a.idx, s);
														n[1] = h;
														var c = o.projectionOn(l.default.line(i.start, i.end));
														(n[0] = c), (n[2] = i);
													} else {
														var u = e.topFrame.mulManager.bars.find(function (e) {
															return e.polyId.equalTo(a);
														});
														if (u && u.polygon.mulShape instanceof l.default.Segment) {
															if ((i = u.polygon.mulShape).start.equalTo(i.end))
																return void (t[r] = void 0);
															(h = e.topFrame.dim.diMgr.findInnerMulDim(a.idx, s)),
																(n[1] = h),
																(c = o.projectionOn(l.default.line(i.start, i.end))),
																(n[0] = c),
																(n[2] = i);
														} else t[r] = void 0;
													}
												}),
												t
											);
									}),
									(t.prototype.setBarDimAlign = function (e, t, n) {
										if ((void 0 === n && (n = !0), this.parent instanceof f.Frame)) {
											var r = h.MullionManager.allBarsAlignedWith(this);
											if (0 !== r.length && void 0 !== t && this) {
												var i = r[0].bar.dimAlignment;
												(this.dimAlignment = i),
													(t.splitter.lines[this.polyId.idx].alignType = i),
													t.host.updateFrame(!1),
													n && t.host.draw(e);
											}
										}
									}),
									Object.defineProperty(t.prototype, 'width', {
										get: function () {
											var e = this.polygon.mulShape;
											if (!e) return 0;
											var t,
												n = this.polygon.edges;
											if (e instanceof l.default.Segment) {
												var r = l.default.line(e.start, e.end);
												return 2 !==
													(t = n.filter(function (e) {
														return (
															e instanceof l.default.Segment &&
															r.parallelTo(l.default.line(e.start, e.end))
														);
													})).length
													? 0
													: Math.abs(t[0].distanceTo(t[1])[0]);
											}
											return e instanceof l.default.Arc
												? 2 !==
												  (t = n.filter(function (t) {
														return t instanceof l.default.Arc && t.center.equalTo(e.center);
												  })).length
													? 0
													: Math.abs(t[0].r.valueOf() - t[1].r.valueOf())
												: 0;
										},
										set: function (e) {
											if (this.where === f.ShapeType.Frame || this.where === f.ShapeType.Sash) {
												var t = this.parent,
													n = this.polyId.idx,
													r = t.frameManager.edgeWidth;
												(r[n] = e), (t.frameManager.edgeWidth = r);
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'holeLineShape', {
										get: function () {
											var e = this.polygon.mulShape;
											if (this.where === f.ShapeType.FrameMullion) return e;
											if (!this.parent) return e;
											var t = this.parent.polygon.orientation === l.default.ORIENTATION.CCW,
												n = l.default.vector(e.start, e.end).normalize();
											return (
												(n = t ? n.rotate90CCW() : n.rotate90CW()),
												e.translate(n.multiply(this.width / 2))
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.getLongestLength = function (e) {
										var n = e.edges,
											r = t.getCenterMulshape(e),
											i = n.filter(function (e) {
												return d.Utils.isParallelOrSameCenter(e, r);
											});
										if (2 !== i.length) throw new Error('not support');
										return t.getLongestProjectionLength(r, i);
									}),
									(t.getCenterMulshape = function (e) {
										var t = e.mulShape;
										if (void 0 === t) throw new Error('no mulshape1');
										if (!(t instanceof l.default.Segment || t instanceof l.default.Arc))
											throw new Error('no mulshape2');
										var n = e.edges;
										if (
											!n.some(function (e) {
												return e.contains(t.middle());
											})
										)
											return t;
										var r = n.filter(function (e) {
											return d.Utils.isParallelOrSameCenter(e, t);
										});
										if (2 !== r.length) throw new Error('not support');
										var i = r[0].start.distanceTo(l.default.line(r[1].start, r[1].end))[0];
										if (t instanceof l.default.Segment) {
											var o = d.Utils.getMovedEdge(r[0], r[1], i / 2);
											if (void 0 === o) throw new Error('no middleEdge');
											if (
												((u = l.default.line(o.start, o.end).intersect(e.polygon)).sort(function (
													e,
													t,
												) {
													return e.distanceTo(o.start)[0] - t.distanceTo(o.start)[0];
												}),
												u.length < 1)
											)
												throw new Error('no mulshape');
											var a = u[0];
											if (
												(u.sort(function (e, t) {
													return e.distanceTo(o.end)[0] - t.distanceTo(o.end)[0];
												}),
												u.length < 1)
											)
												throw new Error('no mulshape3');
											var s = u.find(function (e) {
												return !e.equalTo(a);
											});
											if (void 0 === s) throw new Error('no mulshape4');
											return l.default.segment(a, s);
										}
										if (t instanceof l.default.Arc) {
											var h = r[0],
												c = r[1];
											if (!h.center.equalTo(c.center)) throw new Error('not parallel circle');
											var u,
												p = (h.r.valueOf() + c.r.valueOf()) / 2,
												f = l.default.arc(h.center, p);
											if (void 0 === f) throw new Error('no middleEdge1');
											if (2 !== (u = f.intersect(e.polygon)).length)
												throw new Error('no mulshape3');
											var g = l.default.segment(f.center, u[0]).slope,
												y = l.default.segment(f.center, u[1]).slope,
												m = l.default.arc(f.center, p, g, y, !0);
											return (
												e.contains(m.middle()) || (m = l.default.arc(f.center, p, g, y, !1)), m
											);
										}
										throw new Error('no mulshapex');
									}),
									(t.getLongestProjectionLength = function (e, t) {
										if (e instanceof l.default.Segment) {
											var n = l.default.line(t[0].start, t[0].end),
												r = [
													e.start.projectionOn(n),
													e.end.projectionOn(n),
													t[0].start.projectionOn(n),
													t[0].end.projectionOn(n),
													t[1].start.projectionOn(n),
													t[1].end.projectionOn(n),
												];
											return (r = n.sortPoints(r)), l.default.segment(r[0], r[5]).length;
										}
										if (e instanceof l.default.Arc) {
											var i = t[0],
												o = t[1],
												a = [],
												s = [],
												h = e.counterClockwise;
											return (
												a.push(e.startAngle),
												s.push(e.endAngle),
												i.counterClockwise === h
													? (a.push(i.startAngle), s.push(i.endAngle))
													: (a.push(i.endAngle), s.push(i.startAngle)),
												o.counterClockwise === h
													? (a.push(o.startAngle), s.push(o.endAngle))
													: (a.push(o.endAngle), s.push(o.startAngle)),
												(c = a),
												(u = s),
												(p = [e.r.valueOf(), i.r.valueOf(), o.r.valueOf()]),
												(f = h),
												(d = e.center),
												(g = -1),
												c.forEach(function (e) {
													u.forEach(function (t) {
														p.forEach(function (n) {
															var r = l.default.arc(d, n, e, t, f);
															r.length > g && (g = r.length);
														});
													});
												}),
												g
											);
										}
										throw new Error('not support');
										var c, u, p, f, d, g;
									}),
									Object.defineProperty(t.prototype, 'sideEdgeIndexes', {
										get: function () {
											var e = this.polygon.edges,
												t = this.polygon.mulShape,
												n = [];
											return (
												e.forEach(function (e, r) {
													d.Utils.isParallelOrSameCenter(e, t) && n.push(r);
												}),
												n
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sideEdges', {
										get: function () {
											var e = this;
											return this.sideEdgeIndexes.map(function (t) {
												return e.polygon.edge(t);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sideEdgesWithDirection', {
										get: function () {
											var e = this;
											return this.sideEdgeIndexes.map(function (t) {
												return {
													direction: p.EdgeFinder.Instance.findDirection(e.polygon, t, !0),
													edge: e.polygon.edge(t),
												};
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'insideEdge', {
										get: function () {
											var e = this.sideEdges;
											if (!(this.polyId.pos >= 0) && this.parent) {
												var t = this.parent.polygon.edges,
													n = e.find(function (e) {
														return t.every(function (t) {
															return !t.contains(e.middle());
														});
													}),
													r = this.polygon.mulShape;
												if (r instanceof l.default.Segment && n instanceof l.default.Segment) {
													var i = r.tangentInStart();
													n.tangentInStart().dot(i) < 0 && (n = n.reverse());
												}
												return n;
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'endpointEdgeIndexes', {
										get: function () {
											for (
												var e = this.polygon.edges.length,
													t = this.sideEdgeIndexes,
													n = [],
													r = function (e) {
														t.some(function (t) {
															return e === t;
														}) || n.push(e);
													},
													i = 0;
												i < e;
												i++
											)
												r(i);
											return n;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'endpointEdges', {
										get: function () {
											var e = this;
											return this.endpointEdgeIndexes.map(function (t) {
												return e.polygon.edge(t);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.getMullionPoly = function (e) {
										if (!this.isReinforcedMul && !e.steel) return this.polygon;
										var t = this.polygon.edges,
											n = this.polygon.mulShape;
										if (!(n instanceof l.default.Segment || n instanceof l.default.Arc))
											return this.polygon;
										var r = t.filter(function (e) {
											return d.Utils.isParallelOrSameCenter(e, n);
										});
										if (2 !== r.length) return this.polygon;
										var i = r[0],
											o = r[1],
											s = l.default.segment(i.end, o.start),
											h = l.default.segment(o.end, i.start),
											c = [];
										if (this.isReinforcedMul) {
											var u = this.epDock.stDock.dockBar(this.topFrame),
												p = this.epDock.etDock.dockBar(this.topFrame),
												g = void 0 === u ? 0 : u.width,
												y = void 0 === p ? 0 : p.width,
												m = n.end,
												v = this.width / 4;
											h.contains(m)
												? c.push.apply(
														c,
														a(
															[i],
															this.getReinforcedMulPointEdges(s, g, v),
															[o],
															this.getReinforcedMulPointEdges(h, y, v),
														),
												  )
												: c.push.apply(
														c,
														a(
															[i],
															this.getReinforcedMulPointEdges(s, y, v),
															[o],
															this.getReinforcedMulPointEdges(h, g, v),
														),
												  );
										}
										if (e.steel) {
											var w = this.width / 2,
												b = ((m = n.end), e.end.steel),
												S = e.start.steel;
											if (
												(h.contains(m) && ((b = e.start.steel), (S = e.end.steel)), c.push(i), b)
											) {
												var _ = l.default.line(s.start, s.end).norm,
													P = d.Utils.vecDirPt(_, w, s.middle()),
													x = l.default.segment(s.start, P),
													D = l.default.segment(P, s.end);
												c.push(x, D);
											} else {
												var T = l.default.segment(s.start, s.end);
												c.push(T);
											}
											if ((c.push(o), S)) {
												var O = l.default.line(h.start, h.end).norm,
													M = d.Utils.vecDirPt(O, w, h.middle()),
													E = l.default.segment(h.start, M),
													I = l.default.segment(M, h.end);
												c.push(E, I);
											} else {
												var C = l.default.segment(h.start, h.end);
												c.push(C);
											}
										}
										return new f.WinPolygon(c);
									}),
									(t.prototype.getDrawPoly = function () {
										var e = this.parent;
										if (!this.where.endsWith('Mullion')) return this.polygon;
										if (!(e instanceof f.Frame || e instanceof f.Sash)) return this.polygon;
										if (4 !== this.polygon.edges.length) return this.polygon;
										var t = e.mulManager.splitter.lines[this.polyId.idx];
										return this.getMullionPoly(t);
									}),
									(t.prototype.getReinforcedMulPointEdges = function (e, t, n) {
										var r = e.tangentInStart(),
											i = e.tangentInEnd(),
											o = l.default.line(e.start, e.end).norm,
											a = d.Utils.vecDirPt(r, n, e.start),
											s = d.Utils.vecDirPt(o, t, a),
											h = d.Utils.vecDirPt(i, n, e.end),
											c = d.Utils.vecDirPt(o, t, h);
										return [
											l.default.segment(e.start, a),
											l.default.segment(a, s),
											l.default.segment(s, c),
											l.default.segment(c, h),
											l.default.segment(h, e.end),
										];
									}),
									t
								);
							})(f.Shape);
						t.Bar = g;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						});
						var r = n(356),
							i = n(357),
							o = n(358);
						t.default = {
							'zh-CN': r.cnLang,
							'en-US': i.usLang,
							'vi-VN': o.vnLang,
						};
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.cnLang = void 0);
						var r = new Map([
							['groundLevel', '地标线'],
							['padding', '上下空隙：'],
							['gap', '百叶缝隙：'],
							['faced', '视角方向'],
							['up', '上侧'],
							['down', '下侧'],
							['left', '左侧'],
							['right', '右侧'],
							['both', '两侧'],
							['inside', '室内'],
							['outside', '室外'],
							['pulling_height', '△'],
							['arch_height', '拱高'],
							['radius', '半径'],
							['arc_length', '弧长'],
							['chord_length', '弦长'],
							['mullion_locked_by_equal_split', '中梃标线可能因为设置了等分无法编辑'],
						]);
						t.cnLang = r;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.usLang = void 0);
						var r = new Map([
							['groundLevel', 'ground level'],
							['padding', 'Padding(Top/Bottom): '],
							['gap', 'Gap:'],
							['faced', 'Faced'],
							['up', 'Up'],
							['down', 'Down'],
							['left', 'Left'],
							['right', 'Right'],
							['both', 'Both'],
							['inside', 'INSIDE'],
							['outside', 'OUTSIDE'],
							['pulling_height', '△'],
							['arch_height', 'arch height'],
							['radius', 'radius'],
							['arc_length', 'arc length'],
							['chord_length', 'chord'],
							['mullion_locked_by_equal_split', 'Dim may not be updated because of equalization.'],
						]);
						t.usLang = r;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.vnLang = void 0);
						var r = new Map([
							['inside', 'Trong'],
							['outside', 'Ngoài'],
							['pulling_height', 'Hở:'],
							['arch_height', 'Chiều dài cung'],
							['radius', 'Bán kính'],
							['arc_length', 'Chiều cao cung'],
						]);
						t.vnLang = r;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							l =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Frame = void 0);
						var h = l(n(0)),
							c = n(4),
							u = n(7),
							p = n(82),
							f = n(6),
							d = n(11),
							g = n(5),
							y = n(9),
							m = n(2),
							v = n(13),
							w = n(1),
							b = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = !1);
									var i = e.call(this, w.ShapeType.Frame, t) || this;
									(i.view = n),
										(i.uid = 0),
										(i.innerPoly = []),
										(i.offvec = h.default.vector()),
										(i.lockDragSize = !1),
										(i.turned = !1),
										(i.equalSplitRatios = []),
										(i.ignoreEqualSplit = []),
										(i.atTCorner = !1),
										(i.borders = new w.Border(i)),
										(i.openToward = v.OpenToward.Inward),
										(i.pullingHeightLabels = []),
										(i.uid = i.view.shapeManager.generateUID()),
										(i.profileSizeManager = new v.ProfileSizeManager(i, n)),
										(i.frameManager = new v.FrameManager(i)),
										(i.mulManager = new v.MullionManager(i)),
										(i.sashManager = new v.SashManager(i, !r)),
										(i.colorManager = new v.ColorManager()),
										(i.dim = new w.Dim(i)),
										(i.extraDimManager = new v.ExtraDimManager(i)),
										(i.topView = new w.TopView(i)),
										(i.label = new w.Label(
											i,
											h.default.point(),
											'框翻转',
											u.DrawParams.Ins.dimFontSize / 2,
										)),
										(i.label.align = w.TextAlign.Left),
										(i.label.hidden = !0),
										i.updateLabel(),
										(i.pullingHeightLabel = new w.Label(
											i,
											h.default.point(),
											'',
											u.DrawParams.Ins.dimFontSize,
										)),
										i.polygon.updatePullingHeightLabel(i.pullingHeightLabel);
									var o = h.default.point(
										i.polygon.box.center.x ? i.polygon.box.center.x : 0,
										(i.polygon.box.ymin ? i.polygon.box.ymin : 0) - u.DrawParams.Ins.labelFontSize,
									);
									return (
										(i.serial = new w.Note('', o, o)),
										(i.serial.hidden = !u.DrawParams.Ins.frameSerialShown),
										i.borders.updatePoly(),
										i
									);
								}
								return (
									i(t, e),
									(t.prototype.highlight = function (e) {
										this.frameManager.highlight(e),
											this.mulManager.highlight(e),
											this.sashManager.allSashes.forEach(function (t) {
												return t.highlight(e);
											});
									}),
									(t.prototype.updatePullingHeightLabels = function () {
										var e = this,
											t = this.pullingHeightLabels.splice(
												this.mulManager.splitter.pullingHeights.length,
											);
										this.mulManager.splitter.pullingHeights.forEach(function (t, n) {
											e.pullingHeightLabels[n] ||
												(e.pullingHeightLabels[n] = new w.Label(e, h.default.point(), ''));
											var r = e.pullingHeightLabels[n];
											(r.fontSize = u.DrawParams.Ins.dimFontSize),
												(r.text = '△' + t.height.toString());
											var i = e.mulManager.splitter.pullingHeightSubs.find(function (e) {
													return !e.IsMullion && e.polyId.equalTo(t.polyId);
												}).polygon.box.center,
												o = h.default.segment(i, i.translate(h.default.vector(0, 999999))),
												a = e.polygon.boundary.intersect(o)[0];
											(r.position = a),
												(r.position = r.position.translate(
													h.default.vector(0, r.fontSize / 2 - 20),
												)),
												(r.hidden = 0 === t.height),
												r.updatePoly();
										}),
											t.forEach(function (e) {
												e.remove(), e.recycle();
											});
									}),
									(t.prototype.updateLabel = function () {
										this.polygon.isEmpty ||
											((this.label.hidden = !this.turned),
											(this.label.position = this.polygon.box.low.translate(
												h.default.vector(30, -this.label.fontSize / 2 - 10),
											)),
											this.label.updatePoly());
									}),
									Object.defineProperty(t.prototype, 'defaultSashAssignWay', {
										get: function () {
											return this.openToward === v.OpenToward.Inward
												? w.PushSashAssignWay.InwardLeft
												: w.PushSashAssignWay.OutwardLeft;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'groundLine', {
										get: function () {
											var e = this,
												t = this.polygon.box;
											return (
												this.view.shapeManager.walls.forEach(function (n) {
													(n.polygon.isSibling(e.polygon) || n.isBackground) &&
														(t = t.merge(n.polygon.box));
												}),
												h.default.line(h.default.point(0, t.ymax), h.default.vector(0, 1))
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dragModify', {
										get: function () {
											return u.DrawParams.Ins.dragModifyOnFrame;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.getIDimInfo = function (e) {
										void 0 === e && (e = !1);
										var t = [];
										return (
											e
												? t.push.apply(t, a(this.dim.diMgr.allDims))
												: t.push.apply(t, a(this.dim.diMgr.visualDims)),
											t.push.apply(t, a(this.extraDimManager.extraDims)),
											t.push.apply(t, a(this.sashManager.dims)),
											t
										);
									}),
									(t.prototype.recycle = function (t) {
										if (
											(void 0 === t && (t = !1), e.prototype.recycle.call(this, !0), this.gshape)
										) {
											var n = this.gshape;
											n.moveTo(n.getLayer()), n.hide(), (this.gshape = void 0);
										}
									}),
									(t.prototype.addMullion = function (e) {
										if (this.sashManager.addMullion(e)) return this.updateFrame(!0), !0;
										var t = this.mulManager.addMullion(e);
										return t && this.updateFrame(!0), t;
									}),
									(t.prototype.addDecorationBar = function (e, t) {
										var n = this.sashManager.addDecorationBar(e, t);
										return n === v.addDecorationBarRet.notInArea
											? this.mulManager.addDecorationBar(e, t) === v.addDecorationBarRet.create
											: n === v.addDecorationBarRet.create;
									}),
									(t.prototype.drag = function (e, t, n) {
										void 0 === n && (n = h.default.point());
										var r = this.dragFrame(e, t, n),
											i = this.dragMullion(e, t);
										return r || i;
									}),
									(t.prototype.dragInner = function (e, t, n) {
										return e.where === w.ShapeType.SashMullion ||
											e.where === w.ShapeType.ScreenMullion
											? this.sashManager.dragInnerMullion(e, t, n)
											: e.parentId === this.id &&
													(this.mulManager.hasSplitBar && this.frameManager.recreateBars(),
													this.mulManager.dragInnerMullion(e, t, n),
													this.sashManager.recreate(this.mulManager.findPoly),
													this.dim.updatePoly(this.polygon),
													this.extraDimManager.updatePoly(this.polygon),
													!0);
									}),
									(t.prototype.dragMullion = function (e, t) {
										return e.where === w.ShapeType.SashMullion ||
											e.where === w.ShapeType.ScreenMullion ||
											e.where === w.ShapeType.KfcWaist ||
											e.where === w.ShapeType.ShadePushSashMullion
											? this.sashManager.dragMullion(e, t)
											: e.where === w.ShapeType.FrameMullion &&
													e.parentId === this.id &&
													(this.mulManager.hasSplitBar && this.frameManager.recreateBars(),
													this.mulManager.dragMullion(e, t),
													this.dim.updatePoly(this.polygon),
													this.updatePullingHeightLabels(),
													this.sashManager.recreate(this.mulManager.findPoly),
													this.sashManager.filterDuplicateDims(),
													this.topView.updatePoly(this.polygon),
													this.extraDimManager.updatePoly(this.polygon),
													!0);
									}),
									(t.prototype.dragFrame = function (e, t, n) {
										return (
											void 0 === n && (n = h.default.point()),
											e.where === w.ShapeType.Frame &&
												!!this.frameManager.dragFrame(e, t, n) &&
												(this.updateFrame(), !0)
										);
									}),
									(t.prototype.addSash = function (e, t) {
										void 0 === t && (t = w.ShapeType.Sash);
										var n = this.mulManager.hitTest(e);
										if (void 0 === n) return !1;
										var r = this.sashManager.addSash(n, t);
										r && this.mulManager.removeFiller(n.polyId), this.topView.updatePoly();
										var i = this.sashManager.thefts.find(function (e) {
											return e.polyId.equalTo(n.polyId);
										});
										return i && (i.updatePoly(i.polygon), i.draw(this.view)), r;
									}),
									(t.prototype.addKfcSash = function (e, t) {
										void 0 === t && (t = w.ShapeType.Sash);
										var n = this.mulManager.hitTest(e);
										if (void 0 === n) return !1;
										var r = this.sashManager.addKfcSash(n, t);
										return (
											r && this.mulManager.removeFiller(n.polyId), this.topView.updatePoly(), r
										);
									}),
									(t.prototype.addDoubleKfcSash = function (e) {
										var t = this.mulManager.hitTest(e);
										if (void 0 === t) return !1;
										var n = this.sashManager.addDoubleKfcSash(t);
										return (
											n && this.mulManager.removeFiller(t.polyId), this.topView.updatePoly(), n
										);
									}),
									(t.prototype.addDoubleSash = function (e, t) {
										void 0 === t && (t = w.ShapeType.DoubleSash);
										var n = this.mulManager.hitTest(e);
										if (void 0 === n) return !1;
										var r = this.sashManager.addDoubleSash(n, t);
										r && this.mulManager.removeFiller(n.polyId), this.topView.updatePoly();
										var i = this.sashManager.thefts.find(function (e) {
											return e.polyId.equalTo(n.polyId);
										});
										return i && (i.updatePoly(i.polygon), i.draw(this.view)), r;
									}),
									(t.prototype.addShutter = function (e) {
										var t = this.mulManager.hitTest(e);
										if (void 0 === t) return !1;
										var n = this.sashManager.addShutter(t);
										return n && this.mulManager.removeFiller(t.polyId), n;
									}),
									(t.prototype.addFold = function (e, t) {
										void 0 === t && (t = w.ShapeType.FoldSash);
										var n = this.mulManager.hitTest(e);
										if (void 0 === n) return !1;
										var r = this.sashManager.addFold(n, t);
										return (
											r && this.mulManager.removeFiller(n.polyId), this.topView.updatePoly(), r
										);
									}),
									(t.prototype.addShadePushSash = function (e) {
										var t = this.mulManager.hitTest(e);
										if (void 0 === t) return !1;
										var n = this.sashManager.addShadePushSash(t);
										return (
											n && this.mulManager.removeFiller(t.polyId), this.topView.updatePoly(), n
										);
									}),
									(t.prototype.addDoubleShadePushSash = function (e) {
										var t = this.mulManager.hitTest(e);
										if (void 0 === t) return !1;
										var n = this.sashManager.addDoubleShadePushSash(t);
										return (
											n && this.mulManager.removeFiller(t.polyId), this.topView.updatePoly(), n
										);
									}),
									(t.prototype.addExtraDim = function (e) {
										this.extraDimManager.addExtraDim(e);
									}),
									(t.prototype.deleteExtraDim = function (e) {
										this.extraDimManager.extraDims.delete(e);
									}),
									(t.prototype.addSlide = function (e, t) {
										var n = this,
											r = this.mulManager.hitTest(e);
										if (void 0 === r) return !1;
										var i = this.sashManager.addSlide(r, t);
										return (
											i &&
												(this.polygon.isRectangle() &&
													this.polygon.vertices.forEach(function (e, t) {
														return n.frameManager.setJointWay(
															t,
															u.DrawParams.Ins.slideFrameEdgeJointWay,
															n.view,
														);
													}),
												r.isRectangle() && this.adjustSlideDim(),
												this.mulManager.removeFiller(r.polyId)),
											this.topView.updatePoly(),
											i
										);
									}),
									(t.prototype.adjustSlideDim = function () {
										var e = this,
											t = function (t) {
												var n = d.EdgeFinder.Instance.find(
														d.Direction.Down,
														t.polygon.edges,
														t.polygon.orientation,
													),
													r = e.sashManager.slides.find(function (e) {
														return m.Utils.polyConcideSeg(e.polygon, n);
													}),
													i = d.EdgeFinder.Instance.find(
														d.Direction.Up,
														t.polygon.edges,
														t.polygon.orientation,
													),
													o = e.sashManager.slides.find(function (e) {
														return m.Utils.polyConcideSeg(e.polygon, i);
													}),
													a = e.mulManager.dockMgr.getDockEdge(t.polyId, e);
												if (a && a instanceof h.default.Segment && m.Utils.isSegVertical(a)) {
													var s,
														l,
														c,
														u = a.start.y < a.end.y ? p.AlignTypeEnum.right : p.AlignTypeEnum.left,
														f = a.start.y < a.end.y ? p.AlignTypeEnum.left : p.AlignTypeEnum.right;
													(s =
														(void 0 === r && void 0 === o) || (r && o)
															? p.AlignTypeEnum.center
															: r
															? u
															: f),
														(l = s),
														((c = t).dimAlignment = l),
														(e.mulManager.splitter.lines[c.polyId.idx].alignType = l),
														v.MullionManager.allBarsAlignedWith(t).forEach(function (e) {
															(e.bar.dimAlignment = s),
																(e.iHost.mulManager.splitter.lines[e.bar.polyId.idx].alignType = s);
														});
												}
											};
										this.mulManager.bars.forEach(function (e) {
											e.polygon.mulShape instanceof h.default.Segment &&
												m.Utils.isSegHorizontal(e.polygon.mulShape) &&
												t(e);
										}),
											this.dim.updatePoly();
									}),
									(t.prototype.translate = function (e) {
										this.frameManager.translate(e),
											this.mulManager.translate(e),
											this.sashManager.translate(e),
											this.dim.translate(e),
											this.topView.translate(e),
											this.extraDimManager.translate(e),
											this.serial.translate(e);
									}),
									(t.prototype.toJSON = function () {
										return {
											uid: this.uid,
											type: this.type,
											ps: this.profileSizeManager.toJSON(),
											polygon: this.polygon.toJSON(),
											fm: this.frameManager.toJSON(),
											mm: this.mulManager.toJSON(),
											sm: this.sashManager.toJSON(),
											cm: this.colorManager.toJSON(),
											tv: this.topView.toJSON(),
											dm: this.dim.toJSON(),
											edm: this.extraDimManager.toJSON(),
											lds: this.lockDragSize,
											ser: this.serial.toJSON(),
											tn: this.turned,
											esr: this.equalSplitRatios,
											ies: this.ignoreEqualSplit.map(function (e) {
												return e.toJSON();
											}),
											ot: this.openToward,
										};
									}),
									(t.prototype.deserialize = function (e, t) {
										var n = this;
										(this.uid = e.uid || 0),
											this.profileSizeManager.deserialize(e.ps),
											this.colorManager.deserialize(e.cm, t, function (e) {
												e && (n.draw(e), e.activeLayer.draw());
											});
										var r = w.PolyParser.parse(e.polygon);
										this.mulManager.deserialize(e.mm),
											e.mm &&
												e.mm.dbs &&
												this.mulManager.decorationBarManager.deserialize(e.mm.dbs),
											this.sashManager.deserialize(e.sm),
											this.frameManager.deserialize(e.fm),
											this.topView.deserialize(e.tv),
											this.extraDimManager.deserialize(e.edm),
											(this.dim.polygon = r),
											this.dim.deserialize(e.dm),
											this.frameManager.recreated(r, t),
											(this.lockDragSize = !!e.lds),
											e.ser && this.serial.deserialize(e.ser, t),
											(this.turned = !!e.tn && e.tn),
											(this.equalSplitRatios = e.esr || []),
											e.ies &&
												(this.ignoreEqualSplit = e.ies.map(function (e) {
													return m.PolyId.createByJson(e);
												})),
											e.ot && (this.openToward = e.ot),
											u.DrawParams.Ins.pullingHeightMigrate &&
												this.polygon.pullingHeightMigration(this.mulManager, this.frameManager);
									}),
									(t.prototype.hitBar = function (e, t) {
										var n = this.frameManager,
											r = n.hitBar(e, t);
										r === m.HitResult.All && this.polygon.raiseFrameEvent(this),
											void 0 !== n.activeBarIndex &&
												t.eventBus.emit({
													type: f.EventType.frame_bar_dim,
													payload: new f.FrameBarDim(n.bars[n.activeBarIndex], t),
												});
										var i = this.sashManager.hitBar(e, t),
											o = this.mulManager.hitBar(e, t);
										o !== m.HitResult.None &&
											(this.frameManager.hideAssist(), this.frameManager.highlight(!1));
										var a = this.dim.hitBar(e, t);
										return r !== m.HitResult.None || i || o !== m.HitResult.None || a;
									}),
									(t.prototype.updateFrame = function (e) {
										void 0 === e && (e = !1),
											e && this.frameManager.recreateBars(),
											this.mulManager.updatePoly(),
											this.sashManager.recreate(this.mulManager.findPoly),
											this.dim.updatePoly(this.polygon),
											this.add(this.dim),
											this.topView.updatePoly(this.polygon),
											this.add(this.topView),
											this.extraDimManager.updatePoly(this.polygon),
											this.serial.updatePoly(),
											this.add(this.serial),
											this.updateLabel(),
											this.add(this.label),
											this.polygon.updatePullingHeightLabel(this.pullingHeightLabel),
											this.updatePullingHeightLabels(),
											this.add(this.pullingHeightLabel),
											this.add(this.borders),
											this.borders.updatePoly();
									}),
									(t.prototype.showExtraDimAngle = function (e) {
										var t = this;
										void 0 === e && (e = !0),
											e &&
												this.extraDimManager.extraDims.forEach(function (e) {
													e instanceof w.ExtraDimAngle && e.remove();
												});
										var n = this.polygon.edges.length;
										this.polygon.edges.forEach(function (e, r) {
											var i = t.polygon.edges[(r - 1 + n) % n];
											if (
												t.polygon.edges[r] instanceof h.default.Segment &&
												i instanceof h.default.Segment
											) {
												var o = new w.ExtraDimAngle(
													t.polygon.polygon.vertices[m.Utils.getNextIdx(r, n)],
													t,
												);
												m.Utils.isZero(o.value) ||
													m.Utils.isZero(o.value - 90) ||
													o.host.addExtraDim(o);
											}
										});
									}),
									(t.prototype.updatePoly = function (e) {
										this.updateFrame(!0);
									}),
									(t.prototype.hideAssist = function () {
										this.frameManager.hideAssist(),
											this.sashManager.hideAssist(),
											this.mulManager.hideAssist();
									}),
									(t.prototype.snapVertex = function (e, t) {
										if (t !== this.id) return this.frameManager.snapVertex(e);
									}),
									(t.prototype.snapEdge = function (e, n, r) {
										var i, o;
										if (!(r instanceof t && r.id === this.id))
											try {
												for (
													var a = s([this.frameManager, this.mulManager, this.sashManager]),
														l = a.next();
													!l.done;
													l = a.next()
												) {
													var h = l.value.snapEdge(e, n, r);
													if (h) return h;
												}
											} catch (e) {
												i = {
													error: e,
												};
											} finally {
												try {
													l && !l.done && (o = a.return) && o.call(a);
												} finally {
													if (i) throw i.error;
												}
											}
									}),
									(t.prototype.delete = function (e) {
										var t = this;
										return this.selected
											? (this.hideAssist(), this.remove(), !0)
											: (this.extraDimManager.extraDims.forEach(function (e) {
													e.delete(t.view);
											  }),
											  this.mulManager.delete(e, this.sashManager),
											  this.frameManager.recreateBars(),
											  this.sashManager.delete(this.mulManager.addFiller, e),
											  this.dim.updatePoly(),
											  this.topView.updatePoly(),
											  this.adjustSlideDim(),
											  this.updatePoly(),
											  this.draw(e),
											  !1);
									}),
									Object.defineProperty(t.prototype, 'usedPoly', {
										get: function () {
											return this.sashManager ? this.sashManager.usedPoly : [];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'unusedPoly', {
										get: function () {
											var e = this.usedPoly;
											return this.avaiablePoly.filter(function (t) {
												return !e.some(function (e) {
													return t.polyId.equalTo(e);
												});
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'avaiablePoly', {
										get: function () {
											return this.mulManager
												? this.mulManager.splitter.avaiablePoly
												: this.frameManager.innerPoly.map(function (e) {
														return e.clone();
												  });
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'selected', {
										get: function () {
											return this.frameManager.selected;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.boxWithoutTransform = function (e) {
										void 0 === e && (e = 0);
										var t = new w.WinPolygon(this.polygon.box.toSegments());
										e > 0 && (t = t.parallelPoly(e, !1));
										var n = t.box;
										this.sashManager.sashes.forEach(function (e) {
											var t = e.box();
											isNaN(t.xmax) || (n = n.merge(e.box()));
										});
										var r = this.dim.box;
										return (
											(n = isNaN(r.xmax) ? n : n.merge(r)),
											this.extraDimManager.extraDims.forEach(function (e) {
												var t = e.hitPolygon().box;
												void 0 === t ||
													isNaN(t.xmin) ||
													isNaN(t.xmax) ||
													isNaN(t.ymin) ||
													isNaN(t.ymax) ||
													(n = n.merge(e.hitPolygon().box));
											}),
											n
										);
									}),
									Object.defineProperty(t.prototype, 'box', {
										get: function () {
											var e = this.boxWithoutTransform(300),
												t = this.getParentMatrices(),
												n = new w.WinPolygon(e.toSegments())
													.clone()
													.transform(m.Utils.applyMatrixMultiply(t));
											return (e = n.box), this.topView.box.merge(e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.changePolygon = function (e, t) {
										this.frameManager.recreated(this.polygon.genPolygon(e), t);
									}),
									(t.prototype.getPointPosition = function (e, t) {
										var n = this;
										void 0 === t && (t = !1);
										var r = function (t, n) {
											var r,
												i = !1;
											if (
												(t.polygon.vertices.forEach(function (t, o) {
													i ||
														(t.equalTo(e) &&
															((i = !0),
															((r = new w.FrameRelationData(
																w.FrameRelationEnum.frame,
																o,
															)).frameIdx = n)));
												}),
												i)
											)
												return r;
											var o = t.mulManager.dockMgr.findPt(e);
											return o
												? (((r = new w.FrameRelationData(
														w.FrameRelationEnum.dock,
														o.pid.idx,
												  )).dock = {
														dockId: o.pid,
														polyId: o.dd.idx.clone(),
												  }),
												  (r.frameIdx = n),
												  r)
												: void 0;
										};
										if (t) {
											var i = this.view.shapeManager.shapem.indexOf(this);
											if ((s = r(this, (a = -1 === i ? this.view.shapeManager.shapem.length : i))))
												return s;
										} else {
											var o = this.view.shapeManager.shapem.map(function (e) {
												return e;
											});
											o.find(function (e) {
												return e.id === n.id;
											}) || o.push(this);
											for (var a = 0; a < o.length; a++) {
												var s;
												if ((s = r(o[a], a))) return s;
											}
										}
									}),
									(t.prototype.tweakCouple = function (e, t, n, r, i, a) {
										var s,
											l,
											c,
											u,
											p = t.contains(r.start),
											f = t.contains(r.end);
										if (p || f) {
											var d,
												g,
												y,
												v,
												w = function (e, t, n, r, i, o) {
													var a = n.distanceTo(e.start)[0] / e.length,
														s = h.default.vector(t.start, t.end).multiply(a),
														l = h.default.point(t.start.x + s.x, t.start.y + s.y);
													return [
														h.default.vector(n, l),
														i ? m.Utils.getPrevIdx(r, o) : m.Utils.getNextIdx(r, o),
													];
												},
												b = a.polygon.edges.length;
											p && f
												? ((d = (c = o(w(t, n, r.start, i, !0, b), 2))[0]),
												  (g = c[1]),
												  (y = (u = o(w(t, n, r.end, i, !1, b), 2))[0]),
												  (v = u[1]),
												  h.default.vector(r.end, r.start).dot(e) > 0
														? (a.dragLength(g, d), a.dragLength(v, y))
														: (a.dragLength(v, y), a.dragLength(g, d)))
												: p
												? ((d = (s = o(w(t, n, r.start, i, !0, b), 2))[0]),
												  (g = s[1]),
												  a.dragLength(g, d))
												: f &&
												  ((y = (l = o(w(t, n, r.end, i, !1, b), 2))[0]),
												  (v = l[1]),
												  a.dragLength(v, y));
										}
									}),
									(t.prototype.tweakCoupleHelper = function (e, t, n, r, i) {
										var o = this;
										n.forEach(function (n, a) {
											a !== r &&
												n instanceof h.default.Segment &&
												e.shapeManager.couples.forEach(function (r) {
													var s = d.EdgeFinder.Instance.findConnectedEdge(n, [r]);
													s.bar &&
														r.length === n.length &&
														(o.tweakCouple(
															t,
															n,
															i[a],
															r.polygon.edges[s.edgeIndex],
															s.edgeIndex,
															r,
														),
														r.updatePoly(),
														r.draw(e));
												});
										});
									}),
									(t.prototype.handleWall = function (e, t, n, r) {
										var i = this,
											o = [];
										return (
											r.shapeManager.walls.forEach(function (r) {
												var a = !1,
													s = r.snapToFrame(i);
												s &&
													(m.Utils.segCoincide(s, e)
														? (r.translate(
																n.subtract(n.projectionOn(h.default.vector(s.start, s.end))),
														  ),
														  (a = !0))
														: m.Utils.isSegHorizontal(e) && m.Utils.isSegVertical(s)
														? (r.onEditHeight((r.polygon.box.ymax - r.polygon.box.ymin) * t),
														  (a = !0))
														: m.Utils.isSegVertical(e) &&
														  m.Utils.isSegHorizontal(s) &&
														  (r.onEditWidth((r.polygon.box.xmax - r.polygon.box.xmin) * t),
														  (a = !0)),
													a && o.push(r));
											}),
											o
										);
									}),
									(t.prototype.handlePolygon = function (e, t, n, r, i) {
										void 0 === i && (i = !0);
										var o = this.polygon.box.xmax - this.polygon.box.xmin,
											a = this.polygon.box.ymax - this.polygon.box.ymin;
										if (!this.polygon.isRectangle() || this.polygon instanceof w.TrapezoidPoly)
											this.polygon = this.polygon.editDim(e, n, r);
										else if (m.Utils.isSegHorizontal(t)) {
											var s = o,
												l = a * n;
											this.resize(s, l, i);
											var c = this.polygon.edge(e),
												u = h.default.vector(0, c.middle().y - t.middle().y);
											this.translate(u);
										} else
											m.Utils.isSegVertical(t)
												? ((s = o * n),
												  (l = a),
												  this.resize(s, l, i),
												  (c = this.polygon.edge(e)),
												  (u = h.default.vector(c.middle().x - t.middle().x, 0)),
												  this.translate(u))
												: (this.polygon = this.polygon.editDim(e, n, r));
									}),
									(t.prototype.handleConnectedComponent = function (e, n, r, i, o, a) {
										var s = this.polygon.edge(o);
										if (
											s instanceof h.default.Segment &&
											m.Utils.isParallel(
												h.default.line(s.start, s.end),
												h.default.line(e.start, e.end),
											)
										) {
											this.tweakCoupleHelper(i, r, a, o, this.polygon.edges);
											var l = m.Utils.getParallelVec(
												h.default.line(e.start, e.end),
												h.default.line(s.start, s.end),
											);
											n.forEach(function (e) {
												e.translate(l),
													e instanceof t &&
														e.sashManager.sashes.forEach(function (e) {
															e.opened && e.draw(i);
														});
											}),
												n
													.filter(function (e) {
														return e instanceof w.CornerJoiner;
													})
													.forEach(function (e) {
														e.skewFrame(i);
													}),
												new d.FrameUtil(i)
													.getFrameConnectedComponents(this)
													.filter(function (e) {
														return e instanceof t;
													})
													.forEach(function (e) {
														e.extraDimManager.extraDims.forEach(function (t) {
															t.updatePoly(e.polygon), t.draw(i);
														});
													});
										}
									}),
									(t.prototype.editDimInfo = function (e, t, n, r) {
										var i = e.targetBar,
											o = e.dir,
											a = this.polygon.controlDimFlag,
											s = t / n;
										if (a) {
											var l = t - n;
											this.editDim(i.polygon.polyId.idx, s, o.multiply(l), this.view);
										} else {
											var c = e.isReverse(r),
												u = !1,
												p = c
													? m.Utils.getPrevIdx(i.polygon.polyId.idx, this.polygon.vertices.length)
													: i.polygon.polyId.idx,
												f = this.polygon.edges,
												d = f[(p + f.length - 1) % f.length],
												g = f[p];
											if (d instanceof h.default.Segment && g instanceof h.default.Segment) {
												var y = h.default.vector(d.start.x - d.end.x, d.start.y - d.end.y),
													v = h.default.vector(g.end.x - d.end.x, g.end.y - d.end.y);
												m.Utils.isZero(y.dot(v)) && (u = !0);
											}
											if (((l = c ? n - t : t - n), u)) {
												var w = void 0;
												(w = a
													? i.polygon.polyId.idx
													: c
													? m.Utils.getPrevIdx(
															i.polygon.polyId.idx,
															this.polygon.vertices.length,
															2,
													  )
													: i.polygon.polyId.idx),
													this.editDim(w, s, o.multiply(l), this.view);
											} else this.editDimVertex(p, o.multiply(l));
										}
									}),
									(t.prototype.editDim = function (e, t, n, r, i) {
										void 0 === i && (i = !0);
										var o = this.polygon.edge(e),
											a = this.polygon.edges,
											s = new d.FrameUtil(r).getFrameEdgeConnectedComponents(this, e);
										if (o && o instanceof h.default.Segment) {
											var l = this.handleWall(o, t, n, r);
											(s = s.filter(function (e) {
												return l.every(function (t) {
													return t !== e;
												});
											})),
												this.handlePolygon(e, o, t, n, i),
												g.EditSplitterTool.handleExtraDim(this, r),
												this.handleConnectedComponent(o, s, n, r, e, a);
										} else this.polygon = this.polygon.editDim(e, t, n);
									}),
									(t.prototype.editDimVertex = function (e, t) {
										var n = new w.DescriptivePolygonPoints(this.polygon);
										n.vertexes[e] = n.vertexes[e].translate(t);
										var r = n.buildWinEdges();
										this.polygon = this.polygon.cloneWith(r);
									}),
									(t.prototype.editArcDim = function (e, t) {
										var n = this.polygon.edges,
											r = n[e],
											i = r.start,
											o = r.end,
											a = h.default.segment(i, o).middle(),
											s = h.default.segment(a, r.middle()),
											l = m.Utils.lineDirPt(s, t, a),
											c = y.ArcUtils.CreateArcFrom3Points(i, o, l);
										if (
											((n[e] = c),
											!c.counterClockwise && h.default.Utils.EQ_0(c.startAngle - 2 * Math.PI))
										) {
											var u = h.default.arc(
												c.center,
												c.r.valueOf(),
												c.startAngle - 2 * Math.PI,
												c.endAngle,
												c.counterClockwise,
											);
											n[e] = u;
										}
										this.polygon = this.polygon.cloneWith(n);
									}),
									(t.prototype.editChordDim = function (e, t) {
										var n = this.polygon.edges,
											r = n[e],
											i = r.start,
											o = r.end,
											a = h.default.segment(i, o),
											s = m.Utils.lineDirPt(a, t, i),
											l = new w.DescriptivePolygonPoints(this.polygon);
										(l.vertexes[(e + 1) % n.length] = s),
											(this.polygon = this.polygon.cloneWith(l.buildWinEdges()));
									}),
									(t.prototype.resize = function (e, t, n) {
										void 0 === n && (n = !0);
										var r = this.recordMullionPosition(this),
											i = this.polygon.box,
											o = i.center.clone(),
											a = h.default.vector(o, h.default.point()),
											s = i.xmax - i.xmin,
											l = i.ymax - i.ymin,
											c = new h.default.Matrix().scale(e ? e / s : 1, t ? t / l : 1);
										return (
											this.polygon.translate(a).transform(c).translate(a.invert()),
											n
												? (r.length > 0 &&
														(this.frameManager.recreateBars(),
														this.recoveryMullionPosition(this, r)),
												  this)
												: (this.mulManager.splitter.lines.forEach(function (e) {
														var t = e.line;
														if (
															t &&
															!(
																t instanceof y.CutLine ||
																t instanceof h.default.Arc ||
																t instanceof h.default.Segment
															)
														) {
															var n = t
																.intersect(
																	h.default.line(h.default.point(), t.norm.rotate90CCW()),
																)[0]
																.translate(a)
																.transform(c)
																.translate(a.invert());
															e.line = h.default.line(t.norm, n);
														}
												  }),
												  this)
										);
									}),
									(t.prototype.recoveryMullionPosition = function (e, t) {
										var n = this;
										t.forEach(function (t) {
											var r = e.frameManager.bars.find(function (e) {
													return e.polyId.equalTo(t.framePolyId);
												}),
												i = e.mulManager.bars.find(function (e) {
													return e.polyId.equalTo(t.mulPolyId);
												});
											if (r && i) {
												var o = n.barDistance(i, r);
												if (!o) return;
												var a = t.distance[1].tangentInStart();
												if (
													e.mulManager.splitter.lines[i.polyId.idx].line instanceof h.default.Line
												) {
													var s = o[0] - t.distance[0],
														l = a.multiply(s);
													e.mulManager.splitter.dragLine(t.mulPolyId.idx, l, i),
														t.aligns.forEach(function (t) {
															return e.mulManager.dragMullion(t, l);
														});
												}
											}
										});
									}),
									(t.prototype.getMulShape = function (e) {
										if (e) {
											var t = e.polygon.mulShape;
											if (t && !(t instanceof y.SimpleLine || t instanceof h.default.Arc)) return t;
										}
									}),
									(t.prototype.barDistance = function (e, t) {
										var n = this.getMulShape(e),
											r = this.getMulShape(t);
										if (n && r && m.Utils.isParallel(n, r))
											return n.middle().distanceTo(h.default.line(r.start, r.end));
									}),
									(t.prototype.recordMullionPosition = function (e) {
										var t = this,
											n = [],
											r = [];
										return (
											e.sashManager.sashes.forEach(function (i) {
												if (
													!r.some(function (e) {
														return i.polyId.equalTo(e);
													})
												) {
													r.push(i.polyId);
													var o = i.polygon.edDock.docks;
													[
														[o[0], o[2]],
														[o[1], o[3]],
													].forEach(function (r) {
														var i = r.find(function (e) {
																return e.type === m.DockType.Frame;
															}),
															o = r.find(function (e) {
																return e.type === m.DockType.Mullion;
															});
														if (i && o) {
															var a = i.dockBar(e),
																s = o.dockBar(e);
															if (!a) throw new Error('no frame bar found');
															if (!s) throw new Error('no frame bar found');
															var l = t.barDistance(s, a);
															if (l) {
																var h = v.MullionManager.allBarsAlignedWith(s)
																	.filter(function (t) {
																		return t.iHost === e;
																	})
																	.map(function (e) {
																		return e.bar;
																	});
																n.push({
																	mulPolyId: s.polyId,
																	framePolyId: a.polyId,
																	distance: l,
																	aligns: h,
																});
															}
														}
													});
												}
											}),
											n
										);
									}),
									(t.prototype.findBarByPolyId = function (e) {
										return a(this.frameManager.bars, this.mulManager.bars).find(function (t) {
											return t.polyId.equalTo(e);
										});
									}),
									(t.prototype.isCornerJoinerRoot = function () {
										var e = this,
											t = !1,
											n = !1;
										return (
											this.view.shapeManager.cornerJoiners.forEach(function (r) {
												var i = r.hostFrame;
												i &&
													(i.id === e.id && (t = !0),
													new d.FrameUtil(e.view)
														.getCoupleEdgeConnectedComponents(r, r.cornerEdge)
														.find(function (t) {
															return t.id === e.id;
														}) &&
														i.id !== e.id &&
														(n = !0));
											}),
											!!t && !n
										);
									}),
									(t.prototype.connectWalls = function () {
										var e = this,
											t = [];
										return (
											this.view.shapeManager.walls.forEach(function (n) {
												d.EdgeFinder.Instance.isPolygonConnected(e.polygon, n.polygon) && t.push(n);
											}),
											t
										);
									}),
									Object.defineProperty(t.prototype, 'serialString', {
										set: function (e) {
											(this.serial.text = e), this.serial.updatePoly(), this.serial.draw(this.view);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.setBarDimAlign = function (e) {
										var t,
											n,
											r = this.mulManager.bars.find(function (t) {
												return t.polyId.equalTo(e.polyId);
											});
										if (!r) {
											var i = this.sashManager.allSashes;
											try {
												for (var o = s(i), a = o.next(); !a.done; a = o.next()) {
													var l = a.value;
													if (l.id === e.parentId) {
														r = l.mulManager.bars[e.polyId.idx];
														break;
													}
												}
											} catch (e) {
												t = {
													error: e,
												};
											} finally {
												try {
													a && !a.done && (n = o.return) && n.call(o);
												} finally {
													if (t) throw t.error;
												}
											}
										}
										r && r.setBarDimAlign(this.view, this.mulManager, !1);
									}),
									Object.defineProperty(t.prototype, 'tCornerConnector', {
										get: function () {
											var e = this;
											return this.view.shapeManager.connectors.find(function (t) {
												return m.Utils.polyConcideSeg(e.polygon, t.tCornerEdge);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.clearCornerStyle = function () {
										this.atTCorner = !1;
										var e = this.gshape,
											t = this.topView.gshape;
										e.clearCache(), e._clearTransform(), t.clearCache(), t._clearTransform();
									}),
									(t.prototype.tCornerStyle = function () {
										this.atTCorner = !0;
										var e = this.topView,
											t = this.gshape,
											n = this.topView.gshape,
											r = this.polygon.box.xmin,
											i = Math.atan(1),
											o = Math.cos(i),
											a = r * (1 - o),
											s = -1 * r,
											l = new c.Transform().skew(0, 1).translate(0, s).translate(a, 0).scale(o, 1);
										t.clearCache(), t.getTransform().multiply(l), t.moveToTop();
										var h = e.defaultOffset.add(e.offset),
											u = e.bound.xmin,
											p = h.y,
											f = new c.Transform()
												.translate(u, p)
												.rotate(Math.PI / 2)
												.translate(-u, -p);
										n.moveTo(this.view.activeLayer), n.clearCache(), n.getTransform().multiply(f);
									}),
									(t.prototype.applySlideProfileSize = function () {
										var e = this,
											t = this.view.params,
											n = new Map([
												[w.ShapeType.UpTrack, t.upTrack],
												[w.ShapeType.FixedUpTrack, t.fixedUpTrack],
												[w.ShapeType.DownTrack, t.downTrack],
												[w.ShapeType.FixedDownTrack, t.fixedDownTrack],
												[w.ShapeType.UpDownTrack, t.upDownTrack],
												[w.ShapeType.SideTrack, t.sideTrack],
												[w.ShapeType.DoubleSideTrack, t.doubleSideTrack],
											]),
											r = !1;
										return (
											this.children.forEach(function (t) {
												if (t instanceof w.Bar) {
													var i = n.get(t.type);
													if (i)
														if (t.where === w.ShapeType.FrameMullion) {
															var o = e.mulManager.splitter;
															o.alignForNewProfileSize(t.polyId.idx, i),
																(o.lineProfileSizes[t.polyId.idx] = i),
																(r = !0);
														} else
															t.where === w.ShapeType.Frame &&
																((e.frameManager._edgeWidth[t.polyId.idx] = i), (r = !0));
												}
											}),
											r && this.updatePoly(),
											r
										);
									}),
									(t.prototype.replaceFrameByJson = function (e) {
										var t = this,
											n = this.profileSizeManager.output(),
											r = this.polygon.box.center,
											i = this.polygon.boxWidth,
											o = this.polygon.boxHeight,
											s = e.sm[0];
										this.hideAssist(),
											this.sashManager.allSashes.forEach(function (e) {
												t.sashManager.removeSash(e.polyId.idx, t.mulManager.addFiller, t.view);
											}),
											this.profileSizeManager.deserialize(s.ps);
										var l = w.PolyParser.parse(s.polygon);
										this.mulManager.deserialize(s.mm),
											s.mm &&
												s.mm.dbs &&
												this.mulManager.decorationBarManager.deserialize(s.mm.dbs),
											this.sashManager.deserialize(s.sm),
											this.frameManager.deserialize(s.fm),
											this.extraDimManager.deserialize(s.edm),
											this.frameManager.recreated(l, this.view),
											(this.lockDragSize = !!s.lds),
											s.ser && this.serial.deserialize(s.ser, this.view),
											(this.turned = !!s.tn && s.tn),
											(this.equalSplitRatios = s.esr || []),
											s.ies &&
												(this.ignoreEqualSplit = s.ies.map(function (e) {
													return m.PolyId.createByJson(e);
												})),
											s.ot && (this.openToward = s.ot),
											u.DrawParams.Ins.pullingHeightMigrate &&
												this.polygon.pullingHeightMigration(this.mulManager, this.frameManager),
											this.resize(i, o, !1),
											Object.assign(this.profileSizeManager, n);
										var c = this.polygon.box.center,
											p = h.default.vector(r.x - c.x, r.y - c.y);
										this.translate(p),
											w.TopView.optimize(this.view.shapeManager.shapem),
											this.updatePoly();
										var f = u.DrawParams.Ins.glassSpec;
										a(
											this.mulManager.glasses.flat(),
											this.sashManager.allSashes
												.flat()
												.map(function (e) {
													return e.mulManager.glasses;
												})
												.flat(),
										).forEach(function (e) {
											e instanceof w.Glass && (e.glassSpec = f.clone());
										}),
											this.draw(this.view);
									}),
									t
								);
							})(w.Shape);
						t.Frame = b;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ThreedArcFrame = void 0);
						var l = s(n(0)),
							h = n(2),
							c = n(9),
							u = n(5),
							p = n(7),
							f = n(1),
							d = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = !1);
									var i = e.call(this, t, n, r) || this;
									return (
										(i.view = n),
										(i.vshapes = []),
										(i.shapes = []),
										(i.arcFaceInner = !1),
										(i.threedHeight = 300),
										(i.threedChordLength = 2400),
										(i.threedHeightText = new f.Text(
											p.DrawParams.Ins.lang('arch_height') + ':888.8',
											l.default.point(),
											f.TextAlign.Left,
										)),
										(i.chordLengthText = new f.Text(
											p.DrawParams.Ins.lang('chord_length') + ':8888.8',
											l.default.point(),
											f.TextAlign.Right,
										)),
										(i.arcLengthText = new f.Text(
											p.DrawParams.Ins.lang('arc_length') + ':8888.8',
											l.default.point(),
											f.TextAlign.Center,
										)),
										(i.radiusText = new f.Text(
											p.DrawParams.Ins.lang('radius') + ':8888.8',
											l.default.point(),
											f.TextAlign.Center,
										)),
										(i.shortArcDim = !1),
										(i.depthStruct = {
											frame: 0,
											fixedBead: 0,
											fixed: 0,
											sash: [0],
											sashGlass: 0,
										}),
										i.updateChordByRadius(),
										i.updateAuxiliary(),
										i
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'area', {
										get: function () {
											return this.arcLength * this.height;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'arcInTopView', {
										get: function () {
											return this.makeArcInTopView(this.threedChordLength, this.threedHeight);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'widthEdge', {
										get: function () {
											return l.default.segment(
												this.polygon.edges[1].start,
												this.polygon.edges[1].end,
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'upEdge', {
										get: function () {
											return this.polygon.edge(3);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'downEdge', {
										get: function () {
											return this.polygon.edge(1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'leftEdge', {
										get: function () {
											return this.polygon.edge(0);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'rightEdge', {
										get: function () {
											return this.polygon.edge(2);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.findWall = function (e) {
										void 0 === e && (e = !1);
										var t = this.view.shapeManager.walls,
											n = e ? this.upEdge : this.downEdge;
										return t.find(function (e) {
											var t = e.polygon.edges.map(function (e) {
													return l.default.segment(e.start, e.end);
												}),
												r = new f.WinPolygon(t);
											return h.Utils.polyConcideSeg(r, l.default.segment(n.start, n.end));
										});
									}),
									(t.prototype.wallHeight = function (e) {
										var t = e.polygon.edges.find(function (e) {
											return e instanceof l.default.Segment && h.Utils.isSegVertical(e);
										});
										return t ? t.length : 0;
									}),
									(t.prototype.removeWall = function (e) {
										var t = this.view.shapeManager.walls.findIndex(function (t) {
											return t === e;
										});
										this.view.shapeManager.walls.splice(t, 1), e.remove();
									}),
									(t.prototype.appendWall = function (e, t) {
										void 0 === t && (t = !1);
										var n = this.view.shapeManager.walls,
											r = t
												? this.upEdge.middle().translate(0, -10)
												: this.downEdge.middle().translate(0, 10),
											i = u.WallTool.wallShapeToAppend([this], n, r, e);
										i && this.view.shapeManager.addWall(i);
									}),
									(t.prototype.makeArcInTopView = function (e, t) {
										var n = l.default.point(),
											r = n.translate(e, 0),
											i = l.default.segment(n, r).middle().translate(l.default.vector(0, t));
										return c.ArcUtils.CreateArcFrom3Points(n, r, i);
									}),
									(t.prototype.draw = function (t) {
										var n = this;
										e.prototype.draw.call(this, t),
											this.vshapes.splice(this.shapes.length).forEach(function (e) {
												e.moveTo(e.getLayer()), e.hide();
											}),
											this.shapes.forEach(function (e, r) {
												var i,
													o = r >= n.vshapes.length;
												e instanceof f.Text
													? ((i = o ? p.Artisan.recycleShape(e, t) : n.vshapes[r]).setAttr('data', {
															poly: e,
													  }),
													  i.setAttr('robot', n),
													  i.setAttr('tool', u.ToolType.editThreedArcText))
													: ((i = o ? p.Artisan.recycleShape(e[0], t) : n.vshapes[r]).setAttr(
															'data',
															Object.assign(
																{
																	poly: e[0],
																	drag: !1,
																},
																e[1],
															),
													  ),
													  i.setAttr('robot', n),
													  i.setAttr('hitFunc', function (t) {
															return e[0].makeHitRegion(i, t);
													  })),
													o && ((n.vshapes[r] = i), n.addToGroup([i]));
											});
									}),
									(t.prototype.addMullion = function (t) {
										var n = e.prototype.addMullion.call(this, t);
										if (
											n &&
											t instanceof l.default.Line &&
											h.Utils.isZero(t.norm.dot(l.default.vector(1, 0)))
										) {
											var r = l.default.segment(this.polygon.vertices[3], this.polygon.vertices[0]);
											this.dragThreeDimensionArc(r),
												this.mulManager.updatePoly(),
												this.dim.updatePoly();
										}
										return n;
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.v = 2),
											(t.tdh = this.threedHeight),
											(t.tcl = this.threedChordLength),
											(t.afi = this.arcFaceInner),
											(t.txt = {
												cl: this.chordLengthText.offset.toJSON(),
												th: this.threedHeightText.offset.toJSON(),
												al: this.arcLengthText.offset.toJSON(),
												r: this.radiusText.offset.toJSON(),
											}),
											(t.sad = this.shortArcDim),
											(t.ds = this.depthStruct),
											t
										);
									}),
									(t.prototype.deserialize = function (t, n) {
										if (
											(e.prototype.deserialize.call(this, t, n),
											t.tdh && (this.threedHeight = t.tdh),
											t.tcl && (this.threedChordLength = t.tcl),
											t.txt &&
												(t.txt.cl && (this.chordLengthText.offset = h.Utils.parseVector(t.txt.cl)),
												(this.threedHeightText.offset = h.Utils.parseVector(t.txt.th)),
												t.txt.al && (this.arcLengthText.offset = h.Utils.parseVector(t.txt.al)),
												t.txt.r && (this.radiusText.offset = h.Utils.parseVector(t.txt.r))),
											t.afi && (this.arcFaceInner = t.afi),
											t.sad && (this.shortArcDim = t.sad),
											t.ds)
										) {
											if (
												(void 0 === t.ds.fixedBead && (t.ds.fixedBead = 0),
												!Array.isArray(t.ds.sash))
											) {
												var r = Number(t.ds.sash);
												Number.isNaN(r) ? (t.ds.sash = [0]) : (t.ds.sash = [r]);
											}
											this.depthStruct = t.ds;
										}
										if (!t.v) {
											this.threedChordLength = this.polygon.edge(1).length;
											var i = this.threedChordLength,
												o = this.makeArcInTopView(this.threedChordLength, this.threedHeight).length,
												a = l.default.vector(-o + i, 0);
											this.editDim(0, o / i, a, this.view);
										}
									}),
									(t.prototype.updateAuxiliary = function () {
										var e,
											t = this.polygon.edges;
										void 0 !== t[1] &&
											((this.shapes = []),
											(this.threedHeightText.content =
												p.DrawParams.Ins.lang('arch_height') +
												':' +
												Math.abs(Math.round(10 * this.threedHeight) / 10)),
											(this.chordLengthText.content =
												p.DrawParams.Ins.lang('chord_length') +
												':' +
												Math.round(10 * this.threedChordLength) / 10),
											(this.arcLengthText.content =
												p.DrawParams.Ins.lang('arc_length') +
												':' +
												Math.round(10 * this.arcLength) / 10),
											(this.radiusText.content = p.DrawParams.Ins.showThreedArcFrameRadiusText
												? p.DrawParams.Ins.lang('radius') + ':' + Math.round(10 * this.radius) / 10
												: ''),
											(this.threedHeightText.position = t[3]
												.middle()
												.translate(l.default.vector(60, -100))),
											(this.chordLengthText.position = t[3]
												.middle()
												.translate(l.default.vector(-60, -100))),
											(this.arcLengthText.position = t[1]
												.middle()
												.translate(l.default.vector(0, 100))),
											(this.radiusText.position = t[3]
												.middle()
												.translate(l.default.vector(0, -240))),
											(e = this.shapes).push.apply(
												e,
												a([
													this.chordLengthText,
													this.threedHeightText,
													this.arcLengthText,
													this.radiusText,
												]),
											));
									}),
									(t.prototype.resetArc = function () {
										var e = this.frameManager.bars[3].polygon.mulShape.clone(),
											t = this.polygon,
											n = this.polygon.edges.map(function (e) {
												return l.default.segment(e.start, e.end);
											});
										(this.polygon = new f.ThreeDimensionalArcPoly(t.cpt, t.height, n)),
											this.frameManager.recreateBars(),
											this.dragThreeDimensionArc(e),
											this.updateFrame(!1);
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, !0),
											(this.shapes = []),
											this.vshapes.forEach(function (e) {
												e.moveTo(e.getLayer()), e.hide();
											});
									}),
									(t.prototype.line = function (e, t, n, r) {
										void 0 === n && (n = 15), void 0 === r && (r = {});
										var i = new f.WinPolygon();
										return (
											i.add(l.default.segment(e, t)),
											i.done(),
											[
												i,
												Object.assign(
													{
														stroke: 'red',
														strokeWidth: n,
													},
													r,
												),
											]
										);
									}),
									(t.prototype.dashLine = function (e, t, n) {
										return (
											void 0 === n && (n = 15),
											this.line(e, t, n, {
												dashed: !0,
											})
										);
									}),
									(t.prototype.updateFrame = function (t) {
										void 0 === t && (t = !1),
											e.prototype.updateFrame.call(this, t),
											this.updateChordByRadius(),
											this.updateAuxiliary();
									}),
									(t.prototype.updateChordByRadius = function () {
										if (!this.polygon.isEmpty) {
											var e = this.radius,
												t = this.arcLength / e,
												n = l.default.arc(l.default.point(), e, 0, t);
											(this.threedChordLength = l.default.segment(n.start, n.end).length),
												(this.threedHeight = n.chordHeight());
										}
									}),
									(t.prototype.dragArc = function (e, t) {
										if (1 === e || 3 === e) {
											var n = this.frameManager.bars[3].polygon.mulShape.clone(),
												r = this.polygon.dragArc(e, t);
											(this.polygon = r),
												this.frameManager.recreateBars(),
												this.dragThreeDimensionArc(n),
												this.updateFrame(!1),
												this.draw(this.view);
										}
									}),
									(t.prototype.dragFrame = function (t, n, r) {
										void 0 === r && (r = l.default.point());
										var i = this.frameManager.bars[3].polygon.mulShape.clone(),
											o = e.prototype.dragFrame.call(this, t, n, r);
										return o && (this.dragThreeDimensionArc(i), this.updateFrame(!1)), o;
									}),
									(t.prototype.dragThreeDimensionArc = function (e) {
										var t = this,
											n = this.frameManager.bars[3].polygon.mulShape.clone(),
											r = this.innerPoly[0].edges[0],
											i = this.innerPoly[0].edges[2];
										e instanceof l.default.Segment &&
										h.Utils.isSegHorizontal(e) &&
										n instanceof l.default.Arc
											? this.mulManager.bars.forEach(function (e) {
													if (
														e.polygon.mulShape instanceof l.default.Segment &&
														h.Utils.isSegHorizontal(e.polygon.mulShape)
													) {
														var i = t.mulManager.dockMgr.findPt(e.polygon.mulShape.start);
														if (i) {
															var o = t.mulManager.dockMgr.findPt(e.polygon.mulShape.end);
															if (o) {
																var a = l.default.line(
																		e.polygon.mulShape.start,
																		e.polygon.mulShape.end,
																	),
																	s = r.intersect(a);
																if (1 === s.length) {
																	var c,
																		u = n.center.distanceTo(s[0])[0];
																	c = l.default.arc(
																		n.center.clone(),
																		u,
																		l.default.segment(n.center, i.dd.pt).slope,
																		l.default.segment(n.center, o.dd.pt).slope,
																		!0,
																	);
																	var p = l.default.line(c.start, c.end);
																	c.middle().leftTo(p) === n.center.leftTo(p) &&
																		(c = l.default.arc(
																			n.center.clone(),
																			u,
																			l.default.segment(n.center, i.dd.pt).slope,
																			l.default.segment(n.center, o.dd.pt).slope,
																			!1,
																		)),
																		(t.mulManager.splitter.lines[e.polygon.polyId.idx].line =
																			c.clone());
																}
															}
														}
													}
											  })
											: e instanceof l.default.Arc && n instanceof l.default.Arc
											? this.mulManager.bars.forEach(function (i) {
													if (
														i.polygon.mulShape instanceof l.default.Arc &&
														i.polygon.mulShape.center.equalTo(e.center)
													) {
														var o = t.mulManager.dockMgr.findPt(i.polygon.mulShape.start);
														if (o) {
															var a = t.mulManager.dockMgr.findPt(i.polygon.mulShape.end);
															if (a) {
																var s = l.default.arc(
																		i.polygon.mulShape.center,
																		i.polygon.mulShape.r.valueOf(),
																	),
																	h = r.intersect(s);
																if (1 === h.length) {
																	var c,
																		u = n.center.distanceTo(h[0])[0],
																		p = l.default.arc(n.center, u);
																	if (
																		(c =
																			-1 === o.pid.pos
																				? t.polygon.edges[o.pid.idx]
																				: t.mulManager.bars[o.pid.idx].polygon.mulShape) instanceof
																			l.default.Segment ||
																		c instanceof l.default.Arc
																	) {
																		var f,
																			d = c.intersect(p)[0];
																		if (
																			d &&
																			((f =
																				-1 === a.pid.pos
																					? t.polygon.edges[a.pid.idx]
																					: t.mulManager.bars[a.pid.idx].polygon
																							.mulShape) instanceof l.default.Segment ||
																				f instanceof l.default.Arc)
																		) {
																			var g = f.intersect(p)[0];
																			if (g) {
																				var y;
																				y = l.default.arc(
																					n.center.clone(),
																					u,
																					l.default.segment(n.center, d).slope,
																					l.default.segment(n.center, g).slope,
																					!0,
																				);
																				var m = l.default.line(d, g);
																				y.middle().leftTo(m) === n.center.leftTo(m) &&
																					(y = l.default.arc(
																						n.center.clone(),
																						u,
																						l.default.segment(n.center, d).slope,
																						l.default.segment(n.center, g).slope,
																						!1,
																					)),
																					(t.mulManager.splitter.lines[i.polygon.polyId.idx].line =
																						y.clone());
																			}
																		}
																	}
																}
															}
														}
													}
											  })
											: e instanceof l.default.Arc &&
											  n instanceof l.default.Segment &&
											  h.Utils.isSegHorizontal(n) &&
											  this.mulManager.bars.forEach(function (n) {
													if (
														n.polygon.mulShape instanceof l.default.Arc &&
														n.polygon.mulShape.center.equalTo(e.center)
													) {
														var o = t.mulManager.dockMgr.findPt(n.polygon.mulShape.start);
														if (o) {
															var a = t.mulManager.dockMgr.findPt(n.polygon.mulShape.end);
															if (a) {
																var s = l.default.arc(
																		n.polygon.mulShape.center,
																		n.polygon.mulShape.r.valueOf(),
																	),
																	h = r.intersect(s);
																if (1 === h.length) {
																	var c,
																		u = i.intersect(s);
																	1 === u.length &&
																		((c =
																			(o.dd.pt.x - a.dd.pt.x) * (h[0].x - u[0].x) > 0
																				? l.default.line(h[0], u[0])
																				: l.default.line(u[0], h[0])),
																		(t.mulManager.splitter.lines[n.polygon.polyId.idx].line =
																			c.clone()));
																}
															}
														}
													}
											  });
									}),
									(t.prototype.editArcDim = function (t, n) {
										if (0 !== t && 2 !== t) {
											var r = this.frameManager.bars[3].polygon.mulShape.clone(),
												i = 1 === t ? 3 : 1,
												o = this.polygon.edges,
												a = o[t],
												s = a.start,
												u = a.end,
												p = l.default.segment(s, u).middle(),
												f = l.default.segment(p, a.middle()),
												d = h.Utils.lineDirPt(f, n, p),
												g = c.ArcUtils.CreateArcFrom3Points(s, u, d);
											(o[i] = l.default.arc(
												g.center,
												g.center.distanceTo(o[i].start)[0],
												l.default.segment(g.center, o[i].start).slope,
												l.default.segment(g.center, o[i].end).slope,
												o[i].counterClockwise,
											)),
												(o[t] = g),
												(this.polygon = this.polygon.cloneWith(o)),
												this.frameManager.recreateBars(),
												this.dragThreeDimensionArc(r);
										} else e.prototype.editArcDim.call(this, t, n);
									}),
									(t.prototype.editChordDim = function (t, n) {
										if (0 !== t && 2 !== t) {
											var r = this.polygon.edges[t],
												i = r.start,
												o = r.end,
												a = l.default.segment(i, o);
											this.polygon = this.polygon.dragEdge(0, l.default.vector(n - a.length, 0));
										} else e.prototype.editChordDim.call(this, t, n);
									}),
									Object.defineProperty(t.prototype, 'height', {
										get: function () {
											return this.polygon.edges[0].length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'radius', {
										get: function () {
											return (
												((this.threedChordLength / 2) * (this.threedChordLength / 2) +
													this.threedHeight * this.threedHeight) /
												(2 * this.threedHeight)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'arcLength', {
										get: function () {
											return this.widthEdge.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.updateDimText = function (e, t) {
										console.warn(e),
											(t = Math.abs(t)),
											e === p.DrawParams.Ins.lang('chord_length')
												? this.updateChordLength(t)
												: e === p.DrawParams.Ins.lang('arch_height') && this.updateChordHeight(t);
									}),
									(t.prototype.updateChordLength = function (t) {
										var n = this.arcLength,
											r = this.makeArcInTopView(t, this.threedHeight),
											i = r.length,
											o = l.default.vector(-i + n, 0);
										(this.threedChordLength = t),
											(this.threedHeight = r.chordHeight()),
											this.editDim(0, i / n, o, this.view),
											e.prototype.updateFrame.call(this, !0),
											this.updateAuxiliary();
									}),
									(t.prototype.updateChordHeight = function (t) {
										var n = this.arcLength,
											r = this.makeArcInTopView(this.threedChordLength, t).length,
											i = l.default.vector(-r + n, 0);
										(this.threedHeight = t),
											this.editDim(0, r / n, i, this.view),
											e.prototype.updateFrame.call(this, !0),
											this.updateAuxiliary();
									}),
									(t.prototype.translate = function (t) {
										e.prototype.translate.call(this, t),
											this.shapes.forEach(function (e) {
												e instanceof f.Text
													? (e.position = e.position.translate(t))
													: (e[0] = e[0].translate(t));
											});
									}),
									t
								);
							})(f.Frame);
						t.ThreedArcFrame = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Dimension = void 0);
						var l = s(n(0)),
							h = n(5),
							c = n(2),
							u = n(16),
							p = n(7),
							f = n(1),
							d = (function (e) {
								function t(t, n, r) {
									void 0 === n && (n = l.default.point()), void 0 === r && (r = l.default.point());
									var i = e.call(this, f.ShapeType.Dim, new u.WinPolygon()) || this;
									return (
										(i.host = t),
										(i.from = n),
										(i.to = r),
										(i.tool = h.ToolType.editDimension),
										(i.name = ''),
										(i.offset = l.default.vector()),
										(i.hidden = !1),
										(i.shapes = []),
										(i.vshapes = []),
										(i.vshapeToTop = !0),
										(i.draggable = !0),
										(i.sideLength = 30),
										i
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'dimShow', {
										get: function () {
											return !this.hidden;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'box', {
										get: function () {
											var e = new l.default.Box();
											return (
												this.hidden ||
													this.shapes.forEach(function (t) {
														t.forEach(function (t) {
															e = e.merge(t.box);
														});
													}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'value', {
										get: function () {
											return this.length;
										},
										set: function (e) {},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'length', {
										get: function () {
											var e = this.from.distanceTo(this.to)[0];
											return Math.round(100 * e) / 100;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.applyDiff = function (e) {
										l.default.Utils.EQ_0(e - this.value) || this.onEdit(e, this.value);
									}),
									(t.prototype.onEdit = function (e, t) {}),
									(t.prototype.updatePoly = function () {
										return (
											this.reset(),
											this.ignoreCreating() || (this.locate(), this.createShapes()),
											this
										);
									}),
									(t.prototype.ignoreCreating = function () {
										return p.DrawParams.Ins.withoutDims || this.hidden;
									}),
									(t.prototype.reset = function () {
										(this.shapes = []),
											this.host && (this.hidden ? this.host.remove(this) : this.host.add(this));
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this),
											0 !== this.vshapes.length &&
												(this.vshapes.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshapes),
												(this.vshapes = []));
									}),
									(t.prototype.translate = function (e) {
										(this.from = this.from.translate(e)),
											(this.to = this.to.translate(e)),
											this.shapes.forEach(function (t) {
												return t.forEach(function (n, r) {
													return (t[r] = n.translate(e));
												});
											});
									}),
									(t.prototype.toJSON = function () {
										return {
											name: this.name,
											from: this.from.toJSON(),
											to: this.to.toJSON(),
											hidden: this.hidden,
											offset: this.offset.toJSON(),
										};
									}),
									(t.prototype.deserialize = function (e, t) {
										(this.name = e.name ? e.name : ''),
											(this.from =
												e.from && null !== e.from.x && null !== e.from.y
													? l.default.point(e.from.x, e.from.y)
													: l.default.point()),
											(this.to =
												e.to && null !== e.to.x && null !== e.to.y
													? l.default.point(e.to.x, e.to.y)
													: l.default.point()),
											(this.hidden = e.hidden),
											(this.offset = l.default.vector(e.offset.x, e.offset.y));
									}),
									(t.prototype.cloneFrom = function (e) {
										return (
											(this.from = e.from.clone()),
											(this.to = e.to.clone()),
											(this.offset = e.offset.clone()),
											(this.hidden = e.hidden),
											(this.name = e.name),
											this
										);
									}),
									(t.prototype.draw = function (e, t) {
										var n = this;
										void 0 === t && (t = !1),
											t || (this.displayLength = void 0),
											this.vshapes.splice(this.shapes.length).forEach(function (e) {
												e.moveTo(e.getLayer()), e.hide();
											}),
											this.shapes.forEach(function (t, r) {
												var i = r >= n.vshapes.length,
													o = i ? p.Artisan.recycleShape(t, e) : n.vshapes[r];
												if (
													(o.moveToTop(),
													o.setAttr('tool', n.tool),
													o.setAttr('robot', n),
													o.setAttr('data', {
														segs: t,
														stroke: c.ShapeColor.darkMode ? 'yellow' : 'blue',
														drag: n.draggable,
														dimInfo: n,
													}),
													i)
												)
													if (((n.vshapes[r] = o), n.vshapeToTop)) {
														var a = n.top;
														a.gshape && a.gshape.add(o);
													} else n.addToGroup([o]);
											});
									}),
									(t.prototype.locate = function () {}),
									(t.prototype.createShapes = function () {
										var e = this,
											t = l.default.segment(this.from, this.to).translate(this.offset),
											n = [t.start, t.end].map(function (n) {
												var r = t.tangentInStart().rotate90CW();
												return l.default.segment(
													l.default.point(n.x, n.y).translate(r.multiply(-e.sideLength)),
													l.default.point(n.x, n.y).translate(r.multiply(e.sideLength)),
												);
											});
										return (this.shapes = [a(n, [t])]), this;
									}),
									t
								);
							})(f.Shape);
						t.Dimension = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							s =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							l =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Dim = void 0);
						var h = l(n(0)),
							c = n(5),
							u = n(7),
							p = n(11),
							f = n(6),
							d = n(82),
							g = n(16),
							y = n(2),
							m = n(1),
							v = (function (e) {
								function t(t) {
									var n = e.call(this, m.ShapeType.Dim, t.polygon) || this;
									return (
										(n.host = t),
										(n.odist = 0),
										(n.vshapes = []),
										(n.diMgr = new m.DimInfoManager()),
										(n.maxdMap = new Map()),
										n.updatePoly(n.polygon),
										n.host.add(n),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'box', {
										get: function () {
											var e = new h.default.Box();
											return (
												this.diMgr.visualDims.forEach(function (t) {
													t.lines.forEach(function (n) {
														if (((e = e.merge(n.box)), t.dimSeg)) {
															var r = t.dimSeg.middle(),
																i = t.dimSeg.tangentInStart().rotate90CW();
															e = (e = e.merge(
																r.translate(i.multiply(u.DrawParams.Ins.dimFontH / 2)).box,
															)).merge(
																r.translate(i.invert().multiply(u.DrawParams.Ins.dimFontH / 2)).box,
															);
														}
													});
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.setFrameDimStatus = function (e, t, n) {
										var r = this.diMgr.findFrameDim(e);
										r && ((r.dimShow = t), this.draw(n));
									}),
									(t.prototype.draw = function (e, t) {
										var n = this;
										void 0 === t && (t = !1);
										var r = this.diMgr.visualDims;
										this.vshapes.slice(r.length).forEach(function (e) {
											return e.hide();
										}),
											(this.vshapes = this.vshapes.slice(0, r.length)),
											r.forEach(function (r, i) {
												t || (r.displayLength = void 0);
												var o = i >= n.vshapes.length,
													a = r.lines,
													s = o ? u.Artisan.recycleShape(a, e) : n.vshapes[i],
													l = 'red';
												r.frameDim && (l = y.ShapeColor.darkMode ? 'yellow' : 'blue'),
													r.innerMullionDim && (l = y.ShapeColor.darkMode ? 'yellow' : 'blue'),
													s.setAttr('data', {
														segs: a,
														stroke: l,
														drag: !0,
														dimInfo: r,
													}),
													s.setAttr('robot', n),
													s.setAttr('tool', c.ToolType.editDim),
													o && (n.vshapes[i] = s),
													n.addToGroup([s]),
													s.moveToTop();
											});
									}),
									(t.prototype.updatePoly = function (e) {
										e && (this.polygon = e),
											this.maxdMap.clear(),
											this.createDimInfo(),
											this.createDimShapes();
									}),
									(t.prototype.toJSON = function () {
										return {
											dims: this.diMgr.toJSON(),
										};
									}),
									(t.prototype.deserialize = function (e) {
										var t = this;
										e &&
											e.dims &&
											(this.diMgr.clear(),
											this.maxdMap.clear(),
											e.dims.forEach(function (e) {
												return t.diMgr.add(m.DimInfo.deDim(e));
											}),
											this.createDimInfo(!0));
									}),
									(t.prototype.hitTest = function (e) {
										var t = y.Utils.applyMatrixMultiply(this.topFrame.getParentMatrices());
										return this.polygon.clone().transform(t).contains(e);
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, !1),
											0 !== this.vshapes.length &&
												(this.vshapes.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshapes),
												(this.vshapes = []));
									}),
									(t.prototype.translate = function (e) {
										this.diMgr.translate(e),
											this.vshapes.forEach(function (t) {
												t.getAttr('data').segs = t.getAttr('data').segs.map(function (t) {
													return t.translate(e);
												});
											});
									}),
									(t.prototype.createDimInfo = function (e) {
										var t = this;
										if ((void 0 === e && (e = !1), !this.polygon.isEmpty)) {
											var n = this.polygon.initDimInfo();
											this.host instanceof m.Frame &&
												this.checkDirty() &&
												(e
													? n.forEach(function (e) {
															var n = t.diMgr.findFrameDim(e.idx);
															n || ((n = new m.DimInfo(e.idx)), t.diMgr.add(n));
													  })
													: (this.diMgr.clear(),
													  n.forEach(function (e) {
															var n = t.diMgr.findFrameDim(e.idx);
															n || ((n = new m.DimInfo(e.idx)), t.diMgr.add(n)),
																(n.dimShow = e.dimShow);
													  }))),
												this.host instanceof m.Sash &&
													(n.forEach(function (e) {
														return (e.dimShow = !1);
													}),
													this.diMgr.forEach(function (e) {
														e.frameDim && (e.dimShow = !1);
													})),
												this.diMgr.forEach(function (e) {
													e.innerMullionDim && (e.dimShow = !1);
												}),
												e ||
													this.diMgr.forEach(function (e) {
														e.mullionDim &&
															e.type !== d.DimType.MullionChordHeight &&
															(e.dimShow = !1);
													});
											var r = this.polygon.edges,
												i = this.host.mulManager.bars;
											if (!(this.host instanceof m.KfcSash) || u.DrawParams.Ins.kfcWaistDimShown) {
												if (
													(e || this.removeDirtyMullionInfo(this.host.mulManager.dockMgrForDim),
													this.host.mulManager.dockMgrForDim.forDoTask(function (a, s) {
														var l, c;
														if (a.pos >= 0) {
															var u = i.find(function (e) {
																return 0 === e.polygon.polyId.pos && e.polygon.polyId.idx === a.idx;
															});
															if (!(u && u.polygon.mulShape instanceof h.default.Segment))
																return y.DockTaskStatus.Continue;
															if (!y.Utils.isHorizOrVer(u.polygon.mulShape))
																return y.DockTaskStatus.Continue;
															var p = o(
																	t.host.mulManager.dockMgrForDim.getDockBars(a, t.host.topFrame),
																	2,
																),
																f = p[0],
																d = p[1];
															void 0 !== f &&
																(f.polygon.contains(u.polygon.mulShape.start) ||
																	((f = (l = o([d, f], 2))[0]), (d = l[1]))),
																void 0 !== d &&
																	d.polygon.contains(u.polygon.mulShape.start) &&
																	((f = (c = o([d, f], 2))[0]), (d = c[1]));
															var g = a.idx,
																v = s.length + 1;
															if (1 === v) return y.DockTaskStatus.Continue;
															var w = t.diMgr.findInnerMulDim(g, 0);
															w || ((w = new m.InnerMullionDimInfo(g, 0)), t.diMgr.add(w)),
																f &&
																f.polygon.mulShape instanceof h.default.Segment &&
																y.Utils.isHorizOrVer(f.polygon.mulShape)
																	? (w.dimShow = !0)
																	: (w.dimShow = !1);
															for (var b = 1; b < v - 1; b++) {
																var S = t.diMgr.findInnerMulDim(g, b);
																S || ((S = new m.InnerMullionDimInfo(g, b)), t.diMgr.add(S)),
																	(S.dimShow = !0);
															}
															return (
																(w = t.diMgr.findInnerMulDim(g, v - 1)) ||
																	((w = new m.InnerMullionDimInfo(g, v - 1)), t.diMgr.add(w)),
																d &&
																d.polygon.mulShape instanceof h.default.Segment &&
																y.Utils.isHorizOrVer(d.polygon.mulShape)
																	? (w.dimShow = !0)
																	: (w.dimShow = !1),
																y.DockTaskStatus.OK
															);
														}
														return (
															(function () {
																var i = a.idx,
																	o = r[i],
																	l = n.find(function (e) {
																		return e.idx === i;
																	});
																if (l && l.mulHide) return y.DockTaskStatus.Continue;
																if (o instanceof h.default.Arc) return y.DockTaskStatus.Continue;
																var c = s.length + 1;
																if (e)
																	for (u = 0; u < c; u++)
																		(p = t.diMgr.findMulDim(i, u)) ||
																			((p = new m.MullionDimInfo(i, u)), t.diMgr.add(p));
																else
																	for (var u = 0; u < c; u++) {
																		var p;
																		(p = t.diMgr.findMulDim(i, u)) ||
																			((p = new m.MullionDimInfo(i, u)), t.diMgr.add(p)),
																			(p.dimShow = !0);
																	}
																y.DockTaskStatus.OK;
															})(),
															y.DockTaskStatus.OK
														);
													}),
													this.host instanceof m.Frame && u.DrawParams.Ins.showInnerSpaceDim)
												) {
													if (!e) {
														var a = this.diMgr.allDims.filter(function (e) {
																return e.type === d.DimType.Line;
															}),
															s = this.diMgr.allDims.filter(function (e) {
																return e.type === d.DimType.Mullion;
															}),
															l = this.diMgr.allDims.filter(function (e) {
																return e.type === d.DimType.InnerMullion;
															});
														a.forEach(function (e) {
															if (!t.host.mulManager.dockMgrForDim.hasEdgeData(e.edgeIdx)) {
																var n = t.diMgr.findInnerSpaceDim(
																	e.edgeIdx,
																	-1,
																	d.InnerSpaceDimRefType.frame,
																);
																void 0 === n &&
																	((n = new d.InnerSpaceDimInfo(
																		e.edgeIdx,
																		-1,
																		d.InnerSpaceDimRefType.frame,
																	)),
																	t.diMgr.add(n)),
																	(n.dimShow = !0);
															}
														}),
															s.forEach(function (e) {
																var n = t.diMgr.findInnerSpaceDim(
																	e.edgeIdx,
																	e.mulDimIdx,
																	d.InnerSpaceDimRefType.mullion,
																);
																void 0 === n &&
																	((n = new d.InnerSpaceDimInfo(
																		e.edgeIdx,
																		e.mulDimIdx,
																		d.InnerSpaceDimRefType.mullion,
																	)),
																	t.diMgr.add(n)),
																	(n.dimShow = !0);
															}),
															l.forEach(function (e) {
																var n = t.diMgr.findInnerSpaceDim(
																	e.edgeIdx,
																	e.mulDimIdx,
																	d.InnerSpaceDimRefType.innermullion,
																);
																void 0 === n &&
																	((n = new d.InnerSpaceDimInfo(
																		e.edgeIdx,
																		e.mulDimIdx,
																		d.InnerSpaceDimRefType.innermullion,
																	)),
																	t.diMgr.add(n)),
																	(n.dimShow = !0);
															});
													}
												} else
													this.diMgr.allDims
														.filter(function (e) {
															return e.type === d.DimType.InnerSpace;
														})
														.forEach(function (e) {
															return t.diMgr.remove(e);
														});
												this.diMgr.sortMulDimInfo();
											}
										}
									}),
									(t.prototype.removeDirtyMullionInfo = function (e) {
										var t,
											n,
											r = this,
											i = [];
										e.forDoTask(function (e, t) {
											if (e.pos < 0) {
												if (
													r.host.polygon instanceof g.ThreeDimensionalArcPoly &&
													!r.host.polygon.isRectangle() &&
													(1 === e.idx || 3 === e.idx)
												)
													return y.DockTaskStatus.Continue;
												for (var n = t.length + 1, o = 0; o < n; o++)
													i.push({
														edix: e.idx,
														midx: o,
													});
											}
											return y.DockTaskStatus.Continue;
										});
										var o = [];
										try {
											for (var s = a(this.diMgr.allDims), l = s.next(); !l.done; l = s.next()) {
												var h = l.value;
												(h.type !== d.DimType.Mullion && h.type !== d.DimType.InnerSpace) ||
													o.push(h);
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												l && !l.done && (n = s.return) && n.call(s);
											} finally {
												if (t) throw t.error;
											}
										}
										o.forEach(function (e) {
											void 0 ===
												i.find(function (t) {
													return t.edix === e.edgeIdx && t.midx === e.mulDimIdx;
												}) && r.diMgr.remove(e);
										});
									}),
									(t.prototype.checkDirty = function () {
										return this.diMgr.frameCount !== this.polygon.edges.length;
									}),
									(t.prototype.createDimShapes = function () {
										var e = this;
										this.odist = 0;
										var t = this.host.frameManager.allBars,
											n = this.host.polygon.edges,
											r = this.host,
											i = this.host instanceof m.Sash,
											o = this.host instanceof m.Sash && this.host.singleHMul,
											a =
												r instanceof m.Frame && r.mulManager.splitter.hasPullingHeight
													? r.polygon.bottomEdgeIndexes
													: [];
										this.ensureAlignment(),
											this.diMgr.forEach(function (r) {
												var s = n[r.edgeIdx];
												if (r.frameDim) {
													if (i) return;
													e.createFrameDim(r, t, s, a);
												} else if (r.mullionDim)
													if (r.type === d.DimType.MullionChordHeight) e.createMulChordHeight(r);
													else {
														var l = e.polygon.edges[r.edgeIdx],
															c = l instanceof h.default.Segment && y.Utils.isSegVertical(l);
														if (o && i && !c) return;
														e.createMulDim(r, a);
													}
												else if (r.mullionProjectionDim) e.createMulProjectionDim(r);
												else if (r.innerMullionDim) {
													if (i) return;
													e.createInnerMulDim(r);
												}
											}),
											this.diMgr.forEach(function (t) {
												t.innerSpace && e.createInnerSpaceDim(t, r, a);
											}),
											this.host instanceof m.Frame &&
												(this.diMgr.filterDuplicate(this.host.topFrame),
												this.host.sashManager.filterDuplicateDims());
									}),
									(t.prototype.createFrameDim = function (e, t, n, r) {
										var i = this,
											o = this.host.polygon instanceof g.ThreeDimensionalArcPoly;
										if (this.host.polygon instanceof g.CirclePoly) {
											var a = this.host.polygon.box,
												s = a.xmin - 500,
												l = h.default.segment(
													h.default.point(s, a.ymin),
													h.default.point(s, a.ymax),
												);
											this.createDim(e, l, t[0], l.tangentInStart());
										} else if (n instanceof h.default.Segment)
											if (o && y.Utils.isSegHorizontal(n));
											else {
												e.isArc = !1;
												var c = t.find(function (t) {
														return t.polyId.idx === (e.edgeIdx + 1) % i.host.polygon.edges.length;
													}),
													p = r.some(function (t) {
														return t === e.edgeIdx;
													})
														? u.DrawParams.Ins.dimFontH
														: 0;
												this.createDim(e, n, c, n.tangentInStart(), p);
											}
										else if (n instanceof h.default.Arc && !o)
											if (e instanceof m.ChordDimInfo) {
												var f = n.start,
													d = n.end;
												e.isArc = !1;
												var v = h.default.segment(f, d);
												this.createDim(e, v, t[0], v.tangentInStart());
											} else {
												(e.isArc = !0), (f = n.start), (d = n.end);
												var w = n.center,
													b = ((l = h.default.segment(f, d)), n.middle()),
													S = h.default.vector(b.x - w.x, b.y - w.y),
													_ = b.distanceTo(l)[0],
													P = y.Utils.lineDirPt(h.default.line(f, S.rotate90CCW()), _, f);
												(v = h.default.segment(f, P)),
													this.createDim(e, v, t[0], v.tangentInStart());
											}
									}),
									(t.prototype.createDim = function (e, n, r, i, o, a) {
										void 0 === o && (o = 0), void 0 === a && (a = !1);
										var s = m.SubFrame.findBy(this.host.topFrame),
											l =
												this.polygon.orientation === h.default.ORIENTATION.CCW
													? n.tangentInStart().rotate90CW()
													: n.tangentInStart().rotate90CCW(),
											c = 0,
											p = 0,
											f = o,
											g = u.DrawParams.Ins.showInnerSpaceDim ? t.calcDist(n.slope, n.length) : 0;
										if (e instanceof d.InnerSpaceDimInfo) {
											(f += g), s && (f += s.profileSize + 60), (c += f);
											var y = this.polygon.orientation;
											e.refType === d.InnerSpaceDimRefType.innermullion &&
												(y = a ? h.default.ORIENTATION.CW : h.default.ORIENTATION.CCW),
												(this.odist = this.odist < c ? c : this.odist),
												e.createDim(r, n, i, f, y, !1);
										} else {
											if (
												((f += g),
												(c += g),
												this.host.mulManager.dockMgrForDim.hasEdgeData(e.edgeIdx))
											) {
												var v = u.DrawParams.Ins.dimFontH / 2;
												(c += p = u.DrawParams.Ins.dimFontH + v), (n = n.translate(l.multiply(p)));
											}
											s && ((f += s.profileSize + 60), (c += s.profileSize + 60)),
												(c += p = u.DrawParams.Ins.dimFontH),
												(n = n.translate(l.multiply(p))),
												(this.odist = this.odist < c ? c : this.odist),
												e.createDim(r, n, i, f, this.polygon.orientation, !1);
										}
									}),
									(t.prototype.createMulDim = function (e, n) {
										var r = this.host instanceof m.Sash,
											i = this.host instanceof m.Sash && this.host.singleHMul,
											o = this.polygon.edges,
											a = this.host.mulManager.bars,
											s = o[e.edgeIdx],
											l = s.start.y > s.end.y,
											c = this.calcMaxd(e.edgeIdx);
										if (
											(this.host instanceof m.Frame &&
												u.DrawParams.Ins.showInnerSpaceDim &&
												(c += t.calcDist(0, 0)),
											this.parent)
										) {
											var p = m.SubFrame.findBy(this.topFrame);
											p && (c += p.profileSize + 60);
										}
										(c += n.some(function (t) {
											return t === e.edgeIdx;
										})
											? u.DrawParams.Ins.dimFontH
											: 0),
											(this.odist = this.odist < c ? c : this.odist);
										var f = this.host.mulManager.dockMgrForDim.getEdgeData(e.edgeIdx);
										if (f && 0 !== f.length) {
											for (
												var d,
													g = s.start,
													v = function (t) {
														var n = f[t];
														(d = a.find(function (e) {
															return e.polygon.polyId.equalTo(n.idx);
														})),
															w.host.mulManager.splitter.lines[n.idx.idx].equalSplit,
															y.EqualSplitType.None;
														var o = d.polygon.mulShape,
															u = w.diMgr.findMulDim(e.edgeIdx, t);
														if (!u) throw new Error('diminfo not found');
														var p = w.calcMulDist(s, o, d, u, n.pt);
														if (t === e.mulDimIdx) {
															if (i && r && !l && 0 === t)
																return {
																	value: void 0,
																};
															var m = h.default.segment(g, p[1].start);
															return h.default.Utils.EQ_0(m.length)
																? (e.createDim(
																		d,
																		m,
																		h.default.vector(-998.998, -998.998),
																		c,
																		w.polygon.orientation,
																		n.start,
																  ),
																  {
																		value: void 0,
																  })
																: (e.createDim(
																		d,
																		m,
																		m.tangentInStart(),
																		c,
																		w.polygon.orientation,
																		n.start,
																  ),
																  {
																		value: void 0,
																  });
														}
														g = p[1].start;
													},
													w = this,
													b = 0;
												b < f.length;
												b++
											) {
												var S = v(b);
												if ('object' == typeof S) return S.value;
											}
											if (e.mulDimIdx === f.length) {
												if (i && r && l) return;
												var _ = h.default.segment(g, s.end);
												h.default.Utils.EQ_0(_.length)
													? e.createDim(
															d,
															_,
															h.default.vector(-998.998, -998.998),
															c,
															this.polygon.orientation,
															f[f.length - 1].start,
													  )
													: e.createDim(
															d,
															_,
															_.tangentInEnd(),
															c,
															this.polygon.orientation,
															f[f.length - 1].start,
													  );
											}
										}
									}),
									(t.prototype.createMulChordHeight = function (e) {
										var t = this.host.mulManager.bars.find(function (t) {
											return t.polyId.idx === e.edgeIdx && t.polyId.pos === e.mulDimIdx;
										});
										if (t) {
											var n = t.polygon.mulShape;
											if (n instanceof h.default.Arc) {
												e.isArc = !0;
												var r = h.default.segment(n.start, n.end).middle(),
													i = n.middle(),
													o = h.default.segment(r, i);
												e.createDim(t, o, o.tangentInStart(), 0, 0, !1);
											}
										}
									}),
									(t.prototype.createInnerSpaceDim = function (e, t, n) {
										var r, i, o, l;
										if (!(t instanceof m.Sash)) {
											var c = t.frameManager.bars;
											if (1 === t.innerPoly.length) {
												var f = t.innerPoly[0].edges[e.edgeIdx];
												if (f instanceof h.default.Segment) {
													var v = t.profileSizeManager.frame,
														w = n.some(function (t) {
															return t === e.edgeIdx;
														});
													if (
														((v += w ? u.DrawParams.Ins.dimFontH : 0),
														e.refType === d.InnerSpaceDimRefType.frame)
													) {
														e.isArc = !1;
														var b = f;
														if (
															t.polygon instanceof g.SingleTrackPolygon &&
															t.polygon.hidden.some(function (e) {
																return e === p.Direction.Down;
															})
														) {
															var S = p.EdgeFinder.Instance.findIndex2(p.Direction.Down, t.polygon);
															e.edgeIdx === S && (v -= 2 * t.profileSizeManager.frame);
														}
														w &&
															t.polygon.isRectangle &&
															0 === t.mulManager.splitter.lines.length &&
															(b = b.translate(0, t.mulManager.splitter.pullingHeights[0].height)),
															this.createDim(
																e,
																b,
																c[(e.edgeIdx + 1) % c.length],
																f.tangentInStart(),
																v,
															);
													} else if (e.refType === d.InnerSpaceDimRefType.mullion) {
														var _ = e.mulDimIdx;
														if (void 0 === (V = t.mulManager.dockMgrForDim.getEdgeData(e.edgeIdx)))
															return;
														var P = h.default.line(f.start, f.end),
															x = s(
																[f.start],
																V.map(function (e) {
																	return e.pt.projectionOn(P);
																}),
																[f.end],
															),
															D = h.default.segment(x[_], x[_ + 1]),
															T = void 0;
														try {
															for (
																var O = a(t.mulManager.splitter.subs), M = O.next();
																!M.done;
																M = O.next()
															)
																if (!(F = M.value).IsMullion) {
																	var E = F.edges;
																	if (
																		(T = E.find(function (e) {
																			return (
																				e instanceof h.default.Segment &&
																				D.contains(e.start) &&
																				D.contains(e.end)
																			);
																		}))
																	)
																		break;
																}
														} catch (e) {
															r = {
																error: e,
															};
														} finally {
															try {
																M && !M.done && (i = O.return) && i.call(O);
															} finally {
																if (r) throw r.error;
															}
														}
														if (!T) {
															var I = function (t) {
																if (t.IsMullion) return 'continue';
																var n = t.edges,
																	r = t.edDock.docks.findIndex(function (t, r) {
																		if (t.type !== y.DockType.Frame) return !1;
																		if (t.id.idx !== e.edgeIdx) return !1;
																		var i = n[r].middle().projectionOn(P);
																		return D.contains(i);
																	});
																-1 !== r &&
																	(T = h.default.segment(
																		n[r].start.projectionOn(P),
																		n[r].end.projectionOn(P),
																	));
															};
															try {
																for (
																	var C = a(t.mulManager.splitter.subs), k = C.next();
																	!k.done;
																	k = C.next()
																) {
																	var F;
																	I((F = k.value));
																}
															} catch (e) {
																o = {
																	error: e,
																};
															} finally {
																try {
																	k && !k.done && (l = C.return) && l.call(C);
																} finally {
																	if (o) throw o.error;
																}
															}
														}
														if (void 0 === T || !(T instanceof h.default.Segment)) return;
														var j = this.diMgr.findMulDim(e.edgeIdx, e.mulDimIdx);
														if (void 0 === j || void 0 === j.targetBar) return;
														var A =
															e.mulDimIdx === V.length ? T.tangentInEnd() : T.tangentInStart();
														this.createDim(e, T, j.targetBar, A, v);
													} else {
														var L = new y.PolyId(e.edgeIdx, 0),
															H = t.mulManager.bars.find(function (e) {
																return e.polyId.equalTo(L);
															});
														if (!H) return;
														var R = this.diMgr.findInnerMulDim(e.edgeIdx, e.mulDimIdx);
														if (void 0 === R || void 0 === R.targetBar) return;
														var B = H.polygon,
															W = t.mulManager.splitter.subs
																.filter(function (e) {
																	return !e.IsMullion;
																})
																.map(function (e) {
																	var t,
																		n,
																		r = e.edges;
																	try {
																		for (var i = a(r), o = i.next(); !o.done; o = i.next()) {
																			var s = o.value;
																			if (
																				s instanceof h.default.Segment &&
																				y.Utils.polyConcideSeg(B, s)
																			)
																				return {
																					poly: e,
																					edge: s,
																				};
																		}
																	} catch (e) {
																		t = {
																			error: e,
																		};
																	} finally {
																		try {
																			o && !o.done && (n = i.return) && n.call(i);
																		} finally {
																			if (t) throw t.error;
																		}
																	}
																	return {
																		poly: e,
																	};
																});
														W = (W = W.filter(function (e) {
															return e.edge;
														})).filter(function (e) {
															return (
																!!R.targetBar && y.Utils.polyCoincide(e.poly, R.targetBar.polygon)
															);
														});
														var z = R.dimSeg;
														if (!z) return;
														var N = h.default.line(z.start, z.end),
															U = (W = W.filter(function (e) {
																var t = e.edge.middle().projectionOn(N);
																return z.contains(t);
															})).pop();
														if (!U) return;
														var J = U.edge;
														-1 === z.tangentInStart().dot(J.tangentInStart()) && (J = J.reverse());
														var V,
															G = J.start.projectionOn(N),
															q = J.end.projectionOn(N),
															K =
																((T = h.default.segment(G, q)),
																U.poly.box.center.leftTo(h.default.line(G, q)));
														if (void 0 === (V = t.mulManager.dockMgrForDim.getData(L))) return;
														(A = e.mulDimIdx === V.length ? T.tangentInEnd() : T.tangentInStart()),
															this.createDim(e, T, R.targetBar, A, v, K);
													}
												}
											}
										}
									}),
									(t.prototype.createMulProjectionDim = function (e) {
										var n = this.polygon.edges,
											r = this.host.mulManager.bars,
											i = n[e.edgeIdx];
										i = h.default.segment(i.start, i.end);
										var o = t.calcDist(0, 0);
										this.odist = this.odist < o ? o : this.odist;
										var a = this.host.mulManager.dockMgrForDim.getEdgeData(e.edgeIdx);
										if (a && 0 !== a.length) {
											var s = h.default.segment(i.start, i.end),
												l = h.default.line(i.start, i.end),
												c = a.map(function (e) {
													return (e.pt = e.pt.projectionOn(l)), e;
												});
											c.sort(function (e, t) {
												var n = s.start;
												return e.pt.distanceTo(n)[0] - t.pt.distanceTo(n)[0];
											});
											for (
												var u,
													p = i.start,
													f = function (t) {
														var n = c[t],
															a = (u = r.find(function (e) {
																return e.polygon.polyId.equalTo(n.idx);
															})).polygon.mulShape,
															s = d.diMgr.findMulProjectionDim(e.edgeIdx, t);
														if (!s) throw new Error('diminfo not found');
														var l = d.calcMulDist(i, a, u, s, n.pt);
														if (t === e.mulDimIdx) {
															var f = h.default.segment(p, l[1].start);
															return h.default.Utils.EQ_0(f.length)
																? (e.createDim(
																		u,
																		f,
																		h.default.vector(-998.998, -998.998),
																		o,
																		d.polygon.orientation,
																		n.start,
																  ),
																  {
																		value: void 0,
																  })
																: (e.createDim(
																		u,
																		f,
																		f.tangentInStart(),
																		o,
																		d.polygon.orientation,
																		n.start,
																  ),
																  {
																		value: void 0,
																  });
														}
														p = l[1].start;
													},
													d = this,
													g = 0;
												g < c.length;
												g++
											) {
												var y = f(g);
												if ('object' == typeof y) return y.value;
											}
											if (e.mulDimIdx === c.length) {
												var m = h.default.segment(p, i.end);
												h.default.Utils.EQ_0(m.length)
													? e.createDim(
															u,
															m,
															h.default.vector(-998.998, -998.998),
															o,
															this.polygon.orientation,
															c[c.length - 1].start,
													  )
													: e.createDim(
															u,
															m,
															m.tangentInEnd(),
															o,
															this.polygon.orientation,
															c[c.length - 1].start,
													  );
											}
										}
									}),
									(t.prototype.getAdjustedLength = function (e, t) {
										var n,
											r = this,
											i = this.host.topFrame.profileSizeManager,
											o = {
												sash: i.sash,
												frame: i.frame,
												frameMullion: i.frameMullion,
											};
										if (
											(this.host.type === m.ShapeType.Sash
												? ((o.frame = i.sash), (o.frameMullion = i.sashMullion))
												: this.host.type === m.ShapeType.Screen && (o.frame = i.screen),
											e.type === y.DockType.Frame)
										)
											(n = o.frame),
												(a = e.dockBar(this.host)) &&
													(n = this.host.frameManager.getEdgeWidth(a.polyId.idx));
										else if (e.type === y.DockType.Mullion) {
											var a;
											if (((n = o.frameMullion / 2), (a = e.dockBar(this.host)))) {
												var s = (function (e, t) {
														return r.host.mulManager.dockMgr.getData(t.polyId).find(function (t) {
															return t.idx.equalTo(e.polyId);
														}).pt;
													})(t, a),
													l = t.polygon.mulShape;
												if (a.dimAlignment === m.AlignTypeEnum.center) n = o.frameMullion / 2;
												else if (a.dimAlignment === m.AlignTypeEnum.left)
													n = y.Utils.isSegVertical(l)
														? h.default.Utils.LE(l.middle().y, s.y)
															? 0
															: o.frameMullion
														: h.default.Utils.LE(l.middle().x, s.x)
														? 0
														: o.frameMullion;
												else {
													if (a.dimAlignment !== m.AlignTypeEnum.right)
														throw new Error('unknown align');
													n = y.Utils.isSegVertical(l)
														? h.default.Utils.LE(l.middle().y, s.y)
															? o.frameMullion
															: 0
														: h.default.Utils.LE(l.middle().x, s.x)
														? o.frameMullion
														: 0;
												}
											}
										} else n = e.type === y.DockType.Sash ? o.sash : 0;
										return n;
									}),
									(t.prototype.growByEpDock = function (e) {
										var t,
											n = e.polygon.mulShape,
											r = n.start.clone(),
											i = n.end.clone(),
											o = e.polygon.epDock;
										if (y.Utils.isSegVertical(n)) {
											if (y.Utils.isZero(r.y - i.y)) return n;
											var a = (i.y - r.y) / Math.abs(i.y - r.y);
											(t = this.getAdjustedLength(o.stDock, e)),
												(r.y -= a * t),
												(t = this.getAdjustedLength(o.etDock, e)),
												(i.y += a * t);
										} else {
											if (y.Utils.isZero(r.x - i.x)) return n;
											(a = (i.x - r.x) / Math.abs(i.x - r.x)),
												(t = this.getAdjustedLength(o.stDock, e)),
												(r.x -= a * t),
												(t = this.getAdjustedLength(o.etDock, e)),
												(i.x += a * t);
										}
										return h.default.segment(r, i);
									}),
									(t.prototype.createInnerMulDim = function (e) {
										var t = this.host.mulManager.bars,
											n = t.find(function (t) {
												return 0 === t.polygon.polyId.pos && t.polygon.polyId.idx === e.edgeIdx;
											});
										if (n && n.polygon.mulShape instanceof h.default.Segment) {
											var r = this.growByEpDock(n),
												i = this.host.mulManager.dockMgrForDim.getData(
													JSON.stringify(new y.PolyId(e.edgeIdx, 0).toJSON()),
												);
											if (i && 0 !== i.length) {
												for (
													var o,
														a = r.start,
														s = function (n) {
															var s = i[n],
																c = (o = t.find(function (e) {
																	return e.polygon.polyId.equalTo(s.idx);
																})).polygon.mulShape,
																u = l.diMgr.findInnerMulDim(e.edgeIdx, n);
															if (!u) throw new Error('innermuldim not exist');
															var p = l.calcMulDist(r, c, o, u, s.pt);
															if (n === e.mulDimIdx) {
																var f = h.default.segment(a, p[1].start);
																return h.default.Utils.EQ_0(f.length)
																	? (e.createDim(
																			o,
																			f,
																			h.default.vector(-998.998, -998.998),
																			0,
																			l.polygon.orientation,
																			s.start,
																	  ),
																	  {
																			value: void 0,
																	  })
																	: (e.createDim(
																			o,
																			f,
																			f.tangentInStart(),
																			0,
																			l.polygon.orientation,
																			s.start,
																	  ),
																	  {
																			value: void 0,
																	  });
															}
															a = p[1].start;
														},
														l = this,
														c = 0;
													c < i.length;
													c++
												) {
													var u = s(c);
													if ('object' == typeof u) return u.value;
												}
												if (e.mulDimIdx === i.length) {
													if (!this.diMgr.findInnerMulDim(e.edgeIdx, i.length)) return;
													var p = h.default.segment(a, r.end);
													h.default.Utils.EQ_0(p.length)
														? e.createDim(
																o,
																p,
																h.default.vector(-998.998, -998.998),
																0,
																this.polygon.orientation,
																i[i.length - 1].start,
														  )
														: e.createDim(
																o,
																p,
																p.tangentInEnd(),
																0,
																this.polygon.orientation,
																i[i.length - 1].start,
														  );
												}
											}
										}
									}),
									(t.prototype.calcMulDist = function (e, t, n, r, i) {
										var o;
										if (
											(t instanceof h.default.Segment || t instanceof h.default.Arc) &&
											4 === n.polygon.vertices.length &&
											r.alignType !== m.AlignTypeEnum.center
										) {
											var a = n.polygon.vertices;
											a.sort(function (e, t) {
												return e.distanceTo(i)[0] - t.distanceTo(i)[0];
											});
											var s = a.slice(0, 2);
											s.sort(function (t, n) {
												return t.distanceTo(e.start)[0] - n.distanceTo(e.start)[0];
											}),
												(o =
													r.alignType === m.AlignTypeEnum.left
														? e.distanceTo(s[0])
														: e.distanceTo(s[1]));
										} else o = e.distanceTo(i);
										return o;
									}),
									(t.prototype.calcMaxd = function (e) {
										if (this.maxdMap.has(e)) return this.maxdMap.get(e);
										var n = this.host.mulManager.dockMgrForDim.getEdgeData(e);
										if (!n) return 0;
										var r = this.polygon.edges[e];
										if (r instanceof h.default.Arc) return 0;
										var i = 0;
										n.forEach(function (e, t) {
											(i =
												0 === t
													? r.start.distanceTo(e.pt)[0]
													: Math.max(i, n[t - 1].pt.distanceTo(e.pt)[0])),
												t === n.length - 1 && (i = Math.max(i, r.end.distanceTo(e.pt)[0]));
										});
										var o = t.calcDist(r.slope, i);
										return this.maxdMap.set(e, o), o;
									}),
									(t.calcDist = function (e, t) {
										return 2 * u.DrawParams.Ins.dimFontH;
									}),
									(t.prototype.hitBar = function (e, t) {
										var n = this.diMgr.visualDims.find(function (t) {
											var n = new h.default.Box();
											if (
												(t.lines.forEach(function (e) {
													n = n.merge(e.box);
												}),
												void 0 !== n.xmax)
											)
												return n.xmin <= e.x && n.xmax >= e.x && n.ymin <= e.y && n.ymax >= e.y;
										});
										return (
											!!n &&
											(t.eventBus.emit({
												type: f.EventType.dim_setting,
												payload: new f.DimSetting(n, t),
											}),
											!0)
										);
									}),
									(t.prototype.ensureAlignment = function () {
										this.host instanceof m.Frame &&
											this.host.mulManager.bars.forEach(function (e) {
												e.dimAlignment = e.dimAlignment;
											});
									}),
									t
								);
							})(m.Shape);
						t.Dim = v;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SizeDim = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(7),
							h = n(1),
							c = (function (e) {
								function t(t, n, r, i) {
									void 0 === n && (n = !0),
										void 0 === r && (r = !1),
										void 0 === i && (i = (l.DrawParams.Ins.dimFontSize / 120) * 90);
									var o = e.call(this, t) || this;
									return (
										(o.shape = t),
										(o.hidden = r),
										(o.margin = i),
										(o._forHeight = !1),
										(o.position = s.Direction.Down),
										(o.forHeight = n),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'forHeight', {
										get: function () {
											return this._forHeight;
										},
										set: function (e) {
											this._forHeight !== e &&
												((this.position = e ? s.Direction.Left : s.Direction.Down),
												(this._forHeight = e));
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.locate = function () {
										this.margin = (l.DrawParams.Ins.dimFontSize / 120) * 90;
										var e = this.shape.polygon.box;
										if (this.forHeight) {
											var t = this.position === s.Direction.Left ? e.xmin : e.xmax,
												n = (this.position === s.Direction.Right ? 1 : -1) * this.margin;
											(this.from = a.default.point(t + n, e.ymin)),
												(this.to = a.default.point(t + n, e.ymax));
										} else {
											var r = this.position === s.Direction.Down ? e.ymax : e.ymin;
											if (
												((n = (this.position === s.Direction.Down ? 1 : -1) * this.margin),
												this.shape instanceof h.CornerJoiner || this.shape instanceof h.Connector)
											) {
												var i = h.SubFrame.findBy(this.shape);
												i && (n += i.profileSize);
											}
											(this.from = a.default.point(e.xmin, r + n)),
												(this.to = a.default.point(e.xmax, r + n));
										}
									}),
									(t.prototype.onEdit = function (e) {
										this.forHeight ? this.shape.onEditHeight(e) : this.shape.onEditWidth(e);
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), (this.position = t.position), this;
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.position = this.position), t;
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype.deserialize.call(this, t), (this.position = t.position);
									}),
									t
								);
							})(h.Dimension);
						t.SizeDim = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DimToGround = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(1),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.hardware = t), (n.margin = 175), (n.position = s.Direction.Right), n;
								}
								return (
									i(t, e),
									(t.prototype.locate = function () {
										var e = this.hardware.centerPosition;
										if (this.hardware.top instanceof l.Frame) {
											var t = this.hardware.top,
												n = e.projectionOn(t.groundLine),
												r = a.default.vector(
													(this.position === s.Direction.Right ? 1 : -1) * this.margin,
													0,
												);
											(this.from = a.default.point(e.x, e.y).translate(r)),
												(this.to = a.default.point(e.x, n.y).translate(r));
										}
									}),
									(t.prototype.onEdit = function (e, t) {
										if (!(this.hardware instanceof l.Handle && this.hardware.relativeOffsetSet)) {
											var n = this.topFrame,
												r = n.view,
												i = !(parent instanceof l.SlideSash) || parent.host.locksSameHeight;
											this.hardware.setDistanceToGround(e, t, i),
												r.shapeManager.optimizeHandleDim(),
												n.sashManager.thefts.forEach(function (e) {
													e.updatePoly(), e.draw(r);
												}),
												r.refresh();
										}
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.position = this.position), t;
									}),
									(t.prototype.deserialize = function (t) {
										void 0 !== t &&
											(e.prototype.deserialize.call(this, t), (this.position = t.position));
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), (this.position = t.position), this;
									}),
									t
								);
							})(l.Dimension);
						t.DimToGround = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DimToSash = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(1),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.hardware = t), (n.margin = 280), (n.position = s.Direction.Right), n;
								}
								return (
									i(t, e),
									(t.prototype.locate = function () {
										var e = this.hardware.centerPosition,
											t = this.hardware.manager.sash,
											n = this.hardware.hardwareShapeDirection();
										if (
											t.polygon.isRectangle() &&
											a.default.Utils.EQ_0(n.dot(a.default.vector(0, 1)))
										) {
											var r = a.default.line(
													a.default.point(t.polygon.box.xmax, 0),
													a.default.vector(-1, 0),
												),
												i = e.projectionOn(r);
											(this.from = a.default.point(e.x, e.y)),
												(this.to = a.default.point(i.x, e.y));
										} else {
											var o = a.default.vector(
													(this.position === s.Direction.Right ? 1 : -1) * this.margin,
													0,
												),
												l = a.default.line(
													a.default.point(0, t.polygon.box.ymax),
													a.default.vector(0, 1),
												);
											(i = e.projectionOn(l)),
												(this.from = a.default.point(e.x, e.y).translate(o)),
												(this.to = a.default.point(e.x, i.y).translate(o));
										}
									}),
									(t.prototype.onEdit = function (e, t) {
										if (!(this.hardware instanceof l.Handle && this.hardware.relativeOffsetSet)) {
											var n = this.topFrame,
												r = n.view,
												i = this.hardware.parent,
												o = !(i instanceof l.SlideSash) || i.host.locksSameHeight;
											this.hardware.setDistanceToSash(e, t, o),
												r.shapeManager.optimizeHandleDim(),
												n.sashManager.thefts.forEach(function (e) {
													e.updatePoly(), e.draw(r);
												}),
												r.refresh();
										}
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.position = this.position), t;
									}),
									(t.prototype.deserialize = function (t) {
										void 0 !== t &&
											(e.prototype.deserialize.call(this, t), (this.position = t.position));
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), (this.position = t.position), this;
									}),
									t
								);
							})(l.Dimension);
						t.DimToSash = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DimToMid = void 0);
						var a = o(n(0)),
							s = n(1),
							l = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.hardware = t), (n.margin = 180), (n.hidden = !t.relativeOffsetSet), n;
								}
								return (
									i(t, e),
									(t.prototype.locate = function () {
										var e = this.hardware.sash.polygon.orientation === a.default.ORIENTATION.CCW,
											t = this.hardware.edge,
											n = this.hardware.centerPosition,
											r = t
												.tangentInStart()
												.rotate((e ? 1 : -1) * (Math.PI / 2))
												.multiply(this.margin);
										(this.from = n.projectionOn(a.default.line(t.start, t.end)).translate(r)),
											(this.to = t.middle().translate(r));
									}),
									(t.prototype.onEdit = function (e, t) {
										var n = this,
											r = this.hardware.topFrame.view,
											i = this.hardware.allHardwaresAlignedWith();
										(i = i.filter(function (e) {
											return (
												e instanceof s.HardwareOnEdge &&
												!1 !== e.autoOffset &&
												a.default.Utils.EQ_0(
													Math.abs(e.relativeOffset) - Math.abs(n.hardware.relativeOffset),
												)
											);
										})),
											(this.hardware.relativeOffset = this.hardware.relativeOffset > 0 ? e : -e),
											this.hardware.updatePoly(),
											this.hardware.draw(r),
											i.forEach(function (e) {
												var t = e,
													i = t.relativeOffset > 0 ? 1 : -1;
												(t.relativeOffset = Math.abs(n.hardware.relativeOffset) * i),
													t.updatePoly(),
													t.draw(r);
											}),
											r.refresh();
									}),
									(t.prototype.toJSON = function () {
										return e.prototype.toJSON.call(this);
									}),
									(t.prototype.deserialize = function (t) {
										void 0 !== t && e.prototype.deserialize.call(this, t);
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), this;
									}),
									(t.prototype.createShapes = function () {
										return (
											a.default.Utils.EQ_0(a.default.segment(this.from, this.to).length) ||
												e.prototype.createShapes.call(this),
											this
										);
									}),
									(t.prototype.ignoreCreating = function () {
										return (
											e.prototype.ignoreCreating.call(this) ||
											!this.hardware.relativeOffsetSet ||
											0 === this.hardware.relativeOffset
										);
									}),
									t
								);
							})(s.Dimension);
						t.DimToMid = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.AntiTheft = void 0);
						var l = s(n(0)),
							h = n(13),
							c = n(2),
							u = n(1),
							p = (function (e) {
								function t(t, n, r, i) {
									var o = e.call(this, u.ShapeType.AntiTheft, n) || this;
									return (
										(o.polyId = r),
										(o.innerPoly = []),
										(o.enabled = !0),
										(o.offvec = l.default.vector()),
										(o.offvecEnabled = !1),
										(o.showHandleBars = !0),
										(o.openable = !1),
										(o.indicator = new u.IndicatorForAntiTheft(o)),
										t.add(o),
										(o.holeHeight = o.topFrame.profileSizeManager.get(
											u.ShapeType.AntiTheftHoleHeight,
										)),
										(o.frameManager = new h.FrameManager(o)),
										(o.shutManager = new h.ShutterManager(o, r, i)),
										(o.borders = new u.Border(o)),
										o.indicator.create(),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'withSash', {
										get: function () {
											var e = this;
											return !!this.topFrame.sashManager.sashes.find(function (t) {
												return t.polyId.equalTo(e.polyId);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mullionProfileSize', {
										get: function () {
											return this.topFrame.profileSizeManager.get(u.ShapeType.AntiTheftMullion);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dragModify', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'usedPoly', {
										get: function () {
											return [];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'avaiablePoly', {
										get: function () {
											return [];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'coexistType', {
										get: function () {
											return [u.ShapeType.Sash, u.ShapeType.Screen];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'selected', {
										get: function () {
											return this.frameManager.selected || this.shutManager.selected;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isStandalone', {
										get: function () {
											return this.parent instanceof u.Frame;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashSerial', {
										get: function () {
											var e = this,
												t = this.topFrame.sashManager,
												n = t.sashes.filter(function (e) {
													return e.type === u.ShapeType.Sash;
												}),
												r = t.sashes.filter(function (e) {
													return e.type === u.ShapeType.Screen;
												}),
												i = t.doubleSashes.filter(function (e) {
													return e.type === u.ShapeType.DoubleSash;
												}),
												o = t.doubleSashes.filter(function (e) {
													return e.type === u.ShapeType.DoubleScreen;
												}),
												s = a(n, i, r, o).find(function (t) {
													return t.polyId.equalTo(e.polyId);
												});
											if (s)
												return s instanceof u.PushSash || s instanceof u.DoubleSash
													? s.serial
													: void 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.delete = function () {}),
									(t.prototype.toJSON = function () {
										return {
											type: this.type,
											polyId: this.polyId.toJSON(),
											enabled: this.enabled,
											offvec: this.offvec.toJSON(),
											fm: this.frameManager.toJSON(),
											shb: this.showHandleBars,
											gap: this.shutManager.gap,
											hdl: this.shutManager.handleW,
											ori: this.shutManager.orientation,
											hmc: this.shutManager.hMulsCount,
											hh: this.holeHeight,
											oe: this.openable,
										};
									}),
									(t.prototype.deserialize = function (e) {
										return (
											(this.polyId = c.PolyId.createByJson(e.polyId)),
											(this.shutManager.polyId = this.polyId),
											e.gap && (this.shutManager.gap = e.gap),
											e.hdl && (this.shutManager.handleW = e.hdl),
											e.ori && (this.shutManager.orientation = e.ori),
											e.hmc && (this.shutManager.hMulsCount = e.hmc),
											(this.enabled = e.enabled),
											(this.offvec = l.default.vector(e.offvec.x, e.offvec.y)),
											this.frameManager.deserialize(e.fm),
											void 0 === e.shb || e.shb
												? (this.showHandleBars = !0)
												: (this.showHandleBars = !1),
											e.hh && (this.holeHeight = e.hh),
											e.oe && (this.openable = e.oe),
											this
										);
									}),
									(t.prototype.updatePoly = function (e) {
										e && (this.polygon = e.translate(this.offvec)),
											this.clearChildren(),
											this.frameManager.recreateBars(),
											this.shutManager.updatePoly(),
											this.indicator.updatePoly();
									}),
									(t.prototype.translate = function (e) {
										this.frameManager.translate(e),
											this.shutManager.translate(e),
											this.indicator.translate(e);
									}),
									(t.prototype.highlight = function (e) {
										this.frameManager.highlight(e);
									}),
									Object.defineProperty(t.prototype, 'inactive', {
										get: function () {
											return (
												this.frameManager.bars.every(function (e) {
													return !e.highlighted;
												}) && this.shutManager.inactive
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'highlighted', {
										get: function () {
											return this.frameManager.bars.every(function (e) {
												return e.highlighted;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hitTest = function (e) {
										var t = c.Utils.applyMatrixMultiply(this.topFrame.getParentMatrices());
										return this.polygon.clone().transform(t).contains(e);
									}),
									(t.prototype.hitBar = function (e, t) {
										var n = this.frameManager.hitBar(e, t),
											r = this.shutManager.hitBar(e, t);
										return (
											r !== c.HitResult.None &&
												(this.frameManager.hideAssist(), this.frameManager.highlight(!1)),
											n === c.HitResult.Control || r === c.HitResult.Control
												? c.HitResult.Control
												: n === c.HitResult.None && r === c.HitResult.None
												? c.HitResult.None
												: c.HitResult.All
										);
									}),
									(t.prototype.updateFrame = function (e) {
										void 0 === e && (e = !1),
											this.shutManager.updatePoly(),
											this.indicator.updatePoly();
									}),
									(t.prototype.hideAssist = function () {
										this.frameManager.hideAssist();
									}),
									(t.prototype.findBarByPolyId = function (e) {
										return a(this.frameManager.bars, this.shutManager.bars).find(function (t) {
											return t.polyId.equalTo(e);
										});
									}),
									Object.defineProperty(t.prototype, 'Zindex', {
										get: function () {
											return (
												c.DisplayUtils.sortTheftZIndexes(this),
												c.DisplayUtils.sortSashZIndexes(this)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(u.Shape);
						t.AntiTheft = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Filler = void 0);
						var o = n(2),
							a = (function (e) {
								function t(t, n, r, i) {
									var o = e.call(this, r, n) || this;
									return (o.where = i), (o.vshape = []), t.add(o), o;
								}
								return (
									i(t, e),
									(t.prototype.hitTest = function (e) {
										var t = o.Utils.applyMatrixMultiply(this.topFrame.getParentMatrices());
										return this.polygon.clone().transform(t).contains(e);
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, !0),
											0 !== this.vshape.length &&
												(this.vshape.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshape),
												(this.vshape = []));
									}),
									t
								);
							})(n(1).Shape);
						t.Filler = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Area = void 0);
						var l = s(n(56)),
							h = s(n(0)),
							c = n(7),
							u = n(2),
							p = n(1),
							f = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n, p.ShapeType.Glass, t.type) || this;
									return (
										(r.host = t),
										(r.renderPolygon = new p.WinPolygon()),
										(r.withTurningFrame = c.DrawParams.Ins.withTurningFrame),
										(r.glassSpec = c.DrawParams.Ins.glassSpec.clone()),
										l.default.isDragging() ||
											(r.beadHidden || r.inGuardSash || (r.bead = new p.Bead(r)),
											(r.serial = new p.Label(r)),
											(r.serial.hidden = c.DrawParams.Ins.withoutGlassSerial),
											(r.spec = new p.Label(r)),
											(r.spec.hidden = !0),
											(r.fixedSpec = new p.Label(r)),
											(r.fixedSpec.hidden = !0),
											(r.withTurningFrameLabel = new p.Label(
												r,
												h.default.point(),
												c.DrawParams.Ins.displayTurningFrame && r.withTurningFrame ? '转向框' : '',
											)),
											(r.withTurningFrameLabel.align = p.TextAlign.Right),
											r.updateTurningFrameLabel()),
										r
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'inGuardSash', {
										get: function () {
											return this.host instanceof p.GuardSash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'scriptBasedSpec', {
										get: function () {
											return (
												!!c.DrawParams.Ins.scriptGlassSpecBased &&
												(!this.glassSpec.spec ||
													this.glassSpec.spec === c.DrawParams.Ins.glassSpec.spec)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'beadHidden', {
										get: function () {
											return (
												(this.host instanceof p.Frame && !c.DrawParams.Ins.fixedBeadShown) ||
												(this.host instanceof p.Sash && !c.DrawParams.Ins.sashBeadShown)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fixedSpecDesc', {
										get: function () {
											var e = [];
											if (
												(this.glassSpec.spec && e.push(this.glassSpec.spec),
												this.glassSpec.technics.length > 0)
											) {
												var t = this.glassSpec.technics.map(function (e) {
													return e[1] || '';
												});
												e.push(t.join('/'));
											}
											return e.join('/');
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.updatePoly = function (e) {
										this.fixedSpec &&
											((this.fixedSpec.text = this.glassSpec.customText
												? this.glassSpec.customText
												: this.fixedSpecDesc),
											(this.fixedSpec.hidden = this.scriptBasedSpec),
											this.fixedSpec.updatePoly()),
											this.spec &&
												((this.spec.hidden = !this.spec.text),
												this.fixedSpec.hidden || (this.spec.hidden = !0)),
											this.updateTurningFrameLabel();
									}),
									(t.prototype.updateTurningFrameLabel = function () {
										if (this.withTurningFrameLabel)
											if (this.host instanceof p.Frame) {
												if (this.withTurningFrame) {
													var e = h.default.point();
													if (!this.polygon.isEmpty) {
														var t = this.polygon.box,
															n = this.withTurningFrameLabel.fontSize / 2;
														e = h.default
															.point(t.xmax, t.ymin)
															.translate(h.default.vector(-15, n + 15));
													}
													this.withTurningFrameLabel.position = e;
												}
												(this.withTurningFrameLabel.text =
													c.DrawParams.Ins.displayTurningFrame && this.withTurningFrame
														? '转向框'
														: ''),
													this.withTurningFrameLabel.updatePoly();
											} else
												this.withTurningFrameLabel.text &&
													((this.withTurningFrameLabel.text = ''),
													this.withTurningFrameLabel.updatePoly());
									}),
									(t.prototype.draw = function (t) {
										e.prototype.draw.call(this, t);
									}),
									(t.prototype.highlight = function (e) {
										u.DisplayUtils.highlight(
											e,
											this.vshape[0],
											u.ShapeColor.getGlass(this.where, !0),
										);
									}),
									Object.defineProperty(t.prototype, 'highlighted', {
										get: function () {
											return u.DisplayUtils.isHighlight(this.vshape[0]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hitBar = function (e, t) {
										var n = this.hitArea(e, t),
											r = this.bead ? this.bead.hitBar(e, t) : u.HitResult.None;
										return n || r;
									}),
									(t.prototype.hitArea = function (e, t) {
										var n = u.Utils.applyMatrixMultiply(this.topFrame.getParentMatrices());
										return (this.bead ? this.bead.innerPoly : [this.polygon]).some(function (t) {
											return t.clone().transform(n).contains(e);
										})
											? u.HitResult.Glass
											: u.HitResult.None;
									}),
									(t.prototype.delete = function () {}),
									(t.prototype.hideAssist = function () {
										this.bead && this.bead.hideAssist();
									}),
									(t.prototype.translate = function (e) {
										this.bead ? this.bead.translate(e) : this.polygon.translate(e),
											this.serial.translate(e),
											this.renderPolygon.translate(e);
									}),
									(t.prototype.toJSON = function () {
										return {
											type: this.type,
											pid: this.polygon.polyId.toJSON(),
											bd: this.bead ? this.bead.toJSON() : void 0,
											ser: this.serial ? this.serial.toJSON() : void 0,
											spet: this.glassSpec.toJSON(),
											wtf: this.withTurningFrame,
										};
									}),
									(t.prototype.deserialize = function (e) {
										this.bead && this.bead.deserialize(e.bd),
											this.serial && this.serial.deserialize(e.ser),
											e.spet && this.glassSpec.deserialize(e.spet),
											e.tkn && (this.glassSpec.thickness = e.tkn),
											(this.withTurningFrame =
												void 0 === e.wtf ? c.DrawParams.Ins.withTurningFrame : e.wtf);
									}),
									(t.prototype.makeRenderPolygon = function () {
										var e = this.polygon.clone();
										return (
											this.bead && (e = this.bead.innerPoly[0].clone()),
											this.narrowStyleRequired && (e = this.makeNarrowPolygon(e)),
											e
										);
									}),
									Object.defineProperty(t.prototype, 'narrowStyleRequired', {
										get: function () {
											var e = this,
												t = this.host;
											return (
												t instanceof p.Sash &&
												t.type === p.ShapeType.Screen &&
												!!c.DrawParams.Ins.narrowScreenStyle &&
												!(t.offvec.length > 0) &&
												-1 !==
													this.topFrame.sashManager.allSashes
														.filter(function (e) {
															return e !== t && e.polyId.equalTo(t.polyId);
														})
														.findIndex(function (t) {
															return t.polygon.contains(e.polygon.box.center);
														})
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.makeNarrowPolygon = function (e) {
										return e.partitionTwo(this.narrowLine(e)).sort(this.sortForNarrow).shift();
									}),
									(t.prototype.narrowLine = function (e) {
										var t = e.edges
												.map(function (e) {
													return e.start;
												})
												.sort(this.sortForNarrow),
											n = h.default.segment(t[0], t[1]).length / 3.5;
										return h.default.line(
											t[0].translate(h.default.vector(-1, 1).multiply(-n)),
											h.default.vector(-1, 1),
										);
									}),
									(t.prototype.sortForNarrow = function (e, t) {
										e instanceof p.WinPolygon && (e = e.box.center),
											t instanceof p.WinPolygon && (t = t.box.center);
										var n = h.default.line(h.default.point(), h.default.vector(1, 1));
										return e.projectionOn(n).x - t.projectionOn(n).x;
									}),
									(t.calcSerial = function (e, t) {
										if (
											(void 0 === t && (t = !1),
											!c.DrawParams.Ins.withoutGlassSerial && 0 !== e.length)
										) {
											var n = e[0].view;
											if (0 !== e.length) {
												var r = function (t) {
														return e
															.map(function (e) {
																return e.sashManager.allSashes.filter(function (e) {
																	return e.type === t;
																});
															})
															.flat()
															.map(function (e) {
																var t = e.sashManager.allSashes
																	.map(function (e) {
																		return e.mulManager.glasses;
																	})
																	.flat();
																return a(e.mulManager.glasses, t);
															})
															.flat()
															.filter(function (e) {
																return !(e instanceof p.Shade);
															});
													},
													i = e
														.map(function (e) {
															return e.mulManager.glasses;
														})
														.flat()
														.filter(function (e) {
															return !(e instanceof p.Shade);
														}),
													o = r(p.ShapeType.Sash),
													s = r(p.ShapeType.KfcSash),
													l = r(p.ShapeType.Screen);
												[
													{
														title: c.DrawParams.Ins.serials.sashGlass,
														glasses: a(o, s),
													},
													{
														title: c.DrawParams.Ins.serials.screenNet,
														glasses: l,
													},
													{
														title: c.DrawParams.Ins.serials.fixedGlass,
														glasses: i,
													},
												].forEach(function (e) {
													var r = 1;
													e.glasses.forEach(function (i) {
														i.serial &&
															((i.serial.text = e.title + r++),
															t || -1 === i.id || (i.serial.updatePoly(), i.serial.draw(n)));
													});
												});
											}
										}
									}),
									t
								);
							})(p.Filler);
						t.Area = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Glass = void 0);
						var l = s(n(0)),
							h = n(9),
							c = n(11),
							u = n(7),
							p = n(2),
							f = n(1),
							d = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (t.shapes = []), (t.withShade = !1), (t.holes = []), t;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'withTheft', {
										get: function () {
											var e = this,
												t = this.host;
											return (
												t instanceof f.Frame &&
												!!t.sashManager.thefts.find(function (t) {
													return t.polyId.equalTo(e.polygon.polyId);
												})
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'colorManager', {
										get: function () {
											return this.topFrame.colorManager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.highlight = function (e) {
										p.DisplayUtils.highlight(
											e,
											this.vshape[this.vshape.length - 1],
											p.ShapeColor.getGlass(this.where, !0),
										);
									}),
									Object.defineProperty(t.prototype, 'highlighted', {
										get: function () {
											return p.DisplayUtils.isHighlight(this.vshape[this.vshape.length - 1]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.delete = function () {
										var e = this;
										(this.holes = this.holes.filter(function (t) {
											return !t.selected || (t.recycle(!0), e.remove(t), !1);
										})),
											this.bead && (this.bead.highlight(!1), this.bead.hideAssist());
									}),
									(t.prototype.makeHole = function (e, t) {
										var n = new f.GlassHole(this, t);
										n.locate(e), this.holes.push(n);
									}),
									(t.prototype.polygonWithBars = function () {
										var e = this.topFrame,
											t = this.polygon.edges,
											n = e.frameManager.bars,
											r = e.mulManager.bars,
											i = t.map(function (t, i) {
												if (!(t instanceof l.default.Segment)) return 0;
												var o = 0,
													a = c.EdgeFinder.Instance.findConnectedEdge(t, n).bar;
												if (a) o = e.frameManager.getEdgeWidth(a.polyId.idx);
												else {
													var s = c.EdgeFinder.Instance.findConnectedEdge(t, r).bar;
													s && (o = e.mulManager.splitter.lineProfileSizes[s.polyId.idx]);
												}
												return o;
											});
										return this.findOutterPoly(this.polygon, i);
									}),
									(t.prototype.findOutterPoly = function (e, t) {
										return new f.WinPolygon(
											h.Frametify.findParallelEdges(e.edges, t, !1, e.orientation, !0),
										);
									}),
									(t.prototype.updatePoly = function () {
										e.prototype.updatePoly.call(this),
											(this.shapes = []),
											(this.renderPolygon = this.makeRenderPolygon()),
											this.withShade && this.makeShadeShape(),
											this.makeGlassShape(),
											this.holes.forEach(function (e) {
												e.updatePoly();
											});
										var t = p.Utils.centroidOfPolygon(this.renderPolygon);
										this.serial && ((this.serial.position = t), this.serial.updatePoly());
										var n =
											u.DrawParams.Ins.withoutGlassSerial || !this.serial
												? t
												: this.serial.position.translate(
														0,
														0.75 * u.DrawParams.Ins.labelFontSize + 20,
												  );
										this.fixedSpec && ((this.fixedSpec.position = n), this.fixedSpec.updatePoly()),
											this.spec && ((this.spec.position = n), this.spec.updatePoly());
									}),
									(t.prototype.toJSON = function () {
										return Object.assign(e.prototype.toJSON.call(this), {
											ws: this.withShade,
											hs: this.holes.map(function (e) {
												return e.toJSON();
											}),
										});
									}),
									(t.prototype.deserialize = function (t) {
										var n = this;
										e.prototype.deserialize.call(this, t),
											t.ws && (this.withShade = t.ws),
											t.hs &&
												(this.holes = t.hs.map(function (e) {
													return new f.GlassHole(n).deserialize(e);
												}));
									}),
									(t.prototype.draw = function (t) {
										var n = this;
										this.updatePoly(),
											e.prototype.draw.call(this, t),
											this.vshape.splice(this.shapes.length).forEach(function (e) {
												e.moveTo(e.getLayer()), e.hide();
											});
										var r = this.holes
											.filter(function (e) {
												return !e.hidden;
											})
											.map(function (e) {
												return e.dataForArtisan();
											});
										this.shapes.forEach(function (e, i) {
											var o = i >= n.vshape.length,
												a = o ? u.Artisan.recycleShape(e[0], t) : n.vshape[i];
											a.setAttr('data', {
												poly: e[0],
												fcolor: e[1].fcolor,
												drag: !1,
												holes: r,
												stroke: p.ShapeColor.windowStrokeColor,
												strokeWidth: u.DrawParams.Ins.windowStrokeWidth,
											}),
												a.setAttr('robot', n),
												o && ((n.vshape[i] = a), n.gshape ? n.gshape.add(a) : n.addToGroup([a]));
										}),
											t.isDragging ||
												(this.serial && this.serial.draw(t),
												this.fixedSpec && this.fixedSpec.draw(t),
												this.spec && this.spec.draw(t),
												this.withTurningFrameLabel && this.withTurningFrameLabel.draw(t)),
											this.holes.forEach(function (e) {
												return e.draw(t);
											});
									}),
									(t.prototype.hitArea = function (t, n) {
										return this.holes
											.map(function (e) {
												return e.hit(t, n);
											})
											.some(function (e) {
												return e;
											})
											? p.HitResult.GlassHole
											: e.prototype.hitArea.call(this, t, n);
									}),
									(t.prototype.makeGlassShape = function () {
										this.shapes.push([
											this.renderPolygon,
											{
												fcolor: this.colorManager.glass,
											},
										]);
									}),
									(t.prototype.makeShadeShape = function () {
										for (
											var e,
												t,
												n = this.renderPolygon.clone(),
												r = n.box,
												i = r.center,
												o = 0.33 * (r.ymax - r.ymin),
												s = Math.round(o / 32.5),
												h = this.colorManager.barNormal,
												c = [],
												u = 0;
											u < s;
											u++
										) {
											var p = l.default.line(
													l.default.point(i.x, r.ymin + 32.5 * (u + 1)),
													l.default.vector(0, 1),
												),
												d = n.intersect(p);
											if (d.length < 2) break;
											var g = l.default.segment(d[0], d[1]),
												y = g.middle(),
												m = g.length,
												v = u === s - 1 ? 15 : 5,
												w = f.PolygonCreator.Ins.rectangleShape(y, m, v);
											c.push([
												w,
												{
													fcolor: h,
												},
											]),
												(t = g);
										}
										var b = [],
											S = (r.xmax - r.xmin) / 5;
										[r.xmin + S, r.xmax - S].forEach(function (e) {
											var r = l.default.line(l.default.point(e, i.y), l.default.vector(1, 0)),
												o = n.intersect(r);
											if (!(o.length < 2)) {
												o.sort(function (e, t) {
													return e.y - t.y;
												}),
													(o[1].y = t.start.y);
												var a = l.default.segment(o[0], o[1]),
													s = a.middle(),
													c = a.length,
													u = f.PolygonCreator.Ins.rectangleShape(s, 10, c);
												b.push([
													u,
													{
														fcolor: h,
													},
												]);
											}
										}),
											(e = this.shapes).push.apply(e, a(b, c));
									}),
									Object.defineProperty(t.prototype, 'Zindex', {
										get: function () {
											return p.DisplayUtils.sortTheftZIndexes(this);
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(f.Area);
						t.Glass = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.GlassHole = t.HoleStyle = void 0);
						var l,
							h = s(n(0)),
							c = n(5),
							u = n(11),
							p = n(2),
							f = n(7),
							d = n(6),
							g = n(1);
						!(function (e) {
							(e.Circle = 'circle'), (e.Square = 'square'), (e.Custom = 'custom');
						})((l = t.HoleStyle || (t.HoleStyle = {})));
						var y = (function (e) {
							function t(t, n, r) {
								void 0 === n && (n = '100'), void 0 === r && (r = l.Circle);
								var i = e.call(this, g.ShapeType.GLassHole, t.polygon) || this;
								return (
									(i.glass = t),
									(i.size = n),
									(i.style = r),
									(i.vshapes = []),
									(i.shapes = []),
									(i.vMarginDim = new g.Dimension(i)),
									(i.hMarginDim = new g.Dimension(i)),
									(i.constraint = [
										{
											direction: u.Direction.Left,
											distance: 0,
										},
										{
											direction: u.Direction.Up,
											distance: 0,
										},
									]),
									(i.dimToProfile = !1),
									(i.selected = !1),
									(i.hidden = !1),
									(i.diameterHidden = !1),
									i.glass.add(i),
									(i.hMarginDim.tool = i.vMarginDim.tool = c.ToolType.editGlassHoleDim),
									i
								);
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'boxSize', {
									get: function () {
										var e = this.size.split('x');
										return (
											1 === e.length && (e = [e[0], e[0]]),
											e.map(function (e) {
												return Number.parseFloat(e);
											})
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'circleSize', {
									get: function () {
										return Number.parseFloat(this.size);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'boundarySize', {
									get: function () {
										if (this.style === l.Square) {
											var e = this.boxSize;
											return Math.max.apply(Math, a(e));
										}
										return Number.parseFloat(this.size);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'position', {
									get: function () {
										var e = this.constraint[0],
											t = this.constraint[1],
											n = this.dimBasedPolygon.box,
											r =
												e.direction === u.Direction.Left
													? n.xmin + e.distance
													: n.xmax - e.distance,
											i =
												t.direction === u.Direction.Up ? n.ymin + t.distance : n.ymax - t.distance;
										return h.default.point(r, i);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'dimBasedPolygon', {
									get: function () {
										return this.dimToProfile
											? this.glass.polygonWithBars()
											: this.glass.polygon.clone();
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.locate = function (e) {
									var t = this.dimBasedPolygon,
										n = t.box,
										r = this.dimIntersects(t, e);
									r.left &&
										r.right &&
										r.up &&
										r.down &&
										((this.constraint[0].direction =
											e.x < n.center.x ? u.Direction.Left : u.Direction.Right),
										(this.constraint[0].distance = e.x < n.center.x ? e.x - n.xmin : n.xmax - e.x),
										(this.constraint[1].direction =
											e.y < n.center.y ? u.Direction.Up : u.Direction.Down),
										(this.constraint[1].distance = e.y < n.center.y ? e.y - n.ymin : n.ymax - e.y));
								}),
								(t.prototype.highlight = function (e, t) {
									(this.selected = e), this.draw(t);
								}),
								(t.prototype.hitTest = function (e) {
									var t = this.shapes[0];
									return !!Array.isArray(t) && t[0].contains(e);
								}),
								(t.prototype.hit = function (e, t) {
									return (
										(this.selected = this.holeShape()[0].contains(e)),
										this.updatePoly(),
										this.draw(t),
										this.selected && this.emitSettings(t),
										this.selected
									);
								}),
								(t.prototype.validateSize = function () {
									if (this.style === l.Circle) {
										if (!isNaN(+this.size)) return;
									} else {
										var e = this.size.split('x');
										if (
											e.length <= 2 &&
											e.every(function (e) {
												return !isNaN(+e);
											})
										)
											return;
									}
									this.size = '100';
								}),
								(t.prototype.updatePoly = function () {
									(this.shapes = []),
										this.hidden ? this.glass.remove(this) : this.glass.add(this),
										this.validateSize();
									var e = this.glass.polygon.parallelPoly(this.boundarySize / 2, !0);
									if (((this.hidden = !e.contains(this.position)), this.hidden)) return this;
									if (
										(this.shapes.push(this.holeShape()),
										this.diameterHidden || this.shapes.push(this.textShape()),
										this.ignoreDims())
									)
										return (
											(this.hMarginDim.hidden = this.vMarginDim.hidden = !0),
											this.hMarginDim.updatePoly(),
											this.vMarginDim.updatePoly(),
											this
										);
									var t = this.position,
										n = this.dimBasedPolygon,
										r = this.dimIntersects(n, t);
									if (r.left && r.right) {
										var i = this.constraint[0].direction === u.Direction.Left;
										(this.hMarginDim.from = t),
											(this.hMarginDim.to = i ? r.left : r.right),
											this.hMarginDim.updatePoly();
									}
									if (r.up && r.down) {
										var o = this.constraint[1].direction === u.Direction.Up;
										(this.vMarginDim.from = t),
											(this.vMarginDim.to = o ? r.up : r.down),
											this.vMarginDim.updatePoly();
									}
									return this;
								}),
								(t.prototype.ignoreDims = function () {
									return this.glass.polygon.edges.some(function (e) {
										return (
											e instanceof h.default.Arc ||
											(!p.Utils.isSegHorizontal(e) && !p.Utils.isSegVertical(e))
										);
									});
								}),
								(t.prototype.draw = function (e) {
									var t = this;
									this.vshapes.splice(this.shapes.length).forEach(function (e) {
										e.moveTo(e.getLayer()), e.hide();
									});
									var n = this.selected
										? p.ShapeColor.barHighlight
										: p.ShapeColor.darkMode
										? 'yellow'
										: 'blue';
									this.shapes.forEach(function (r, i) {
										var o = i >= t.vshapes.length,
											a = Array.isArray(r) ? r[0] : r,
											s = o ? f.Artisan.recycleShape(a, e) : t.vshapes[i];
										s.setAttr('tool', c.ToolType.editGlassHole),
											s.setAttr('robot', t),
											s.moveToTop();
										var l = {
											poly: a,
											fcolor: n,
											stroke: n,
											drag: !0,
										};
										r instanceof g.Text
											? (r.color = n)
											: ((l = Object.assign(l, r[1])),
											  s.hitFunc(function (e) {
													return r[0].makeHitRegion(s, e);
											  })),
											s.setAttr('data', l),
											o && ((t.vshapes[i] = s), t.addToGroup([s]));
									}),
										this.children.forEach(function (t) {
											return t.draw(e);
										});
								}),
								(t.prototype.translate = function (e) {
									var t = this.constraint[0].direction === u.Direction.Left;
									this.constraint[0].distance += (t ? 1 : -1) * e.x;
									var n = this.constraint[1].direction === u.Direction.Up;
									(this.constraint[1].distance += (n ? 1 : -1) * e.y),
										this.shapes.forEach(function (t) {
											Array.isArray(t) ? t[0].translate(e) : t.translate(e);
										});
								}),
								(t.prototype.recycle = function (t) {
									void 0 === t && (t = !1),
										e.prototype.recycle.call(this, !0),
										0 !== this.vshapes.length &&
											(this.vshapes.forEach(function (e) {
												e.hide(), e.moveTo(e.getLayer());
											}),
											this.recycleFromGroup(this.vshapes),
											(this.vshapes = []));
								}),
								(t.prototype.toJSON = function () {
									return {
										style: this.style,
										size: this.size,
										constraint: this.constraint,
										dimToProfile: this.dimToProfile,
										vDim: this.vMarginDim.toJSON(),
										hDim: this.hMarginDim.toJSON(),
										dh: this.diameterHidden,
									};
								}),
								(t.prototype.deserialize = function (e) {
									return (
										(this.style = e.style ? e.style : l.Circle),
										(this.size = 'number' == typeof e.size ? e.size.toString() : e.size),
										(this.constraint = e.constraint),
										(this.dimToProfile = e.dimToProfile),
										e.vDim && this.vMarginDim.deserialize(e.vDim),
										e.hDim && this.hMarginDim.deserialize(e.hDim),
										e.dh && (this.diameterHidden = e.dh),
										this
									);
								}),
								(t.prototype.dataForArtisan = function () {
									var e,
										t = this.position,
										n = 0,
										r = 0;
									return (
										this.style === l.Square
											? ((n = (e = o(
													this.boxSize.map(function (e) {
														return e / 2;
													}),
													2,
											  ))[0]),
											  (r = e[1]))
											: (n = this.circleSize / 2),
										{
											x: t.x,
											y: t.y,
											size: n,
											height: r,
											style: this.style,
										}
									);
								}),
								(t.prototype.holeShape = function () {
									var e,
										t,
										n = this.position;
									return (
										this.style === l.Circle
											? (t = new g.WinPolygon()).addCircle(n, this.circleSize / 2)
											: (t = (e = g.PolygonCreator.Ins).rectangleShape.apply(
													e,
													a([n], this.boxSize),
											  )),
										[
											t,
											{
												fcolor: 'none',
											},
										]
									);
								}),
								(t.prototype.textShape = function () {
									var e = this.boundarySize / 2 + f.DrawParams.Ins.dimFontH / 2 + 16,
										t = h.default.vector(
											0,
											this.constraint[1].direction === u.Direction.Up ? e : -e,
										),
										n = this.style === l.Circle ? 'φ' : '',
										r = new g.Text(n + this.size.toString(), this.position.translate(t));
									return this.selected && (r.color = p.ShapeColor.barHighlight), r;
								}),
								(t.prototype.dimIntersects = function (e, t) {
									var n = h.default.line(t, h.default.vector(0, 1)),
										r = h.default.line(t, h.default.vector(1, 0)),
										i = e.intersect(n),
										o = e.intersect(r);
									return {
										left: i
											.filter(function (e) {
												return e.leftTo(h.default.line(t, h.default.vector(-1, 0)));
											})
											.pop(),
										right: i
											.filter(function (e) {
												return !e.leftTo(h.default.line(t, h.default.vector(-1, 0)));
											})
											.pop(),
										up: o
											.filter(function (e) {
												return e.leftTo(h.default.line(t, h.default.vector(0, -1)));
											})
											.pop(),
										down: o
											.filter(function (e) {
												return !e.leftTo(h.default.line(t, h.default.vector(0, -1)));
											})
											.pop(),
									};
								}),
								(t.prototype.emitSettings = function (e) {
									e.eventBus.emit({
										type: d.EventType.glass_hole_settings,
										payload: new d.GlassHoleSettings(this, e),
									});
								}),
								t
							);
						})(g.Shape);
						t.GlassHole = y;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.cutStyle = t.Panel = void 0);
						var l,
							h = s(n(0)),
							c = n(2),
							u = n(7),
							p = n(1),
							f = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (
										(r.host = t),
										(r.glassSpec = new c.GlassSpec()),
										(r.shapes = []),
										(r.type = p.ShapeType.Panel),
										(r.cutStyle = l.None),
										r
									);
								}
								return (
									i(t, e),
									(t.prototype.updatePoly = function () {
										var t;
										if (
											(e.prototype.updatePoly.call(this),
											(this.shapes = []),
											(this.renderPolygon = this.makeRenderPolygon()),
											this.shapes.push(this.renderPolygon),
											this.cutStyle !== l.None)
										) {
											var n = this.renderPolygon.box,
												r = this.cutStyle === l.Horizontal,
												i = 120,
												o = r ? n.ymax - n.ymin : n.xmax - n.xmin;
											i = o / Math.floor(o / i);
											for (
												var s = [],
													c = !0,
													u = r
														? h.default.line(h.default.point(0, n.ymin), h.default.vector(0, 1))
														: h.default.line(h.default.point(n.xmin, 0), h.default.vector(1, 0));
												c;

											) {
												var f = this.renderPolygon.intersect(u);
												if (2 !== f.length) {
													c = !1;
													break;
												}
												s.push(new p.WinPolygon([h.default.segment.apply(h.default, a(f))])),
													r ? (u.pt.y += i) : (u.pt.x += i);
											}
											(t = this.shapes).push.apply(t, a(s));
										}
									}),
									(t.prototype.draw = function (t) {
										var n = this;
										if (
											(e.prototype.draw.call(this, t),
											this.updatePoly(),
											this.vshape.splice(this.shapes.length).forEach(function (e) {
												e.moveTo(e.getLayer()), e.hide();
											}),
											this.shapes.forEach(function (e, r) {
												var i = r >= n.vshape.length,
													o = i ? u.Artisan.recycleShape(e, t) : n.vshape[r];
												o.setAttr('data', {
													poly: e,
													fcolor: n.topFrame.colorManager.barNormal,
													drag: !1,
												}),
													o.setAttr('robot', n),
													i && ((n.vshape[r] = o), n.gshape ? n.gshape.add(o) : n.addToGroup([o]));
											}),
											this.serial)
										) {
											(this.serial.position = c.Utils.centroidOfPolygon(this.renderPolygon)),
												this.serial.updatePoly(),
												this.serial.draw(t);
											var r = u.DrawParams.Ins.withoutGlassSerial
												? this.serial.position
												: this.serial.position.translate(
														0,
														0.75 * u.DrawParams.Ins.labelFontSize + 20,
												  );
											(this.spec.position = r),
												this.spec.updatePoly(),
												this.spec.draw(t),
												(this.fixedSpec.position = r),
												this.fixedSpec.updatePoly(),
												this.fixedSpec.draw(t);
										}
									}),
									(t.prototype.toJSON = function () {
										return Object.assign(e.prototype.toJSON.call(this), {
											pcs: this.cutStyle,
										});
									}),
									(t.prototype.deserialize = function (t) {
										e.prototype.deserialize.call(this, t), t.pcs && (this.cutStyle = t.pcs);
									}),
									t
								);
							})(p.Area);
						(t.Panel = f),
							(function (e) {
								(e.None = 'None'), (e.Horizontal = 'Horizontal'), (e.Vertical = 'Vertical');
							})((l = t.cutStyle || (t.cutStyle = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Empty = void 0);
						var o = n(1),
							a = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n, o.ShapeType.None, t.type) || this;
									return (r.host = t), r;
								}
								return (
									i(t, e),
									(t.prototype.toJSON = function () {
										return {
											type: this.type,
											pid: this.polygon.polyId.toJSON(),
										};
									}),
									(t.prototype.deserialize = function (e) {}),
									t
								);
							})(o.Filler);
						t.Empty = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Bead = void 0);
						var a = o(n(0)),
							s = n(13),
							l = n(2),
							h = n(6),
							c = n(1),
							u = (function (e) {
								function t(t) {
									var n = e.call(this, c.ShapeType.Bead, t.polygon) || this;
									return (
										(n.innerPoly = []),
										(n.offvec = a.default.vector()),
										t.add(n),
										(n.frameManager = new s.FrameManager(n)),
										(n.borders = new c.Border(n)),
										n.borders.updatePoly(),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'dragModify', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'usedPoly', {
										get: function () {
											return [];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'avaiablePoly', {
										get: function () {
											return [];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'inactive', {
										get: function () {
											return this.frameManager.bars.every(function (e) {
												return !e.highlighted;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.translate = function (e) {
										this.frameManager.translate(e);
									}),
									(t.prototype.highlight = function (e) {
										this.frameManager.bars.forEach(function (t) {
											return t.highlight(e);
										});
									}),
									(t.prototype.hitTest = function (e) {
										return this.frameManager.bars.some(function (t) {
											return t.hitTest(e);
										});
									}),
									(t.prototype.hitBar = function (e, t) {
										var n = this.frameManager.hitBar(e, t);
										return n === l.HitResult.All
											? (t.eventBus.emit({
													type: h.EventType.bead_settings,
													payload: new h.BeadSettings(this, t),
											  }),
											  l.HitResult.Bead)
											: n;
									}),
									(t.prototype.updateFrame = function (e) {
										void 0 === e && (e = !1), this.frameManager.recreateBars();
									}),
									(t.prototype.hideAssist = function () {
										this.frameManager.hideAssist();
									}),
									(t.prototype.findBarByPolyId = function (e) {
										return this.frameManager.bars.find(function (t) {
											return t.polyId.equalTo(e);
										});
									}),
									(t.prototype.toJSON = function () {
										return {
											type: this.type,
											fm: this.frameManager.toJSON(),
										};
									}),
									(t.prototype.deserialize = function (e) {
										e &&
											(this.frameManager.deserialize(e.fm),
											this.frameManager.recreated(this.polygon),
											this.add(this.borders)),
											this.borders.updatePoly();
									}),
									t
								);
							})(c.Shape);
						t.Bead = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoubleSash = void 0);
						var s = a(n(0)),
							l = n(11),
							h = n(7),
							c = n(6),
							u = n(13),
							p = n(2),
							f = n(1),
							d = (function (e) {
								function t(t, n, r, i) {
									void 0 === i && (i = f.ShapeType.DoubleSash);
									var o = e.call(this, i, n) || this;
									return (
										(o.polyId = r),
										(o.enabled = !0),
										(o.coexistType = []),
										(o.offvec = s.default.vector()),
										(o.offvecEnabled = !1),
										(o._openToward = u.OpenToward.Outward),
										(o.expandHorizontally = !0),
										(o.isDoor = h.DrawParams.Ins.sashAsDoor),
										(o._sashes = []),
										(o.withTurningFrame = h.DrawParams.Ins.withTurningFrameForSash),
										(o.truncateFrame = !1),
										(o.rotate = !1),
										t.add(o),
										(o.label = new f.Label(
											o,
											s.default.point(),
											h.DrawParams.Ins.displayTurningFrameForSash && o.withTurningFrame
												? '转向框'
												: '',
										)),
										(o.label.align = f.TextAlign.Right),
										o.initDoubleSash(),
										o
									);
								}
								return (
									i(t, e),
									(t.prototype.initDoubleSash = function () {
										this.create(), this.updateLabel();
									}),
									Object.defineProperty(t.prototype, 'serial', {
										get: function () {
											return 0 === this.sashes.length ? '' : this.sashes[0].serial;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'siblingSash', {
										get: function () {
											var e = this;
											return this.topFrame.sashManager.doubleSashes
												.filter(function (t) {
													return t !== e;
												})
												.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												})
												.filter(function (e) {
													return e instanceof t;
												})
												.pop();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'openToward', {
										get: function () {
											return this._openToward;
										},
										set: function (e) {
											this._openToward = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashType', {
										get: function () {
											return this.type === f.ShapeType.DoubleShadePushSash
												? f.ShapeType.ShadePushSash
												: this.type === f.ShapeType.DoubleScreen
												? f.ShapeType.Screen
												: f.ShapeType.Sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'jointWay', {
										get: function () {
											return this.sashes[0].jointWay;
										},
										set: function (e) {
											this.sashes.forEach(function (t) {
												return (t.jointWay = e);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'highlighted', {
										get: function () {
											return this._sashes.every(function (e) {
												return e.highlighted;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'inactive', {
										get: function () {
											return this._sashes.every(function (e) {
												return e.inactive;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashes', {
										get: function () {
											return this._sashes.filter(function (e) {
												return e.enabled;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashCount', {
										get: function () {
											var e = this.sashes,
												t = e.filter(function (e) {
													return e.type === f.ShapeType.Sash;
												});
											return 0 === t.length ? e.length : t.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'columnCount', {
										get: function () {
											return 2;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'selected', {
										get: function () {
											return this.sashes.some(function (e) {
												return e.selected;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'opened', {
										get: function () {
											return this._sashes[0].opened;
										},
										set: function (e) {
											e !== this.opened &&
												this._sashes.forEach(function (t) {
													return (t.opened = e);
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'barOverlapsCount', {
										get: function () {
											return 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashGapsCount', {
										get: function () {
											return 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashAssignWay', {
										get: function () {
											return 'DS' + (this.openToward === u.OpenToward.Inward ? 'I' : 'O');
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fixedWidth', {
										get: function () {
											var e = 0;
											return (
												this.sashes.forEach(function (t) {
													-1 !== t.fixedWidth && (e += t.fixedWidth);
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fixedColumnsCount', {
										get: function () {
											var e = 0;
											return (
												this.sashes.forEach(function (t) {
													-1 !== t.fixedWidth && e++;
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.delete = function () {
										this.sashes.forEach(function (e) {
											return e.delete();
										});
									}),
									(t.prototype.toJSON = function () {
										var e = [];
										return (
											this._sashes.forEach(function (t) {
												return e.push(t.toJSON());
											}),
											{
												type: this.type,
												polyId: this.polyId.toJSON(),
												enabled: this.enabled,
												offvec: this.offvec.toJSON(),
												openToward: this.openToward,
												isDoor: this.isDoor,
												withTurningFrame: this.withTurningFrame,
												tf: this.truncateFrame,
												rt: this.rotate,
												sashes: e,
											}
										);
									}),
									(t.prototype.deserialize = function (e) {
										var t = this;
										return (
											(this.polyId = p.PolyId.createByJson(e.polyId)),
											(this.enabled = e.enabled),
											(this.offvec = s.default.vector(e.offvec.x, e.offvec.y)),
											(this.openToward = e.openToward),
											(this.isDoor = void 0 !== e.isDoor ? e.isDoor : h.DrawParams.Ins.sashAsDoor),
											(this.withTurningFrame =
												void 0 === e.withTurningFrame
													? h.DrawParams.Ins.withTurningFrameForSash
													: e.withTurningFrame),
											(this.truncateFrame = void 0 !== e.tf && e.tf),
											void 0 !== e.rt && (this.rotate = e.rt),
											e.sashes.forEach(function (e, n) {
												n >= t._sashes.length &&
													(t._sashes[n] = new f.PushSash(
														t,
														new f.WinPolygon(),
														new p.PolyId(),
														f.ShapeType.Sash,
													)),
													t._sashes[n].deserialize(e);
											}),
											this
										);
									}),
									(t.prototype.updatePoly = function (e) {
										e && (this.polygon = e.translate(this.offvec)),
											this.clearChildren(),
											this.create(),
											this.updateLabel();
									}),
									(t.prototype.updateLabel = function () {
										if (this.withTurningFrame || this.truncateFrame) {
											var e = s.default.point();
											if (!this.polygon.isEmpty) {
												var t = this.sashes[1].mulManager.fillerManager.fillers.pop().polygon.box,
													n = this.label.fontSize / 2;
												e = s.default
													.point(t.xmax, t.ymin)
													.translate(s.default.vector(-15, n + 15));
											}
											this.label.position = e;
										}
										(this.label.text = [
											this.truncateFrame ? '截断外框' : '',
											h.DrawParams.Ins.displayTurningFrameForSash && this.withTurningFrame
												? '转向框'
												: '',
										].join(' ')),
											this.label.updatePoly();
									}),
									(t.prototype.hitBar = function (e, t) {
										var n,
											r,
											i,
											a,
											s = this._sashes.find(function (t) {
												return t.hitTest(e);
											});
										if (!s) return this.highlight(!1), this.hideAssist(), p.HitResult.None;
										var l = this.sashes
												.map(function (e) {
													return e.mulManager.holes;
												})
												.flat(),
											h = !1;
										try {
											for (var c = o(l), u = c.next(); !u.done; u = c.next()) {
												var f = u.value;
												f.hitTest(e) &&
													(this.highlight(!1), this.hideAssist(), f.hit(e, t), (h = !0));
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												u && !u.done && (r = c.return) && r.call(c);
											} finally {
												if (n) throw n.error;
											}
										}
										if (h) return p.HitResult.GlassHole;
										l.forEach(function (e) {
											return e.highlight(!1, t);
										});
										var d = !1,
											g = p.HitResult.None,
											y = this.sashes
												.map(function (e) {
													return e.sashManager.allSashes;
												})
												.flat();
										try {
											for (var m = o(y), v = m.next(); !v.done; v = m.next()) {
												var w = v.value,
													b = w.hitTest(e),
													S = w.hitBar(e, t);
												b &&
													((d = !0),
													(g = this.properHitResult(S)),
													S === p.HitResult.All && this.emitSashSetting(w, t));
											}
										} catch (e) {
											i = {
												error: e,
											};
										} finally {
											try {
												v && !v.done && (a = m.return) && a.call(m);
											} finally {
												if (i) throw i.error;
											}
										}
										if (d) return g;
										if (this.inactive) return this.highlight(!0), p.HitResult.All;
										if (this.highlighted) {
											this.highlight(!1);
											var _ = this.properHitResult(s.hitBar(e, t));
											return _ !== p.HitResult.Bar && this.emitSashSetting(s, t), _;
										}
										if (!s.inactive) {
											var P = this.properHitResult(s.hitBar(e, t));
											return P === p.HitResult.Sash && this.emitSashSetting(s, t), P;
										}
										if (s.highlighted) return s.hitBar(e, t);
										this._sashes.forEach(function (e) {
											return e.highlight(!1);
										});
										var x = this.properHitResult(s.hitBar(e, t));
										return x !== p.HitResult.Bar && this.emitSashSetting(s, t), x;
									}),
									(t.prototype.highlight = function (e) {
										this._sashes.forEach(function (t) {
											t.highlight(e),
												t.sashManager.allSashes.forEach(function (t) {
													t.highlight(e);
												});
										});
									}),
									(t.prototype.translate = function (e) {
										this.polygon.translate(e),
											this._sashes.forEach(function (t) {
												return t.translate(e);
											});
									}),
									(t.prototype.hideAssist = function () {
										this._sashes.forEach(function (e) {
											e.hideAssist(),
												e.sashManager.allSashes.forEach(function (e) {
													e.hideAssist();
												});
										});
									}),
									(t.prototype.fitOpenToward = function (e) {
										var t = this,
											n = !h.DrawParams.Ins.sashOutwardOpen;
										(this._openToward =
											this.type === f.ShapeType.DoubleScreen
												? n
													? u.OpenToward.Outward
													: u.OpenToward.Inward
												: n
												? u.OpenToward.Inward
												: u.OpenToward.Outward),
											e &&
												((e.openToward = u.OpenToward.Outward),
												e.updatePoly(),
												(this._openToward = u.OpenToward.Inward)),
											this.sashes.forEach(function (e) {
												return (e.hardwareManager.openToward = t._openToward);
											});
									}),
									(t.prototype.splitPoint = function () {
										var e = this.polygon.box,
											t = e.center.x;
										return (
											this.sashes[0] &&
												-1 !== this.sashes[0].fixedWidth &&
												(t = e.xmin + this.sashes[0].fixedWidth),
											this.sashes[1] &&
												-1 !== this.sashes[1].fixedWidth &&
												(t = e.xmax - this.sashes[1].fixedWidth),
											s.default.point(t, e.center.y)
										);
									}),
									(t.prototype.create = function () {
										var e = this;
										if (!this.polygon.isEmpty) {
											var t = this.polygon
												.partitionTwo(s.default.line(this.splitPoint(), s.default.vector(1, 0)))
												.sort(function (e, t) {
													return e.box.center.x - t.box.center.x;
												});
											this._sashes.forEach(function (e) {
												return (e.enabled = !1);
											}),
												t.forEach(function (t, n, r) {
													var i = n >= e._sashes.length;
													f.SashUtil.adjustEdDock(t, e.polygon, n, 2);
													var o = i ? new f.PushSash(e, t, e.polyId, e.sashType) : e._sashes[n];
													e.add(o);
													var a = e.sashType !== o.type;
													(o.type = e.sashType),
														a && o.applyFiller(),
														(o.sashNumber = n + 1),
														(o.enabled = !0),
														(o.hardwareManager.openToward = e.openToward),
														i &&
															((o.hardwareManager.openDirection = e.calOpenDirection(n)),
															(o.hardwareManager.handle.dim.position =
																0 === n ? l.Direction.Left : l.Direction.Right),
															(o.hardwareManager.handle.dim.hidden =
																!h.DrawParams.Ins.dimToGroundShown || 0 === n),
															(o.hardwareManager.handle.dimToSash.position =
																0 === n ? l.Direction.Left : l.Direction.Right),
															(o.hardwareManager.handle.dimToSash.hidden =
																!h.DrawParams.Ins.dimToSashShown || 0 === n),
															e.isDoor && (o.hardwareManager.handle.hidden = 0 === n)),
														o.updatePoly(t),
														i && e._sashes.push(o);
												});
										}
									}),
									(t.prototype.emitSashSetting = function (e, t) {
										t.eventBus.emit({
											type: c.EventType.sash_settings,
											payload: new c.SashSettings(e.hardwareManager, t),
										});
									}),
									(t.prototype.properHitResult = function (e) {
										return e === p.HitResult.All ? p.HitResult.Sash : e;
									}),
									(t.prototype.calOpenDirection = function (e) {
										return this.rotate
											? 0 === e
												? u.OpenDirection.Left_Rotate
												: u.OpenDirection.Right_Rotate
											: 0 === e
											? u.OpenDirection.Left
											: u.OpenDirection.Right;
									}),
									Object.defineProperty(t.prototype, 'Zindex', {
										get: function () {
											return p.DisplayUtils.sortSashZIndexes(this);
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(f.Shape);
						t.DoubleSash = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Fold = void 0);
						var s = a(n(0)),
							l = n(7),
							h = n(11),
							c = n(6),
							u = n(13),
							p = n(2),
							f = n(1),
							d = (function (e) {
								function t(t, n, r, i) {
									void 0 === i && (i = f.ShapeType.FoldSash);
									var o = e.call(this, i, n) || this;
									return (
										(o.polyId = r),
										(o.enabled = !0),
										(o.offvec = s.default.vector()),
										(o.offvecEnabled = !1),
										(o.openToward = u.OpenToward.Inward),
										(o.expandHorizontally = !0),
										(o.foldWayChanged = !1),
										(o.isDoor = l.DrawParams.Ins.sashAsDoor),
										(o.sideSlide = !1),
										(o.asPush = !1),
										(o._leftCount = 3),
										(o._rightCount = 1),
										(o._sashes = []),
										t.add(o),
										o.create(),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'serial', {
										get: function () {
											return 0 === this.sashes.length ? '' : this.sashes[0].serial;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'connectGapsCount', {
										get: function () {
											return (
												(this._leftCount >= 2 ? this._leftCount - 1 : 0) +
												(this._rightCount >= 2 ? this._rightCount - 1 : 0)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'touchGapsCount', {
										get: function () {
											return this._leftCount > 0 && this._rightCount > 0 ? 1 : 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sideTouchGapsCount', {
										get: function () {
											return 0 === this._leftCount || 0 === this._rightCount ? 1 : 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'slidePositionsCount', {
										get: function () {
											return (
												this.slidePositionsCountOfOneSide(this._leftCount) +
												this.slidePositionsCountOfOneSide(this._rightCount)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashType', {
										get: function () {
											return this.type === f.ShapeType.FoldShade
												? f.ShapeType.ShadePushSash
												: this.type === f.ShapeType.FoldScreen
												? f.ShapeType.Screen
												: f.ShapeType.Sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'coexistType', {
										get: function () {
											return [];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashes', {
										get: function () {
											return this._sashes.filter(function (e) {
												return e.enabled;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashCount', {
										get: function () {
											var e = this.sashes,
												t = e.filter(function (e) {
													return e.type === f.ShapeType.Sash;
												});
											return 0 === t.length ? e.length : t.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'columnCount', {
										get: function () {
											return this._leftCount + this._rightCount;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'jointWay', {
										get: function () {
											return this.sashes[0].jointWay;
										},
										set: function (e) {
											this.sashes.forEach(function (t) {
												return (t.jointWay = e);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'selected', {
										get: function () {
											return this.sashes.some(function (e) {
												return e.selected;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashAssignWay', {
										get: function () {
											var e = this.leftCount.toString() + '+' + this.rightCount.toString(),
												t = this.openToward === u.OpenToward.Inward ? 'I' : 'O';
											return e + '|' + (this.expandHorizontally ? '' : 'V') + t;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fixedWidth', {
										get: function () {
											var e = 0;
											return (
												this.sashes.forEach(function (t) {
													-1 !== t.fixedWidth && (e += t.fixedWidth);
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fixedColumnsCount', {
										get: function () {
											var e = 0;
											return (
												this.sashes.forEach(function (t) {
													-1 !== t.fixedWidth && e++;
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'barOverlapsCount', {
										get: function () {
											return 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashGapsCount', {
										get: function () {
											return this.sashes.length - 1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hitTest = function (e) {
										return this.polygon.contains(e);
									}),
									(t.prototype.delete = function () {
										this.sashes.forEach(function (e) {
											return e.delete();
										});
									}),
									(t.prototype.toJSON = function () {
										var e = [];
										return (
											this.sashes.forEach(function (t) {
												return e.push(t.toJSON());
											}),
											{
												type: this.type,
												polyId: this.polyId.toJSON(),
												enabled: this.enabled,
												offvec: this.offvec.toJSON(),
												horizontally: this.expandHorizontally,
												openToward: this.openToward,
												leftCount: this._leftCount,
												rightCount: this._rightCount,
												isDoor: this.isDoor,
												sashes: e,
												sideSlide: this.sideSlide,
												ap: this.asPush,
											}
										);
									}),
									(t.prototype.deserialize = function (e) {
										var t = this;
										return (
											(this.polyId = p.PolyId.createByJson(e.polyId)),
											(this.enabled = e.enabled),
											(this.offvec = s.default.vector(e.offvec.x, e.offvec.y)),
											(this.expandHorizontally = void 0 === e.horizontally || e.horizontally),
											(this.openToward = e.openToward),
											(this._leftCount = e.leftCount),
											(this._rightCount = e.rightCount),
											(this.isDoor = void 0 !== e.isDoor ? e.isDoor : l.DrawParams.Ins.sashAsDoor),
											(this.sideSlide = void 0 !== e.sideSlide && e.sideSlide),
											(this.asPush = void 0 !== e.ap && e.ap),
											e.sashes.forEach(function (e, n) {
												n >= t._sashes.length &&
													(t._sashes[n] = new f.FoldSash(
														t,
														new f.WinPolygon(),
														new p.PolyId(),
														f.ShapeType.Sash,
													)),
													t._sashes[n].deserialize(e);
											}),
											this
										);
									}),
									(t.prototype.hitBar = function (e, t) {
										var n,
											r,
											i,
											a,
											s = this.sashes.find(function (t) {
												return t.hitTest(e);
											});
										if (!s) return this.highlight(!1), this.hideAssist(), p.HitResult.None;
										var l = this.sashes
												.map(function (e) {
													return e.mulManager.holes;
												})
												.flat(),
											h = !1;
										try {
											for (var c = o(l), u = c.next(); !u.done; u = c.next()) {
												var f = u.value;
												f.hitTest(e) &&
													(this.highlight(!1), this.hideAssist(), f.hit(e, t), (h = !0));
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												u && !u.done && (r = c.return) && r.call(c);
											} finally {
												if (n) throw n.error;
											}
										}
										if (h) return p.HitResult.GlassHole;
										l.forEach(function (e) {
											return e.highlight(!1, t);
										});
										var d = !1,
											g = p.HitResult.None,
											y = this.sashes
												.map(function (e) {
													return e.sashManager.allSashes;
												})
												.flat();
										try {
											for (var m = o(y), v = m.next(); !v.done; v = m.next()) {
												var w = v.value,
													b = w.hitTest(e),
													S = w.hitBar(e, t);
												b &&
													((d = !0),
													(g = this.properHitResult(S)),
													S === p.HitResult.All && this.emitSashSetting(w, t));
											}
										} catch (e) {
											i = {
												error: e,
											};
										} finally {
											try {
												v && !v.done && (a = m.return) && a.call(m);
											} finally {
												if (i) throw i.error;
											}
										}
										if (d) return g;
										if (this.inactive) return this.highlight(!0), p.HitResult.All;
										if (this.highlighted) {
											this.highlight(!1);
											var _ = this.properHitResult(s.hitBar(e, t));
											return this.emitSashSetting(s, t), _;
										}
										if (!s.inactive) {
											var P = this.properHitResult(s.hitBar(e, t));
											return P === p.HitResult.Sash && this.emitSashSetting(s, t), P;
										}
										if (s.highlighted) return s.hitBar(e, t);
										this.sashes.forEach(function (e) {
											return e.highlight(!1);
										});
										var x = this.properHitResult(s.hitBar(e, t));
										return this.emitSashSetting(s, t), x;
									}),
									(t.prototype.create = function () {
										var e = this;
										if (!this.polygon.isEmpty) {
											var t = this._leftCount + this._rightCount,
												n = this.sashes.map(function (e) {
													return e.fixedWidth;
												}),
												r = this.polygon.partition(t, this.expandHorizontally, n);
											this.expandHorizontally
												? r.sort(function (e, t) {
														return e.box.center.x - t.box.center.x;
												  })
												: r.sort(function (e, t) {
														return e.box.center.y - t.box.center.y;
												  }),
												this._sashes.forEach(function (e) {
													return (e.enabled = !1);
												}),
												r.forEach(function (n, r) {
													var i = r >= e._sashes.length;
													f.SashUtil.adjustEdDock(n, e.polygon, r, t);
													var o = i ? new f.FoldSash(e, n, e.polyId, e.sashType) : e._sashes[r],
														a = o.hardwareManager;
													e.add(o);
													var s = e.sashType !== o.type;
													(o.type = e.sashType),
														s && o.applyFiller(),
														(o.enabled = !0),
														(o.sashNumber = r + 1),
														(a.openDirection = e.calOpenDirection(r)),
														(a.openToward = e.openToward),
														(e.foldWayChanged || i) &&
															o.type !== f.ShapeType.ShadePushSash &&
															((a.handle.dim.position =
																a.openDirection === u.OpenDirection.Left
																	? h.Direction.Left
																	: h.Direction.Right),
															(a.handle.dim.hidden = r !== e.leftCount),
															(a.handle.dimToSash.hidden =
																!l.DrawParams.Ins.dimToSashShown || !(r === e._leftCount - 1)),
															(a.handle.autoOffset = !0),
															(a.handleForFold.edgeIndex = h.EdgeFinder.Instance.findIndex(
																e.expandHorizontally ? h.Direction.Left : h.Direction.Down,
																n,
															)),
															(a.handleForFold.hidden =
																!!e.isDoor ||
																!(
																	Math.abs(r - e.leftCount) % 2 == 0 &&
																	r !== e.leftCount &&
																	0 !== r
																)),
															(a.handleType = e.isDoor ? f.HardwareShape.Handle2 : a.handleType),
															(a.hingeCount = e.isDoor ? 3 : a.hingeCount),
															(a.handle.hidden = e.isDoor
																? !(r === e._leftCount - 1)
																: r < e._leftCount - 1 || r > e._leftCount),
															i && e._sashes.push(o),
															(a.handleForFold.dim.hidden = !0),
															(a.lock.hidden = !0)),
														o.updatePoly(n);
												}),
												(this.foldWayChanged = !1);
										}
									}),
									(t.prototype.highlight = function (e) {
										this.sashes.forEach(function (t) {
											t.highlight(e),
												t.sashManager.allSashes.forEach(function (t) {
													t.highlight(e);
												});
										});
									}),
									(t.prototype.updatePoly = function (e) {
										e && (this.polygon = e.translate(this.offvec)),
											this.clearChildren(),
											this.create();
									}),
									(t.prototype.translate = function (e) {
										this.polygon.translate(e),
											this.sashes.forEach(function (t) {
												return t.translate(e);
											});
									}),
									(t.prototype.hideAssist = function () {
										this.sashes.forEach(function (e) {
											e.hideAssist(),
												e.sashManager.allSashes.forEach(function (e) {
													e.hideAssist();
												});
										});
									}),
									(t.prototype.calOpenDirection = function (e) {
										return e < this._leftCount
											? this.expandHorizontally
												? u.OpenDirection.Left
												: u.OpenDirection.Up
											: this.expandHorizontally
											? u.OpenDirection.Right
											: u.OpenDirection.Down;
									}),
									(t.prototype.emitSashSetting = function (e, t) {
										t.eventBus.emit({
											type: c.EventType.sash_settings,
											payload: new c.SashSettings(e.hardwareManager, t),
										});
									}),
									(t.prototype.properHitResult = function (e) {
										return e === p.HitResult.All ? p.HitResult.Sash : e;
									}),
									Object.defineProperty(t.prototype, 'rightCount', {
										get: function () {
											return this._rightCount;
										},
										set: function (e) {
											(this._rightCount = e), (this.foldWayChanged = !0);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'leftCount', {
										get: function () {
											return this._leftCount;
										},
										set: function (e) {
											(this._leftCount = e), (this.foldWayChanged = !0);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'highlighted', {
										get: function () {
											return this.sashes.every(function (e) {
												return e.highlighted;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'inactive', {
										get: function () {
											return this.sashes.every(function (e) {
												return e.inactive;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.syncHandlesForFold = function (e, t, n) {
										this.sashes.forEach(function (r) {
											return r.hardwareManager.syncHandlesForFold(e, t, n);
										});
									}),
									(t.prototype.slidePositionsCountOfOneSide = function (e) {
										return 0 === e || 1 === e ? 0 : e % 2 == 0 ? e / 2 : (e - 1) / 2;
									}),
									t
								);
							})(f.Shape);
						t.Fold = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							l =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Slide = t.EmptyTrackPosition = void 0);
						var h,
							c = l(n(0)),
							u = n(7),
							p = n(13),
							f = n(9),
							d = n(2),
							g = n(11),
							y = n(6),
							m = n(1);
						!(function (e) {
							(e.None = 'none'), (e.Bottom = 'bottom'), (e.Top = 'top');
						})((h = t.EmptyTrackPosition || (t.EmptyTrackPosition = {})));
						var v = (function (e) {
							function t(t, n, r, i) {
								var o = e.call(this, m.ShapeType.Slide, n) || this;
								return (
									(o.polyId = r),
									(o.enabled = !0),
									(o.coexistType = []),
									(o.offvec = c.default.vector()),
									(o.offvecEnabled = !1),
									(o.expandHorizontally = !0),
									(o.isDoor = u.DrawParams.Ins.sashAsDoor),
									(o.bottomDims = []),
									(o.columnPolygons = []),
									(o.emptyTrackAppended = h.None),
									(o.asPtDoor = !1),
									(o.truncateFrame = !1),
									(o.locksSameHeight = !0),
									(o.beadOverlay = !0),
									(o.theftColumns = []),
									(o.guardColumns = []),
									(o.guards = []),
									(o.thefts = []),
									(o._emptyAreaSize = -1),
									(o._appliedOptionIndex = u.DrawParams.Ins.slideDefaultOption),
									(o._applyNewOption = !1),
									(o._sashes = []),
									(o.singleSashSelect = !1),
									t.add(o),
									void 0 !== i && (o._appliedOptionIndex = i),
									(o.emptyAreaSizelabel = new m.Label(o)),
									(o.emptyAreaSizelabel.align = m.TextAlign.Left),
									(o.truncateFrameLabel = new m.Label(o)),
									(o.truncateFrameLabel.align = m.TextAlign.Right),
									o.create(),
									o.updateTruncateFrameLabel(),
									o.initBottomDims(),
									o.updateThefts(),
									o.updateGuards(),
									u.DrawParams.Ins.InnerEmptyTrackDetect && o.detectInnerEmptyTrack(),
									o
								);
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'serial', {
									get: function () {
										return 0 === this.sashes.length ? '' : this.sashes[0].serial;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'emptyAreaSize', {
									get: function () {
										return this._emptyAreaSize;
									},
									set: function (e) {
										(-1 === e ||
											this.sashes.find(function (e) {
												return -1 === e.fixedWidth;
											})) &&
											(this._emptyAreaSize = e);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'sashTracksCount', {
									get: function () {
										return this.appliedOption.items.length;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'realTracksCount', {
									get: function () {
										return this.sashTracksCount + (this.emptyTrackAppended === h.None ? 0 : 1);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'screenTracksCount', {
									get: function () {
										var e = this.appliedOption,
											t = 0;
										return (
											e.items.forEach(function (e) {
												e.some(function (e) {
													return e && e.fill === m.ShapeType.Screen;
												}) && t++;
											}),
											t
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'appliedOptionIndex', {
									get: function () {
										return this._appliedOptionIndex;
									},
									set: function (e) {
										(this._appliedOptionIndex = e), (this._applyNewOption = !0);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'appliedOption', {
									get: function () {
										return g.SlideOptions.Ins.options[this.appliedOptionIndex];
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'jointWay', {
									get: function () {
										return this.sashes[0].jointWay;
									},
									set: function (e) {
										this.sashes.forEach(function (t) {
											return (t.jointWay = e);
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'highlighted', {
									get: function () {
										return this.sashes.every(function (e) {
											return e.highlighted;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'inactive', {
									get: function () {
										return this.sashes.every(function (e) {
											return e.inactive;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'sashes', {
									get: function () {
										return this._sashes.filter(function (e) {
											return e.enabled;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'sashCount', {
									get: function () {
										var e = this.sashes,
											t = e.filter(function (e) {
												return e.type === m.ShapeType.Sash;
											});
										return 0 === t.length ? e.length : t.length;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'columnCount', {
									get: function () {
										return this.appliedOption.columnsCount;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'fixedWidth', {
									get: function () {
										var e = 0,
											t = [];
										return (
											this.fixedSashes.forEach(function (n) {
												t.some(function (e) {
													return e === n.columnIndex;
												}) || ((e += n.fixedWidth), t.push(n.columnIndex));
											}),
											e
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'remainingWidth', {
									get: function () {
										var e = this.polygon.box;
										return (
											(this.expandHorizontally ? e.xmax - e.xmin : e.ymax - e.ymin) -
											this.fixedWidth
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'fixedColumnsCount', {
									get: function () {
										var e = 0,
											t = [];
										return (
											this.fixedSashes.forEach(function (n) {
												t.some(function (e) {
													return e === n.columnIndex;
												}) || (e++, t.push(n.columnIndex));
											}),
											e
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'fixedSashes', {
									get: function () {
										return this.sashes.filter(function (e) {
											return -1 !== e.fixedWidth;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'pushOpenToward', {
									get: function () {
										var e = this.sashes.find(function (e) {
											return e.pushSashHardwareManager.openDirection !== p.OpenDirection.None;
										});
										return e ? e.pushSashHardwareManager.openToward : void 0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.setFixedWidthForColumn = function (e, t) {
									var n = this,
										r = !!this.sashes.find(function (e) {
											return e.columnIndex !== t && -1 === e.fixedWidth;
										}),
										i = this.emptyAreas.length > 0;
									-1 === e ||
										r ||
										(i && -1 === this.emptyAreaSize) ||
										((this.emptyAreaSize = -1),
										this.sashes
											.filter(function (e) {
												return e.columnIndex !== t;
											})
											.forEach(function (e) {
												(e.fixedWidth = -1),
													(n.bottomDims[e.columnIndex].hidden = !0),
													n.bottomDims[e.columnIndex].updatePoly();
											})),
										this.sashes
											.filter(function (e) {
												return e.columnIndex === t;
											})
											.forEach(function (r) {
												(r.fixedWidth = e),
													(n.bottomDims[t].hidden = -1 === r.fixedWidth),
													n.bottomDims[t].updatePoly();
											});
								}),
								Object.defineProperty(t.prototype, 'selected', {
									get: function () {
										return this.sashes.some(function (e) {
											return e.selected;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'hardwares', {
									get: function () {
										return this.sashes
											.map(function (e) {
												return e.hardwareManager;
											})
											.map(function (e) {
												return e.hardwares;
											})
											.flat();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'hardwaresOnShown', {
									get: function () {
										return this.hardwares.filter(function (e) {
											return !e.hidden;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'sashAssignWay', {
									get: function () {
										return this.appliedOption.serial;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'barOverlapsCount', {
									get: function () {
										return this.appliedOption.barOverlaysCount;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'sashGapsCount', {
									get: function () {
										return this.appliedOption.sashGapsCount;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'pullupEnabled', {
									get: function () {
										return this.sashes[0].hardwareManager.pullupEnabled;
									},
									set: function (e) {
										this.sashes.forEach(function (t) {
											return (t.hardwareManager.pullupEnabled = e);
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'emptyAreas', {
									get: function () {
										return this.appliedOption.items
											.flat()
											.flat()
											.filter(function (e) {
												return e && e.hidden;
											});
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.updatePoly = function (e) {
									e && (this.polygon = e.translate(this.offvec)),
										this.clearChildren(),
										this.create();
									var t = this.emptyAreas.length > 0;
									t &&
										(this.emptyAreaSizelabel.text =
											-1 === this._emptyAreaSize ? '' : this._emptyAreaSize.toString()),
										(this.emptyAreaSizelabel.hidden = !t),
										this.emptyAreaSizelabel.updatePoly(),
										this.updateTruncateFrameLabel(),
										this.updateThefts(),
										this.updateGuards();
								}),
								(t.prototype.updateTruncateFrameLabel = function () {
									if (this.truncateFrame) {
										var e = c.default.point();
										if (!this.polygon.isEmpty) {
											var t = new c.default.Box();
											this.sashes.forEach(function (e) {
												t = t.merge(e.mulManager.fillerManager.fillers.pop().polygon.box);
											});
											var n = this.truncateFrameLabel.fontSize / 2;
											e = c.default.point(t.xmax, t.ymin).translate(c.default.vector(-15, n + 15));
										}
										this.truncateFrameLabel.position = e;
									}
									(this.truncateFrameLabel.text = this.truncateFrame ? '截断外框' : ''),
										this.truncateFrameLabel.updatePoly();
								}),
								(t.prototype.hitBar = function (e, t) {
									var n,
										r,
										i,
										o,
										l = this.sashes.slice(0).reverse();
									l.push.apply(l, a(this.thefts)), l.push.apply(l, a(this.guards));
									var h = l.find(function (t) {
											return t.hitTest(e);
										}),
										c = l.filter(function (t) {
											return t.hitTest(e);
										});
									if (!h)
										return (
											this.highlight(!1),
											this.hideAssist(),
											(this.singleSashSelect = !1),
											d.HitResult.None
										);
									var u = this.sashes
											.map(function (e) {
												return e.mulManager.holes;
											})
											.flat(),
										p = !1;
									try {
										for (var f = s(u), g = f.next(); !g.done; g = f.next()) {
											var y = g.value;
											y.hitTest(e) &&
												(this.highlight(!1), this.hideAssist(), y.hit(e, t), (p = !0));
										}
									} catch (e) {
										n = {
											error: e,
										};
									} finally {
										try {
											g && !g.done && (r = f.return) && r.call(f);
										} finally {
											if (n) throw n.error;
										}
									}
									if (p) return (this.singleSashSelect = !1), d.HitResult.GlassHole;
									u.forEach(function (e) {
										return e.highlight(!1, t);
									});
									var m = !1,
										v = d.HitResult.None,
										w = this.sashes
											.map(function (e) {
												return e.sashManager.allSashes;
											})
											.flat();
									try {
										for (var b = s(w), S = b.next(); !S.done; S = b.next()) {
											var _ = S.value,
												P = _.hitTest(e),
												x = _.hitBar(e, t);
											P &&
												((m = !0),
												(v = this.properHitResult(x)),
												x === d.HitResult.All && this.emitSashSetting(_, t));
										}
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											S && !S.done && (o = b.return) && o.call(b);
										} finally {
											if (i) throw i.error;
										}
									}
									if (m) return v;
									if (this.inactive)
										return this.highlight(!0), (this.singleSashSelect = !1), d.HitResult.All;
									if (this.highlighted && !this.singleSashSelect) {
										this.highlight(!1);
										var D = this.properHitResult(h.hitBar(e, t));
										return (
											this.emitSashGroupSetting(c, c.indexOf(h), t), (this.singleSashSelect = !0), D
										);
									}
									if (
										c.some(function (e) {
											return !e.inactive;
										})
									) {
										var T = this.properHitResult(h.hitBar(e, t));
										return (
											T === d.HitResult.Sash
												? (this.emitSashGroupSetting(c, c.indexOf(h), t),
												  (this.singleSashSelect = !0))
												: (this.singleSashSelect = !1),
											T
										);
									}
									if (h.highlighted) return (this.singleSashSelect = !1), h.hitBar(e, t);
									this.sashes.forEach(function (e) {
										return e.highlight(!1);
									});
									var O = this.properHitResult(h.hitBar(e, t));
									return (
										this.emitSashGroupSetting(c, c.indexOf(h), t), (this.singleSashSelect = !0), O
									);
								}),
								(t.prototype.highlight = function (e) {
									this.sashes.forEach(function (t) {
										t.highlight(e),
											t.sashManager.allSashes.forEach(function (t) {
												t.highlight(e);
											});
									});
								}),
								(t.prototype.translate = function (e) {
									this.polygon.translate(e),
										this.sashes.forEach(function (t) {
											return t.translate(e);
										});
								}),
								(t.prototype.hideAssist = function () {
									this.sashes.forEach(function (e) {
										e.hideAssist(),
											e.sashManager.allSashes.forEach(function (e) {
												e.hideAssist();
											});
									});
								}),
								(t.prototype.delete = function () {
									this.sashes.forEach(function (e) {
										return e.delete();
									});
								}),
								(t.prototype.toJSON = function () {
									var e = [];
									return (
										this.sashes.forEach(function (t) {
											return e.push(t.toJSON());
										}),
										{
											type: this.type,
											polyId: this.polyId.toJSON(),
											enabled: this.enabled,
											offvec: this.offvec.toJSON(),
											appliedOptionIndex: this._appliedOptionIndex,
											emptyTrackAppended: this.emptyTrackAppended,
											isDoor: this.isDoor,
											ptd: this.asPtDoor,
											eas: this._emptyAreaSize,
											sashes: e,
											tf: this.truncateFrame,
											tcs: this.theftColumns,
											gcs: this.guardColumns,
											gs: this.guards.map(function (e) {
												return e.toJSON();
											}),
											bds: this.bottomDims.map(function (e) {
												return e.toJSON();
											}),
										}
									);
								}),
								(t.prototype.deserialize = function (e) {
									var t = this;
									if (
										((this.polyId = d.PolyId.createByJson(e.polyId)),
										(this.enabled = e.enabled),
										(this.offvec = c.default.vector(e.offvec.x, e.offvec.y)),
										(this._appliedOptionIndex = e.appliedOptionIndex),
										(this.emptyTrackAppended = e.emptyTrackAppended
											? e.emptyTrackAppended
											: h.None),
										(this.isDoor = void 0 !== e.isDoor ? e.isDoor : u.DrawParams.Ins.sashAsDoor),
										(this.asPtDoor = void 0 !== e.ptd && e.ptd),
										(this._emptyAreaSize = void 0 !== e.eas ? e.eas : -1),
										(this.truncateFrame = void 0 !== e.tf && e.tf),
										void 0 !== e.tcs && (this.theftColumns = e.tcs),
										void 0 !== e.gcs && (this.guardColumns = e.gcs),
										void 0 !== e.bds)
									)
										this.bottomDims = e.bds.map(function (e, n) {
											var r = new m.SlideBottomDim(t, n);
											return r.deserialize(e), r;
										});
									else
										for (var n = this.bottomDims.length; n < this.appliedOption.columnsCount; n++)
											this.bottomDims.push(new m.SlideBottomDim(this, n, !0));
									return (
										e.sashes.forEach(function (e, n) {
											n >= t._sashes.length &&
												(t._sashes[n] = new m.SlideSash(
													t,
													new m.WinPolygon(),
													new d.PolyId(),
													m.ShapeType.Sash,
												)),
												t._sashes[n].deserialize(e);
										}),
										e.gs &&
											e.gs.forEach(function (e, n) {
												n >= t.guards.length &&
													(t.guards[n] = new m.GuardSash(t, new m.WinPolygon(), new d.PolyId())),
													t.guards[n].deserialize(e);
											}),
										this
									);
								}),
								(t.prototype.trackIndexToNo = function (e) {
									return (
										this.appliedOption.tracksCount -
										e +
										(this.emptyTrackAppended === h.Bottom ? 1 : 0)
									);
								}),
								(t.prototype.create = function () {
									var e = this;
									if (!this.polygon.isEmpty) {
										var t = this.appliedOption;
										t.fixedSashes = this._applyNewOption ? [] : this.fixedSashes;
										var n = this.emptyAreas;
										if (-1 !== this._emptyAreaSize) {
											var r = n.length,
												i = this._emptyAreaSize / r;
											n.forEach(function (e) {
												return (e.width = i);
											});
										} else
											n.forEach(function (e) {
												return (e.width = void 0);
											});
										var o = this.topFrame.profileSizeManager,
											a = this.polygon.partitionSlideBySpliter(
												t.toSlideComp(),
												o.interlock + (this.beadOverlay ? o.bead : 0),
												!t.isVerticalSlide,
											);
										(this.columnPolygons = this.fetchColumnPolygons(a)),
											(this.expandHorizontally = !t.isVerticalSlide);
										var s = 0;
										this._sashes.forEach(function (e) {
											return (e.enabled = !1);
										});
										var l,
											h = t.items[0].length,
											c = [];
										t.items.forEach(function (n, r) {
											n.forEach(function (n, i) {
												if (n) {
													var o = a[r][i];
													if (o)
														if (n.hidden) {
															var p = o.polygon.box.low;
															if (void 0 === l || p.x < l) {
																l = p.x;
																var f = e.emptyAreaSizelabel.fontSize;
																e.emptyAreaSizelabel.position = p.translate(f / 2, f);
															}
														} else {
															m.SashUtil.adjustEdDock(
																o.polygon,
																e.polygon,
																i,
																h,
																t.isVerticalSlide,
															);
															var d = s >= e._sashes.length,
																v = e.itemTypeToSashType(n.fill),
																w = d
																	? new m.SlideSash(e, o.polygon, e.polyId, v, r, i)
																	: e._sashes[s];
															e.add(w);
															var b = v !== w.type;
															if (
																((w.type = v),
																b && w.applyFiller(),
																(w.trackIndex = r),
																(w.columnIndex = i),
																(w.enabled = !0),
																(w.sashNumber = e.countSashNumber(r, i)),
																(e._applyNewOption && !d) || d)
															) {
																(w.isFixed = n.isFixed),
																	(w.hardwareManager.openDirection = n.openDirection),
																	(w.hardwareManager.pullupEnabled = !1),
																	(w.attrs.lockCode = u.DrawParams.Ins.slideLockCode),
																	(w.attrs.lockName = u.DrawParams.Ins.slideLockName);
																var S = u.DrawParams.Ins.slideLockType === y.LockType.Crescent;
																w.hardwareManager.locks.forEach(function (e) {
																	return w.remove(e);
																}),
																	(w.hardwareManager.locks = []),
																	n.defaultLocks.forEach(function (e) {
																		var t = m.Handle.lock(w.hardwareManager);
																		(t.edgeIndex = g.EdgeFinder.Instance.findIndex(e, o.polygon)),
																			n.lockHidden
																				? ((t.hidden = !0),
																				  (t.dim.hidden = !0),
																				  (t.dimToSash.hidden = !0))
																				: ((t.hidden = S),
																				  (t.dim.hidden = !u.DrawParams.Ins.dimToGroundShown),
																				  (t.dimToSash.hidden = !u.DrawParams.Ins.dimToSashShown)),
																			w.hardwareManager.locks.push(t);
																	}),
																	w.hardwareManager.lock2s.forEach(function (e) {
																		return w.remove(e);
																	}),
																	(w.hardwareManager.lock2s = []),
																	n.crescentLocks.forEach(function (e) {
																		var t = m.Handle.lock2(w.hardwareManager);
																		(t.edgeIndex = g.EdgeFinder.Instance.findIndex(e, o.polygon)),
																			n.lockHidden
																				? ((t.hidden = !0),
																				  (t.dim.hidden = !0),
																				  (t.dimToSash.hidden = !0))
																				: ((t.hidden = !S),
																				  (t.dim.hidden = !u.DrawParams.Ins.dimToGroundShown),
																				  (t.dimToSash.hidden = !u.DrawParams.Ins.dimToSashShown)),
																			w.hardwareManager.lock2s.push(t);
																	}),
																	(w.hardwareManager.handleType = m.HardwareShape.HandleForSlide),
																	(w.hardwareManager.handleForSlide.hidden = !0);
																var _ = w.hardwareManager.handleForSlide;
																(_.edgeIndex = g.EdgeFinder.Instance.findIndex(
																	n.lockDirection,
																	o.polygon,
																)),
																	(_.hidden = !0),
																	(w.jointWay = u.DrawParams.Ins.sashEdgeJointWay),
																	(w.fixedWidth = -1);
															}
															d && e._sashes.push(w),
																c.push({
																	partitionPolygon: o.polygon.clone(),
																	isNew: d,
																}),
																s++;
														}
												}
											});
										}),
											c.forEach(function (t, n) {
												var r = e._sashes[n];
												((e._applyNewOption && !t.isNew) || t.isNew) &&
													r.frameManager.initProfileSize(),
													r.updatePoly(t.partitionPolygon);
											}),
											this.oneDimOnlyForHardwares(this.hardwaresOnShown),
											this._applyNewOption && this.initBottomDims(),
											this.bottomDims.forEach(function (e) {
												return e.updatePoly();
											}),
											this._applyNewOption &&
												u.DrawParams.Ins.InnerEmptyTrackDetect &&
												this.detectInnerEmptyTrack(),
											this._applyNewOption && (this._applyNewOption = !1);
									}
								}),
								(t.prototype.detectInnerEmptyTrack = function () {
									var e = this.sashes.filter(function (e) {
										return e.type === m.ShapeType.Sash;
									});
									this.emptyTrackAppended =
										e.length > 0 && e.length === this.sashes.length ? h.Bottom : h.None;
								}),
								(t.prototype.initBottomDims = function () {
									this.bottomDims.slice(this.appliedOption.columnsCount).forEach(function (e) {
										return (e.hidden = !0);
									});
									for (var e = 0; e < this.appliedOption.columnsCount; e++)
										e >= this.bottomDims.length
											? this.bottomDims.push(new m.SlideBottomDim(this, e, !0))
											: (this.bottomDims[e].hidden = !0);
								}),
								(t.prototype.itemTypeToSashType = function (e) {
									return e === m.ShapeType.Shade
										? m.ShapeType.ShadePushSash
										: e === m.ShapeType.Screen
										? m.ShapeType.Screen
										: m.ShapeType.Sash;
								}),
								(t.prototype.countSashNumber = function (e, t) {
									var n = 0;
									return (
										this.appliedOption.items.forEach(function (r, i) {
											r.forEach(function (r, o) {
												void 0 !== r && (r.hidden || o > t || (o === t && i > e) || n++);
											});
										}),
										n
									);
								}),
								(t.prototype.oneDimOnlyForHardwares = function (e) {
									e
										.filter(function (e) {
											return !e.dim.hidden;
										})
										.forEach(function (e, t) {
											(e.dim.hidden = 0 !== t), e.dim.updatePoly();
										}),
										e
											.filter(function (e) {
												return !e.dimToSash.hidden;
											})
											.forEach(function (e, t) {
												(e.dimToSash.hidden = 0 !== t), e.dimToSash.updatePoly();
											});
								}),
								(t.prototype.emitSashGroupSetting = function (e, t, n) {
									var r = [];
									e.forEach(function (e) {
										e instanceof m.SlideSash
											? r.push(new y.SashSettings(e.hardwareManager, n))
											: e instanceof m.AntiTheft && r.push(new y.AntiTheftSettings(e, n));
									}),
										n.eventBus.emit({
											type: y.EventType.sash_group_settings,
											payload: new y.SashGroupSettings(r, t, n),
										});
								}),
								(t.prototype.emitSashSetting = function (e, t) {
									t.eventBus.emit({
										type: y.EventType.sash_settings,
										payload: new y.SashSettings(e.hardwareManager, t),
									});
								}),
								(t.prototype.properHitResult = function (e) {
									return e === d.HitResult.All ? d.HitResult.Sash : e;
								}),
								(t.prototype.syncLocks = function (e, t, n) {
									var r = e.tangentInStart();
									this.sashes.forEach(function (e) {
										e.hardwareManager.locks.forEach(function (i) {
											if (i.edge) {
												var o = i.edge.tangentInStart(),
													a = e.hardwareManager.isVertical ? r.x * o.x < 0 : r.y * o.y < 0;
												(i.percentOffset = a ? 1 - t : t), i.updatePoly(), i.draw(n);
											}
										});
									});
								}),
								(t.prototype.syncHandles = function (e, t, n) {
									var r = e.tangentInStart();
									this.sashes.forEach(function (e) {
										var i = e.hardwareManager.handleForSlide;
										if (i.edge) {
											var o = i.edge.tangentInStart(),
												a = e.hardwareManager.isVertical ? r.x * o.x < 0 : r.y * o.y < 0;
											(i.percentOffset = a ? 1 - t : t), i.updatePoly(), i.draw(n);
										}
									});
								}),
								(t.prototype.fetchColumnPolygons = function (e) {
									if (0 === e.length) return [];
									for (var t = [], n = e.length, r = e[0].length, i = 0; i < r; i++)
										for (var o = 0; o < n; o++) {
											var a = e[o][i];
											if (a) {
												t.push(a.polygon);
												break;
											}
										}
									return t;
								}),
								(t.prototype.updateThefts = function () {
									var e = this,
										t = this.thefts.splice(this.theftColumns.length);
									this.theftColumns.forEach(function (t, n) {
										var r = e.sashes.find(function (e) {
											return e.columnIndex === t;
										});
										if (r) {
											var i = e.thefts[n];
											i
												? (e.add(i), i.updatePoly(r.polygon))
												: ((i = new m.AntiTheft(e, r.polygon, e.polyId, function () {})),
												  (e.thefts[n] = i));
										}
									}),
										t.forEach(function (e) {
											e.clearChildren(), e.hideAssist(), e.remove();
										});
								}),
								(t.prototype.updateGuards = function () {
									var e = this,
										t = this.guards.splice(this.guardColumns.length);
									this.guardColumns.forEach(function (t, n) {
										var r = e.sashes.find(function (e) {
											return e.columnIndex === t;
										});
										if (r) {
											var i = r.polygon,
												o = e.topFrame.profileSizeManager.interlock;
											r.interlockOnLeft && e.resizePolySide(i, g.Direction.Left, -o),
												r.interlockOnRight && e.resizePolySide(i, g.Direction.Right, -o);
											var a = e.guards[n];
											a
												? (e.add(a), a.updatePoly(r.polygon))
												: ((a = new m.GuardSash(e, r.polygon, e.polyId)), (e.guards[n] = a));
										}
									}),
										t.forEach(function (e) {
											e.clearChildren(), e.hideAssist(), e.remove();
										});
								}),
								(t.prototype.resizePolySide = function (e, t, n) {
									var r = e.edges,
										i = g.EdgeFinder.Instance.findIndex2(t, e);
									(r[i] = r[i].translate(
										c.default.vector(n * (t === g.Direction.Left ? -1 : 1), 0),
									)),
										f.Frametify.edgeIntersection(r, (i - 1 + r.length) % r.length),
										f.Frametify.edgeIntersection(r, i),
										e.setEdges(r);
								}),
								Object.defineProperty(t.prototype, 'Zindex', {
									get: function () {
										return (
											this.truncateFrameLabel.vshapes.forEach(function (e) {
												return e.moveToTop();
											}),
											this.thefts.forEach(function (e) {
												return e.gshape.moveToBottom();
											}),
											this.guards.forEach(function (e) {
												return e.gshape.moveToBottom();
											}),
											this.guards.length > 0 && this.gshape.moveToBottom(),
											-1
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(m.Shape);
						t.Slide = v;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerCreator = void 0);
						var r = n(1),
							i = (function () {
								function e() {
									(this.creator = {}),
										(this.creator[r.ShapeType.Glass] = function (e, t) {
											return new r.Glass(e, t);
										}),
										(this.creator[r.ShapeType.Screen] = function (e, t) {
											return new r.ScreenFiller(e, t);
										}),
										(this.creator[r.ShapeType.Shade] = function (e, t) {
											return new r.Shade(e, t);
										}),
										(this.creator[r.ShapeType.Panel] = function (e, t) {
											return new r.Panel(e, t);
										}),
										(this.creator[r.ShapeType.None] = function (e, t) {
											return new r.Empty(e, t);
										});
								}
								return (
									Object.defineProperty(e, 'Ins', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.create = function (e, t, n, i) {
										void 0 === i && (i = r.ShapeType.Glass);
										var o = e ? e.type : i,
											a = this.creator[o](t, n);
										return e && a.deserialize(e), a;
									}),
									e
								);
							})();
						t.FillerCreator = i;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HardwareShape = t.HardwareShapeCreator = void 0);
						var a,
							s = o(n(0)),
							l = n(7),
							h = n(2),
							c = n(1),
							u = (function () {
								function e() {
									this.shapeMap = new Map([
										[a.Hinge, this.hinge.bind(this)],
										[a.HingePro, this.hingePro.bind(this)],
										[a.HingeOnCircle, this.hingeOnCircle.bind(this)],
										[a.EndpointHinge, this.endpointHinge.bind(this)],
										[a.Handle, this.handle.bind(this)],
										[a.Handle2, this.handle2.bind(this)],
										[a.Handle3, this.handle3.bind(this)],
										[a.Handle4, this.handle4.bind(this)],
										[a.Handle5, this.handle5.bind(this)],
										[a.Handle6, this.handle6.bind(this)],
										[a.Handle7, this.handle7.bind(this)],
										[a.CommercialHandle, this.commercialHandle.bind(this)],
										[a.CommercialHandle2, this.commercialHandle2.bind(this)],
										[a.CommercialHandle3, this.commercialHandle3.bind(this)],
										[a.CommercialHandle4, this.commercialHandle4.bind(this)],
										[a.CommercialHandle5, this.commercialHandle5.bind(this)],
										[a.CommercialHandle6, this.commercialHandle6.bind(this)],
										[a.CommercialHandle7, this.commercialHandle7.bind(this)],
										[a.CommercialHandle8, this.commercialHandle8.bind(this)],
										[a.CommercialHandle9, this.commercialHandle9.bind(this)],
										[a.CommercialHandle10, this.commercialHandle10.bind(this)],
										[a.CommercialHandle11, this.commercialHandle11.bind(this)],
										[a.CommercialHandle12, this.commercialHandle12.bind(this)],
										[a.CommercialHandle13, this.commercialHandle13.bind(this)],
										[a.CommercialHandle14, this.commercialHandle14.bind(this)],
										[a.HandleForFold, this.handleForFold.bind(this)],
										[a.HandleForSlide, this.handleForSlide.bind(this)],
										[a.HandleForSlide2, this.handleForSlide2.bind(this)],
										[a.HandleForSlide3, this.handleForSlide3.bind(this)],
										[a.KfcHandle, this.kfcHandle.bind(this)],
										[a.CrossHandle, this.crossHandle.bind(this)],
										[a.Lock, this.lock.bind(this)],
										[a.Lock2, this.lock2.bind(this)],
										[a.Lock3, this.lock3.bind(this)],
									]);
								}
								return (
									(e.prototype.get = function (e) {
										return this.shapeMap.get(e);
									}),
									Object.defineProperty(e.prototype, 'windowHandles', {
										get: function () {
											return [a.Handle, a.Handle6];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'doorHandles', {
										get: function () {
											return [
												a.Handle2,
												a.Handle3,
												a.Handle4,
												a.Handle5,
												a.Handle7,
												a.CommercialHandle,
												a.CommercialHandle2,
												a.CommercialHandle3,
												a.CommercialHandle4,
												a.CommercialHandle5,
												a.CommercialHandle6,
												a.CommercialHandle7,
												a.CommercialHandle8,
												a.CommercialHandle9,
												a.CommercialHandle10,
												a.CommercialHandle11,
												a.CommercialHandle12,
												a.CommercialHandle13,
												a.CommercialHandle14,
												a.CrossHandle,
											];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e, 'Ins', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.hinge = function (e, t) {
										return [this._hingePart1(e, t)];
									}),
									(e.prototype.hingePro = function (e, t) {
										var n = 0.8 * 12 * l.DrawParams.Ins.hingeRatio,
											r = 6 * n,
											i = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, r),
													[s.default.vector(n, 0), -n / 4],
													s.default.vector(0, -r),
													[s.default.vector(-n, 0), -n / 4],
													s.default.vector(0, (r / 3) * 2),
													s.default.vector(n, 0),
													s.default.vector(0, -r / 3),
													s.default.vector(-n, 0),
												],
												s.default.point().translate(s.default.vector(-n / 2, -r / 2)),
												!1,
											);
										return (
											i.translate(s.default.vector(e.x, e.y)),
											i.rotate(t.rotate90CCW().slope, e),
											[i]
										);
									}),
									(e.prototype.endpointHinge = function (e, t) {
										var n = t.slope === (Math.PI / 4) * 5 || t.slope === (Math.PI / 4) * 7,
											r = t.slope === (Math.PI / 4) * 3 || t.slope === (Math.PI / 4) * 5,
											i = this._rect(40, 20).translate(s.default.vector(20, 10)),
											o = [this._rect(40, 50).translate(s.default.vector(20, -25))];
										return (
											n || o.push(i),
											o.forEach(function (t) {
												var i = new s.default.Matrix();
												n || (i = i.scale(1, -1)),
													r && (i = i.scale(-1, 1)),
													t.transform(i),
													t.translate(s.default.vector(s.default.point(), e));
											}),
											o
										);
									}),
									(e.prototype.hingeOnCircle = function (e, t) {
										var n = 0.8 * 12 * l.DrawParams.Ins.hingeRatio,
											r = t.rotate90CW().normalize(),
											i = r.rotate90CCW(),
											o = new c.WinPolygon(),
											a = e.translate(r.multiply(1.75 * n)).translate(i.multiply(n)),
											h = a.translate(i.invert().multiply(2 * n));
										o.add(s.default.segment(a, h));
										var u = h.translate(r.invert().multiply(n));
										o.add(s.default.segment(h, u));
										var p = u.translate(i.multiply(2 * n));
										o.add(s.default.segment(u, p)), o.doneSmart();
										var f = o.clone();
										return f.rotate(Math.PI, e), [o, f, this._hingePart1(e, r, !0)];
									}),
									(e.prototype.handle = function (e, t) {
										return [this._handlePart1(e, t), this._handlePart2(e, t)];
									}),
									(e.prototype.handle2 = function (e, t, n, r) {
										s.default.ORIENTATION.CCW;
										var i = !1,
											o = !1;
										s.default.Utils.EQ_0(Math.PI / 2 - t.slope)
											? (i = !0)
											: s.default.Utils.EQ_0(1.5 * Math.PI - t.slope) ||
											  (s.default.Utils.EQ_0(t.slope) ? (o = !0) : ((o = !0), (i = !0)));
										var a = this._roundRect(40, 150);
										o && a.rotate(Math.PI / 2, s.default.point()),
											a.translate(s.default.vector(s.default.point(), e));
										var l = this._rectWithRadius(30, 130);
										l.rotate(t.slope, s.default.point());
										var h = o
											? s.default.vector(i ? 20 : -20, i ? 55 : -55)
											: s.default.vector(i ? 55 : -55, -20);
										return (
											l.translate(h), l.translate(s.default.vector(s.default.point(), e)), [a, l]
										);
									}),
									(e.prototype.handle3 = function (e, t) {
										return i([this._handlePart1(e, t)], this._handlePart3(e, t));
									}),
									(e.prototype.commercialHandle = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = n,
											i = r / 6,
											o = [],
											a = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, r),
													[s.default.vector(45, 0), -10],
													s.default.vector(0, -r),
													[s.default.vector(-45, 0), -10],
													[s.default.vector(45, 0), -10],
												],
												s.default.point(-22.5, -r / 2),
												!1,
											);
										t.y > 0 && a.rotate(Math.PI, s.default.point()),
											a.translate(s.default.vector(-92.5, 0)),
											o.push(a);
										var l = c.PolygonCreator.Ins.joinRelativePro(
											[
												[s.default.vector(0, 45), 10],
												s.default.vector(-70, 0),
												s.default.vector(0, -45),
											],
											s.default.point(0, -22.5),
										);
										l.translate(s.default.vector(0, -(r / 2 - i))), o.push(l);
										var h = l.clone();
										return (
											h.translate(s.default.vector(0, r - 2 * i)),
											o.push(h),
											o.forEach(function (n) {
												n.rotate(t.rotate90CCW().slope, s.default.point()),
													n.translate(s.default.vector(s.default.point(), e));
											}),
											o
										);
									}),
									(e.prototype.commercialHandle2 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = n,
											i = 0.8 * r,
											o = (r - i) / 2,
											a = o - 25,
											l = [],
											h = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(-90, 0),
													s.default.vector(0, o),
													s.default.vector(40, 0),
													s.default.vector(0, -a),
													s.default.vector(50, 0),
												],
												s.default.point(0, -r / 2),
											);
										l.push(h);
										var u = this._rect(40, i);
										u.translate(s.default.vector(-70, 0)), l.push(u);
										var p = this._mirror(h);
										return (
											l.push(p),
											l.forEach(function (n) {
												n.rotate(t.rotate90CCW().slope, s.default.point()),
													n.translate(s.default.vector(s.default.point(), e));
											}),
											l
										);
									}),
									(e.prototype.commercialHandle3 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = (Math.PI / 180) * 45,
											i = 24 * Math.cos(r),
											o = 24 * Math.sin(r),
											a = n,
											l = 0.7 * a,
											h = (a - l) / 2 - 50,
											u = (a - l) / 2 - 2 * o - 40,
											p = 50 + i - (40 - i),
											f = [],
											d = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(-50, 50),
													s.default.vector(0, h),
													s.default.vector(p, 0),
													s.default.vector(0, -u),
													s.default.vector(40, -40),
													[s.default.vector(2 * -i, 2 * -o), -24],
												],
												s.default.point(-i, -a / 2),
												!1,
											);
										f.push(d);
										var g = this._rect(p, l);
										g.translate(s.default.vector(-40 - p / 2 + i, 0)), f.push(g);
										var y = this._mirror(d);
										return (
											f.push(y),
											f.forEach(function (n) {
												n.rotate(t.rotate90CCW().slope, s.default.point()),
													n.translate(s.default.vector(s.default.point(), e));
											}),
											f
										);
									}),
									(e.prototype.commercialHandle4 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = n + 500,
											i = r / 6,
											o = [],
											a = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, r),
													s.default.vector(45, 0),
													s.default.vector(0, -r),
													s.default.vector(-45, 0),
													s.default.vector(45, 0),
												],
												s.default.point(-22.5, -r / 2),
												!1,
											);
										a.translate(s.default.vector(-57.5, 0)), o.push(a);
										var l = c.PolygonCreator.Ins.joinRelativePro(
											[s.default.vector(0, 70), s.default.vector(-35, 0), s.default.vector(0, -70)],
											s.default.point(0, -35),
										);
										l.translate(s.default.vector(0, -(r / 2 - i))), o.push(l);
										var h = l.clone();
										return (
											h.translate(s.default.vector(0, r - 2 * i)),
											o.push(h),
											o.forEach(function (n) {
												n.rotate(t.rotate90CCW().slope, s.default.point()),
													n.translate(s.default.vector(s.default.point(), e));
											}),
											o
										);
									}),
									(e.prototype.commercialHandle5 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = n,
											i = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(-100, 0),
													s.default.vector(0, r),
													s.default.vector(100, 0),
													s.default.vector(0, -30),
													s.default.vector(-70, 0),
													s.default.vector(0, -(r - 60)),
													s.default.vector(70, 0),
												],
												s.default.point(0, -r / 2),
											);
										return (
											i.rotate(t.rotate90CCW().slope, s.default.point()),
											i.translate(s.default.vector(s.default.point(), e)),
											[i]
										);
									}),
									(e.prototype.commercialHandle6 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = 48 * Math.sin((Math.PI / 180) * 45),
											i = 226 - r,
											o = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(-226, 226),
													[s.default.vector(0, 48), -12],
													s.default.vector(226, 226),
													[s.default.vector(r, -r), -24],
													s.default.vector(-i, -i),
													[s.default.vector(0, -48), 12],
													s.default.vector(i, -i),
													[s.default.vector(-r, -r), -24],
												],
												s.default.point(-r / 2, -250),
												!1,
											);
										return (
											o.rotate(t.rotate90CCW().slope, s.default.point()),
											o.translate(s.default.vector(s.default.point(), e)),
											[o]
										);
									}),
									(e.prototype.commercialHandle7 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = (Math.PI / 180) * 30,
											i = 40 * Math.sin(r),
											o = 40 * Math.cos(r),
											a = c.PolygonCreator.Ins.joinRelativePro(
												[
													[s.default.vector(0, 500), -78],
													[s.default.vector(o, -i), -20],
													[s.default.vector(0, -(500 - 2 * i)), 73],
													[s.default.vector(-o, -i), -20],
												],
												s.default.point(-o, -250),
											);
										return (
											a.rotate(t.rotate90CCW().slope, s.default.point()),
											a.translate(s.default.vector(s.default.point(), e)),
											[a]
										);
									}),
									(e.prototype.commercialHandle8 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = c.PolygonCreator.Ins.joinRelativePro(
											[
												s.default.vector(-70, 0),
												[s.default.vector(-30, 30), -7.5],
												s.default.vector(0, 240),
												[s.default.vector(30, 30), -7.5],
												s.default.vector(70, 0),
												[s.default.vector(0, -30), -15],
												s.default.vector(-60, 0),
												[s.default.vector(-10, -10), 2.5],
												s.default.vector(0, -220),
												[s.default.vector(10, -10), 2.5],
												s.default.vector(60, 0),
												[s.default.vector(0, -30), -15],
											],
											s.default.point(0, -150),
										);
										return (
											r.rotate(t.rotate90CCW().slope, s.default.point()),
											r.translate(s.default.vector(s.default.point(), e)),
											[r]
										);
									}),
									(e.prototype._mirror = function (e) {
										var t = e.clone(),
											n = new s.default.Matrix();
										(n = n.scale(1, -1)), t.transform(n);
										var r = t.edges.map(function (e) {
											return e instanceof s.default.Segment
												? e
												: s.default.arc(
														e.center,
														e.r.valueOf(),
														e.startAngle,
														e.endAngle,
														e.counterClockwise,
												  );
										});
										return new c.WinPolygon(r);
									}),
									(e.prototype.crossHandle = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = n + 40,
											i = c.PolygonCreator.Ins.joinRelativePro(
												[
													[s.default.vector(60, 80), -20],
													s.default.vector(r - 120, 0),
													[s.default.vector(60, -80), -20],
													[s.default.vector(-40, 0), -10],
													[s.default.vector(-40, 50), 12],
													s.default.vector(-(r - 160), 0),
													[s.default.vector(-40, -50), 12],
													[s.default.vector(-40, 0), -10],
												],
												s.default.point(-r / 2, 0),
												!1,
											),
											o = this._repeat(i);
										return (
											o.reverse().forEach(function (n) {
												n.rotate(t.slope, s.default.point()),
													n.translate(s.default.vector(s.default.point(), e));
											}),
											o
										);
									}),
									(e.prototype.commercialHandle9 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = n + 10,
											i = c.PolygonCreator.Ins.joinRelativePro(
												[s.default.vector(r, 0), s.default.vector(0, 38), s.default.vector(-r, 0)],
												s.default.point(-r / 2, -19),
											);
										return (
											i.rotate(t.slope, s.default.point()),
											i.translate(s.default.vector(s.default.point(), e)),
											[i]
										);
									}),
									(e.prototype.commercialHandle10 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = n + -20,
											i = this._stick(r, 38);
										return (
											i.rotate(t.slope, s.default.point()),
											i.translate(s.default.vector(s.default.point(), e)),
											[i]
										);
									}),
									(e.prototype.commercialHandle11 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = n + -20,
											i = this._stick(r),
											o = this._repeat(i, 2, 100);
										return (
											o.reverse().forEach(function (n) {
												n.rotate(t.slope, s.default.point()),
													n.translate(s.default.vector(s.default.point(), e));
											}),
											o
										);
									}),
									(e.prototype.commercialHandle12 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = n + -28,
											i = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, 200),
													s.default.vector(26, 0),
													s.default.vector(0, -200),
												],
												s.default.point(-(26 + r / 2), -100),
											),
											o = i.clone();
										o.translate(s.default.vector(26 + r, 0));
										var a = [
											i,
											o,
											c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, 160),
													s.default.vector(r, 0),
													s.default.vector(0, -160),
												],
												s.default.point(-r / 2, -80),
											),
										];
										return (
											a.reverse().forEach(function (n) {
												n.rotate(t.slope, s.default.point()),
													n.translate(s.default.vector(s.default.point(), e));
											}),
											a
										);
									}),
									(e.prototype.commercialHandle13 = function (e, t) {
										var n = s.default.vector(200, 0),
											r = this._stick(300, 50)
												.rotate(Math.PI / 2, s.default.point())
												.translate(n);
										r.rotate(t.rotate90CW().slope, s.default.point()),
											r.translate(s.default.vector(s.default.point(), e));
										var o = [s.default.point(0, 150), s.default.point(0, -150)].map(function (r) {
											r = r.translate(n).rotate(t.rotate90CW().slope, s.default.point());
											var i = new c.WinPolygon();
											return (
												i.addCircle(r, 45), i.translate(s.default.vector(s.default.point(), e)), i
											);
										});
										return i(o, [r]);
									}),
									(e.prototype.commercialHandle14 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = s.default.vector(150, 0),
											i = this._rect(n, 50)
												.rotate(Math.PI / 2, s.default.point())
												.translate(r);
										return (
											i.rotate(t.rotate90CW().slope, s.default.point()),
											i.translate(s.default.vector(s.default.point(), e)),
											[i]
										);
									}),
									(e.prototype.handle4 = function (e, t, n) {
										void 0 === n && (n = -1);
										var r = s.default.vector(200, 0),
											o = s.default
												.point()
												.translate(r)
												.rotate(t.rotate90CW().slope, s.default.point()),
											a = [50, 40].map(function (t) {
												var n = new c.WinPolygon();
												return (
													n.addCircle(o, t), n.translate(s.default.vector(s.default.point(), e)), n
												);
											});
										return i(a);
									}),
									(e.prototype.handle5 = function (e, t, n, r) {
										void 0 === n && (n = -1), void 0 === r && (r = s.default.vector());
										var i = s.default.vector(35, 0),
											o = this._rectWithRadius(70, 50, 5, 0.5);
										o.translate(i);
										var a = s.default.vector(80, 0),
											l = this._rectWithRadius(100, 20, 5, 0.5);
										return (
											l.translate(a),
											[o, l].forEach(function (n) {
												n.rotate(t.rotate90CCW().slope, s.default.point()),
													s.default.Utils.EQ_0(r.y) && r.x > 0 && n.flipX(),
													s.default.Utils.EQ_0(r.x) && r.y < 0 && n.flipY(),
													n.translate(s.default.vector(s.default.point(), e));
											}),
											[o, l]
										);
									}),
									(e.prototype.handle6 = function (e, t, n) {
										return (
											void 0 === n && (n = -1), [this._handlePart4(e, t), this._handlePart2(e, t)]
										);
									}),
									(e.prototype.handle7 = function (e, t, n, r) {
										void 0 === n && (n = -1), void 0 === r && (r = s.default.vector());
										var i = this._rect(90, 160),
											o = new c.WinPolygon();
										o.addCircle(s.default.point(0, -35), 25);
										var a = new c.WinPolygon();
										a.addCircle(s.default.point(0, 35), 25);
										var l = this._roundRect(20, 100, 10);
										l.rotate(Math.PI / 2, s.default.point()),
											l.translate(s.default.vector(-40, -35));
										var h = this._roundRect(10, 24, 5);
										h.translate(s.default.vector(0, 35));
										var u = [i, o, a, l, h];
										return (
											u.forEach(function (n) {
												n.translate(s.default.vector(-45, 0)),
													n.rotate(t.slope - Math.PI / 2, s.default.point()),
													s.default.Utils.EQ_0(r.y) && r.x > 0
														? n.flipX()
														: s.default.Utils.EQ_0(r.x) && r.y < 0 && n.flipY(),
													n.translate(s.default.vector(s.default.point(), e));
											}),
											{
												shapes: u,
												useProfileColor: [!0],
											}
										);
									}),
									(e.prototype.handleForFold = function (e, t) {
										var n = [],
											r = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, 10),
													[s.default.vector(5, 5), -1],
													s.default.vector(30, 0),
													[s.default.vector(5, 5), 1],
													s.default.vector(0, 90),
													[s.default.vector(-5, 5), 1],
													s.default.vector(-30, 0),
													[s.default.vector(-5, 5), -1],
													s.default.vector(0, 10),
													[s.default.vector(5, 5), -1],
													s.default.vector(45, 0),
													[s.default.vector(10, -10), -2],
													s.default.vector(0, -120),
													[s.default.vector(-10, -10), -2],
													s.default.vector(-45, 0),
													[s.default.vector(-5, 5), -1],
												],
												e.translate(s.default.vector(0, -65)),
												!1,
											);
										return (
											r.rotate(t.rotate90CW().slope, e),
											n.push(r),
											(r = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, 100),
													s.default.vector(10, 0),
													s.default.vector(0, -100),
												],
												e.translate(s.default.vector(5, -50)),
											)).rotate(t.rotate90CW().slope, e),
											n.push(r),
											n
										);
									}),
									(e.prototype.handleForSlide = function (e, t) {
										var n = c.PolygonCreator.Ins.joinRelativePro(
											[
												[s.default.vector(50, -40), -15],
												s.default.vector(0, -320),
												[s.default.vector(-50, -40), -15],
												s.default.vector(0, 40),
												[s.default.vector(30, 30), 10],
												s.default.vector(0, 260),
												[s.default.vector(-30, 30), 10],
											],
											e.translate(s.default.vector(0, 200)),
										);
										return n.rotate(t.rotate90CW().slope, e), [n];
									}),
									(e.prototype.kfcHandle = function (e, t, n) {
										void 0 === n && (n = 200);
										var r = this._rect(150, n);
										return r.translate(s.default.vector(s.default.point(), e)), [r];
									}),
									(e.prototype.lock = function (e, t) {
										return [this._lockPart1(e, t), this._lockPart2(e, t)];
									}),
									(e.prototype.lock2 = function (e, t) {
										var n = this._lock2Part1(e, t),
											r = n.box,
											i = r.xmax - r.xmin,
											o = this._lock2Part2(e, t);
										o.translate(s.default.vector(i, 0));
										var a = this._lock2Part1(e, t, 15, 80, 10, 3);
										a.translate(s.default.vector(i, 0));
										var l = [n, o, a];
										return (
											l.forEach(function (n) {
												n.rotate(t.rotate90CCW().slope, e);
											}),
											l
										);
									}),
									(e.prototype._rectlockPart = function (e, t, n, r) {
										var i = new c.WinPolygon(),
											o = e.translate(s.default.vector(-n / 2, -r / 2)),
											a = s.default.segment(o, o.translate(s.default.vector(0, r)));
										i.add(a);
										var l = s.default.segment(a.end, a.end.translate(s.default.vector(n, 0)));
										i.add(l);
										var h = s.default.segment(l.end, l.end.translate(s.default.vector(0, -r)));
										return (
											i.add(h), i.doneSmart(), i.round(6), i.rotate(t.rotate90CW().slope, e), i
										);
									}),
									(e.prototype.lock3 = function (e, t) {
										var n = 14.4 * l.DrawParams.Ins.handleRatio,
											r = 65 * l.DrawParams.Ins.handleRatio,
											i = 9 * l.DrawParams.Ins.handleRatio,
											o = 40 * l.DrawParams.Ins.handleRatio;
										return [this._rectlockPart(e, t, n, r), this._rectlockPart(e, t, i, o)];
									}),
									(e.prototype.handleForSlide2 = function (e, t) {
										return {
											shapes: this.commercialHandle5(e, t, 250),
											useProfileColor: [!0],
										};
									}),
									(e.prototype.handleForSlide3 = function (e, t) {
										return this.handle6(e, t);
									}),
									(e.prototype._lock2Part1 = function (e, t, n, r, i, o) {
										void 0 === n && (n = 25),
											void 0 === r && (r = 160),
											void 0 === i && (i = 15),
											void 0 === o && (o = 5);
										var a = c.PolygonCreator.Ins.joinRelativePro([
											s.default.vector(0, r),
											s.default.vector(n - i, 0),
											[s.default.vector(i, -i), -o],
											s.default.vector(0, -(r - 2 * i)),
											[s.default.vector(-i, -i), -o],
										]);
										return (
											a
												.translate(s.default.vector(e.x, e.y))
												.translate(s.default.vector(0, -r / 2)),
											a
										);
									}),
									(e.prototype._lock2Part2 = function (e, t) {
										var n = t.y > 0 ? -1 : 1,
											r = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, 30 * n),
													[s.default.vector(25, 25 * n), 8 * n],
													s.default.vector(0, 95 * n),
													[s.default.vector(25, -30 * n), -8 * n],
													s.default.vector(0, -95 * n),
													[s.default.vector(-25, -25 * n), -8 * n],
												],
												s.default.point(0, -15 * n),
											);
										return r.translate(s.default.vector(e.x, e.y)), r;
									}),
									(e.prototype._hingePart1 = function (e, t, n) {
										void 0 === n && (n = !1);
										var r = 0.8 * 12 * l.DrawParams.Ins.hingeRatio,
											i = r * (n ? 1.5 : 2),
											o = c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, i),
													[s.default.vector(r, 0), -r / 4],
													s.default.vector(0, -i),
													[s.default.vector(-r, 0)],
													s.default.vector(0, -i),
													[s.default.vector(r, 0), r / 4],
													s.default.vector(0, i),
												],
												s.default.point().translate(s.default.vector(-r / 2, 0)),
												!1,
											);
										return (
											o.translate(s.default.vector(e.x, e.y)), o.rotate(t.rotate90CCW().slope, e), o
										);
									}),
									(e.prototype._handlePart1 = function (e, t) {
										var n = 14.4 * l.DrawParams.Ins.handleRatio,
											r = 21.6 * l.DrawParams.Ins.handleRatio,
											i = new c.WinPolygon(),
											o = e.translate(s.default.vector(-n / 2, -r / 2)),
											a = s.default.segment(o, o.translate(s.default.vector(0, r)));
										i.add(a);
										var h = s.default.segment(a.end, a.end.translate(s.default.vector(n, 0)));
										i.add(h);
										var u = s.default.segment(h.end, h.end.translate(s.default.vector(0, -r)));
										return (
											i.add(u), i.doneSmart(), i.round(6), i.rotate(t.rotate90CW().slope, e), i
										);
									}),
									(e.prototype._handlePart2 = function (e, t) {
										var n = 9 * l.DrawParams.Ins.handleRatio,
											r = 45 * l.DrawParams.Ins.handleRatio,
											i = new c.WinPolygon(),
											o = e.translate(s.default.vector(-n / 2, -5.8)),
											a = s.default.segment(o, o.translate(s.default.vector(0, r))),
											u = s.default.segment(a.end, a.end.translate(s.default.vector(n, 0))),
											p = s.default.segment(u.end, u.end.translate(s.default.vector(0, -r)));
										h.Utils.smoothingEdges([a, u, p], 5).forEach(function (e) {
											return i.add(e);
										});
										var f = (Math.PI / 180) * 90,
											d = (Math.tan(f), n / 2 / Math.sin(f)),
											g = p.pe.translate(s.default.vector(-n / 2, 0)),
											y = s.default.arc(g, d, (Math.PI / 2) * 3 + f, (Math.PI / 2) * 3 - f, !1);
										return i.add(y), i.doneSmart(), i.rotate(t.rotate90CW().slope, e), i;
									}),
									(e.prototype._handlePart3 = function (e, t) {
										var n = 8 * l.DrawParams.Ins.handleRatio,
											r = s.default.Utils.EQ_0(Math.PI / 2 - t.slope) ? 1 : 0,
											i = this._roundRect(n, 120);
										i.translate(s.default.vector(0, 60)),
											i.translate(s.default.vector(e.x, e.y)),
											i.rotate(t.rotate((Math.PI / 4) * 3 + (Math.PI / 2) * r).slope, e);
										var o = this._roundRect(n, 50);
										o.translate(s.default.vector(0, 25)),
											o.translate(s.default.vector(e.x, e.y)),
											o.rotate(t.rotate(Math.PI / 4 - (Math.PI / 2) * r).slope, e);
										var a = new c.WinPolygon();
										return (
											a.add(s.default.arc(e, 16, 0, Math.PI)),
											a.add(s.default.arc(e, 16, Math.PI, 2 * Math.PI)),
											a.done(),
											[i, o, a]
										);
									}),
									(e.prototype._handlePart4 = function (e, t) {
										var n = 14.4 * l.DrawParams.Ins.handleRatio,
											r = 21.6 * l.DrawParams.Ins.handleRatio,
											i = new c.WinPolygon(),
											o = e.translate(s.default.vector(-n / 2, -r / 2)),
											a = s.default.segment(o, o.translate(s.default.vector(0, r)));
										i.add(a);
										var h = (Math.PI / 180) * 60,
											u = n / 2 / Math.tan(h),
											p = n / 2 / Math.sin(h),
											f = a.pe.translate(s.default.vector(n / 2, -(p - u))),
											d = s.default.arc(f, p, Math.PI / 2 + h, Math.PI / 2 - h, !1);
										i.add(d);
										var g = s.default.segment(d.end, d.end.translate(s.default.vector(0, -r)));
										i.add(g), (f = g.pe.translate(s.default.vector(-n / 2, p - u)));
										var y = s.default.arc(f, p, (Math.PI / 2) * 3 + h, (Math.PI / 2) * 3 - h, !1);
										return i.add(y), i.doneSmart(), i.rotate(t.rotate90CW().slope, e), i;
									}),
									(e.prototype._lockPart1 = function (e, t) {
										var n = new c.WinPolygon(),
											r = e.translate(s.default.vector(-21.6, -97.5)),
											i = s.default.segment(r, r.translate(s.default.vector(0, 195)));
										n.add(i);
										var o = (Math.PI / 180) * 60,
											a = 21.6 / Math.tan(o),
											l = 21.6 / Math.sin(o),
											h = i.pe.translate(s.default.vector(21.6, -(l - a))),
											u = s.default.arc(h, l, Math.PI / 2 + o, Math.PI / 2 - o, !1);
										n.add(u);
										var p = s.default.segment(u.end, u.end.translate(s.default.vector(0, -195)));
										n.add(p), (h = p.pe.translate(s.default.vector(-21.6, l - a)));
										var f = s.default.arc(h, l, (Math.PI / 2) * 3 + o, (Math.PI / 2) * 3 - o, !1);
										return n.add(f), n.doneSmart(), n.rotate(t.rotate90CW().slope, e), n;
									}),
									(e.prototype._lockPart2 = function (e, t) {
										var n = new c.WinPolygon(),
											r = e.translate(s.default.vector(-13.5, -60)),
											i = s.default.segment(r, r.translate(s.default.vector(0, 120)));
										n.add(i);
										var o = (Math.PI / 180) * 60,
											a = 13.5 / Math.tan(o),
											l = 13.5 / Math.sin(o),
											h = i.pe.translate(s.default.vector(13.5, -(l - a))),
											u = s.default.arc(h, l, Math.PI / 2 + o, Math.PI / 2 - o, !1);
										n.add(u);
										var p = s.default.segment(u.end, u.end.translate(s.default.vector(0, -120)));
										n.add(p), (h = p.pe.translate(s.default.vector(-13.5, l - a)));
										var f = s.default.arc(h, l, (Math.PI / 2) * 3 + o, (Math.PI / 2) * 3 - o, !1);
										return n.add(f), n.doneSmart(), n.rotate(t.rotate90CW().slope, e), n;
									}),
									(e.prototype._rect = function (e, t) {
										return (
											void 0 === e && (e = 50),
											void 0 === t && (t = 100),
											c.PolygonCreator.Ins.joinRelativePro(
												[s.default.vector(0, t), s.default.vector(e, 0), s.default.vector(0, -t)],
												s.default.point(-e / 2, -t / 2),
											)
										);
									}),
									(e.prototype._roundRect = function (e, t, n) {
										return (
											void 0 === e && (e = 50),
											void 0 === t && (t = 100),
											(n = n || e / 2),
											c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, t - 2 * n),
													[s.default.vector(e, 0), -n],
													s.default.vector(0, 2 * n - t),
													[s.default.vector(-e, 0), -n],
												],
												s.default.point(-e / 2, -t / 2 + n),
												!1,
											)
										);
									}),
									(e.prototype._stick = function (e, t, n) {
										return (
											void 0 === t && (t = 38),
											void 0 === n && (n = 20),
											c.PolygonCreator.Ins.joinRelativePro(
												[
													[s.default.vector(0, t), -n],
													s.default.vector(e, 0),
													[s.default.vector(0, -t), -n],
												],
												s.default.point(-e / 2, -t / 2),
											)
										);
									}),
									(e.prototype._repeat = function (e, t, n) {
										void 0 === t && (t = 2), void 0 === n && (n = 50);
										for (var r = [], i = (-n * (t - 1)) / 2, o = 0; o < t; o++) {
											var a = e.clone();
											a.translate(s.default.vector(0, n * o)),
												a.translate(s.default.vector(0, i)),
												r.push(a);
										}
										return r;
									}),
									(e.prototype._rectWithRadius = function (e, t, n, r) {
										return (
											void 0 === e && (e = 50),
											void 0 === t && (t = 100),
											void 0 === n && (n = 10),
											void 0 === r && (r = 2),
											c.PolygonCreator.Ins.joinRelativePro(
												[
													s.default.vector(0, t - 2 * n),
													[s.default.vector(n, n), -r],
													s.default.vector(e - 2 * n, 0),
													[s.default.vector(n, -n), -r],
													s.default.vector(0, 2 * n - t),
													[s.default.vector(-n, -n), -r],
													s.default.vector(2 * n - e, 0),
													[s.default.vector(-n, n), -r],
												],
												s.default.point(-e / 2, -t / 2 + n),
												!1,
											)
										);
									}),
									e
								);
							})();
						(t.HardwareShapeCreator = u),
							(function (e) {
								(e.Hinge = 'Hinge'),
									(e.HingeOnCircle = 'HingeOnCircle'),
									(e.HingePro = 'HingePro'),
									(e.EndpointHinge = 'EndpointHinge'),
									(e.Handle = 'Handle'),
									(e.Handle2 = 'Handle2'),
									(e.Handle3 = 'Handle3'),
									(e.Handle4 = 'Handle4'),
									(e.Handle5 = 'Handle5'),
									(e.Handle6 = 'Handle6'),
									(e.Handle7 = 'Handle7'),
									(e.CommercialHandle = 'CommercialHandle'),
									(e.CommercialHandle2 = 'CommercialHandle2'),
									(e.CommercialHandle3 = 'CommercialHandle3'),
									(e.CommercialHandle4 = 'CommercialHandle4'),
									(e.CommercialHandle5 = 'CommercialHandle5'),
									(e.CommercialHandle6 = 'CommercialHandle6'),
									(e.CommercialHandle7 = 'CommercialHandle7'),
									(e.CommercialHandle8 = 'CommercialHandle8'),
									(e.CommercialHandle9 = 'CommercialHandle9'),
									(e.CommercialHandle10 = 'CommercialHandle10'),
									(e.CommercialHandle11 = 'CommercialHandle11'),
									(e.CommercialHandle12 = 'CommercialHandle12'),
									(e.CommercialHandle13 = 'CommercialHandle13'),
									(e.CommercialHandle14 = 'CommercialHandle14'),
									(e.HandleForFold = 'HandleForFold'),
									(e.HandleForSlide = 'HandleForSlide'),
									(e.HandleForSlide2 = 'HandleForSlide2'),
									(e.HandleForSlide3 = 'HandleForSlide3'),
									(e.KfcHandle = 'KfcHandle'),
									(e.CrossHandle = 'CrossHandle'),
									(e.Lock = 'Lock'),
									(e.Lock2 = 'Lock2'),
									(e.Lock3 = 'Lock3');
							})((a = t.HardwareShape || (t.HardwareShape = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Hardware = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(7),
							h = n(1),
							c = (function (e) {
								function t(t, n) {
									var r = e.call(this, n, t.sash.polygon) || this;
									return (
										(r.manager = t),
										(r.vshape = []),
										(r._autoOffset = !0),
										(r._percentOffset = 0),
										(r.shapes = []),
										(r.useProfileColor = []),
										(r.hidden = !1),
										(r.lockDimToGround = !1),
										(r.lockDimToSash = !1),
										(r.dim = new h.DimToGround(r)),
										(r.dimToSash = new h.DimToSash(r)),
										(r.dimToSash.hidden = !0),
										r.hidden || r.sash.add(r),
										r
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'sash', {
										get: function () {
											return this.manager.sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'autoOffset', {
										get: function () {
											return this._autoOffset;
										},
										set: function (e) {
											this._autoOffset = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'percentOffset', {
										get: function () {
											return this._percentOffset;
										},
										set: function (e) {
											e <= 0 || e >= 1 || ((this._percentOffset = e), (this._autoOffset = !1));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hardwareShapeLength', {
										get: function () {
											return -1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'draggable', {
										get: function () {
											return !1 !== l.DrawParams.Ins.dragModifyOnHardware && !this.sash.isCircle;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.alignedWith = function (e) {
										return a.default.Utils.EQ_0(this.position.y - e.position.y);
									}),
									(t.prototype.cloneFrom = function (e) {
										return (
											(this.hidden = e.hidden),
											(this.hardwareShape = e.hardwareShape),
											(this._autoOffset = e.autoOffset),
											(this._percentOffset = e.percentOffset),
											(this.lockDimToGround = e.lockDimToGround),
											(this.lockDimToSash = e.lockDimToSash),
											(this.dim = new h.DimToGround(this).cloneFrom(e.dim)),
											(this.dimToSash = new h.DimToSash(this).cloneFrom(e.dimToSash)),
											(this.useProfileColor = e.useProfileColor),
											this
										);
									}),
									(t.prototype.copyCommonSettings = function (e) {
										(this.dim.hidden = e.dim.hidden), (this.dimToSash.hidden = e.dimToSash.hidden);
									}),
									(t.prototype.ignore = function () {
										return !!this.sash.polygon.isEmpty || !!this.hidden;
									}),
									(t.prototype.create = function () {
										return (
											this.ignore() ||
												(this.preCreate(),
												this.createShapes(),
												this.dim.updatePoly(),
												this.dimToSash.updatePoly()),
											this
										);
									}),
									(t.prototype.preCreate = function () {
										this._autoOffset && (this._percentOffset = this.computeAutoOffset());
									}),
									(t.prototype.computeAutoOffset = function () {
										return 0.5;
									}),
									(t.prototype.sashInnerDirection = function () {
										return a.default.vector();
									}),
									(t.prototype.createShapes = function () {
										var e = h.HardwareShapeCreator.Ins.get(this.hardwareShape)(
											this.position,
											this.hardwareShapeDirection(),
											this.hardwareShapeLength,
											this.sashInnerDirection(),
										);
										Array.isArray(e)
											? (this.shapes = e)
											: ((this.shapes = e.shapes), (this.useProfileColor = e.useProfileColor));
									}),
									(t.prototype.color = function (e) {
										var t = this.topFrame.colorManager;
										return this.useProfileColor[e] && 'string' == typeof t.barNormal
											? t.barNormal
											: t.hardware;
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshape.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										}),
											this.shapes.forEach(function (n, r) {
												var i = r >= t.vshape.length,
													o = i ? l.Artisan.recycleShape(n, e) : t.vshape[r];
												o.setAttr('data', {
													poly: n,
													fcolor: t.color(r),
													drag: t.draggable,
													stroke: s.ShapeColor.windowStrokeColor,
													strokeWidth: l.DrawParams.Ins.windowStrokeWidth,
												}),
													o.setAttr('robot', t),
													t.editTool && o.setAttr('tool', t.editTool),
													o.setAttr('hitFunc', function (e) {
														return n.makeHitRegion(o, e);
													}),
													i && ((t.vshape[r] = o), t.addToGroup([o]));
											}),
											this.children.forEach(function (t) {
												return t.draw(e);
											});
									}),
									(t.prototype.updatePoly = function () {
										return (
											(this.shapes = []),
											this.hidden ? this.sash.remove(this) : this.sash.add(this),
											this.hidden ||
												(this.create(), this.dim.updatePoly(), this.dimToSash.updatePoly()),
											this
										);
									}),
									(t.prototype.translate = function (e) {
										this.shapes.forEach(function (t) {
											t.translate(e);
										}),
											this.dim.translate(e),
											this.dimToSash.translate(e);
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, !0),
											0 !== this.vshape.length &&
												(this.vshape.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshape),
												(this.vshape = []));
									}),
									(t.prototype.toJSON = function () {
										return {
											hidden: this.hidden,
											hardwareShape: this.hardwareShape,
											autoOffset: this._autoOffset,
											percentOffset: this._percentOffset,
											dim: this.dim.toJSON(),
											dimToSash: this.dimToSash.toJSON(),
											lockDimToGround: this.lockDimToGround,
											lockDimToSash: this.lockDimToSash,
										};
									}),
									(t.prototype.deserialize = function (e) {
										return (
											(e = this.fixData(e)),
											(this.hidden = e.hidden),
											(this.hardwareShape = e.hardwareShape),
											(this._autoOffset = e.autoOffset),
											e.percentOffset
												? (this._percentOffset = e.percentOffset)
												: (this._autoOffset = !0),
											this.dim.deserialize(e.dim),
											this.dimToSash.deserialize(e.dimToSash),
											(this.lockDimToGround = e.lockDimToGround),
											(this.lockDimToSash = e.lockDimToSash),
											this
										);
									}),
									(t.prototype.fixData = function (e) {
										return (
											void 0 === e.hidden && (e.hidden = !1),
											void 0 === e.autoOffset && (e.autoOffset = !0),
											void 0 === e.lockDimToGround && (e.lockDimToGround = !1),
											void 0 === e.lockDimToSash && (e.lockDimToSash = !1),
											e
										);
									}),
									(t.prototype.setDistanceToGround = function (e, t, n) {
										void 0 === n && (n = !0);
									}),
									(t.prototype.setDistanceToSash = function (e, t, n) {
										void 0 === n && (n = !0);
									}),
									(t.prototype.snapHardware = function (e, t) {}),
									(t.prototype.allSameHardwares = function () {
										var e = this;
										return this.top.view.shapeManager.shapem
											.map(function (t) {
												return t.sashManager.allSashes
													.map(function (e) {
														return e.hardwareManager.hardwares;
													})
													.flat()
													.filter(function (t) {
														return t !== e;
													})
													.filter(function (e) {
														return !e.hidden;
													})
													.filter(function (t) {
														return t.hardwareShape === e.hardwareShape;
													});
											})
											.flat();
									}),
									(t.prototype.allHardwaresAlignedWith = function () {
										var e = this;
										return this.allSameHardwares().filter(function (t) {
											return t.alignedWith(e);
										});
									}),
									t
								);
							})(h.Shape);
						t.Hardware = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HardwareOnEdge = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(2),
							h = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (
										(r.manager = t),
										(r._ignoreArcEdge = !1),
										(r._edgeIndex = -1),
										(r.relativeOffset = 0),
										(r.relativeOffsetSet = s.DrawParams.Ins.handleRelativeSet),
										r
									);
								}
								return (
									i(t, e),
									(t.prototype.computeAutoOffset = function () {
										var e = 0.5;
										return this.edge && (e += this.relativeOffset / this.edge.length), e;
									}),
									Object.defineProperty(t.prototype, '_distanceFromBaseline', {
										get: function () {
											return 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'edgeIndex', {
										get: function () {
											return this._edgeIndex;
										},
										set: function (e) {
											this._edgeIndex = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'offset', {
										get: function () {
											return this.edge ? this.edge.length * this._percentOffset : 0;
										},
										set: function (e) {
											this.edge && (this.percentOffset = e / this.edge.length);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isOffsetReadable', {
										get: function () {
											return (
												!!this.edge &&
												(this.edge.start.y === this.edge.end.y
													? this.edge.start.x > this.edge.end.x
													: this.edge.start.y > this.edge.end.y)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'readableOffset', {
										get: function () {
											if (!this.edge) return 0;
											var e = this.isOffsetReadable ? this._percentOffset : 1 - this._percentOffset;
											return this.edge.length * e;
										},
										set: function (e) {
											this.edge &&
												((e = this.isOffsetReadable ? e : this.edge.length - e),
												(this.percentOffset = e / this.edge.length));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'projectionPosition', {
										get: function () {
											return this.edge
												? l.Utils.edgeDirPt(
														this.edge,
														this.edge.length * this._percentOffset,
														this.edge.start,
												  )
												: a.default.point();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'position', {
										get: function () {
											return this.projectionPosition.translate(this.positionOffset());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'centerPosition', {
										get: function () {
											return this.position;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.cloneFrom = function (t) {
										return (
											e.prototype.cloneFrom.call(this, t),
											(this._edgeIndex = t.edgeIndex),
											(this.relativeOffset = t.relativeOffset),
											(this.relativeOffsetSet = t.relativeOffsetSet),
											this
										);
									}),
									(t.prototype.translate = function (t) {
										e.prototype.translate.call(this, t);
									}),
									(t.prototype.toJSON = function () {
										return Object.assign(e.prototype.toJSON.call(this), {
											edgeIndex: this._edgeIndex,
											ro: this.relativeOffset,
											ros: this.relativeOffsetSet,
										});
									}),
									(t.prototype.deserialize = function (t) {
										return (
											e.prototype.deserialize.call(this, t),
											(this._edgeIndex = t.edgeIndex),
											void 0 !== t.ro && (this.relativeOffset = t.ro),
											(this.relativeOffsetSet = void 0 !== t.ros && t.ros),
											this
										);
									}),
									(t.prototype.preCreate = function () {
										this.edgeValidate(),
											-1 === this._edgeIndex && this.computeEdge(),
											e.prototype.preCreate.call(this);
									}),
									(t.prototype.hardwareShapeDirection = function () {
										return this.edge.tangentInStart();
									}),
									(t.prototype.edgeValidate = function () {
										this.edge || (this._edgeIndex = -1),
											this._ignoreArcEdge &&
												this.edge instanceof a.default.Arc &&
												(this._edgeIndex = -1);
									}),
									(t.prototype.positionOffsetDirection = function () {
										var e = this.edge;
										return e
											? e instanceof a.default.Segment
												? this.positionOffsetDirectionOnSegment(e)
												: this.positionOffsetDirectionOnArc(e)
											: a.default.vector();
									}),
									(t.prototype.positionOffset = function () {
										return this.positionOffsetDirection().multiply(this._distanceFromBaseline);
									}),
									(t.prototype.positionOffsetDirectionOnSegment = function (e) {
										return this.polygon.orientation === a.default.ORIENTATION.CCW
											? e.tangentInStart().rotate90CCW()
											: e.tangentInStart().rotate90CW();
									}),
									(t.prototype.positionOffsetDirectionOnArc = function (e) {
										var t = a.default.vector(this.projectionPosition, e.center).normalize();
										return (
											((this.polygon.orientation === a.default.ORIENTATION.CW &&
												e.counterClockwise) ||
												(this.polygon.orientation === a.default.ORIENTATION.CCW &&
													!e.counterClockwise)) &&
												(t = t.invert()),
											t
										);
									}),
									(t.prototype.alignTo = function (e, t) {
										void 0 === t && (t = !1);
									}),
									(t.prototype.move = function (e, t, n) {
										var r = this.topFrame.view;
										(this.percentOffset = e), this.updatePoly(), this.draw(r);
									}),
									(t.prototype.snapHardware = function (e, t) {
										var n = this.edge,
											r = e.edge;
										if (
											n &&
											!a.default.line(n.start, n.end).incidentTo(a.default.line(r.start, r.end))
										)
											for (var i = 0; i < 2; i++) {
												var o = 0 === i,
													s = o ? a.default.vector(0, 1) : a.default.vector(1, 0),
													l = a.default.line(this.position, s).intersect(r).pop();
												if (l) {
													var h = a.default.line(this.projectionPosition, s).intersect(r).pop();
													if (
														(!h || (!h.equalTo(r.start) && !h.equalTo(r.end))) &&
														!(o && Math.abs(t.y - l.y) > 100) &&
														(o || !(Math.abs(t.x - l.x) > 100))
													)
														return {
															snapLine: a.default.segment(this.position, l),
															snapTarget: this,
															snapOnX: o,
														};
												}
											}
									}),
									t
								);
							})(n(1).Hardware);
						t.HardwareOnEdge = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DockSide = t.HardwareOnFrame = void 0);
						var a,
							s = o(n(0)),
							l = n(5),
							h = n(13),
							c = n(2),
							u = n(11),
							p = n(1),
							f = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (
										(t.dimToMid = new p.DimToMid(t)),
										(t.editTool = l.ToolType.editHardwareOnFrame),
										(t._dockOppositeWithOpenDirection = !1),
										(t._dockSide = a.Middle),
										t
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, '_distanceFromBaseline', {
										get: function () {
											var e = this.sash.frameManager.getEdgeWidth(this.edgeIndex),
												t = e || this.sash.profileSize;
											return this._dockSide === a.Middle
												? t / 2
												: this._dockSide === a.Inside
												? t
												: 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.sashInnerDirection = function () {
										var e = this.edge,
											t = this.sash.polygon.orientation === s.default.ORIENTATION.CCW;
										return e.tangentInStart().rotate((Math.PI / 2) * (t ? 1 : -1));
									}),
									Object.defineProperty(t.prototype, 'edge', {
										get: function () {
											if (-1 !== this._edgeIndex) return this.polygon.edge(this._edgeIndex);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.create = function () {
										return (
											this.ignore() ||
												(this.preCreate(),
												this.lockDimToGround
													? this.setOffsetByDistanceToGround(this.dim.length)
													: this.lockDimToSash &&
													  this.setOffsetByDistanceToSash(this.dimToSash.length),
												this.createShapes(),
												this.dim.updatePoly(),
												this.dimToSash.updatePoly(),
												this.dimToMid.updatePoly()),
											this
										);
									}),
									(t.prototype.translate = function (t) {
										e.prototype.translate.call(this, t), this.dimToMid.translate(t);
									}),
									(t.prototype.fixData = function (t) {
										return (
											void 0 === (t = e.prototype.fixData.call(this, t)).edgeIndex &&
												(t.edgeIndex = -1),
											t
										);
									}),
									(t.prototype.computeEdge = function () {
										var e = this.polygon.edges;
										this._ignoreArcEdge &&
											(e = this.polygon.edges.filter(function (e) {
												return e instanceof s.default.Segment;
											})),
											(this._edgeIndex = u.EdgeFinder.Instance.findIndex(
												t.directionByOpenDirection(
													this.manager.openDirection,
													this._dockOppositeWithOpenDirection,
												),
												this.polygon,
												e,
											));
									}),
									(t.directionByOpenDirection = function (e, t) {
										void 0 === t && (t = !1);
										var n = new Map([
												[h.OpenDirection.Up, u.Direction.Down],
												[h.OpenDirection.Down, u.Direction.Up],
												[h.OpenDirection.Left, u.Direction.Left],
												[h.OpenDirection.Left_Rotate, u.Direction.Left],
												[h.OpenDirection.Left_With_Up, u.Direction.Left],
												[h.OpenDirection.Left_With_Down, u.Direction.Left],
												[h.OpenDirection.Right, u.Direction.Right],
												[h.OpenDirection.Right_Rotate, u.Direction.Right],
												[h.OpenDirection.Right_With_Up, u.Direction.Right],
												[h.OpenDirection.Right_With_Down, u.Direction.Right],
											]),
											r = new Map([
												[h.OpenDirection.Up, u.Direction.Up],
												[h.OpenDirection.Down, u.Direction.Down],
												[h.OpenDirection.Left, u.Direction.Right],
												[h.OpenDirection.Left_Rotate, u.Direction.Right],
												[h.OpenDirection.Left_With_Up, u.Direction.Right],
												[h.OpenDirection.Left_With_Down, u.Direction.Right],
												[h.OpenDirection.Right, u.Direction.Left],
												[h.OpenDirection.Right_Rotate, u.Direction.Left],
												[h.OpenDirection.Right_With_Up, u.Direction.Left],
												[h.OpenDirection.Right_With_Down, u.Direction.Left],
											]),
											i = (t ? r : n).get(e);
										return i || u.Direction.Right;
									}),
									(t.prototype.alignTo = function (e, t) {
										void 0 === t && (t = !1), t && (this.edgeIndex = e.edgeIndex);
										var n = e.edge.tangentInStart(),
											r = this.edge.tangentInStart(),
											i = this.manager.isVertical ? n.x * r.x < 0 : n.y * r.y < 0;
										if (this.relativeOffsetSet) {
											var o = this.relativeOffset > 0 ? 1 : -1;
											this.relativeOffset = Math.abs(e.relativeOffset) * o;
										} else this.percentOffset = i ? 1 - e.percentOffset : e.percentOffset;
									}),
									(t.prototype.setOffsetByDistanceToGround = function (e) {
										var t = this.edge,
											n = this.top,
											r = s.default
												.line(n.groundLine.pt.translate(0, -e), s.default.vector(0, 1))
												.intersect(t)[0];
										return (
											!!r &&
											((this.percentOffset = c.Utils.distanceFromEdgeStart(r, t) / t.length), !0)
										);
									}),
									(t.prototype.setDistanceToGround = function (e, t, n) {
										var r = this;
										void 0 === n && (n = !0);
										var i = this.top.view,
											o = this.allHardwaresAlignedWith();
										if (this.setOffsetByDistanceToGround(e)) {
											var a = this.lockDimToGround;
											(this.lockDimToGround = !1),
												this.updatePoly(),
												(this.lockDimToGround = a),
												this.draw(i),
												n &&
													o.forEach(function (e) {
														e.setDistanceToGround(r.dim.value, e.dim.value, !1),
															e.updatePoly(),
															e.draw(i);
													}),
												i.refresh();
										}
									}),
									(t.prototype.setOffsetByDistanceToSash = function (e) {
										var t,
											n = this.edge,
											r = this.manager.sash,
											i = this.hardwareShapeDirection();
										if (r.polygon.isRectangle() && 0 === i.dot(s.default.vector(0, 1))) {
											var o = s.default.line(
												s.default.point(r.polygon.box.xmax, 0),
												s.default.vector(-1, 0),
											);
											if (
												(t = s.default
													.line(o.pt.translate(-e, 0), s.default.vector(-1, 0))
													.intersect(n)[0])
											)
												return (
													(this.percentOffset = c.Utils.distanceFromEdgeStart(t, n) / n.length), !0
												);
										} else {
											var a = s.default.line(
												s.default.point(0, r.polygon.box.ymax),
												s.default.vector(0, 1),
											);
											if (
												(t = s.default
													.line(a.pt.translate(0, -e), s.default.vector(0, 1))
													.intersect(n)[0])
											)
												return (
													(this.percentOffset = c.Utils.distanceFromEdgeStart(t, n) / n.length), !0
												);
										}
										return !1;
									}),
									(t.prototype.setDistanceToSash = function (e, t, n) {
										var r = this;
										void 0 === n && (n = !0);
										var i = this.top.view,
											o = this.allHardwaresAlignedWith();
										if (this.setOffsetByDistanceToSash(e)) {
											var a = this.lockDimToSash;
											(this.lockDimToSash = !1),
												this.updatePoly(),
												(this.lockDimToSash = a),
												this.draw(i),
												n &&
													o.forEach(function (e) {
														e.setDistanceToSash(r.dimToSash.value, e.dimToSash.value, !1),
															e.updatePoly(),
															e.draw(i);
													}),
												i.refresh();
										}
									}),
									(t.prototype.move = function (e, t, n) {
										var r = this.topFrame.view;
										void 0 !== t && this.edgeIndex !== t && (this.edgeIndex = t);
										var i = !1;
										if (n) {
											var o = n.edge.tangentInStart(),
												a = this.edge.tangentInStart();
											i = this.manager.isVertical ? o.x * a.x < 0 : o.y * a.y < 0;
										}
										(this.percentOffset = i ? 1 - e : e), this.updatePoly(), this.draw(r);
									}),
									(t.prototype.cloneFrom = function (t) {
										return (
											e.prototype.cloneFrom.call(this, t),
											(this._dockSide = t._dockSide),
											(this.dimToMid = new p.DimToMid(this).cloneFrom(t.dimToMid)),
											this
										);
									}),
									(t.prototype.copyCommonSettings = function (n) {
										e.prototype.copyCommonSettings.call(this, n),
											n instanceof t && (this.dimToMid.hidden = n.dimToMid.hidden);
									}),
									t
								);
							})(p.HardwareOnEdge);
						(t.HardwareOnFrame = f),
							(function (e) {
								(e[(e.Outside = 0)] = 'Outside'),
									(e[(e.Inside = 1)] = 'Inside'),
									(e[(e.Middle = 2)] = 'Middle');
							})((a = t.DockSide || (t.DockSide = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HardwareOnMullion = void 0);
						var a = o(n(0)),
							s = n(5),
							l = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (t.editTool = s.ToolType.editHardwareOnMullion), t;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'bar', {
										get: function () {
											var e = this;
											if (-1 !== this._edgeIndex) {
												var t = this.sash.mulManager.bars.find(function (t) {
													return t.polyId.idx === e._edgeIndex;
												});
												return t || void 0;
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'edge', {
										get: function () {
											if (this.bar) {
												var e = this.bar.polygon.mulShape;
												return e instanceof a.default.Segment || e instanceof a.default.Arc
													? e
													: void 0;
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.computeEdge = function () {
										this._edgeIndex = this.sash.mulManager.bars.findIndex(function (e) {
											return e.polygon.mulShape instanceof a.default.Segment;
										});
									}),
									t
								);
							})(n(1).HardwareOnEdge);
						t.HardwareOnMullion = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HardwareOnCircle = void 0);
						var a = o(n(0)),
							s = n(1),
							l = n(11),
							h = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (t._distanceFromBaseline = t.sash.profileSize / 2), t;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'circle', {
										get: function () {
											return this.sash.polygon.circlePolygon();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'projectionPosition', {
										get: function () {
											var e = this.circle,
												t = e.center,
												n = e.r;
											switch (this.dockDirection) {
												case l.Direction.Down:
													return a.default.point(t.x, t.y + n);
												case l.Direction.Up:
													return a.default.point(t.x, t.y - n);
												case l.Direction.Right:
													return a.default.point(t.x + n, t.y);
												default:
													return a.default.point(t.x - n, t.y);
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'position', {
										get: function () {
											return this.projectionPosition.translate(this.positionOffset());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'centerPosition', {
										get: function () {
											return this.position;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.alignTo = function (e, t) {}),
									(t.prototype.positionOffset = function () {
										return a.default
											.vector(this.projectionPosition, this.circle.center)
											.normalize()
											.multiply(this._distanceFromBaseline);
									}),
									t
								);
							})(s.Hardware);
						t.HardwareOnCircle = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Hinge = void 0);
						var o = n(5),
							a = n(1),
							s = (function (e) {
								function t(t) {
									var n = e.call(this, t, a.ShapeType.Hinge) || this;
									return (
										(n.manager = t),
										(n.editTool = o.ToolType.editHinge),
										(n._dockSide = a.DockSide.Outside),
										(n._ignoreArcEdge = !0),
										(n.hardwareShape = a.HardwareShape.Hinge),
										(n.dim.hidden = !0),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'index', {
										get: function () {
											var e = this;
											return this.manager.hinges.findIndex(function (t) {
												return t === e;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), this;
									}),
									(t.prototype.recreate = function () {
										return new t(this.manager).cloneFrom(this);
									}),
									(t.prototype.fixData = function (t) {
										return (
											void 0 === (t = e.prototype.fixData.call(this, t)).hardwareShape &&
												(t.hardwareShape = a.HardwareShape.Hinge),
											t
										);
									}),
									(t.prototype.computeAutoOffset = function () {
										return this.defaultPercentOffsets()[this.index];
									}),
									(t.prototype.defaultPercentOffsets = function () {
										var e = this.manager.hingeEdgeIndex,
											t = this.manager.hingeCount;
										if (1 === t) return [0.5];
										if (-1 !== e && 3 === t) {
											var n = this.sash.polygon.edges,
												r = n[e],
												i = (e - 1 + n.length) % n.length,
												o = (e + 1 + n.length) % n.length,
												a = 64.5 + this.sash.frameManager.getEdgeWidth(i),
												s = 64.5 + this.sash.frameManager.getEdgeWidth(o),
												l = r.start.y > r.end.y,
												h = r.length;
											return [a / h, l ? 0.7 : 0.3, (h - s) / h];
										}
										for (var c = [], u = [], p = Math.ceil(t / 2), f = 0; f < p; f++) {
											var d = 0.2 + (0.6 / (t - 1)) * f;
											if ((c.push(d), f === p - 1 && t % 2 != 0)) break;
											u.push(1 - d);
										}
										return c.concat(u.reverse());
									}),
									t
								);
							})(a.HardwareOnFrame);
						t.Hinge = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Handle = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(1),
							h = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, l.ShapeType.Handle) || this;
									return (
										(r.manager = t),
										(r.editTool = s.ToolType.editHandle),
										(r._dockOppositeWithOpenDirection = !0),
										(r._alwaysPointToBottom = !0),
										(r.hardwareShape = l.HardwareShape.Handle),
										n &&
											(n.hardwareShape && (r.hardwareShape = n.hardwareShape),
											void 0 !== n.dockOppositeWithOpenDirection &&
												(r._dockOppositeWithOpenDirection = n.dockOppositeWithOpenDirection),
											void 0 !== n.alwaysPointToBottom &&
												(r._alwaysPointToBottom = n.alwaysPointToBottom),
											void 0 !== n.dockSide && (r._dockSide = n.dockSide)),
										r
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'handlePosition', {
										get: function () {
											return this.position;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hardwareShapeDirection = function () {
										var e = this.edge,
											t = this.positionOffsetDirection().rotate90CCW();
										return this._alwaysPointToBottom ? this.pointToBottom(t, e) : t;
									}),
									(t.prototype.pointToBottom = function (e, t) {
										t instanceof a.default.Arc && (t = a.default.segment(t.start, t.end));
										var n =
											(t.slope > Math.PI / 4 && t.slope < (Math.PI / 4) * 3) ||
											(t.slope > (Math.PI / 4) * 5 && t.slope < (Math.PI / 4) * 7);
										return (n && e.y < 0) || (!n && e.x < 0) ? e.invert() : e;
									}),
									(t.prototype.cloneFrom = function (t) {
										return (
											e.prototype.cloneFrom.call(this, t),
											(this._dockOppositeWithOpenDirection = t._dockOppositeWithOpenDirection),
											(this._alwaysPointToBottom = t._alwaysPointToBottom),
											this
										);
									}),
									(t.prototype.recreate = function () {
										return new t(this.manager).cloneFrom(this);
									}),
									(t.forDoor = function (e, n) {
										return (
											void 0 === n && (n = l.HardwareShape.Handle2),
											new t(e, {
												hardwareShape: n,
												alwaysPointToBottom: !1,
											})
										);
									}),
									(t.forFold = function (e) {
										return new t(e, {
											hardwareShape: l.HardwareShape.HandleForFold,
											dockOppositeWithOpenDirection: !1,
											dockSide: l.DockSide.Outside,
										});
									}),
									(t.forSlide = function (e) {
										return new t(e, {
											hardwareShape: l.HardwareShape.HandleForSlide,
											alwaysPointToBottom: !1,
										});
									}),
									(t.forSlide2 = function (e) {
										return new t(e, {
											hardwareShape: l.HardwareShape.HandleForSlide2,
											alwaysPointToBottom: !1,
											dockSide: l.DockSide.Inside,
										});
									}),
									(t.forSlide3 = function (e) {
										return new t(e, {
											hardwareShape: l.HardwareShape.HandleForSlide3,
											alwaysPointToBottom: !0,
										});
									}),
									(t.lock = function (e, n) {
										return (
											void 0 === n && (n = l.HardwareShape.Lock),
											new t(e, {
												hardwareShape: n,
											})
										);
									}),
									(t.lock2 = function (e) {
										return new t(e, {
											hardwareShape: l.HardwareShape.Lock2,
											alwaysPointToBottom: !1,
											dockSide: l.DockSide.Outside,
										});
									}),
									t
								);
							})(l.HardwareOnFrame);
						t.Handle = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HandleOnCircle = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(59),
							h = n(1),
							c = n(13),
							u = (function (e) {
								function t(t) {
									var n = e.call(this, t, l.ShapeType.Handle) || this;
									return (
										(n.manager = t),
										(n.hardwareShape = h.HardwareShape.Handle),
										(n.dim.hidden = !0),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'dockDirection', {
										get: function () {
											switch (this.manager.openDirection) {
												case c.OpenDirection.Up:
													return s.Direction.Down;
												case c.OpenDirection.Down:
													return s.Direction.Up;
												case c.OpenDirection.Left:
													return s.Direction.Right;
												default:
													return s.Direction.Left;
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), this;
									}),
									(t.prototype.recreate = function () {
										return new t(this.manager).cloneFrom(this);
									}),
									(t.prototype.hardwareShapeDirection = function () {
										switch (this.manager.openDirection) {
											case c.OpenDirection.Down:
											case c.OpenDirection.Up:
												return a.default.vector(1, 0);
											case c.OpenDirection.Right:
											default:
												return a.default.vector(0, 1);
										}
									}),
									(t.prototype.fixData = function (t) {
										return (
											void 0 === (t = e.prototype.fixData.call(this, t)).hardwareShape &&
												(t.hardwareShape = h.HardwareShape.Handle),
											t
										);
									}),
									t
								);
							})(h.HardwareOnCircle);
						t.HandleOnCircle = u;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HingeOnCircle = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(59),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t, l.ShapeType.Hinge) || this;
									return (
										(n.manager = t),
										(n._distanceFromBaseline = 0),
										(n.hardwareShape = h.HardwareShape.HingeOnCircle),
										(n.dim.hidden = !0),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'dockDirection', {
										get: function () {
											return (
												this.manager.isVertical
													? [s.Direction.Left, s.Direction.Right]
													: [s.Direction.Up, s.Direction.Down]
											)[this.index];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'index', {
										get: function () {
											var e = this;
											return this.manager.hinges.findIndex(function (t) {
												return t === e;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), this;
									}),
									(t.prototype.recreate = function () {
										return new t(this.manager).cloneFrom(this);
									}),
									(t.prototype.hardwareShapeDirection = function () {
										return this.manager.isLeftOpen || this.manager.isRightOpen
											? a.default.vector(1, 0)
											: a.default.vector(0, 1);
									}),
									(t.prototype.fixData = function (t) {
										return (
											void 0 === (t = e.prototype.fixData.call(this, t)).hardwareShape &&
												(t.hardwareShape = h.HardwareShape.HingeOnCircle),
											t
										);
									}),
									t
								);
							})(h.HardwareOnCircle);
						t.HingeOnCircle = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CommercialHandle = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(1),
							h = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (
										(t.hardwareShape = l.HardwareShape.CommercialHandle),
										(t.editTool = s.ToolType.editCommercialHandle),
										(t._ignoreArcEdge = !0),
										t
									);
								}
								return (
									i(t, e),
									(t.prototype.hardwareShapeDirection = function () {
										var e = this.edge.tangentInStart();
										return (
											this.polygon.orientation === a.default.ORIENTATION.CCW && (e = e.invert()), e
										);
									}),
									Object.defineProperty(t.prototype, 'hardwareShapeLength', {
										get: function () {
											return 0.5 * this.edge.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), this;
									}),
									(t.prototype.recreate = function () {
										return new t(this.manager).cloneFrom(this);
									}),
									t
								);
							})(l.Handle);
						t.CommercialHandle = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CrossHandle = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(1),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t, l.ShapeType.Handle) || this;
									return (
										(n.manager = t),
										(n.hardwareShape = l.HardwareShape.CrossHandle),
										(n.isVertical = !1),
										(n.editTool = s.ToolType.editCrossHandle),
										(n.divideLine = a.default.segment()),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'maxOffset', {
										get: function () {
											return this.isVertical
												? this.sash.box().xmax - this.sash.box().xmin
												: this.sash.box().ymax - this.sash.box().ymin;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'offset', {
										get: function () {
											return this.maxOffset * this._percentOffset;
										},
										set: function (e) {
											this.percentOffset = e / this.maxOffset;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'offsetPoint', {
										set: function (e) {
											this.offset = this.isVertical
												? e.x - this.sash.box().xmin
												: e.y - this.sash.box().ymin;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hardwareShapeLength', {
										get: function () {
											return this.divideLine.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handlePosition', {
										get: function () {
											return this.position;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.preCreate = function () {
										e.prototype.preCreate.call(this), this.computeDivideLine();
									}),
									(t.prototype.computeAutoOffset = function () {
										return this.isVertical ? (this.manager.isLeftOpen ? 0.9 : 0.1) : 0.5;
									}),
									(t.prototype.computeDivideLine = function () {
										var e = this.isVertical
												? a.default.point(this.sash.box().xmin, 0).translate(this.offset, 0)
												: a.default.point(0, this.sash.box().ymin).translate(0, this.offset),
											t = a.default
												.line(e, this.isVertical ? a.default.vector(1, 0) : a.default.vector(0, 1))
												.intersect(this.sash.polygon.polygon)
												.sort(function (e, t) {
													return e.x - t.x;
												});
										this.divideLine = a.default.segment(
											this.properPosition(t[0]),
											this.properPosition(t[1]),
										);
									}),
									(t.prototype.isValidOffsetPoint = function (e) {
										return this.isVertical
											? e.x > this.sash.box().xmin && e.x < this.sash.box().xmax
											: e.y > this.sash.box().ymin && e.y < this.sash.box().ymax;
									}),
									Object.defineProperty(t.prototype, 'centerPosition', {
										get: function () {
											return this.position;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.alignedWith = function (e) {
										return (
											this.isVertical === e.isVertical &&
											(this.isVertical
												? this.position.x === e.position.x
												: this.position.y === e.position.y)
										);
									}),
									(t.prototype.cloneFrom = function (t) {
										return (
											e.prototype.cloneFrom.call(this, t), (this.isVertical = t.isVertical), this
										);
									}),
									(t.prototype.recreate = function () {
										return new t(this.manager).cloneFrom(this);
									}),
									(t.prototype.toJSON = function () {
										return Object.assign(e.prototype.toJSON.call(this), {
											isVertical: this.isVertical,
										});
									}),
									(t.prototype.deserialize = function (t) {
										return (
											e.prototype.deserialize.call(this, t), (this.isVertical = t.isVertical), this
										);
									}),
									(t.prototype.setDistanceToGround = function (e) {
										var t = this,
											n = this.topFrame,
											r = n.view,
											i = a.default
												.line(n.groundLine.pt.translate(0, -e), a.default.vector(0, 1))
												.intersect(this.sash.polygon.polygon);
										if (2 === i.length) {
											var o = this.allHardwaresAlignedWith();
											(this.offsetPoint = i[0]),
												this.updatePoly(),
												this.draw(r),
												o.forEach(function (e) {
													e.alignTo(t), e.updatePoly(), e.draw(r);
												}),
												r.refresh();
										}
									}),
									(t.prototype.alignTo = function (e, t) {
										void 0 === t && (t = !1), (this.percentOffset = e.percentOffset);
									}),
									(t.prototype.snapHardware = function (e) {
										if (
											this.isVertical === e.isVertical &&
											e.isValidOffsetPoint(this.position) &&
											!(e.isVertical && Math.abs(e.position.x - this.position.x) > 100) &&
											(e.isVertical || !(Math.abs(e.position.y - this.position.y) > 100))
										) {
											var t = a.default
												.line(
													this.position,
													this.isVertical ? a.default.vector(1, 0) : a.default.vector(0, 1),
												)
												.intersect(e.sash.polygon.polygon);
											return {
												snapLine: a.default.segment(
													this.position,
													a.default.segment(t[0], t[1]).middle(),
												),
												snapTarget: this,
												snapOnX: !this.isVertical,
											};
										}
									}),
									Object.defineProperty(t.prototype, 'position', {
										get: function () {
											return this.divideLine.middle();
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hardwareShapeDirection = function () {
										return this.isVertical
											? this.percentOffset > 0.5
												? a.default.vector(0, 1)
												: a.default.vector(0, -1)
											: a.default.vector(1, 0);
									}),
									(t.prototype.properPosition = function (e) {
										var t = this.sash.polygon.edges.find(function (t) {
											return t.contains(e);
										});
										if (!t) throw new Error('Cannot find proper position of kfc cross handle.');
										var n = t.tangentInStart(),
											r =
												this.polygon.orientation === a.default.ORIENTATION.CCW
													? n.rotate90CCW()
													: n.rotate90CW();
										return e.translate(r.multiply(this.sash.profileSize / 2));
									}),
									t
								);
							})(l.Hardware);
						t.CrossHandle = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.KfcHandle = void 0);
						var a = o(n(0)),
							s = n(13),
							l = n(1),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t, l.ShapeType.Handle) || this;
									return (n.manager = t), (n.hardwareShape = l.HardwareShape.KfcHandle), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'oppositeOffset', {
										get: function () {
											var e = this.manager.openDirection === s.OpenDirection.Left,
												t = this.edge.start.x < this.edge.end.x;
											return (e && t) || (!e && !t);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hardwareShapeLength', {
										get: function () {
											return this.topFrame.profileSizeManager.get(l.ShapeType.KfcWaist);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handlePosition', {
										get: function () {
											return this.position;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hardwareShapeDirection = function () {
										return a.default.vector(0, 1);
									}),
									(t.prototype.move = function (e, t, n) {
										var r = this.topFrame.view;
										(this.percentOffset =
											n && n.oppositeOffset !== this.oppositeOffset ? 1 - e : e),
											this.updatePoly(),
											this.draw(r);
									}),
									(t.prototype.setDistanceToGround = function (e, t) {
										var n = this.topFrame.view;
										this.allHardwaresAlignedWith().forEach(function (n) {
											return n.translateY(t - e);
										}),
											this.translateY(t - e),
											n.refresh();
									}),
									(t.prototype.setDistanceToSash = function (e, t) {
										this.setDistanceToGround(e, t);
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), this;
									}),
									(t.prototype.recreate = function () {
										return new t(this.manager).cloneFrom(this);
									}),
									(t.prototype.computeAutoOffset = function () {
										return this.oppositeOffset ? 0.8 : 0.2;
									}),
									(t.prototype.translateY = function (e) {
										var t = this.topFrame.view;
										this.sash.mulManager.dragMullion(this.bar, a.default.vector(0, e)),
											this.sash.updatePoly(),
											this.sash.draw(t);
									}),
									t
								);
							})(l.HardwareOnMullion);
						t.KfcHandle = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EndpointHinge = void 0);
						var a = o(n(0)),
							s = n(1),
							l = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (
										(n.manager = t),
										(n.editTool = void 0),
										(n.hardwareShape = s.HardwareShape.EndpointHinge),
										(n.dim.hidden = !0),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'hardwareShapeLength', {
										get: function () {
											return this.sash.polygon.isEmpty || -1 === this.manager.hingeEdgeIndex
												? -1
												: this.sash.polygon.edge(this.manager.hingeEdgeIndex).length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'draggable', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.cloneFrom = function (t) {
										return e.prototype.cloneFrom.call(this, t), this;
									}),
									(t.prototype.recreate = function () {
										return new t(this.manager).cloneFrom(this);
									}),
									(t.prototype.hardwareShapeDirection = function () {
										var e = this.edge;
										return this.sash.polygon.orientation === a.default.ORIENTATION.CCW
											? 0 === this._percentOffset
												? e.tangentInStart().rotate(Math.PI / 4)
												: e.tangentInEnd().rotate(-Math.PI / 4)
											: 0 === this._percentOffset
											? e.tangentInStart().rotate(-Math.PI / 4)
											: e.tangentInEnd().rotate(Math.PI / 4);
									}),
									(t.prototype.defaultPercentOffsets = function () {
										return [0, 1];
									}),
									t
								);
							})(s.Hinge);
						t.EndpointHinge = l;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						});
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						});
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						});
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Indicator = void 0);
						var o = n(2),
							a = n(7),
							s = n(1),
							l = (function (e) {
								function t(t) {
									var n = e.call(this, s.ShapeType.Indicator, t.sash.innerPoly[0]) || this;
									return (n.manager = t), (n.vshape = []), (n.shapes = []), n;
								}
								return (
									i(t, e),
									(t.prototype.create = function () {
										return (
											this.ignore() ||
												(this.manager.sash.add(this), (this.shapes = []), this.createShapes()),
											this
										);
									}),
									(t.prototype.ignore = function () {
										return !1;
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshape.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										}),
											this.shapes.forEach(function (n, r) {
												var i = r >= t.vshape.length,
													s = i ? a.Artisan.recycleShape(n.poly, e) : t.vshape[r];
												s.setAttr('data', {
													poly: n.poly,
													fcolor: 'none',
													dashed: n.dashed,
													strokeWidth: a.DrawParams.Ins.windowStrokeWidth,
													stroke: o.ShapeColor.windowStrokeColor,
												}),
													s.setAttr('robot', t),
													i && ((t.vshape[t.vshape.length] = s), t.addToGroup([s]));
											});
									}),
									(t.prototype.updatePoly = function () {
										(this.shapes = []), this.create();
									}),
									(t.prototype.translate = function (e) {
										this.shapes.forEach(function (t) {
											t.poly.translate(e);
										});
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, !0),
											0 !== this.vshape.length &&
												(this.vshape.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshape),
												(this.vshape = []));
									}),
									t
								);
							})(s.Shape);
						t.Indicator = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.IndicatorForSash = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(11),
							h = n(2),
							c = n(1),
							u = n(13),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.manager = t), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'pushableIndicatorDashed', {
										get: function () {
											var e = this.manager.openToward === u.OpenToward.Outward;
											return s.DrawParams.Ins.reverseOpenTowardIndicator && (e = !e), e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.createShapes = function () {
										if (this.manager.openDirection === u.OpenDirection.Float)
											return this.createFloatIndicator(), this;
										if (-1 !== this.manager.openDirection.indexOf('Rotate'))
											return this.createRotateIndicator(), this;
										var e = this.manager.hingeEdgeIndex,
											t = this.manager.handleEdgeIndex;
										if (this.manager instanceof u.CirclePushSashHardwareManager) return this;
										if (this.manager.openDirection === u.OpenDirection.None) return this;
										if (
											(-1 === e && -1 === t) ||
											(this.manager.sash instanceof c.PushSash &&
												this.manager.sash.slide !== u.OpenDirection.None)
										)
											(e = l.EdgeFinder.Instance.findIndex(
												c.HardwareOnFrame.directionByOpenDirection(this.manager.openDirection),
												this.polygon,
											)),
												(t = l.EdgeFinder.Instance.findIndex(
													c.HardwareOnFrame.directionByOpenDirection(
														this.manager.openDirection,
														!0,
													),
													this.polygon,
												));
										else if (-1 === e && -1 !== t)
											void 0 !==
												(n = this.manager.properHingeIndexByHandle(this.manager.handleEdgeIndex)) &&
												(e = n);
										else if (-1 !== e && -1 === t) {
											var n;
											void 0 !==
												(n = this.manager.properHandleIndexByHinge(this.manager.hingeEdgeIndex)) &&
												(t = n);
										}
										if (-1 === e || -1 === t) return this;
										var r = this.polygon.edge(e),
											i = this.polygon.edge(t);
										return (
											this.createNormalIndicator(r, i), this.createAdditionalIndicator(r, i), this
										);
									}),
									(t.prototype.createNormalIndicator = function (e, t) {
										var n = s.DrawParams.Ins.europeanStandard ? t : e,
											r = s.DrawParams.Ins.europeanStandard ? e : t,
											i = n.middle(),
											o = [r.start, r.end].map(function (e) {
												if (e.equalTo(n.start) || e.equalTo(n.end)) {
													var t = (r.length / 3) * (e.equalTo(n.start) ? -1 : 1);
													return h.Utils.edgeDirPt(r, t, e);
												}
												return e;
											}),
											l = new c.WinPolygon();
										l.add(a.default.segment(o[0], i)),
											l.add(a.default.segment(i, o[1])),
											l.done(),
											(this.shapes[this.shapes.length] = {
												poly: l,
												dashed: this.pushableIndicatorDashed,
											});
									}),
									(t.prototype.createAdditionalIndicator = function (e, t) {
										var n = this.polygon.edges;
										if (
											4 === n.length &&
											!n.some(function (e) {
												return e instanceof a.default.Arc;
											}) &&
											-1 !== this.manager.openDirection.indexOf('with')
										) {
											var r = this.topOfEdge(e),
												i = this.bottomOfEdge(e),
												o = this.topOfEdge(t),
												l = this.bottomOfEdge(t),
												h = function () {
													var e = a.default.segment(r, o).middle();
													return [a.default.segment(i, e), a.default.segment(e, l)];
												},
												u = function () {
													var e = a.default.segment(l, i).middle();
													return [a.default.segment(r, e), a.default.segment(e, o)];
												},
												p = [];
											if (
												(this.manager.openDirection.indexOf('with_up') > -1
													? (p = s.DrawParams.Ins.europeanStandard ? u() : h())
													: this.manager.openDirection.indexOf('with_down') > -1 &&
													  (p = s.DrawParams.Ins.europeanStandard ? h() : u()),
												p.length > 0)
											) {
												var f = new c.WinPolygon();
												p.forEach(function (e) {
													return f.add(e);
												}),
													f.done(),
													(this.shapes[this.shapes.length] = {
														poly: f,
														dashed: this.pushableIndicatorDashed,
													});
											}
										}
									}),
									(t.prototype.createFloatIndicator = function () {
										var e = this.polygon.box,
											t = new c.WinPolygon(),
											n = a.default.point(e.xmin, e.ymin),
											r = a.default.point(e.xmax, e.ymax),
											i = a.default.point(e.xmin, e.ymax),
											o = a.default.point(e.xmax, e.ymin);
										t.add(a.default.segment(n, r)),
											t.add(a.default.segment(r, i)),
											t.add(a.default.segment(i, o)),
											t.done(),
											this.shapes.push({
												poly: t,
												dashed: this.pushableIndicatorDashed,
											});
									}),
									(t.prototype.createRotateIndicator = function () {
										var e = this.manager.openToward === u.OpenToward.Outward,
											t = s.DrawParams.Ins.reverseOpenTowardIndicator ? !e : !!e,
											n = this.polygon.box,
											r = n.center,
											i = a.default.point(n.xmin, r.y),
											o = a.default.point(n.xmax, r.y),
											l = a.default.point(r.x, n.ymax),
											h = a.default.point(r.x, n.ymin);
										if (this.manager.pivotAtSide)
											if (this.manager.openDirection === u.OpenDirection.Left_Rotate) {
												var p = n.xmin + (n.xmax - n.xmin) / 4;
												(l = a.default.point(p, l.y)), (h = a.default.point(p, h.y));
											} else
												this.manager.openDirection === u.OpenDirection.Right_Rotate &&
													((p = n.xmax - (n.xmax - n.xmin) / 4),
													(l = a.default.point(p, l.y)),
													(h = a.default.point(p, h.y)));
										var f = new c.WinPolygon();
										this.manager.openDirection === u.OpenDirection.Left_Rotate
											? (f.add(a.default.segment(h, o)), f.add(a.default.segment(o, l)))
											: this.manager.openDirection === u.OpenDirection.Right_Rotate
											? (f.add(a.default.segment(h, i)), f.add(a.default.segment(i, l)))
											: this.manager.openDirection === u.OpenDirection.Up_Rotate
											? (f.add(a.default.segment(i, l)), f.add(a.default.segment(l, o)))
											: (f.add(a.default.segment(i, h)), f.add(a.default.segment(h, o))),
											f.done(),
											this.shapes.push({
												poly: f,
												dashed: t,
											});
										var d = new c.WinPolygon();
										this.manager.openDirection === u.OpenDirection.Left_Rotate
											? (d.add(a.default.segment(h, i)), d.add(a.default.segment(i, l)))
											: this.manager.openDirection === u.OpenDirection.Right_Rotate
											? (d.add(a.default.segment(h, o)), d.add(a.default.segment(o, l)))
											: this.manager.openDirection === u.OpenDirection.Up_Rotate
											? (d.add(a.default.segment(i, h)), d.add(a.default.segment(h, o)))
											: (d.add(a.default.segment(i, l)), d.add(a.default.segment(l, o))),
											d.done(),
											this.shapes.push({
												poly: d,
												dashed: !t,
											});
									}),
									(t.prototype.topOfEdge = function (e) {
										return e.start.y > e.end.y ? e.end : e.start;
									}),
									(t.prototype.bottomOfEdge = function (e) {
										return e.start.y > e.end.y ? e.start : e.end;
									}),
									t
								);
							})(c.Indicator);
						t.IndicatorForSash = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.IndicatorForSlide = void 0);
						var a = o(n(0)),
							s = n(1),
							l = n(13),
							h = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (
										(n.manager = t),
										(n.angleMap = new Map([
											[l.OpenDirection.Left, 0],
											[l.OpenDirection.Right, Math.PI],
											[l.OpenDirection.Up, Math.PI / 2],
											[l.OpenDirection.Down, (Math.PI / 2) * 3],
										])),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'openDirection', {
										get: function () {
											return this.manager instanceof l.PushSashHardwareManager
												? this.manager.slide
												: this.manager.openDirection;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.ignore = function () {
										return this.openDirection === l.OpenDirection.None || this.manager.sash.isFixed;
									}),
									(t.prototype.createShapes = function () {
										var e = this.polygon.box,
											t = e.xmax - e.xmin,
											n = e.ymax - e.ymin,
											r =
												this.manager instanceof l.PushSashHardwareManager ||
												!this.manager.isVertical
													? this.arrowShapes(t / 3, n / 5)
													: this.arrowShapes(n / 3, t / 5);
										this.manager.pullupEnabled &&
											!this.manager.isVertical &&
											this.makeTail(r, n / 5, this.openDirection);
										var i = this.angleMap.get(this.openDirection);
										this.shapes.forEach(function (e) {
											return e.poly.rotate(i, a.default.point());
										});
										var o = this.polygon.box.center;
										return (
											this.shapes.forEach(function (e) {
												return e.poly.translate(a.default.vector(o.x, o.y));
											}),
											this
										);
									}),
									(t.prototype.arrowShapes = function (e, t) {
										var n = t / 5,
											r = a.default.point(-e / 2, 0),
											i = [r.translate(n, n), r.translate(n, -n)],
											o = new s.WinPolygon();
										o.add(a.default.segment(i[0], r)),
											o.add(a.default.segment(r, i[1])),
											o.done(),
											(this.shapes[this.shapes.length] = {
												poly: o,
												dashed: !1,
											});
										var l = r.translate(e, 0);
										return (
											(o = new s.WinPolygon()).add(a.default.segment(r, l)),
											o.done(),
											(this.shapes[this.shapes.length] = {
												poly: o,
												dashed: !1,
											}),
											l
										);
									}),
									(t.prototype.makeTail = function (e, t, n) {
										var r = new s.WinPolygon(),
											i = n === l.OpenDirection.Left ? 1 : -1;
										r.add(a.default.segment(e, e.translate(0, t * i))),
											r.done(),
											(this.shapes[this.shapes.length] = {
												poly: r,
												dashed: !1,
											});
									}),
									t
								);
							})(s.Indicator);
						t.IndicatorForSlide = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.IndicatorForAntiTheft = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(7),
							h = n(13),
							c = n(2),
							u = n(1),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, u.ShapeType.Indicator, t.polygon) || this;
									return (n.host = t), (n.vshape = []), (n.shapes = []), n;
								}
								return (
									i(t, e),
									(t.prototype.create = function () {
										return (
											this.host.withSash ||
												!this.host.openable ||
												this.host.shutManager.orientation !== h.ShutterOrientation.vertical ||
												(this.host.add(this), (this.shapes = []), this.createShapes()),
											this
										);
									}),
									(t.prototype.updatePoly = function () {
										(this.shapes = []), this.create();
									}),
									(t.prototype.translate = function (e) {
										this.shapes.forEach(function (t) {
											t.poly.translate(e);
										});
									}),
									(t.prototype.createShapes = function () {
										var e = s.EdgeFinder.Instance.findIndex(
												u.HardwareOnFrame.directionByOpenDirection(h.OpenDirection.Down),
												this.host.polygon,
											),
											t = s.EdgeFinder.Instance.findIndex(
												u.HardwareOnFrame.directionByOpenDirection(h.OpenDirection.Down, !0),
												this.host.polygon,
											),
											n = this.host.polygon.edge(e),
											r = this.host.polygon.edge(t);
										return this.createNormalIndicator(n, r), this;
									}),
									(t.prototype.createNormalIndicator = function (e, t) {
										var n = l.DrawParams.Ins.europeanStandard ? t : e,
											r = l.DrawParams.Ins.europeanStandard ? e : t,
											i = n.middle(),
											o = [r.start, r.end].map(function (e) {
												if (e.equalTo(n.start) || e.equalTo(n.end)) {
													var t = (r.length / 3) * (e.equalTo(n.start) ? -1 : 1);
													return c.Utils.edgeDirPt(r, t, e);
												}
												return e;
											}),
											s = new u.WinPolygon();
										s.add(a.default.segment(o[0], i)),
											s.add(a.default.segment(i, o[1])),
											s.done(),
											(this.shapes[this.shapes.length] = {
												poly: s,
												dashed: !1,
											});
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshape.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										}),
											this.shapes.forEach(function (n, r) {
												var i = r >= t.vshape.length,
													o = i ? l.Artisan.recycleShape(n.poly, e) : t.vshape[r];
												o.setAttr('data', {
													poly: n.poly,
													fcolor: 'none',
													dashed: n.dashed,
													strokeWidth: l.DrawParams.Ins.windowStrokeWidth,
													stroke: c.ShapeColor.windowStrokeColor,
												}),
													o.setAttr('robot', t),
													i && ((t.vshape[t.vshape.length] = o), t.addToGroup([o]));
											});
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, !0),
											0 !== this.vshape.length &&
												(this.vshape.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshape),
												(this.vshape = []));
									}),
									t
								);
							})(u.Shape);
						t.IndicatorForAntiTheft = p;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SashUtil = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(9),
							h = n(13),
							c = n(11),
							u = n(2),
							p = n(1),
							f = (function () {
								function e() {}
								return (
									(e.isSash = function (e) {
										return e instanceof p.DoubleSash || e instanceof p.Slide || e instanceof p.Fold
											? e
											: void 0;
									}),
									(e.adjustEdDock = function (e, t, n, r, o) {
										if (
											(void 0 === o && (o = !1),
											t.orientation === e.orientation && t.isRectangle() && e.isRectangle())
										) {
											var a = t.edges,
												s = e.edges;
											if (a.length === s.length) {
												var l = t.edDock.clone(),
													h = a
														.filter(function (e) {
															return u.Utils.isSegVertical(e);
														})
														.sort(function (e, t) {
															return e.start.x - t.start.x;
														});
												if (0 !== h.length) {
													var c = h[0],
														p = a.findIndex(function (e) {
															return e.start.equalTo(c.start) && e.end.equalTo(c.end);
														});
													l.docks = i(l.docks.slice(p), l.docks.slice(0, p));
													var f = s
														.filter(function (e) {
															return u.Utils.isSegVertical(e);
														})
														.sort(function (e, t) {
															return e.start.x - t.start.x;
														});
													if (0 !== f.length) {
														var d = f[0],
															g = s.findIndex(function (e) {
																return e.start.equalTo(d.start) && e.end.equalTo(d.end);
															}),
															y = i(s.slice(g), s.slice(0, g)),
															m = function (t) {
																for (
																	var n = function (n) {
																			var r = s[n],
																				i = y.findIndex(function (e) {
																					return e.start.equalTo(r.start) && e.end.equalTo(r.end);
																				});
																			-1 !==
																			t.findIndex(function (e) {
																				return e === i;
																			})
																				? (e.edDock.docks[n] = u.Dock.Sash())
																				: (e.edDock.docks[n] = l.docks[i]);
																		},
																		r = 0;
																	r < s.length;
																	r++
																)
																	n(r);
															};
														m(
															o
																? 0 === n
																	? [3]
																	: n === r - 1
																	? [1]
																	: [1, 3]
																: 0 === n
																? [2]
																: n === r - 1
																? [0]
																: [0, 2],
														);
													}
												}
											}
										}
									}),
									(e.sashToBottom = function (e) {
										var t = e.topFrame;
										if (
											!(
												t.polygon instanceof p.SingleTrackPolygon &&
												t.polygon.hidden.some(function (e) {
													return e === c.Direction.Down;
												})
											)
										) {
											var n = i(
													t.sashManager.sashes,
													t.sashManager.doubleSashes,
													t.sashManager.kfcSashes,
													t.sashManager.doubleKfcSashes,
												),
												r = e.polygon.edges,
												o = function (e) {
													return (
														2 ===
														e.sideEdges.filter(function (e) {
															return (
																!(e instanceof a.default.Arc) &&
																n.some(function (t) {
																	return u.Utils.polyConcideSeg(t.polygon, e);
																})
															);
														}).length
													);
												},
												f = new l.VirtualBarFix(t);
											f.record();
											var d,
												g,
												y,
												m = c.EdgeFinder.Instance.findIndex2(c.Direction.Left, e.polygon),
												v = c.EdgeFinder.Instance.findIndex2(c.Direction.Right, e.polygon),
												w = c.EdgeFinder.Instance.findIndex2(c.Direction.Up, e.polygon),
												b = [];
											r[m] instanceof a.default.Segment && ((d = r[m]), b.push(d)),
												r[v] instanceof a.default.Segment && ((g = r[v]), b.push(g)),
												r[w] instanceof a.default.Segment && ((y = r[w]), b.push(y)),
												t.frameManager.bars
													.filter(function (e) {
														return b.some(function (t) {
															return u.Utils.polyConcideSeg(e.polygon, t);
														});
													})
													.forEach(function (e) {
														var n = e.polygon.edges,
															r = e.polygon.mulShape;
														if (r instanceof a.default.Segment) {
															var i = e.polyId.idx;
															r.start.y < r.end.y && (i = (i + 1) % n.length),
																(t.frameManager.ejw[i] = u.EdgeJointWay.Vertical);
														}
													});
											var S,
												_,
												P,
												x,
												D = t.mulManager.bars;
											if (
												(d &&
													(S = D.find(function (e) {
														return u.Utils.polyConcideSeg(e.polygon, d);
													})),
												g &&
													(_ = D.find(function (e) {
														return u.Utils.polyConcideSeg(e.polygon, g);
													})),
												y &&
													(P = D.find(function (e) {
														return u.Utils.polyConcideSeg(e.polygon, y);
													})),
												S)
											) {
												var T = s.DrawParams.Ins.showInnerSpaceDim || o(S);
												(x = t.mulManager.splitter.lines[S.polyId.idx]).start.split ===
													u.EndpointSplitWay.None && (x.start.split = u.EndpointSplitWay.Through),
													x.end.split === u.EndpointSplitWay.None &&
														(x.end.split = u.EndpointSplitWay.Through),
													x.alignType !== p.AlignTypeEnum.center ||
														T ||
														(x.alignType = p.AlignTypeEnum.right);
											}
											if (_)
												(T = s.DrawParams.Ins.showInnerSpaceDim || o(_)),
													(x = t.mulManager.splitter.lines[_.polyId.idx]).start.split ===
														u.EndpointSplitWay.None && (x.start.split = u.EndpointSplitWay.Through),
													x.end.split === u.EndpointSplitWay.None &&
														(x.end.split = u.EndpointSplitWay.Through),
													x.alignType !== p.AlignTypeEnum.center ||
														T ||
														(x.alignType = p.AlignTypeEnum.left);
											if (P && !s.DrawParams.Ins.showInnerSpaceDim) {
												var O = t.mulManager.splitter.lines[P.polyId.idx];
												if (O.alignType === p.AlignTypeEnum.center) {
													O.alignType = p.AlignTypeEnum.left;
													var M = [t];
													h.MullionManager.allBarsAlignedWith(P).forEach(function (e) {
														(e.iHost.mulManager.splitter.lines[e.bar.polyId.idx].alignType =
															O.alignType),
															e.iHost instanceof p.Frame &&
																M.every(function (t) {
																	return t !== e.iHost;
																}) &&
																M.push(e.iHost);
													}),
														M.forEach(function (e) {
															return e.dim.updatePoly();
														});
												}
											}
											t.updatePoly(), f.recovery();
											var E = r[c.EdgeFinder.Instance.findIndex2(c.Direction.Down, e.polygon)];
											if (E instanceof a.default.Segment) {
												var I = t.frameManager.bars.find(function (e) {
													return u.Utils.polyConcideSeg(e.polygon, E);
												});
												I && t.frameManager.setVirtual(I.polyId, !0);
											}
										}
									}),
									e
								);
							})();
						t.SashUtil = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Sash = void 0);
						var l = s(n(0)),
							h = n(7),
							c = n(6),
							u = n(2),
							p = n(1),
							f = n(13),
							d = (function (e) {
								function t(t, n, r, i) {
									void 0 === i && (i = p.ShapeType.Sash);
									var o = e.call(this, i, n) || this;
									(o.polyId = r),
										(o.innerPoly = []),
										(o.enabled = !0),
										(o.offvec = l.default.vector()),
										(o.offvecEnabled = !1),
										(o.sashNumber = 0),
										(o.sashManager = new f.SashManager(o, !1)),
										t.add(o),
										(o.view = o.topFrame.view);
									var a = o.polygon.edges.map(function () {
										return u.EdgeJointWay.Vertical;
									});
									o.frameManager = new f.FrameManager(o, i === p.ShapeType.ShadePushSash ? a : []);
									var s =
										o.type === p.ShapeType.ShadePushSash
											? p.ShapeType.Shade
											: o.type === p.ShapeType.Screen
											? p.ShapeType.Screen
											: p.ShapeType.Glass;
									return (
										(o.mulManager = new f.MullionManager(o, s)),
										(o.dim = new p.Dim(o)),
										(o.borders = new p.Border(o, !0)),
										o.borders.updatePoly(),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'singleHMul', {
										get: function () {
											if (1 !== this.mulManager.bars.length) return !1;
											var e = this.mulManager.bars[0].polygon.mulShape;
											return e instanceof l.default.Segment && u.Utils.isSegHorizontal(e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'lockCount', {
										get: function () {
											return this.hardwareManager instanceof f.PushSashHardwareManager
												? this.hardwareManager.handle.hidden
													? 0
													: 1
												: this.hardwareManager instanceof f.SlideHardwareManager
												? a(this.hardwareManager.locks, this.hardwareManager.lock2s).filter(
														function (e) {
															return !e.hidden;
														},
												  ).length
												: 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hingeCount', {
										get: function () {
											return this.hardwareManager instanceof f.PushSashHardwareManager
												? this.hardwareManager.hingeCount
												: 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'mulHeight', {
										get: function () {
											if (0 === this.mulManager.splitter.lines.length) return 0;
											var e = this.mulManager.splitter.lines[0].line;
											return e instanceof l.default.Line && l.default.Utils.EQ_0(e.norm.x)
												? this.polygon.box.ymax - e.pt.y
												: 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'inScreenSashGroup', {
										get: function () {
											var e = this;
											if (!this.isStandalone) return !1;
											var t = this.topFrame.sashManager.sashes.filter(function (t) {
												return t.polyId.equalTo(e.polyId);
											});
											if (2 !== t.length) return !1;
											var n =
													void 0 !==
													t.find(function (e) {
														return e.type === p.ShapeType.Sash;
													}),
												r =
													void 0 !==
													t.find(function (e) {
														return e.type === p.ShapeType.Screen;
													});
											return n && r;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'serial', {
										get: function () {
											var e = this.mulManager.glasses.find(function (e) {
												return e.serial.text;
											});
											return e ? e.serial.text : '';
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.box = function () {
										return this.polygon.box;
									}),
									Object.defineProperty(t.prototype, 'isCircle', {
										get: function () {
											return void 0 !== this.polygon.circlePolygon();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isStandalone', {
										get: function () {
											return this.parent instanceof p.Frame;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'jointWay', {
										get: function () {
											return this.frameManager.getJointWay(0);
										},
										set: function (e) {
											var t = this;
											this.polygon.edges.forEach(function (n, r) {
												t.frameManager.ejw[r] = e;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'profileSize', {
										get: function () {
											return this.topFrame.profileSizeManager.get(this.type);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dragModify', {
										get: function () {
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'usedPoly', {
										get: function () {
											return this.sashManager ? this.sashManager.usedPoly : [];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'unusedPoly', {
										get: function () {
											var e = this.usedPoly;
											return this.avaiablePoly.filter(function (t) {
												return !e.some(function (e) {
													return t.polyId.equalTo(e);
												});
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'avaiablePoly', {
										get: function () {
											return this.mulManager
												? this.mulManager.splitter.avaiablePoly
												: this.frameManager.innerPoly.map(function (e) {
														return e.clone();
												  });
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'coexistType', {
										get: function () {
											return [
												this.type === p.ShapeType.Sash ? p.ShapeType.Screen : p.ShapeType.Sash,
												p.ShapeType.AntiTheft,
											];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'highlighted', {
										get: function () {
											return this.frameManager.bars.every(function (e) {
												return e.highlighted;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'inactive', {
										get: function () {
											return (
												this.frameManager.bars.every(function (e) {
													return !e.highlighted;
												}) && this.mulManager.inactive
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'selected', {
										get: function () {
											return (
												this.frameManager.selected ||
												this.mulManager.glasses.some(function (e) {
													return e.highlighted;
												})
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.applyFiller = function () {
										(this.mulManager.fillerManager.defaultType =
											this.type === p.ShapeType.ShadePushSash
												? p.ShapeType.Shade
												: this.type === p.ShapeType.Screen
												? p.ShapeType.Screen
												: p.ShapeType.Glass),
											this.mulManager.fillerManager.createFiller(!0);
									}),
									(t.prototype.delete = function () {
										this.mulManager.delete(this.topFrame.view, this.sashManager),
											this.sashManager.delete(this.mulManager.addFiller, this.topFrame.view);
									}),
									(t.prototype.toJSON = function () {
										return {
											type: this.type,
											polyId: this.polyId.toJSON(),
											enabled: this.enabled,
											offvec: this.offvec.toJSON(),
											fm: this.frameManager.toJSON(),
											mm: this.mulManager.toJSON(),
											hm: this.hardwareManager ? this.hardwareManager.toJSON() : null,
											dm: this.dim.toJSON(),
											sm: this.sashManager.toJSON(),
										};
									}),
									(t.prototype.deserialize = function (e) {
										var t = e.type !== this.type;
										return (
											(this.type = e.type),
											t && this.applyFiller(),
											(this.polyId = u.PolyId.createByJson(e.polyId)),
											(this.enabled = e.enabled),
											(this.offvec = l.default.vector(e.offvec.x, e.offvec.y)),
											this.frameManager.deserialize(e.fm),
											this.mulManager.deserialize(e.mm),
											e.hm && this.hardwareManager.deserialize(e.hm),
											e.mm &&
												e.mm.dbs &&
												this.mulManager.decorationBarManager.deserialize(e.mm.dbs),
											e.dm && this.dim.deserialize(e.dm),
											e.sm && this.sashManager.deserialize(e.sm),
											this
										);
									}),
									(t.prototype.addMullion = function (e, t) {
										void 0 === t && (t = {});
										var n = this.mulManager.addMullion(e, t);
										return this.dim.updatePoly(), n;
									}),
									(t.prototype.addDecorationBar = function (e, t) {
										var n = this.mulManager.addDecorationBar(e, t);
										return n === f.addDecorationBarRet.create && this.updatePoly(), n;
									}),
									(t.prototype.dragMullion = function (e, t) {
										if (e.parentId !== this.id) return !1;
										var n = this.mulManager.dragMullion(e, t);
										return (
											n && (this.updatePoly(), this.topFrame.sashManager.filterDuplicateDims()), n
										);
									}),
									(t.prototype.dragInnerMullion = function (e, t, n) {
										if (e.parentId !== this.id) return !1;
										var r = this.mulManager.dragInnerMullion(e, t, n);
										return this.dim.updatePoly(), r;
									}),
									(t.prototype.updatePoly = function (e) {
										var t = 0;
										e &&
											((t = e.box.ymax - this.polygon.box.ymax),
											(this.polygon = e.translate(this.offvec))),
											this.clearChildren(),
											this.frameManager.recreateBars(),
											h.DrawParams.Ins.sashMullionFixedToSashBottom &&
												t &&
												this.applyMullionPositions(t),
											this.mulManager.updatePoly(),
											this.sashManager.recreate(this.mulManager.findPoly),
											this.hardwareManager && this.hardwareManager.recreate(),
											this.dim.updatePoly(this.polygon),
											this.add(this.dim),
											this.add(this.borders),
											this.borders.updatePoly();
									}),
									(t.prototype.translate = function (e) {
										this.frameManager.translate(e),
											this.mulManager.translate(e),
											this.hardwareManager && this.hardwareManager.translate(e),
											this.dim.translate(e);
									}),
									(t.prototype.highlight = function (e) {
										this.frameManager.highlight(e),
											e || (this.mulManager.highlight(e), this.mulManager.hideAssist());
									}),
									(t.prototype.hitTest = function (e) {
										var t = u.Utils.applyMatrixMultiply(this.topFrame.getParentMatrices());
										return this.polygon.clone().transform(t).contains(e);
									}),
									(t.prototype.hitBar = function (e, t) {
										var n = u.HitResult.None,
											r = this.mulManager.hitBar(e, t);
										if (r !== u.HitResult.None) {
											if (
												(this.frameManager.hideAssist(),
												r === u.HitResult.Glass && !this.frameManager.selected)
											)
												return (
													this.frameManager.highlight(!0),
													this.mulManager.highlight(!1),
													u.HitResult.All
												);
											this.frameManager.highlight(!1);
										}
										return (
											(n = this.frameManager.hitBar(e, t)),
											(n = r !== u.HitResult.None ? u.HitResult.None : n) === u.HitResult.Control ||
											r === u.HitResult.Control
												? u.HitResult.Control
												: n === u.HitResult.Bar
												? (t.eventBus.emit({
														type: c.EventType.sash_bar_settings,
														payload: new c.SashBarSettings(
															this.hardwareManager,
															this.frameManager.activeBarIndex,
															t,
														),
												  }),
												  u.HitResult.Bar)
												: r === u.HitResult.Bar || r === u.HitResult.Bead
												? r
												: ((r =
														r === u.HitResult.Glass || r === u.HitResult.GlassHole
															? u.HitResult.None
															: r),
												  n === u.HitResult.None && r === u.HitResult.None
														? u.HitResult.None
														: u.HitResult.All)
										);
									}),
									(t.prototype.updateFrame = function (e) {
										void 0 === e && (e = !1), this.mulManager.updatePoly(), this.dim.updatePoly();
									}),
									(t.prototype.hideAssist = function () {
										this.frameManager.hideAssist(), this.mulManager.hideAssist();
									}),
									(t.prototype.snapEdge = function (e, t, n) {
										return this.mulManager.snapEdge(e, t, n);
									}),
									(t.prototype.findBarByPolyId = function (e) {
										return a(this.frameManager.bars, this.mulManager.bars).find(function (t) {
											return t.polyId.equalTo(e);
										});
									}),
									(t.prototype.applyMullionPositions = function (e) {
										this.mulManager.splitter.lines.forEach(function (t) {
											if (
												t.line instanceof l.default.Line &&
												t.equalSplit === u.EqualSplitType.None
											) {
												var n = t.line;
												u.Utils.isParallel(
													n,
													l.default.line(l.default.point(), l.default.point(1, 0)),
												) && t.translate(l.default.vector(0, e));
											}
										});
									}),
									t
								);
							})(p.Shape);
						t.Sash = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.GuardSash = void 0);
						var o = n(59),
							a = n(9),
							s = n(1),
							l = n(1),
							h = n(2),
							c = n(11),
							u = n(16),
							p = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t, n, r, o.ShapeType.GuardSash) || this;
									return (
										(i.height = 1e3),
										i.makeRenderPoly(),
										i.frameManager.recreateBars(),
										i.mulManager.updatePoly(),
										(i.heightDim = new l.GuardSashHeightDim(i)),
										i.polygon.isEmpty || i.heightDim.updatePoly(),
										i
									);
								}
								return (
									i(t, e),
									(t.prototype.updatePoly = function (t) {
										t && (this.polygon = t),
											this.makeRenderPoly(),
											e.prototype.updatePoly.call(this),
											this.heightDim.updatePoly();
									}),
									(t.prototype.toJSON = function () {
										return Object.assign(e.prototype.toJSON.call(this), {
											ht: this.height,
										});
									}),
									(t.prototype.deserialize = function (t) {
										return e.prototype.deserialize.call(this, t), (this.height = t.ht), this;
									}),
									Object.defineProperty(t.prototype, 'Zindex', {
										get: function () {
											return h.DisplayUtils.sortSashZIndexes(this);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.makeRenderPoly = function () {
										if (!this.polygon.isEmpty) {
											var e = this.polygon.clone(),
												t = c.EdgeFinder.Instance.findIndex(c.Direction.Down, e),
												n = c.EdgeFinder.Instance.findIndex(c.Direction.Up, e),
												r = Array(4).fill(this.profileSize);
											r[t] = r[n] = 0;
											var i = (e = this.findOuterPoly(e, r)).box.clone();
											(i.ymin = i.ymax - this.height),
												(this.frameManager.renderPoly = u.SingleTrackPolygon.createFromBox(i, [
													c.Direction.Up,
													c.Direction.Down,
												]));
										}
									}),
									(t.prototype.findOuterPoly = function (e, t) {
										return new u.WinPolygon(
											a.Frametify.findParallelEdges(e.edges, t, !1, e.orientation, !0),
										);
									}),
									(t.prototype.hitBar = function (e, t) {
										return this.mulManager.hitBar(e, t);
									}),
									t
								);
							})(s.Sash);
						t.GuardSash = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SlideSash = void 0);
						var l = s(n(0)),
							h = n(7),
							c = n(2),
							u = n(11),
							p = n(1),
							f = n(13),
							d = (function (e) {
								function t(t, n, r, i, o, a, s) {
									void 0 === i && (i = p.ShapeType.Sash),
										void 0 === o && (o = -1),
										void 0 === a && (a = -1),
										void 0 === s && (s = -1);
									var l = e.call(this, t, n, r, i) || this;
									return (
										(l.host = t),
										(l.trackIndex = o),
										(l.columnIndex = a),
										(l._fixedWidth = s),
										(l.isFixed = !1),
										(l.attrs = {}),
										(l.hardwareManager = new f.SlideHardwareManager(l)),
										(l.pushSashHardwareManager = new f.PushSashHardwareManager(l)),
										(l.pushSashHardwareManager.openDirection = f.OpenDirection.None),
										(l.pushSashHardwareManager.handle.hidden = !0),
										l
									);
								}
								return (
									i(t, e),
									(t.prototype.updatePoly = function (t) {
										e.prototype.updatePoly.call(this, t), this.switchPtStyle();
									}),
									Object.defineProperty(t.prototype, 'interlockOnRight', {
										get: function () {
											var e = this;
											return !!this.host.sashes.find(function (t) {
												return (
													(t.trackIndex === e.trackIndex - 1 ||
														t.trackIndex === e.trackIndex + 1) &&
													t.columnIndex === e.columnIndex + 1
												);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'interlockOnLeft', {
										get: function () {
											var e = this;
											return !!this.host.sashes.find(function (t) {
												return (
													(t.trackIndex === e.trackIndex - 1 ||
														t.trackIndex === e.trackIndex + 1) &&
													t.columnIndex === e.columnIndex - 1
												);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fixedWidth', {
										get: function () {
											return this._fixedWidth;
										},
										set: function (e) {
											var t = this.parent,
												n = this._fixedWidth;
											(this._fixedWidth = e), t.remainingWidth <= 0 && (this._fixedWidth = n);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'trackNo', {
										get: function () {
											return this.host.trackIndexToNo(this.trackIndex);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'locks', {
										get: function () {
											return a(this.hardwareManager.locks, this.hardwareManager.lock2s);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.trackIndex = this.trackIndex),
											(t.columnIndex = this.columnIndex),
											(t.fixedWidth = this.fixedWidth),
											(t.isFixed = this.isFixed),
											(t.attrs = this.attrs),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										return (
											e.prototype.deserialize.call(this, t),
											(t = this.fixData(t)),
											(this.trackIndex = t.trackIndex),
											(this.columnIndex = t.columnIndex),
											(this._fixedWidth = t.fixedWidth),
											(this.host.bottomDims[this.columnIndex].hidden = -1 === this._fixedWidth),
											(this.isFixed = t.isFixed),
											t.attrs && (this.attrs = t.attrs),
											this
										);
									}),
									(t.prototype.fixData = function (e) {
										return (
											void 0 === e.isFixed && void 0 !== e.hm.isFixed && (e.isFixed = e.hm.isFixed),
											e
										);
									}),
									(t.prototype.switchPtStyle = function () {
										if (!this.host.asPtDoor)
											return (
												(this.pushSashHardwareManager.openDirection = f.OpenDirection.None),
												(this.pushSashHardwareManager.hingeCount = 0),
												void this.pushSashHardwareManager.recreate()
											);
										var e = this.hardwareManager.openDirection,
											t = f.OpenDirection.None;
										0 === this.columnIndex && e === f.OpenDirection.Left
											? (t = f.OpenDirection.Left)
											: this.columnIndex === this.host.columnCount - 1 &&
											  e === f.OpenDirection.Right &&
											  (t = f.OpenDirection.Right);
										var n =
											(t === f.OpenDirection.Left && 0 === this.columnIndex) ||
											(t === f.OpenDirection.Right &&
												this.columnIndex === this.host.columnCount - 1);
										(this.pushSashHardwareManager.hingeCount = n ? 3 : 0),
											(this.pushSashHardwareManager.openDirection = t),
											(this.pushSashHardwareManager.openToward =
												0 === this.trackIndex ? f.OpenToward.Inward : f.OpenToward.Outward),
											this.pushSashHardwareManager.recreate();
									}),
									(t.prototype.updateFixedSashToFixedGlass = function () {
										var e = this,
											t = this.topFrame,
											n = this.isFixed && h.DrawParams.Ins.fixedSashToFixedGlass,
											r = a(t.mulManager.bars, t.frameManager.bars);
										this.polygon.edges.forEach(function (i, o) {
											if (!(i instanceof l.default.Arc))
												if (
													r.some(function (e) {
														return c.Utils.polyConcideSeg(e.polygon, i);
													}) &&
													n
												)
													e.frameManager._edgeWidth[o] = 1;
												else {
													var a = e.polygon.box.center,
														s = t.profileSizeManager.sash;
													l.default.segment(a, a.translate(0, -9999)).intersect(i).length > 0
														? (s = t.profileSizeManager.upSash)
														: l.default.segment(a, a.translate(0, 9999)).intersect(i).length > 0 &&
														  (s = t.profileSizeManager.downSash);
													var h = u.EdgeFinder.Instance.findDirection(e.polygon, o);
													((h === u.Direction.Right && e.interlockOnRight) ||
														(h === u.Direction.Left && e.interlockOnLeft)) &&
														(s = t.profileSizeManager.interlock),
														(e.frameManager._edgeWidth[o] = s);
												}
										}),
											this.isFixed &&
												this.hardwareManager.hardwares.forEach(function (e) {
													return (e.hidden = !0);
												});
									}),
									t
								);
							})(p.Sash);
						t.SlideSash = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PushSash = t.PushSashAssignWay = void 0);
						var s,
							l = a(n(0)),
							h = n(7),
							c = n(6),
							u = n(13),
							p = n(2),
							f = n(1);
						!(function (e) {
							(e.InwardLeft = 'IL'),
								(e.InwardRight = 'IR'),
								(e.InwardDown = 'ID'),
								(e.InwardDownLeft = 'IDL'),
								(e.InwardDownRight = 'IDR'),
								(e.InwardUp = 'IU'),
								(e.InwardUpLeft = 'IUL'),
								(e.InwardUpRight = 'IUR'),
								(e.OutwardLeft = 'OL'),
								(e.OutwardRight = 'OR'),
								(e.OutwardUp = 'OU'),
								(e.OutwardUpLeft = 'OUL'),
								(e.OutwardUpRight = 'OUR'),
								(e.OutwardDown = 'OD'),
								(e.OutwardDownLeft = 'ODL'),
								(e.OutwardDownRight = 'ODR'),
								(e.None = 'N'),
								(e.Custom = 'C'),
								(e.InwardFloat = 'IF'),
								(e.OutwardFloat = 'OF'),
								(e.InwardDownRotate = 'IDW'),
								(e.OutwardDownRotate = 'ODW');
						})((s = t.PushSashAssignWay || (t.PushSashAssignWay = {})));
						var d = (function (e) {
							function t(t, n, r, i) {
								void 0 === i && (i = f.ShapeType.Sash);
								var o = e.call(this, t, n, r, i) || this;
								return (
									(o.opened = h.DrawParams.Ins.sashOpen),
									(o.isDoor = h.DrawParams.Ins.sashAsDoor),
									(o.fixedWidth = -1),
									(o.withTurningFrame = h.DrawParams.Ins.withTurningFrameForSash),
									(o.truncateFrame = !1),
									(o.openDegree = 90),
									(o.hardwareManager = new u.PushSashHardwareManager(o)),
									i === f.ShapeType.ShadePushSash && (o.hardwareManager.handle.hidden = !0),
									o.isDoor &&
										((o.hardwareManager.handleType = f.HardwareShape.Handle2),
										(o.hardwareManager.hingeCount = 3)),
									(o.bottomDim = new f.SashBottomDim(o)),
									(o.bottomDim.hidden = !0),
									(o.label = new f.Label(
										o,
										l.default.point(),
										h.DrawParams.Ins.displayTurningFrameForSash && o.withTurningFrame
											? '转向框'
											: '',
									)),
									(o.label.align = f.TextAlign.Right),
									o.initPushSash(),
									o
								);
							}
							return (
								i(t, e),
								(t.prototype.initPushSash = function () {
									this.hardwareManager.create(), this.isStandalone && this.updateLabel();
								}),
								Object.defineProperty(t.prototype, 'withTurningFrameLabel', {
									get: function () {
										return this.label;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'openToward', {
									get: function () {
										return this.hardwareManager.openToward;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'siblingSash', {
									get: function () {
										var e = this;
										return this.topFrame.sashManager.sashes
											.filter(function (t) {
												return t !== e;
											})
											.filter(function (t) {
												return t.polyId.equalTo(e.polyId);
											})
											.filter(function (e) {
												return e instanceof t;
											})
											.pop();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'handleHeight', {
									get: function () {
										var e = this.hardwareManager.handle;
										return e.hidden ? 0 : this.polygon.box.ymax - e.position.y;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.hitBar = function (t, n) {
									var r,
										i,
										a = !1,
										s = p.HitResult.None,
										l = this.sashManager.allSashes;
									try {
										for (var h = o(l), c = h.next(); !c.done; c = h.next()) {
											var u = c.value,
												f = u.hitTest(t),
												d = u.hitBar(t, n);
											f &&
												((a = !0),
												(s = d === p.HitResult.All ? p.HitResult.Sash : d),
												d === p.HitResult.All && this.emitSashSetting(u, n));
										}
									} catch (e) {
										r = {
											error: e,
										};
									} finally {
										try {
											c && !c.done && (i = h.return) && i.call(h);
										} finally {
											if (r) throw r.error;
										}
									}
									return a ? s : e.prototype.hitBar.call(this, t, n);
								}),
								(t.prototype.emitSashSetting = function (e, t) {
									t.eventBus.emit({
										type: c.EventType.sash_settings,
										payload: new c.SashSettings(e.hardwareManager, t),
									});
								}),
								(t.prototype.updatePoly = function (t) {
									e.prototype.updatePoly.call(this, t),
										(this.bottomDim.hidden = -1 === this.fixedWidth),
										this.bottomDim.updatePoly(),
										this.updateLabel();
								}),
								(t.prototype.updateLabel = function () {
									if (this.isStandalone) {
										if (this.withTurningFrame || this.truncateFrame) {
											var e = l.default.point();
											if (!this.polygon.isEmpty) {
												var t = this.mulManager.fillerManager.fillers.pop();
												if (!t) return;
												var n = t.polygon.box,
													r = this.label.fontSize / 2;
												e = l.default
													.point(n.xmax, n.ymin)
													.translate(l.default.vector(-15, r + 15));
											}
											this.label.position = e;
										}
										(this.label.text = [
											this.truncateFrame ? '截断外框' : '',
											h.DrawParams.Ins.displayTurningFrameForSash && this.withTurningFrame
												? '转向框'
												: '',
										].join(' ')),
											this.label.updatePoly();
									} else this.label.hidden || ((this.label.hidden = !0), this.label.updatePoly());
								}),
								(t.prototype.fixTapIdx = function () {
									if (this.parent instanceof f.Frame) {
										if (this.hardwareManager.openToward === u.OpenToward.Inward)
											return this.opened ? void (this.tapIdx = 6) : void (this.tapIdx = 5);
										this.tapIdx = 4;
									}
								}),
								Object.defineProperty(t.prototype, 'slide', {
									get: function () {
										return this.hardwareManager.slide;
									},
									set: function (e) {
										this.hardwareManager.slide = e;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'sashAssignWay', {
									get: function () {
										var e,
											t,
											n = this.hardwareManager;
										if (n.openDirection === u.OpenDirection.None) return s.None;
										try {
											for (var r = o(this.sashAssignWayMap), i = r.next(); !i.done; i = r.next()) {
												var a = i.value,
													l = a[1];
												if (n.openToward === l.toward && n.openDirection === l.direction)
													return a[0];
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												i && !i.done && (t = r.return) && t.call(r);
											} finally {
												if (e) throw e.error;
											}
										}
										return s.Custom;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.properOpenDirectionByPosition = function (e) {
									return e.x > 0 ? u.OpenDirection.Right : u.OpenDirection.Left;
								}),
								Object.defineProperty(t.prototype, 'sashAssignWayMap', {
									get: function () {
										return new Map([
											[
												s.InwardLeft,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Left,
												},
											],
											[
												s.InwardRight,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Right,
												},
											],
											[
												s.InwardDown,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Down,
												},
											],
											[
												s.InwardDownLeft,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Left_With_Down,
												},
											],
											[
												s.InwardDownRight,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Right_With_Down,
												},
											],
											[
												s.InwardUp,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Up,
												},
											],
											[
												s.InwardUpLeft,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Left_With_Up,
												},
											],
											[
												s.InwardUpRight,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Right_With_Up,
												},
											],
											[
												s.OutwardLeft,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Left,
												},
											],
											[
												s.OutwardRight,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Right,
												},
											],
											[
												s.OutwardUp,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Up,
												},
											],
											[
												s.OutwardUpLeft,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Left_With_Up,
												},
											],
											[
												s.OutwardUpRight,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Right_With_Up,
												},
											],
											[
												s.OutwardDown,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Down,
												},
											],
											[
												s.OutwardDownLeft,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Left_With_Down,
												},
											],
											[
												s.OutwardDownRight,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Right_With_Down,
												},
											],
											[
												s.InwardFloat,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Float,
												},
											],
											[
												s.OutwardFloat,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Float,
												},
											],
											[
												s.InwardDownRotate,
												{
													toward: u.OpenToward.Inward,
													direction: u.OpenDirection.Down_Rotate,
												},
											],
											[
												s.OutwardDownRotate,
												{
													toward: u.OpenToward.Outward,
													direction: u.OpenDirection.Down_Rotate,
												},
											],
										]);
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.box = function () {
									return this.hardwareManager.handle.dim.box.merge(e.prototype.box.call(this));
								}),
								(t.prototype.draw = function (t) {
									this.fixTapIdx(), e.prototype.draw.call(this, t), this.openSash();
								}),
								(t.prototype.toJSON = function () {
									var t = e.prototype.toJSON.call(this);
									return (
										(t.opened = this.opened),
										(t.isDoor = this.isDoor),
										(t.bd = this.bottomDim.toJSON()),
										(t.fw = this.fixedWidth),
										(t.wtf = this.withTurningFrame),
										(t.tf = this.truncateFrame),
										(t.od = this.openDegree),
										t
									);
								}),
								(t.prototype.deserialize = function (t) {
									return (
										e.prototype.deserialize.call(this, t),
										(this.opened = t.opened),
										(this.isDoor = void 0 !== t.isDoor ? t.isDoor : h.DrawParams.Ins.sashAsDoor),
										t.bd &&
											((this.bottomDim = new f.SashBottomDim(this)),
											this.bottomDim.deserialize(t.bd)),
										t.fixedWidth && (t.fw = t.fixedWidth),
										(this.fixedWidth = t.fw ? t.fw : -1),
										(this.withTurningFrame =
											void 0 === t.wtf ? h.DrawParams.Ins.withTurningFrameForSash : t.wtf),
										(this.truncateFrame = void 0 !== t.tf && t.tf),
										(this.openDegree = t.od ? t.od : 90),
										this
									);
								}),
								(t.prototype.fitOpenDirection = function (e, t) {
									!e ||
									(e.hardwareManager.openDirection !== u.OpenDirection.Left &&
										e.hardwareManager.openDirection !== u.OpenDirection.Right)
										? (this.hardwareManager.openDirection = this.properOpenDirectionByPosition(t))
										: (this.hardwareManager.openDirection = e.hardwareManager.openDirection);
									var n = this.hardwareManager.openToward,
										r = this.hardwareManager.openDirection;
									h.DrawParams.Ins.sashDoubleWayOpen &&
										this.type !== f.ShapeType.Screen &&
										(r === u.OpenDirection.Left && n === u.OpenToward.Inward
											? (this.hardwareManager.openDirection = u.OpenDirection.Left_With_Down)
											: r === u.OpenDirection.Left && n === u.OpenToward.Outward
											? (this.hardwareManager.openDirection = u.OpenDirection.Left_With_Up)
											: r === u.OpenDirection.Right && n === u.OpenToward.Inward
											? (this.hardwareManager.openDirection = u.OpenDirection.Right_With_Down)
											: r === u.OpenDirection.Right &&
											  n === u.OpenToward.Outward &&
											  (this.hardwareManager.openDirection = u.OpenDirection.Right_With_Up));
								}),
								(t.prototype.fitOpenToward = function (e) {
									e &&
										((e.hardwareManager.openToward = u.OpenToward.Outward),
										(this.hardwareManager.openToward = u.OpenToward.Inward));
								}),
								(t.prototype.closeSash = function () {
									this.gshape && p.ShapeHelper.restoreShapeMatrix(this.gshape);
								}),
								(t.prototype.openSash = function () {
									if (this.gshape && (this.closeSash(), this.opened)) {
										var e = this.hardwareManager.hingeEdge;
										if (
											(e || (e = this.hardwareManager.edgeRotateBasedByOpenDirection()),
											e instanceof l.default.Segment && p.Utils.isHorizOrVer(e))
										) {
											var t = this.hardwareManager.openToward === u.OpenToward.Outward;
											if (
												(h.DrawParams.Ins.reverseInnerOuter && (t = !t),
												this.hardwareManager.isLeftOpen || this.hardwareManager.isRightOpen)
											) {
												var n =
														(Math.PI / 180) *
														10 *
														(t ? -1 : 1) *
														(this.hardwareManager.isLeftOpen ? 1 : -1),
													r = this.hardwareManager.isLeftOpen
														? this.polygon.box.xmin
														: this.polygon.box.xmax;
												this.gshape.y(-r * n * 0.9),
													this.gshape.skewY(n),
													this.gshape.scaleX(0.9),
													this.gshape.x(r * (1 - 0.9));
											} else
												(this.hardwareManager.isUpOpen || this.hardwareManager.isDownOpen) &&
													((n =
														(Math.PI / 180) *
														10 *
														(t ? -1 : 1) *
														(this.hardwareManager.isUpOpen ? 1 : -1)),
													this.gshape.x(
														-(this.hardwareManager.isUpOpen
															? this.polygon.box.ymin
															: this.polygon.box.ymax) *
															n *
															0.9,
													),
													this.gshape.skewX(n),
													this.gshape.y(
														(this.hardwareManager.isUpOpen
															? this.polygon.box.ymin
															: this.polygon.box.ymax) *
															(1 - 0.9),
													),
													this.gshape.scaleY(0.9));
										}
									}
								}),
								Object.defineProperty(t.prototype, 'Zindex', {
									get: function () {
										return p.DisplayUtils.sortSashZIndexes(this);
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.translate = function (t) {
									e.prototype.translate.call(this, t),
										this.bottomDim.translate(t),
										this.label.translate(t);
								}),
								t
							);
						})(f.Sash);
						t.PushSash = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CircleSash = void 0);
						var o = n(13),
							a = n(1),
							s = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t, n, r, a.ShapeType.CircleSash) || this;
									return (i.hardwareManager = new o.CirclePushSashHardwareManager(i).create()), i;
								}
								return i(t, e), t;
							})(a.Sash);
						t.CircleSash = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.KfcSash = void 0);
						var o = n(7),
							a = n(11),
							s = n(2),
							l = n(13),
							h = n(1),
							c = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t, n, r, h.ShapeType.KfcSash) || this;
									(i.isDoor = !0), (i._largeUpDownSize = !1);
									var a = i.polygon.edges.map(function () {
										return s.EdgeJointWay.Vertical;
									});
									i.frameManager = new l.FrameManager(i, a);
									var c = o.DrawParams.Ins.kfcHandleType;
									return (
										(i.hardwareManager = new l.KfcSashHardwareManager(i)),
										c === h.HardwareShape.KfcHandle && i.hardwareManager.genKfcMullion(),
										(i.hardwareManager.handleType = c),
										(i.hardwareManager.hingeType = h.HardwareShape.EndpointHinge),
										(i.hardwareManager.hingeCount = o.DrawParams.Ins.kfcHingesHidden ? 0 : 2),
										i.hardwareManager.create(),
										i
									);
								}
								return (
									i(t, e),
									(t.prototype.initPushSash = function () {}),
									Object.defineProperty(t.prototype, 'largeUpDownSize', {
										get: function () {
											return this._largeUpDownSize;
										},
										set: function (e) {
											var t = this;
											if (this._largeUpDownSize !== e) {
												if (e)
													[
														a.EdgeFinder.Instance.findIndex(a.Direction.Up, this.polygon),
														a.EdgeFinder.Instance.findIndex(a.Direction.Down, this.polygon),
													].forEach(function (e) {
														t.frameManager._edgeWidth[e] = 2 * t.profileSize;
													});
												else
													for (var n = 0; n < this.frameManager._edgeWidth.length; n++)
														this.frameManager._edgeWidth[n] = this.profileSize;
												this._largeUpDownSize = e;
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.luds = this._largeUpDownSize), t;
									}),
									(t.prototype.deserialize = function (t) {
										return (
											e.prototype.deserialize.call(this, t),
											(this.isDoor = void 0 !== t.isDoor && t.isDoor),
											(this.withTurningFrame = void 0 !== t.wtf && t.wtf),
											(this._largeUpDownSize = !!t.luds && t.luds),
											this
										);
									}),
									(t.prototype.dragMullion = function (t, n) {
										var r = e.prototype.dragMullion.call(this, t, n);
										return r && this.updatePoly(), this.bottomDim.updatePoly(), r;
									}),
									t
								);
							})(h.PushSash);
						t.KfcSash = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoubleKfcSash = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(11),
							h = n(7),
							c = n(13),
							u = n(6),
							p = n(1),
							f = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t, n, r, p.ShapeType.DoubleKfcSash) || this;
									return (i.polyId = r), (i.isDoor = !0), (i._sashes = []), i.create(), i;
								}
								return (
									i(t, e),
									(t.prototype.initDoubleSash = function () {}),
									Object.defineProperty(t.prototype, 'sashes', {
										get: function () {
											return this._sashes.filter(function (e) {
												return e.enabled;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashCount', {
										get: function () {
											return this.sashes.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toJSON = function () {
										var e = [];
										return (
											this._sashes.forEach(function (t) {
												return e.push(t.toJSON());
											}),
											{
												type: this.type,
												polyId: this.polyId.toJSON(),
												enabled: this.enabled,
												offvec: this.offvec.toJSON(),
												openToward: this.openToward,
												isDoor: this.isDoor,
												withTurningFrame: this.withTurningFrame,
												sashes: e,
											}
										);
									}),
									(t.prototype.deserialize = function (e) {
										var t = this;
										return (
											(this.polyId = s.PolyId.createByJson(e.polyId)),
											(this.enabled = e.enabled),
											(this.offvec = a.default.vector(e.offvec.x, e.offvec.y)),
											(this.openToward = e.openToward),
											e.isDoor && (this.isDoor = e.isDoor),
											(this.withTurningFrame =
												void 0 === e.withTurningFrame
													? h.DrawParams.Ins.withTurningFrameForSash
													: e.withTurningFrame),
											e.sashes.forEach(function (e, n) {
												n >= t._sashes.length &&
													(t._sashes[n] = new p.KfcSash(t, new p.WinPolygon(), new s.PolyId())),
													t._sashes[n].deserialize(e);
											}),
											this
										);
									}),
									(t.prototype.create = function () {
										var e = this;
										if (!this.polygon.isEmpty) {
											var t = this.polygon
												.partitionTwo(a.default.line(this.splitPoint(), a.default.vector(1, 0)))
												.sort(function (e, t) {
													return e.box.center.x - t.box.center.x;
												});
											this._sashes.forEach(function (e) {
												return (e.enabled = !1);
											}),
												t.forEach(function (t, n) {
													var r = n >= e._sashes.length;
													p.SashUtil.adjustEdDock(t, e.polygon, n, 2);
													var i = r ? new p.KfcSash(e, t, e.polyId) : e._sashes[n];
													e.add(i),
														(i.sashNumber = n + 1),
														(i.enabled = !0),
														(i.hardwareManager.openToward = e.openToward),
														r &&
															((i.hardwareManager.openDirection = e.calOpenDirection(n)),
															(i.hardwareManager.handle.dim.position =
																0 === n ? l.Direction.Left : l.Direction.Right),
															(i.hardwareManager.handle.dim.hidden =
																!h.DrawParams.Ins.dimToGroundShown || 0 === n),
															(i.hardwareManager.handle.dimToSash.position =
																0 === n ? l.Direction.Left : l.Direction.Right),
															(i.hardwareManager.handle.dimToSash.hidden =
																!h.DrawParams.Ins.dimToSashShown || 0 === n),
															(i.hardwareManager.hingeCount = h.DrawParams.Ins.kfcHingesHidden
																? 0
																: 2)),
														i.updatePoly(t),
														r && e._sashes.push(i);
												});
										}
									}),
									(t.prototype.emitSashSetting = function (e, t) {
										t.eventBus.emit({
											type: u.EventType.kfc_sash_settings,
											payload: new u.KfcSashSettings(e.hardwareManager, t),
										});
									}),
									Object.defineProperty(t.prototype, 'Zindex', {
										get: function () {
											return this.openToward === c.OpenToward.Outward ? 0 : -1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(p.DoubleSash);
						t.DoubleKfcSash = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FoldSash = void 0);
						var o = n(13),
							a = n(7),
							s = n(1),
							l = (function (e) {
								function t(t, n, r, i) {
									void 0 === i && (i = s.ShapeType.Sash);
									var l = e.call(this, t, n, r, i) || this;
									return (
										(l.host = t),
										(l.isDoor = a.DrawParams.Ins.sashAsDoor),
										(l.fixedWidth = -1),
										(l.hardwareManager = new o.FoldHardwareManager(l)),
										i === s.ShapeType.ShadePushSash &&
											((l.hardwareManager.handle.hidden = !0),
											(l.hardwareManager.lock.hidden = !0),
											(l.hardwareManager.handleForFold.hidden = !0)),
										l.hardwareManager.create(),
										(l.bottomDim = new s.SashBottomDim(l)),
										(l.bottomDim.hidden = !0),
										l
									);
								}
								return (
									i(t, e),
									(t.prototype.box = function () {
										return this.hardwareManager.handle.dim.box.merge(e.prototype.box.call(this));
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.isDoor = this.isDoor),
											(t.fw = this.fixedWidth),
											(t.bd = this.bottomDim.toJSON()),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										return (
											e.prototype.deserialize.call(this, t),
											(this.isDoor = t.isDoor),
											(this.fixedWidth = t.fw ? t.fw : -1),
											void 0 !== t.bd && this.bottomDim.deserialize(t.bd),
											this
										);
									}),
									(t.prototype.updatePoly = function (t) {
										e.prototype.updatePoly.call(this, t),
											(this.bottomDim.hidden = -1 === this.fixedWidth),
											this.bottomDim.updatePoly();
									}),
									t
								);
							})(s.Sash);
						t.FoldSash = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							l =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Wall = void 0);
						var h = l(n(0)),
							c = n(5),
							u = n(65),
							p = n(7),
							f = n(2),
							d = n(11),
							g = n(1),
							y = (function (e) {
								function t(t, n) {
									var r = e.call(this, g.ShapeType.Wall, t) || this;
									return (
										(r.view = n),
										(r.selected = !1),
										(r.holes = []),
										(r.joint = new u.WallEdgeJointRobot(n)),
										(r.dimForHeight = new g.SizeDim(r)),
										(r.dimForWidth = new g.SizeDim(r, !1, !0)),
										(r.bottomMarginDim = new g.Dimension(r)),
										(r.leftMarginDim = new g.Dimension(r)),
										(r.rightMarginDim = new g.Dimension(r)),
										(r.totalHeightDim = new g.Dimension(r)),
										r
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'box', {
										get: function () {
											return this.dimForHeight.box.merge(this.polygon.box);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dims', {
										get: function () {
											return [this.dimForWidth, this.dimForHeight];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.onEditHeight = function (e) {
										var t = this.polygon.box,
											n = t.ymax - t.ymin,
											r = t.center.y,
											i = this.besideFrame(d.Direction.Up) ? -1 : 1;
										this.polygon.translate(h.default.vector(0, -r)),
											this.polygon.transform(new h.default.Matrix().scale(1, e / n)),
											this.polygon.translate(h.default.vector(0, r + ((e - n) / 2) * i)),
											this.updatePoly(),
											this.draw(this.view),
											this.view.shapeManager.updateAllDimToGround(),
											this.view.shapeManager.refreshDimStatus(),
											this.view.refresh();
									}),
									(t.prototype.onEditWidth = function (e) {
										var t = this,
											n = this.polygon.box,
											r = n.xmax - n.xmin,
											i = n.center.x,
											o = this.besideFrame(d.Direction.Right),
											a = o ? -1 : 1,
											s = d.EdgeFinder.Instance.findIndex(
												o ? d.Direction.Left : d.Direction.Right,
												this.polygon,
											),
											l = new d.FrameUtil(this.view).getWallEdgeConnectedComponents(this, s);
										this.polygon.translate(h.default.vector(-i, 0)),
											this.polygon.transform(new h.default.Matrix().scale(e / r, 1)),
											this.polygon.translate(h.default.vector(i + ((e - r) / 2) * a, 0)),
											this.updatePoly(),
											this.draw(this.view);
										var c = h.default.vector((e - r) * a, 0);
										l.forEach(function (e) {
											e.translate(c),
												e instanceof g.Frame &&
													e.sashManager.sashes.forEach(function (e) {
														e.opened && e.draw(t.view);
													});
										}),
											l
												.filter(function (e) {
													return e instanceof g.CornerJoiner;
												})
												.forEach(function (e) {
													return e.skewFrame(t.view);
												}),
											this.view.shapeManager.updateAllDimToGround(),
											this.view.shapeManager.refreshDimStatus(),
											g.TopView.optimize(this.view.shapeManager.shapem);
									}),
									(t.prototype.besideFrame = function (e) {
										var t = d.EdgeFinder.Instance.findIndex(e, this.polygon),
											n = this.polygon.edge(t);
										return this.view.shapeManager.shapem
											.map(function (e) {
												return e.polygon;
											})
											.some(function (e) {
												return d.EdgeFinder.Instance.isPolygonConnectedWithEdge(n, e);
											});
									}),
									(t.prototype.hitWall = function (e, t) {
										return (
											(this.selected = this.polygon.contains(e)),
											this.selected ? this.joint.attachTo(this) : this.joint.hide(),
											this.selected
										);
									}),
									(t.prototype.delete = function (e) {
										return !!this.selected && (this.hideAssist(), this.remove(), !0);
									}),
									(t.prototype.draw = function (e) {
										if (void 0 === this.gshape) {
											var t = this.parent ? this.parent.gshape : void 0;
											(this.gshape = p.Artisan.recycleGroup(e.activeLayer, t)),
												this.gshape.setAttr('data', {}),
												this.gshape.setAttr('robot', this);
										}
										this.gshape.moveToBottom(),
											void 0 === this.vshape &&
												((this.vshape = p.Artisan.recycleShape(this.polygon, e)),
												this.gshape.add(this.vshape)),
											this.vshape.setAttr('data', {
												poly: this.polygon,
												fcolor: f.FillPatternType.Brick,
												stroke: '#B7B1AB',
												strokeWidth: 0,
												drag: !1,
												holes: this.holes,
											}),
											this.vshape.setAttr('robot', this),
											this.vshape.setAttr('tool', c.ToolType.editWallDragRobot),
											this.children.forEach(function (t) {
												return t.draw(e);
											});
									}),
									Object.defineProperty(t.prototype, 'isBackground', {
										get: function () {
											return this.coverComponents.length > 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'coverComponents', {
										get: function () {
											var e = this,
												t = this.view.shapeManager;
											return a(t.shapem, t.connectors, t.cornerJoiners, t.walls).filter(function (
												t,
											) {
												return t !== e && e.polygon.polygon.contains(t.polygon.boundary.polygon);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.updatePoly = function (e) {
										e && (this.polygon = e);
										var t = this.polygon.orientation,
											n = this.coverComponents,
											r = n.length > 0;
										if (
											((this.bottomMarginDim.hidden =
												this.leftMarginDim.hidden =
												this.rightMarginDim.hidden =
												this.totalHeightDim.hidden =
													!r),
											r)
										) {
											this.holes = n.map(function (e) {
												var n = e.polygon.clone();
												e.polygon.isSimpleClosed || (n = e.polygon.boundary);
												var r = n.orientation !== t ? n.polygon : n.polygon.reverse(),
													i = Array.from(Array.from(r.faces)[0].edges).map(function (e) {
														return e.shape;
													});
												return {
													style: g.HoleStyle.Custom,
													edges: i,
												};
											});
											var i = (p.DrawParams.Ins.dimFontSize / 120) * 90;
											this.updateBottomMarginDim(n, i),
												this.updateLeftMarginDim(n, i),
												this.updateRightMarginDim(n, i),
												this.updateTotalHeightDim(i),
												(this.dimForHeight.hidden = this.dimForWidth.hidden = !0);
										} else this.holes = [];
										this.bottomMarginDim.updatePoly(),
											this.leftMarginDim.updatePoly(),
											this.rightMarginDim.updatePoly(),
											this.totalHeightDim.updatePoly(),
											this.dims.forEach(function (e) {
												return e.updatePoly();
											});
									}),
									(t.prototype.updateBottomMarginDim = function (e, t) {
										var n = this,
											r = h.default.vector(t, 0),
											i = this.polygon.box.high.translate(r),
											o = Math.max.apply(
												Math,
												a(
													e.map(function (e) {
														return e.polygon.box.high.y;
													}),
												),
											);
										(this.bottomMarginDim.from = h.default.point(i.x, o)),
											(this.bottomMarginDim.to = i),
											h.default.Utils.EQ_0(this.bottomMarginDim.value) &&
												(this.bottomMarginDim.hidden = !0),
											(this.bottomMarginDim.onEdit = function (e, t) {
												var r = d.EdgeFinder.Instance.findIndex(d.Direction.Up, n.polygon);
												(n.polygon = n.polygon.dragEdge(r, h.default.vector(0, e - t))),
													n.updatePoly(),
													n.draw(n.view);
											});
									}),
									(t.prototype.updateLeftMarginDim = function (e, t) {
										var n = this,
											r = h.default.vector(0, t),
											i = this.polygon.box,
											o = Math.min.apply(
												Math,
												a(
													e.map(function (e) {
														return e.polygon.box.xmin;
													}),
												),
											),
											s = h.default.point(i.xmin, i.ymax).translate(r);
										(this.leftMarginDim.from = s),
											(this.leftMarginDim.to = h.default.point(o, s.y)),
											h.default.Utils.EQ_0(this.leftMarginDim.value) &&
												(this.leftMarginDim.hidden = !0),
											(this.leftMarginDim.onEdit = function (e, t) {
												var r = d.EdgeFinder.Instance.findIndex(d.Direction.Left, n.polygon);
												(n.polygon = n.polygon.dragEdge(r, h.default.vector(e - t, 0).invert())),
													n.updatePoly(),
													n.draw(n.view);
											});
									}),
									(t.prototype.updateRightMarginDim = function (e, t) {
										var n = this,
											r = h.default.vector(0, t),
											i = this.polygon.box,
											o = Math.max.apply(
												Math,
												a(
													e.map(function (e) {
														return e.polygon.box.xmax;
													}),
												),
											),
											s = h.default.point(i.xmax, i.ymax).translate(r);
										(this.rightMarginDim.from = s),
											(this.rightMarginDim.to = h.default.point(o, s.y)),
											h.default.Utils.EQ_0(this.rightMarginDim.value) &&
												(this.rightMarginDim.hidden = !0),
											(this.rightMarginDim.onEdit = function (e, t) {
												var r = d.EdgeFinder.Instance.findIndex(d.Direction.Right, n.polygon);
												(n.polygon = n.polygon.dragEdge(r, h.default.vector(e - t, 0))),
													n.updatePoly(),
													n.draw(n.view);
											});
									}),
									(t.prototype.updateTotalHeightDim = function (e) {
										var t = this,
											n = h.default.vector(-e, 0),
											r = this.polygon.box;
										(this.totalHeightDim.from = h.default.point(r.xmin, r.ymax).translate(n)),
											(this.totalHeightDim.to = h.default.point(r.xmin, r.ymin).translate(n)),
											h.default.Utils.EQ_0(this.totalHeightDim.value) &&
												(this.totalHeightDim.hidden = !0),
											(this.totalHeightDim.onEdit = function (e, n) {
												var r = d.EdgeFinder.Instance.findIndex(d.Direction.Down, t.polygon);
												(t.polygon = t.polygon.dragEdge(r, h.default.vector(0, e - n).invert())),
													t.updatePoly(),
													t.draw(t.view);
											});
									}),
									(t.prototype.translate = function (e) {
										this.polygon.translate(e),
											this.joint.translate(e),
											this.dims.forEach(function (t) {
												return t.translate(e);
											});
									}),
									(t.prototype.hideAssist = function () {
										this.joint.hide();
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, !0),
											void 0 !== this.vshape &&
												this.vshape.visible() &&
												(this.vshape.hide(),
												this.vshape.moveTo(this.vshape.getLayer()),
												(this.vshape = void 0));
									}),
									(t.prototype.toJSON = function () {
										return {
											type: this.type,
											polygon: this.polygon.toJSON(),
											dim: this.dimForHeight.toJSON(),
											dimW: this.dimForWidth.toJSON(),
										};
									}),
									(t.prototype.deserialize = function (e, t) {
										(this.polygon = g.PolyParser.parse(e.polygon)),
											this.dimForHeight.deserialize(e.dim),
											e.dimW && this.dimForWidth.deserialize(e.dimW),
											this.updatePoly(),
											this.draw(t);
									}),
									(t.prototype.snapEdge = function (e, n, r) {
										var i, o;
										if (!(r instanceof t && r.id === this.id))
											try {
												for (var a = s(this.polygon.edges), l = a.next(); !l.done; l = a.next()) {
													var c = l.value;
													if (c instanceof h.default.Segment && f.Utils.canSnap(e, c, n)) return c;
												}
											} catch (e) {
												i = {
													error: e,
												};
											} finally {
												try {
													l && !l.done && (o = a.return) && o.call(a);
												} finally {
													if (i) throw i.error;
												}
											}
									}),
									(t.prototype.snapVertex = function (e, t) {
										var n, r;
										if (t !== this.id) {
											var i = this.polygon.edges;
											try {
												for (var o = s(i), a = o.next(); !a.done; a = o.next()) {
													var l = a.value;
													if (l.start.distanceTo(e)[0] < p.DrawParams.Ins.snapVertex)
														return l.start;
												}
											} catch (e) {
												n = {
													error: e,
												};
											} finally {
												try {
													a && !a.done && (r = o.return) && r.call(o);
												} finally {
													if (n) throw n.error;
												}
											}
										}
									}),
									(t.prototype.snapToFrame = function (e) {
										var t,
											n,
											r = e.polygon.edges;
										try {
											for (var i = s(r), o = i.next(); !o.done; o = i.next()) {
												var a = o.value;
												if (a instanceof h.default.Segment) {
													var l = this.snapEdge(a, a.middle());
													if (l && f.Utils.isZero(l.middle().distanceTo(a)[0])) return l;
												}
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												o && !o.done && (n = i.return) && n.call(i);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									t
								);
							})(g.Shape);
						t.Wall = y;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DragRobot = void 0);
						var a = o(n(0)),
							s = n(66),
							l = n(7),
							h = n(5),
							c = n(1),
							u = n(2),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (
										(n.view = t),
										(n.shapes[0] = n.createDragShape(n.rsize)),
										(n.vshapes[0] = l.PolyCraft.create(n.shapes[0], t)),
										n.vshapes[0].setAttr('data', {
											poly: n.shapes[0],
											fcolor: u.ShapeColor.dragRobot,
											drag: !0,
										}),
										n.vshapes[0].name('stub'),
										n.vshapes[0].setAttr('tool', h.ToolType.editDragRobot),
										n.vshapes[0].hide(),
										t.activeLayer.add(n.vshapes[0]),
										n
									);
								}
								return (
									i(t, e),
									(t.prototype.attachTo = function (t) {
										e.prototype.attachTo.call(this, t);
									}),
									(t.prototype.hide = function () {
										this.vshapes[0].hide();
									}),
									(t.prototype.attach = function (e) {
										this.hostShape = e;
										var t = e.polygon.edge(0).start;
										u.ShapeHelper.restoreShapeMatrix(this.vshapes[0]);
										var n = this.rsize,
											r = this.shapes[0].edges,
											i = a.default.point(t.x - n / 5 - n / 2, t.y - n / 5 - n / 2),
											o = a.default.point(r[0].middle().x, r[1].middle().y),
											s = a.default.vector(o, i);
										this.shapes[0].translate(s),
											this.vshapes[0].moveToTop(),
											this.vshapes[0].show();
									}),
									(t.prototype.hitBar = function (e) {
										if (!this.vshapes[0].isVisible()) return !1;
										var t = this.shapes[0].contains(e);
										return u.DisplayUtils.highlight(t, this.vshapes[0]), t;
									}),
									(t.prototype.drag = function (e) {
										void 0 !== this.hostShape &&
											(this.hostShape.translate(e), this.hostShape.draw(this.view));
									}),
									Object.defineProperty(t.prototype, 'visualObj', {
										get: function () {
											return this.vshapes[0];
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.createDragShape = function (e) {
										var t = 1.8 * e,
											n = 0.23 * t,
											r = n,
											i = 0.16 * t,
											o = (2 * r - (t - 2 * n - 2 * i)) / 2;
										return c.PolygonCreator.Ins.joinRelativePro(
											[
												a.default.vector(-r, n),
												a.default.vector(o, 0),
												a.default.vector(0, i),
												a.default.vector(-i, 0),
												a.default.vector(0, -o),
												a.default.vector(-n, r),
												a.default.vector(n, r),
												a.default.vector(0, -o),
												a.default.vector(i, 0),
												a.default.vector(0, i),
												a.default.vector(-o, 0),
												a.default.vector(r, n),
												a.default.vector(r, -n),
												a.default.vector(-o, 0),
												a.default.vector(0, -i),
												a.default.vector(i, 0),
												a.default.vector(0, o),
												a.default.vector(n, -r),
												a.default.vector(-n, -r),
												a.default.vector(0, o),
												a.default.vector(-i, 0),
												a.default.vector(0, -i),
												a.default.vector(o, 0),
											],
											a.default.point(0, -t / 2),
										);
									}),
									t
								);
							})(s.BaseRobot);
						t.DragRobot = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EdgeJointRobot = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(5),
							h = n(66),
							c = n(6),
							u = n(1),
							p = n(2),
							f = (function (e) {
								function t(t, n) {
									var r = e.call(this, n) || this;
									return (r.fm = t), (r.view = n), (r.isCircle = !1), r;
								}
								return (
									i(t, e),
									(t.prototype.createAnchor = function (e) {
										this.isCircle = void 0 !== e.polygon.circlePolygon();
										var t,
											n = e.polygon.edges;
										try {
											t = e.polygon.parallelPoly(60, !0).edges;
										} catch (n) {
											t = e.polygon.edges;
										}
										for (var r = 0; r < n.length; r++) {
											var i = n[r],
												o = t[r],
												s = e.polygon.ctlRobs.get(r);
											if (!s || s.endpoint) {
												var l = this.create(a.default.segment(i.start, o.start), r, !1);
												this.shapes.push(l.shape), this.vshapes.push(l.vshape);
											}
											if (e.dragModify && (!s || s.arc)) {
												var h = this.create(a.default.segment(i.middle(), o.middle()), r, !0);
												this.shapes.push(h.shape), this.vshapes.push(h.vshape);
											}
										}
									}),
									(t.prototype.create = function (e, t, n) {
										var r = e.middle(),
											i = this.rsize,
											o = new u.WinPolygon();
										o.add(a.default.segment(a.default.point(0, 0), a.default.point(i, 0))),
											o.add(a.default.segment(a.default.point(i, 0), a.default.point(i, i))),
											o.add(a.default.segment(a.default.point(i, i), a.default.point(0, i))),
											o.doneSmart();
										var h = o.edges,
											c = a.default.point(h[0].middle().x, h[1].middle().y),
											f = a.default.vector(c, r);
										o.translate(f);
										var d = s.Artisan.recycleShape(o, this.view);
										return (
											d.setAttr('data', {
												poly: o,
												fcolor: p.ShapeColor.dragRobot,
												drag: this.fm.host.dragModify,
											}),
											d.setAttr('robot', this),
											d.setAttr('robData', {
												arc: n,
												idx: t,
												vertex: e.start,
												hid: this.fm.host.id,
											}),
											d.setAttr('tool', l.ToolType.editEdgeRobot),
											this.view.activeLayer.add(d),
											{
												shape: o,
												vshape: d,
											}
										);
									}),
									(t.prototype.hitBar = function (e) {
										var t = this;
										if (this.vshapes.length > 0 && !this.vshapes[0].isVisible()) return !1;
										this.vshapes.forEach(function (e) {
											return p.DisplayUtils.highlight(!1, e);
										});
										var n = this.shapes.findIndex(function (n) {
												var r = t.getMatrix(n.box.center);
												return n.clone().transform(r).contains(e);
											}),
											r = this.vshapes[n];
										return (
											-1 !== n &&
											void 0 !== r &&
											(p.DisplayUtils.highlight(!0, r),
											r.attrs.robData.arc ||
												this.isCircle ||
												this.view.eventBus.emit({
													type: c.EventType.frame_joint_way,
													payload: new c.FrameJointWay(this.fm, r.attrs.robData.idx, this.view),
												}),
											!0)
										);
									}),
									(t.prototype.getMatrix = function (e) {
										var t = p.Utils.applyMatrixMultiply(this.fm.host.topFrame.getParentMatrices()),
											n = e.transform(t),
											r = n.x - e.x,
											i = n.y - e.y;
										return a.default.matrix(1, 0, 0, 1, r, i);
									}),
									(t.prototype.attach = function (e) {
										var t = this;
										this.hide(),
											(this.shapes = []),
											(this.vshapes = []),
											this.createAnchor(e),
											this.vshapes.forEach(function (e, n) {
												var r = t.shapes[n].box.center,
													i = t.getMatrix(r),
													o = e.getTransform();
												(o.m[0] = i.a),
													(o.m[1] = i.b),
													(o.m[2] = i.c),
													(o.m[3] = i.d),
													(o.m[4] = i.tx),
													(o.m[5] = i.ty),
													e._setTransform(o.decompose()),
													e.moveToTop(),
													e.show();
											});
									}),
									(t.prototype.drag = function (e, t, n, r, i) {
										void 0 === i && (i = a.default.point()),
											n
												? this.fm.dragArc(e, t, this.view)
												: this.fm.dragVertex(e, t, r, this.view, i),
											this.view.shapeManager.refreshTotalHeight(),
											this.view.shapeManager.refreshTotalWidth(),
											this.fm.host instanceof u.Frame &&
												1 === this.fm.innerPoly.length &&
												(this.fm.host.showExtraDimAngle(),
												this.fm.host.extraDimManager.draw(this.view)),
											this.attach(this.fm.host);
									}),
									(t.prototype.dragEdge = function (e, t) {
										this.fm.dragEdge(e, t, this.view), this.attach(this.fm.host);
									}),
									t
								);
							})(h.BaseRobot);
						t.EdgeJointRobot = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.MullionRobot = void 0);
						var a = o(n(0)),
							s = n(9),
							l = n(5),
							h = n(66),
							c = n(7),
							u = n(1),
							p = n(2),
							f = n(6),
							d = (function (e) {
								function t(t, n) {
									var r = e.call(this, n) || this;
									return (r.mm = t), (r.view = n), (r.mulPts = []), r;
								}
								return (
									i(t, e),
									(t.prototype.createAnchor = function (e) {
										this.mulBar = e;
										var t = e.polygon.mulShape;
										if (void 0 !== t) {
											var n,
												r = t.middle(),
												i = -1;
											e.polygon.spLine.line instanceof s.CutLine &&
												((n = e.polygon.spLine.line),
												(r = e.polygon.spLine.line.mpt),
												(i = e.polygon.spLine.line.innerEdgeIdx)),
												(this.mulPts = []),
												this.mulPts.push(t.start, t.end, r);
											var o = e.polygon.polyId.idx;
											if (!n || n.constrolStart) {
												var a = this.create(t.start, o, !1, !0, i);
												this.shapes.push(a.shape), this.vshapes.push(a.vshape);
											}
											(n && !n.constrolEnd) ||
												((a = this.create(t.end, o, !1, !1, i)),
												this.shapes.push(a.shape),
												this.vshapes.push(a.vshape)),
												!c.DrawParams.Ins.dragModifyOnFrame ||
													(n && !n.showArc) ||
													((a = this.create(n ? t.middle() : r, o, !0, !1, i)),
													this.shapes.push(a.shape),
													this.vshapes.push(a.vshape));
										}
									}),
									(t.prototype.create = function (e, t, n, r, i) {
										var o = this.rsize,
											s = new u.WinPolygon();
										s.add(a.default.segment(a.default.point(0, 0), a.default.point(o, 0))),
											s.add(a.default.segment(a.default.point(o, 0), a.default.point(o, o))),
											s.add(a.default.segment(a.default.point(o, o), a.default.point(0, o))),
											s.doneSmart();
										var h = s.edges,
											f = a.default.point(h[0].middle().x, h[1].middle().y),
											d = a.default.vector(f, e);
										s.translate(d);
										var g = c.Artisan.recycleShape(s, this.view),
											y = this.checkMullionStatus(r);
										return (
											(this.rotCpt = y.cpt),
											g.setAttr('data', {
												poly: s,
												fcolor: p.ShapeColor.dragRobot,
												drag: y.drag,
											}),
											g.setAttr('robot', this),
											g.setAttr('robData', {
												arc: n,
												pt: e,
												cpt: y.cpt,
												idx: t,
												start: r,
												innerEdgeIndex: i,
											}),
											g.setAttr('tool', l.ToolType.editMullionRobot),
											this.view.activeLayer.add(g),
											{
												shape: s,
												vshape: g,
											}
										);
									}),
									(t.prototype.checkMullionStatus = function (e) {
										var t = this.mulBar.polygon.polyId.idx,
											n = this.mm.splitter.lines[t],
											r = !0;
										((n.start.fixed && e) || (n.end.fixed && !e)) && (r = !1);
										var i = this.mulPts[2];
										return (
											n.start.fixed && !n.end.fixed
												? (i = this.mulPts[0])
												: !n.start.fixed && n.end.fixed && (i = this.mulPts[1]),
											{
												drag: r,
												cpt: i,
											}
										);
									}),
									(t.prototype.hitBar = function (e) {
										var t = this;
										if (this.vshapes.length > 0 && !this.vshapes[0].isVisible()) return !1;
										this.vshapes.forEach(function (e) {
											return p.DisplayUtils.highlight(!1, e);
										});
										var n = this.shapes.findIndex(function (n) {
												var r = t.getMatrix(n.box.center);
												return n.clone().transform(r).contains(e);
											}),
											r = this.vshapes[n];
										return (
											-1 !== n &&
											void 0 !== r &&
											(p.DisplayUtils.highlight(!0, r), this.sendBarEndpointEvent(r), !0)
										);
									}),
									(t.prototype.sendBarEndpointEvent = function (e) {
										var t = this;
										if (this.mulBar.parent && !(this.mulBar.parent instanceof u.Sash)) {
											var n = this.mulBar.parent,
												r = void 0 !== this.mulBar.parent.polygon.circlePolygon();
											if (!e.attrs.robData.arc && !r) {
												var i = e.attrs.robData.pt,
													o = [];
												if (n.polygon.inBoundary(i)) {
													var s = this.mulBar.polygon.edges,
														l = s.find(function (e) {
															return e.contains(i);
														});
													if (!l) {
														var h = this.mulBar.polygon.mulShape,
															c = a.default.segment(h.middle(), i);
														l = s.find(function (e) {
															return e.intersect(c).length > 0;
														});
													}
													if (!l) return;
													if (
														(n.children.forEach(function (e) {
															e instanceof u.Bar &&
																e.where === n.type &&
																(e.polygon.inBoundary(l.start) || e.polygon.inBoundary(l.end)) &&
																o.push(e);
														}),
														2 !== o.length)
													)
														return void console.warn('split bar not found!');
												} else if (
													(n.children.forEach(function (e) {
														e instanceof u.Bar && e.polygon.inBoundary(i) && o.push(e);
													}),
													o.splice(
														o.findIndex(function (e) {
															return e.id === t.mulBar.id;
														}),
														1,
													),
													1 !== o.length)
												)
													return;
												var p = e.attrs.robData.idx,
													d = e.attrs.robData.start;
												this.view.eventBus.emit({
													type: f.EventType.bar_endpoint,
													payload: new f.BarEndpoint(n, o[0].polyId.idx, p, d),
												});
											}
										}
									}),
									(t.prototype.getMatrix = function (e) {
										var t =
												this.mulBar && -1 !== this.mulBar.id
													? p.Utils.applyMatrixMultiply(this.mulBar.topFrame.getParentMatrices())
													: a.default.matrix(1, 0, 0, 1, 0, 0),
											n = e.transform(t),
											r = n.x - e.x,
											i = n.y - e.y;
										return a.default.matrix(1, 0, 0, 1, r, i);
									}),
									(t.prototype.attach = function (e) {
										var t = this;
										this.hide(),
											(this.shapes = []),
											(this.vshapes = []),
											this.createAnchor(e),
											this.vshapes.forEach(function (e, n) {
												var r = t.shapes[n].box.center,
													i = t.getMatrix(r),
													o = e.getTransform();
												(o.m[0] = i.a),
													(o.m[1] = i.b),
													(o.m[2] = i.c),
													(o.m[3] = i.d),
													(o.m[4] = i.tx),
													(o.m[5] = i.ty),
													e._setTransform(o.decompose()),
													e.moveToTop(),
													e.show();
											});
									}),
									(t.prototype.drag = function (e, t, n, r, i, o) {
										if (
											(void 0 === r && (r = a.default.point()),
											void 0 === i && (i = a.default.vector()),
											void 0 === o && (o = !1),
											e instanceof a.default.Vector)
										)
											(this.mulPts[2] = this.mulPts[2].translate(e)),
												this.mm.splitter.tweak(t, this.mulPts, e, !0, n),
												this.mm.refresh(this.view);
										else {
											var s = [a.default.point(e, 0), this.rotCpt];
											this.mm.splitter.tweak(t, s, i, !0, n, r), this.mm.refresh(this.view);
										}
									}),
									t
								);
							})(h.BaseRobot);
						t.MullionRobot = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.WallEdgeJointRobot = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(66),
							h = n(1),
							c = n(7),
							u = n(2),
							p = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									(t.prototype.attach = function (e) {
										(this.wall = e),
											this.hide(),
											this.createAnchors(),
											this.vshapes.forEach(function (e) {
												e.moveToTop(), e.show();
											});
									}),
									(t.prototype.drag = function (e, t, n) {
										if (!e.equalTo(a.default.vector())) {
											var r = n
												? this.wall.polygon.dragVertex(t, e, !1)
												: this.wall.polygon.dragEdge(t, e);
											this.wall.updatePoly(r), this.wall.draw(this.view);
										}
									}),
									(t.prototype.dragTo = function (e, t, n, r) {
										var i;
										if ((void 0 === r && (r = !1), n)) {
											var o = this.wall.polygon.edges[t].start;
											i = this.wall.polygon.dragVertex(t, a.default.vector(o, e), !1);
										} else {
											var s = this.wall.polygon.edges[t],
												l = e.projectionOn(a.default.line(s.start, s.end)),
												h = a.default.vector(l, e);
											r || (h = this.roundDragOffset(h)), (i = this.wall.polygon.dragEdge(t, h));
										}
										this.wall.updatePoly(i), this.wall.draw(this.view);
									}),
									(t.prototype.roundDragOffset = function (e) {
										return a.default.vector(Math.round(e.x), Math.round(e.y));
									}),
									(t.prototype.translate = function (e) {
										this.shapes.forEach(function (t) {
											return t.translate(e);
										});
									}),
									(t.prototype.anchorShape = function (e, t) {
										var n = new h.WinPolygon();
										return (
											n.add(
												a.default.segment(
													a.default.point(-e / 2, -t / 2),
													a.default.point(e / 2, -t / 2),
												),
											),
											n.add(
												a.default.segment(
													a.default.point(e / 2, -t / 2),
													a.default.point(e / 2, t / 2),
												),
											),
											n.add(
												a.default.segment(
													a.default.point(e / 2, t / 2),
													a.default.point(-e / 2, t / 2),
												),
											),
											n.doneSmart(),
											n
										);
									}),
									(t.prototype.createAnchors = function () {
										var e = this;
										this.wall.polygon.edges.forEach(function (t, n) {
											e.createEdgeAnchor(t, n), e.createEdgeAnchor(t, n, !0);
										});
									}),
									(t.prototype.createEdgeAnchor = function (e, t, n) {
										void 0 === n && (n = !1);
										var r = n
												? this.anchorShape(c.DrawParams.Ins.robotSize, c.DrawParams.Ins.robotSize)
												: this.anchorShape(
														3 * c.DrawParams.Ins.robotSize,
														c.DrawParams.Ins.robotSize,
												  ),
											i = n ? e.start : e.middle();
										r.rotate(e.tangentInStart().slope, a.default.point()),
											r.translate(a.default.vector(i.x, i.y)),
											this.shapes.push(r);
										var o = c.Artisan.recycleShape(r, this.view);
										o.setAttr('data', {
											poly: r,
											fcolor: u.ShapeColor.dragRobot,
											drag: !0,
										}),
											o.setAttr('robot', this),
											o.setAttr('robData', {
												idx: t,
												vertex: i,
												vertexControl: n,
												hid: this.wall.id,
											}),
											o.setAttr('tool', s.ToolType.editWallEdgeRobot),
											this.view.activeLayer.add(o),
											this.vshapes.push(o);
									}),
									t
								);
							})(l.BaseRobot);
						t.WallEdgeJointRobot = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CornerRobot = void 0);
						var s = a(n(0)),
							l = n(5),
							h = n(66),
							c = n(9),
							u = n(7),
							p = n(2),
							f = n(1),
							d = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									(t.prototype.create = function (e) {
										this.shapes = [];
										var t = new f.WinPolygon(),
											n = this.rsize,
											r = e.outerEdges[0],
											i = s.default.vector(0 - r.start.x, 0 - r.start.y),
											o = r.end.translate(i),
											a = s.default
												.vector(r.end.x - r.start.x, r.end.y - r.start.y)
												.rotate90CW()
												.normalize(),
											h = a.multiply(n / 2),
											c = s.default.line(o.translate(h), s.default.point().translate(h)),
											d = a.multiply(-n / 2),
											g = s.default.line(o.translate(d), s.default.point().translate(d)),
											y = s.default.vector(r.end.x - r.start.x, r.end.y - r.start.y).normalize(),
											m = y.multiply(n / 2),
											v = s.default.line(
												s.default.point(a.x, a.y).translate(m),
												s.default.point(m.x, m.y),
											),
											w = y.multiply(-n / 2),
											b = s.default.line(
												s.default.point(a.x, a.y).translate(w),
												s.default.point(w.x, w.y),
											),
											S = c.intersect(v)[0],
											_ = c.intersect(b)[0],
											P = g.intersect(v)[0],
											x = g.intersect(b)[0];
										t.add(s.default.segment(S, _)),
											t.add(s.default.segment(_, x)),
											t.add(s.default.segment(x, P)),
											t.doneSmart(),
											(this.shapes[0] = t),
											(this.vshapes[0] = u.Artisan.recycleShape(t, this.view)),
											this.vshapes[0].setAttr('data', {
												poly: t,
												fcolor: p.ShapeColor.dragRobot,
												drag: !0,
												isMiddleShape: !0,
											}),
											this.vshapes[0].setAttr('robot', this),
											this.vshapes[0].setAttr('tool', l.ToolType.editCornerRobot);
										var D = e.polygon.box.center,
											T = r.length,
											O = p.Utils.vecDirPt(y, T / 2 - n / 2, D),
											M = t.clone().translate(s.default.vector(O.x, O.y));
										(this.shapes[1] = M),
											(this.vshapes[1] = u.Artisan.recycleShape(M, this.view)),
											this.vshapes[1].setAttr('data', {
												poly: M,
												fcolor: p.ShapeColor.dragRobot,
												drag: !0,
												isMiddleShape: !1,
												cornerEdgeIndex: 2,
												stroke: p.ShapeColor.windowStrokeColor,
												strokeWidth: u.DrawParams.Ins.windowStrokeWidth,
											}),
											this.vshapes[1].setAttr('robot', this),
											this.vshapes[1].setAttr('tool', l.ToolType.editCornerRobot);
										var E = p.Utils.vecDirPt(y.multiply(-1), T / 2 - n / 2, D),
											I = t.clone().translate(s.default.vector(E.x, E.y));
										(this.shapes[2] = I),
											(this.vshapes[2] = u.Artisan.recycleShape(I, this.view)),
											this.vshapes[2].setAttr('data', {
												poly: I,
												fcolor: p.ShapeColor.dragRobot,
												drag: !0,
												isMiddleShape: !1,
												cornerEdgeIndex: 0,
											}),
											this.vshapes[2].setAttr('robot', this),
											this.vshapes[2].setAttr('tool', l.ToolType.editCornerRobot);
									}),
									(t.prototype.attach = function (e) {
										var t = this;
										this.hide(), this.create(e), (this.hostShape = e);
										var n = e.polygon.box.center;
										void 0 === this.cpt &&
											((this.cpt = s.default.point()), (this.cpt.x = n.x), (this.cpt.y = n.y));
										var r = s.default.vector(this.cpt.x, this.cpt.y);
										this.shapes[0].translate(r),
											this.vshapes.reverse().forEach(function (n) {
												var r = e.polygon.box.center,
													i = t.getMatrix(r),
													o = n.getTransform();
												(o.m[0] = i.a),
													(o.m[1] = i.b),
													(o.m[2] = i.c),
													(o.m[3] = i.d),
													(o.m[4] = i.tx),
													(o.m[5] = i.ty),
													n._setTransform(o.decompose()),
													n.moveToTop(),
													n.show();
											});
									}),
									(t.prototype.translate = function (e) {
										void 0 !== this.cpt &&
											((this.cpt.x = this.cpt.x + e.x), (this.cpt.y = this.cpt.y + e.y)),
											this.shapes.length > 0 &&
												this.shapes.forEach(function (t) {
													t.translate(e);
												});
									}),
									(t.prototype.drag = function (e, n) {
										var r = this.hostShape,
											i = r.centerEdge,
											a = (s.default.line(i.start, i.end), s.default.vector(i.start, i.end)),
											l = e.projectionOn(a),
											h = 1,
											c = r.polygon.box.center,
											u = this.shapes[0].box.center;
										if (s.default.point(u.x + l.x, u.y + l.y).distanceTo(c)[0] <= 15)
											(l = (e = s.default.vector(c.x - u.x, c.y - u.y)).projectionOn(a)), (h = 0);
										else {
											var d = p.Utils.lineDirPt(i, this.rsize / 2, i.start),
												g = p.Utils.lineDirPt(
													s.default.segment(i.end, i.start),
													this.rsize / 2,
													i.end,
												),
												y = s.default.point(u.x + l.x, u.y + l.y),
												m = void 0;
											if (
												(i.contains(y)
													? ((m = y),
													  y.distanceTo(i.start)[0] <= this.rsize / 2 && (m = d),
													  y.distanceTo(i.end)[0] <= this.rsize / 2 && (m = g))
													: (m = i.start.distanceTo(y)[0] < i.end.distanceTo(y)[0] ? d : g),
												(l = s.default.vector(u, m)).equalTo(s.default.vector(0, 0)))
											)
												return;
											var v = s.default.vector(c, m),
												w = v.length,
												b = (a.length - this.rsize) / 2;
											v.normalize().equalTo(a.normalize())
												? 0 !== b && (h = -w / b)
												: 0 !== b && (h = w / b);
										}
										var S = o(t.getSkewInfo(h, this.hostShape), 3),
											_ = S[0],
											P = (S[1], S[2]);
										(this.cpt.x += l.x),
											(this.cpt.y += l.y),
											this.shapes[0].translate(l),
											r.skewCornerFrame(_, P, n, f.SkewPartEnum.Body),
											r.updatePoly(r.polygon),
											r.draw(this.view),
											this.attach(this.hostShape);
									}),
									(t.prototype.dragLength = function (e, t, n, r) {
										if (void 0 !== this.hostShape) {
											var i = this.hostShape.centerEdge,
												o = s.default.vector(i.start, i.end),
												a = n.projectionOn(o),
												l = this.hostShape.polygon.edges;
											(l[t] = l[t].translate(a)),
												c.Frametify.edgeIntersection(l, t),
												c.Frametify.edgeIntersection(l, (t - 1 + l.length) % l.length);
											var h = this.hostShape.polygon.cloneWith(l);
											e.translate(a),
												this.hostShape.updatePoly(h),
												this.hostShape.draw(r),
												(this.cpt = this.hostShape.polygon.box.center.clone()),
												this.attach(this.hostShape);
										}
									}),
									(t.getSkewInfo = function (e, n) {
										var r;
										return [
											t.getAngleFromPortion(e, n),
											(r =
												n.hostFramePos === f.hostFramePos.right
													? (-e * Math.PI) / 4
													: (e * Math.PI) / 4),
											Math.tan(r),
										];
									}),
									(t.prototype.getMatrix = function (e) {
										if (!this.hostShape) return s.default.matrix(1, 0, 0, 1, 0, 0);
										var t = p.Utils.applyMatrixMultiply(this.hostShape.getParentMatrices()),
											n = e.transform(t),
											r = n.x - e.x,
											i = n.y - e.y;
										return s.default.matrix(1, 0, 0, 1, r, i);
									}),
									(t.prototype.hitTest = function (e) {
										if (0 === this.vshapes.length || !this.vshapes[0].isVisible()) return !1;
										var t = !1,
											n = this.hostShape
												? this.getMatrix(this.hostShape.polygon.box.center)
												: s.default.matrix(1, 0, 0, 1, 0, 0);
										return (
											this.shapes.forEach(function (r) {
												r.clone().transform(n).contains(e) && (t = !0);
											}),
											this.vshapes.forEach(function (e) {
												p.DisplayUtils.highlight(t, e);
											}),
											t
										);
									}),
									(t.getAngleFromPortion = function (e, t) {
										var n = ((Math.PI + (-e * Math.PI) / 2) / Math.PI) * 180;
										return (
											p.Utils.isSegVertical(t.centerEdge) &&
												t.centerEdge.start.y < t.centerEdge.end.y &&
												(n = ((Math.PI + (e * Math.PI) / 2) / Math.PI) * 180),
											n
										);
									}),
									(t.getPortionFromAngle = function (e, t) {
										var n = (-2 * ((e / 180) * Math.PI - Math.PI)) / Math.PI;
										return (
											p.Utils.isSegVertical(t.centerEdge) &&
												t.centerEdge.start.y < t.centerEdge.end.y &&
												(n = -n),
											n
										);
									}),
									(t.prototype.updateByPortion = function (e) {
										var t = this.hostShape,
											n = t.polygon.box.center,
											r = t.centerEdge,
											i = t.centerEdge,
											o = s.default.vector(i.start, i.end),
											a = ((r.length - this.rsize) / 2) * -e;
										(this.cpt = p.Utils.vecDirPt(o, a, n)), this.hide(), this.create(t);
									}),
									t
								);
							})(h.BaseRobot);
						t.CornerRobot = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ConnectorRobot = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(66),
							h = n(9),
							c = n(7),
							u = n(1),
							p = n(2),
							f = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.view = t), n;
								}
								return (
									i(t, e),
									(t.prototype.create = function (e) {
										this.shapes = [];
										var t = new u.WinPolygon(),
											n = this.rsize,
											r = e.outerEdges[0],
											i = a.default.vector(0 - r.start.x, 0 - r.start.y),
											o = r.end.translate(i),
											l = a.default
												.vector(r.end.x - r.start.x, r.end.y - r.start.y)
												.rotate90CW()
												.normalize(),
											h = l.multiply(n / 2),
											f = a.default.line(o.translate(h), a.default.point().translate(h)),
											d = l.multiply(-n / 2),
											g = a.default.line(o.translate(d), a.default.point().translate(d)),
											y = a.default.vector(r.end.x - r.start.x, r.end.y - r.start.y).normalize(),
											m = y.multiply(n / 2),
											v = a.default.line(
												a.default.point(l.x, l.y).translate(m),
												a.default.point(m.x, m.y),
											),
											w = y.multiply(-n / 2),
											b = a.default.line(
												a.default.point(l.x, l.y).translate(w),
												a.default.point(w.x, w.y),
											),
											S = f.intersect(v)[0],
											_ = f.intersect(b)[0],
											P = g.intersect(v)[0],
											x = g.intersect(b)[0];
										t.add(a.default.segment(S, _)),
											t.add(a.default.segment(_, x)),
											t.add(a.default.segment(x, P)),
											t.doneSmart();
										var D = e.polygon.box.center,
											T = r.length,
											O = p.Utils.vecDirPt(y, T / 2 - n / 2, D),
											M = t.clone().translate(a.default.vector(O.x, O.y));
										(this.shapes[0] = M),
											(this.vshapes[0] = c.Artisan.recycleShape(M, this.view)),
											this.vshapes[0].setAttr('data', {
												poly: M,
												fcolor: p.ShapeColor.dragRobot,
												drag: !0,
												isMiddleShape: !1,
												cornerEdgeIndex: 0,
											}),
											this.vshapes[0].setAttr('robot', this),
											this.vshapes[0].setAttr('tool', s.ToolType.editConnectorRobot);
										var E = p.Utils.vecDirPt(y.multiply(-1), T / 2 - n / 2, D),
											I = t.clone().translate(a.default.vector(E.x, E.y));
										(this.shapes[1] = I),
											(this.vshapes[1] = c.Artisan.recycleShape(I, this.view)),
											this.vshapes[1].setAttr('data', {
												poly: I,
												fcolor: p.ShapeColor.dragRobot,
												drag: !0,
												isMiddleShape: !1,
												cornerEdgeIndex: 2,
											}),
											this.vshapes[1].setAttr('robot', this),
											this.vshapes[1].setAttr('tool', s.ToolType.editConnectorRobot);
									}),
									(t.prototype.attach = function (e) {
										var t = this;
										this.hide(),
											this.create(e),
											(this.hostShape = e),
											this.vshapes.forEach(function (n) {
												var r = e.polygon.box.center,
													i = t.getMatrix(r),
													o = n.getTransform();
												(o.m[0] = i.a),
													(o.m[1] = i.b),
													(o.m[2] = i.c),
													(o.m[3] = i.d),
													(o.m[4] = i.tx),
													(o.m[5] = i.ty),
													n._setTransform(o.decompose()),
													n.moveToTop(),
													n.show();
											});
									}),
									(t.prototype.translate = function (e) {
										this.shapes.length > 0 &&
											this.shapes.forEach(function (t) {
												t.translate(e);
											});
									}),
									(t.prototype.dragLength = function (e, t, n, r) {
										if (void 0 !== this.hostShape) {
											var i = this.hostShape.centerEdge,
												o = a.default.vector(i.start, i.end),
												s = n.projectionOn(o),
												l = this.hostShape.polygon.edges;
											(l[t] = l[t].translate(s)),
												h.Frametify.edgeIntersection(l, t),
												h.Frametify.edgeIntersection(l, (t - 1 + l.length) % l.length);
											var c = this.hostShape.polygon.cloneWith(l);
											e.translate(s),
												this.hostShape.updatePoly(c),
												this.hostShape.draw(r),
												(this.cpt = this.hostShape.polygon.box.center.clone()),
												this.attach(this.hostShape);
										}
									}),
									(t.prototype.getMatrix = function (e) {
										if (!this.hostShape) return a.default.matrix(1, 0, 0, 1, 0, 0);
										var t = p.Utils.applyMatrixMultiply(this.hostShape.getParentMatrices()),
											n = e.transform(t),
											r = n.x - e.x,
											i = n.y - e.y;
										return a.default.matrix(1, 0, 0, 1, r, i);
									}),
									(t.prototype.hitTest = function (e) {
										if (0 === this.vshapes.length || !this.vshapes[0].isVisible()) return !1;
										var t = !1,
											n = this.hostShape
												? this.getMatrix(this.hostShape.polygon.box.center)
												: a.default.matrix(1, 0, 0, 1, 0, 0);
										return (
											this.shapes.forEach(function (r) {
												r.clone().transform(n).contains(e) && (t = !0);
											}),
											this.vshapes.forEach(function (e) {
												p.DisplayUtils.highlight(t, e);
											}),
											t
										);
									}),
									t
								);
							})(l.BaseRobot);
						t.ConnectorRobot = f;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FenesCreator = void 0);
						var r = n(2),
							i = n(1),
							o = (function () {
								function e() {
									(this.creator = {}),
										(this.creator[i.ShapeType.Sash] = function (e) {
											return new i.PushSash(
												e.obj,
												new i.WinPolygon(),
												new r.PolyId(),
												i.ShapeType.Sash,
											);
										}),
										(this.creator[i.ShapeType.CircleSash] = function (e) {
											return new i.CircleSash(e.obj, new i.WinPolygon(), new r.PolyId());
										}),
										(this.creator[i.ShapeType.KfcSash] = function (e) {
											return new i.KfcSash(e.obj, new i.WinPolygon(), new r.PolyId());
										}),
										(this.creator[i.ShapeType.DoubleKfcSash] = function (e) {
											return new i.DoubleKfcSash(e.obj, new i.WinPolygon(), new r.PolyId());
										}),
										(this.creator[i.ShapeType.Screen] = function (e) {
											return new i.PushSash(
												e.obj,
												new i.WinPolygon(),
												new r.PolyId(),
												i.ShapeType.Screen,
											);
										}),
										(this.creator[i.ShapeType.DoubleSash] = function (e) {
											return new i.DoubleSash(
												e.obj,
												new i.WinPolygon(),
												new r.PolyId(),
												i.ShapeType.DoubleSash,
											);
										}),
										(this.creator[i.ShapeType.DoubleScreen] = function (e) {
											return new i.DoubleSash(
												e.obj,
												new i.WinPolygon(),
												new r.PolyId(),
												i.ShapeType.DoubleScreen,
											);
										}),
										(this.creator[i.ShapeType.FoldSash] = function (e) {
											return new i.Fold(
												e.obj,
												new i.WinPolygon(),
												new r.PolyId(),
												i.ShapeType.FoldSash,
											);
										}),
										(this.creator[i.ShapeType.FoldScreen] = function (e) {
											return new i.Fold(
												e.obj,
												new i.WinPolygon(),
												new r.PolyId(),
												i.ShapeType.FoldScreen,
											);
										}),
										(this.creator[i.ShapeType.Slide] = function (e) {
											return new i.Slide(e.obj, new i.WinPolygon(), new r.PolyId());
										}),
										(this.creator[i.ShapeType.ShadePushSash] = function (e) {
											return new i.PushSash(
												e.obj,
												new i.WinPolygon(),
												new r.PolyId(),
												i.ShapeType.ShadePushSash,
											);
										}),
										(this.creator[i.ShapeType.DoubleShadePushSash] = function (e) {
											return new i.DoubleSash(
												e.obj,
												new i.WinPolygon(),
												new r.PolyId(),
												i.ShapeType.DoubleShadePushSash,
											);
										}),
										(this.creator[i.ShapeType.FoldShade] = function (e) {
											return new i.Fold(
												e.obj,
												new i.WinPolygon(),
												new r.PolyId(),
												i.ShapeType.FoldShade,
											);
										}),
										(this.creator[i.ShapeType.GuardSash] = function (e) {
											return new i.GuardSash(e.obj, new i.WinPolygon(), new r.PolyId());
										});
								}
								return (
									Object.defineProperty(e, 'Ins', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.create = function (e, t) {
										return this.creator[t](e);
									}),
									(e.prototype.createAntiTheft = function (e, t) {
										return new i.AntiTheft(e.obj, new i.WinPolygon(), new r.PolyId(), t);
									}),
									e
								);
							})();
						t.FenesCreator = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.TopView = void 0);
						var l = s(n(0)),
							h = n(5),
							c = n(9),
							u = n(16),
							p = n(2),
							f = n(11),
							d = n(13),
							g = n(7),
							y = n(1),
							m = (function (e) {
								function t(t) {
									var n = e.call(this, y.ShapeType.TopView, t.polygon) || this;
									return (
										(n.host = t),
										(n.color = 'yellow'),
										(n.vshapes = []),
										(n.shapes = []),
										(n.vshapesOfText = []),
										(n.shapesOfText = []),
										(n.isRootFrame = !1),
										(n.dims = []),
										(n.style = g.DrawParams.Ins.topViewStyle),
										(n.defaultOffset = l.default.vector()),
										(n.offset = l.default.vector()),
										(n.hidden = !1),
										(n.towardShown = !0),
										(n.fakeThickness = 180),
										(n.hidden = g.DrawParams.Ins.topViewHidden),
										n.hidden || (n.host.add(n), n.updatePoly(n.polygon)),
										n
									);
								}
								return (
									i(t, e),
									(t.invalidDimStyle = function (e) {
										var t = e.some(function (e) {
												return e instanceof y.ThreedArcFrame;
											}),
											n =
												e.length > 0 &&
												e[0].view.shapeManager.cornerJoiners.some(function (e) {
													return 90 !== e.skewAngle;
												});
										return t || n;
									}),
									(t.checkStyle = function (e) {
										var t = g.DrawParams.Ins.topViewStyle;
										t === g.TopViewStyle.dim &&
											this.invalidDimStyle(e) &&
											(t = g.TopViewStyle.default),
											e.forEach(function (e) {
												e.topView.style !== t &&
													((e.topView.style = t), e.topView.updatePoly(), e.topView.draw(e.view));
											});
									}),
									(t.optimize = function (e) {
										this.optimizeDefaultOffset(e),
											this.optimizeTowardNote(e),
											0 !== e.length &&
												(e.forEach(function (t) {
													t.topView.updatePoly(),
														t.topView.draw(e[0].view),
														t.topView.refreshCornerPresent();
												}),
												e[0].view.refresh());
									}),
									(t.optimizeDefaultOffset = function (e) {
										if (0 !== e.length) {
											var t = e[0].view,
												n = new l.default.Box();
											e.forEach(function (e) {
												(n = n.merge(e.boxWithoutTransform())),
													e.connectWalls().forEach(function (e) {
														return (n = n.merge(e.polygon.box));
													});
											});
											var r = t.shapeManager.totalWidthDim,
												i = t.shapeManager.totalHeightDim;
											r && !isNaN(r.box.xmax) && (n = n.merge(r.box)),
												i && !isNaN(i.box.xmax) && (n = n.merge(i.box)),
												t.shapeManager.subFrames.forEach(function (e) {
													isNaN(e.widthDim.box.xmax) || (n = n.merge(e.widthDim.box)),
														isNaN(e.heightDim.box.xmax) || (n = n.merge(e.heightDim.box));
												});
											var o = new l.default.Box();
											e.forEach(function (e) {
												e.topView.makeShapes(), (o = o.merge(e.topView.box));
											});
											var a = Math.abs(o.ymin ? o.ymin : 0),
												s = l.default.vector(0, n.max.ymax + a + 5);
											e.forEach(function (e) {
												return (e.topView.defaultOffset = s);
											});
										}
									}),
									(t.optimizeTowardNote = function (e) {
										0 !== e.length &&
											e
												.slice()
												.sort(function (e, t) {
													return e.polygon.box.center.x - t.polygon.box.center.x;
												})
												.forEach(function (e, t) {
													return (e.topView.towardShown = 0 === t);
												});
									}),
									Object.defineProperty(t.prototype, 'box', {
										get: function () {
											var e = new l.default.Box(),
												t = Number.MAX_SAFE_INTEGER,
												n = Number.MAX_SAFE_INTEGER;
											if (
												(this.shapes.forEach(function (n) {
													var r = n[0].box;
													isNaN(r.xmax) || ((e = e.merge(r)), r.ymin < t && (t = r.ymin));
												}),
												this.dims.forEach(function (n) {
													var r = n.box;
													(e = e.merge(r)), r.ymin < t && (t = r.ymin);
												}),
												this.shapesOfText.forEach(function (t) {
													var r = t.box;
													(e = e.merge(r)), r.ymin < n && (n = r.ymin);
												}),
												t < n &&
													void 0 !== e.xmax &&
													(e = e.merge(l.default.point(e.center.x, e.ymin - 50).box)),
												this.style === g.TopViewStyle.dim &&
													void 0 !== e.xmax &&
													(e = e.merge(l.default.point(e.center.x, e.ymin - 200).box)),
												!isNaN(e.xmax) && this.gshape && this.gshape.parent)
											) {
												var r = this.getParentMatrices(),
													i = new y.WinPolygon(e.toSegments())
														.clone()
														.transform(p.Utils.applyMatrixMultiply(r));
												e = i.box;
											}
											return e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'frame', {
										get: function () {
											return this.host;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'bound', {
										get: function () {
											return this.frame.polygon.box;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'totalBound', {
										get: function () {
											var e = this.frame.boxWithoutTransform(),
												t = this.frame.view.shapeManager.totalWidthDim,
												n = this.frame.view.shapeManager.totalHeightDim;
											return (
												t && !isNaN(t.box.xmax) && (e = e.merge(t.box)),
												n && !isNaN(n.box.xmax) && (e = e.merge(n.box)),
												this.frame.connectWalls().forEach(function (t) {
													return (e = e.merge(t.polygon.box));
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashProfileShape', {
										get: function () {
											return u.PolygonCreator.Ins.joinRelativePro(
												[
													l.default.vector(0, g.DrawParams.Ins.tvProfileSize),
													l.default.vector(g.DrawParams.Ins.tvProfileSize, 0),
													l.default.vector(0, -g.DrawParams.Ins.tvProfileSize),
												],
												l.default.point(
													-g.DrawParams.Ins.tvProfileSize / 2,
													-g.DrawParams.Ins.tvProfileSize / 2,
												),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.makeShapes = function () {
										if (!this.polygon.isEmpty) {
											if (
												((this.shapes = []),
												(this.shapesOfText = []),
												this.dims.forEach(function (e) {
													return e.recycle(!0);
												}),
												(this.dims = []),
												g.DrawParams.Ins.withoutDims)
											)
												return this;
											if (
												(this.hidden ? this.frame.remove(this) : this.frame.add(this), this.hidden)
											)
												return this;
											(this.isRootFrame = this.frame.isCornerJoinerRoot()),
												this.createFrameDiagram(),
												this.createSashesDiagram(),
												this.createCornerDiagram(),
												this.createConnectorDiagram(),
												this.towardShown && this.markInnerOuter(),
												this.isRootFrame && this.markFacedPosition();
										}
									}),
									(t.prototype.updatePoly = function (e) {
										if ((e && (this.polygon = e), !this.polygon.isEmpty)) {
											this.makeShapes();
											var t = this.defaultOffset.add(this.offset);
											this.shapes.forEach(function (e) {
												return e[0].translate(t);
											}),
												this.shapesOfText.forEach(function (e) {
													return e.translate(t);
												}),
												this.dims.forEach(function (e) {
													return e.translate(t);
												});
										}
									}),
									(t.prototype.refreshCornerPresent = function () {
										var e = this.frame.view;
										new f.FrameUtil(e)
											.getFrameConnectedComponents(this.frame)
											.forEach(function (t) {
												t instanceof y.CornerJoiner
													? (t.draw(e),
													  t.skewCornerFrame(t.skewAngle, t.skewValue, e, y.SkewPartEnum.TopView))
													: t instanceof y.Connector && t.skewTCorner();
											});
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, !1),
											0 !== this.vshapes.length &&
												(this.vshapes.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshapes),
												(this.vshapes = []),
												(this.shapes = [])),
											0 !== this.vshapesOfText.length &&
												(this.vshapesOfText.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshapesOfText),
												(this.vshapesOfText = []),
												(this.shapesOfText = []));
									}),
									(t.prototype.translate = function (e) {
										this.shapes.forEach(function (t) {
											return t[0].translate(e);
										}),
											this.shapesOfText.forEach(function (t) {
												return t.translate(e);
											});
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										(this.color = p.ShapeColor.dim),
											this.vshapes.splice(this.shapes.length).forEach(function (e) {
												e.moveTo(e.getLayer()), e.hide();
											}),
											void 0 === this.gshape &&
												((this.gshape = g.Artisan.recycleGroup(e.activeLayer)),
												this.gshape.setAttr('data', {
													parent: this.host,
													type: 'topView',
												}),
												this.gshape.moveTo(this.getParentGShape(e))),
											this.shapes.forEach(function (n, r) {
												var i = r >= t.vshapes.length,
													o = i ? g.Artisan.recycleShape(n[0], e) : t.vshapes[r];
												n[1].fcolor && 'none' !== n[1].fcolor
													? (n[1].fcolor = t.color)
													: (n[1].fcolor = 'none'),
													n[1].stroke && (n[1].stroke = t.color),
													o.setAttr(
														'data',
														Object.assign(
															{
																poly: n[0],
																drag: !0,
															},
															n[1],
														),
													),
													o.setAttr('robot', t),
													o.setAttr('tool', h.ToolType.editTopViewDragRobot),
													o.setAttr('hitFunc', function (e) {
														return n[0].makeHitRegion(o, e);
													}),
													i && ((t.vshapes[r] = o), o.moveTo(t.gshape));
											}),
											this.vshapesOfText.splice(this.shapesOfText.length).forEach(function (e) {
												e.moveTo(e.getLayer()), e.hide();
											}),
											this.shapesOfText.forEach(function (n, r) {
												var i = r >= t.vshapesOfText.length,
													o = i ? g.Artisan.recycleShape(n, e) : t.vshapesOfText[r];
												(n.color = t.color),
													o.setAttr('data', {
														poly: n,
													}),
													o.setAttr('robot', t),
													o.setAttr('tool', h.ToolType.editTopViewDragRobot),
													i && ((t.vshapesOfText[r] = o), o.moveTo(t.gshape));
											}),
											this.dims.forEach(function (t) {
												return t.draw(e, !0);
											});
									}),
									(t.prototype.toJSON = function () {
										return {
											offset: this.offset.toJSON(),
											hidden: this.hidden,
										};
									}),
									(t.prototype.deserialize = function (e) {
										(this.offset = e
											? l.default.vector(e.offset.x, e.offset.y)
											: l.default.vector()),
											(this.hidden = !(!e || !e.hidden) && e.hidden);
									}),
									(t.prototype.createFrameDiagram = function () {
										if (this.frame instanceof y.ThreedArcFrame) {
											var e = this.frame.threedChordLength,
												t = this.bound.center.x - e / 2,
												n = this.bound.center.x + e / 2,
												r = l.default.point(this.bound.center.x, 0),
												i = this.frame.arcFaceInner
													? r.translate(l.default.vector(0, this.frame.threedHeight))
													: r.translate(l.default.vector(0, -this.frame.threedHeight));
											this.shapes.push(
												this.dashArc(l.default.point(t, 0), l.default.point(n, 0), i, 5),
											),
												this.shapes.push(
													this.line(l.default.point(t, 40), l.default.point(t, -40), 25),
												),
												this.shapes.push(
													this.line(l.default.point(n, 40), l.default.point(n, -40), 25),
												);
										} else if (this.style === g.TopViewStyle.dim) {
											var o = u.PolygonCreator.Ins.rectangleShape(
												l.default.point(this.bound.center.x, 0),
												this.bound.xmax - this.bound.xmin,
												this.fakeThickness,
											);
											this.shapes.push([
												o,
												{
													stroke: this.color,
												},
											]);
										} else
											this.shapes.push(
												this.dashLine(
													l.default.point(this.bound.xmin, 0),
													l.default.point(this.bound.xmax, 0),
													5,
												),
											),
												this.shapes.push(
													this.line(
														l.default.point(this.bound.xmin, 40),
														l.default.point(this.bound.xmin, -40),
														25,
													),
												),
												this.shapes.push(
													this.line(
														l.default.point(this.bound.xmax, 40),
														l.default.point(this.bound.xmax, -40),
														25,
													),
												);
									}),
									(t.prototype.createConnectorDiagram = function () {
										var e = this;
										this.style === g.TopViewStyle.dim &&
											this.frame.view.shapeManager.connectors.forEach(function (t) {
												if (t.hostLikeFrame === e.frame) {
													var n = l.default.point(t.polygon.box.center.x, 0),
														r = u.PolygonCreator.Ins.rectangleShape(
															n,
															t.profileSize,
															e.fakeThickness,
														);
													e.shapes.push([
														r,
														{
															stroke: e.color,
														},
													]);
												}
											});
									}),
									(t.prototype.createCornerDiagram = function () {
										var e = this;
										if (this.style === g.TopViewStyle.dim) {
											var t = this.frame.view.shapeManager.cornerJoiners;
											t.forEach(function (t) {
												if (t.hostLikeFrame === e.frame) {
													var n = l.default
															.vector(t.hostEdge.middle(), t.polygon.box.center)
															.normalize(),
														r = l.default
															.point(t.hostEdge.middle().x, 0)
															.translate(n.multiply(e.fakeThickness / 2)),
														i = u.PolygonCreator.Ins.rectangleShape(
															r,
															e.fakeThickness,
															e.fakeThickness,
														);
													e.shapes.push([
														i,
														{
															stroke: e.color,
														},
													]);
												}
											}),
												t.forEach(function (t, n) {
													e.createCornerDim(t, 'host'), e.createCornerDim(t, 'corner');
												});
										}
									}),
									(t.prototype.createCornerDim = function (e, t) {
										var n = this.frame.view.shapeManager.cornerJoiners,
											r = n.findIndex(function (t) {
												return t === e;
											});
										if (('host' === t ? e.hostLikeFrame : e.cornerLikeFrame) === this.host) {
											var i = e.componentsUntil(t, y.ShapeType.CornerJoiner);
											if (0 !== i.length) {
												var o = i.find(function (e) {
													return e instanceof y.CornerJoiner;
												});
												if (
													o &&
													n.findIndex(function (e) {
														return e === o;
													}) < r
												)
													return;
												var a = new l.default.Box();
												(i = i.filter(function (e) {
													return !(e instanceof y.CornerJoiner);
												})).forEach(function (e) {
													return (a = a.merge(e.polygon.box));
												});
												var s = a.xmax - a.xmin,
													c = a.xmin,
													u = a.xmax,
													p = c,
													f = u;
												a.center.x < e.polygon.box.center.x
													? ((f = p + s + this.fakeThickness), o && (p -= this.fakeThickness))
													: ((p = f - s - this.fakeThickness), o && (f += this.fakeThickness));
												var d = s + e.profileSize;
												o && (d += o.profileSize);
												var m = new y.Dimension(this, l.default.point(p, 0), l.default.point(f, 0));
												m.translate(
													l.default.vector(0, -this.fakeThickness - g.DrawParams.Ins.dimFontH / 2),
												),
													(m.displayLength = d),
													(m.vshapeToTop = !1),
													(m.tool = h.ToolType.none),
													(m.draggable = !1),
													m.updatePoly(),
													this.dims.push(m);
												var v = new y.Dimension(this, l.default.point(c, 0), l.default.point(u, 0));
												v.translate(
													l.default.vector(0, this.fakeThickness + g.DrawParams.Ins.dimFontH / 2),
												),
													(v.displayLength = s),
													(v.vshapeToTop = !1),
													(v.tool = h.ToolType.none),
													(v.draggable = !1),
													v.updatePoly(),
													this.dims.push(v);
											}
										}
									}),
									(t.prototype.createSashesDiagram = function () {
										var e = this,
											t = this.frame.sashManager;
										a(t.sashes, t.kfcSashes, t.shadePushSashes)
											.filter(function (e) {
												return e instanceof y.PushSash;
											})
											.forEach(function (t) {
												var n = t.hardwareManager;
												(
													g.DrawParams.Ins.proUpDownOpenTopView
														? n.isUpOpen || n.isDownOpen
														: n.openDirection === d.OpenDirection.Up ||
														  n.openDirection === d.OpenDirection.Down
												)
													? e.pushSashShapeTrapezoid(t)
													: e.pushSashShape(t);
											}),
											a(t.doubleSashes, t.doubleKfcSashes, t.doubleShadePushSashes).forEach(
												function (t) {
													return e.doubleSashShape(t);
												},
											),
											t.slides.forEach(function (t) {
												return e.slideShape(t);
											}),
											a(t.folds, t.foldShades).forEach(function (t) {
												return e.foldShape(t);
											});
									}),
									(t.prototype.markInnerOuter = function () {
										var e = g.DrawParams.Ins.enLangMode ? 320 : 220,
											t = g.DrawParams.Ins.dimFontSize * (10 / 12),
											n = g.DrawParams.Ins.dimFontSize / 30,
											r = l.default.point(this.bound.xmin, 0).translate(-e, 0),
											i = g.DrawParams.Ins.reverseInnerOuter
												? g.DrawParams.Ins.lang('inside')
												: g.DrawParams.Ins.lang('outside'),
											o = g.DrawParams.Ins.reverseInnerOuter
												? g.DrawParams.Ins.lang('outside')
												: g.DrawParams.Ins.lang('inside'),
											a = new y.Text(
												i,
												r.translate(0, -(t / 2 + n)),
												y.TextAlign.Center,
												!0,
												g.DrawParams.Ins.dimFontSize / 2,
												!1,
											);
										this.shapesOfText.push(a);
										var s = new y.Text(
											o,
											r.translate(0, t / 2),
											y.TextAlign.Center,
											!0,
											g.DrawParams.Ins.dimFontSize / 2,
											!1,
										);
										this.shapesOfText.push(s);
										var h = this.line(
											r.translate(-(a.width / 2 + 10), 0),
											r.translate(a.width / 2 + 10, 0),
											5,
										);
										this.shapes.push(h);
									}),
									(t.prototype.markFacedPosition = function () {
										if (this.style !== g.TopViewStyle.dim) {
											var e = new l.default.Box();
											this.shapes.forEach(function (t) {
												return (e = e.merge(t[0].box));
											});
											var t = e.ymax + 150,
												n = l.default.point(this.bound.center.x, 0),
												r = u.PolygonCreator.Ins.joinRelativePro([
													l.default.vector(-80, 80),
													l.default.vector(50, 0),
													l.default.vector(0, 100),
													l.default.vector(60, 0),
													l.default.vector(0, -100),
													l.default.vector(50, 0),
												]);
											r = r
												.translate(l.default.vector(r.box.center, n))
												.translate(l.default.vector(0, t));
											var i = new y.Text(g.DrawParams.Ins.lang('faced'), n.translate(0, t)),
												o = r.box.xmax - r.box.xmin,
												a = i.width,
												s = (o + 50 + a) / 2;
											r.translate(l.default.vector(o / 2 - s, 0)),
												i.translate(l.default.vector(s - a / 2, 0)),
												this.shapesOfText.push(i),
												this.shapes.push([
													r,
													{
														fcolor: this.color,
														stroke: 'none',
													},
												]);
										}
									}),
									(t.prototype.pushSashShape = function (e) {
										var t = e.polygon.box,
											n = this.sashShapes(e),
											r = e.hardwareManager,
											i = r.openDirection,
											o = g.DrawParams.Ins.reverseInnerOuter
												? this.reverseToward(r.openToward)
												: r.openToward;
										n.forEach(function (e) {
											if (
												i !== d.OpenDirection.Up &&
												i !== d.OpenDirection.Down &&
												r.openDirection !== d.OpenDirection.None
											)
												if (r.openDirection !== d.OpenDirection.Float) {
													if (
														r.openDirection !== d.OpenDirection.Up_Rotate &&
														r.openDirection !== d.OpenDirection.Down_Rotate
													)
														if (
															r.openDirection !== d.OpenDirection.Left_Rotate &&
															r.openDirection !== d.OpenDirection.Right_Rotate
														) {
															var n =
																	o === d.OpenToward.Inward
																		? g.DrawParams.Ins.tvProfileSize / 2
																		: -g.DrawParams.Ins.tvProfileSize / 2,
																a = r.isLeftOpen
																	? l.default.point(t.xmin, n)
																	: l.default.point(t.xmax, n),
																s =
																	(o === d.OpenToward.Outward && r.isRightOpen) ||
																	(o === d.OpenToward.Inward && r.isLeftOpen)
																		? -1
																		: 1;
															e[0].rotate(-s * (Math.PI / 180) * g.DrawParams.Ins.tvOpenDegree, a);
														} else {
															var h = l.default.point(t.center.x, 0),
																c = r.openDirection === d.OpenDirection.Left_Rotate;
															if (r.pivotAtSide) {
																var u = (t.xmax - t.xmin) / 4;
																h = l.default.point(c ? t.xmin + u : t.xmax - u, 0);
															}
															var p = r.openToward === d.OpenToward.Outward,
																f = (c && p) || (!c && !p);
															e[0].rotate(
																(f ? -1 : 1) * (Math.PI / 180) * g.DrawParams.Ins.tvOpenDegree,
																h,
															);
														}
												} else {
													var y = 80 * (o === d.OpenToward.Outward ? -1 : 1);
													e[0].translate(l.default.vector(0, y));
												}
										}),
											(this.shapes = this.shapes.concat(n));
									}),
									(t.prototype.pushSashShapeTrapezoid = function (e) {
										var t = this.sashShapesTrapezoid(e);
										this.shapes = this.shapes.concat(t);
									}),
									(t.prototype.doubleSashShape = function (e) {
										var t = this;
										e.sashes.forEach(function (n, r) {
											t.pushSashShape(n), t.sashNumber(n, 0, e.expandHorizontally, r + 1, 200);
										});
									}),
									(t.prototype.foldShape = function (e) {
										var t = this,
											n = [],
											r = g.DrawParams.Ins.reverseInnerOuter
												? this.reverseToward(e.openToward)
												: e.openToward,
											i =
												r === d.OpenToward.Inward
													? g.DrawParams.Ins.tvProfileSize / 2
													: -g.DrawParams.Ins.tvProfileSize / 2,
											o = -1;
										e.sashes.slice(0, e.leftCount).forEach(function (s, h) {
											var c = s.polygon.box,
												u = t.sashShapes(s),
												p = l.default.point(h % 2 == 0 ? c.xmin : c.xmax, i);
											e.asPush && (p = l.default.point(c.xmin, i));
											var f = (h % 2 == 0 ? -1 : 1) * (r === d.OpenToward.Inward ? 1 : -1);
											e.asPush && (f = r === d.OpenToward.Inward ? -1 : 1);
											var y = !0;
											if (
												(e.asPush && (y = h === e.leftCount - 1),
												y &&
													u.forEach(function (e) {
														return e[0].rotate(
															-f * (Math.PI / 180) * g.DrawParams.Ins.tvOpenDegree,
															p,
														);
													}),
												h > 0)
											) {
												var m = t.groupBound(u).xmin;
												u.forEach(function (e) {
													return e[0].translate(l.default.vector(o - m, 0));
												});
											}
											(o = t.groupBound(u).xmax),
												(h > 0 && !e.expandHorizontally) || n.push.apply(n, a(u)),
												t.sashNumber(s, 0, e.expandHorizontally, s.sashNumber, 200);
										});
										var s = -1;
										e.sashes
											.slice(e.leftCount)
											.reverse()
											.forEach(function (o, h) {
												var c = o.polygon.box,
													u = t.sashShapes(o),
													p = l.default.point(h % 2 == 1 ? c.xmin : c.xmax, i);
												e.asPush && (p = l.default.point(c.xmax, i));
												var f = (h % 2 == 1 ? -1 : 1) * (r === d.OpenToward.Inward ? 1 : -1);
												e.asPush && (f = r === d.OpenToward.Inward ? 1 : -1);
												var y = !0;
												if (
													(e.asPush && (y = h === e.rightCount - 1),
													y &&
														u.forEach(function (e) {
															return e[0].rotate(
																-f * (Math.PI / 180) * g.DrawParams.Ins.tvOpenDegree,
																p,
															);
														}),
													h > 0)
												) {
													var m = t.groupBound(u).xmax;
													u.forEach(function (e) {
														return e[0].translate(l.default.vector(s - m, 0));
													});
												}
												(s = t.groupBound(u).xmin),
													e.expandHorizontally && n.push.apply(n, a(u)),
													t.sashNumber(o, 0, e.expandHorizontally, o.sashNumber, 200);
											}),
											(this.shapes = this.shapes.concat(n));
									}),
									(t.prototype.slideShape = function (e) {
										var t = this,
											n = f.SlideOptions.Ins.options[e.appliedOptionIndex],
											r =
												((g.DrawParams.Ins.tvTrackMargin + g.DrawParams.Ins.tvProfileSize) / 2) *
												(n.tracksCount - 1),
											i = [];
										e.sashes.forEach(function (e, o) {
											var s,
												h = t.sashShapes(e),
												c =
													(g.DrawParams.Ins.reverseInnerOuter
														? n.tracksCount - e.trackIndex - 1
														: e.trackIndex) *
													(g.DrawParams.Ins.tvProfileSize + g.DrawParams.Ins.tvTrackMargin);
											h.forEach(function (e) {
												e[0].translate(l.default.vector(0, c)),
													e[0].translate(l.default.vector(0, -r));
											}),
												i.push.apply(
													i,
													a(
														h.map(function (e) {
															return e[0];
														}),
													),
												),
												(s = t.shapes).push.apply(s, a(h)),
												t.shapes.push();
										});
										var o = new l.default.Box();
										i.forEach(function (e) {
											o = o.merge(e.polygon.box);
										}),
											e.sashes.forEach(function (n, r) {
												t.sashNumber(
													n,
													t.float(n, e),
													e.expandHorizontally,
													n.columnIndex,
													o.ymax + 165,
												);
											});
									}),
									(t.prototype.sashShapes = function (e) {
										var t = [],
											n = (this.host.view.params.sash - g.DrawParams.Ins.tvProfileSize) / 2,
											r = e.polygon.box.xmin + n,
											i = e.polygon.box.xmax - n,
											o = this.sashProfileShape;
										o.translate(l.default.vector(r - o.box.xmin, 0)),
											t.push([
												o,
												{
													fcolor: this.color,
													stroke: this.color,
												},
											]),
											(o = this.sashProfileShape).translate(l.default.vector(i - o.box.xmax, 0)),
											t.push([
												o,
												{
													fcolor: this.color,
													stroke: this.color,
												},
											]);
										var a = l.default.point(r + g.DrawParams.Ins.tvProfileSize, 0),
											s = l.default.point(i - g.DrawParams.Ins.tvProfileSize, 0);
										return (
											t.push(e.type === y.ShapeType.Screen ? this.waveLine(a, s) : this.line(a, s)),
											t
										);
									}),
									(t.prototype.sashShapesTrapezoid = function (e) {
										var t = [],
											n = (this.host.view.params.sash - g.DrawParams.Ins.tvProfileSize) / 2,
											r = e.polygon.box.xmin + n,
											i = e.polygon.box.xmax - n,
											o = this.sashProfileShape;
										return (
											o.translate(l.default.vector(r - o.box.xmin, 0)),
											t.push([
												o,
												{
													fcolor: this.color,
													stroke: this.color,
												},
											]),
											(o = this.sashProfileShape).translate(l.default.vector(i - o.box.xmax, 0)),
											t.push([
												o,
												{
													fcolor: this.color,
													stroke: this.color,
												},
											]),
											e.hardwareManager.isUpOpen
												? t.push.apply(t, a(this.upSashTrapezoid(e)))
												: e.hardwareManager.isDownOpen &&
												  t.push.apply(t, a(this.downSashTrapezoid(e))),
											t
										);
									}),
									(t.prototype.upSashTrapezoid = function (e) {
										var t = [],
											n = (this.host.view.params.sash - g.DrawParams.Ins.tvProfileSize) / 2,
											r = e.polygon.box.xmin + n,
											i = e.polygon.box.xmax - n,
											o = l.default.point(r + g.DrawParams.Ins.tvProfileSize, 0),
											a = l.default.point(i - g.DrawParams.Ins.tvProfileSize, 0);
										if (o.equalTo(a)) return [];
										var s =
												(g.DrawParams.Ins.reverseInnerOuter
													? this.reverseToward(e.hardwareManager.openToward)
													: e.hardwareManager.openToward) === d.OpenToward.Inward
													? 5 * g.DrawParams.Ins.tvProfileSize
													: 5 * -g.DrawParams.Ins.tvProfileSize,
											h = l.default.point(o.x + (a.x - o.x) / 6, s),
											c = l.default.point(o.x + ((a.x - o.x) / 6) * 5, s);
										if (
											(e.type === y.ShapeType.Screen
												? (t.push(this.waveLineSimple(o, h)),
												  t.push(this.waveLineSimple(h, c)),
												  t.push(this.waveLineSimple(c, a)))
												: (t.push(this.line(o, h)),
												  t.push(this.line(h, c)),
												  t.push(this.line(c, a))),
											e.hardwareManager.isLeftOpen)
										) {
											var u = l.default.point(o.x + (a.x - o.x) / 6, s / 2);
											e.type === y.ShapeType.Screen
												? t.push(this.waveLineSimple(o, u))
												: t.push(this.line(o, u));
										} else
											e.hardwareManager.isRightOpen &&
												((u = l.default.point(o.x + ((a.x - o.x) / 6) * 5, s / 2)),
												e.type === y.ShapeType.Screen
													? t.push(this.waveLineSimple(u, a))
													: t.push(this.line(u, a)));
										return t;
									}),
									(t.prototype.downSashTrapezoid = function (e) {
										var t = [],
											n = (this.host.view.params.sash - g.DrawParams.Ins.tvProfileSize) / 2,
											r = e.polygon.box.xmin + n,
											i = e.polygon.box.xmax - n,
											o = l.default.point(r + g.DrawParams.Ins.tvProfileSize, 0),
											a = l.default.point(i - g.DrawParams.Ins.tvProfileSize, 0);
										if (o.equalTo(a)) return [];
										var s =
												(g.DrawParams.Ins.reverseInnerOuter
													? this.reverseToward(e.hardwareManager.openToward)
													: e.hardwareManager.openToward) === d.OpenToward.Inward
													? 5 * g.DrawParams.Ins.tvProfileSize
													: 5 * -g.DrawParams.Ins.tvProfileSize,
											h = l.default.point(o.x + (a.x - o.x) / 6, 0),
											c = l.default.point(o.x, s),
											u = l.default.point(a.x, s),
											p = l.default.point(o.x + ((a.x - o.x) / 6) * 5, 0);
										if (
											(e.type === y.ShapeType.Screen
												? (t.push(this.waveLineSimple(h, c)),
												  t.push(this.waveLineSimple(c, u)),
												  t.push(this.waveLineSimple(u, p)))
												: (t.push(this.line(h, c)),
												  t.push(this.line(c, u)),
												  t.push(this.line(u, p))),
											e.hardwareManager.isLeftOpen)
										) {
											var f = l.default.point(o.x + (a.x - o.x) / 3, s / 2);
											e.type === y.ShapeType.Screen
												? t.push(this.waveLineSimple(h, f))
												: t.push(this.line(h, f));
										} else
											e.hardwareManager.isRightOpen &&
												((f = l.default.point(o.x + ((a.x - o.x) / 6) * 4, s / 2)),
												e.type === y.ShapeType.Screen
													? t.push(this.waveLineSimple(p, f))
													: t.push(this.line(p, f)));
										return t;
									}),
									(t.prototype.arc = function (e, t, n, r, i) {
										void 0 === r && (r = 15), void 0 === i && (i = {});
										var o = new y.WinPolygon();
										return (
											o.add(c.ArcUtils.CreateArcFrom3Points(e, t, n)),
											o.done(),
											[
												o,
												Object.assign(
													{
														stroke: this.color,
														strokeWidth: r,
													},
													i,
												),
											]
										);
									}),
									(t.prototype.reverseToward = function (e) {
										return e === d.OpenToward.Inward ? d.OpenToward.Outward : d.OpenToward.Inward;
									}),
									(t.prototype.line = function (e, t, n, r) {
										void 0 === n && (n = 15), void 0 === r && (r = {});
										var i = new y.WinPolygon();
										return (
											i.add(l.default.segment(e, t)),
											i.done(),
											[
												i,
												Object.assign(
													{
														stroke: this.color,
														strokeWidth: n,
													},
													r,
												),
											]
										);
									}),
									(t.prototype.dashLine = function (e, t, n) {
										return (
											void 0 === n && (n = 15),
											this.line(e, t, n, {
												dashed: !0,
											})
										);
									}),
									(t.prototype.dashArc = function (e, t, n, r) {
										return (
											void 0 === r && (r = 15),
											this.arc(e, t, n, r, {
												dashed: !0,
											})
										);
									}),
									(t.prototype.waveLine = function (e, t, n) {
										void 0 === n && (n = 10);
										for (
											var r = e.distanceTo(t)[0], i = Math.round(r / 100), o = r / i, s = [], h = 0;
											h < i;
											h++
										) {
											var c = [
												l.default.vector(o / 4, 20),
												l.default.vector(o / 2, -40),
												l.default.vector(o / 4, 20),
											];
											s.push.apply(s, a(c));
										}
										var p = u.PolygonCreator.Ins.joinRelativePro(s, l.default.point(), !1);
										return (
											p.translate(l.default.vector(e.x, e.y)),
											[
												p,
												{
													stroke: this.color,
													strokeWidth: n,
												},
											]
										);
									}),
									(t.prototype.waveLineSimple = function (e, t, n) {
										void 0 === n && (n = 10);
										for (
											var r = e.distanceTo(t)[0], i = Math.round(r / 100), o = r / i, s = [], h = 0;
											h < i;
											h++
										) {
											var c = [
												l.default.vector(o / 4, 20),
												l.default.vector(o / 2, -40),
												l.default.vector(o / 4, 20),
											];
											s.push.apply(s, a(c));
										}
										var p = u.PolygonCreator.Ins.joinRelativePro(s, l.default.point(), !1);
										p.translate(l.default.vector(e.x, e.y));
										var f = l.default
											.vector(l.default.point(), l.default.point(1, 0))
											.angleTo(l.default.vector(e, t));
										return [
											(p = p.rotate(f, e)),
											{
												stroke: this.color,
												strokeWidth: n,
											},
										];
									}),
									(t.prototype.groupBound = function (e) {
										var t = new l.default.Box();
										return (
											e.forEach(function (e) {
												t = t.merge(e[0].box);
											}),
											t
										);
									}),
									(t.prototype.float = function (e, t) {
										var n = 0;
										return (
											t.sashes.forEach(function (t) {
												if (t !== e)
													if (t.columnIndex !== e.columnIndex);
													else {
														var r = g.DrawParams.Ins.reverseInnerOuter
															? t.trackIndex > e.trackIndex
															: t.trackIndex < e.trackIndex;
														n = r ? 1 : -1;
													}
											}),
											n
										);
									}),
									(t.prototype.sashNumber = function (e, t, n, r, i) {
										if (
											(void 0 === t && (t = 0),
											void 0 === n && (n = !0),
											void 0 === r && (r = -1),
											void 0 === i && (i = 160),
											this.style !== g.TopViewStyle.dim)
										) {
											var o = 80 * t,
												a = n ? l.default.vector(0, i + o) : l.default.vector(o, i + 180 * r),
												s = l.default
													.point((e.polygon.box.xmin + e.polygon.box.xmax) / 2, 0)
													.translate(a);
											this.numberWithBorder(e.sashNumber, s);
										}
									}),
									(t.prototype.numberWithBorder = function (e, t) {
										var n = new y.WinPolygon();
										n.addCircle(t, g.DrawParams.Ins.dimFontSize / 2),
											this.shapes.push([
												n,
												{
													stroke: this.color,
													strokeWidth: 15,
													fcolor: 'none',
												},
											]),
											this.shapesOfText.push(new y.Text(e.toString(), t));
									}),
									(t.prototype.getParentGShape = function (e) {
										var t = this.host;
										if (t.gshape && t.gshape.parent) {
											var n = t.gshape.parent.getAttr('data');
											if (!n) return t.gshape;
											if (n.hasOwnProperty('cornerJoiner')) {
												var r = n.cornerJoiner.topViewGShape;
												return r || t.gshape;
											}
										}
										return e.activeLayer;
									}),
									t
								);
							})(y.Shape);
						t.TopView = m;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							l =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Couple = void 0);
						var h = l(n(0)),
							c = n(11),
							u = n(9),
							p = n(13),
							f = n(7),
							d = n(2),
							g = n(1),
							y = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t, n, n) || this;
									return (
										(i.view = r),
										(i.uid = 0),
										(i.shapes = []),
										(i.draggable = !1),
										(i.screwTimes = 1),
										(i.attrs = {}),
										(i.uid = i.view.shapeManager.generateUID()),
										(i.colorManager = new p.ColorManager()),
										(i.dimForWidth = new g.SizeDim(i, !1, !1, f.DrawParams.Ins.dimFontH)),
										i
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'params', {
										get: function () {
											return this.view.params;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'area', {
										get: function () {
											return this.polygon.area;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.box = function () {
										var e = new h.default.Box();
										return (
											this.shapes.forEach(function (t) {
												return (e = e.merge(t.box));
											}),
											e
										);
									}),
									(t.prototype.windowBox = function () {
										var e = new h.default.Box();
										return (
											this.shapes.forEach(function (t) {
												return (e = e.merge(t.box));
											}),
											e
										);
									}),
									(t.prototype.onEditWidth = function (e) {
										this.resize(e);
									}),
									(t.prototype.onEditHeight = function (e) {
										this.resize(e);
									}),
									(t.prototype.draw = function (e) {
										var t,
											n = this;
										if (void 0 === this.gshape) {
											var r = this.parent ? this.parent.gshape : void 0;
											(this.gshape = f.Artisan.recycleGroup(e.activeLayer, r)),
												this.gshape.setAttr('data', {}),
												this.gshape.setAttr('robot', this),
												this.gshape.moveToBottom();
										}
										0 === this.vshapes.length &&
											(this.shapes.forEach(function (t, r) {
												var i = f.Artisan.recycleShape(t, e);
												i.moveToBottom(), (n.vshapes[r] = i);
											}),
											(t = this.gshape).add.apply(t, a(this.vshapes))),
											this.shapes.forEach(function (e, t) {
												var r = n.vshapes[t],
													i = n.colorManager.barNormal;
												n.type === g.ShapeType.WallCornerJoiner && (i = d.FillPatternType.Brick),
													r.setAttr('data', {
														poly: e,
														fcolor: i,
														drag: n.draggable,
													}),
													r.setAttr('robot', n),
													r.setAttr('tool', n.toolType);
											}),
											this.dimForWidth.draw(e);
									}),
									Object.defineProperty(t.prototype, 'length', {
										get: function () {
											return this.centerEdge.length;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'connectedFrames', {
										get: function () {
											var e = new c.FrameUtil(this.view),
												t = [];
											return (
												this.outerEdges.forEach(function (n) {
													e.getIntersectFrames(n, void 0).forEach(function (e) {
														e instanceof g.Frame && t.push(e);
													});
												}),
												t.sort(function (e, t) {
													return e.polygon.box.center.x - t.polygon.box.center.x;
												}),
												t
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hideAssist = function () {
										this.robot && this.robot.hide();
									}),
									(t.prototype.hitBar = function (e, t) {
										if (void 0 !== this.robot && this.robot.hitTest(e)) return !0;
										var n = d.Utils.applyMatrixMultiply(this.getParentMatrices()),
											r = this.polygon.clone().transform(n).contains(e);
										return (
											r ? this.highlight(!this.highlighted) : this.highlight(!1),
											this.showRobot(t),
											r
										);
									}),
									(t.prototype.updatePoly = function (t) {
										e.prototype.updatePoly.call(this, t), this.dimForWidth.updatePoly();
									}),
									(t.prototype.translate = function (t) {
										e.prototype.translate.call(this, t),
											this.robot && this.robot.translate(t),
											this.shapes.forEach(function (e) {
												return e.translate(t);
											}),
											this.dimForWidth.translate(t);
									}),
									(t.prototype.snapEdge = function (e, n, r) {
										var i, o;
										if (!(r instanceof t && r.id === this.id)) {
											var a = this.outerEdges;
											try {
												for (var l = s(a), c = l.next(); !c.done; c = l.next()) {
													var u = c.value;
													if (e instanceof h.default.Segment && d.Utils.canSnap(e, u, n)) return u;
												}
											} catch (e) {
												i = {
													error: e,
												};
											} finally {
												try {
													c && !c.done && (o = l.return) && o.call(l);
												} finally {
													if (i) throw i.error;
												}
											}
										}
									}),
									(t.prototype.toJSON = function () {
										return {
											uid: this.uid,
											type: this.type,
											polygon: this.polygon.toJSON(),
											cm: this.colorManager.toJSON(),
											size: this.size,
											dimW: this.dimForWidth.toJSON(),
											st: this.screwTimes,
											attrs: this.attrs,
										};
									}),
									(t.deCouple = function (e, t) {
										return e.type === g.ShapeType.Connector
											? new g.Connector(new g.WinPolygon(), t).deserialize(e, t)
											: e.type === g.ShapeType.WallCornerJoiner
											? new g.WallCornerJoiner(new g.WinPolygon(), t).deserialize(e, t)
											: e.type === g.ShapeType.PanoramicCornerJoiner
											? new g.PanoramicCornerJoiner(new g.WinPolygon(), t).deserialize(e, t)
											: new g.CornerJoiner(new g.WinPolygon(), t).deserialize(e, t);
									}),
									(t.prototype.dragLength = function (e, t) {
										var n = this.centerEdge,
											r = h.default.vector(n.start, n.end),
											i = t.projectionOn(r),
											o = this.polygon.edges;
										(o[e] = o[e].translate(i)),
											u.Frametify.edgeIntersection(o, e),
											u.Frametify.edgeIntersection(o, (e - 1 + o.length) % o.length);
										var a = this.polygon.cloneWith(o);
										this.polygon.translate(i), this.updatePoly(a);
									}),
									(t.prototype.vshapesHide = function (e) {
										this.vshapes &&
											this.vshapes.forEach(function (t) {
												e ? t.hide() : t.show();
											});
									}),
									t
								);
							})(g.Bar);
						t.Couple = y;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							s =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(a(arguments[t]));
									return e;
								},
							l =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CornerJoiner = t.SkewPartEnum = t.hostFramePos = void 0);
						var h,
							c,
							u = l(n(0)),
							p = n(5),
							f = n(65),
							d = n(2),
							g = n(7),
							y = n(11),
							m = n(6),
							v = n(1);
						!(function (e) {
							(e[(e.left = 0)] = 'left'), (e[(e.right = 1)] = 'right');
						})((h = t.hostFramePos || (t.hostFramePos = {}))),
							(function (e) {
								(e[(e.Body = 0)] = 'Body'), (e[(e.TopView = 1)] = 'TopView');
							})((c = t.SkewPartEnum || (t.SkewPartEnum = {})));
						var w = (function (e) {
							function t(t, n, r) {
								void 0 === r && (r = v.ShapeType.CornerJoiner);
								var i = e.call(this, t, r, n) || this;
								return (
									(i.view = n),
									(i.hostFramePos = h.left),
									(i.skewAngle = 90),
									(i.skewValue = 1),
									(i.skewAngleForBody = 180),
									(i.skewValueForBody = 0),
									(i.profileSize = i.params.cornerJoiner),
									(i.drawMode = g.DrawParams.Ins.cornerJoinersAreaX2 ? 2 : 1),
									(i.squareCorner = !1),
									(i.panoramicCorner = !1),
									(i.skewText = new v.Text('180°')),
									(i.profileSizeText = new v.Text(i.profileSize.toString())),
									(i.profileSizeTextHidden = !1),
									(i.skewText.bold = g.DrawParams.Ins.dimFontBold),
									(i.skewText.color = d.ShapeColor.darkMode ? 'yellow' : d.ShapeColor.dim),
									(i.skewText.asNumber = !0),
									(i.profileSizeText.bold = g.DrawParams.Ins.dimFontBold),
									(i.profileSizeText.color = d.ShapeColor.darkMode ? 'yellow' : d.ShapeColor.dim),
									(i.profileSizeText.asNumber = !0),
									i
								);
							}
							return (
								i(t, e),
								(t.prototype.componentsUntil = function (e, t) {
									for (
										var n,
											r,
											i = 'host' === e ? this.hostEdge : this.cornerEdge,
											a = new y.FrameUtil(this.view),
											s = [],
											l = {
												shape: this,
												edges: [i],
											};
										l;

									) {
										var h = void 0;
										try {
											for (
												var c = ((n = void 0), o(l.edges)), u = c.next();
												!u.done;
												u = c.next()
											) {
												var p = u.value,
													f = a.nextComponent(l.shape, p);
												if (f && ((h = f).shape instanceof v.Couple || h.shape instanceof v.Frame))
													break;
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												u && !u.done && (r = c.return) && r.call(c);
											} finally {
												if (n) throw n.error;
											}
										}
										if (!h) break;
										if ((s.push(h.shape), (l = h), t && l.shape.type === t)) break;
									}
									return s;
								}),
								Object.defineProperty(t.prototype, 'size', {
									get: function () {
										return this.profileSize * this.drawMode;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.box = function () {
									return e.prototype.box
										.call(this)
										.merge(this.skewText.box)
										.merge(this.profileSizeText.box);
								}),
								(t.prototype.resize = function (e) {
									var n = this;
									this.profileSize = e / this.drawMode;
									var r = new y.FrameUtil(this.view).getCoupleEdgeConnectedComponents(
											this,
											this.cornerEdge,
										),
										i = new y.FrameUtil(this.view).getConnectedComponentsOnce(this.hostEdge, this),
										o = this.cornerEdge.start;
									this.updatePoly(this.rebuildPoly()), this.draw(this.view);
									var a = this.cornerEdge.start,
										s = u.default.vector(o, a),
										l = r.filter(function (e) {
											return (
												!(i.length > 0) ||
												!i.some(function (t) {
													return t.frame.id === e.id;
												})
											);
										});
									l.forEach(function (e) {
										return e.translate(s);
									}),
										this.skewFrame(this.view),
										l.forEach(function (e) {
											e instanceof t && e.skewFrame(n.view);
										}),
										this.view.shapeManager.refreshDimStatus(),
										this.view.refresh();
								}),
								(t.prototype.draw = function (t) {
									e.prototype.draw.call(this, t),
										void 0 === this.skewGShape &&
											((this.skewGShape = g.Artisan.recycleGroup(t.activeLayer)),
											this.skewGShape.setAttr('data', {
												isCornerGroup: !0,
												cornerJoiner: this,
											}),
											t.activeLayer.add(this.skewGShape)),
										void 0 === this.topViewGShape &&
											((this.topViewGShape = g.Artisan.recycleGroup(t.activeLayer)),
											this.topViewGShape.setAttr('data', {
												isCornerGroup: !0,
												cornerJoiner: this,
											}),
											t.activeLayer.add(this.topViewGShape)),
										this.vshapes.find(function (e) {
											return e.attrs.data.poly instanceof v.Text && 'skew' === e.attrs.data.type;
										}) ||
											((n = g.Artisan.recycleShape(this.skewText, t)).setAttr('data', {
												poly: this.skewText,
												type: 'skew',
											}),
											n.setAttr('robot', this),
											n.setAttr('tool', p.ToolType.editSkewText),
											this.vshapes.push(n));
									var n,
										r = this.vshapes.find(function (e) {
											return (
												e.attrs.data.poly instanceof v.Text && 'profileSize' === e.attrs.data.type
											);
										});
									if (
										(r ||
											((n = g.Artisan.recycleShape(this.profileSizeText, t)).setAttr('data', {
												poly: this.profileSizeText,
												type: 'profileSize',
											}),
											n.setAttr('robot', this),
											n.setAttr('tool', p.ToolType.editCornerJoinerProfileSizeTextTool),
											this.vshapes.push(n),
											(r = n)),
										this.profileSizeTextHidden || g.DrawParams.Ins.withoutDims)
									) {
										var i = this.vshapes.findIndex(function (e) {
											return e === r;
										});
										-1 !== i && this.vshapes.splice(i, 1), r.hide();
									}
								}),
								(t.prototype.skewFrame = function (e) {
									this.skewCornerFrame(this.skewAngleForBody, this.skewValueForBody, e, c.Body),
										this.skewCornerFrame(this.skewAngle, this.skewValue, e, c.TopView),
										this.autoAlignTopviews();
								}),
								Object.defineProperty(t.prototype, 'toolType', {
									get: function () {
										return p.ToolType.editCornerJoiner;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.translate = function (t) {
									e.prototype.translate.call(this, t),
										this.skewText.translate(t),
										this.profileSizeText.translate(t);
								}),
								(t.prototype.hitBar = function (t, n) {
									var r = e.prototype.hitBar.call(this, t, n);
									return (
										r &&
											n.eventBus.emit({
												type: m.EventType.corner_joiner_settings,
												payload: new m.CornerJoinerSettings(this, n),
											}),
										r
									);
								}),
								(t.prototype.toJSON = function () {
									var t = e.prototype.toJSON.call(this);
									return (
										(t.hfp = this.hostFramePos),
										(t.sa = this.skewAngle),
										(t.sv = this.skewValue),
										(t.sab = this.skewAngleForBody),
										(t.svb = this.skewValueForBody),
										(t.stp = this.skewText.position.toJSON()),
										(t.pst = this.profileSizeText.position.toJSON()),
										(t.psth = this.profileSizeTextHidden),
										(t.dm = this.drawMode),
										(t.sqc = this.squareCorner),
										(t.pac = this.panoramicCorner),
										t
									);
								}),
								(t.prototype.deserialize = function (e, t) {
									var n = this;
									return (
										(this.uid = e.uid || 0),
										this.colorManager.deserialize(e.cm, t, function (e) {
											e && (n.draw(e), e.activeLayer.draw());
										}),
										void 0 !== e.stp &&
											(this.skewText.position = u.default.point(e.stp.x, e.stp.y)),
										void 0 !== e.pst &&
											((this.profileSizeText.position = u.default.point(e.pst.x, e.pst.y)),
											(this.profileSizeTextHidden = e.psth || !1)),
										(this.skewValue = e.sv),
										(this.skewAngle = e.sa),
										void 0 === e.svb || void 0 === e.sab
											? ((this.skewValueForBody = this.skewValue),
											  (this.skewAngleForBody = this.skewAngle))
											: ((this.skewValueForBody = e.svb), (this.skewAngleForBody = e.sab)),
										(this.hostFramePos = e.hfp),
										(this.polygon = v.PolyParser.parse(e.polygon)),
										void 0 !== e.dm && (this.drawMode = e.dm),
										(this.profileSize = e.size / this.drawMode),
										void 0 !== e.st && (this.screwTimes = e.st),
										e.attrs && (this.attrs = e.attrs),
										(this.squareCorner = e.sqc || !1),
										(this.panoramicCorner = e.pac || !1),
										this.updatePoly(this.polygon),
										e.dimW &&
											(this.dimForWidth.deserialize(e.dimW),
											(this.dimForWidth.forHeight = u.default.Utils.EQ_0(
												this.polygon.mulShape.tangentInStart().y,
											)),
											void 0 === e.pst && (this.dimForWidth.hidden = !0),
											this.dimForWidth.updatePoly()),
										this.draw(t),
										(this.robot = new f.CornerRobot(t)),
										this.robot.attachTo(this),
										this.robot.updateByPortion(
											f.CornerRobot.getPortionFromAngle(this.skewAngleForBody, this),
										),
										this.robot.hide(),
										this
									);
								}),
								(t.prototype.updateText = function () {
									g.DrawParams.Ins.withoutDims
										? (this.skewText.content = '')
										: ((this.skewText.fontSize = g.DrawParams.Ins.dimFontSize),
										  (this.skewText.content = (Math.round(10 * this.skewAngle) / 10).toString()),
										  this.skewText.analyseSize(),
										  (this.skewText.content += '°')),
										(this.skewText.position = this.textStartPt),
										(this.profileSizeText.bold = g.DrawParams.Ins.dimFontBold),
										(this.profileSizeText.fontSize = g.DrawParams.Ins.dimFontSize),
										(this.profileSizeText.content = this.profileSize.toString()),
										this.profileSizeText.analyseSize(),
										(this.profileSizeText.position = this.textStartPt.rotate(
											Math.PI,
											this.centerEdge.middle(),
										));
								}),
								Object.defineProperty(t.prototype, 'cornerEdge', {
									get: function () {
										return this.hostFramePos === h.left ? this.outerEdges[1] : this.outerEdges[0];
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'cornerFrame', {
									get: function () {
										var e = new y.FrameUtil(this.view).getIntersectFrames(this.cornerEdge, void 0);
										return e.length > 0 ? e[0] : void 0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'cornerLikeFrame', {
									get: function () {
										var e = this.componentsUntil('corner', v.ShapeType.Frame).pop();
										if (e && e instanceof v.Frame) return e;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'outerEdges', {
									get: function () {
										return [this.shapes[0].edge(0), this.shapes[1].edge(2)];
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'centerEdge', {
									get: function () {
										return this.shapes[0].edge(2);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'hostEdge', {
									get: function () {
										return this.hostFramePos === h.left ? this.outerEdges[0] : this.outerEdges[1];
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'hostFrame', {
									get: function () {
										var e = new y.FrameUtil(this.view).getIntersectFrames(this.hostEdge, void 0);
										return e.length > 0 ? e[0] : void 0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'hostLikeFrame', {
									get: function () {
										var e = this.componentsUntil('host', v.ShapeType.Frame).pop();
										if (e && e instanceof v.Frame) return e;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'textStartPt', {
									get: function () {
										var e = this.centerEdge.ps,
											t = this.centerEdge.pe;
										if (u.default.Utils.EQ_0(e.x - t.x)) {
											var n = u.default
													.point(e.x, Math.min(e.y, t.y))
													.translate(u.default.vector(0, -g.DrawParams.Ins.dimFontH)),
												r = v.SubFrame.findBy(this);
											return r && (n = n.translate(u.default.vector(0, -r.profileSize))), n;
										}
										return u.default
											.point(Math.min(e.x, t.x), e.y)
											.translate(u.default.vector(-g.DrawParams.Ins.dimFontH, 0));
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.getShapesFromPolygon = function (e) {
									var t = e.edges;
									if (4 !== t.length)
										throw new Error(
											'cannot set cornerJoiner shapes since the polygon dont has 4 edges',
										);
									var n = d.Utils.vecDirPt(
											u.default.vector(t[0].start, t[0].end),
											this.size / 2,
											t[0].start,
										),
										r = d.Utils.vecDirPt(
											u.default.vector(t[2].end, t[2].start),
											this.size / 2,
											t[2].end,
										),
										i = t[0].start,
										o = t[1].start,
										a = t[2].start,
										s = t[3].start;
									return [
										v.PolygonCreator.Ins.joinRelative(
											n,
											[
												u.default.vector(i.x - n.x, i.y - n.y),
												u.default.vector(s.x - i.x, s.y - i.y),
												u.default.vector(r.x - s.x, r.y - s.y),
												u.default.vector(n.x - r.x, n.y - r.y),
											],
											!0,
										),
										v.PolygonCreator.Ins.joinRelative(
											o,
											[
												u.default.vector(n.x - o.x, n.y - o.y),
												u.default.vector(r.x - n.x, r.y - n.y),
												u.default.vector(a.x - r.x, a.y - r.y),
												u.default.vector(o.x - a.x, o.y - a.y),
											],
											!0,
										),
									];
								}),
								(t.prototype.updatePoly = function (t) {
									var n;
									e.prototype.updatePoly.call(this, t),
										(n = a(this.getShapesFromPolygon(this.polygon), 2)),
										(this.shapes[0] = n[0]),
										(this.shapes[1] = n[1]),
										this.updateText(),
										(this.polygon.mulShape = this.polygon.edge(1));
								}),
								(t.prototype.showRobot = function (e) {
									void 0 === this.robot && (this.robot = new f.CornerRobot(e)),
										this.highlighted ? this.robot.attachTo(this) : this.robot.hide();
								}),
								(t.prototype.isLoop = function (e, n) {
									var r,
										i,
										a = this,
										s = function (e) {
											if (!(e instanceof t)) return 'continue';
											var r = new y.FrameUtil(n).getCoupleEdgeConnectedComponents(e, e.cornerEdge),
												i = new y.FrameUtil(n).getConnectedComponentsOnce(e.hostEdge, e);
											return r
												.filter(function (e) {
													return (
														!(i.length > 0) ||
														!i.some(function (t) {
															return t.frame.id === e.id;
														})
													);
												})
												.some(function (e) {
													return e.id === a.id;
												})
												? {
														value: !0,
												  }
												: void 0;
										};
									try {
										for (var l = o(e), h = l.next(); !h.done; h = l.next()) {
											var c = s(h.value);
											if ('object' == typeof c) return c.value;
										}
									} catch (e) {
										r = {
											error: e,
										};
									} finally {
										try {
											h && !h.done && (i = l.return) && i.call(l);
										} finally {
											if (r) throw r.error;
										}
									}
									return !1;
								}),
								(t.prototype.skewCornerFrame = function (e, n, r, i) {
									var a,
										s,
										l = this,
										h = this.skewValue;
									i === c.TopView
										? ((this.skewAngle = e), (this.skewValue = n))
										: ((this.skewAngleForBody = e), (this.skewValueForBody = n));
									var p = new y.FrameUtil(r).getCoupleEdgeConnectedComponents(
											this,
											this.cornerEdge,
										),
										f = new y.FrameUtil(r).getConnectedComponentsOnce(this.hostEdge, this),
										g = p.filter(function (e) {
											return (
												!(f.length > 0) ||
												!f.some(function (t) {
													return t.frame.id === e.id;
												})
											);
										});
									if (!this.isLoop(g, r)) {
										if (
											(this.skewGShape &&
												this.skewGShape.children.forEach(function (e) {
													e.moveTo(r.activeLayer);
												}),
											g.length > 0)
										) {
											var m = function (e) {
													e.gshape.parent &&
														e.gshape.parent.id() !== w.skewGShape.id() &&
														e.gshape.remove(),
														r.shapeManager.walls
															.filter(function (t) {
																return y.EdgeFinder.Instance.isPolygonConnected(
																	e.polygon,
																	t.polygon,
																);
															})
															.forEach(function (e) {
																return l.skewGShape.add(e.gshape);
															}),
														w.skewGShape.add(e.gshape);
												},
												w = this;
											try {
												for (var b = o(g), S = b.next(); !S.done; S = b.next()) m(S.value);
											} catch (e) {
												a = {
													error: e,
												};
											} finally {
												try {
													S && !S.done && (s = b.return) && s.call(b);
												} finally {
													if (a) throw a.error;
												}
											}
											var _ = v.SubFrame.findBy(this);
											if (_) {
												var P = _.parts.find(function (e) {
													return e.cornerJoinerId === l.id;
												});
												P && this.skewGShape.add(P.gshape);
											}
											this.gshape.parent && this.skewGShape.moveTo(this.gshape.parent);
											var x = this.getMinPtOnSegment(g[0].polygon, this.cornerEdge);
											if (x)
												if (i === c.Body) {
													var D = u.default.line(this.centerEdge.end, this.centerEdge.start),
														T = d.Utils.lineDirPt(D, n, u.default.point()),
														O = T.x,
														M = T.y,
														E = d.Utils.edgeToLine(this.hostEdge),
														I = d.Utils.edgeToLine(this.cornerEdge),
														C = u.default.line(this.hostEdge.middle(), this.cornerEdge.middle()),
														k = E.intersect(C)[0],
														F = I.intersect(C)[0];
													if (
														(k.x > F.x && (M = -M),
														k.y > F.y && (O = -O),
														this.skewGShape.skewX(O),
														this.skewGShape.x(-x.y * O),
														this.skewGShape.skewY(M),
														this.skewGShape.y(-x.x * M),
														!d.Utils.isSegVertical(this.cornerEdge))
													)
														return;
													this.applyScale(M, x),
														this.applyTopView(
															h,
															g.filter(function (e) {
																return e instanceof v.Frame;
															}),
															r,
														);
													var j = !1;
													g.forEach(function (e) {
														if (e instanceof t) {
															if (!j) {
																var n = e.getParentMatrices(),
																	i = e.hostEdge.end,
																	o = e.textStartPt,
																	a = i.transform(d.Utils.applyMatrixMultiply(n)),
																	s = u.default.vector(a.x - i.x, a.y - i.y),
																	l = u.default.vector(e.skewText.position, o),
																	h = s.add(l);
																e.skewText.translate(h), e.profileSizeText.translate(h), (j = !0);
															}
															e.skewCornerFrame(e.skewAngleForBody, e.skewValueForBody, r, c.Body);
														}
													});
												} else {
													if (!d.Utils.isSegVertical(this.cornerEdge)) return;
													this.applyTopView(
														n,
														g.filter(function (e) {
															return e instanceof v.Frame;
														}),
														r,
													),
														g.forEach(function (e) {
															e instanceof t &&
																e.skewCornerFrame(e.skewAngle, e.skewValue, r, c.TopView);
														});
												}
										}
										r.activeLayer.clearCache();
									}
								}),
								(t.prototype.autoAlignTopviews = function () {
									var e = this,
										n = new y.FrameUtil(this.view),
										r = s(
											n.getCoupleEdgeConnectedComponents(this, this.hostEdge),
											[this],
											n.getCoupleEdgeConnectedComponents(this, this.cornerEdge),
										),
										i = r.filter(function (e) {
											return e instanceof t;
										}),
										o = r.filter(function (e) {
											return e instanceof v.Frame;
										});
									v.TopView.optimizeDefaultOffset(o),
										i.forEach(function (t) {
											return t.skewCornerFrame(t.skewAngle, t.skewValue, e.view, c.TopView);
										}),
										o.forEach(function (t) {
											t.topView.updatePoly(), t.topView.draw(e.view);
										}),
										this.view.refresh();
								}),
								(t.prototype.applyScale = function (e, t) {
									var n = Math.atan(e),
										r = Math.cos(n);
									this.skewGShape.scaleX(r),
										this.skewGShape.x(t.x * (1 - r)),
										this.skewGShape.y(-e * r * t.x);
								}),
								(t.prototype.applyTopView = function (e, t, n) {
									var r,
										i,
										a = n.activeLayer;
									this.topViewGShape &&
										this.topViewGShape.children.forEach(function (e) {
											e.attrs.data.parent &&
												e.attrs.data.parent.gshape &&
												(a = e.attrs.data.parent.gshape),
												e.moveTo(a);
										});
									var s = new u.default.Box();
									try {
										for (var l = o(t), h = l.next(); !h.done; h = l.next()) {
											var c = h.value;
											(s = s.merge(c.polygon.box)),
												c.topView.gshape && c.topView.gshape.moveTo(this.topViewGShape);
										}
									} catch (e) {
										r = {
											error: e,
										};
									} finally {
										try {
											h && !h.done && (i = l.return) && i.call(l);
										} finally {
											if (r) throw r.error;
										}
									}
									var p = 2 * Math.atan(e),
										f = t[0];
									if (f && f.topView.gshape) {
										var y = f.topView.defaultOffset.add(f.topView.offset),
											m = Math.cos(p),
											v = Math.sin(p),
											w = -Math.sin(p),
											b = Math.cos(p),
											S = 'dim' === g.DrawParams.Ins.topViewStyle,
											_ = f.polygon.box.center.x < this.polygon.box.center.x,
											P = t.length > 0 ? this.polygon.distanceTo(s) * (_ ? 1 : -1) : 0,
											x = S ? f.topView.fakeThickness / 2 : 0,
											D = f.topView.bound.xmin - x + P;
										_ && (D = f.topView.bound.xmax + x + P);
										var T = S ? (f.topView.fakeThickness - this.size) * (_ ? -1 : 1) : 0,
											O = y.y,
											M = d.Utils.applyMatrixMultiply([
												u.default.matrix(1, 0, 0, 1, -D, -O),
												u.default.matrix(m, v, w, b, 0, 0),
												u.default.matrix(1, 0, 0, 1, D, O),
												u.default.matrix(1, 0, 0, 1, T, 0),
											]),
											E = f.topView.gshape.getTransform();
										(E.m[0] = M.a),
											(E.m[1] = M.b),
											(E.m[2] = M.c),
											(E.m[3] = M.d),
											(E.m[4] = M.tx),
											(E.m[5] = M.ty),
											this.gshape.parent &&
												this.gshape.parent.attrs.data &&
												this.gshape.parent.attrs.data.isCornerGroup &&
												this.topViewGShape.moveTo(
													this.gshape.parent.attrs.data.cornerJoiner.topViewGShape,
												),
											this.topViewGShape._setTransform(E.decompose());
									}
								}),
								(t.prototype.getMinPtOnSegment = function (e, t) {
									var n,
										r = e.edges,
										i = d.Utils.edgeToLine(t);
									if (
										(r.forEach(function (e) {
											e instanceof u.default.Segment && d.Utils.segCoincide(e, t) && (n = e);
										}),
										void 0 !== n)
									) {
										var o = u.default.vector(t.start, t.end).normalize(),
											a = u.default.vector(n.start.projectionOn(i), n.end.projectionOn(i));
										if (!a.equalTo(u.default.vector()))
											return a.normalize().equalTo(o) ? n.end : n.start;
									}
								}),
								(t.create = function (e, n, r, i, o) {
									var s;
									void 0 === r && (r = h.left),
										void 0 === o && (o = v.ShapeType.CornerJoiner),
										(s =
											o === v.ShapeType.WallCornerJoiner
												? new v.WallCornerJoiner(new v.WinPolygon(), i)
												: o === v.ShapeType.PanoramicCornerJoiner
												? new v.PanoramicCornerJoiner(new v.WinPolygon(), i)
												: new t(new v.WinPolygon(), i));
									var l = e.projectionOn(u.default.line(n.start, n.end)),
										c = u.default.vector(e, l).normalize(),
										p = d.Utils.vecDirPt(c, s.size, n.start),
										g = d.Utils.vecDirPt(c, s.size, n.end),
										y = new v.WinPolygon([
											u.default.segment(n.end, g),
											u.default.segment(g, p),
											u.default.segment(p, n.start),
											u.default.segment(n.start, n.end),
										]);
									(s.polygon = y), (s.hostFramePos = r), (s.polygon.mulShape = s.polygon.edge(1));
									var m = a(s.getShapesFromPolygon(y), 2),
										w = m[0],
										b = m[1];
									s.shapes.push(w, b);
									var S = f.CornerRobot.getPortionFromAngle(s.skewAngle, s);
									if (S >= -1 && S <= 1) {
										var _ = a(f.CornerRobot.getSkewInfo(S, s), 3),
											P = (_[0], _[1], _[2]);
										s.skewValue = P;
									}
									return (
										s.updateText(),
										(s.dimForWidth.forHeight = u.default.Utils.EQ_0(
											s.polygon.mulShape.tangentInStart().y,
										)),
										(s.dimForWidth.hidden = !0),
										s.dimForWidth.updatePoly(),
										s
									);
								}),
								(t.createFromNearest = function (e, n, r) {
									void 0 === r && (r = v.ShapeType.CornerJoiner);
									var i = new y.FrameUtil(n),
										o = a(i.getNearestShape(e), 3),
										s = o[0],
										l = o[1];
									if ((o[2], s && l)) {
										if (i.isCoincidedCornerJoiner(s)) return;
										var c = h.left,
											p = l.polygon.box.center,
											f = void 0;
										if (p.leftTo(u.default.line(s.start, s.end))) {
											var d = s.reverse();
											f = t.create(p, d, c, n, r);
										} else f = t.create(p, s, c, n, r);
										return f;
									}
								}),
								(t.prototype.updateSkewAngle = function (e, t, n) {
									var r = f.CornerRobot.getPortionFromAngle(e, this),
										i = a(f.CornerRobot.getSkewInfo(r, this), 3),
										o = i[0],
										s = (i[1], i[2]);
									void 0 === this.robot && (this.robot = new f.CornerRobot(t)),
										void 0 === this.robot.hostShape &&
											(this.robot.attachTo(this), this.robot.hide()),
										this.skewCornerFrame(o, s, t, n),
										this.autoAlignTopviews(),
										this.updatePoly(this.polygon),
										this.draw(t);
								}),
								(t.prototype.rebuildPoly = function () {
									var e = this.polygon.edges,
										t = e[0].start,
										n = this.size,
										r = d.Utils.vecDirPt(u.default.vector(e[0].start, e[0].end), n, e[0].start),
										i = e[2].end,
										o = d.Utils.vecDirPt(u.default.vector(e[0].start, e[0].end), n, e[2].end);
									return new v.WinPolygon([
										u.default.segment(t, r),
										u.default.segment(r, o),
										u.default.segment(o, i),
										u.default.segment(i, t),
									]);
								}),
								(t.prototype.delete = function (e) {
									return (
										!!this.highlighted &&
										(this.hideAssist(),
										this.remove(),
										new y.FrameUtil(e).getIntersectFrames(this.cornerEdge, void 0).length > 0 &&
											(this.skewGShape &&
												(this.skewGShape.children.forEach(function (t) {
													return t.moveTo(e.activeLayer);
												}),
												this.skewGShape.hide()),
											this.topViewGShape &&
												(this.topViewGShape.children.forEach(function (e) {
													var t = e.getAttr('data');
													t && t.parent && t.parent.gshape && e.moveTo(t.parent.gshape);
												}),
												this.topViewGShape.hide())),
										!0)
									);
								}),
								t
							);
						})(v.Couple);
						t.CornerJoiner = w;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.WallCornerJoiner = void 0);
						var o = n(1),
							a = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n, o.ShapeType.WallCornerJoiner) || this;
									return (r.view = n), r;
								}
								return i(t, e), t;
							})(o.CornerJoiner);
						t.WallCornerJoiner = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PanoramicCornerJoiner = void 0);
						var o = n(1),
							a = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n, o.ShapeType.PanoramicCornerJoiner) || this;
									return (r.view = n), (r.profileSizeTextHidden = !0), (r.profileSize = 1e-5), r;
								}
								return i(t, e), t;
							})(o.CornerJoiner);
						t.PanoramicCornerJoiner = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Connector = void 0);
						var l = s(n(0)),
							h = n(2),
							c = n(5),
							u = n(16),
							p = n(65),
							f = n(11),
							d = n(6),
							g = n(1),
							y = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, g.ShapeType.Connector, n) || this;
									return (r.view = n), (r.size = r.params.connector), r;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'profileSize', {
										get: function () {
											return this.size;
										},
										set: function (e) {
											this.size = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'toolType', {
										get: function () {
											return c.ToolType.editConnector;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.deserialize = function (e, t) {
										var n = this;
										return (
											(this.uid = e.uid || 0),
											e.size && (this.size = e.size),
											this.colorManager.deserialize(e.cm, t, function (e) {
												e && (n.draw(e), e.activeLayer.draw());
											}),
											(this.polygon = u.PolyParser.parse(e.polygon)),
											this.updatePoly(this.polygon),
											e.dimW &&
												(this.dimForWidth.deserialize(e.dimW),
												(this.dimForWidth.forHeight = l.default.Utils.EQ_0(
													this.polygon.mulShape.tangentInStart().y,
												)),
												this.dimForWidth.updatePoly()),
											void 0 !== e.st && (this.screwTimes = e.st),
											e.attrs && (this.attrs = e.attrs),
											this.draw(t),
											this
										);
									}),
									(t.prototype.findFrame = function (e) {
										var t, n;
										try {
											for (var r = o(e.edges), i = r.next(); !i.done; i = r.next()) {
												var a = i.value,
													s = new f.FrameUtil(this.view).nextComponent(e.shape, a);
												if (s) {
													if (s.shape instanceof g.Frame) return s;
													if (s.shape.type === g.ShapeType.CornerJoiner) return;
													return this.findFrame(s);
												}
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												i && !i.done && (n = r.return) && n.call(r);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									Object.defineProperty(t.prototype, 'hostLikeFrame', {
										get: function () {
											var e,
												t,
												n = this.outerEdges;
											try {
												for (var r = o(n), i = r.next(); !i.done; i = r.next()) {
													var a = i.value,
														s = this.findFrame({
															shape: this,
															edges: [a],
														});
													if (s) return s.shape;
												}
											} catch (t) {
												e = {
													error: t,
												};
											} finally {
												try {
													i && !i.done && (t = r.return) && t.call(r);
												} finally {
													if (e) throw e.error;
												}
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'outerEdges', {
										get: function () {
											return [this.shapes[0].edge(3), this.shapes[0].edge(1)];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'middleEdge', {
										get: function () {
											return l.default.segment(
												this.shapes[0].edge(0).middle(),
												this.shapes[0].edge(2).middle(),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'centerEdge', {
										get: function () {
											return this.shapes[0].edge(3);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'edges', {
										get: function () {
											return this.polygon.edges;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'tCornerEdge', {
										get: function () {
											return this.middleEdge;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'tCornerFrame', {
										get: function () {
											var e = this.tCornerEdge;
											return this.view.shapeManager.shapem.find(function (t) {
												return h.Utils.polyConcideSeg(t.polygon, e);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.skewTCorner = function () {
										var e = this.tCornerFrame;
										e && (e.tCornerStyle(), (this.dimForWidth.position = f.Direction.Up));
									}),
									(t.prototype.resize = function (e, t) {
										var n = this;
										void 0 === t && (t = !1);
										var r = t ? 3 : 1,
											i = t ? 1 : 3,
											o = this.edges[r],
											a = new f.FrameUtil(this.view).getCoupleEdgeConnectedComponents(this, o),
											s = new f.FrameUtil(this.view).getConnectedComponentsOnce(
												this.edges[i],
												this,
											),
											l = o.tangentInStart(),
											h = (
												-1 === this.polygon.orientation ? l.rotate90CW() : l.rotate90CCW()
											).multiply(e - this.size);
										this.updatePoly(this.polygon.dragEdge(r, h)),
											this.draw(this.view),
											(this.size = e),
											a
												.filter(function (e) {
													return (
														!(s.length > 0) ||
														!s.some(function (t) {
															return t.frame.id === e.id;
														})
													);
												})
												.forEach(function (e) {
													return e.translate(h);
												}),
											a
												.filter(function (e) {
													return (
														!(s.length > 0) ||
														!s.some(function (t) {
															return t.frame.id === e.id;
														})
													);
												})
												.forEach(function (e) {
													e instanceof g.CornerJoiner && e.skewFrame(n.view);
												}),
											this.view.shapeManager.refreshDimStatus(),
											this.view.refresh();
									}),
									(t.prototype.hitBar = function (t, n) {
										var r = e.prototype.hitBar.call(this, t, n);
										return (
											r &&
												n.eventBus.emit({
													type: d.EventType.connector_settings,
													payload: new d.CoupleSettings(this, n),
												}),
											r
										);
									}),
									(t.prototype.updatePoly = function (t) {
										e.prototype.updatePoly.call(this, t),
											(this.shapes = [this.polygon.clone()]),
											(this.polygon.mulShape = this.polygon.edge(1));
									}),
									(t.prototype.showRobot = function (e) {
										void 0 === this.robot && (this.robot = new p.ConnectorRobot(e)),
											this.highlighted ? this.robot.attachTo(this) : this.robot.hide();
									}),
									(t.create = function (e, n, r) {
										var i = e.projectionOn(l.default.line(n.start, n.end)),
											o = l.default.vector(e, i).normalize(),
											a = h.Utils.vecDirPt(o, r.params.connector, n.start),
											s = h.Utils.vecDirPt(o, r.params.connector, n.end),
											c = new g.WinPolygon([
												l.default.segment(n.end, s),
												l.default.segment(s, a),
												l.default.segment(a, n.start),
												l.default.segment(n.start, n.end),
											]),
											u = new t(c, r);
										return (
											(u.polygon.mulShape = u.polygon.edge(1)),
											u.shapes.push(c.clone()),
											(u.dimForWidth.forHeight = l.default.Utils.EQ_0(
												u.polygon.mulShape.tangentInStart().y,
											)),
											u.dimForWidth.updatePoly(),
											u
										);
									}),
									(t.createFromNearest = function (e, n) {
										var r = new f.FrameUtil(n),
											i = a(r.getNearestShape(e), 3),
											o = i[0],
											s = i[1];
										if ((i[2], o && s)) {
											var l = s.polygon.box.center;
											return t.create(l, o, n);
										}
									}),
									(t.prototype.delete = function (e) {
										return !!this.highlighted && (this.hideAssist(), this.remove(), !0);
									}),
									t
								);
							})(g.Couple);
						t.Connector = y;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrameRelationData = t.FrameRelationEnum = t.ExtraDimTypeEnum = void 0);
						var r = n(2);
						!(function (e) {
							(e[(e.Arbitrary = 0)] = 'Arbitrary'),
								(e[(e.Horizontal = 1)] = 'Horizontal'),
								(e[(e.Vertical = 2)] = 'Vertical'),
								(e[(e.Angle = 3)] = 'Angle'),
								(e[(e.Radius = 4)] = 'Radius');
						})(t.ExtraDimTypeEnum || (t.ExtraDimTypeEnum = {})),
							(function (e) {
								(e[(e.frame = 0)] = 'frame'), (e[(e.dock = 1)] = 'dock');
							})(t.FrameRelationEnum || (t.FrameRelationEnum = {}));
						var i = (function () {
							function e(e, t) {
								(this.type = e), (this.vertexIndex = t);
							}
							return (
								(e.prototype.toJSON = function () {
									return {
										type: this.type,
										vertexIndex: this.vertexIndex,
										dock: this.dock
											? {
													dockId: this.dock.dockId.toJSON(),
													polyId: this.dock.polyId.toJSON(),
											  }
											: void 0,
										frameIdx: this.frameIdx,
									};
								}),
								(e.prototype.deserialize = function (e) {
									return (
										(this.type = e.type),
										(this.vertexIndex = e.vertexIndex),
										e.dock &&
											(this.dock = {
												dockId: new r.PolyId().deserialize(e.dock.dockId),
												polyId: new r.PolyId().deserialize(e.dock.polyId),
											}),
										(this.frameIdx = e.frameIdx),
										this
									);
								}),
								e
							);
						})();
						t.FrameRelationData = i;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDim = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(1),
							h = (function (e) {
								function t(t, n, r, i) {
									void 0 === i && (i = a.default.vector());
									var o = e.call(this, l.ShapeType.Dim, r.polygon) || this;
									return (
										(o.sPt = t),
										(o.ePt = n),
										(o.host = r),
										(o.offVec = i),
										(o.name = ''),
										(o.value = 0),
										(o.vshapes = []),
										(o.frameRelation = []),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'params', {
										get: function () {
											return this.host.view.params;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'extraDimType', {
										get: function () {
											return l.ExtraDimTypeEnum.Arbitrary;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'obj', {
										get: function () {
											return this;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dimShow', {
										get: function () {
											return !0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.applyDiff = function (e) {}),
									(t.prototype.createFrameRelation = function (e) {}),
									(t.prototype.create = function () {}),
									(t.prototype.updatePtFromRelation = function () {}),
									(t.prototype.updatePoly = function (e) {
										e && this.updatePtFromRelation(), this.create();
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, t),
											0 !== this.vshapes.length &&
												(this.vshapes.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshapes),
												(this.vshapes = []));
									}),
									(t.prototype.translate = function (e) {
										(this.sPt = this.sPt.translate(e)), (this.ePt = this.ePt.translate(e));
									}),
									(t.prototype.toJSON = function () {
										var e = [];
										return (
											this.frameRelation.forEach(function (t) {
												return e.push(t.toJSON());
											}),
											{
												st: this.sPt.toJSON(),
												et: this.ePt.toJSON(),
												ov: this.offVec.toJSON(),
												dt: this.extraDimType,
												fr: e,
												name: this.name,
											}
										);
									}),
									(t.prototype.hitPolygon = function () {
										return new l.WinPolygon();
									}),
									(t.prototype.hitBar = function (e, t) {
										if (void 0 === this.hitPolygon()) return !1;
										var n = s.Utils.applyMatrixMultiply(this.host.getParentMatrices()),
											r = this.hitPolygon().transform(n).contains(e);
										return r ? this.highlight(!this.highlighted) : this.highlight(!1), r;
									}),
									(t.prototype.highlight = function (e) {
										this.vshapes.forEach(function (t) {
											return s.DisplayUtils.highlight(e, t, s.ShapeColor.dragRobot);
										});
									}),
									Object.defineProperty(t.prototype, 'highlighted', {
										get: function () {
											return s.DisplayUtils.isHighlight(this.vshapes[0]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.remove = function (t) {
										e.prototype.remove.call(this, t),
											this.recycle(!0),
											this.host.deleteExtraDim(this);
									}),
									(t.prototype.delete = function (e) {
										return !!this.highlighted && (this.remove(), !0);
									}),
									t
								);
							})(l.Shape);
						t.ExtraDim = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimArbitrary = void 0);
						var l = s(n(0)),
							h = n(5),
							c = n(2),
							u = n(7),
							p = n(1),
							f = (function (e) {
								function t(t, n, r, i) {
									void 0 === i && (i = l.default.vector());
									var o = e.call(this, t, n, r, i) || this;
									return (
										(o.sPt = t),
										(o.ePt = n),
										(o.host = r),
										(o.offVec = i),
										(o.shapes = []),
										o.create(),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'extraDimType', {
										get: function () {
											return p.ExtraDimTypeEnum.Arbitrary;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshapes.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										}),
											this.shapes.forEach(function (n, r) {
												var i = r >= t.vshapes.length ? u.Artisan.recycleShape(n, e) : t.vshapes[r];
												i.setAttr('robot', t),
													i.setAttr('data', {
														segs: n,
														stroke: c.ShapeColor.darkMode ? 'yellow' : 'blue',
														drag: !0,
														dimInfo: t,
													}),
													i.setAttr('tool', h.ToolType.editExtraDim),
													i.moveToTop(),
													(t.vshapes[r] = i),
													t.addToGroup([i]);
											});
									}),
									(t.prototype.updatePtFromRelation = function () {
										var e = this;
										if (2 === this.frameRelation.length) {
											var t = this.frameRelation[0],
												n = this.frameRelation[1],
												r = function (t, n) {
													void 0 === n && (n = !0);
													var r = e.getPtFromRelation(t);
													r && (n ? (e.sPt = r) : (e.ePt = r));
												};
											r(t), r(n, !1);
										}
									}),
									(t.prototype.getPtFromRelation = function (e) {
										var t;
										if (
											((void 0 !== e.frameIdx &&
												(t = this.host.view.shapeManager.shapem[e.frameIdx])) ||
												(t = this.host),
											e.type === p.FrameRelationEnum.frame)
										) {
											if (e.vertexIndex >= t.polygon.vertices.length) return;
											return t.polygon.vertices[e.vertexIndex].clone();
										}
										if (e.type === p.FrameRelationEnum.dock) {
											var n = t.mulManager.dockMgr.getData(e.dock.dockId);
											if (n) {
												var r = n.find(function (t) {
													return t.idx.equalTo(e.dock.polyId);
												});
												if (r) return r.pt.clone();
											}
										}
									}),
									(t.prototype.createFrameRelation = function (e, t) {
										if ((void 0 === t && (t = !1), e)) this.frameRelation = e;
										else {
											this.frameRelation = [];
											var n = this.host.getPointPosition(this.sPt, t);
											n && this.frameRelation.push(n);
											var r = this.host.getPointPosition(this.ePt, t);
											r && this.frameRelation.push(r);
										}
									}),
									(t.prototype.create = function (e) {
										var t = this;
										if (
											(void 0 === e && (e = !0),
											(this.value = this.ePt.distanceTo(this.sPt)[0]),
											(this.shapes = []),
											!u.DrawParams.Ins.withoutDims && !this.sPt.equalTo(this.ePt))
										) {
											var n = l.default
													.vector(this.sPt, this.ePt)
													.normalize()
													.rotate90CW()
													.multiply(this.params.extraDim),
												r = c.Utils.vecDirPt(n, this.params.extraDim, this.sPt),
												i = c.Utils.vecDirPt(n, this.params.extraDim, this.ePt),
												o = l.default.segment(r, i),
												s = l.default.vector(this.sPt, this.ePt).rotate90CW(),
												h = [o.start, o.end].map(function (e) {
													return l.default.segment(
														c.Utils.vecDirPt(s, t.params.extraDim, e),
														c.Utils.vecDirPt(s.multiply(-1), t.params.extraDim, e),
													);
												});
											l.default.vector().equalTo(this.offVec) ||
												((h[0] = h[0].translate(this.offVec)),
												(h[1] = h[1].translate(this.offVec)),
												(o = o.translate(this.offVec))),
												(this.shapes = [a(h, [o])]);
										}
									}),
									(t.prototype.getEditDimInfo = function () {
										var e,
											t,
											n,
											r = !0,
											i = this.host.polygon.edges,
											o = this.host.mulManager.bars;
										if (2 === this.frameRelation.length) {
											var a = this.frameRelation[0],
												s = this.frameRelation[1];
											if (!a || !s) return [this.host, void 0, void 0, r, n];
											var l = this.getPtFromRelation(a),
												h = this.getPtFromRelation(s);
											if (!l || !h) return [this.host, void 0, void 0, r, n];
											if (
												a.type === p.FrameRelationEnum.frame &&
												s.type === p.FrameRelationEnum.frame
											) {
												r = !0;
												var c = s.vertexIndex,
													u = a.vertexIndex,
													f = Math.abs(c - u);
												(1 !== f && f !== i.length - 1) ||
													((n = i.findIndex(function (e) {
														return e.contains(l) && e.contains(h);
													})) > -1 &&
														(l.equalTo(i[n].start)
															? ((n = (n + 1) % i.length), (e = this.host.frameManager.bars[n]))
															: ((n = (n - 1 + i.length) % i.length),
															  (e = this.host.frameManager.bars[n])),
														(t = this.getDir(l, h))));
											} else
												a.type === p.FrameRelationEnum.frame && s.type === p.FrameRelationEnum.dock
													? ((r = !1),
													  (e = o.find(function (e) {
															return e.polygon.polyId.equalTo(s.dock.polyId);
													  })),
													  (t = this.getDir(l, h)))
													: a.type === p.FrameRelationEnum.dock &&
													  s.type === p.FrameRelationEnum.frame
													? ((r = !1),
													  (e = o.find(function (e) {
															return e.polygon.polyId.equalTo(a.dock.polyId);
													  })),
													  (t = this.getDir(h, l)))
													: ((r = !1),
													  (e = o.find(function (e) {
															return e.polygon.polyId.equalTo(s.dock.polyId);
													  })),
													  (t = this.getDir(l, h)),
													  e.polygon.contains(l) &&
															e.polygon.contains(h) &&
															((e = o.find(function (e) {
																return e.polygon.polyId.equalTo(a.dock.polyId);
															})),
															(t = this.getDir(h, l))));
										}
										return [this.host, e, t, r, n];
									}),
									(t.prototype.getDir = function (e, t) {
										return this.extraDimType === p.ExtraDimTypeEnum.Horizontal
											? l.default.vector(t.x - e.x, 0).normalize()
											: l.default.vector(0, t.y - e.y).normalize();
									}),
									(t.prototype.applyDiff = function (e) {
										if (!l.default.Utils.EQ_0(e - this.value)) {
											var t = this.topFrame.view,
												n = o(this.getEditDimInfo(), 5),
												r = n[0],
												i = n[1],
												a = n[2],
												s = n[3],
												h = n[4];
											if (i && a) {
												var c = this.vshapes[0].attrs.data.segs[2].length,
													u = e - c,
													f = e / c;
												s
													? (r.editDim(h, f, a.multiply(u), t), r.updateFrame(!0), r.draw(t))
													: t.shapeManager.drag(i, a.multiply(u));
											} else {
												if (!this.sPt || !this.ePt) return;
												if (
													!(
														this instanceof p.ExtraDimHorizontal ||
														this instanceof p.ExtraDimVertical
													)
												)
													return;
												this instanceof p.ExtraDimHorizontal
													? (this.ePt = this.sPt.translate(
															l.default
																.vector(this.ePt.x - this.sPt.x, 0)
																.normalize()
																.multiply(e),
													  ))
													: (this.ePt = this.sPt.translate(
															l.default
																.vector(0, this.ePt.y - this.sPt.y)
																.normalize()
																.multiply(e),
													  )),
													this.updatePoly(),
													this.createFrameRelation(),
													this.draw(t);
											}
										}
									}),
									(t.prototype.hitPolygon = function () {
										if (!this.sPt.equalTo(this.ePt) && this.shapes.length > 0) {
											var t = [this.shapes[0][0].clone(), this.shapes[0][1].clone()];
											return new p.WinPolygon([
												t[0],
												l.default.segment(t[0].end, t[1].end),
												l.default.segment(t[1].end, t[1].start),
												l.default.segment(t[1].start, t[0].start),
											]);
										}
										return e.prototype.hitPolygon.call(this);
									}),
									t
								);
							})(p.ExtraDim);
						t.ExtraDimArbitrary = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimHorizontal = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(7),
							h = n(1),
							c = (function (e) {
								function t(t, n, r, i) {
									void 0 === i && (i = a.default.vector());
									var o = e.call(this, t, n, r, i) || this;
									return (o.sPt = t), (o.ePt = n), (o.host = r), (o.offVec = i), o.create(), o;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'extraDimType', {
										get: function () {
											return h.ExtraDimTypeEnum.Horizontal;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.create = function () {
										if (
											((this.value = Math.abs(this.ePt.x - this.sPt.x)),
											(this.shapes = []),
											!l.DrawParams.Ins.withoutDims &&
												!a.default.Utils.EQ_0(this.ePt.x - this.sPt.x))
										) {
											var e = a.default
													.vector(this.ePt.x - this.sPt.x, 0)
													.normalize()
													.rotate90CW()
													.multiply(this.params.extraDim),
												t = s.Utils.vecDirPt(e, this.params.extraDim, this.sPt),
												n = s.Utils.vecDirPt(
													e,
													this.params.extraDim,
													a.default.point(this.ePt.x, this.sPt.y),
												),
												r = a.default.segment(t, n),
												i = a.default.segment(
													a.default.point(t.x, t.y - this.params.extraDim),
													a.default.point(t.x, t.y + this.params.extraDim),
												),
												o = a.default.segment(
													a.default.point(n.x, n.y - this.params.extraDim),
													a.default.point(n.x, n.y + this.params.extraDim),
												);
											a.default.vector().equalTo(this.offVec) ||
												((i = i.translate(this.offVec)),
												(o = o.translate(this.offVec)),
												(r = r.translate(this.offVec))),
												(this.shapes = [[i, o, r]]);
										}
									}),
									t
								);
							})(h.ExtraDimArbitrary);
						t.ExtraDimHorizontal = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimRadius = void 0);
						var s = a(n(0)),
							l = n(5),
							h = n(2),
							c = n(7),
							u = n(1),
							p = (function (e) {
								function t(t, n, r, i) {
									var o = e.call(this, n, s.default.point(), r, i) || this;
									return (
										(o.text = t),
										(o.sPt = n),
										(o.host = r),
										(o.offVec = i),
										(o.shapes = []),
										o.create(),
										o
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'extraDimType', {
										get: function () {
											return u.ExtraDimTypeEnum.Radius;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshapes.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										}),
											this.shapes.forEach(function (n, r) {
												var i = r >= t.vshapes.length ? c.Artisan.recycleShape(n, e) : t.vshapes[r];
												i.setAttr('robot', t),
													i.setAttr('data', {
														poly: n,
														stroke: h.ShapeColor.darkMode ? 'yellow' : 'blue',
														drag: !0,
														dimInfo: t,
													}),
													i.setAttr('tool', l.ToolType.editExtraDim),
													i.moveToTop(),
													(t.vshapes[r] = i),
													t.addToGroup([i]);
											});
									}),
									(t.prototype.create = function () {
										var e, t;
										'' !== this.text
											? (this.shapes[0] = new u.Text(
													this.text,
													this.sPt.translate(this.offVec),
													u.TextAlign.Left,
													!1,
											  ))
											: (this.shapes = []),
											c.DrawParams.Ins.withoutDims && (this.shapes = []);
										var n = this.host.polygon.edges;
										try {
											for (var r = o(n), i = r.next(); !i.done; i = r.next()) {
												var a = i.value;
												if (a instanceof s.default.Arc && a.contains(this.sPt))
													return void (this.value = a.r.valueOf());
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												i && !i.done && (t = r.return) && t.call(r);
											} finally {
												if (e) throw e.error;
											}
										}
									}),
									(t.prototype.updatePtFromRelation = function () {
										if (1 === this.frameRelation.length) {
											var e = this.frameRelation[0],
												n = this.host.polygon.edge(e.vertexIndex);
											n instanceof s.default.Arc
												? ((this.sPt = n.middle().clone()),
												  (this.text = t.buildRadiusString(n.r.valueOf())))
												: (this.text = '');
										}
									}),
									(t.prototype.createFrameRelation = function (e) {
										if (e) this.frameRelation = e;
										else {
											this.frameRelation = [];
											for (var t = this.host.polygon.edges, n = 0; n < t.length; n++)
												t[n].contains(this.sPt) &&
													this.frameRelation.push(
														new u.FrameRelationData(u.FrameRelationEnum.frame, n),
													);
										}
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.txt = this.text), t;
									}),
									(t.buildRadiusString = function (e) {
										return 'r=' + (Math.round(10 * e) / 10).toString();
									}),
									(t.prototype.hitPolygon = function () {
										if (0 === this.shapes.length) return new u.WinPolygon();
										var e = this.shapes[0].position.clone();
										return (
											(e.y -= 40),
											u.PolygonCreator.Ins.joinRelative(e, [
												s.default.vector(0, 80),
												s.default.vector(500, 0),
												s.default.vector(0, -80),
												s.default.vector(-500, 0),
											])
										);
									}),
									t
								);
							})(u.ExtraDim);
						t.ExtraDimRadius = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimVertical = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(7),
							h = n(1),
							c = (function (e) {
								function t(t, n, r, i) {
									void 0 === i && (i = a.default.vector());
									var o = e.call(this, t, n, r, i) || this;
									return (o.sPt = t), (o.ePt = n), (o.host = r), (o.offVec = i), o.create(), o;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'extraDimType', {
										get: function () {
											return h.ExtraDimTypeEnum.Vertical;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.create = function () {
										if (
											((this.value = Math.abs(this.ePt.y - this.sPt.y)),
											(this.shapes = []),
											!l.DrawParams.Ins.withoutDims &&
												!a.default.Utils.EQ_0(this.ePt.y - this.sPt.y))
										) {
											var e = a.default
													.vector(0, this.ePt.y - this.sPt.y)
													.normalize()
													.rotate90CW()
													.multiply(this.params.extraDim),
												t = s.Utils.vecDirPt(e, this.params.extraDim, this.sPt),
												n = s.Utils.vecDirPt(
													e,
													this.params.extraDim,
													a.default.point(this.sPt.x, this.ePt.y),
												),
												r = a.default.segment(t, n),
												i = a.default.segment(
													a.default.point(t.x - this.params.extraDim, t.y),
													a.default.point(t.x + this.params.extraDim, t.y),
												),
												o = a.default.segment(
													a.default.point(n.x - this.params.extraDim, n.y),
													a.default.point(n.x + this.params.extraDim, n.y),
												);
											a.default.vector().equalTo(this.offVec) ||
												((i = i.translate(this.offVec)),
												(o = o.translate(this.offVec)),
												(r = r.translate(this.offVec))),
												(this.shapes = [[i, o, r]]);
										}
									}),
									t
								);
							})(h.ExtraDimArbitrary);
						t.ExtraDimVertical = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimAngle = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(2),
							h = n(7),
							c = n(9),
							u = n(1),
							p = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = a.default.vector());
									var i = e.call(this, t, a.default.point(), n, r) || this;
									return (i.sPt = t), (i.host = n), (i.offVec = r), (i.shapes = []), i.create(), i;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'extraDimType', {
										get: function () {
											return u.ExtraDimTypeEnum.Angle;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshapes.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										}),
											this.shapes.forEach(function (n, r) {
												var i = r >= t.vshapes.length,
													o = l.ShapeColor.dim,
													a = i ? h.Artisan.recycleShape(n, e) : t.vshapes[r];
												n instanceof u.Text
													? ((n.color = o),
													  (n.draggable = !1),
													  a.setAttr('data', {
															poly: n,
															dimInfo: t,
													  }))
													: a.setAttr('data', {
															poly: n,
															stroke: o,
															drag: !1,
															fcolor: 'none',
															dashed: !1,
													  }),
													a.setAttr('robot', t),
													a.setAttr('tool', s.ToolType.editExtraDim),
													a.moveToTop(),
													(t.vshapes[r] = a),
													t.addToGroup([a]);
											});
									}),
									(t.prototype.create = function () {
										this.createFrameRelation();
										var e = this.params.angleLength;
										if (
											((this.shapes = []),
											1 === this.frameRelation.length &&
												this.frameRelation[0].type === u.FrameRelationEnum.frame)
										) {
											var n = this.frameRelation[0].vertexIndex;
											this.sPt = this.host.polygon.vertices[n].clone();
											var r = this.host.polygon.edges,
												i = r[(n + r.length - 1) % r.length],
												o = r[n],
												s = l.Utils.vecDirPt(
													a.default.vector(i.start, i.end).multiply(-1),
													e,
													this.sPt,
												),
												p = l.Utils.vecDirPt(a.default.vector(o.start, o.end), e, this.sPt);
											if (i instanceof a.default.Segment && o instanceof a.default.Segment) {
												var f = a.default.vector(i.start.x - i.end.x, i.start.y - i.end.y),
													d = a.default.vector(o.end.x - i.end.x, o.end.y - i.end.y),
													g = Math.acos(f.dot(d) / (f.length * d.length));
												if (((this.value = (180 * g) / Math.PI), h.DrawParams.Ins.withoutDims))
													return void (this.shapes = []);
												var y,
													m = t.buildAngleString(g),
													v = i.end.projectionOn(a.default.line(s, p)),
													w = a.default.line(v, this.sPt),
													b = a.default.segment(i.start, o.end).middle(),
													S = w.intersect(a.default.circle(this.sPt, e)),
													_ = Number.MAX_VALUE;
												if (
													(S.forEach(function (e) {
														var t = e.distanceTo(b)[0];
														t < _ && ((y = e.clone()), (_ = t));
													}),
													void 0 !== y)
												) {
													var P = a.default.vector(),
														x = a.default.vector(i.end, v);
													x.equalTo(P) || (P = x.normalize().multiply(6 * this.params.frame));
													var D = c.ArcUtils.CreateArcFrom3Points(s, p, y);
													(this.shapes[0] = new u.Text(
														m,
														this.sPt.translate(P),
														u.TextAlign.Center,
														!1,
													)),
														(this.shapes[1] = new u.WinPolygon([
															D,
															a.default.segment(p, this.sPt),
															a.default.segment(this.sPt, s),
														]));
												}
											}
										}
									}),
									(t.prototype.updatePtFromRelation = function () {
										if (1 === this.frameRelation.length) {
											var e = this.frameRelation[0];
											e.type === u.FrameRelationEnum.frame &&
												(this.sPt = this.host.polygon.vertices[e.vertexIndex]);
										}
									}),
									(t.prototype.createFrameRelation = function (e) {
										if (e) this.frameRelation = e;
										else {
											this.frameRelation = [];
											var t = this.host.getPointPosition(this.sPt, !0);
											t && this.frameRelation.push(t);
										}
									}),
									(t.buildAngleString = function (e) {
										return (Math.round(((180 * e) / Math.PI) * 10) / 10).toString() + '°';
									}),
									Object.defineProperty(t.prototype, 'textNumber', {
										get: function () {
											var e = '0';
											if (this.shapes[0]) {
												var t = this.shapes[0].content;
												e = t.substring(0, t.length - 1);
											}
											return Number.parseFloat(e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'vertexIndex', {
										get: function () {
											var e;
											return (
												1 === this.frameRelation.length && (e = this.frameRelation[0].vertexIndex),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.applyDiff = function (e) {
										if (!a.default.Utils.EQ_0(e - this.value)) {
											var t = this.value,
												n = this.vertexIndex,
												r = e;
											if (void 0 !== n) {
												var i = (r / 180) * Math.PI,
													o = (t / 180) * Math.PI;
												if (!(i < 0)) {
													this.value = r;
													var s,
														h = this.host.polygon,
														p = new u.DescriptivePolygonPoints(h).vertexes,
														f = p.length,
														d = l.Utils.getNextIdx(n, f),
														g = l.Utils.getPrevIdx(n, f),
														y = a.default.segment(p[g], p[d]),
														m = h.edge(n).start,
														v = p[d],
														w = a.default.segment(m, v),
														b = i - o;
													s = m.leftTo(l.Utils.edgeToLine(y)) ? w.rotate(b, m) : w.rotate(-b, m);
													var S = this.host.polygon.edges;
													(S[n] = s),
														c.Frametify.edgeIntersection(S, n),
														(this.host.polygon = this.host.polygon.cloneWith(S)),
														this.host.updateFrame(!0),
														this.host.draw(this.host.view);
												}
											}
										}
									}),
									(t.prototype.hitPolygon = function () {
										if (0 === this.shapes.length) return new u.WinPolygon();
										var e = this.shapes[0].position.clone();
										return (
											(e.y -= 40),
											u.PolygonCreator.Ins.joinRelative(e, [
												a.default.vector(0, 80),
												a.default.vector(300, 0),
												a.default.vector(0, -80),
												a.default.vector(-300, 0),
											])
										);
									}),
									t
								);
							})(u.ExtraDim);
						t.ExtraDimAngle = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Note = void 0);
						var a = o(n(0)),
							s = n(5),
							l = n(2),
							h = n(16),
							c = n(7),
							u = n(1),
							p = (function (e) {
								function t(t, n, r) {
									void 0 === t && (t = 'Note'),
										void 0 === n && (n = a.default.point()),
										void 0 === r && (r = a.default.point());
									var i = e.call(this, u.ShapeType.Note, new h.WinPolygon()) || this;
									return (
										(i.text = t),
										(i.from = n),
										(i.to = r),
										(i.selected = !1),
										(i.hidden = !1),
										(i.color = l.ShapeColor.dim),
										(i.align = u.TextAlign.Center),
										(i.multiline = !1),
										(i.vshapes = []),
										(i.shapes = []),
										(i.anchorSize = 15),
										(i._fontSize = 120),
										i
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'box', {
										get: function () {
											var e = new a.default.Box();
											return (
												this.shapes.forEach(function (t) {
													return (e = e.merge(t.box));
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fontSize', {
										get: function () {
											return this._fontSize;
										},
										set: function (e) {
											this._fontSize = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hitNote = function (e, t) {
										return (
											(this.selected = this.shapes.some(function (t) {
												return t.contains(e);
											})),
											this.draw(t),
											this.selected
										);
									}),
									(t.prototype.onEdit = function (e, t) {
										(this.text = e), this.updatePoly(), this.draw(t);
									}),
									(t.prototype.updatePoly = function () {
										return (
											(this.shapes = []),
											c.DrawParams.Ins.withoutDims || this.hidden || this.createShapes(),
											this
										);
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this),
											0 !== this.vshapes.length &&
												(this.vshapes.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshapes),
												(this.vshapes = []));
									}),
									(t.prototype.translate = function (e) {
										(this.from = this.from.translate(e)),
											(this.to = this.to.translate(e)),
											this.shapes.forEach(function (t) {
												return t.translate(e);
											});
									}),
									(t.prototype.toJSON = function () {
										return {
											from: this.from.toJSON(),
											to: this.to.toJSON(),
											text: this.text,
											fontSize: this._fontSize,
											cr: this.color,
											ia: this.align,
											ml: this.multiline,
										};
									}),
									(t.prototype.deserialize = function (e, t) {
										(this.from = e.from ? a.default.point(e.from.x, e.from.y) : a.default.point()),
											(this.to = e.to ? a.default.point(e.to.x, e.to.y) : a.default.point()),
											(this.text = e.text ? e.text : ''),
											e.fontSize && (this._fontSize = e.fontSize),
											e.cr && (this.color = e.cr),
											void 0 !== e.a && (this.align = e.ia),
											void 0 !== e.ml && (this.multiline = e.ml),
											this.updatePoly(),
											t && this.draw(t);
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshapes.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										});
										var n = this.selected ? l.ShapeColor.barHighlight : this.color;
										this.shapes.forEach(function (r, i) {
											var o = i >= t.vshapes.length,
												a = o ? c.Artisan.recycleShape(r, e) : t.vshapes[i];
											a.setAttr('tool', s.ToolType.editNote),
												a.setAttr('robot', t),
												a.setAttr('data', {
													poly: r,
													fcolor: n,
													stroke: n,
													drag: !0,
												}),
												a.moveToTop(),
												r instanceof h.WinPolygon &&
													a.hitFunc(function (e) {
														return r.makeHitRegion(a, e);
													}),
												r instanceof u.Text && (r.color = n),
												o && ((t.vshapes[i] = a), t.addToGroup([a]));
										});
									}),
									(t.prototype.delete = function (e) {
										return !!this.selected && (this.hideAssist(), this.remove(), !0);
									}),
									(t.prototype.createShapes = function () {
										var e = new u.Text(this.text, this.to);
										(e.fontSize = this._fontSize),
											(e.align = this.align),
											(e.lineHeightRatio = 1.2);
										var t = e.border();
										this.shapes.push(e);
										var n = t.intersect(a.default.segment(this.from, this.to))[0];
										if (n) {
											var r = a.default.segment(this.from, n);
											if (r.length > 200) {
												var i = new h.WinPolygon([r]);
												this.shapes.push(i);
											}
											if (!t.contains(this.from)) {
												var o = new h.WinPolygon();
												o.addCircle(this.from, this.anchorSize), this.shapes.push(o);
											}
										}
									}),
									t
								);
							})(u.Shape);
						t.Note = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Label = void 0);
						var a = o(n(0)),
							s = n(2),
							l = n(7),
							h = n(1),
							c = (function (e) {
								function t(t, n, r, i, o) {
									void 0 === n && (n = a.default.point()),
										void 0 === r && (r = ''),
										void 0 === i && (i = l.DrawParams.Ins.labelFontSize),
										void 0 === o && (o = !1);
									var s = e.call(this, h.ShapeType.Note, new h.WinPolygon()) || this;
									return (
										(s.host = t),
										(s.position = n),
										(s.rawText = r),
										(s.fontSize = i),
										(s.draggable = o),
										(s.offvec = a.default.vector()),
										(s.vshapes = []),
										(s.shapes = []),
										(s.hidden = !1),
										(s.align = h.TextAlign.Center),
										s.hidden,
										s
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'text', {
										get: function () {
											return this.rawText instanceof Array ? this.rawText.join('') : this.rawText;
										},
										set: function (e) {
											this.rawText = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.updatePoly = function () {
										if (((this.shapes = []), l.DrawParams.Ins.withoutDims)) return this;
										if ((this.hidden ? this.host.remove(this) : this.host.add(this), this.hidden))
											return this;
										if (this.rawText instanceof Array)
											for (var e = this.rawText, t = 0; t < e.length; t++) {
												var n = new h.Text(
													e[t],
													this.position.translate(
														0,
														(0.75 * l.DrawParams.Ins.labelFontSize + 20) * t,
													),
													this.align,
													this.draggable,
													this.fontSize,
													!1,
												);
												this.shapes.push(n), n.analyseSize(), n.translate(this.offvec);
											}
										else {
											var r = this.rawText,
												i = void 0;
											this.shapes.length > 0
												? (i = this.shapes[0])
												: ((i = new h.Text(
														r,
														this.position,
														this.align,
														this.draggable,
														this.fontSize,
														!1,
												  )),
												  this.shapes.push(i)),
												(i.content = r),
												i.analyseSize(),
												(i.position = this.position),
												i.translate(this.offvec);
										}
										return this;
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, t),
											0 !== this.vshapes.length &&
												(this.vshapes.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshapes),
												(this.vshapes = []));
									}),
									(t.prototype.translate = function (e) {
										(this.position = this.position.translate(e)),
											this.shapes.forEach(function (t) {
												return t.translate(e);
											});
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshapes.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										});
										var n = s.ShapeColor.darkMode ? 'rgb(255, 255, 0, .4)' : '#202424';
										this.shapes.forEach(function (r, i) {
											var o = i >= t.vshapes.length,
												a = o ? l.Artisan.recycleShape(r, e) : t.vshapes[i];
											a.setAttr('robot', t),
												a.setAttr('data', {
													poly: r,
												}),
												t.editTool && a.setAttr('tool', t.editTool),
												a.moveToTop(),
												(r.color = n),
												o && ((t.vshapes[i] = a), t.addToGroup([a]));
										});
									}),
									(t.prototype.toJSON = function () {
										return {
											text: this.text,
											offvec: this.offvec.toJSON(),
										};
									}),
									(t.prototype.deserialize = function (e) {
										e &&
											((this.text = e.text),
											(this.offvec = a.default.vector(e.offvec.x, e.offvec.y)));
									}),
									t
								);
							})(h.Shape);
						t.Label = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Shade = t.ShadeHandleType = void 0);
						var a,
							s = o(n(0)),
							l = n(7),
							h = n(13),
							c = n(2),
							u = n(1);
						!(function (e) {
							(e[(e.None = 0)] = 'None'),
								(e[(e.Center = 1)] = 'Center'),
								(e[(e.Left = 2)] = 'Left'),
								(e[(e.Right = 3)] = 'Right'),
								(e[(e.Both = 4)] = 'Both');
						})((a = t.ShadeHandleType || (t.ShadeHandleType = {})));
						var p = (function (e) {
							function t(t, n) {
								var r = e.call(this, t, n) || this;
								return (
									(r.host = t),
									(r.polygon = n),
									(r.tapIdx = 2),
									(r.shapes = []),
									(r.offvec = s.default.vector()),
									(r.handleType = a.None),
									(r.attrs = {}),
									(r.glassShade = !1),
									(r.type = u.ShapeType.Shade),
									t.add(r),
									(r._withBead = !r.beadHidden),
									(r.mulManager = new h.ShadeManager(r)),
									(r.paddingLabel = new u.Label(
										r,
										r.polygon.box.center.translate(s.default.vector(0, -50)),
									)),
									(r.paddingLabel.hidden = l.DrawParams.Ins.shadeDescHidden),
									(r.paddingLabel.draggable = !0),
									(r.gapLabel = new u.Label(
										r,
										r.polygon.box.center.translate(s.default.vector(0, 50)),
									)),
									(r.gapLabel.hidden = l.DrawParams.Ins.shadeDescHidden),
									(r.gapLabel.draggable = !0),
									r.updatePoly(),
									r
								);
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'dragModify', {
									get: function () {
										return !1;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'withBead', {
									get: function () {
										return this._withBead;
									},
									set: function (e) {
										this._withBead = e;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'padding', {
									get: function () {
										return this.mulManager.padding;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'gap', {
									get: function () {
										return this.mulManager.computedGap;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.paddingDesc = function (e) {
									return l.DrawParams.Ins.lang('padding') + (Math.round(100 * e) / 100).toString();
								}),
								(t.prototype.gapDesc = function (e) {
									return l.DrawParams.Ins.lang('gap') + (Math.round(100 * e) / 100).toString();
								}),
								(t.prototype.updateBead = function () {
									this._withBead && !this.bead
										? (this.bead = new u.Bead(this))
										: !this._withBead &&
										  this.bead &&
										  (this.remove(this.bead), (this.bead = void 0));
								}),
								(t.prototype.translate = function (e) {
									this.bead && this.bead.translate(e),
										this.mulManager.translate(e),
										this.shapes.forEach(function (t) {
											return t.translate(e);
										}),
										this.paddingLabel.translate(e),
										this.gapLabel.translate(e);
								}),
								(t.prototype.toJSON = function () {
									return {
										type: this.type,
										pid: this.polygon.polyId.toJSON(),
										mm: this.mulManager.toJSON(),
										ht: this.handleType,
										wbd: this._withBead,
										bd: this.bead ? this.bead.toJSON() : void 0,
										glab: this.gapLabel.toJSON(),
										plab: this.paddingLabel.toJSON(),
										attrs: this.attrs,
										gs: this.glassShade,
									};
								}),
								(t.prototype.deserialize = function (e) {
									this.mulManager.deserialize(e.mm),
										(this.handleType = e.ht ? e.ht : a.None),
										(this._withBead = void 0 === e.wbd ? !this.beadHidden : e.wbd),
										this.updatePoly(),
										e.bd && this.bead && this.bead.deserialize(e.bd),
										e.attrs && (this.attrs = e.attrs),
										void 0 !== e.gs && (this.glassShade = e.gs);
								}),
								(t.prototype.updatePoly = function (e) {
									e && (this.polygon = e),
										this.polygon.isEmpty ||
											(this.updateBead(),
											(this.shapes = this.makeHandleShapes()),
											this.mulManager.updatePoly(),
											(this.paddingLabel.text = this.paddingDesc(this.padding)),
											this.paddingLabel.updatePoly(),
											(this.gapLabel.text = this.gapDesc(this.gap)),
											this.gapLabel.updatePoly());
								}),
								(t.prototype.draw = function (t) {
									var n = this;
									e.prototype.draw.call(this, t),
										this.vshape.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										}),
										this.shapes.forEach(function (e, r) {
											var i = r >= n.vshape.length,
												o = i ? l.Artisan.recycleShape(e, t) : n.vshape[r];
											o.setAttr('data', {
												poly: e,
												fcolor: c.ShapeColor.barNormal,
												drag: !1,
											}),
												o.setAttr('robot', n),
												i && ((n.vshape[r] = o), n.addToGroup([o]));
										}),
										this.paddingLabel.draw(t),
										this.gapLabel.draw(t);
								}),
								(t.prototype.makeHandleShapes = function () {
									var e = this,
										t = this.polygon.box,
										n = t.xmax - t.xmin,
										r = [];
									return (
										this.handleType === a.Center
											? (r = [t.center.x])
											: this.handleType === a.Left
											? (r = [t.xmin + 0.1 * n])
											: this.handleType === a.Right
											? (r = [t.xmax - 0.1 * n])
											: this.handleType === a.Both && (r = [t.xmin + 0.1 * n, t.xmax - 0.1 * n]),
										r.map(function (t) {
											var n = s.default.line(s.default.point(t, 0), s.default.vector(1, 0)),
												r = e.polygon.intersect(n),
												i = s.default.segment(r[0], r[1]);
											return u.HardwareShapeCreator.Ins._roundRect(30, i.length + 30).translate(
												s.default.vector(s.default.point(), i.middle()),
											);
										})
									);
								}),
								(t.prototype.highlight = function (e) {
									this.mulManager.bars.forEach(function (t) {
										return t.highlight(e);
									});
								}),
								t
							);
						})(u.Area);
						t.Shade = p;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ScreenFiller = void 0);
						var o = n(1),
							a = n(59),
							s = n(2),
							l = n(7),
							h = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (
										(r.host = t),
										(r.glassSpec = new s.GlassSpec()),
										(r.type = a.ShapeType.Screen),
										r
									);
								}
								return (
									i(t, e),
									(t.prototype.updatePoly = function () {
										e.prototype.updatePoly.call(this),
											(this.renderPolygon = this.makeRenderPolygon());
										var t = s.Utils.centroidOfPolygon(this.renderPolygon);
										this.serial && ((this.serial.position = t), this.serial.updatePoly());
										var n =
											l.DrawParams.Ins.withoutGlassSerial || !this.serial
												? t
												: this.serial.position.translate(
														0,
														0.75 * l.DrawParams.Ins.labelFontSize + 20,
												  );
										this.fixedSpec && ((this.fixedSpec.position = n), this.fixedSpec.updatePoly()),
											this.spec && ((this.spec.position = n), this.spec.updatePoly());
									}),
									(t.prototype.draw = function (t) {
										this.updatePoly(), e.prototype.draw.call(this, t);
										var n = !this.bead;
										0 === this.vshape.length &&
											((this.vshape[0] = l.Artisan.recycleShape(this.polygon, t)),
											this.gshape
												? this.vshape[0].moveTo(this.gshape)
												: this.addToGroup(this.vshape)),
											this.vshape[0].setAttr('data', {
												poly: this.renderPolygon,
												fcolor: s.ShapeColor.getScreen(this.where),
											}),
											this.vshape[0].setAttr('robot', this),
											n ||
												(this.serial && this.serial.draw(t),
												this.spec && this.spec.draw(t),
												this.fixedSpec && this.fixedSpec.draw(t));
									}),
									t
								);
							})(o.Area);
						t.ScreenFiller = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraPersonImage = void 0);
						var s = a(n(0)),
							l = n(1),
							h = n(1),
							c = n(7),
							u = n(16),
							p = n(5),
							f = n(2),
							d = (function (e) {
								function t(t, n, r, i, o, a, l, c) {
									void 0 === t && (t = f.FillPatternType.Man),
										void 0 === n && (n = 0),
										void 0 === r && (r = 0),
										void 0 === i && (i = 1),
										void 0 === o && (o = 0),
										void 0 === a && (a = s.default.point()),
										void 0 === l && (l = s.default.vector()),
										void 0 === c && (c = s.default.vector());
									var p = e.call(this, h.ShapeType.ExtraPersonImage, new u.WinPolygon()) || this;
									return (
										(p.fillerPatternType = t),
										(p.imageWidth = n),
										(p.imageHeight = r),
										(p.dimPortion = i),
										(p.dimValue = o),
										(p.pt = a),
										(p.heightVec = l),
										(p.dimNameVec = c),
										(p.selected = !1),
										(p.vshapes = []),
										(p.shapes = []),
										p
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'box', {
										get: function () {
											var e = new s.default.Box();
											return (
												this.shapes.forEach(function (t) {
													return (e = e.merge(t.box));
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hitBar = function (e, t) {
										return (
											(this.selected = this.shapes.some(function (t) {
												return t.contains(e);
											})),
											this.draw(t),
											this.selected
										);
									}),
									(t.prototype.updatePoly = function () {
										return (this.shapes = []), this.createShapes(), this;
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this),
											0 !== this.vshapes.length &&
												(this.vshapes.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshapes),
												(this.vshapes = []));
									}),
									(t.prototype.translate = function (e) {
										(this.pt = this.pt.translate(e)),
											this.shapes.forEach(function (t) {
												return t.translate(e);
											});
									}),
									(t.prototype.toJSON = function () {
										return {
											pt: this.pt.toJSON(),
											fpt: this.fillerPatternType,
										};
									}),
									(t.prototype.deserialize = function (e, t) {
										var n;
										(this.pt = s.default.point(e.pt.x, e.pt.y)), (this.fillerPatternType = e.fpt);
										var r = p.ExtraPersonImageTool.getImageInfo();
										(n = o(r.get(this.fillerPatternType), 6)),
											(this.imageWidth = n[0]),
											(this.imageHeight = n[1]),
											(this.dimValue = n[2]),
											(this.dimPortion = n[3]),
											(this.heightVec = n[4]),
											(this.dimNameVec = n[5]),
											this.updatePoly(),
											this.draw(t);
									}),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshapes.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										});
										var n = this.selected ? 'yellow' : 'white',
											r = f.ShapeColor.darkMode ? 'yellow' : 'black';
										this.shapes.forEach(function (i, o) {
											var a = o >= t.vshapes.length,
												s = a ? c.Artisan.recycleShape(i, e) : t.vshapes[o];
											s.setAttr('tool', p.ToolType.editExtraPersonImage),
												s.setAttr('robot', t),
												s.setAttr('data', {
													poly: i,
													fcolor: f.FillPattern.Instance.Patterns.get(t.fillerPatternType),
													stroke: n,
													drag: !0,
												}),
												i instanceof l.Text && (i.color = r),
												s.moveToTop(),
												a && ((t.vshapes[o] = s), t.addToGroup([s]));
										});
									}),
									(t.prototype.delete = function (e) {
										return !!this.selected && (this.hideAssist(), this.remove(), !0);
									}),
									Object.defineProperty(t.prototype, 'scaleFactor', {
										get: function () {
											return this.dimValue / (this.imageHeight * this.dimPortion);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.createShapes = function () {
										this.shapes = [];
										var e = this.scaleFactor,
											t = this.imageWidth * e,
											n = this.imageHeight * e,
											r = u.PolygonCreator.Ins.joinRelative(this.pt, [
												s.default.vector(-t / 2, -n / 2),
												s.default.vector(0, n),
												s.default.vector(t, 0),
												s.default.vector(0, -n),
											]);
										this.shapes.push(r);
										var i = this.dimValue / 10,
											o = s.default
												.vector()
												.add(s.default.vector(-t / 2, -n / 2))
												.add(this.heightVec.multiply(e)),
											a = new l.Text(i.toString() + 'cm', this.pt.translate(o));
										this.shapes.push(a);
										var h = c.DrawParams.Ins.lang('groundLevel'),
											p = s.default
												.vector()
												.add(s.default.vector(-t / 2, -n / 2))
												.add(this.dimNameVec.multiply(e)),
											d = new l.Text(
												h,
												this.pt.translate(p),
												this.fillerPatternType === f.FillPatternType.Man
													? l.TextAlign.Left
													: l.TextAlign.Right,
											);
										this.shapes.push(d);
									}),
									t
								);
							})(h.Shape);
						t.ExtraPersonImage = d;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SashBottomDim = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(1),
							h = (function (e) {
								function t(t, n) {
									void 0 === n && (n = !0);
									var r = e.call(this, t) || this;
									return (r.sash = t), (r.hidden = n), r;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'double', {
										get: function () {
											return this.sash, l.KfcSash, this.sash.parent;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.locate = function () {
										if (this.sash.polygon.isRectangle()) {
											var e = s.Direction.Up;
											this.sash instanceof l.FoldSash &&
												!this.sash.host.expandHorizontally &&
												(e = s.Direction.Left);
											var t = s.EdgeFinder.Instance.findIndex(e, this.sash.polygon);
											if (-1 !== t) {
												var n = this.sash.polygon.edge(t);
												n instanceof a.default.Arc ||
													((this.from = n.start.clone()), (this.to = n.end.clone()));
											}
										}
									}),
									(t.prototype.onEdit = function (e, t) {
										var n = this,
											r = this.sash.topFrame.view;
										(this.sash.fixedWidth = e), this.double.updatePoly(), this.double.draw(r);
										var i = this.double.topFrame.sashManager.thefts.find(function (e) {
											return e.polyId.equalTo(n.double.polyId);
										});
										i && (i.updatePoly(i.polygon), i.draw(r)), r.refresh();
									}),
									t
								);
							})(l.Dimension);
						t.SashBottomDim = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.GuardSashHeightDim = void 0);
						var a = o(n(0)),
							s = n(1),
							l = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.sash = t), n;
								}
								return (
									i(t, e),
									(t.prototype.locate = function () {
										if (this.sash.polygon.isRectangle()) {
											var e = this.sash.polygon.box;
											(this.from = a.default.point(e.center.x, e.ymax)),
												(this.to = a.default.point(e.center.x, e.ymax - this.sash.height));
										}
									}),
									(t.prototype.onEdit = function (e, t) {
										var n = this.sash.topFrame.view;
										(this.sash.height = e),
											this.sash.updatePoly(),
											this.sash.parent instanceof s.Slide
												? this.sash.parent.draw(n)
												: this.sash.draw(n),
											n.mometoManager.checkPoint(),
											n.refresh();
									}),
									t
								);
							})(s.Dimension);
						t.GuardSashHeightDim = l;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SlideBottomDim = void 0);
						var o = n(1),
							a = n(11),
							s = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = !1);
									var i = e.call(this, t) || this;
									return (i.slide = t), (i.columnIndex = n), (i.hidden = r), i;
								}
								return (
									i(t, e),
									(t.prototype.locate = function () {
										var e = this.slide.columnPolygons[this.columnIndex],
											t = this.slide.expandHorizontally ? a.Direction.Up : a.Direction.Right,
											n = a.EdgeFinder.Instance.findIndex(t, e),
											r = e.edge(n);
										(this.from = r.start.clone()), (this.to = r.end.clone());
									}),
									(t.prototype.onEdit = function (e, t) {
										var n = this.slide.topFrame.view;
										this.slide.setFixedWidthForColumn(e, this.columnIndex),
											this.slide.updatePoly(),
											this.slide.draw(n),
											n.refresh();
									}),
									t
								);
							})(o.Dimension);
						t.SlideBottomDim = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								},
							s =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.TextDim = void 0);
						var l = s(n(0)),
							h = n(16),
							c = n(1),
							u = n(2),
							p = n(7),
							f = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, c.ShapeType.TextDim, new h.WinPolygon()) || this;
									return (
										(i.sPt = t),
										(i.ePt = n),
										(i.host = r),
										(i.dimShow = !0),
										(i.name = ''),
										(i.value = 100),
										(i.shapes = []),
										(i.vshapes = []),
										i.host.add(i),
										i.create(),
										i
									);
								}
								return (
									i(t, e),
									(t.prototype.draw = function (e) {
										var t = this;
										this.vshapes.splice(this.shapes.length).forEach(function (e) {
											e.moveTo(e.getLayer()), e.hide();
										}),
											this.shapes.forEach(function (n, r) {
												var i = r >= t.vshapes.length ? p.Artisan.recycleShape(n, e) : t.vshapes[r];
												i.setAttr('robot', t),
													i.setAttr('data', {
														segs: n,
														displayText: t.value,
														stroke: u.ShapeColor.darkMode ? 'yellow' : 'blue',
														drag: !0,
														dimInfo: t,
													}),
													i.moveToTop(),
													(t.vshapes[r] = i),
													t.addToGroup([i]);
											});
									}),
									Object.defineProperty(t.prototype, 'obj', {
										get: function () {
											return this;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.applyDiff = function (e) {}),
									(t.prototype.create = function () {
										if (
											((this.shapes = []),
											this.dimShow && !p.DrawParams.Ins.withoutDims && !this.sPt.equalTo(this.ePt))
										) {
											var e = l.default
													.vector(this.sPt, this.ePt)
													.normalize()
													.rotate90CW()
													.multiply(40),
												t = u.Utils.vecDirPt(e, 40, this.sPt),
												n = u.Utils.vecDirPt(e, 40, this.ePt),
												r = l.default.segment(t, n),
												i = l.default.vector(this.sPt, this.ePt).rotate90CW(),
												o = [r.start, r.end].map(function (e) {
													return l.default.segment(
														u.Utils.vecDirPt(i, 40, e),
														u.Utils.vecDirPt(i.multiply(-1), 40, e),
													);
												});
											this.shapes = [a(o, [r])];
										}
									}),
									(t.prototype.updatePoly = function (e) {
										this.create();
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this, t),
											0 !== this.vshapes.length &&
												(this.vshapes.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshapes),
												(this.vshapes = []));
									}),
									(t.prototype.translate = function (e) {
										(this.sPt = this.sPt.translate(e)),
											(this.ePt = this.ePt.translate(e)),
											this.vshapes.forEach(function (t) {
												t.getAttr('data').segs = t.getAttr('data').segs.map(function (t) {
													return t.translate(e);
												});
											});
									}),
									(t.prototype.toJSON = function () {
										return {
											st: this.sPt.toJSON(),
											et: this.ePt.toJSON(),
											dv: this.value,
										};
									}),
									(t.prototype.deserialize = function (e) {
										(this.sPt = e.st), (this.ePt = e.et), (this.value = e.dv);
									}),
									(t.prototype.remove = function (t) {
										e.prototype.remove.call(this, t), this.recycle(!0);
									}),
									(t.prototype.delete = function (e) {
										return this.remove(), !0;
									}),
									t
								);
							})(c.Shape);
						t.TextDim = f;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Border = void 0);
						var o = n(2),
							a = n(7),
							s = n(1),
							l = (function (e) {
								function t(t, n) {
									void 0 === n && (n = !1);
									var r = e.call(this, s.ShapeType.Indicator, t.polygon) || this;
									return (
										(r.host = t), (r.round = n), (r.vshape = []), (r.borderShapes = []), t.add(r), r
									);
								}
								return (
									i(t, e),
									(t.prototype.updatePoly = function () {
										var e = this;
										this.borderShapes = [];
										var t = o.DisplayUtils.parentUtilsFrameOrSash(this);
										if (t) {
											var n = !1,
												r = this.host instanceof s.Bead;
											t instanceof s.Frame
												? (n = r ? a.DrawParams.Ins.nonGapFixedBead : a.DrawParams.Ins.nonGapFrame)
												: t instanceof s.Sash &&
												  (n = r ? a.DrawParams.Ins.nonGapSashBead : a.DrawParams.Ins.nonGapSash),
												n &&
													(this.borderShapes = [this.host.polygon].map(function (t) {
														var n = t.clone();
														return e.round && n.round(a.DrawParams.Ins.nonGapRound), n;
													}));
										}
									}),
									(t.prototype.draw = function (t) {
										var n = this;
										e.prototype.draw.call(this, t),
											this.vshape.splice(this.borderShapes.length).forEach(function (e) {
												e.moveTo(e.getLayer()), e.hide();
											}),
											this.borderShapes.forEach(function (e, r) {
												var i = r >= n.vshape.length,
													s = i ? a.Artisan.recycleShape(e, t) : n.vshape[r];
												s.setAttr('robot', n),
													s.setAttr('data', {
														poly: e,
														fcolor: 'none',
														stroke: o.ShapeColor.windowStrokeColor,
														strokeWidth: a.DrawParams.Ins.windowStrokeWidth,
														drag: !1,
													}),
													i && ((n.vshape[r] = s), n.addToGroup([s])),
													s.moveToTop();
											});
									}),
									(t.prototype.recycle = function (t) {
										void 0 === t && (t = !1),
											e.prototype.recycle.call(this),
											0 !== this.vshape.length &&
												(this.vshape.forEach(function (e) {
													e.hide(), e.moveTo(e.getLayer());
												}),
												this.recycleFromGroup(this.vshape),
												(this.vshape = []));
									}),
									(t.prototype.translate = function (e) {
										this.borderShapes.forEach(function (t) {
											return t.translate(e);
										});
									}),
									t
								);
							})(s.Shape);
						t.Border = l;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SubFrame = void 0);
						var a = o(n(0)),
							s = n(61),
							l = n(9),
							h = n(7),
							c = n(13),
							u = n(16),
							p = n(11),
							f = n(6),
							d = n(2),
							g = n(1),
							y = (function () {
								function e(e, t) {
									(this.components = e),
										(this.view = t),
										(this.profileSize = this.view.params.subFrame),
										(this.edgeJointWay = d.EdgeJointWay.Default),
										(this.parts = []),
										(this.hiddenSides = []),
										(this.boundary = new g.WinPolygon()),
										(this.colorManager = new c.ColorManager()),
										(this.widthDim = new g.Dimension()),
										(this.heightDim = new g.Dimension()),
										(this.dimHidden = !0);
								}
								return (
									(e.findBy = function (e) {
										return e.view.shapeManager.subFrames.find(function (t) {
											return t.components.some(function (t) {
												return t === e;
											});
										});
									}),
									Object.defineProperty(e.prototype, 'frames', {
										get: function () {
											return this.components.filter(function (e) {
												return e instanceof g.Frame;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'cornerJoiners', {
										get: function () {
											return this.components.filter(function (e) {
												return e instanceof g.CornerJoiner;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'connectors', {
										get: function () {
											return this.components.filter(function (e) {
												return e instanceof g.Connector;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.hitBar = function (e) {
										var t = this.parts.some(function (t) {
											return t.frameManager.bars.some(function (t) {
												return t.polygon.contains(e);
											});
										});
										return (
											this.parts.forEach(function (e) {
												return e.frameManager.highlight(t);
											}),
											t &&
												this.view.eventBus.emit({
													type: f.EventType.sub_frame_settings,
													payload: new f.SubFrameSettings(this, this.view),
												}),
											t
										);
									}),
									(e.prototype.draw = function () {
										var e = this,
											t = this.view.shapeManager.cornerJoiners;
										this.parts.forEach(function (n) {
											if ((n.draw(e.view), n.cornerJoinerId)) {
												var r = t.find(function (e) {
													return e.id === n.cornerJoinerId;
												});
												r && r.skewGShape.add(n.gshape);
											}
										}),
											this.heightDim.draw(this.view),
											this.widthDim.draw(this.view);
									}),
									(e.prototype.clear = function () {
										this.parts.forEach(function (e) {
											e.clearChildren(), e.recycle(!0);
										}),
											(this.parts = []),
											this.heightDim.recycle(!0),
											this.widthDim.recycle(!0);
									}),
									(e.prototype.updatePoly = function () {
										var e = this;
										this.clear();
										var t = this.xmin(this.components),
											n = this.xmax(this.components),
											r = this.ymin(this.components),
											i = this.ymax(this.components);
										this.computeOverallBoundary(t, r, n, i);
										var o = [],
											l = this.components.filter(function (e) {
												return e.gshape.parent instanceof s.Layer;
											});
										o.push({
											components: l,
										});
										var h = this.cornerJoiners;
										h.map(function (e) {
											var t = e.skewGShape.children
												.filter(function (e) {
													return !e.attrs.data.isCornerGroup;
												})
												.map(function (e) {
													return e.attrs.robot;
												})
												.filter(function (e) {
													return (
														e instanceof g.Frame ||
														e instanceof g.CornerJoiner ||
														e instanceof g.Connector
													);
												});
											t.length > 0 &&
												o.push({
													cjId: e.id,
													components: t,
												});
										}),
											o.forEach(function (r) {
												var i = e.xmin(r.components),
													o = e.xmax(r.components),
													s = r.components.filter(function (e) {
														return e instanceof g.CornerJoiner;
													}),
													l = r.components.filter(function (e) {
														return !(e instanceof g.CornerJoiner);
													});
												if (
													(s.forEach(function (t) {
														var n = e.halfCj(t, i, o, !1);
														l.push(n);
													}),
													r.cjId)
												) {
													var c = h.find(function (e) {
															return e.id === r.cjId;
														}),
														f = e.halfCj(c, i, o, !0);
													l.push(f);
												}
												var d = e.unifyShapePolygon(l),
													y = [p.Direction.Left, p.Direction.Right],
													m = a.default.Utils.EQ_0(i - t),
													v = a.default.Utils.EQ_0(o - n);
												m &&
													(y = y.filter(function (e) {
														return e !== p.Direction.Left;
													})),
													v &&
														(y = y.filter(function (e) {
															return e !== p.Direction.Right;
														})),
													e.hiddenSides.forEach(function (e) {
														y.some(function (t) {
															return t === e;
														}) || y.push(e);
													});
												var w = [
														p.Direction.Left,
														p.Direction.Right,
														p.Direction.Up,
														p.Direction.Down,
													]
														.filter(function (e) {
															return !y.some(function (t) {
																return t === e;
															});
														})
														.map(function (e) {
															return p.EdgeFinder.Instance.findIndex2(e, d);
														}),
													b = Array(d.edges.length).fill(0);
												w.forEach(function (t) {
													return (b[t] = e.profileSize);
												}),
													(d = e.findInnerPoly(d, b));
												var S = u.SingleTrackPolygon.createFromBox(d.box, y),
													_ = new g.PartialSubFrame(e);
												e.parts.push(_),
													(_.cornerJoinerId = r.cjId),
													(_.polygon = S),
													_.frameManager.create();
											}),
											this.updateHeightDim(),
											this.updateWidthDim();
									}),
									(e.prototype.toJSON = function () {
										return {
											cs: this.components.map(function (e) {
												return e.uid;
											}),
											ps: this.profileSize,
											ejw: this.edgeJointWay,
											hs: this.hiddenSides,
										};
									}),
									(e.prototype.deserialize = function (e) {
										var t = this.view.shapeManager,
											n = i(t.shapem, t.cornerJoiners, t.connectors);
										(this.components = n.filter(function (t) {
											return e.cs.some(function (e) {
												return t.uid === e;
											});
										})),
											(this.profileSize = e.ps),
											(this.edgeJointWay = e.ejw),
											(this.hiddenSides = e.hs);
									}),
									(e.prototype.updateRelatedTargets = function () {
										var e = this,
											t = this.frames;
										t.forEach(function (t) {
											t.dim.updatePoly(), t.dim.draw(e.view);
										}),
											i(this.cornerJoiners, this.connectors).forEach(function (t) {
												t.updatePoly(), t.draw(e.view);
											});
										var n = this.view.shapeManager;
										n.refreshTotalWidth(), n.refreshTotalHeight(), g.TopView.optimize(t);
									}),
									(e.prototype.halfCj = function (e, t, n, r) {
										var i = [e.hostEdge, e.cornerEdge].find(function (e) {
											var i = [t, n].some(function (t) {
												return a.default.Utils.EQ_0(t - e.start.x);
											});
											return r ? i : !i;
										});
										return this.join2Edges(i, e.centerEdge);
									}),
									(e.prototype.join2Edges = function (e, t) {
										a.default.Utils.EQ_0(e.tangentInStart().y - t.tangentInStart().y) &&
											(t = t.reverse());
										var n = [
											e,
											a.default.segment(e.end, t.start),
											t,
											a.default.segment(t.end, e.start),
										];
										return new g.WinPolygon(n);
									}),
									(e.prototype.computeOverallBoundary = function (e, t, n, r) {
										var i = this,
											o = this.polyFrom2Pts(e, t, n, r),
											a = [p.Direction.Left, p.Direction.Right, p.Direction.Up, p.Direction.Down]
												.filter(function (e) {
													return !i.hiddenSides.some(function (t) {
														return t === e;
													});
												})
												.map(function (e) {
													return p.EdgeFinder.Instance.findIndex2(e, o);
												}),
											s = Array(o.edges.length).fill(0);
										a.forEach(function (e) {
											return (s[e] = i.profileSize);
										}),
											(this.boundary = this.findInnerPoly(o, s));
									}),
									(e.prototype.findInnerPoly = function (e, t) {
										return new g.WinPolygon(
											l.Frametify.findParallelEdges(e.edges, t, !1, e.orientation, !0),
										);
									}),
									(e.prototype.xmin = function (e) {
										var t = e[0].polygon.box.xmin;
										return (
											e.forEach(function (e) {
												t = Math.min(e.polygon.box.xmin, t);
											}),
											t
										);
									}),
									(e.prototype.xmax = function (e) {
										var t = e[0].polygon.box.xmax;
										return (
											e.forEach(function (e) {
												t = Math.max(e.polygon.box.xmax, t);
											}),
											t
										);
									}),
									(e.prototype.ymin = function (e) {
										var t = e[0].polygon.box.ymin;
										return (
											e.forEach(function (e) {
												t = Math.min(e.polygon.box.ymin, t);
											}),
											t
										);
									}),
									(e.prototype.ymax = function (e) {
										var t = e[0].polygon.box.ymax;
										return (
											e.forEach(function (e) {
												t = Math.max(e.polygon.box.ymax, t);
											}),
											t
										);
									}),
									(e.prototype.unifyShapePolygon = function (e) {
										var t = e
												.map(function (e) {
													return e instanceof g.Shape ? e.polygon : e;
												})
												.sort(function (e, t) {
													return e.box.center.x - t.box.center.x;
												})
												.map(function (e) {
													return e.orientation === a.default.ORIENTATION.CCW
														? e.polygon.clone().reverse()
														: e.polygon.clone();
												}),
											n = new a.default.Polygon();
										t.forEach(function (e) {
											return (n = a.default.BooleanOperations.unify(n, e));
										});
										var r = Array.from(n.faces)[0].shapes,
											i = d.Utils.optimizeEdges(r, !0);
										return new g.WinPolygon(i);
									}),
									(e.prototype.polyFrom2Pts = function (e, t, n, r) {
										var i = new a.default.Box(e, t, n, r);
										return new g.WinPolygon(i.toSegments());
									}),
									(e.prototype.updateHeightDim = function () {
										var e = this.view.shapeManager.windowWithDimBox,
											t = this.boundary.box;
										if (void 0 !== t.xmin && void 0 !== e.xmin) {
											var n = this.view.shapeManager.totalHeightDim
													? 2 * h.DrawParams.Ins.dimFontH
													: h.DrawParams.Ins.dimFontH,
												r = e.xmin - n;
											(this.heightDim.from = a.default.point(r, t.low.y)),
												(this.heightDim.to = a.default.point(r, t.high.y)),
												(this.heightDim.hidden = this.dimHidden),
												this.heightDim.updatePoly();
										}
									}),
									(e.prototype.updateWidthDim = function () {
										var e = this.boundary.box,
											t = this.view.shapeManager.windowWithDimBox;
										if (void 0 !== e.xmin && void 0 !== t.xmin) {
											var n = this.view.shapeManager.totalWidthDim
													? 2 * h.DrawParams.Ins.dimFontH
													: h.DrawParams.Ins.dimFontH,
												r = t.ymax + n;
											(this.widthDim.from = a.default.point(e.low.x, r)),
												(this.widthDim.to = a.default.point(e.high.x, r)),
												(this.widthDim.hidden = this.dimHidden),
												this.widthDim.updatePoly(),
												g.TopView.optimize(this.frames);
										}
									}),
									e
								);
							})();
						t.SubFrame = y;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PartialSubFrame = void 0);
						var o = n(16),
							a = n(13),
							s = n(1),
							l = (function (e) {
								function t(t) {
									var n = e.call(this, s.ShapeType.PartialSubFrame, new o.WinPolygon()) || this;
									return (n.subFrame = t), (n.frameManager = new a.SubFrameManager(n)), n;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'bars', {
										get: function () {
											return this.frameManager.bars;
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(s.Shape);
						t.PartialSubFrame = l;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EdgeJointWay = void 0),
							(function (e) {
								(e[(e.Default = 0)] = 'Default'),
									(e[(e.Horizontal = 1)] = 'Horizontal'),
									(e[(e.Vertical = 2)] = 'Vertical'),
									(e[(e.Diagonal = 3)] = 'Diagonal'),
									(e[(e.Separated = 4)] = 'Separated');
							})(t.EdgeJointWay || (t.EdgeJointWay = {}));
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShapeHelper = void 0);
						var r = (function () {
							function e() {}
							return (
								(e.restoreShapeMatrix = function (e) {
									e.clearCache(), e._clearTransform();
									var t = e.attrs;
									delete t.offsetX,
										delete t.offsetY,
										delete t.skewX,
										delete t.skewY,
										delete t.x,
										delete t.y,
										delete t.scaleX,
										delete t.scaleY,
										delete t.rotation;
								}),
								e
							);
						})();
						t.ShapeHelper = r;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShapeColor = void 0);
						var r = n(2),
							i = (function () {
								function e() {
									(this.defaultColor = {
										barNormal: '#F0540B',
										barHighlight: '#19EE26',
										beadNormal: '#F0540B',
										handle: '#D4D1D9',
										dragRobot: 'rgba(255, 0, 0, 0.6)',
										glass: 'rgba(0, 255, 255, 0.6)',
										brick: '#b4f595',
										dim: 'blue',
										windowStrokeColor: 'black',
									}),
										(this.darkMode = !1),
										this.reset();
								}
								return (
									(e.prototype.getScreen = function (e, t) {
										return (
											void 0 === t && (t = !1),
											t ? r.FillPatternType.FlyScreenHighlight : r.FillPatternType.FlyScreen
										);
									}),
									(e.prototype.getGlass = function (e, t) {
										return void 0 === t && (t = !1), t ? this.barHighlight : this.glass;
									}),
									(e.prototype.getPanel = function (e, t) {
										return void 0 === t && (t = !1), t ? this.barHighlight : this.barNormal;
									}),
									(e.prototype.reset = function () {
										(this.barNormal = this.defaultColor.barNormal),
											(this.barHighlight = this.defaultColor.barHighlight),
											(this.beadNormal = this.defaultColor.beadNormal),
											(this.handle = this.defaultColor.handle),
											(this.dragRobot = this.defaultColor.dragRobot),
											(this.glass = this.defaultColor.glass),
											(this.brick = this.defaultColor.brick),
											(this.dim = this.defaultColor.dim),
											(this.windowStrokeColor = this.defaultColor.windowStrokeColor);
									}),
									e
								);
							})();
						t.ShapeColor = new i();
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DisplayUtils = void 0);
						var o = n(2),
							a = n(7),
							s = n(13),
							l = n(1),
							h = (function () {
								function e() {}
								return (
									(e.highlight = function (e, t, n) {
										if ((void 0 === n && (n = o.ShapeColor.barHighlight), void 0 !== t)) {
											var r = t.getAttr('data');
											e
												? Object.defineProperty(r, 'highlight', {
														value: n,
														configurable: !0,
												  })
												: r.hasOwnProperty('highlight') && delete r.highlight;
										}
									}),
									(e.isHighlight = function (e) {
										return void 0 !== e && e.getAttr('data').hasOwnProperty('highlight');
									}),
									(e.sortTheftZIndexes = function (e) {
										var t = e.topFrame,
											n = e.polygon.polyId,
											r = t.sashManager.thefts.find(function (e) {
												return e.polyId.equalTo(n);
											}),
											i = t.mulManager.glasses.find(function (e) {
												return e.polygon.polyId.equalTo(n);
											}),
											o = t.sashManager.slides.find(function (e) {
												return e.polygon.polyId.equalTo(n);
											});
										return r && r.gshape && o && o.gshape
											? (r.gshape.moveToBottom(), -1)
											: r && i
											? (2 !==
													[r, i].filter(function (e) {
														return e.obj.gshape;
													}).length || r.gshape.moveToTop(),
											  -1)
											: -1;
									}),
									(e.sortSashZIndexes = function (e) {
										if (e instanceof l.PushSash && !e.isStandalone) return -1;
										var t = e.topFrame,
											n = e.polyId,
											r = t.sashManager.fenesByPolyId(n).map(function (e) {
												return e.obj;
											}),
											o = t.sashManager
												.fenesByPolyId(n)
												.filter(function (e) {
													return e.obj.gshape;
												})
												.map(function (e) {
													return e.obj.gshape;
												});
										if (r.length !== o.length) return -1;
										var h = r.filter(function (e) {
												return e instanceof l.PushSash || e instanceof l.DoubleSash;
											}),
											c = a.DrawParams.Ins.reverseInnerOuter,
											u = c ? s.OpenToward.Inward : s.OpenToward.Outward,
											p = c ? s.OpenToward.Outward : s.OpenToward.Inward,
											f = h.find(function (e) {
												return e.openToward === u;
											}),
											d = h.find(function (e) {
												return e.openToward === p;
											});
										f && f.gshape.moveToBottom(), d && d.gshape.moveToTop();
										var g = r.find(function (e) {
											return e instanceof l.GuardSash;
										});
										return (
											g && g.gshape.moveToBottom(),
											a.DrawParams.Ins.nonGapSash &&
												1 === h.length &&
												!1 === h[0].opened &&
												h[0].gshape.moveToTop(),
											[f, d].forEach(function (e) {
												e &&
													(e instanceof l.DoubleSash
														? e.sashes.map(function (e) {
																return e.hardwareManager.handle;
														  })
														: [e.hardwareManager.handle]
													).forEach(function (e) {
														return i(e.dim.vshapes, e.dimToSash.vshapes).forEach(function (e) {
															return e.moveToTop();
														});
													});
											}),
											(e instanceof l.PushSash || e instanceof l.DoubleSash) &&
												e.label.vshapes.forEach(function (e) {
													return e.moveToTop();
												}),
											-1
										);
									}),
									(e.parentUtilsFrameOrSash = function (e) {
										for (var t = e.parent; !(t instanceof l.Frame || t instanceof l.Sash) && t; )
											t = t.parent;
										return t;
									}),
									e
								);
							})();
						t.DisplayUtils = h;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShapeIdx = void 0);
						var r = n(1),
							i = (function () {
								function e() {}
								return (
									(e.idx = function (e) {
										return this.tapidxs.findIndex(function (t) {
											return t === e;
										});
									}),
									(e.tapidxs = [
										r.ShapeType.None,
										r.ShapeType.Wall,
										r.ShapeType.Bar,
										r.ShapeType.Glass,
										r.ShapeType.Sash,
										r.ShapeType.DecorationBar,
										r.ShapeType.DoubleSash,
										r.ShapeType.DoubleScreen,
										r.ShapeType.FoldSash,
										r.ShapeType.Slide,
										r.ShapeType.AntiTheft,
										r.ShapeType.Screen,
										r.ShapeType.FoldScreen,
										r.ShapeType.Bead,
										r.ShapeType.Handle,
										r.ShapeType.Hinge,
										r.ShapeType.Lock,
										r.ShapeType.Indicator,
										r.ShapeType.Dim,
										r.ShapeType.TextDim,
									]),
									e
								);
							})();
						t.ShapeIdx = i;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HitResult = void 0),
							(function (e) {
								(e[(e.None = 0)] = 'None'),
									(e[(e.Bar = 1)] = 'Bar'),
									(e[(e.Glass = 2)] = 'Glass'),
									(e[(e.All = 3)] = 'All'),
									(e[(e.Control = 4)] = 'Control'),
									(e[(e.Sash = 5)] = 'Sash'),
									(e[(e.Bead = 6)] = 'Bead'),
									(e[(e.GlassHole = 7)] = 'GlassHole');
							})(t.HitResult || (t.HitResult = {}));
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DockManager = t.DockTaskStatus = void 0);
						var o,
							a = n(107);
						!(function (e) {
							(e[(e.Continue = 0)] = 'Continue'),
								(e[(e.Return = 1)] = 'Return'),
								(e[(e.OK = 2)] = 'OK');
						})((o = t.DockTaskStatus || (t.DockTaskStatus = {})));
						var s = (function () {
							function e() {
								this.dockData = new Map();
							}
							return (
								(e.prototype.forDoTask = function (e) {
									var t, n;
									try {
										for (var s = r(this.dockData), l = s.next(); !l.done; l = s.next()) {
											var h = i(l.value, 2),
												c = h[0],
												u = h[1],
												p = e(new a.PolyId().deserialize(JSON.parse(c)), u);
											if (p !== o.Continue && p === o.Return) return;
										}
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											l && !l.done && (n = s.return) && n.call(s);
										} finally {
											if (t) throw t.error;
										}
									}
								}),
								(e.prototype.findPt = function (e) {
									var t, n, o, s;
									try {
										for (var l = r(this.dockData), h = l.next(); !h.done; h = l.next()) {
											var c = i(h.value, 2),
												u = c[0],
												p = c[1],
												f = new a.PolyId().deserialize(JSON.parse(u));
											try {
												for (var d = ((o = void 0), r(p)), g = d.next(); !g.done; g = d.next()) {
													var y = g.value;
													if (y.pt.equalTo(e))
														return {
															pid: f,
															dd: y,
														};
												}
											} catch (e) {
												o = {
													error: e,
												};
											} finally {
												try {
													g && !g.done && (s = d.return) && s.call(d);
												} finally {
													if (o) throw o.error;
												}
											}
										}
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											h && !h.done && (n = l.return) && n.call(l);
										} finally {
											if (t) throw t.error;
										}
									}
								}),
								(e.prototype.push = function (e, t) {
									this.dockData.has(e) || this.dockData.set(e, []), this.dockData.get(e).push(t);
								}),
								(e.prototype.hasEdgeData = function (e) {
									var t,
										n,
										i = !1;
									try {
										for (var o = r(this.dockData.keys()), a = o.next(); !a.done; a = o.next()) {
											var s = a.value,
												l = JSON.parse(s);
											if (l.idx === e && l.pos < 0) {
												i = !0;
												break;
											}
										}
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											a && !a.done && (n = o.return) && n.call(o);
										} finally {
											if (t) throw t.error;
										}
									}
									return i;
								}),
								(e.prototype.getEdgeData = function (e) {
									return this.getData(JSON.stringify(new a.PolyId(e, -1).toJSON()));
								}),
								(e.prototype.getData = function (e) {
									return e instanceof a.PolyId
										? this.dockData.get(JSON.stringify(e.toJSON()))
										: this.dockData.get(e);
								}),
								(e.prototype.clear = function () {
									this.dockData.clear();
								}),
								(e.prototype.removeMulData = function () {
									var e, t;
									try {
										for (var n = r(this.dockData.keys()), i = n.next(); !i.done; i = n.next()) {
											var o = i.value;
											new a.PolyId().deserialize(JSON.parse(o)).pos >= 0 && this.dockData.delete(o);
										}
									} catch (t) {
										e = {
											error: t,
										};
									} finally {
										try {
											i && !i.done && (t = n.return) && t.call(n);
										} finally {
											if (e) throw e.error;
										}
									}
								}),
								(e.prototype.translate = function (e) {
									this.dockData.forEach(function (t) {
										t.forEach(function (t) {
											t.pt = t.pt.translate(e);
										});
									});
								}),
								(e.prototype.getDockEdge = function (e, t) {
									var n = [];
									if (0 !== this.dockData.size) {
										this.dockData.forEach(function (e, t) {
											n.push({
												k: t,
												v: e,
											});
										}),
											n.sort(function (e, t) {
												var n = new a.PolyId().deserialize(JSON.parse(e.k)),
													r = new a.PolyId().deserialize(JSON.parse(t.k));
												return -1 === n.pos && -1 === r.pos
													? n.idx - r.idx
													: -1 === n.pos
													? -1
													: -1 === r.pos
													? 1
													: n.idx !== r.idx
													? n.idx - r.idx
													: n.pos - r.pos;
											});
										var r = n.find(function (t) {
											return !!t.v.find(function (t) {
												return t.idx.equalTo(e);
											});
										});
										if (r) {
											var i = r.k,
												o = new a.PolyId().deserialize(JSON.parse(i));
											return -1 === o.pos
												? t.polygon.edges[o.idx]
												: t.mulManager.bars[o.idx].polygon.mulShape;
										}
									}
								}),
								(e.prototype.getDockBars = function (e, t) {
									if (0 === this.dockData.size) return [void 0, void 0];
									var n = [];
									if (
										(this.dockData.forEach(function (t, r) {
											t.forEach(function (t) {
												t.idx.equalTo(e) && n.push(new a.PolyId().deserialize(JSON.parse(r)));
											});
										}),
										2 !== n.length)
									)
										return [void 0, void 0];
									var r = n.map(function (e) {
										return t.findBarByPolyId(e);
									});
									return [r[0], r[1]];
								}),
								e
							);
						})();
						t.DockManager = s;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Param = void 0);
						var r = n(1),
							i = (function () {
								function e() {
									var e = this;
									(this.frame = 60),
										(this.frameMullion = 90),
										(this.frameMullionLg = 0),
										(this.reinforcedFrameMullion = 90),
										(this.subFrame = 24),
										(this.innerFrame = 45),
										(this.sashMullion = 60),
										(this.sash = 60),
										(this.guardSash = 15),
										(this.upSash = 60),
										(this.downSash = 60),
										(this.interlock = 60),
										(this.screen = 60),
										(this.bead = 15),
										(this.antiTheft = 24),
										(this.antiTheftMullion = 45),
										(this.antiTheftHoleHeight = 240),
										(this.antiTheftGap = 120),
										(this.antiTheftHandleW = 240),
										(this.shadeSash = 60),
										(this.shadeSashMullion = 60),
										(this.shadeMullion = 35),
										(this.kfcWaist = 200),
										(this.cornerJoiner = 100),
										(this.connector = 60),
										(this.extraDim = 40),
										(this.extraDimSnapDist = 20),
										(this.angleLength = 200),
										(this.decorationBar = 20),
										(this.millingFrame = 5),
										(this.millingSash = 5),
										(this.glassGap = 6),
										(this.sobj = new Map()),
										this.sobj.set(r.ShapeType.Frame, function () {
											return e.frame;
										}),
										this.sobj.set(r.ShapeType.FrameMullion, function () {
											return e.frameMullion;
										}),
										this.sobj.set(r.ShapeType.SashMullion, function () {
											return e.sashMullion;
										}),
										this.sobj.set(r.ShapeType.ScreenMullion, function () {
											return e.sashMullion;
										}),
										this.sobj.set(r.ShapeType.Sash, function () {
											return e.sash;
										}),
										this.sobj.set(r.ShapeType.Screen, function () {
											return e.screen;
										}),
										this.sobj.set(r.ShapeType.Bead, function () {
											return e.bead;
										}),
										this.sobj.set(r.ShapeType.AntiTheft, function () {
											return e.antiTheft;
										}),
										this.sobj.set(r.ShapeType.AntiTheftMullion, function () {
											return e.antiTheftMullion;
										}),
										this.sobj.set(r.ShapeType.AntiTheftHoleHeight, function () {
											return e.antiTheftHoleHeight;
										}),
										this.sobj.set(r.ShapeType.AntiTheftGap, function () {
											return e.antiTheftGap;
										}),
										this.sobj.set(r.ShapeType.AntiTheftHandleW, function () {
											return e.antiTheftHandleW;
										}),
										this.sobj.set(r.ShapeType.CornerJoiner, function () {
											return e.cornerJoiner;
										}),
										this.sobj.set(r.ShapeType.ExtraDim, function () {
											return e.extraDim;
										}),
										this.sobj.set(r.ShapeType.DecorationBar, function () {
											return e.decorationBar;
										}),
										this.sobj.set(r.ShapeType.MillingFrame, function () {
											return e.millingFrame;
										}),
										this.sobj.set(r.ShapeType.MillingSash, function () {
											return e.millingSash;
										}),
										this.sobj.set(r.ShapeType.GlassGap, function () {
											return e.glassGap;
										});
								}
								return (
									(e.prototype.get = function (e) {
										var t = this.sobj.get(e);
										return t ? t() : void 0;
									}),
									(e.prototype.outputProfileSizes = function () {
										return {
											frame: this.frame,
											frameMullion: this.frameMullion,
											frameMullionLg: this.frameMullionLg,
											reinforcedFrameMullion: this.reinforcedFrameMullion,
											subFrame: this.subFrame,
											innerFrame: this.innerFrame,
											sash: this.sash,
											upSash: this.upSash,
											downSash: this.downSash,
											interlock: this.interlock,
											sashMullion: this.sashMullion,
											screen: this.screen,
											kfcWaist: this.kfcWaist,
											bead: this.bead,
											antiTheft: this.antiTheft,
											antiTheftMullion: this.antiTheftMullion,
											antiTheftHoleHeight: this.antiTheftHoleHeight,
											antiTheftGap: this.antiTheftGap,
											antiTheftHandleW: this.antiTheftHandleW,
											decorationBar: this.decorationBar,
											cornerJoiner: this.cornerJoiner,
											connector: this.connector,
											millingFrame: this.millingFrame,
											millingSash: this.millingSash,
											glassGap: this.glassGap,
											shadeSash: this.shadeSash,
											shadeMullion: this.shadeMullion,
											upTrack: this.upTrack,
											fixedUpTrack: this.fixedUpTrack,
											downTrack: this.downTrack,
											fixedDownTrack: this.fixedDownTrack,
											upDownTrack: this.upDownTrack,
											sideTrack: this.sideTrack,
											doubleSideTrack: this.doubleSideTrack,
										};
									}),
									e
								);
							})();
						t.Param = i;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillImageData = void 0);
						var r = (function () {
							function e() {}
							return (
								Object.defineProperty(e, 'Instance', {
									get: function () {
										return e.instance || (e.instance = new e()), e.instance;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.getManData = function () {
									return 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWIAAAJ5CAMAAACje8qNAAAAM1BMVEVHcEwBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAADldBaYAAAAEHRSTlMAXK4KyuK86vPXdp0bizBHImV5ZAAAIABJREFUeNrsXVmy2zgMFEmAILjq/qcdgLK85PnZWjI/ETGpTBZXUul0gMbKaRo2bNiwYcOGDRs2bNiwYcOGDRs2bNiwYcOG/SOWJ+cGCv+PuerZMzMy+FLq3/plzfzZzIXwpXA3osBQ/s6vPH+zawBck+/IovcpsQWPAjJxGSz+WwAXiyEgN7d4YTe53DwwBazTsL/gIkoC8Qvth+cwHhHSAOi8Wc8htHfYx8JEfiB0lsOWkdpvPxktkc0DpVMWxUmYTz8dBo9PktgH+hTSXUPiczHfXFEDP7uJrwAWJHsq27ugBn4JdSF81b72pD6+NoudONqvwSxKxBse9ahBwO+xTNw1xoHVwawuELQNooNoQHzQQvBbkjcHlIY2PuYm5gCbahCJeND4iJVZ/MRUW/sKc+NgR5X+gPFMxRVP9HthuOVV29FxuXVZ0eZEEpvmISiX3/PYlXIrtBUMxytuV009KkvS4QC1DC/i+Ec4c1MrABR8XHQbhjpYvFNMzHNqTIEEbUAiBp+stSl5BgDmQERBGb44YYthFIN2uglhVBYn0QvxOSmc2q9bunf9/7N8obgmzxWIBmq7LM0zOA7z8q8/mwjWdv6ClW9Zn7w1Guu0ztY/44HMgG2P9RKmuOO7FMtTzu7mhfNjjsJBWAKd8aNQsRNiIicQ01e1m2nueqN6zyPD22MWsU4YNvhXSQG7qLBABzXFRRWFVQJvCmExLFpCcpSDVeOL6mJLmCcm3KA9OPS+iLFHIb4oi33A6jzANsKrsmsWyzRsD4tFEXvaArGhTt86JMVeX4zqi7dkbJJqp0WEjMGgnSxW0HjbZ3trZEC8zyKBW3D+bqUX5CuMkZWdjoKrs7gpm0iEIgSaHxDvq1EQNmfZb2OxQpwPh7urijYSAguLt/11aAM6QzgI8UVTjxSEmXadpMqt1k8Q94khDIPF+1iMNUveVntSkWxKr+szzphoTGmuh0aF2PHQxftYDJI7s4jjbEHyaGYG+9RcMlo87qtL0WRDKowzDIj3iTYQ2CCgwsg+xWIZwd6I3LwgDoIyIzGxJS0ECecHxLsgtoESaBcJAZC9B4XTd4xdCkE4jPofaPNJHUW2NGoUe3MPTEgKrngKYA/ec4ndVdTI1qt7tuKkiwcNd9WLVxkl+X1WLHpN23J2Way6R7hbWyF5LVIQMYYwene7aRzmAF2xWdZwF19IWouQG7zqDPHCc5hpbODts+wD4TyTm3Tvi7DHvftoYDaeEcWPEEJ0GVXR8uHfy1xz41lUAus0m5OkLQiFTSt4n+YWBiMlk6AUxlRzUGjC4dnMS248TwZmEgeglbbS9W8RoYyrKGv6Yxwtt4YihnWsJYT58KT8NVmcWP+okuI5zSlElQVxFo/hwWoUcUT5CtokLA5e1N1YcdwHMcVJi5muizQLAK/syi15HW3zTUgdZig8hzHGvRNi89z1+GVi5UZrSaCbYDw2zvflz8piSaA3fZooumpnHCX5fRALJWFTB1pZLBlKmjkNabzdqvgI5/xmiIsTiMkOiPekzygaTLK6TR/GkBRi9MckxUVL8o0CVAjbWMxBUjwbEI5tLV20saQ3EiLovMoWiEV+NMkCR2NpZxWIgDbMF3eIuTkjGfeoF++UxgFD2LaGxDbnQuRHdrdTVFCYnyuUraSnjfMXdmPJ1Qcemcde81raefjGZsH7G8jGx+cFf0xV/AoPyPZ74/AcfoxWiLXpn4tFss/1CPZmnKQ45o3pJcJno6ukYFn37sprAs0Ujse6Kx+u4fl1JdRwmPupzD/SOJznMw3+K59fyvjHTczIpCfD3I8E+pSXuPT5Jck/XmWCeavL2MdRnTgs3DZdpLFxKOLDBrTW2T+leWVcVDlRqmBIHb9aYiwlFhNLSqnY9HANIuIGUGdozKmrMRu0y7yafJPNDeOcEAZOZ6J9AOWoMywQ0+2KfB+bWNO7BPOA+JSnQLZmxZiA2eqJldso1iInwtmh14tffp2YwC+5nV6x6ddqwvPoT8Q5tHO/xcUvv071RuMpR6+DsAiM5YlrluZQBovPpR+8Dlo106qJrbmXOkaYx+Glk9bCh/RYLyXwgPhsoUI8gf8tP4YQ2th9Pm0kUuIXnvZzpMLikT+fZDHptcG3iTMRVN23GxCfMz01SPBG+8YQwNRof/cjwzYq4+Dtu+uvXrLoqEth88me0uVF2wSUGpDI45d6WoZAaD33CflzEF899RC2Ymo6qilEvvtcp2+zQQIQUIj53Nspg8WsE5cucr/+amNstRQGfWjCSk4NPanGUTE+CbEC6Iwe1NWdXBRkZ0zZi68AT6zfH8W2k+FuqfM0faqR9GJ0L64l7lvomvzBwPiMVZrtWkpzLdcazeSydqP1HUcVdL5akRxjPfewxTDDG/iMOGEJd+R1gT8XwTgNf3ww3Os1hJ+phW7uR8/oU0+fc1R/fJDI5rrPEnfXUATLnwOBxoKOXiE1CL6zV5K8gMfeqLnss8Q9wDVvsv/5aqMFK/wFJGtorbNFfcvGHgH5wixuCWdBV8TaH3KhMBOIm+A4CYnN6jp0qBBGSWiz5SiirHc0nNWlr6efSogCrPUItVFYo5xh0pdsGMwIe5v+7Yqv1YY+E7tejnjqgEYA1IeBdMHUPjoiRlfDEijIo0T/XQqL5p3ngHrXQyeJ7fPbjQX0XrHqtaj3VPzKWQdK6Ii6IcKpDSp/8MAeLGn9rFoIcTm+ZvGu25KIOJiahLqS9VWPB72Xm5lZUxKhMtvS3MD5p0Qz0I9PCMJCWwFLn4TP3c/eWkvRokTADNxfwkvPV618gP6dXL3er9C1BfY21jqAfopwRZcM5MvyYJIXNEvfIM1A2B1sK3qoQqsVKjIqPo1Q6DLkjdKSZEMfaukj9WKfpdw1ipk1i4LoBA6c9YHyfiuT9f5a0EsIkXQ/zCmdo5PPWlzubj+v5EZ8aUXnBl6LcISk7RG3MfX4V+WZBi8toaEvehOMlo1GSYrTFEWIeZt6+EvCYdbHlrzv7H299Zp+Hs3MtRWfSq/P1QuyWP74RaSXnh3t/6o5LYpW9HC5qTN1CkkrmP1MmH6KtLSG4JeLry/dDmN/mwWoRkMgXK6J6tICrX7FKd63OJpfn/1ZnpFoRjfuNAJqKtKX727I+tcxoPbhfIXR+5tXq3fqbVGlJ0Gq7ikaVck5blHL2bUA5KY0h6JN0pTvn834un2n5/E+xDR1F9fafjT9Fq77IanEK5eHDFsXdLPeY8sV+KmuGYlfpl6j5U+tDyd+By/FY/u+pSme91G6TKsM00NMbcnsHij++TCx+/IMSE6S+F2pSBTePnkrse9pKKLeKhDN3jZyq6R59ybTnzt5E3x59SpL2sLXURTlbY8iSnL3FMLqgqzqgZvzENW2uhFzezx3DXamfV3mj+9Xpf9NXeyI0pv1AdELL/Xe/kCV06mUuzDDte5Dwa5/STXZfqb721k359+eJfs3WVzulfQX2SUQv/wwamNOrzC5R61nPdtIa1qsd2CXXTH8VsVsosGvoo6Z/Jtg5yXfbfUhy/4j70q028ZhoAmC4E3q/7+2AOVDsihHcpK+F9q7TTfpNruFIWBwzVzQQZVZc1g+6/WaCvH6VT9NRprER2ZKwX+KSlBy3T8pcH3AxfFjmZjEjq2Ovnk/Opuu6fLaQka5XzraTOOwbj7Dwtb53iFXpFmj/J62gsQTde89pLb2o+c36UYFhJObRPPq2H+aY8pnlB2ufwGjpGlB0k+4AzOMbSlFz9jNu5u10d37EwXaDOrYpgqazyij/fRqW5Xuc3vxVWiWLa2e9g8GkCUorvy2sJXxyIUj4476ARYu9hXfVzC3cCuWFIwW5rItkLvL38U1ZZiMqznEHAALBbf3TQOCNq58941RyCzqOwuxmViKbbbi3fTWUNiUbkdaELoDKQYsPeyLu3C12mPVjkBfdGhTUA65j7Jve16jxJG/DAIaLejhvRj2SwTpIS/tLya+tOOv0DJVePUcBOsPiG2j/wBgbB3o/Ti8Ysls6e5mYjC3Xyt264pcueERIiH4ABNz2bHbGcfnlOXaZg82BEK3wq5Cp/wOtEyTL/CKH38POb+4faGn5lBy7UpphtGMt9IN1W0sHIWJ94CFGfmNzyT0SiIU1lyYLVDoS52ZiYHm96Z0FDAD+IOsFDj+UXp1L9J+tbQOpw05XI+c2cSlG03a2O4o7wea4b0Y7tVx7zHmomQVA9h/tb4ikEitj5lg2/Mlc1h3tIOLBwNtCV8SdISnm31hwkM33z8DtTwZcBOJoz3O+jF+6SGrgK/egaVY1ezV0vjUVxPLb43GbMtFe7jx4LcXemN5sSxNptegeeXGxnMeu845oL07ervzE92JFIb7qHyQZIf+dUtc3YcZs8VlverWGG5ggIvpsn1bjlvNOxzcxOYrYoN1dS2SmDeoEIUESG9noOzEJxzTnHk//iSe+HI8udaOAGvtAvuSdPOf0Flxp9Qm7Oi4+OuOeLTL1rpaYIVAhI3S6vnJ9yeGytrR6CY2X00ns12KL5bpsTRUCG3anJLGc26pOyxDaqS7RvW1MFVdz/WcucfZxKiN7FMsT9bBmUlRMbQhlB7qOlcdkBxfj+GNvS9maUJ0T28RezWe2mgFi3FoLz4i/YVuWXzAYoLEqG16WjYka84BBEIaW+yKDpCfwCqhKfdob0ahiVZrJ7bnCgkuF8emJtT+gInLapldObh7XYRpoqe37Cy3lR28XVztAdI6vZrApQXAKMFNcW1hc/Kp187Hob04WjrgdGj94+FPy2qP1u2eYE5TnNcOa+FQL3ukBSPrxIt8t7TJuhGp4eUoSZe6/dX+0u1Aodj5I4QccdnHSOYhd5nWxXO2+/0O1ZgptlvisZceB2pmgjvEFKGXNxt6cTqA0zIRZtztmYWZ1d/ZTZXBxcu22h6oJW+PcTlrMotr2kcvmK296EYU3z8/SolEFs+wD/O/DyHp9bs39iHC0eGvWlCXl4dqR3LLnbXouovC1XvrzCyIR0LKstLGS4Pzzgd3UICjorkXgcncEQVe+SauZUgvEINxIq8SZ9Er4QV5OgDxbmhAQe6oACvedSZk1+omFeYW4/ncK2KKMCOsCuQiHE6L67M3YN4fc+KjomnwOBhP3t6vZh6tZrCdt0vEuRFWZDU6cEBe9J+DdSOfQWdzvHX+GKIme238pIWUkojDbyM4G3O9hHFJci62hBXBDH1pjicyDTzYO+y1nGbEph7faqtyLjqlz9k0+MmtkHg1vQp+GERxRtBL3Zcl9M3Ei71jsNP2W8XOfEnGUqveJZu4k3FHwcXp69vOVfvhmuXSNd2FBz7mqs5vt4t7UTZx3lzPqbrHaKN4MZyShsj+mvDK1cR0R2zZ9ao6sqZTiAin3jL6gvMDx2JzblAczTXh2davrHfyCdX9RtrvIMK06igHiwOfhJ1cdApXcpUw81bA7R6M+rLa4PuRXq3vVP00thef2l8osR2CyQy/LApfodstvc6R7zYsRDIhrkp4HLchn9y50lXn+X4/GpuEbLB9ooUPs/ekq/4dElhLsay6QAPPPOLZGZCaR6koG99xLpd1xZ02R8RunHBPMw5NduAWxZU/6YTbQyMINGJcakeNiXNef8O+Lo6jV0DuaU9WUxfVDALa6PTOKRe/WfCxF14rf9E6r1ptKyf23TZpkkBRlxsDvvsoDVJ6uOlsozYJu2tE7xN5oy76YvY2MHe7wNJniwvjl/6V9BhenM/rYcvwI8WIEOdWfjY7gz+Ne2tcWvlVNC4jVx74xh+OyIKqMRJKGI9+r2ow+8I0gjSWxZ31486f7U2KapuTQo5B5aBCFnYUzHeenyIJTyfvfdYp004bsni7O3TV2eByrgR23CME7frbfexlQkhujHUzvfk0ORG1gxxK4hgsZnUcQBMg9fv5iUuUvRBUMiIsN4vQjjvzKNZ3UnmlWQ7QGjY0/8OccGQ4LwNkAjY9CW8jFJES7AbiQmY3RCtAXC1upJFnHqoTigOjXQ4CIMRsQdVQ/TT5VGsIIjUxExu7SYJHVuRz1451XyCsBHwmkT+y3fxnX96C2vgfx2e1CNBkbtCLK+YUxImFeXv2awc5c8wuJWQV45UxLIHfu0IowFjaPC1N5J1u3BCgzePG1/Cp/Rj8M29rYjv5ZmZ3pW8z6PnZ9xxFGGpoqat3+mvGGTTm+cnZI0IfovSw9MwHWLieWM2KyXfaD7pUftgjiOxaC9GNV54xBBpPkh8pMBRRKhX+S6fEv0GBkN9Yj9tFYtoJxSN4cdkKvtPTYU1F03ex0mQwOV4XxndVBYogfPKcHzmCWEIkAvkgDo7k/cz839uFr3bgPZWw3SuOsL7Hl4OvowiwligquhxBjAijoMQEz18xDZY4i6Em3esKDQwoaNuOh3UpwXHCnOvkcgypEInDcpTUhrK+ZtjaoNJOeQFu4CWKTiOMvTisapBvqwzrxcedIn5g0tfOSiasTfw/CFn9wFrRtYNe86qYLf/Bw6p3414/qw6hbeQUtfgMLf6HN3oHkQ0g79qTGg8MIR4oja4Mxb/6f/HgjX1VevzNAqR3llsY3j46CPiK9uqHXtnumXgAL+5KmqQAIvnexMHq/7gPoIEV5RN2ewMBqEmFgaqJfn/gI4uIw+5Q6B0fVaI7ha3tMNnfXjVLQxceYRcuKIAYZcjMtbD/XRVWaU6PuwhUX+7gVGnH2/b6xWihwYxM01+/FiFIgBFFj/G3yCKyGfrgLh+4YalKgkbTeP0NMsDiX4mI/f1+cTzE3XzRWuVIXqRmftzKYN3QIsWxK223E5gB28T/Z8MyvN5F+vteDCd4WS8lgEAMmf2Hn/LlRKeOIP5iLHbntnp1DRmoTflj/Qkzy/Lg2DyZ8fw+G/syoBDwW2/Ud0FGAIODq7oG986yXqpZRkYiG+bhO4851+9udJkJcG+ifq1CRJzn+z6+a+aAbngNhLdNLC5YqriyN28XfxrsV43Sv48o8je7AylABi9liffnA7P6entiBFz87T6aDlyVSPPTWXMSHFD30uaTcfFLmBFF61n2ZE/QPFsXx5cljvaHtJc1I2YgMm0L2YRDmNkfLy3/dLr7yV2yYq973rLqbaAU/dLSxuMHaI1m/MHxcmagbNDLqqCRBTbnPcZQ9/r52R4iOPzrr/pj4lyJMe5kG+22LjmzmVH2YeVYBAniSgh9Di3kaXzttdasNT/hxnJaIC68+EpqS/NsaDtfiBAAu7S+W5ohOZUPMLHwjH7flQqxga3t3C1prZUc50k/37Q9WCSEyLa+cCQ50HseYIVb+W82E7UC8OKn4bWXFxA6x1ajIJFMXacj2uUjHCKIG7+fdHRoYuXHoo1WAdiJfVuXZ4sdeXyGOEQg93WNtVc8AzbPPIf7dFLEqXHyHwAnHjY+u++UuJojtpP05vGt1ry2Q3MLPtsYJFcZxENLT6nWzAmsZbBpMu9KewVr4fJBNo4Exjds5XOtpfDfSbdLLrnoKunCX6n8achZIqmbj+2I7PtSJ8ra/EEm5ude5SgrbOiu5pOP88/zT4K55htGuYZ27PC6aeq+/bAXY9Tls166spWj1GQcYhnAMmqVe1DfpBnlRzuo4w/+IcGm3PsqEdqafPnAl74oFUKMpWbjXFQ1h/iPvStdspvVgQMIgVj9/k/7wcxkchYbI8iPO3CdpbJWKjqy1Nq6c4zOBRHLb8Skgsp/81ScCBRR99F0LiZS/Pg/O13t/q57w0/KGhfiUGS6/u5iIsWPofJqKbbY/qdOThOxWNjdvTjhBR+Kh79bAdHCMPASWi8/e24/+crE+MBPnCbSnVteyvUWxslzCzh4mJLMgDZnd6ruTuOBOSfAlNo8xlMaB23WiL1NLM35ZFrSg4m9peGXPVkb9zbxhZRKeAIaUY/j4tS5arWUvOuTKelcSsXh45me6FMXO8+nnbxsS4kUP0fK8/IW4DFJZUPDdzAJjd7ai+F8iUSBftwJEDMpS/6bueyvfZ7Ej55qvscQHSYQRd2m29nEwV6gYnxyW2cnKjRn7M6o7erERdJTvZBmKjRP3fpvKz72YigN9HQ24GYmF6V+hH0tnK96Dy+8jsLMrGBIvbGJ9XFx7vyyAKdo5tpI6h72tzWbmenqntO/KPmoqUNSb3fZBjpxr6tbPP/CrBD0zAo2dtFkLunFyp5I1n2F4pdXO1g94cWJtm0EXYHiShStX9LizC5EBrtrvvOn6onVJq/EEW5uaSpu2zKmKymfBC9vdjJTNopmUxNfyzG716OFYGZice1n7hkp4CpOVFrj598Jemqjp6u+WxBRZLhUO3k7WE5m7i5SmvsV4/Vwsbpu44a3UVCYnCJHug80C3rx9ZFYeFv0S5MmTlvmu3xNKoZvBp2dIocN2ChOQfFF80zBW9EnZr2YlubAu4h8jfMl89YcSnryRUezz0nNjxObywZjsEd8L/fmTBz1Dnfmr8nu8qDT27eSJNHkprug7VblfUPW/CRKJ5i0kKLbfZXVQJtsMGie9MXCdZnS+9bcjrAXKz2EaYAo/X4Unk8Uv3jPPaRYzIulsZdOrE6mTQLM5Jx+u5Yx2OsEn0+EKzPRpIlxNxO3qCnwhDOv0lDMfqh7rav4luYcnkTNgHKyOsPNOsZN8g868fCMctJC0lDayMKBzLVPqrOOT5JIsybWaas40WAoDWdLmBlg0ovhViJrJdCWoEVgk88WfxJwFTPfTXznxSuVHkK3RhDi7MQuEeHcGjba9cl1e8PiqUxx8WIz58WdBx/L4AnfBLAnkFmAnpTC8wb36WYqTbnZvTjpqSlJk8cE0uh9evKhyYh3Mc6XevJWHIzZJ06U6q1hYqdPJ0B5dr6JdqNYrHVLCExaH1R5PlTlvKr0NcJ5X7le52oPNPv0KFKTvUNVRrbKvVTprnRlYvoivapsV1PVGbBA2++Gbk63zplDMfEfRrFvTrFPDaDyy5TnTHznxQuIFH+7qdfQKDyiseBl5RjzWL6X3sUUKhGxtCgmvVht4sUCoOWOkS72A8UkrkVrdsHFJU60SmFJFyslwpCY+3e3Yc701OJHCZdXiMrMyUYEspuYWCC1uKqSvPK1UhPOkShdXj0s58SGWt6Y5dVlkiIpJk0s9zAxGmxxRBcnv7CDkjQnkVn+5T3GHkY3nVHiZf8imzkT+7t0t0i/OLSlh1WjWeNMnHrR5R2P/SJTDzyafGuKrhvnwszF0lt6oUW82NimgGjS182aNCmTNHfj+2uefEPxQ/p6+q8IptLV9cH1WnjiRn8UoDGh83N9ILcF33k9agnNCkw3GNXiXO3htmDtT9Y05aQytdYn8xykSGDWx8X12KvpSM62+ghBT2ltf2i7PqIQdKOJ5puhWtFUry3ADaJYARfLO8l2bX0ro/mpEjrJm+vIBbxY3a34hhtI54yfCcaw/hm0vOMR9jec/M7MBGOBy+NiBWRvSj/TNnGimV7ZC9Hpkojt7ugotEdO9UOamZCG9ZnE8E6k2N0KwHs9k+9o+X0g0jfQXxLEtgUjzeQ7snZtCzvQ7TiRCaW7y1gzzTYkm5YGbUQ3HXEBt4z8Kc7M70Bbt3LpEYqJ238g4r3ogZdODUfjN369xbxY0s2BbCa476RlPxGMk16bvEZT+y2tV873Z18hxvGecaKl918TEambWN0htxayEx+jkcIDrbwo7+9Asbj9DL583Y0jYwWwsIRKhjsueGquxD6YeGKzDWHhG12Hsq0T73Sn8GUUfthMAhfmwyuFW9OCqr3p9hjUPcbRt120D/5+N2ijm7JC2G7qHxeHCdcyNS9If3fp8ays9v6YfiLyEIdnH0pS6xjhV3txBmgJfdUTmv4mWIThiwQ3e0j9P1w9S4lCXbqlPA7GLtSEG8d1+V8DIqA/ffmCKAHyODjxNevRtaCA6957REQ87fVGa4/DkmfZDEbHpFmuyyQmopRgzevcSH0ehTpuSVwXAMdChV+YYjdHX9K5Mdq79FEPnKulXDXwMfDS06gckDMauxDFbwQVKktAstYSyvKUag+oWngs/RgLQ6NOB+Z6b3GB61wVHKKxRMXWRBrNZ5AYqxbNGLFdkOY6Va4iUhx8wcikDRHO6Kv5QaHMqGkL2n6VCr6Yc5Ls9ZCkriCSe5xCI80yPmenh3Zh0cIeAh9A0yShyZeaxTmXefDNzWh2/yqcDPNjtCCANIH0XrjyRaTUY2xhaRMG2JLZp2c8ShQcWL6Ai65+9TG6fBc7srW4h3o8GT2fdVRysVgYCSr9SgHaBaYA+GJooYpLh4oT1c/eRcGMXkY8rhRlP1bjkqd/UskqFZIolvPoC0iBT8hdKZt0qSONqdjw8xfKx4Cy/KCkAGPN1UbRYooI/1QsJqSURXbFk0vkkBV3E5Q6svI2le9tfY7DHvUn5EUKH1t4cbJ8WBvSreOHnFOJyDUglMgRQSN6WUp2cxiJ4IXaIwx/J3b+VYA0yA4u6uub2VEnbOBa1hx20AlvRs9rPiM9huMYPf+MtKFmo7P8V3fcxLjuWLRlYrZf1SHqoKGa1+urIorMl1v1w6yZocDh0POWrKUUZrndzIT2GGQ7CNS19bqYFwdrmQOPWEw8igsI9tJX+i49uIhCylKdwRhqm5YZ+6WxmOfFAcCQHQvGAkCHDU3MZaEpKcsPzvbLx7OnFzMDhbEGDzs2sQbS+5k4sE1c4kQyg3QHsGUs5grAqzqK0oMraX2BYr3Sg+eQqfKFyMEFFezy4tVKDy7hc6p79tEOUbUF3NGLE7eZGbTNVYpwZEKviPRGvfg//2uuZJInnYs7DvHBK4INEUXxR94rj58HOXdEb1d/WdJ+XiyI19JRXzUw2BECpgA7BopgeEImiaA2y9yYuAfihrg4MAtoqT9pb5IeKaEzwo5erHnuKOnz1ijQyFpxwcUbTj0Ss6ND37w+cuQeJiH2mHix0kMZ3g5qQbbVxMqbgfmdAtkD2hZDzwI5AAASnUlEQVTzYi7rOH5LqkQ9Unxs2QYSvB6F+zMa8qD5ez2KyOxn4sibQEv4PlxIOND63dPEyrI4Qku++sqOSg6YuIDwDU2ceRNoxD+LQEj8Sb/acuqRWc3Mh0UIAMMOxqHNprLow6uEFf286X6A7yD0ddrWESn+8mIWogh/qYfzyK1T32BpGZHiby9mrXA7+NnjLHGVvZ9ZA0XYzosdK93JB45yCez6roK2DVdVWF6MD8xUEq1ge/GmQ/7+rKXwgcDbIX/52+P/C+ibz+MJqIFl2ws17NcvZk2g8yN9dgLD7q8jbOnFDOqNz+nzQ9TgjqEDyh33izkTomLU9ASSucFYQs8W0WL9YsEZLOFzo0xbblMHuqq7xaYemfrXBpU/nt5zMMzio9bfG87uiJHu4HiykOQSLSjasdMmOFqr5niyaeSe2+Yt9ygyI90F+xwoFJevvHP5dbHHMSbQ/jieURpw279AG57TRAbNmrcvJvbMc6fwZ369GS7un3rgcTwjiMg8FFESt1zh7p9Am1eUGoh38xG2xMWBEYvNqxcrrv4if7C0QnVnuhkdnbHHS+GAPKqFPSfQDOKaaO0rYY3UvO3kLXGxsN0Vmng3ceRBirTlOc1HPyjw1r5eamTkEcei3vDWI/bP7qqJX4MrspYH05Y9igLaZPenYd8KB8+bfIA2W5q4N5rK4x2iSWsZ5Vpnp20x0MZIWHS8FxqedSqS+vYoVis9+puZ5njnq3HIotwE2JJ+qRtR2OMdPoSCEQLDi/WGoC13U7oHa827MhgahoxoZxtoscf1r6rYs0/Dc65PBey4quJMbyzOp8zknsMEoBDMjjfQvSbGw56oNGbOMoVC3JN+qdPE9viPvStbkiTFgQkIAcEV//+1Q/Sxc1gFcpjdh0JbbdbdD1lhlkql5Lrc41d6MnmFw4aTwqkHTlwzst0X5NvOBsKthnnxcdtA4ATaxa/1A3mh2eawM/PjtoFAEw/M9uWFXl65jUxe4ezOoBZ6OhRffRh1Jd8lrzAWX6iJn1bmVwjYET4i7SkkjSvcYCilEYu/9ECOePGhdLAE9ijoH9tWf0mY8FkNOOTXamKO99ddsmuhviMifSbuYHVX/P12PWPx4VJa5gY6AFQ4kOGq+vslUAz/TrgXL+Pi7w+NG7gNlIeJX5zVRvQktKxXdwd4cQNLj0z3GzfIFdB8p3O/GCU6r/G+30zsYWIWJo2cmaDkdY3xTfHc4cFYJy72YCwOd3ybIDFKi+eYSKUXQ7XZqJ9fBxY1JWx+1zG2QaUF9LMz+OaqF0yLp/IG+orYIfOT7t4csME0QckrbMmjAkCPdtXrN4HBZfmGUeEd1pIf79qAXvz+Hbfg8qDzQWVLHjNxvu93T7XgHnj3Og8RsDiaZ99ZdF/FsVXYaUO1R4eJ4wT5YSViY9InA/2ANsgBaWbiTwKLD2utPhMXkOj8mqW7Z/sdKj6STopo7CCm3jMT/yLxF2MxZuLzThsraOJJpurgGBobLB2Gi9HNzPTay/zxQRFUthVm1ufFHcTFNDVxST4igSKTwnTXwFuPSS/z83NxGHkMs0ITf0BhzHBPIwFGEzQChcLSo4CHCGHekDMWoj3PGnExSIwicfA2CLWB6e40XIztF5vA8yKQkH5mUbkN1LCFKxvmQzfHEGpLQSFoM4EqZJs8N7FlZF+FksLSoxMBjiLKlzuLQIorJVLImQlNoEeBIrzqYuByyVFKGllVkHR3RRI6aY2RsVzSuA3UoQE9R8mLH5kPORhzIoVsg5AXp8iS9xEByDgl39SZ2EBenOQSsAJMTC55jSZGqrsONDIayzd1jSlpNHGUEQUjq/QAMi6Yic87bZS9GGIfzYA0NEEQ8bipR0K8uMpAwAAag0RI5D9vp018046QPoZheZuKyevrZiKUH52Rfapi5U6Qxe7MD8PFgEprJsjELAucV1K4YNw9ieZjhqCWTVF62cUKL3SLXHo0UObdArQJ1uqTbezyBNqAswoAUrhh4q7Oi+V0d5GHTFys7O3GAmeQh8m7FlnvzloQaWUW+2jNAgPvw0SKAQGgnMHezUAekrt1e5M2LwaqO4uSq1WAk5ujOtRm5HMaQpeCDdAy5qgOtcmnjR2WcS1AP9MGdVTnXWS4ahxAL26jdpNCio3qTGzEwVIh1MSPkraEFyiq4369vLRHcWErPD9bEGK+U2hiE6LgxRb34mrFIoWBWHzerYe0hIIzWHU53yEq84dNPZx4d5cJNvGzLF/+vYmPm3pI6a4zruuYxVqb5Y2MAxGFAAKuBR2lyyYrebG60sOIpYehBM/b5GA8TKxtk6KLZ+YV287+GYytZGKOQZuJixiLDSc4ULgsbbfamLT15GWNpSstKHdU6XEXQJSjTmMJHXr8qrZjLkKpIz7tNG4gUbXR0IIXj+pNuB0Jt4gBz6vuhHdcwwrOyn4euft9R2Uz6CoOllq848IDSegr+TsaXSaWt+Trmol95GseKO5Ll4mvKFZ3fqmLnuO8Z5zuW9kF6eW9nO6WbBLnxeAr7f+51Z24AF85rNyGlzjHeE/c0RWMm6gUxry2IxXmXlzifUvfm9OUwqQhP/MarbMP0+Kjy/nuOJFiYXZX0uJYnoIt/y7fndaSl3Bxp7BG08HBdsHEuvJdk/aLTYKFov+D2oyU71T1M8X9YvaLDd7u510KM+o7Vf3MS6ruhokXh20+1NlvtBRvVajNxLkXlxTj4iOl5UGKtyoSpiLc3Rm/vK1KcX6hQ1HXiNQIMlaXj6sud/k5P8iIFPMRqTKRYk6xLj5SbN6xsIF0Gv2SsCXPtKwnU6LAxJTT3MSn0S8JqyqWlofyzQtqLCj1/DGlx7wNZFNc9mLJxG2xPfrdA0WUYvGyFxexHqSoSc2qCb3HzMEsm1hixbNBk6i58TT14rwei52425IxLtRjYvG8Thjpbvk7LZpYaC2Zo9RdRekUS8un912sVoqdvuIsjWKxgLa0jCh6kmpuN2psp8aLJb07SuvLOzIvBUdFyFgSjM/ruHiYuAq/U8PKntz3B22SF6/2z10QqYw7K/JiSZrV8jpo8+J+q2NFXmykQLGOiz9B7n9S1FN8OAFR1LQ8LnZeFuXNUY8b9zgPFOujuweSZel3qp/cBZ92iCBMPTbS3bN5IZnY+ElKPK4lP8fFvBGLbbCSia9ZSjyvJS+ANr+clzjIjPEU1UyhJdVGWk93H/K5yR+DGm2EIvQVU1pnYEROnLJX05V3QZx6fNYDhXw0XYKa+q4LgWJjAg2JVRWSc+IxsXiOKPJGoGAklU20x45DFPPZ3PDiZdCWIssfS30ft5xHXDNvA61PoEegAE4X6rtQzWFeXOVm5rKJIcxbOCgZkZY0N3Hy614MtIE+8o7sQbh4fjaQ/M5gCTCeQ2rAM0wstIHSVqBATJxD0LEsn/38ZHmUHhuzO8Q/1Zi4e6mZuYGLIb6m7qOOrnwVYjGnuPxMjGTTvapzK9NY2ukXM3Rv+j5FPa0lH+fMr7Sx0zaK7g59Ei8j0sO8+BLmlHar0wbRIeSgQ8IxC6BtY4X7EyLETWOSDlY8qdM2AsXyNlCMEDeNSTrquya25Nd32uKNnYdmHSbuUey0LT/T3zcmLea5qAgUXqruNvrFGCdWlVXKTviREAWvr6rAJFZvTIfKRIpH6bH8TAvekV8vW8an0ZIK6W5ndpdBls32whGnjK7f0nqgaKjYio7bsCa8zZ394g9I8N9EpsMzQJs0u6MNPVYGSaWDCmDcklB68AbjF2Nn5CVEFSYWbodoA1E4Ch70Yg2BwkjVnY+f/1mgiF978WHao1bcL95Id6C2WHm5HjtMQbcI6W6DLOHjGNOzaS8MN8cp6Aot+Q2Fd2dBL44qEIUXBIAsr5cHzsKgTUPpIbUTNlryz1UY6MVRwRq3eK+c0rqJYcrjEDTc1EgrOQNRLOeazhgu7lFD6dGkk4u8s0CJ6gaqSHcSn/OT7tYRE4iLG1B6fP9mppXO37JNy1m/ESZC2F68+KyWPEnrIjteXGSt4t+4WEFLnpJw88W0gV0ZLaAV3N61JLUdmfxySnIpQte3TlRSPwAVGy+Bf0sbkwkGr2+DgtLDJikMWKa6ESgIqVdcVLDEnUlKZkxp3cQ1QYiiSJoiJ/yQmMzsznjUJohc6c3ERyEKFrkEOWyMR8eXAywtz19VYXERBQQH/4wu0DpnC/786m6UYZIX+w1OcsIuyUpSEIutVOn2rYUd9JJMQ7oTmSNq3LnHyAnCxc4nBYhCMLFLWx1dxvr4bnjx6cwqTVrHMXFLehw1cTh/p80IR3eO9gSnwKVkpyAW2zivPMxenJD7d7/TXTq+9LACw4zxe5dxIEXhG4HZSaWHpA6RA23ddxJGF9tell8P8mJR0mtXCwn04hKPT3dZeovbJvbY8sX5U48Q56G275o4eezk9PiFqxKlZRxwzPlFjA//N/FPVDynBfq4rR7QTxP/V3LB929Q3EIohg8KNgOFC/7sbaDmJRnWsp/uMOrulyOIY0Db5QXmpcfEe7E4JyjIvi3UHVN6ZE8vDMLlytleV6tp86IoJwiNuXD4NlDNtn5h3YtSiDFEH1LcbFF8DCihdPjyq6NEf/Oh1vMv4yafApOPw4nsVgFdsTOndrqJA/1WHXXVeh+G14YYUkpE9bo+zfBj4qtsmThi/eKzlSdc+EUw1a2Pz08Ytk105f7bOnmYOG3FQoO15NvhQksujrrCGUthRIfHc3v/u8N2O0y8Z4JOkO3K6Qe6kcjWPGJuSsb9E1qYy3IYJt6jRyoJY80M0Gmj+b5eHO9gbfqCE8K1ai2n/bfnMO7XT8QOdL9vh8KP9HaPcDGSW2ZLnMiOZMeUntw3IrO/77hJB0hQH6hjZ+bf1Ytd5vjjDYw89/z45x8ffuS953+5OXPH3RXr8eUwyBfp6Lu7avIPHOEHjBiuO3x3pLwf/x9//dxuGLB1l7unQoz95WhEceWLnwLaVONacx/nenPFlV7NXyuD3WZjY6iouA82cakj7FKd44XHzTe9+IJOEfKdzjUxhZGQpFR2jZy3awIDCKNc8U7HTj3KUyeLXYTiaXutr7O8R1Tvm0/liH7cE0jl1wBw215m//yWtMsY06/eeh8B/8+X8B2vQzmiawjQFVJha7cxaU5PqqwDovzo3o0/T6PJB5/Y/EwBF8V8KJf8NdAo5JzNWtp+h3+0d7XLjcMgMEKAhD6svP/THji5600bO0rtzJ1dkemkPzqTCcVoFxbRROEIKOwOId7B9vwTlbffJsZgMVcdndopTuhUURXEDcpJCFGUojNDTdA0T+irFKdAJqClYL+sIDh4FHOMvQVKh7xBEAUYlZ4rSfSfaSUFuwCrSjzl/dBeXgBi6mL+PqiaNIzjw+PSU6RyoRhPCCfsW1O/1zRRbKEGTRSUpYUiEUwY8XQObhrBJC/smEvq4g3UoPH1+hi5AFodL5wtiIuGjlKJV7b4KbTdtHEcFU88/DgPQhLlZCkC9UsJvUKmvGWVTQeSQraFUWjA79dJ/88zLin+Vw7AXQ7z+vcZeM4q21rwdRFzZU3TK/z6eKAtB2IWbM8f+tJcViDLjNbux436avXjQhMf46rvDkc9CmsAd6VgB2xs16hu5JQ31g+85tvrw3QwWbPlcqYols7ehUOcywmQYY/qjI9WniD35eGZSF13KsTWOsFtUT5GO+48alHmhOMm/6lGYkF8JjzRcqdOGpTM7XsEYK0iMeSaa/O+XPTlm/W1NRWdqS/KnZemJT0Sd018GBTCOD1nBTnnmtQy2YYrLglP1bRzjPHZvHxxqSqV2zeygs1FTjWbUo4BgZERiWx8xOGp9IIlswKw5L0+pbNd/P1dTyRvyp+aAUygsnOXJ+ANx7TMANmCWf+JmA0JpnVudzhE4fKNRrCFkYJexJtLURQ6sJrM2hTcecrQhd/y5ak6ALCPzn8aHqu5+IAl+ZbA1D40Nx9MnnLvRES6y38E3O41mRo/2KQ9Mm0qf7G71TLbMUvyDmhWuQahKDZjQMYwREhSam+52URWbhzMvPVu6EMUOPzFv/XSGFpZLLodUfyETQodpx0surji1vnyaThYTzteDtRMP2HbxNtdTLDsxe9s2xz2JResiTU40njSd6hQrLj4yfaak613fV+i4MVE4Z/M755sSfG7LOlxVxYjfH3jzYjiPhdHWbygTGIYDtpuditOWcITkYeD9qAeMT9OuNPpJBT/DFLQ133bfkqZw0Bse5ncq5ltqswMOSPLLOiWNpyzj5nCC6wgDSaVJxF9s+Ip7BHDfvjXDCKpWZ3aBPL2e5Cu4RF3XTcFcqPEcfOUzaJS5FwrVJeca53l0+szG1H8cbr5y3fKPR1RPGzYsGGHsl+flE9VQZ/NIgAAAABJRU5ErkJggg==';
								}),
								(e.prototype.getWomanData = function () {
									return 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV0AAAJVCAMAAABK7dZ1AAAAM1BMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADbQS4qAAAAEHRSTlMAr1oL89e+6szhn3VBGowsdm17TQAAIABJREFUeNrsXdmS2zgMNA+QAE/9/9cGPOSxZPmceVKAhySVeHarWjDY3QChy0VCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJC4s9CL69DC0xfxvJO/PkjjUqFUiV3/z53jXLOAaJTSmVJ7z+IWhQ6RAJUgRCAgDyR9aAEm99GLMpbDv7F+/ZlcDHFoh15b0EbAegXkQN2bMlx9ipn7eLDKLm5IJDFJPh+HQVaytZLZRBrTjEEFdIKvA6tPgQpv99WBectpScFGRl9+t/g1X/CGUzLTXz6iRwd0f+Wvn/Cd6tD61/ixnyCCLPk7qfMFrx/48hK0SEI9/245hK8xQdqZF6BQh0+PND8u2pXK/Io2ftBXXDo49uf5uT1ItzeDwcWPsp0gCiovYsWkv3EBcuFlbHA+65GQ18+fh7+Pym9v2Vk2nn69Ee49tL/ge4v1UR+50jLd08E/pOT7Ze5G5BeHmkh6C2+JrJwFtb7OhD8q2cSmzu2UxVKeRDwXrOxlyhFWhYb9hyZz0In8L0oqJy6L6puctbSvfWYC0k36FVFde5V6ipvo7IWbuBNrUlRwGMSBJ9p4ODgRdUN1pZLAs7f8lMVim4nm6cgnOHZzyI8N7xyGaZCJLJ2Lb78TNrfZfJw+uT9Dd9lTfv8aHJkB/xMwfy17+48NunMrMxlyd3H4KFPL2rutSwnBW2uoZ2BapQJgx7KReKhwwBPW2kRbttBWfeOPMObve1JnDh55WB7krrPcs8ov/33rDmZm/gAO1BV3olZ9igAnnXQTZkpukl3zt58QYtlEAqU0vAgKgI8F8D3XkJlePGiJ38wnlwVII/hc/4ZYWUJccDWInrShuzgGiyHBd0H8CE9IRnZ2kOlG5Awr72iYvHccvh7Rob0xAJnXnCclq2t1hz3XrGrh3BqJ/J7NYFPRpu4snosJdWbucfxp9q6aoqmCiZ/bkHxde5Wsg/LbmrTu6x0WUBcDYY2FZlKCcwaQMP0H8nLaM6xlujK4AFXY3A9eK4djOWsEDo4BAKwy2IT+ZH3ZJUca4dawu5l8LUIJOCMzTFqTlcocWRnVQEInSOGV6OlOiwHJR2gY3R3Do6OE+0Ky4+nnq/oaZ1z0jUxvprrw0QXRa0dSTHctXWNW9lVM8zvP38roB2L5P5sohen4QG6cafNJtyFv/bzM6maq+nww3jBQ6bBhqPFIFge0ALYzT0qmt1hnBORDh1cU1P3OsucgcsDEVym8Vu9OyO6+re3AVmpbb/Tq5NeofHgHB2GWhDdkAuFP529b3cnGkszMEhDPadL9uubrGE/JQLTdYjdGlNOd+ngSwgjd2NikmHC4lsTqOLoY1aLxUju3lPa3ShYE7XzTGtJrbARsaqw1uGUQ3SNwUUmCd7bFCy1pNXeBaFkR+huczfYya2wz5ab0u6rKS4MridnpWRUiDmFGK23utheSJKXU+3Y6nI712Fq2pU6mMxiQqk4brBW4t9jExMYuDZobUndZrzERgfjboCcZtllRnBYYHqOmppTziwnUrUw0D1/X/gbpba/QjXqaOvtHE43Vvwp0wqsNra7ZBXQSd291xI7+zFbN1IWLBz5Mib+3PRR4KOx/T/AmS4m2V1k2NmPrG47usk/cH3jT4OyGQ2c6y1pqz93c+I7f5e//9tuLp9OdaD8wJdMfMD9oJsvBB1dOPep9p2aYHQ333+9jtWwDH70GGG9jxk8a2ZPYaJrJHf3h5rds11aCwM8sCXo6raz3jBmULGKIAbvvZaw2+uoMN3w2AZKD8uuJ1rnJdtUfx73UiqRrMS441ewm2Gy8yxT/o2LfspCMtC7EplQ+O592bV6azKMHm92QK/7ZGhZifi+SuDsnOGrUDtSW+xUbg7fuObXJnEM9YLLdVdcnPtDDbfoepzO+fOZ0ynrmCubMcnA6BbhDDstsW/l0prLyr2+J2Xa9TVGtxm8Z9dq3/Ddin77ffYr2g4PV1vkGEuMsz1cFqa7Ztg3yXsnubujV7sLlsav05Dol12zIeeUA7q2ExJHkw2Wxo0Jm7hj8iE+w/6J0FaQ6asuRrv4rT6IRG72zqpS1XBhYEJ2MdCbEkn47j1l2LmM8XrZz8HCB9stYCZgCVekS7oka1sxoN4MZionWm2P7m62tPgrug6LY3g3iGlXdDU5FYymT03HVkyGe07CyPaeAe6OIrdSBuPAXZKi3U0pU/i0Q9fLbvbetr7bkBHVyyDZHt29h3vtD2vXvJkKw17cHm65TsNhuGi+99WSFXTvyu52aL9d6zMzd3s11fBwpjy3O4H9iYzOjz+3R/YFI8P9Tia3Xq1KOC6rVsVi4dCeiRD6KkgzcxfOje4XauIKJhOC/gcFs+5WnBP7JiLRwcpHA6G6pqINgOtV+Nxa7fPc5aMLr8dZnN5NXSvwyr5q4fLg9vlbMJk+gGaG3Zv3/EIONUdr2YVRgJWbuwDqyMj5udAWwsa8qdAlG+jSY1x0Tx6LoLs51K7WeZ7Ltp2jcbcnKbxhE4afA4cLyZhLrjWyJOan4Fr70rh+Azuh5O42Al5dhrmsiTEd6EYFG4+sFj4BPaLiv+dfi0q9OsS+dqghXZ3cZX1IGaa/wFJBTyeBdv5ubu9DaO+caH218dYU1R9OoLb0pXUtZbR/g65fty4YS71qunU9ToaDPVg1KcvZG+J8PQJ1JVyg1d1KKFeqdmLiBt0wOcNIQHW8ZSzcXgJItvfkCvauJTpRE7vcXacc86i7BtcNLkEdTuLgbY8z945njqrB2sYazlwZPlcT5bp3v87BR0Y3T4vscFEO3g451HF7peRuRRBK7m7Rve6FT3ZwM4SBLvMre4QuLXSHbogDXRJGtqui6xK8NAbIGd0hjfWDJU9uuXHbtW+ZbBjd9jMkr6fZYTXWiTHZKss41YDGsVXgeFgkLDcpnaglvCmxE911AZHEKn9nZUgKpppYTzUFdLiHSC2Lus3dVqxj6eiSVXJReJe7Q5h5PxhZxrk6i38/zN1olx+RkcfKoRh7fVEgc2Q7dAcgnLnLzF03OFq7AXyEbqXlB8M6xiRL6Ry5nPbdHvq724Bq7nYk72dHd60M4UHuGrv8jKrPrRk6dl8tPHtt2Hmo7vt8143ZXWc9zglG5wao4dH+N78sV24w0DVaDXT9Wd898WXuOt9dBed9Ipw+w0BXIx4O6Zm+yWVO8hnfJQifiXrIalmnt60MDR7Nh9tlrmZy1CuDCY+Wmadl6W8TbUxZU0e3ql6rFQi6W3S7dxjbSTY3uikmYikVzmb74IwiGyLyPzO8aTySGnrBDSBvpdlqA2pX0/orDcbQUobFYrPJOTuhHN9j5XyvOrZXN4cxp14jlNxlnqC7UxOZ6UFLWya8MRbkqtreIdz3Yx1vJS2+mwtV6wRLrwW19NZPcbLheEsALLbdutSPRUvg2wslsDCsbpbWg8I7X6pm2o/3mQcT+ummUC65bwiAt669z0BF1ahA60t2vKJus5F4fKUqr4yhD/+XQewsF2HWzme+lvKxA1nIu4icre1+3+JdibY7MVxwHauLdY/8/n/zcxdwjvOGxSpjgCXJiX2cj9UE0y5lmb4SQXBt0XZe+kgko8vQRiaw6biezAoQYVTa4USqtiWHTvsO8g9zV7VXz/l/7F1rj6Q4DJy8HDsv+P+/9uwEaCChu+9jw85Jp9XuTEtjjFPllMtyimGFAlxOyzzXtkySMbaJgdeQUeCmT1/MR3K1OGYUJ1D4384fiYjiYmAluq2KavRBaK4Ep9ZdqzOD31Hyxm1CYo0zSg2RNYyE7t8iUVGO2hpdjgi0txscZi4TcrHDlSEAOaEZV6CsVV697CQHMY8FVCUqwH+MLcuitMQIQU/kWtObqVZmmCBXDzqJBNKbHHDYysmrYt2URpwLPyZmwkobrZp25NFQDOpVRH2xi2+jJ3zEBSmcZFp0RQTFyTuiX2Zrh+mmlEwMyTIxUpvqW/Fwf5ziZwFbHCScZP6vqswBAQRBhD+tF7WIVjgEZVktQggD1ctMWwqJwXMsRuTrdMfa8DVmmBbHCz6eXDS6afeNjjowQyOqykYdxC+roNNmiJRtnQAwbatl4ehydQhRtE7TPTdkf41342JaynVVpOYcjalSW8YRTgMTNsk9JS99VITTu+QtIs5JwuwkurpIFXbWpwfnrlodyFIQpze1XaEV0Lk4hhNTVU67JLLdaWhKBg0LJ7lnL0HylrFYqJ7TE9GTddKwGT8W5Si/XESi4NjIyEEOs7oNlBnHeKsiY+HWY+AqqwV8RK672By98ck20sZtY1RTAK9zWBcnxqp25jjJcWeQXGEYPLYrlFkVyXicbeIfCCHSvA6+avfgblnxL3+3qBxOaoW1uo1GoIigMTCkcFnc+cebUrCSXrCBaR5xTXAzLP4XYqQenxvdlwg3CyoIKydbrPqTNHDQMSj2pXBp0CNKkVB0TsyWo5ighsKILKw8Inp8rKbM7ZfWBmdRoG7T5CxRzxJ1j2K8nRTD4HFtYFY2cR3hs5DzPEbmaNvAmnzoQ6N7uO6VZcDRLReOuuauydnkieFEvQcS1/Oox72KNkOsIYCWhT9xm7kK9na3QF8iMqmKZh9rLAj1CicXnSJ/6TSlpCM6uQhSCpQaIiyN7cTTKgQpEU6/wNv9ltl9ySbS0ayF62qUvT0yNTlpzQfbVL9y7XdZr1SAEocIi4maPCeNJUt09xwCb7eJ8cvcjXTQ38llYwrqWCdNTpNzFOXl1wCq6AufY2niJN3+bHcHmfaEj2QUcLzrLVwVDIe49LjNl1QiFKkNcfieM6DYOjZ8PO5R2EN3uxt3NLzIQGDU2bdfLKXrSWeCTqCC0uNe2SuI2q/WDu0Z0iMt/LM7XqRnGZVQ3VJW5V83ZFGyd5i8aVsNyMjBHlrtXHAeCHnLSaZQmVpxJ+esydtXJpoS1LhzwCSalkEKri6H1hi6J/I18P6YU8Bgd4KjoDS3TddbeIMamjyaIiKGhUOE4yIxjfhA97cDU6s1gKObTnJdd0rwEtB1yZt1Acndxbgh82NKhy7arZL3K0Rm6Gy4HRlEcPHd6xCitUebMqYWu1k/82dMDIyDwXHRJoJoWmk4PLji3J3uKL5iE7oTHKRAkNx+T1X09nxbGYLDlIpyCqoRJIgtGTkoiT9wMcQpR3305G61POWr3OXf+bwhVFQetIsuf0uHphizcSiB/4X/c/I/z2Q31ctkcqrpmwIe+Jp6npu0Ph9qddGi3fe7uZb2RZYRgSyss95JcCmEjRxrRnMteXWg/VQVw7Wn8TWw3fKeTH7eL5jS5HsZQ1LV2CmWlPOUszH7HPXL+1CA8/gFjIN/muwJfb9FItjZ7jQIokjw5wuJjFxpx20vzQWhEQnmbvu12sWPRwrvy4PJ9ukUuFDD7jxKjInduU2gFVxNnTDqXUwxpuLmedqDvUclb6HRaiQ/2310xRTHuTpqsm+IuStteVbbXpUCdn7lK8ORX7+j+F97LQONTC24Mhw32DEJc6iObhYK3dV7Xmi2i7FsBGtfQjLmbz+u2ftfO1nryq7ui+b5dI6ZKNZjhz5McJel4U/N6ythogiut2cVX4aHD8hdpNG+Py68XdDFX+zg0mSCwnCRvHm22z1zqcMCy4NJztNj+rz6vN12CcgguuKep9S+GscA7ipS3m6rR7UMvDmErSX3GK1/IhqNQkyc7f1LP4kH9+6vp6gu16EUZnHLt05eBZG0xxUC4lPE6IqGcmfNx9qgPCY+x/ZnfgS8Sl6Dm+epkaXYcjWRFm7intKJDDQMT2FINkJbGg7hTQrpoqCbyNFd2uhiAjMhqa3v+5A7ILE1H+VRcBzdaUzD9pkXAPCy5mxAwUuN0J5WCI0OnnFLMeLBf3KBa63Sw5REt7stjuryXEu4ym9Ms4eStsRak/EGB9vnDiRcLLG13ls1RFsm7Rem5KIutaPKrv/UfAX0a4qbi/DvH2yf2UTwIy5Rh0roQn8grsav1ItMvi5QQ9ykY9bK48j8JNd5YvLwgNx9eZae/hq1shfG2lk85csrea/Otdc2j0UevBM7IT2AUmRGVKObXQbBWXt1cfYkLtYbcOBMvkjDya5LbZoHHL8RGx9WnsITogtDJsDnj+ygu2iBTfBaFZzwCpTltXljlugmu31nwgfseI8wbFhBTU0BqOmKiDm15h7gVRpulHdZgBd2V58F7z+nwlxr8DtGV1924b0XcTOBcO04RLi66d0aj0vu5p37G4Oy27fR47DswsLfGBtcUQVTaFWFaXdljGVXurdVht39u/p5tfRHzKBowNRkeroNTTDov4qAcX69VQN3senLr96xtJ5qO7FU8L9up/UR75aRp27wi+7WYFuhOH5ytC6aSVdXFLREN3N0TctdvX9tyNw7d2Hg4Wpgm6+KHuHymkavmEIjuDjO3aWwOFuTW9tdCTEF/c2ngEQHPUCzK0rLDt+0WxQttaGAg3F0aY0uHslbfSjK072jO3IRKjvhYmFQ9uanqTUSUhi/5LQazvuWuycf9ODp3sk7sBKcYJdSk0d1HQHtFzlUGENemt16AsorYuzRICeiu/UVUBqIC/RhNFD6YZc/LrAMmwvJ0EnLrZoGrPAA5qNLgzQz79zmDa6PrsL94p7JX4xct7qMvh6LBtwoTrgo1FLTmXYWs1F5vHPZ7UM3ueO25utmwxK3KnhWQ5EC2GY7DfWOPc5dKzniLxtFfkJkg8KHdLysiO5ddPnYq1sP9FDzFOaa0RmqH73oR07wT//0wfaBTRTXNw8BTt5sV1YiL7YXGnAeRbfi2whC1Yy3tuvUKxpfPN0hd0PPsUy3zUf5t7YgydeTUdGArsWmlmqVXKy9u0v89OHZ/TaX6FTnGfHUeSj2/bBDqMaayg+IV6nsQRxdpCHvPdnzxgoT8LY+e+i7Dpk6HWqCWt/PQZk6ZRztYLVd42ZYT7xoqRTqNE5is3FPuXQ+T0kJRO2XV2p6v7hWrKZz8ANxSZGbOenWJGmT0SQS9vMzKID3xLyJj5kunbH7/WVv+Ns7ME0uToNtFEZZLAWq2lzXmrsfNd4wr7tn8vLbjIPo6j453ytnoriNYS9szGp24LA6mIbK0zJ1Y28C+W6ZvDCoDAB9Pyb5D5trIx9synaPJQULMvcmCM82UsyHX1d4nPtRwvYekbnmC306ZGhE6d6XBrnMcL2rUAwkHp2ifFTL+twJ+29Tvyr1f88mqHmaHxHwCN0H794vV42eFkp8aNKE6lEkab9598deWcVQudwwd/1+Z+ISRxypdv/8B8GtgFl7Jh15imLZLw4v+aWHxm7n2qTohisEZXVX6ODu8DbGfVKLK7ENOEfXSGGvigg+9jbpTk/Yfn/IagjIevH+0eTqlV5E701XCrn5fF5NiZa9S8m/PFtSzyjSHVeqKDt3cBf8WNDImfk+AEF2LB0fgBhshWqDcbDYhA6oyCzR7SAvzjMNWK0ZE4YPtTH5+dxE0E4xmfirF0Th0NzoAfX9mg3YV8AM40U+1VRLf/i0k2REi55Ut0e2fzIaO4v5dMMLNjeY6uGimC943YfpaabDx8v7so5N7O1nG0TAvq7430INn7eGctk9J9Hk7QUr1d6q941YpGPu0tw+S5+85EzATqGyd1f+PSIxYhNx3k/2rzDiSqX/h58cXul0qvm5fpZsWzl8ZhrMsSS0eK/cDfN/7F3rmtu6Co1uoLvy/k+7Qc4kdqI4snrOj8hx27l0OtMvGKMFLBZPL7vCiLfRNX5SBaGQvTHarbKQ7VNpUgloBF49GS2HdfjLCyB7W2xVnyb/YYt3w0KNToTxnm8rvFYtrJvMukY3WpbuPSFcfph08LhJOOTChG60I/yrOirrQ82lRiTcKwzyuLPuSOznaxntk0Syqh6vXx4Q+8p9EHYySNZaR0tJVd4x3+7uZbEdb3P1yWgFVP/KLFHgzFyFHCFeyUmA5n1KFp3eq0N6XIdxOgRtjQKvEE80GCLii2kN7VMIXg41Higz9p3ggtoHZbDZlFQqiUTB60iFcg1GtnFf2J/Yqe8mbJD6o0WnkQJyc49qcK7buqFOYzLQKK/gKzRSkS/03Z1swpvWfC+zN5iRhOiEfFY2T7BH+tpalw61tNytzQ8pAnXrFtlvHBve8V0Jb0Ks8gRRq4WdMYb+sGQe+CxjBCvfLwcWmzxvYajxhtz1fxIBdetoLHqyxaJiRyIhJg/OIatA0+XQVW/W/Jbem/xm1cQ6wV16vwVwVbnlOZSra1Ryy3S7KPwH6mwJnrXNLSsWA0sGWLJv/YXYlLzaYIakcQFk67grHDbVYNLHAtwXJhP6s7uoC+9IuSRZF9fmxdCGcuhGFdivNQHEsieU4+5dJ0MY3azAJaYMT0YYAYNDr4i3KTUloMkzy9q6yyzsvZaRhG17bqCUfLrVdgJx1F9Ywky1fuDj4MTbxIT9Y+gQ8m2eZ9zCMF/K09vBDMEMtwN4E1Vp1S0eRtI36wp9i+6SwnbrMIy8JfpLCzg7eBfcMAiqoygvxbS8VtjRN6J/wNsH1rW7Hv6LRSF3fNfj8IpfX/XO0WznhcQqk8v6VqiRt20LWbfL49LqKVUaMg5XpQw6YAisHfjV8r/VwxD+Ymwyuq5ps9crubPNT8kIY4oZjUuJ67B1KW1VMRjH0JeAsFj2/2X3ONXcX1bMbPO6pxU1Pz90Q9a5G+XFOCet32s7+sKgnlSp6p5TukxpclkCeXhUGf5gbqgcqcJsyKs2hBv0g+8XrNOTzloKPUo8TA/yvyoeWH+QBec9PoricBf4l4YzBRnzVV8xymwfFQUFbloh3nHfDVteUvGUJjhLhntU0PDe/VRAwSOEKLhOQXeFjrlb5SHBdI3g1WmNoxg+Pk9cK7/Moj20Bswj3SDntZw/O2dqZcfeWOgsL6+nVW6Jw9aVr+ORvKdxPcGOD0Xp6JGONIMilrryMizsNWbk6C+n5u1kExlhMJtIreHT7Ojc+gupyuGdFpUily4rVJCsaZhqCUgK21NF+t5MeFijNWCjMbYggFupQWm8R4mY9fWWWxTBsIJwgpIAOLXkUDQOxsJe1BqhQW2IBND0UrX5s38KdNZd7/VKsj8oAhFeWDO3hGnB0UEmw8gVGoxIVYIly9uo9MJH81xyv4Ozwm2fSNatq8rl3JvAbH2tZJODL1PxXhlOIlpjQMGT8QyvXEo1e6N/GtQfkGPuP1mX/g7y5MblOMnL/CCHIDO9CSGHKGUMsUQZ6gcy0m/Jv+nzEvkLhQ8pwXwabM5mp0xfclcMkaezV4MZzDQleBsLgwszucxb3RoMPMNHmSzhUeAWGj/Hxjh0vO6P7ecIxRr6F/Su9jBvDcy4yOfYJjVHsZNShhutWeuNCPq+lC6RR7/D9MZlrOSXVZ/0hyzIRiZLks1t/aT+Pb0x1gBZS9AXOSnAv7mVYt/NCPIAK/gAa6p/ZB4Ddz/Jr80kB9on1aGSffZeVFMK3qxq+J2ty6gsr1qljwxwudEIsZj8cRx5uiWvwYFumQyUmFlcswAj/QjHq3ARr9PAhY4NYI9DLRWVCh389aRLKqVSFiTAU323tZUbXw3QUD+WwlBKzMWwFTdHefLmJDjkEKYQ6hy+2xmh3Zs2BrnzczdXcQPNQQQ60R7M3WyWjVclS/LocL5147vY7Z36B/lpPf6Vf3DOEoEG66OlG3qPDLx8MT8/K7+ruu7b7ZWXSCegrwjCLrWHyHDAI6+jIuviZTGl4i2Z4WfJtuu+H7OUrMHrmdprBaUNJVOwUIWHBiRrM2SZbrnztuXzux5pwB5rN4Jz4FXWyDU3/gxtShRLBJDzLvoBTD5FY37O27iys/tyZISHbQi8aDFcMufXlquOlss3bpFlMFcXjLOTNCgPbQ396LqfdFU8MyQTY+JceFO7c55lAoBQr/D1xvA+aNglrn8tzP208fbDjYLPe+15MQfzTx2nGpQHE8QoTF6nkCL5nkquTHCG8fPdJ8/1tmPbUbZcOSfw6yBHSstqjdyIEHLdZLnMx3rrfpF3e4HpUndm6oj2LDBCaIHyMkMuLEqStlYadG0/8/qPH9bdGLeXzlEPs6KC1RRrnXY5Qk4Us9nv7Y0H6XFqHe6RFBg73c3yoaYuvI08cJsyxRApLY5MnLiNxwY728jfv13C9LNQlajwK4VsKmMMeHYlRm/vJcsN0+x3eXtkNrrYGmVjNe5VM2uMWSL6MZ/mZ1hm+b+6eIdSOnQzTG3wsHGxvqlzb48MmKfVZhqc+qcKpH8rkvPuZDMXgglk0Cu6alyHbtM6Zq70RNWGf8kmonXHFClYtj9FYNq091jZ0CJujJkMov/5bj3S8KA6499GJkW/uAPsU3rN/PBXKluMe/AIoqi6KgP75vikElM57/AVjT64uU/5dRfojYpO9Oh+CRvrvx883p/qCK49+uud/jmvN4ehaYZNb9O0rRvt7CvrPl90uLujtW7hNt9idLvoTjdhFlQ2ihnsQai7VHw2UxAZoZmLFLCzyAUM4t0wIMtYYLvYgBeONiM3a5jmE/tuBKcPP7wetsSR5AHaqqe8F2DOGcBO1x0QF/BPOypVFNAuAqlgPqioT31Zh2rgm55SuxiFfRMCBE4mg3PEdc3IaDTYJ2pjivDGeXlWTp41Nng3gEgjWfdZ100K0T7YpMbTNjCHGjTFmuf6jCpAOOIVfUnAK+aTBl7l9MBYf2iIx6XAsWF1gJUYk/RV2WEGgvQIIktGOwvh4FROFubVHUt2VpjHCUYxB+vaqjniwkg2wVVC7tig9RC7LextqxqsgmAmyaJ1KEDz2KXxsxxoY9mE9MB9Me2Y19j5CEObhKdkqGMvhi/+oebXFa4jOprFTJEeY/D5owvzAFD7nEo8F+dY4JBd2ImfbauwkLwUCa5qaxIe8PthGG/7D5qhpvCkYQqRN77+aud1UeWSBxSZYZGL5aJMeQejQl/kSWby4etTwX9IAAAVm0lEQVTOKLoWK5MyiyoWy4q8QoT4EmCDpijdYTbWgvzxINOL0GORIZsFSrCVLQi6fA4yhgCOFYW68jtP4OEXGJqKrSnypJ9bAkU1tNaL7DFahC4My9nbPGYa7E2IdzMOqRQVsufDn4k2ruoVWsp2g+gi4CkvJirtjvUmosNd2ZHEW60TmTrJTLktD7wW0ceW9KDDyX1XGnNUnEKaPhaIN3h2xBtaok2f3L2vE8fg4+TWzXjYupR+dGkUB3t663o8Xmixusu6EcCd3rpw2Hexz7oXAa6c2rgqm+MKCqbXumKKrShyeBpQZXtc5910ku/yHEyc8UlWlQcmerupjVabk/vuwGiO61SHl7MqnR+w7vGH12LuiiZKzLZj8ah1w0BX0fRuNsiI+dzWHVi70x13M547Fybf9QO+2/k90jn/s+7/y7rq5DINKgy0Z3pztYv61o1U+7BMHvDdAev2bppKbhrfHaue5wFKR7eMeUE8t+/mgbirezdeFTRnR2SHX3/qHoUoeG7McBmwbnkrxNmIIaf23ctAFUc6kXrvA54d74rj7t5btFR4cjpOdkdrZEp2wyyF06z9Guu4h+PW9d1KGWmeOsMY3g3dQfQeTHN3J644I07tu9IcHYWMQfRChrNXcS4R8sG+bQjdgEyZc2cTlwLioHVz6JYuju701vUHeWQhd/tusieX6E5CyGOB1x+Q3Xbu7NY9Gni9gQOI7NzWJfQKh6yrhO3Gu1lPU2cYQ2Rk3dv28F5/zP3noNDTjP0M6uJkcfBYI2fvDdSA04xbDs5NBG8P8fQS9O+dEqfX4I3ChiOBV/Vj2PKbWIv/sXcti42sOtA0CIl+0f//tRfacWYyRhJO+y4OFtvJZFFRS1V6Rnipg3fr/9on+vjt3Fvxo6+gu4buY4o74MeviJ2J1hfC2h66g9qM8PHoLgT7C+i6/r2kzm5OFO9IryQh+w/ebxTG6dH77ZbNet2g3/G+IG5LUBsnQ/bbrfKbe+Vc9dK/wMwlzB9vu3VnZv/Pu9Q9Wh2Trb8o6Drqr8/8s3lXCWq2s/9Wz/72tn/Ug2rdHufDG3EeWrhbrU3zcaTOv8QGaI6h3gKF3knshY4jdJJj94u1ySO+Qho6iakr4PZiFkcYVnvDXcsFeuNPvRsc1s4vYoT04xtusmbCTrXm6rqspdOJjBDU3mC79dRfH7pzOgL0JQ9WsOOA97dTpwCbiw9JfZTMYbBlb3c7i2np27hwriftcrw/VvR99Kslmj50E0Dq68klTEbIvmwX+hwvJdhj6GFa2dZl/YlA0JebqRw2dg1UzWDXv75Roz61Fgny3jXivtNYCbILdy2962xWJIR1TT2VtdGOWl65ybq4vhYQqMtCKHTMVsfBgtqVm6wlrHW1jVKNfnvQL/fkiM72cn+DAV2NjefF7D3o3ThD1dQuP0ddTbnFduvlnqh6hjlZo8jfIqwL3cKL/W3p8Lt2qflHWOvrbCRw221C/S/xi3OOI+sJ19WV62pUW/Wo5kdqFLnMGU7H24FuSsXCi9/Vfv94NbUrfPfeq9fpGdYQNdtdELPZ7g/l2rEXINaNpxPOWlTbEYzt/u14CTtcAyS31h5TLdEAgSy5+ze60NP1RZW4zYGUkOVTsPTjD0AcdWhhqJyhMDLF78YQTKn9DGuxQwunuiW9oKv4XRcwG6I/GW/HNtOz8WFSOQMFC2r/hrWOVcQJi/tQ0fUpDDendo2R3bbYEdaw3v6YgtKRmgccvr6mJm6bS3p7R0rF5a5B8SFzGK8/76Lt3paoLn7zqWq1JShNfWOs6n/v20ntYSroxpuePYcQDc4nHqXOOXhK0d+2IBt5Rjto2figUdMA23nqbjnkrrMpJOvPe1ZYoO2E3BBcvq2HvDuzuF1Dt8V4FX+ZQ6387Ifc/AAW1JqOVztlu2G9jjuhXFdL6MarqV1lZOdwpFNkQvUMWc6RbSEMiO5FNVE5WVKG0iu6/rbivMtaYkDKcN12s+Z4t0S1JiwrYQjJCFnb8cpdCBNC+YFNzu8mK7YzHzXKeqJYbcxa1TKYUmPQUxjvdGYYJnS7xNoM3fZbQN5kM2F0NdsgcYY1oDWds45Xcg3LyXQX0e/GkKymxqErpm7hrKgVjAX8MMDAjSIXGFn96GuaRlJhp2KT0R2t2H5xTvivRyhVhu9HkVaJ767jOYa32W7dOuokurvc0eV/ZglgWoIHEPmmka/0zSrVJugXd+E/5nlKvFOl+7LiLKDri1KzVgZeriWKglM+sw3Cvu1cgpqhy0clJMc4zu3r6P108BdQFjS2K6FLidO5K9zrbhufBPN7IKv68G9baGbw2QH9PZPA1nwz9e+P/e/Sst/bj9+RY7OPZcUL7xlWDPOY6L5FTZy3eSKHLnzZLutbp+5Tw59pu/XCMpPJeUz4raxg8NOHn7hVX3aJSYHFcEe3MDJGq23RlJomhhPTWh6/qCzf6ZTdEW2AVdYTXAoMgjtdxn5waiKjoaumGhjbfZxe5m13PQ6r+sjPMUXJ/BDAmVXCyzHsJNWbOMNtZpI086O1ceEuXHs3rlJ7E9+tcz1T2+1+2TTfnxsxTma70tvDV/B6drtfPtWzniElZ0FNlGqc6a7fLNcHRgmXcGfpRzmmIdMwQt+5m5UTZEtI1soguheuDXIK4dFIMnFl+T2RKTUpyVBCV/vbngvZyt8m2gaR0PYGCK9QqsQ4znh85xYnrpcpJdsbIFFdYNUA/ZG/09Fes+lx4A1vb2BkDpGL+en4JrkF3fbvTwOje11NLMTvfo3fQa2YcfsowjryXfHLtpuL6W68WX93kYSjfdlySpY6F7xuFIbc3Z8tTcdBnFQzussTBhJuHcz46LFhj7MPHdUuoxulear9ewTQcW2SW7JOESGmSTWx4lS/MCWO1WazXYGOJWnwf/mWEHz7s6HLvwjSpvLpkSLz7NQJXys2RuZJPtD+ILOOr/uM3KF3VU2QPCSMX+gi26A7p4E79C7a7i6jm+EuFRZ+gt2B7Xjj/a44gj3B3XaFGes52dYL1jhJjEn+y++mwI4SuwBWVeMoVxQnsPM9ibAif6UjBjTP8CtCVhcbL6d98hnyaIsZuLcVdCXL2+CkWxiAtfA5jXfJ8g1XQ89fQ0kkZCWqzXWIVSAW+ra4/zjN/T3fXZTjixtV251R+PgjQjbbbX/WGMT/tJwT2CRMYt4UsffJj3R041n1XQXCnIwzcFkGGd16L7uS3llE14Bsg6dBM9UbqxsKHQu+nhS11473SvbwPEcXpa3Ri6HLul3QlEDNrRMK5YuNDF1eqclcNafid1HanzkNvZD7SgayKDWlwS5H2GtZgv+p1eHAS/SuqImiFUBGd4mwzOIkpaeQVrPdlt1BUnSWj1DEspPgi4dVLbnvXlm4sgHuSVxW5umw0+0MMlpdYYJEylVcV9A1sdaWaqDjT7voPWZDl/O7GlctnoEW2TUvx6irL66imzSuuhatsMvY7UcYd1ztEmdQTyVuVad5Bd2BO0yv8N1Vv4hGKKfXb34+cM5muy2dqy0rL7arnF/b3JGiHVxs8l3N73rQ6ukZCro2r9aye9KEwKaiu9JhY8Lcd08qZ0DF/ueAxnfbWQSNM3gHWn6xVi7MM7S96q7hD2ofUwCLak2ZRagwsrUDXaRojKzlM52aPHRJQ9eHgT3DFTXhnSazcgStauYTjBvVLvWek7byOc+E2i9J0bI4zXAfUenK3zr69hFm4wytB0FbC0IJOjiDoduMWQG1mnBHVANbmNV8u7ba1RNqPXhbANNqbTqrHZDJOro3tKjGoqv0kQGqnAFp3Kh2iZF5VL7qNaag2W5hZMNqtWud/fJhtfMORYcSttoEgwzK5fSszASdtkvGdxlklMLaGnU1kcDZ4ERbLKCSgSG9bz9FQ5dNNIjortDhdyEaum2xlpQ2vagqYY9kWo0BD5MY1ZaEqhLGZJ6Bs11cNK2m8o4xtdobrobOpIyl6LZb+e6IeYY3zAmf037Sv6eAmmEGGHKn0xts14NMeKeYPhXdN7zNyf3RPqr7ASa0teccuiR3Mk369oUl2AmlX5KGqVA2BV2HdkKJJbzyTqcc1e+egrld1jUoTaZR7dt3tnRIMD15lx4eh9wevcLIw4AXNxWu8oYGX9CV92PMgANnd69u2dxJyjSs4VBGKec08Jjw5Z39C4llYTrYbfIPdMnq7fxfR5xM2aDYbjBC9tu34CHoifVEN0umb4RM8rsFPp5yrcUzBIkUzBhsf4CAbolbwuYQCsV2nUTo0FLnAisonIu3vgwFXYkRF6U8MrqX7/wU/Pion1MxXSGN5ktQG3kk5fKNqlgo1yZGNaFRr2Py4rNtd0IZ3WK7vF7YI1qW4SaK3cB/3Bmq6fJ6Y09oXU4iunBA9jwjK+jyggG0EfiPRzcyR/8efDcCnwLuaJ7+8DcHIU9TPIPj93KvEU2pKYw3HGw3U81AUmD3akWyoKa8DXjXUNREQJ7wxji4233DxdvCeB3rlFMgXqzR6Fdorl+8rZeCueEITwkXFNClm9mu8isCOxRYbJfq7ASnNSy5qz8KXBpxrSesIpdfnygYuupbAndnKp/oIvOvMwRLP+qsIXD1h2KdVI8Krxy6Rsh6Ug1hbce12iO5c/u7I1iWoYeTFdeQ23y38IWFmZ2o1yosy9Aj10KYmgg6cLX+0PS7C6TR2x/fwMjqbhumXSy75AqlaKPrAEfvZXiDmridC6Cb9bGtcgZiBoMgDZ9leIvt3nKJa7tvqQmsnqF9N4Esdd75dgyt7TYLIBR0m7MTOQ14t+7/8zIEaqRy6mZuzu9mTGTo9sW1HVvtdueWU2prNZesQa/bf4fWbdW1mDR3F9QRWJNTt2vAVp909btzs4HaR4BRg9qbrob+wWpzAUIL3WK7zfSvp3Edw5su3v4F1hIaY5VFjkFFt2Gk9UiNN9vtVcOIz+JgrbWddlHYFR1sQa3b8abwHNZ84bR+Si10d+NjL7w61PpUafBQK2fNAk9xu6bUXmC84XnTxQYA3rdm2rbEVSzstd4SwlN3QgZIdcX0c5fkRKYlXgqUxfH+2/KUYywqeIfnVacLgB3xeCWsUXiaGV6A0BcLfp4F3uET5oOndzGyetvjabxnjXUUc8Pn/S4O4APQfZeaqIb6v/aubDluHAYOSVw8pf//2gVkeyNx5CRUybW1M4RTrlzlhzYMoEGgEaGfT/AiGhnCybyDouun747wCVmhIwiBCJdH5qd5keJkJrXRmgw6yBbclrSfJTKSwzkoMpjXeO1eG7Tetc55hJ6XSYwT3dG8tnZOWiJab5egK3jrHGUYN6VrxyK2IFrzoYF0aQ25TR48mtdi57ua1Ux1yAN+FRNLTpS8cHTv4Ls31gybcOExrVXZxDEKfz5plkSCiLSu7zGfd2O9u639dqgpEzYioa4aqm9OCJkjR0X3Ld7UbvXdh+dOLkBwQzcqoqK1b2TAlp367hQOuBJ4uzlp58ic2QFAVIjxYxB1UZBnUhsPvKlDV4sGy2fK1tRd5WvIlwDmbZ8rNdnhsnjICJusfI3RgsGyLHXxdfmTSNm0b0IDAiOKFQYaatlc1h4swuI0rnPUnMYsrL+fXOJK1YCreqsyNAWWLZMBfAyeZ5Nw0Y/N1HcnVNfI8JrEWVmrH8m3+DmkS8DJudZyppzhXbZR7q3ItsCrCJZQyqP6+gjtU0Uz7t8tnLT3eLG8lU08tsXLg1/6jwnIfJDci+9y/vpu312ke1zLbA9oHve3wjSzzax2kQwf0S1ksyJtLz0UgGVWZJfMdcN6CndcguwDQ2Cc+8HXjLAb1kvCrh26OwHmDNlFS/35FLspzIcxnaq+O6ecrrE16e601mZCpvtH4coy0b0aeLF7GPbQScsvEeU9sLi7IjOq0M0wmfj5QV2kML7JdOndbOKDPxzhhu6hp6jv+um7174ixYNAngbi9TjbX5Bo1gwX+QQd53gdRokHEWOPM6tdtgaHSRCNwz5G3i1p+zjRvR4aDmGgkricKe5moOw5aKJ7zXM17O7pRHHJ+UL7dauFcB65vRZ1lToIHdB1KVfTEan7evfls5q/dRvwK8ryynKobsnQzbLXMX6HjZRbN1m/DAEF95tVVYh8eDTctR+Q8TF994IBODn4bhWXWrXmzq9c952Wy7Q/hF1g13DPJoIItWXbGP73b1uMs8F7wTLE5o8dXqUOTj1V5Je/1pcX3v0ZcyApHDu8TuH1mwr3r2hAU87pim16pQj7u/dZNq0At/fojFOs/4KJqb4R7AfLS4oRyqPuiwbTIpOJ1qilyM3Q3ZcfC2mYLeWw6Z6J4Q3o2s0dyKZEoTqmw2R5SUmZmtvXCTXhO0yf38wmQrIhyLXbF06EMcmhCvOyQpi+O1qSuWgzjt3gfiatcA8C/Roo1hl5h6064Cd0q0Ponio9rjAbZRfcV+BpL7gJdwdpbKs4TbCGbdHM1s/nVtFwcWS/Pn6jejzt95QC5ERLpHt2t6uL80LVJXRP9DPlaZw/a7CYNcN44IUTVRabalj678Krr/7cPy2yNcpO8pWiiz3gMK8ojX/NM3Qrr72UYYnAM6+NWjk9Li4An2wt1OJbSi7BCpNRDNPhM3QrAqBWuNUnJcbbsmDUnxeYfd5xdOkkXGhJpjUvSWRm28lWhBXd2ecdRVf4WfixgsYBQ1iRbVmjw6MuzabS2wy9Y5ZOBAI+fXeF/PlPQa0mBvTTe8dKMo65hyxEjcaI2zZb8I1IIwMm045sy8vC+xMVmcm7pRLCUpalBv0UPpgZlIx2/xZtSyVGQRGLvOJfNrP9BJuw0BATOUEU0g8k17IpdwtFm0M3aJMTrcmcNXdWznX67hCfAK26tC6IIuaiDjdRhmjgrjby4DWn6X/zzWmhtsbZihziEyw5kTjnUjN0xfSGFFdmk8A4fBe9Qg5TcXPE6u6VJwT7lbcWZF6cbLMju2xXSpxnhQfRfT7tUwSo6meivj1JJ+XxtN/wiXjynt7YGpOkUbgXNEWckWGMrZ0kKraH+KZVRO7rtxl3h4xO0FXINeQGTXJP6L7q6YmfqcgeBCdbPRoa3OOBT7cQIrzqCcafYRM2rff8+BNYednD9CB7dGX67og1Pgu8wlESYp/EmOdi61gfR2nvSfeA4kbXoIQQdtQjplmRDVnkePL649MmXrgyI7nsl7qUuhBMDaJR58VTDYaQm1vho5Fjbz8oyoN5thlGzSm8p3qEQd3XSZK4iULqH+Y42QUyTNbLjeScL+FY9qINP9ZaC7WUWvv/ZzS//oXdG/1qNvdkCwGRki9fIAZifuWy9lu7mQ5n0vDw+fMf2TqRRJQcM71YFvsPfHfz3/AI6sOmdqylGG8vPgr2PMZ6qy02faMoO6GINMH9kUT3WELQZHb5C/wDRRtmK2+e2IYAAAAASUVORK5CYII=';
								}),
								e
							);
						})();
						t.FillImageData = r;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ScreenLineStyle = t.FillPatternType = t.FillPattern = void 0);
						var r,
							i = n(7),
							o = n(2),
							a = (function () {
								function e() {
									this.Patterns = new Map();
								}
								return (
									Object.defineProperty(e, 'Instance', {
										get: function () {
											return e.instance || (e.instance = new e()), e.instance;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.Prepare = function () {
										var e = this;
										this.renderFlyScreen(function (t) {
											return e.Patterns.set(r.FlyScreen, t);
										}),
											this.renderHighlightFlyScreen(function (t) {
												return e.Patterns.set(r.FlyScreenHighlight, t);
											}),
											this.renderBrick(function (t) {
												return e.Patterns.set(r.Brick, t);
											}),
											this.renderHighlightBrick(function (t) {
												return e.Patterns.set(r.BrickHighlight, t);
											}),
											this.renderManImage(function (t) {
												return e.Patterns.set(r.Man, t);
											}),
											this.renderWomenImage(function (t) {
												return e.Patterns.set(r.Woman, t);
											});
									}),
									(e.prototype.renderFlyScreen = function (e, t) {
										var n = document.createElement('canvas');
										(n.width = 13), (n.height = 13);
										var r = n.getContext('2d');
										void 0 !== t && ((r.fillStyle = t), r.fillRect(0, 0, 13, 13)),
											(r.lineWidth = i.DrawParams.Ins.screenLineWidth),
											r.moveTo(0, 0),
											r.lineTo(13, 13),
											r.moveTo(13, 0),
											r.lineTo(0, 13),
											r.stroke();
										var o = new Image();
										(o.onload = function () {
											return e(o);
										}),
											(o.src = n.toDataURL());
									}),
									(e.prototype.renderHighlightFlyScreen = function (e) {
										this.renderFlyScreen(e, o.ShapeColor.barHighlight);
									}),
									(e.prototype.renderBrick = function (e, t) {
										void 0 === t && (t = o.ShapeColor.brick);
										var n = 240,
											r = 160,
											i = document.createElement('canvas');
										(i.width = n), (i.height = r);
										var a = i.getContext('2d');
										(a.fillStyle = t),
											a.fillRect(0, 0, n, r),
											(a.lineWidth = 2),
											a.moveTo(0, 0),
											a.lineTo(n, 0),
											a.moveTo(120, 0),
											a.lineTo(120, 79),
											a.moveTo(121, 0),
											a.lineTo(121, 79),
											a.moveTo(0, 79),
											a.lineTo(n, 79),
											a.moveTo(0, 80),
											a.lineTo(n, 80),
											a.moveTo(0, 80),
											a.lineTo(0, 159),
											a.moveTo(n, 80),
											a.lineTo(n, 159),
											a.moveTo(0, 159),
											a.lineTo(n, 159),
											(a.strokeStyle = 'rgba(0, 0, 0, 0.6)'),
											a.stroke();
										var s = new Image();
										(s.onload = function () {
											return e(s);
										}),
											(s.src = i.toDataURL());
									}),
									(e.prototype.renderHighlightBrick = function (e) {
										this.renderBrick(e, o.ShapeColor.barHighlight);
									}),
									(e.prototype.renderManImage = function (e) {
										if (!this.Patterns.get(r.Man)) {
											var t = new Image();
											(t.onload = function () {
												return e(t);
											}),
												(t.src = o.FillImageData.Instance.getManData());
										}
									}),
									(e.prototype.renderWomenImage = function (e) {
										if (!this.Patterns.get(r.Woman)) {
											var t = new Image();
											(t.onload = function () {
												return e(t);
											}),
												(t.src = o.FillImageData.Instance.getWomanData());
										}
									}),
									e
								);
							})();
						(t.FillPattern = a),
							(function (e) {
								(e.FlyScreen = 'flyscreen'),
									(e.FlyScreenHighlight = 'flyscreen_highlight'),
									(e.Brick = 'brick'),
									(e.BrickHighlight = 'brick_highlight'),
									(e.Man = 'man'),
									(e.Woman = 'woman');
							})((r = t.FillPatternType || (t.FillPatternType = {}))),
							(function (e) {
								(e[(e.Fine = 0)] = 'Fine'),
									(e[(e.Medium = 1)] = 'Medium'),
									(e[(e.Coarse = 2)] = 'Coarse');
							})(t.ScreenLineStyle || (t.ScreenLineStyle = {}));
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SystemParam = void 0);
						var r = (function () {
							function e() {}
							return (
								Object.defineProperty(e, 'isMobileDevice', {
									get: function () {
										var e = navigator.userAgent.toLowerCase(),
											t = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e),
											n =
												/Macintosh/i.test(e) &&
												!!navigator.maxTouchPoints &&
												navigator.maxTouchPoints > 1;
										return t || n;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e, 'supportsPassive', {
									get: function () {
										var e = !1;
										try {
											var t = Object.defineProperty({}, 'passive', {
													get: function () {
														e = !0;
													},
												}),
												n = function () {};
											window.addEventListener('testPassive', n, t),
												window.removeEventListener('testPassive', n, t);
										} catch (e) {}
										return e;
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.SystemParam = r;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__values) ||
							function (e) {
								var t = 'function' == typeof Symbol && Symbol.iterator,
									n = t && e[t],
									r = 0;
								if (n) return n.call(e);
								if (e && 'number' == typeof e.length)
									return {
										next: function () {
											return (
												e && r >= e.length && (e = void 0),
												{
													value: e && e[r++],
													done: !e,
												}
											);
										},
									};
								throw new TypeError(
									t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
								);
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EdgeDock =
								t.EndpointDock =
								t.BarPositionType =
								t.CCDockType =
								t.Dock =
								t.DockType =
									void 0);
						var i,
							o = n(1);
						!(function (e) {
							(e[(e.None = 0)] = 'None'),
								(e[(e.Frame = 1)] = 'Frame'),
								(e[(e.Mullion = 2)] = 'Mullion'),
								(e[(e.Sash = 3)] = 'Sash');
						})((i = t.DockType || (t.DockType = {})));
						var a,
							s,
							l = (function () {
								function e(e, t) {
									void 0 === e && (e = i.None), (this.type = e), (this.id = t);
								}
								return (
									(e.None = function () {
										return new e();
									}),
									(e.Frame = function (t) {
										return new e(i.Frame, t);
									}),
									(e.Mullion = function (t) {
										return new e(i.Mullion, t);
									}),
									(e.Sash = function () {
										return new e(i.Sash);
									}),
									(e.prototype.clone = function () {
										return new e(this.type, this.id ? this.id.clone() : void 0);
									}),
									(e.prototype.equalTo = function (e) {
										return (
											this.type === e.type &&
											(void 0 !== this.id && void 0 !== e.id
												? this.id.equalTo(e.id)
												: this.id === e.id)
										);
									}),
									(e.prototype.toCCDockTypeSimple = function () {
										return this.type === i.None
											? a.None
											: this.type === i.Frame
											? a.Frame
											: a.Mullion;
									}),
									(e.prototype.toCCDockTypeSlide = function (e) {
										var t = this.dockBar(e),
											n = t ? t.type : void 0;
										return this.type === i.None
											? a.None
											: n === o.ShapeType.SideTrack
											? a.SideTrack
											: n === o.ShapeType.DoubleSideTrack
											? a.DoubleSideTrack
											: n === o.ShapeType.UpTrack
											? a.UpTrack
											: n === o.ShapeType.FixedUpTrack
											? a.FixedUpTrack
											: n === o.ShapeType.DownTrack
											? a.DownTrack
											: n === o.ShapeType.FixedDownTrack
											? a.FixedDownTrack
											: n === o.ShapeType.UpDownTrack
											? a.UpDownTrack
											: this.type === i.Frame
											? a.Frame
											: a.Mullion;
									}),
									(e.prototype.dockBar = function (e) {
										if (void 0 !== this.id) return e.findBarByPolyId(this.id);
									}),
									e
								);
							})();
						(t.Dock = l),
							(function (e) {
								(e[(e.None = 0)] = 'None'),
									(e[(e.Frame = 1)] = 'Frame'),
									(e[(e.Mullion = 2)] = 'Mullion'),
									(e[(e.UpTrack = 3)] = 'UpTrack'),
									(e[(e.FixedUpTrack = 4)] = 'FixedUpTrack'),
									(e[(e.DownTrack = 5)] = 'DownTrack'),
									(e[(e.FixedDownTrack = 6)] = 'FixedDownTrack'),
									(e[(e.UpDownTrack = 7)] = 'UpDownTrack'),
									(e[(e.SideTrack = 8)] = 'SideTrack'),
									(e[(e.DoubleSideTrack = 9)] = 'DoubleSideTrack');
							})((a = t.CCDockType || (t.CCDockType = {}))),
							(function (e) {
								(e[(e.NoneNone = 0)] = 'NoneNone'),
									(e[(e.NoneFrame = 1)] = 'NoneFrame'),
									(e[(e.NoneMullion = 2)] = 'NoneMullion'),
									(e[(e.FrameFrame = 3)] = 'FrameFrame'),
									(e[(e.FrameMullion = 4)] = 'FrameMullion'),
									(e[(e.MullionMullion = 5)] = 'MullionMullion'),
									(e[(e.SideTrackSideTrack = 6)] = 'SideTrackSideTrack'),
									(e[(e.SideTrackFrame = 7)] = 'SideTrackFrame'),
									(e[(e.SideTrackMullion = 8)] = 'SideTrackMullion'),
									(e[(e.UpTrackFrame = 9)] = 'UpTrackFrame'),
									(e[(e.UpTrackMullion = 10)] = 'UpTrackMullion'),
									(e[(e.UpTrackDownTrack = 11)] = 'UpTrackDownTrack'),
									(e[(e.DownTrackFrame = 12)] = 'DownTrackFrame'),
									(e[(e.FixedUpTrackFrame = 13)] = 'FixedUpTrackFrame'),
									(e[(e.FixedUpTrackMullion = 14)] = 'FixedUpTrackMullion'),
									(e[(e.FixedUpTrackDownTrack = 15)] = 'FixedUpTrackDownTrack'),
									(e[(e.FixedUpTrackFixedDownTrack = 16)] = 'FixedUpTrackFixedDownTrack'),
									(e[(e.FixedDownTrackFrame = 17)] = 'FixedDownTrackFrame'),
									(e[(e.FixedDownTrackMullion = 18)] = 'FixedDownTrackMullion'),
									(e[(e.FixedDownTrackUpTrack = 19)] = 'FixedDownTrackUpTrack'),
									(e[(e.UpTrackUpDownTrack = 20)] = 'UpTrackUpDownTrack'),
									(e[(e.UpDownTrackUpDownTrack = 21)] = 'UpDownTrackUpDownTrack'),
									(e[(e.DownTrackUpDownTrack = 22)] = 'DownTrackUpDownTrack'),
									(e[(e.FixedDownTrackUpDownTrack = 23)] = 'FixedDownTrackUpDownTrack'),
									(e[(e.FixedUpTrackUpDownTrack = 24)] = 'FixedUpTrackUpDownTrack'),
									(e[(e.SideTrackNone = 25)] = 'SideTrackNone'),
									(e[(e.DoubleSideTrackSideTrack = 26)] = 'DoubleSideTrackSideTrack'),
									(e[(e.DoubleSideTrackFrame = 27)] = 'DoubleSideTrackFrame'),
									(e[(e.DoubleSideTrackMullion = 28)] = 'DoubleSideTrackMullion'),
									(e[(e.DoubleSideTrackNone = 29)] = 'DoubleSideTrackNone'),
									(e[(e.DoubleSideTrackDoubleSideTrack = 30)] = 'DoubleSideTrackDoubleSideTrack'),
									(e[(e.NoneFixedUpTrack = 31)] = 'NoneFixedUpTrack'),
									(e[(e.NoneUpTrack = 32)] = 'NoneUpTrack');
							})((s = t.BarPositionType || (t.BarPositionType = {})));
						var h = (function () {
							function e(e, t) {
								void 0 === e && (e = new l()),
									void 0 === t && (t = new l()),
									(this.stDock = e),
									(this.etDock = t);
							}
							return (
								Object.defineProperty(e.prototype, 'posTypesMap', {
									get: function () {
										return new Map([
											[s.NoneNone, [a.None, a.None]],
											[s.NoneFrame, [a.None, a.Frame]],
											[s.NoneMullion, [a.None, a.Mullion]],
											[s.FrameFrame, [a.Frame, a.Frame]],
											[s.FrameMullion, [a.Frame, a.Mullion]],
											[s.MullionMullion, [a.Mullion, a.Mullion]],
											[s.SideTrackSideTrack, [a.SideTrack, a.SideTrack]],
											[s.SideTrackFrame, [a.SideTrack, a.Frame]],
											[s.SideTrackMullion, [a.SideTrack, a.Mullion]],
											[s.UpTrackDownTrack, [a.UpTrack, a.DownTrack]],
											[s.UpTrackFrame, [a.UpTrack, a.Frame]],
											[s.UpTrackMullion, [a.UpTrack, a.Mullion]],
											[s.FixedUpTrackFrame, [a.FixedUpTrack, a.Frame]],
											[s.FixedUpTrackMullion, [a.FixedUpTrack, a.Mullion]],
											[s.FixedUpTrackDownTrack, [a.FixedUpTrack, a.DownTrack]],
											[s.FixedUpTrackFixedDownTrack, [a.FixedUpTrack, a.FixedDownTrack]],
											[s.DownTrackFrame, [a.DownTrack, a.Frame]],
											[s.FixedDownTrackFrame, [a.FixedDownTrack, a.Frame]],
											[s.FixedDownTrackMullion, [a.FixedDownTrack, a.Mullion]],
											[s.FixedDownTrackUpTrack, [a.FixedDownTrack, a.UpTrack]],
											[s.UpTrackUpDownTrack, [a.UpTrack, a.UpDownTrack]],
											[s.UpDownTrackUpDownTrack, [a.UpDownTrack, a.UpDownTrack]],
											[s.DownTrackUpDownTrack, [a.DownTrack, a.UpDownTrack]],
											[s.FixedDownTrackUpDownTrack, [a.FixedDownTrack, a.UpDownTrack]],
											[s.FixedUpTrackUpDownTrack, [a.FixedUpTrack, a.UpDownTrack]],
											[s.SideTrackNone, [a.SideTrack, a.None]],
											[s.DoubleSideTrackSideTrack, [a.DoubleSideTrack, a.SideTrack]],
											[s.DoubleSideTrackFrame, [a.DoubleSideTrack, a.Frame]],
											[s.DoubleSideTrackMullion, [a.DoubleSideTrack, a.Mullion]],
											[s.DoubleSideTrackNone, [a.DoubleSideTrack, a.None]],
											[s.DoubleSideTrackDoubleSideTrack, [a.DoubleSideTrack, a.DoubleSideTrack]],
											[s.NoneFixedUpTrack, [a.None, a.FixedUpTrack]],
											[s.NoneUpTrack, [a.None, a.UpTrack]],
										]);
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.clone = function () {
									var t = new e();
									return (t.stDock = this.stDock.clone()), (t.etDock = this.etDock.clone()), t;
								}),
								(e.prototype.setDock = function (e, t) {
									e ? (this.stDock = t) : (this.etDock = t);
								}),
								(e.prototype.posType = function (e) {
									var t, n, i, o;
									void 0 === e
										? ((i = this.stDock.toCCDockTypeSimple()),
										  (o = this.etDock.toCCDockTypeSimple()))
										: ((i = this.stDock.toCCDockTypeSlide(e)),
										  (o = this.etDock.toCCDockTypeSlide(e)));
									try {
										for (var a = r(this.posTypesMap), l = a.next(); !l.done; l = a.next()) {
											var h = l.value,
												c = [i, o].sort(),
												u = h[1].sort();
											if (c[0] === u[0] && c[1] === u[1]) return h[0];
										}
									} catch (e) {
										t = {
											error: e,
										};
									} finally {
										try {
											l && !l.done && (n = a.return) && n.call(a);
										} finally {
											if (t) throw t.error;
										}
									}
									return s.NoneNone;
								}),
								e
							);
						})();
						t.EndpointDock = h;
						var c = (function () {
							function e() {
								this.docks = [];
							}
							return (
								(e.prototype.clone = function () {
									var t = new e();
									return (
										this.docks.forEach(function (e, n) {
											return (t.docks[n] = e);
										}),
										t
									);
								}),
								e
							);
						})();
						t.EdgeDock = c;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.GlassSpec = void 0);
						var o = (function () {
							function e() {
								(this.spec = ''),
									(this.thickness = 0),
									(this.technics = []),
									(this.techMargin = {
										width: 0,
										height: 0,
									}),
									(this.meterWeight = 0);
							}
							return (
								(e.prototype.clone = function () {
									var t = new e();
									return (
										(t.spec = this.spec),
										(t.thickness = this.thickness),
										(t.technics = i(this.technics)),
										(t.techMargin.width = this.techMargin.width),
										(t.techMargin.height = this.techMargin.height),
										(t.meterWeight = this.meterWeight),
										(t.name = this.name),
										(t.customText = this.customText),
										(t.id = this.id),
										(t.customAttrs = this.customAttrs),
										t
									);
								}),
								(e.prototype.toJSON = function () {
									return {
										sp: this.spec,
										th: this.thickness,
										te: this.technics,
										tm: this.techMargin,
										mw: this.meterWeight,
										na: this.name,
										ct: this.customText,
										id: this.id,
										ca: this.customAttrs,
									};
								}),
								(e.prototype.deserialize = function (e) {
									'string' == typeof e ? (this.spec = e) : e.spec && (this.spec = e.spec),
										e.technics && (this.technics = e.technics),
										e.additionMargin && (this.techMargin = e.additionMargin),
										e.name && (this.name = e.name),
										void 0 !== e.sp && (this.spec = e.sp),
										void 0 !== e.th && (this.thickness = e.th),
										void 0 !== e.te && (this.technics = e.te),
										void 0 !== e.tm && (this.techMargin = e.tm),
										void 0 !== e.na && (this.name = e.na),
										void 0 !== e.mw && (this.meterWeight = e.mw),
										void 0 !== e.ct && (this.customText = e.ct),
										void 0 !== e.id && (this.id = e.id),
										void 0 !== e.ca && (this.customAttrs = e.ca);
								}),
								e
							);
						})();
						t.GlassSpec = o;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DimCraft = void 0);
						var i = r(n(56)),
							o = r(n(0)),
							a = n(83),
							s = n(108),
							l = n(121),
							h = n(2),
							c = n(1),
							u = (function () {
								function e() {}
								return (
									(e.create = function (t, n) {
										var r = new i.default.Shape({
											sceneFunc: e.sceneFunc,
											hitFunc: e.hitFunc,
											stroke: 'black',
											strokeWidth: a.DrawParams.Ins.strokeWidth,
											draggable: !1,
										});
										return (
											r.setAttr('data', {
												segs: t,
												stroke: 'black',
											}),
											r.setAttr('view', n),
											r
										);
									}),
									(e.hitFunc = function (t, n) {
										if (e.canDraw) {
											var r = n.attrs.data.segs;
											if (r && 0 !== r.length) {
												t.font = a.DrawParams.Ins.numFont;
												var i = r[2],
													s = i.length,
													l = Math.round(10 * s) / 10,
													u = t.measureText(l),
													p = a.DrawParams.Ins.dimFontH,
													f = n.attrs.data,
													d = i.middle();
												d = d.translate(-u.width / 2, p / 2);
												var g = 80;
												f.dimInfo.type === c.DimType.InnerSpace && (g = 20);
												var y = o.default.segment(i.start, i.end).tangentInStart(),
													m = o.default.point(d.x + u.width / 2, d.y - p / 2),
													v = h.Utils.applyMatrixMultiply([
														o.default.matrix(1, 0, 0, 1, -m.x, -m.y),
														o.default.matrix(y.x, y.y, -y.y, y.x, 0, 0),
														o.default.matrix(1, 0, 0, 1, m.x, m.y),
													]);
												t.beginPath(),
													t.transform(v.a, v.b, v.c, v.d, v.tx, v.ty),
													t.rect(d.x - g / 2, d.y + g / 2, u.width + g, -p - g),
													t.closePath(),
													t.fillStrokeShape(this);
											}
										}
									}),
									(e.hitFuncFont = function (e, t) {
										var n = t.attrs.data.dimFont;
										if (n) {
											var r = n.text,
												i = e.measureText(r),
												o = a.DrawParams.Ins.dimFontH,
												s = n.startPt.translate(n.offVec);
											e.beginPath(),
												e.rect(s.x - 40, s.y + 40, i.width + 80, -o - 80),
												e.closePath(),
												e.fillStrokeShape(this);
										}
									}),
									(e.sceneFunc = function (t, n) {
										if (e.canDraw) {
											var r = n.attrs.data,
												i = n.attrs.view,
												u = r.segs;
											if (u && 0 !== u.length) {
												if (
													(n.draggable() !== r.drag && n.draggable(r.drag),
													a.DrawParams.Ins.readonly && n.draggable(!1),
													a.DrawParams.Ins.asSimpleView)
												)
													(n.attrs.stroke = 'black'), (t.fillStyle = 'black');
												else {
													var p = h.ShapeColor.dim,
														f = r.highlight ? r.highlight : p;
													n.attrs.stroke !== f && (n.attrs.stroke = f);
													var d = r.strokeWidth ? r.strokeWidth : a.DrawParams.Ins.strokeWidth;
													n.attrs.strokeWidth !== d && (n.attrs.strokeWidth = d), (t.fillStyle = f);
												}
												t.beginPath(),
													t.moveTo(u[0].start.x, u[0].start.y),
													t.lineTo(u[0].end.x, u[0].end.y),
													t.moveTo(u[1].start.x, u[1].start.y),
													t.lineTo(u[1].end.x, u[1].end.y);
												var g = u[2],
													y = l.UnitConvertion.Ins.lengthForOutput(
														r.dimInfo.displayLength || g.length,
													);
												void 0 !== r.displayText && (y = r.displayText),
													i.dimManager.mode === s.dimModeEnum.calculate &&
														n.attrs.data.dimInfo &&
														(y = n.attrs.data.dimInfo.name),
													(t.font = a.DrawParams.Ins.numFont),
													r.dimInfo.type === c.DimType.InnerSpace &&
														(t.font = t.font.replace(
															/\d+/g,
															(0.8 * a.DrawParams.Ins.dimFontSize).toString(),
														));
												var m,
													v = t.measureText(y),
													w = g.middle(),
													b = v.width,
													S = a.DrawParams.Ins.dimFontH,
													_ = b + 120,
													P = S + 120,
													x = c.PolygonCreator.Ins.joinRelativePro(
														[
															o.default.vector(_, 0),
															o.default.vector(0, P),
															o.default.vector(-_, 0),
														],
														o.default.point(w.x - b / 2 - 60, w.y - S / 2 - 60),
													),
													D = o.default.segment(g.start, g.end).tangentInStart(),
													T = o.default.point(w.x, w.y),
													O = o.default.line(o.default.point(-1, -1), o.default.point(1, 1));
												m = o.default.point(D.x, D.y).leftTo(O) ? D.invert() : D;
												var M = h.Utils.applyMatrixMultiply([
														o.default.matrix(1, 0, 0, 1, -T.x, -T.y),
														o.default.matrix(m.x, m.y, -m.y, m.x, 0, 0),
														o.default.matrix(1, 0, 0, 1, T.x, T.y),
													]),
													E = x.clone().transform(M).intersect(g);
												2 === E.length &&
													(t.moveTo(g.start.x, g.start.y),
													t.lineTo(E[0].x, E[0].y),
													t.moveTo(E[1].x, E[1].y),
													t.lineTo(g.end.x, g.end.y)),
													t.strokeShape(this),
													t.transform(M.a, M.b, M.c, M.d, M.tx, M.ty),
													t.fillText(y, w.x - b / 2, w.y + S / 2);
											}
										}
									}),
									(e.canDraw = !1),
									e
								);
							})();
						t.DimCraft = u;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PolyCraft = void 0);
						var o = i(n(56)),
							a = i(n(0)),
							s = n(83),
							l = n(2),
							h = n(1),
							c = (function () {
								function e() {}
								return (
									(e.create = function (t, n) {
										var r = new o.default.Shape({
											sceneFunc: e.sceneFunc,
											stroke: 'black',
											strokeWidth: s.DrawParams.Ins.strokeWidth,
											draggable: !1,
										});
										return (
											r.setAttr('data', {
												poly: t,
												fcolor: 'none',
												dashed: !1,
											}),
											r.setAttr('view', n),
											r
										);
									}),
									(e.sceneFunc = function (t, n) {
										var r = n.attrs.data,
											i = r.poly;
										n.draggable() !== r.drag && n.draggable(r.drag),
											s.DrawParams.Ins.readonly && n.draggable(!1);
										var o = r.fcolor,
											c = r.highlight,
											u = n.attrs.robot;
										if (
											('none' === o && !c) ||
											(!(u instanceof h.ScreenFiller) && s.DrawParams.Ins.asSimpleView)
										)
											s.DrawParams.Ins.asSimpleView &&
												(n.attrs.robot instanceof h.Glass
													? (n.attrs.fill = 'rgba(255, 255, 255, 0)')
													: (n.attrs.fill = 'white'));
										else {
											var p = c || o;
											if (
												(n.attrs.fill !== p && (n.attrs.fill = p), p instanceof HTMLImageElement)
											) {
												var f = void 0;
												if (u && u instanceof h.ExtraPersonImage) {
													f = t.createPattern(p, 'no-repeat');
													var d = u.scaleFactor,
														g = i.box,
														y = new DOMMatrix([1, 0, 0, 1, 0, 0]);
													f.setTransform(
														y
															.translate(g.center.x, g.center.y)
															.scale(d, d)
															.translate(-(g.xmax - g.xmin) / 2 / d, -(g.ymax - g.ymin) / 2 / d),
													);
												} else if (((f = t.createPattern(p, 'repeat')), i.edges && f)) {
													var m,
														v = i.edges,
														w = 0;
													if (
														(v.forEach(function (e) {
															e instanceof a.default.Segment &&
																e.length > w &&
																((w = e.length), (m = e.clone()));
														}),
														m)
													) {
														var b = m.slope;
														(y = new DOMMatrix([1, 0, 0, 1, 0, 0])),
															f.setTransform(y.rotate((180 * b) / Math.PI));
													}
												}
												t.fillStyle = f;
											} else {
												var S = l.FillPattern.Instance.Patterns.get(p);
												void 0 !== S && (t.fillStyle = t.createPattern(S, 'repeat'));
											}
										}
										if (s.DrawParams.Ins.asSimpleView)
											'black' !== n.attrs.stroke && (n.attrs.stroke = 'black'),
												n.attrs.strokeWidth !== s.DrawParams.Ins.strokeWidth &&
													(n.attrs.strokeWidth = s.DrawParams.Ins.strokeWidth);
										else {
											var _ = r.stroke ? r.stroke : 'black';
											n.attrs.stroke !== _ && (n.attrs.stroke = _);
											var P =
												void 0 !== r.strokeWidth ? r.strokeWidth : s.DrawParams.Ins.strokeWidth;
											n.attrs.strokeWidth !== P && (n.attrs.strokeWidth = P);
										}
										var x = i.edges,
											D = i.ringPolygon();
										if (void 0 !== D)
											return (
												t.beginPath(),
												t.arc(D.pc.x, D.pc.y, D.ir, 0, 2 * Math.PI, !1),
												t.moveTo(D.pc.x + D.or, D.pc.y),
												t.arc(D.pc.x, D.pc.y, D.or, 2 * Math.PI, 0, !0),
												t.closePath(),
												void t.fillStrokeShape(this)
											);
										0 !== x.length &&
											(t.beginPath(),
											e.makePoly(t, x),
											r.dashed
												? (n.attrs.dash = [30, 15])
												: Array.isArray(n.attrs.dash) &&
												  n.attrs.dash.length > 0 &&
												  (n.attrs.dash = []),
											r.holes &&
												Array.isArray(r.holes) &&
												r.holes.forEach(function (n) {
													if (n.style === h.HoleStyle.Square) {
														var r = n.size,
															i = n.height ? n.height : r;
														t.moveTo(n.x - r, n.y - i),
															t.lineTo(n.x + r, n.y - i),
															t.lineTo(n.x + r, n.y + i),
															t.lineTo(n.x - r, n.y + i),
															t.lineTo(n.x - r, n.y - i);
													} else n.style === h.HoleStyle.Circle ? (t.moveTo(n.x + n.size, n.y), t.arc(n.x, n.y, n.size, 2 * Math.PI, 0)) : e.makePoly(t, n.edges);
												}),
											'none' === o
												? t.strokeShape(this)
												: u && u instanceof h.ExtraPersonImage
												? u.selected
													? t.fillStrokeShape(this)
													: t.fillShape(this)
												: u instanceof h.Bar && e.isNonGapBar(u)
												? t.fillShape(this)
												: t.fillStrokeShape(this));
									}),
									(e.isNonGapBar = function (e) {
										if (
											![
												h.ShapeType.Frame,
												h.ShapeType.FrameMullion,
												h.ShapeType.Sash,
												h.ShapeType.Screen,
												h.ShapeType.SashMullion,
												h.ShapeType.Bead,
											].some(function (t) {
												return t === e.where;
											})
										)
											return !1;
										var t = l.DisplayUtils.parentUtilsFrameOrSash(e);
										if (!t) return !1;
										var n = !1,
											r = e.where === h.ShapeType.Bead;
										return (
											t instanceof h.Frame
												? (n = r ? s.DrawParams.Ins.nonGapFixedBead : s.DrawParams.Ins.nonGapFrame)
												: t instanceof h.Sash &&
												  (n = r ? s.DrawParams.Ins.nonGapSashBead : s.DrawParams.Ins.nonGapSash),
											n
										);
									}),
									(e.makePoly = function (e, t) {
										var n,
											i,
											o = t[0];
										e.moveTo(o.start.x, o.start.y);
										try {
											for (var s = r(t), l = s.next(); !l.done; l = s.next()) {
												var h = l.value;
												if (h instanceof a.default.Segment) e.lineTo(h.pe.x, h.pe.y);
												else {
													var c = h.center,
														u = h.counterClockwise,
														p = h.startAngle > Math.PI ? h.startAngle - 2 * Math.PI : h.startAngle,
														f = h.endAngle > Math.PI ? h.endAngle - 2 * Math.PI : h.endAngle;
													e.arc(c.x, c.y, h.r.valueOf(), p, f, !u);
												}
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												l && !l.done && (i = s.return) && i.call(s);
											} finally {
												if (n) throw n.error;
											}
										}
									}),
									e
								);
							})();
						t.PolyCraft = c;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.TextCraft = void 0);
						var i = r(n(56)),
							o = r(n(0)),
							a = n(7),
							s = n(13),
							l = n(1),
							h = (function () {
								function e() {}
								return (
									(e.create = function (t, n) {
										var r = new i.default.Shape({
											sceneFunc: e.sceneFunc,
											hitFunc: e.hitFunc,
											draggable: !0,
										});
										return (
											r.setAttr('data', {
												poly: t,
											}),
											r.setAttr('view', n),
											r
										);
									}),
									(e.hitFunc = function (e, t) {
										t.attrs.data.poly.border().makeHitRegion(t, e);
									}),
									(e.sceneFunc = function (t, n) {
										var r = n.attrs.data,
											i = r.poly;
										n.draggable() !== i.draggable && n.draggable(i.draggable),
											a.DrawParams.Ins.readonly && n.draggable(!1);
										var l = r.highlight ? r.highlight : i.color,
											h = a.DrawParams.Ins.asSimpleView ? 'black' : l,
											c = i.position.translate(i.offset),
											u = c.translate(-i.width / 2, -i.height / 2).translate(-10, -10);
										if (!o.default.Utils.EQ_0(i.angle)) {
											var p = new o.default.Matrix();
											(p = (p = (p = p.translate(c.x, c.y)).rotate(i.angle)).translate(-c.x, -c.y)),
												t.transform(p.a, p.b, p.c, p.d, p.tx, p.ty);
										}
										i.blur &&
											((t.fillStyle = i.blur), t.fillRect(u.x, u.y, i.width + 20, i.height + 20)),
											(t.font = i.font),
											(t.fillStyle = h),
											(t.textBaseline = 'middle');
										var f = i.contentLines;
										n.attrs.view.dimManager.mode === s.dimModeEnum.calculate &&
											r.dimInfo &&
											(f = [r.dimInfo.name]);
										var d = (-f.length / 2) * i.lineHeight;
										f.forEach(function (n, r) {
											var a = i.widths[r],
												s = e.alignOffsetOfWidth(i.align, a),
												l = o.default.vector(0, d + r * i.lineHeight),
												h = o.default.vector(0, i.lineHeight / 2 + i.fontSize / 15),
												u = c.translate(s).translate(l).translate(h);
											t.fillText(n, u.x, u.y);
										}),
											t.strokeShape(this);
									}),
									(e.alignOffsetOfWidth = function (e, t) {
										return e === l.TextAlign.Right
											? o.default.vector(-t, 0)
											: e === l.TextAlign.Center
											? o.default.vector(-t / 2, 0)
											: o.default.vector();
									}),
									e
								);
							})();
						t.TextCraft = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__values) ||
							function (e) {
								var t = 'function' == typeof Symbol && Symbol.iterator,
									n = t && e[t],
									r = 0;
								if (n) return n.call(e);
								if (e && 'number' == typeof e.length)
									return {
										next: function () {
											return (
												e && r >= e.length && (e = void 0),
												{
													value: e && e[r++],
													done: !e,
												}
											);
										},
									};
								throw new TypeError(
									t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
								);
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SubFrameManager = void 0);
						var i = n(1),
							o = (function () {
								function e(e) {
									this.host = e;
								}
								return (
									Object.defineProperty(e.prototype, 'profileSize', {
										get: function () {
											return this.host.subFrame.profileSize;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'edgeJointWay', {
										get: function () {
											return this.host.subFrame.edgeJointWay;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allBars', {
										get: function () {
											return this.host.children.filter(function (e) {
												return e instanceof i.Bar;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'bars', {
										get: function () {
											return this.allBars.filter(function (e) {
												return !e.virtual;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.create = function () {
										var e,
											t,
											n = this.host.polygon,
											o = Array(n.edges.length).fill(this.profileSize),
											a = Array(n.edges.length).fill(this.edgeJointWay),
											s = n.frametify(o, a);
										try {
											for (var l = r(s.barPolys), h = l.next(); !h.done; h = l.next()) {
												var c = h.value,
													u = new i.Bar(c, i.ShapeType.SubFrame);
												this.host.add(u);
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												h && !h.done && (t = l.return) && t.call(l);
											} finally {
												if (e) throw e.error;
											}
										}
									}),
									(e.prototype.recreated = function () {
										this.host.clearChildren(), this.create();
									}),
									(e.prototype.recreateBars = function () {
										this.allBars.forEach(function (e) {
											return e.remove();
										}),
											this.create();
									}),
									(e.prototype.translate = function (e) {
										this.allBars.forEach(function (t) {
											return t.translate(e);
										});
									}),
									(e.prototype.highlight = function (e) {
										this.bars.forEach(function (t) {
											return t.highlight(e);
										});
									}),
									e
								);
							})();
						t.SubFrameManager = o;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__values) ||
							function (e) {
								var t = 'function' == typeof Symbol && Symbol.iterator,
									n = t && e[t],
									r = 0;
								if (n) return n.call(e);
								if (e && 'number' == typeof e.length)
									return {
										next: function () {
											return (
												e && r >= e.length && (e = void 0),
												{
													value: e && e[r++],
													done: !e,
												}
											);
										},
									};
								throw new TypeError(
									t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
								);
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerManager = void 0);
						var i = n(2),
							o = n(1),
							a = (function () {
								function e(e, t) {
									(this.host = e),
										(this._defaultType = t),
										(this.fillerData = []),
										this.createFiller();
								}
								return (
									(e.prototype.clear = function () {
										var e = this;
										this.fillerData.forEach(function (t) {
											e.removeFiller(new i.PolyId().deserialize(t.pid), !0);
										});
									}),
									(e.prototype.createFiller = function (e) {
										var t = this;
										void 0 === e && (e = !1),
											this.host.avaiablePoly.forEach(function (n) {
												t.removeFiller(n.polyId, e);
												var r = t.host.usedPoly.every(function (e) {
													return !e.equalTo(n.polyId);
												});
												(t.fillerData.some(function (e) {
													return e.pid.idx === n.polyId.idx && e.pid.pos === n.polyId.pos;
												}) ||
													r) &&
													t.create(n);
											});
									}),
									(e.prototype.addFiller = function (e) {
										var t = this;
										if (
											!this.host.children.find(function (n) {
												return (
													n instanceof o.Filler &&
													n.where === t.host.type &&
													n.polygon.polyId.equalTo(e)
												);
											})
										) {
											var n = this.host.avaiablePoly.find(function (t) {
												return t.polyId.equalTo(e);
											});
											return this.create(n);
										}
									}),
									(e.prototype.removeFiller = function (e, t) {
										var n = this;
										if ((void 0 === t && (t = !1), t)) {
											var r = this.fillerData.findIndex(function (t) {
												return e.equalTo(new i.PolyId().deserialize(t.pid));
											});
											-1 !== r && this.fillerData.splice(r, 1);
										}
										var a = this.host.children.findIndex(function (t) {
											return (
												t instanceof o.Filler &&
												t.where === n.host.type &&
												t.polygon.polyId.equalTo(e)
											);
										});
										return -1 !== a && this.host.children[a].remove(), a;
									}),
									(e.prototype.findFillerType = function (e) {
										var t = this.defaultType,
											n = this.fillers.find(function (t) {
												return t.polygon.polyId.equalTo(e);
											});
										return n && (t = n.type), t;
									}),
									(e.prototype.changeType = function (e, t) {
										var n = this;
										e.forEach(function (e) {
											var r = n.fillerData.find(function (t) {
												return e.polyId.equalTo(new i.PolyId().deserialize(t.pid));
											});
											r
												? (r.type = t)
												: n.fillerData.push({
														pid: e.polyId,
														type: t,
												  });
										});
									}),
									(e.prototype.changeFillerType = function (e, t) {
										var n = this.fillerData.find(function (t) {
												return e.polyId.equalTo(new i.PolyId().deserialize(t.pid));
											}),
											r = {
												pid: e.polyId,
												type: t,
											};
										if (!n || n.type !== t) {
											var o = this.removeFiller(e.polyId, !0);
											this.fillerData.push(r);
											var a = this.create(e);
											if (-1 !== o) {
												var s = this.host.children.pop();
												this.host.children.splice(o, 0, s);
											}
											return a;
										}
									}),
									(e.prototype.changeShadeFillerCount = function (e, t) {
										var n = this.fillerData.find(function (t) {
											return (
												e.polyId.equalTo(new i.PolyId().deserialize(t.pid)) &&
												t.type === o.ShapeType.Shade
											);
										});
										if (n) return this.removeFiller(e.polyId, !1), (n.mm.ct = t), this.create(e);
									}),
									(e.prototype.changeShadeFillerWidth = function (e, t) {
										var n = this.fillerData.find(function (t) {
											return (
												e.polyId.equalTo(new i.PolyId().deserialize(t.pid)) &&
												t.type === o.ShapeType.Shade
											);
										});
										if (n) return this.removeFiller(e.polyId, !1), (n.mm.wd = t), this.create(e);
									}),
									(e.prototype.mergeFiller = function () {
										var e = this,
											t = [],
											n = this._defaultType;
										this.fillerData.forEach(function (o) {
											var a,
												s,
												l = !1,
												h = function (n) {
													return e.host.usedPoly.some(function (e) {
														return e.equalTo(n.polyId);
													})
														? 'continue'
														: n.polyId.equalTo(new i.PolyId().deserialize(o.pid))
														? (t.push(o), (l = !0), 'break')
														: void 0;
												};
											try {
												for (var c = r(e.host.avaiablePoly), u = c.next(); !u.done; u = c.next())
													if ('break' === h(u.value)) break;
											} catch (e) {
												a = {
													error: e,
												};
											} finally {
												try {
													u && !u.done && (s = c.return) && s.call(c);
												} finally {
													if (a) throw a.error;
												}
											}
											l || ((n = o.type), e.removeFiller(new i.PolyId().deserialize(o.pid)));
										}),
											this.host.avaiablePoly.forEach(function (r) {
												e.host.usedPoly.some(function (e) {
													return e.equalTo(r.polyId);
												}) ||
													t.find(function (e) {
														return r.polyId.equalTo(new i.PolyId().deserialize(e.pid));
													}) ||
													t.push({
														pid: r.polyId,
														type: n,
													});
											}),
											(this.fillerData = t);
									}),
									Object.defineProperty(e.prototype, 'fillers', {
										get: function () {
											var e = this,
												t = [];
											return (
												this.host.children.forEach(function (n) {
													n instanceof o.Filler && n.where === e.host.type && t.push(n);
												}),
												t
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.toJSON = function () {
										return (
											(this.fillerData = this.fillers.map(function (e) {
												return e.toJSON();
											})),
											{
												fls: this.fillerData,
											}
										);
									}),
									(e.prototype.deserialize = function (e) {
										this.fillerData = e.fls;
									}),
									(e.prototype.create = function (e) {
										var t, n;
										return (
											this.fillerData.forEach(function (n) {
												new i.PolyId().deserialize(n.pid).equalTo(e.polyId) && (t = n);
											}),
											(n = t ? t.type : this._defaultType),
											o.FillerCreator.Ins.create(t, this.host, e, n)
										);
									}),
									Object.defineProperty(e.prototype, 'defaultType', {
										get: function () {
											return this._defaultType;
										},
										set: function (e) {
											this.fillerData.forEach(function (t) {
												t.type = e;
											}),
												(this._defaultType = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.FillerManager = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SashManager = void 0);
						var s = a(n(0)),
							l = n(2),
							h = n(122),
							c = n(13),
							u = n(1),
							p = n(6),
							f = (function () {
								function e(e, t) {
									var n = this;
									void 0 === t && (t = !0),
										(this.host = e),
										(this._ifenes = []),
										(this.findHandle = function (e) {
											return i(n.sashes, n.doubleSashes).find(function (t) {
												return t.polyId.equalTo(e);
											});
										}),
										t && this.hookEvent();
								}
								return (
									(e.prototype.hookEvent = function () {
										var e = this;
										this.host.view.eventBus
											.select(p.EventType.handle_position_change)
											.subscribe(function (t) {
												var n = e._ifenes.find(function (e) {
													return (
														e.type === u.ShapeType.AntiTheft && e.polyId.equalTo(t.payload.pid)
													);
												});
												if (n) {
													var r = n.obj;
													r && (r.shutManager.updatePoly(), r.shutManager.draw(t.payload.view));
												}
											}),
											this.host.view.eventBus
												.select(p.EventType.wall_shape_change)
												.subscribe(function (t) {
													e.allSashes
														.filter(function (e) {
															return e instanceof u.PushSash || e instanceof u.FoldSash;
														})
														.forEach(function (e) {
															e.hardwareManager.handle.dim.updatePoly(),
																e.hardwareManager.handle.dim.draw(t.payload.view);
														});
												});
									}),
									(e.prototype.fenesByPolyId = function (e) {
										return this._ifenes.filter(function (t) {
											return t.polyId.equalTo(e);
										});
									}),
									(e.prototype.addMullion = function (e) {
										var t, n;
										try {
											for (var r = o(this.allSashes), i = r.next(); !i.done; i = r.next())
												if (i.value.addMullion(e)) return !0;
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												i && !i.done && (n = r.return) && n.call(r);
											} finally {
												if (t) throw t.error;
											}
										}
										return !1;
									}),
									(e.prototype.addDecorationBar = function (e, t) {
										var n, r;
										try {
											for (var i = o(this.allSashes), a = i.next(); !a.done; a = i.next()) {
												var s = a.value.addDecorationBar(e, t);
												if (s !== h.addDecorationBarRet.notInArea) return s;
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (r = i.return) && r.call(i);
											} finally {
												if (n) throw n.error;
											}
										}
										return h.addDecorationBarRet.notInArea;
									}),
									(e.prototype.dragMullion = function (e, t) {
										var n, r;
										try {
											for (var i = o(this.allSashes), a = i.next(); !a.done; a = i.next())
												if (a.value.dragMullion(e, t)) return !0;
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (r = i.return) && r.call(i);
											} finally {
												if (n) throw n.error;
											}
										}
										return !1;
									}),
									(e.prototype.dragInnerMullion = function (e, t, n) {
										var r, i;
										try {
											for (var a = o(this.allSashes), s = a.next(); !s.done; s = a.next())
												if (s.value.dragInnerMullion(e, t, n)) return !0;
										} catch (e) {
											r = {
												error: e,
											};
										} finally {
											try {
												s && !s.done && (i = a.return) && i.call(a);
											} finally {
												if (r) throw r.error;
											}
										}
										return !1;
									}),
									(e.prototype.addSash = function (e, t) {
										if (
											(void 0 === t && (t = u.ShapeType.Sash),
											e.circlePolygon() && (t = u.ShapeType.CircleSash),
											this._ifenes.findIndex(function (n) {
												return n.type === t && n.polyId.equalTo(e.polyId);
											}) >= 0)
										)
											return !1;
										if (t === u.ShapeType.GuardSash)
											return (
												this._ifenes.push(new u.GuardSash(this.host.obj, e, e.polyId.clone())), !0
											);
										var n = e.circlePolygon()
											? new u.CircleSash(this.host.obj, e, e.polyId.clone())
											: new u.PushSash(this.host.obj, e, e.polyId.clone(), t);
										if ((this._ifenes.push(n), n instanceof u.PushSash)) {
											var r = n.siblingSash;
											n.fitOpenDirection(
												r,
												s.default.vector(this.host.polygon.box.center, n.polygon.box.center),
											),
												n.hardwareManager.create();
											var i = n.hardwareManager.handle;
											r &&
												!r.hardwareManager.handle.autoOffset &&
												r.hardwareManager.handle instanceof u.Handle &&
												i instanceof u.Handle &&
												i.alignTo(r.hardwareManager.handle),
												this.host.view.eventBus.emit({
													type: p.EventType.turning_detect,
													payload: {
														frame: this.host,
													},
												});
										}
										return !0;
									}),
									(e.prototype.addInnerSash = function (e) {
										var t = this.allSashes.find(function (t) {
											return t.polygon.contains(e);
										});
										if (!t) return !1;
										var n = t.mulManager.hitTest(e);
										if (!n) return !1;
										var r = t.sashManager.addSash(n);
										if (r) {
											t.mulManager.removeFiller(n.polyId), t.mulManager.toJSON();
											var i = t.sashManager.sashes.find(function (e) {
												return e.polyId.equalTo(n.polyId);
											});
											t.hardwareManager instanceof c.PushableHardwareManager &&
												((i.hardwareManager.openDirection = t.hardwareManager.openDirection),
												(i.hardwareManager.openToward = t.hardwareManager.openToward)),
												t.updatePoly();
										}
										return r;
									}),
									(e.prototype.addKfcSash = function (e, t) {
										if ((void 0 === t && (t = u.ShapeType.Sash), e.circlePolygon())) return !1;
										if (
											this._ifenes.findIndex(function (t) {
												return t.type === u.ShapeType.KfcSash && t.polyId.equalTo(e.polyId);
											}) >= 0
										)
											return !1;
										var n = new u.KfcSash(this.host.obj, e, e.polyId.clone());
										return this._ifenes.push(n), !0;
									}),
									(e.prototype.addDoubleKfcSash = function (e) {
										if (e.circlePolygon()) return !1;
										if (
											this._ifenes.findIndex(function (t) {
												return t.type === u.ShapeType.DoubleKfcSash && t.polyId.equalTo(e.polyId);
											}) >= 0
										)
											return !1;
										var t = new u.DoubleKfcSash(this.host.obj, e, e.polyId.clone());
										return this._ifenes.push(t), this.filterDuplicateDims(), !0;
									}),
									(e.prototype.addDoubleSash = function (e, t) {
										if (
											(void 0 === t && (t = u.ShapeType.DoubleSash),
											this._ifenes.findIndex(function (n) {
												return n.type === t && n.polyId.equalTo(e.polyId);
											}) >= 0)
										)
											return !1;
										var n = new u.DoubleSash(this.host.obj, e, e.polyId.clone(), t);
										return (
											this._ifenes.push(n),
											this.host.view.eventBus.emit({
												type: p.EventType.turning_detect,
												payload: {
													frame: this.host,
												},
											}),
											!0
										);
									}),
									(e.prototype.addSlide = function (e, t) {
										if (
											this._ifenes.findIndex(function (t) {
												return t.type === u.ShapeType.Slide && t.polyId.equalTo(e.polyId);
											}) >= 0
										)
											return !1;
										var n = new u.Slide(this.host.obj, e, e.polyId.clone(), t);
										return this._ifenes.push(n), !0;
									}),
									(e.prototype.addShutter = function (e) {
										if (
											this._ifenes.findIndex(function (t) {
												return t.type === u.ShapeType.AntiTheft && t.polyId.equalTo(e.polyId);
											}) >= 0
										)
											return !1;
										var t = new u.AntiTheft(this.host.obj, e, e.polyId.clone(), this.findHandle);
										return this._ifenes.push(t), !0;
									}),
									(e.prototype.addFold = function (e, t) {
										if (
											(void 0 === t && (t = u.ShapeType.FoldSash),
											this._ifenes.findIndex(function (n) {
												return n.type === t && n.polyId.equalTo(e.polyId);
											}) >= 0)
										)
											return !1;
										var n = new u.Fold(this.host.obj, e, e.polyId.clone(), t);
										return this._ifenes.push(n), !0;
									}),
									(e.prototype.addShadePushSash = function (e) {
										if (e.circlePolygon()) return !1;
										if (
											this._ifenes.findIndex(function (t) {
												return t.type === u.ShapeType.ShadePushSash && t.polyId.equalTo(e.polyId);
											}) >= 0
										)
											return !1;
										var t = new u.PushSash(
											this.host.obj,
											e,
											e.polyId.clone(),
											u.ShapeType.ShadePushSash,
										);
										return this._ifenes.push(t), !0;
									}),
									(e.prototype.addDoubleShadePushSash = function (e) {
										if (e.circlePolygon()) return !1;
										if (
											this._ifenes.findIndex(function (t) {
												return (
													t.type === u.ShapeType.DoubleShadePushSash && t.polyId.equalTo(e.polyId)
												);
											}) >= 0
										)
											return !1;
										var t = new u.DoubleSash(
											this.host.obj,
											e,
											e.polyId.clone(),
											u.ShapeType.DoubleShadePushSash,
										);
										return this._ifenes.push(t), !0;
									}),
									(e.prototype.recreate = function (e) {
										var t = this;
										this._ifenes = i(
											this._ifenes.filter(function (e) {
												return e.type !== u.ShapeType.AntiTheft;
											}),
											this._ifenes.filter(function (e) {
												return e.type === u.ShapeType.AntiTheft;
											}),
										);
										var n = this.host.view.isDragging;
										this._ifenes.forEach(function (r) {
											var i = r.obj,
												o = e(r.polyId);
											return void 0 === o
												? ((r.enabled = !1), void t.host.remove(i))
												: !n ||
												  r instanceof u.AntiTheft ||
												  t._ifenes.find(function (e) {
														return e.polyId.equalTo(r.polyId);
												  }) === r
												? (t.host.add(i), (r.enabled = !0), void i.updatePoly(o))
												: ((r.enabled = !1), void t.host.remove(i));
										});
									}),
									(e.prototype.resetOffvec = function () {
										this._ifenes.forEach(function (e) {
											e.translate(e.offvec.invert()), (e.offvec = s.default.vector());
										});
									}),
									(e.prototype._removeSash = function (e, t, n) {
										if (!(e < 0 || e >= this._ifenes.length)) {
											var r = this._ifenes[e];
											if (
												(r.clearChildren(),
												r.hideAssist(),
												r.remove(),
												this._ifenes.splice(e, 1),
												!this._ifenes.some(function (e) {
													return e.polyId.equalTo(r.polyId);
												}))
											) {
												var i = t(r.polyId);
												i && i.draw(n);
											}
										}
									}),
									(e.prototype.delete = function (e, t) {
										this._ifenes.forEach(function (e) {
											return e.delete();
										});
										var n = this._ifenes.findIndex(function (e) {
											return e.selected;
										});
										this._removeSash(n, e, t);
									}),
									(e.prototype.removeSash = function (e, t, n) {
										var r = this;
										if (!(e < 0)) {
											var i = [];
											this._ifenes.forEach(function (t) {
												t.polyId.idx >= e && i.push(t);
											}),
												i.forEach(function (e) {
													var i = r._ifenes.findIndex(function (t) {
														return t === e;
													});
													r._removeSash(i, t, n);
												});
										}
									}),
									(e.prototype.reLocateSashes = function (e, t, n) {
										var r = this;
										this._ifenes.forEach(function (i) {
											var o = i.polygon.box.center,
												a = e.find(function (e) {
													return e.contains(o);
												});
											if (a)
												(i.polyId = a.polyId),
													i instanceof u.AntiTheft && (i.shutManager.polyId = i.polyId);
											else {
												var s = r._ifenes.findIndex(function (e) {
													return e === i;
												});
												r.removeSash(s, t, n);
											}
										});
									}),
									(e.prototype.toJSON = function () {
										var e = [];
										return (
											this._ifenes.forEach(function (t) {
												return e.push(t.toJSON());
											}),
											e
										);
									}),
									(e.prototype.deserialize = function (e) {
										var t = this,
											n = i(
												e.filter(function (e) {
													return e.type !== u.ShapeType.AntiTheft;
												}),
												e.filter(function (e) {
													return e.type === u.ShapeType.AntiTheft;
												}),
											);
										if (n.length < this._ifenes.length) {
											var r = [];
											n.forEach(function (e, n) {
												var i = l.PolyId.createByJson(e.polyId),
													o = t._ifenes.find(function (t) {
														return t.polyId.equalTo(i) && t.type === e.type;
													});
												o && r.push(o);
											}),
												this._ifenes.forEach(function (e) {
													r.find(function (t) {
														return t === e;
													}) || (e.clearChildren(), e.remove());
												}),
												(this._ifenes = r);
										} else
											n.length > this._ifenes.length
												? n.forEach(function (e, n) {
														if (n < t._ifenes.length && e.type === t._ifenes[n].type)
															t._ifenes[n].deserialize(e);
														else {
															var r = void 0;
															(r =
																e.type === u.ShapeType.AntiTheft
																	? u.FenesCreator.Ins.createAntiTheft(t.host, t.findHandle)
																	: u.FenesCreator.Ins.create(t.host, e.type)),
																t._ifenes.splice(n, 0, r.deserialize(e));
														}
												  })
												: ((this._ifenes = i(
														this._ifenes.filter(function (e) {
															return e.type !== u.ShapeType.AntiTheft;
														}),
														this._ifenes.filter(function (e) {
															return e.type === u.ShapeType.AntiTheft;
														}),
												  )),
												  n.forEach(function (e, n) {
														return t._ifenes[n].deserialize(e);
												  }));
									}),
									Object.defineProperty(e.prototype, 'usedPoly', {
										get: function () {
											var e = [];
											return (
												this._ifenes.forEach(function (t) {
													return e.push(t.polyId);
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sashes', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return (
														(e.type === u.ShapeType.Sash || e.type === u.ShapeType.Screen) &&
														e.enabled
													);
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'glassSashes', {
										get: function () {
											var e = this._ifenes
													.filter(function (e) {
														return e.type === u.ShapeType.Sash && e.enabled;
													})
													.map(function (e) {
														return e.obj;
													}),
												t = this._ifenes
													.filter(function (e) {
														return e.type === u.ShapeType.DoubleSash && e.enabled;
													})
													.map(function (e) {
														return e.obj;
													});
											return i(
												e,
												t
													.map(function (e) {
														return e.sashes;
													})
													.flat(),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'circleSashes', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return e.type === u.ShapeType.CircleSash && e.enabled;
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'kfcSashes', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return e.type === u.ShapeType.KfcSash && e.enabled;
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'doubleSashes', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return (
														(e.type === u.ShapeType.DoubleSash ||
															e.type === u.ShapeType.DoubleScreen) &&
														e.enabled
													);
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'doubleKfcSashes', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return e.type === u.ShapeType.DoubleKfcSash && e.enabled;
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'thefts', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return e.type === u.ShapeType.AntiTheft && e.enabled;
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'folds', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return (
														(e.type === u.ShapeType.FoldSash ||
															e.type === u.ShapeType.FoldScreen) &&
														e.enabled
													);
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'slides', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return e.type === u.ShapeType.Slide && e.enabled;
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shadePushSashes', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return e.type === u.ShapeType.ShadePushSash && e.enabled;
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'doubleShadePushSashes', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return e.type === u.ShapeType.DoubleShadePushSash && e.enabled;
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'foldShades', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return e.type === u.ShapeType.FoldShade && e.enabled;
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'guardSashes', {
										get: function () {
											return this._ifenes
												.filter(function (e) {
													return e.type === u.ShapeType.GuardSash && e.enabled;
												})
												.map(function (e) {
													return e.obj;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'truncateSashes', {
										get: function () {
											var e = [],
												t = [];
											return (
												i(this.sashes, this.doubleSashes, this.slides).forEach(function (n) {
													n.truncateFrame &&
														(t.some(function (e) {
															return n.polyId.equalTo(e);
														}) ||
															(t.push(n.polyId), e.push(n)));
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allSashes', {
										get: function () {
											var e = [];
											return (
												e.push.apply(e, i(this.sashes)),
												this.circleSashes.forEach(function (t) {
													return e.push(t);
												}),
												this.kfcSashes.forEach(function (t) {
													return e.push(t);
												}),
												this.doubleKfcSashes.forEach(function (t) {
													return e.push.apply(e, i(t.sashes));
												}),
												this.doubleSashes.forEach(function (t) {
													return e.push.apply(e, i(t.sashes));
												}),
												this.slides.forEach(function (t) {
													return e.push.apply(e, i(t.sashes));
												}),
												this.folds.forEach(function (t) {
													return e.push.apply(e, i(t.sashes));
												}),
												this.shadePushSashes.forEach(function (t) {
													return e.push(t);
												}),
												this.doubleShadePushSashes.forEach(function (t) {
													return e.push.apply(e, i(t.sashes));
												}),
												this.foldShades.forEach(function (t) {
													return e.push.apply(e, i(t.sashes));
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'dims', {
										get: function () {
											var e = [];
											return (
												this.allSashes.forEach(function (t) {
													if (
														(t.dim.diMgr.allDims.forEach(function (t) {
															t.type === u.DimType.Mullion && e.push(t);
														}),
														(t instanceof u.PushSash ||
															t instanceof u.FoldSash ||
															t instanceof u.KfcSash) &&
															(t.bottomDim.hidden || e.push(t.bottomDim)),
														t.hardwareManager instanceof c.PushSashHardwareManager ||
															t.hardwareManager instanceof c.FoldHardwareManager)
													) {
														var n = t.hardwareManager.handle;
														n.hidden || n.dim.hidden || e.push(n.dim);
													}
												}),
												this.slides.forEach(function (t) {
													t.bottomDims.forEach(function (t) {
														t.hidden || e.push(t);
													});
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.translate = function (e) {
										this._ifenes.forEach(function (t) {
											return t.obj.translate(e);
										});
									}),
									(e.prototype.hitBar = function (e, t) {
										var n,
											r = l.HitResult.None;
										return (
											i(
												this.sashes,
												this.circleSashes,
												this.kfcSashes,
												this.doubleKfcSashes,
												this.thefts,
												this.doubleSashes,
												this.folds,
												this.slides,
												this.shadePushSashes,
												this.doubleShadePushSashes,
												this.foldShades,
												this.guardSashes,
											).forEach(function (i) {
												var o = i.hitBar(e, t);
												o === l.HitResult.All && (n = i), o !== l.HitResult.None && (r = o);
											}),
											n && this.emitSashGroupSettings(n, t),
											r !== l.HitResult.None
										);
									}),
									(e.prototype.emitSashGroupSettings = function (e, t) {
										var n = [],
											r = (n = (n = (n = (n = (n = (n = (n = (n = (n = (n = n.concat(
												this.sashes.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).concat(
												this.kfcSashes.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).concat(
												this.doubleKfcSashes.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).concat(
												this.thefts.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).concat(
												this.doubleSashes.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).concat(
												this.folds.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).concat(
												this.slides.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).concat(
												this.shadePushSashes.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).concat(
												this.doubleShadePushSashes.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).concat(
												this.foldShades.filter(function (t) {
													return t.polyId.equalTo(e.polyId);
												}),
											)).map(function (e) {
												return e instanceof u.KfcSash
													? new p.KfcSashSettings(e.hardwareManager, t)
													: e instanceof u.DoubleKfcSash
													? new p.DoubleKfcSashSettings(e, t)
													: e instanceof u.Sash
													? new p.SashSettings(e.hardwareManager, t)
													: e instanceof u.AntiTheft
													? new p.AntiTheftSettings(e, t)
													: e instanceof u.DoubleSash
													? new p.DoubleSashSettings(e, t)
													: e instanceof u.Slide
													? new p.SlideSettings(e, t)
													: new p.FoldSashSettings(e, t);
											});
										this.host.view.eventBus.emit({
											type: p.EventType.sash_group_settings,
											payload: new p.SashGroupSettings(r, n.indexOf(e), t),
										});
									}),
									(e.prototype.hideAssist = function () {
										this._ifenes.forEach(function (e) {
											return e.obj.hideAssist();
										});
									}),
									(e.prototype.snapEdge = function (e, t, n) {
										var r, i;
										try {
											for (var a = o(this.allSashes), s = a.next(); !s.done; s = a.next()) {
												var l = s.value.snapEdge(e, t, n);
												if (l) return l;
											}
										} catch (e) {
											r = {
												error: e,
											};
										} finally {
											try {
												s && !s.done && (i = a.return) && i.call(a);
											} finally {
												if (r) throw r.error;
											}
										}
									}),
									(e.prototype.filterDuplicateDims = function (e) {
										void 0 === e && (e = !1);
										var t = this.allSashes,
											n = t
												.map(function (e) {
													return e.dim.diMgr.allDims;
												})
												.flat()
												.filter(function (e) {
													return e.dimSeg;
												});
										0 !== n.length &&
											(t[0].dim.diMgr.hideDim(n),
											e &&
												t.forEach(function (e) {
													e.dim.draw(e.topFrame.view);
												}));
									}),
									e
								);
							})();
						t.SashManager = f;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.OpenDirection = t.HardwareManager = void 0);
						var r,
							i = (function () {
								function e(e) {
									(this.sash = e), (this._openDirection = r.Left);
								}
								return (
									Object.defineProperty(e.prototype, 'openDirection', {
										get: function () {
											return this._openDirection;
										},
										set: function (e) {
											this._openDirection = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isVertical', {
										get: function () {
											return this.openDirection === r.Up || this.openDirection === r.Down;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isLeftOpen', {
										get: function () {
											return this._openDirection.startsWith('left');
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isRightOpen', {
										get: function () {
											return this._openDirection.startsWith('right');
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isUpOpen', {
										get: function () {
											return this._openDirection.endsWith('up');
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isDownOpen', {
										get: function () {
											return this._openDirection.endsWith('down');
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.toJSON = function () {
										return {
											openDirection: this.openDirection,
										};
									}),
									(e.prototype.deserialize = function (e) {
										return (e = this.fixData(e)), (this._openDirection = e.openDirection), this;
									}),
									(e.prototype.draw = function (e) {
										this.hardwares.forEach(function (t) {
											t.hidden || t.draw(e);
										});
									}),
									(e.prototype.fixData = function (e) {
										return e;
									}),
									e
								);
							})();
						(t.HardwareManager = i),
							(function (e) {
								(e.Left = 'left'),
									(e.Right = 'right'),
									(e.Up = 'up'),
									(e.Down = 'down'),
									(e.Left_With_Up = 'left_with_up'),
									(e.Right_With_Up = 'right_with_up'),
									(e.Left_With_Down = 'left_with_down'),
									(e.Right_With_Down = 'right_with_down'),
									(e.Custom = 'custom'),
									(e.None = 'none'),
									(e.Float = 'float'),
									(e.Left_Rotate = 'Left_Rotate'),
									(e.Right_Rotate = 'Right_Rotate'),
									(e.Up_Rotate = 'Up_Rotate'),
									(e.Down_Rotate = 'Down_Rotate');
							})((r = t.OpenDirection || (t.OpenDirection = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.OpenToward = t.PushableHardwareManager = void 0);
						var s,
							l = a(n(0)),
							h = n(11),
							c = n(1),
							u = n(13),
							p = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (t._openToward = s.Outward), (t.pivotAtSide = !1), t;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'openToward', {
										get: function () {
											return this._openToward;
										},
										set: function (e) {
											this._openToward = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hingeEdge', {
										get: function () {
											if (-1 !== this.hingeEdgeIndex)
												return this.sash.polygon.edge(this.hingeEdgeIndex);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handleEdge', {
										get: function () {
											if (-1 !== this.handleEdgeIndex)
												return this.sash.polygon.edge(this.handleEdgeIndex);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hingeEdgeIndex', {
										get: function () {
											return -1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handleEdgeIndex', {
										get: function () {
											return -1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.edgeRotateBasedByOpenDirection = function () {
										var e = h.EdgeFinder.Instance.findIndex(
											c.HardwareOnFrame.directionByOpenDirection(this.openDirection),
											this.sash.polygon,
										);
										return this.sash.polygon.edges[e];
									}),
									(t.prototype.properHingeIndexByHandle = function (e) {
										if (this.handleEdge) {
											var t = this.sash.polygon.edges,
												n = Math.floor((e + t.length / 2) % t.length);
											if (!(t[n] instanceof l.default.Arc)) return n;
											for (
												var r = t.filter(function (e) {
														return e instanceof l.default.Segment;
													}),
													i = 0;
												i < r.length;
												i++
											)
												if (i !== e) return i;
										}
									}),
									(t.prototype.properHandleIndexByHinge = function (e) {
										if (this.hingeEdge) {
											var t = this.sash.polygon.edges,
												n = Math.floor((e + t.length / 2) % t.length);
											return n !== e ? n : void 0;
										}
									}),
									(t.prototype.matchOpenDirection = function () {
										var e,
											t,
											n,
											r = this,
											i = [];
										try {
											for (
												var a = o(this.sash.polygon.edges), p = a.next();
												!p.done;
												p = a.next()
											) {
												var f = p.value;
												f instanceof l.default.Segment && i.push(f);
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												p && !p.done && (t = a.return) && t.call(a);
											} finally {
												if (e) throw e.error;
											}
										}
										this.hingeEdge
											? (n = [
													u.OpenDirection.Left,
													u.OpenDirection.Right,
													u.OpenDirection.Up,
													u.OpenDirection.Down,
											  ].find(function (e) {
													return (
														h.EdgeFinder.Instance.findIndex(
															c.HardwareOnFrame.directionByOpenDirection(e),
															r.sash.polygon,
														) === r.hingeEdgeIndex
													);
											  }))
											: this.handleEdge &&
											  (n = [
													u.OpenDirection.Left,
													u.OpenDirection.Right,
													u.OpenDirection.Up,
													u.OpenDirection.Down,
											  ].find(function (e) {
													return (
														h.EdgeFinder.Instance.findIndex(
															c.HardwareOnFrame.directionByOpenDirection(e, !0),
															r.sash.polygon,
														) === r.handleEdgeIndex
													);
											  })),
											(this._openDirection = n || u.OpenDirection.Custom),
											this.isUpOpen && (this._openToward = s.Outward),
											this.isDownOpen && (this._openToward = s.Inward);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (t.openToward = this._openToward), (t.pas = this.pivotAtSide), t;
									}),
									(t.prototype.deserialize = function (t) {
										return (
											e.prototype.deserialize.call(this, t),
											(this._openToward = t.openToward),
											void 0 !== t.pas && (this.pivotAtSide = t.pas),
											this
										);
									}),
									t
								);
							})(u.HardwareManager);
						(t.PushableHardwareManager = p),
							(function (e) {
								(e.Inward = 'inward'), (e.Outward = 'outward');
							})((s = t.OpenToward || (t.OpenToward = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PushSashHardwareManager = void 0);
						var s = n(7),
							l = n(13),
							h = n(1),
							c = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									(n._hingeCount = 0),
										(n._hingeType = h.HardwareShape.Hinge),
										(n.slide = l.OpenDirection.None),
										(n.pullupEnabled = !1),
										(n.hinges = []),
										(n.handle = new h.Handle(n)),
										(n.subHandle = new h.Handle(n)),
										(n.indicator = new h.IndicatorForSash(n)),
										(n.indicatorForSlide = new h.IndicatorForSlide(n)),
										(n.multiLockPoints = !0),
										n.initHinges();
									var r = !s.DrawParams.Ins.sashOutwardOpen;
									return (
										(n._openToward =
											n.sash.type === h.ShapeType.Screen
												? r
													? l.OpenToward.Outward
													: l.OpenToward.Inward
												: r
												? l.OpenToward.Inward
												: l.OpenToward.Outward),
										(n.handle.dim.hidden = !s.DrawParams.Ins.dimToGroundShown),
										(n.handle.dimToSash.hidden = !s.DrawParams.Ins.dimToSashShown),
										(n.subHandle.hidden = !0),
										(n.subHandle.dim.hidden = !0),
										(n.subHandle.dimToSash.hidden = !0),
										n
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'hardwares', {
										get: function () {
											return a(this.hinges, [this.handle, this.subHandle]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'openToward', {
										get: function () {
											return this._openToward;
										},
										set: function (e) {
											this._openToward = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'openDirection', {
										get: function () {
											return this._openDirection;
										},
										set: function (e) {
											(this._openDirection = e),
												this.isDownOpen && (this._openToward = l.OpenToward.Inward),
												this.hinges.forEach(function (e) {
													return (e.edgeIndex = -1);
												}),
												this.handle instanceof h.HardwareOnEdge && (this.handle.edgeIndex = -1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hingeType', {
										get: function () {
											return this._hingeType;
										},
										set: function (e) {
											var t = this;
											e !== this._hingeType &&
												(this.hinges.forEach(function (e) {
													return t.sash.remove(e);
												}),
												(this._hingeType = e),
												(this.hingeCount = 2),
												this.hinges.forEach(function (t) {
													return (t.hardwareShape = e);
												}));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hingeCount', {
										get: function () {
											return this._hingeCount;
										},
										set: function (e) {
											var t = this;
											(e = 1 === (e = (e = e < 0 ? 0 : e) > 5 ? 5 : e) ? 2 : e),
												(this._hingeCount = e),
												this.hinges.forEach(function (e) {
													return t.sash.remove(e);
												}),
												this.initHinges(),
												this.hinges.forEach(function (e) {
													return (e.hardwareShape = t._hingeType);
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handleType', {
										get: function () {
											return this.handle.hardwareShape;
										},
										set: function (e) {
											this.handle.recycle();
											var t = this.handle;
											(this.handle = this.createHandle(e)),
												this.handle.copyCommonSettings(t),
												(this.handle.hardwareShape = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hingeEdgeIndex', {
										get: function () {
											return this.hinges.length > 0 ? this.hinges[0].edgeIndex : -1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handleEdgeIndex', {
										get: function () {
											return this.handle instanceof h.HardwareOnFrame ? this.handle.edgeIndex : -1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dimToGroundHidden', {
										get: function () {
											return this.handle.dim.hidden;
										},
										set: function (e) {
											this.handle.dim.hidden = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.create = function () {
										return (
											this.hinges.forEach(function (e) {
												return e.create();
											}),
											this.handle.create(),
											this.subHandle.create(),
											this.indicator.create(),
											this.indicatorForSlide.create(),
											this
										);
									}),
									(t.prototype.recreate = function () {
										var e = this;
										this.hinges.forEach(function (t, n) {
											return (e.hinges[n] = t.recreate());
										}),
											this.hinges.forEach(function (e) {
												return e.create();
											}),
											(this.handle = this.handle.recreate().updatePoly()),
											(this.subHandle = this.subHandle.recreate().updatePoly()),
											(this.indicator = new h.IndicatorForSash(this).create()),
											(this.indicatorForSlide = new h.IndicatorForSlide(this).create());
									}),
									(t.prototype.updatePoly = function () {
										this.hinges.forEach(function (e) {
											return e.updatePoly();
										}),
											this.handle.updatePoly(),
											this.subHandle.updatePoly(),
											this.indicator.updatePoly(),
											this.indicatorForSlide.updatePoly();
									}),
									(t.prototype.translate = function (e) {
										this.hinges.forEach(function (t) {
											return t.translate(e);
										}),
											this.handle.translate(e),
											this.subHandle.translate(e),
											this.indicator.translate(e),
											this.indicatorForSlide.translate(e);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.hingeType = this._hingeType),
											(t.hingeCount = this._hingeCount),
											(t.handle = this.handle.toJSON()),
											(t.subHandle = this.subHandle.toJSON()),
											(t.hinges = this.hinges.map(function (e) {
												return e.toJSON();
											})),
											(t.slide = this.slide),
											(t.mlp = this.multiLockPoints),
											(t.pue = this.pullupEnabled),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										return (
											e.prototype.deserialize.call(this, t),
											this.deserializeForHandle(t),
											t.subHandle && this.subHandle.deserialize(t.subHandle),
											(this.hingeType = t.hingeType ? t.hingeType : h.HardwareShape.Hinge),
											(this.hingeCount = t.hingeCount ? t.hingeCount : 0),
											this.hinges.forEach(function (e, n) {
												var r = t.hinges[n];
												r && e.deserialize(r);
											}),
											t.slide && (this.slide = t.slide),
											void 0 !== t.mlp && (this.multiLockPoints = t.mlp),
											void 0 !== t.pue && (this.pullupEnabled = t.pue),
											this
										);
									}),
									(t.prototype.deserializeForHandle = function (e) {
										(this.handleType = e.handle.hardwareShape), this.handle.deserialize(e.handle);
									}),
									(t.prototype.draw = function (t) {
										e.prototype.draw.call(this, t),
											this.indicator.draw(t),
											this.indicatorForSlide.draw(t);
									}),
									(t.prototype.fixData = function (t) {
										return (
											void 0 === (t = e.prototype.fixData.call(this, t)).handle.hardwareShape &&
												(t.handle.hardwareShape = h.HardwareShape.Handle),
											void 0 === t.hinges && (t.hinges = []),
											void 0 === t.hingeType && (t.hingeType = h.HardwareShape.Hinge),
											t
										);
									}),
									(t.prototype.createHandle = function (e) {
										switch (e) {
											case h.HardwareShape.CommercialHandle:
											case h.HardwareShape.CommercialHandle2:
											case h.HardwareShape.CommercialHandle3:
											case h.HardwareShape.CommercialHandle4:
											case h.HardwareShape.CommercialHandle5:
											case h.HardwareShape.CommercialHandle6:
											case h.HardwareShape.CommercialHandle7:
											case h.HardwareShape.CommercialHandle8:
											case h.HardwareShape.CommercialHandle13:
											case h.HardwareShape.CommercialHandle14:
												return new h.CommercialHandle(this);
											case h.HardwareShape.CrossHandle:
											case h.HardwareShape.CommercialHandle9:
											case h.HardwareShape.CommercialHandle10:
											case h.HardwareShape.CommercialHandle11:
											case h.HardwareShape.CommercialHandle12:
												var t = new h.CrossHandle(this);
												return (
													(e !== h.HardwareShape.CommercialHandle9 &&
														e !== h.HardwareShape.CommercialHandle10) ||
														(t.isVertical = !0),
													t
												);
											case h.HardwareShape.Handle2:
											case h.HardwareShape.Handle3:
											case h.HardwareShape.Handle4:
												return h.Handle.forDoor(this, e);
											case h.HardwareShape.Handle5:
											case h.HardwareShape.Handle7:
												return new h.Handle(this, {
													hardwareShape: e,
													alwaysPointToBottom: !0,
													dockSide: h.DockSide.Inside,
												});
											default:
												return new h.Handle(this);
										}
									}),
									(t.prototype.initHinges = function () {
										this.hinges.splice(this._hingeCount);
										for (var e = 0; e < this._hingeCount; e++) {
											var t =
												this._hingeType === h.HardwareShape.EndpointHinge
													? new h.EndpointHinge(this)
													: new h.Hinge(this);
											this.hinges[e] = t;
										}
									}),
									t
								);
							})(l.PushableHardwareManager);
						t.PushSashHardwareManager = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.KfcSashHardwareManager = void 0);
						var a = o(n(0)),
							s = n(13),
							l = n(1),
							h = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									(t.prototype.createHandle = function (t) {
										return (
											t === l.HardwareShape.KfcHandle &&
												(this.hingeType = l.HardwareShape.EndpointHinge),
											t === l.HardwareShape.KfcHandle
												? new l.KfcHandle(this)
												: e.prototype.createHandle.call(this, t)
										);
									}),
									(t.prototype.toggleKfcMullionByType = function (e) {
										if (!this.handle.hidden) {
											var t = this.handle.hardwareShape;
											e === l.HardwareShape.KfcHandle && t !== l.HardwareShape.KfcHandle
												? this.genKfcMullion()
												: e !== l.HardwareShape.KfcHandle &&
												  t === l.HardwareShape.KfcHandle &&
												  this.removeKfcMullion();
										}
									}),
									(t.prototype.toggleKfcMullionByHandleHidden = function (e) {
										this.handle.hardwareShape === l.HardwareShape.KfcHandle &&
											(e ? this.removeKfcMullion() : this.genKfcMullion());
									}),
									(t.prototype.genKfcMullion = function () {
										var e = this.sash.mulManager,
											t = e.splitter;
										(t.lines = []), (t.lineProfileSizes = []), e.updatePoly();
										var n = a.default.line(this.sash.polygon.box.center, a.default.vector(0, 1));
										this.sash.addMullion(n, {
											kfcWaist: !0,
										});
									}),
									(t.prototype.removeKfcMullion = function () {
										var e = this.sash.mulManager,
											t = e.splitter;
										(t.lines = []), (t.lineProfileSizes = []), e.updatePoly();
									}),
									t
								);
							})(s.PushSashHardwareManager);
						t.KfcSashHardwareManager = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CirclePushSashHardwareManager = void 0);
						var s = n(13),
							l = n(1),
							h = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (
										(t._openDirection = s.OpenDirection.Up),
										(t.hinges = []),
										(t.handle = new l.HandleOnCircle(t)),
										t
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'hardwares', {
										get: function () {
											return a(this.hinges, [this.handle]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.create = function () {
										for (var e = 0; e < 2; e++) this.hinges[e] = new l.HingeOnCircle(this);
										return (
											this.hinges.forEach(function (e) {
												return e.create();
											}),
											this.handle.create(),
											this
										);
									}),
									(t.prototype.recreate = function () {
										var e = this;
										this.hinges.forEach(function (t, n) {
											e.hinges[n] = new l.HingeOnCircle(e).cloneFrom(t);
										}),
											this.hinges.forEach(function (e) {
												return e.create();
											}),
											(this.handle = new l.HandleOnCircle(this)
												.cloneFrom(this.handle)
												.updatePoly());
									}),
									(t.prototype.updatePoly = function () {
										this.hinges.forEach(function (e) {
											return e.updatePoly();
										}),
											this.handle.updatePoly();
									}),
									(t.prototype.translate = function (e) {
										this.hinges.forEach(function (t) {
											return t.translate(e);
										}),
											this.handle.translate(e);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.handle = this.handle.toJSON()),
											(t.hinges = this.hinges.map(function (e) {
												return e.toJSON();
											})),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										var n = this;
										return (
											e.prototype.deserialize.call(this, t),
											this.handle.deserialize(t.handle),
											(this.hinges = t.hinges.map(function (e) {
												var t = new l.HingeOnCircle(n);
												return t.deserialize(e), t;
											})),
											this
										);
									}),
									(t.prototype.fixData = function (t) {
										return (
											void 0 === (t = e.prototype.fixData.call(this, t)).handle.hardwareShape &&
												(t.handle.hardwareShape = l.HardwareShape.Handle),
											void 0 === t.hinges && (t.hinges = [{}, {}]),
											t
										);
									}),
									t
								);
							})(s.PushableHardwareManager);
						t.CirclePushSashHardwareManager = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SlideHardwareManager = void 0);
						var s = n(13),
							l = n(1),
							h = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (
										(t.locks = []),
										(t.lock2s = []),
										(t.lockShape = l.HardwareShape.Lock),
										(t.handleForSlide = l.Handle.forSlide(t)),
										(t.indicatorForSlide = new l.IndicatorForSlide(t)),
										(t.pullupEnabled = !1),
										t
									);
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'hardwares', {
										get: function () {
											return a(this.locks, [this.handleForSlide], this.lock2s);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handleType', {
										get: function () {
											return this.handleForSlide.hardwareShape;
										},
										set: function (e) {
											this.sash.remove(this.handleForSlide),
												e === l.HardwareShape.HandleForSlide2
													? (this.handleForSlide = l.Handle.forSlide2(this))
													: e === l.HardwareShape.HandleForSlide3
													? (this.handleForSlide = l.Handle.forSlide3(this))
													: (this.handleForSlide = l.Handle.forSlide(this));
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.recreate = function () {
										var e = this;
										this.locks.forEach(function (t, n) {
											e.locks[n] = l.Handle.lock(e).cloneFrom(t).create();
										}),
											this.lock2s.forEach(function (t, n) {
												e.lock2s[n] = l.Handle.lock2(e).cloneFrom(t).create();
											}),
											(this.handleForSlide = l.Handle.forSlide(this)
												.cloneFrom(this.handleForSlide)
												.create()),
											(this.indicatorForSlide = new l.IndicatorForSlide(this).create());
									}),
									(t.prototype.updatePoly = function () {
										this.locks.forEach(function (e) {
											return e.updatePoly();
										}),
											this.lock2s.forEach(function (e) {
												return e.updatePoly();
											}),
											this.handleForSlide.updatePoly(),
											this.indicatorForSlide.updatePoly();
									}),
									(t.prototype.translate = function (e) {
										this.locks.forEach(function (t) {
											return t.translate(e);
										}),
											this.lock2s.forEach(function (t) {
												return t.translate(e);
											}),
											this.handleForSlide.translate(e),
											this.indicatorForSlide.translate(e);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.lock = this.locks.map(function (e) {
												return e.toJSON();
											})),
											(t.lock2s = this.lock2s.map(function (e) {
												return e.toJSON();
											})),
											(t.handleForSlide = this.handleForSlide.toJSON()),
											(t.pullupEnabled = this.pullupEnabled),
											(t.lockShape = this.lockShape),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										var n = this;
										return (
											e.prototype.deserialize.call(this, t),
											(this.lockShape = t.lockShape ? t.lockShape : l.HardwareShape.Lock),
											(this.locks = t.lock.map(function (e) {
												var t = l.Handle.lock(n);
												return t.deserialize(e), t;
											})),
											(this.lock2s = t.lock2s.map(function (e) {
												var t = l.Handle.lock2(n);
												return t.deserialize(e), t;
											})),
											(this.handleType = t.handleForSlide.hardwareShape),
											this.handleForSlide.deserialize(t.handleForSlide),
											(this.pullupEnabled = !!t.pullupEnabled),
											this
										);
									}),
									(t.prototype.draw = function (t) {
										e.prototype.draw.call(this, t), this.indicatorForSlide.draw(t);
									}),
									(t.prototype.fixData = function (t) {
										return (
											void 0 === (t = e.prototype.fixData.call(this, t)).lock.hardwareShape &&
												(t.lock.hardwareShape = l.HardwareShape.Lock),
											void 0 === t.handleForSlide.hardwareShape &&
												(t.handleForSlide.hardwareShape = l.HardwareShape.HandleForSlide),
											Array.isArray(t.lock) || (t.lock = [t.lock]),
											void 0 === t.lock2s && (t.lock2s = []),
											t
										);
									}),
									t
								);
							})(s.HardwareManager);
						t.SlideHardwareManager = h;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							a =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(o(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FoldHardwareManager = void 0);
						var s = n(13),
							l = n(1),
							h = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (t.handleForFold = l.Handle.forFold(t)), (t.lock = l.Handle.lock(t)), t;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'hardwares', {
										get: function () {
											return a(this.hinges, [this.handle, this.handleForFold, this.lock]);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.create = function () {
										return (
											e.prototype.create.call(this),
											this.handleForFold.create(),
											this.lock.create(),
											this
										);
									}),
									(t.prototype.recreate = function () {
										e.prototype.recreate.call(this),
											(this.handleForFold = l.Handle.forFold(this)
												.cloneFrom(this.handleForFold)
												.create()),
											(this.lock = l.Handle.lock(this).cloneFrom(this.lock).create());
									}),
									(t.prototype.updatePoly = function () {
										e.prototype.updatePoly.call(this),
											this.handleForFold.updatePoly(),
											this.lock.updatePoly();
									}),
									(t.prototype.translate = function (t) {
										e.prototype.translate.call(this, t),
											this.handleForFold.translate(t),
											this.lock.translate(t);
									}),
									(t.prototype.toJSON = function () {
										var t = e.prototype.toJSON.call(this);
										return (
											(t.handleForFold = this.handleForFold.toJSON()),
											(t.lock = this.lock.toJSON()),
											t
										);
									}),
									(t.prototype.deserialize = function (t) {
										return (
											e.prototype.deserialize.call(this, t),
											this.handleForFold.deserialize(t.handleForFold),
											t.lock && this.lock.deserialize(t.lock),
											this
										);
									}),
									(t.prototype.fixData = function (t) {
										return (
											void 0 ===
												(t = e.prototype.fixData.call(this, t)).handleForFold.hardwareShape &&
												(t.handleForFold.hardwareShape = l.HardwareShape.HandleForFold),
											t
										);
									}),
									(t.prototype.syncHandlesForFold = function (e, t, n) {
										var r = e.tangentInStart(),
											i = this.handleForFold;
										if (i.edge) {
											var o = i.edge.tangentInStart(),
												a = this.isVertical ? r.x * o.x < 0 : r.y * o.y < 0;
											(i.percentOffset = a ? 1 - t : t), i.updatePoly(), i.draw(n);
										}
									}),
									t
								);
							})(s.PushSashHardwareManager);
						t.FoldHardwareManager = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShutterManager = t.ShutterOrientation = void 0);
						var a,
							s = o(n(0)),
							l = n(9),
							h = n(2),
							c = n(1);
						!(function (e) {
							(e.horizon = 'horizon'), (e.vertical = 'vertical');
						})((a = t.ShutterOrientation || (t.ShutterOrientation = {})));
						var u = (function () {
							function e(e, t, n) {
								var r = this;
								(this.host = e),
									(this.polyId = t),
									(this.findHandle = n),
									(this.orientation = a.horizon),
									(this.verticalRotateAngle = Math.PI / 2),
									(this.hMulsCount = 0),
									(this.where = c.ShapeType.AntiTheftMullion),
									(this.findPoly = function (e) {
										return r.splitter.findPoly(e);
									});
								var i = this.host.topFrame.profileSizeManager;
								(this.gap = i.get(c.ShapeType.AntiTheftGap)),
									(this.handleW = i.get(c.ShapeType.AntiTheftHandleW)),
									(this.splitter = new l.SplitterAgent(this.host, this.where)),
									this.updatePoly();
							}
							return (
								Object.defineProperty(e.prototype, 'innerPolys', {
									get: function () {
										return this.splitter.subs.filter(function (e) {
											return !e.IsMullion;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'pushSash', {
									get: function () {
										var e = this.findHandle(this.polyId);
										return e && e instanceof c.PushSash ? e : void 0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'allProfileSize', {
									set: function (e) {
										this.splitter.allProfileSize = e;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'inactive', {
									get: function () {
										return this.bars.every(function (e) {
											return !e.highlighted;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.handlePosition = function (e) {
									if (e instanceof c.DoubleSash) {
										var t = e.sashes[0].hardwareManager.handle;
										return t instanceof c.Handle ? t.projectionPosition : t.position;
									}
									return e.hardwareManager.handle.position;
								}),
								(e.prototype.create = function () {
									var e = this;
									(this.splitter.subs = []),
										(this.splitter.lines = []),
										this.splitter.dockMgr.clear();
									var t = this.findHandle(this.polyId),
										n = this.calcShutterPts(t, this.orientation);
									if (0 !== n.length) {
										var r = n.pop(),
											i = s.default.point(),
											o = s.default.vector(),
											l = this.host.offvec.clone();
										t &&
											((i = this.handlePosition(t).clone()),
											(o = t.offvec.clone()),
											this.orientation === a.vertical &&
												((l = s.default.vector()),
												(i = i.rotate(
													this.verticalRotateAngle,
													this.host.innerPoly[0].clone().translate(l.invert()).box.center,
												)),
												(o = o.rotate90CW())));
										for (var u = 0, p = 0; p < n.length; p++) {
											var f = n[p],
												d = !1;
											if (
												(t && r.equalTo(s.default.point(f.x, f.y)) && ((f = n[p + 1]), (d = !0)),
												void 0 !== f)
											) {
												var g = new h.SplitterObj();
												if (
													((g.polyId.idx = u - 1),
													(g.polyId.pos = 0 === p ? -1 : 0),
													(g.line = s.default.line(f.translate(l), s.default.vector(0, 1))),
													this.splitter.lines.push(g),
													d && this.host.showHandleBars)
												) {
													if (((f = n[p]), t instanceof c.PushSash)) {
														((v = new h.SplitterObj()).polyId.idx = u), (v.polyId.pos = 1);
														var y =
																t.hardwareManager.isLeftOpen || t.hardwareManager.isDownOpen
																	? -this.handleW
																	: this.handleW,
															m = i.x - o.x + y;
														(v.line = s.default.line(
															s.default.point(m, f.y).translate(l),
															s.default.vector(-1, 0),
														)),
															this.splitter.lines.push(v),
															((v = new h.SplitterObj()).polyId.idx = u + 1),
															(v.polyId.pos =
																t.hardwareManager.isLeftOpen || t.hardwareManager.isDownOpen
																	? 0
																	: 1),
															(v.line = s.default.line(f.translate(l), s.default.vector(0, 1))),
															this.splitter.lines.push(v);
													} else {
														var v;
														((v = new h.SplitterObj()).polyId.idx = u),
															(v.polyId.pos = 1),
															(m = i.x - o.x - this.handleW / 2),
															(v.line = s.default.line(
																s.default.point(m, f.y).translate(l),
																s.default.vector(-1, 0),
															)),
															this.splitter.lines.push(v),
															((v = new h.SplitterObj()).polyId.idx = u + 1),
															(v.polyId.pos = 1),
															(m = i.x - o.x + this.handleW / 2),
															(v.line = s.default.line(
																s.default.point(m, f.y).translate(l),
																s.default.vector(-1, 0),
															)),
															this.splitter.lines.push(v),
															((v = new h.SplitterObj()).polyId.idx = u + 1),
															(v.polyId.pos = 0),
															(v.line = s.default.line(f.translate(l), s.default.vector(0, 1))),
															this.splitter.lines.push(v),
															((v = new h.SplitterObj()).polyId.idx = u + 2),
															(v.polyId.pos = 1),
															(v.line = s.default.line(f.translate(l), s.default.vector(0, 1))),
															this.splitter.lines.push(v);
													}
													p++;
												} else u = this.splitter.lines.length - 1;
												u++;
											}
										}
										this.orientation === a.vertical &&
											this.splitter.lines.forEach(function (t, n, r) {
												r[n].line = s.default.line(
													t.line.pt
														.rotate(
															-e.verticalRotateAngle,
															e.host.innerPoly[0].clone().translate(l.invert()).box.center,
														)
														.translate(e.host.offvec),
													t.line.norm.rotate(-e.verticalRotateAngle),
												);
											});
									}
								}),
								(e.prototype.getBoxPts = function (e, t, n, r, i, o) {
									void 0 === i && (i = !0), void 0 === o && (o = 0);
									var a = s.default.point(r, e),
										l = [];
									if (i) for (a.y = e; a.y + o < t; ) l.push(a.clone()), (a.y = a.y + n);
									else for (a.y = t; a.y - o > e; ) l.push(a.clone()), (a.y = a.y - n);
									return [l, a];
								}),
								(e.prototype.sashType = function (e) {
									return e instanceof c.PushSash
										? e.type
										: e.type === c.ShapeType.DoubleScreen
										? c.ShapeType.Screen
										: c.ShapeType.Sash;
								}),
								(e.prototype.calcShutterPts = function (e, t) {
									var n, o, l, h, c;
									void 0 === t && (t = a.horizon);
									var u = this.host.innerPoly[0]
										.clone()
										.translate(this.host.offvec.clone().invert()).box;
									t === a.vertical &&
										(u = this.host.innerPoly[0]
											.clone()
											.translate(this.host.offvec.clone().invert())
											.rotate(this.verticalRotateAngle, u.center).box);
									var p = this.host.topFrame.profileSizeManager,
										f = p.get(this.where),
										d = s.default.point(),
										g = [];
									if (e) {
										var y = !1,
											m = this.handlePosition(e).clone(),
											v = e.offvec.clone();
										if (
											(t === a.horizon
												? (y = !0)
												: t === a.vertical &&
												  ((y = !0),
												  (m = m.rotate(this.verticalRotateAngle, u.center)),
												  (v = v.rotate90CW())),
											y)
										) {
											var w = void 0,
												b = void 0,
												S = m.y - v.y,
												_ = s.default.point(u.center.x, S);
											if (this.hMulsCount) {
												(C =
													(u.ymax - u.ymin - p.antiTheftMullion * this.hMulsCount) /
													(this.hMulsCount + 1)),
													(k = u.ymin + C + p.antiTheftMullion / 2),
													(F = C + p.antiTheftMullion),
													(g = (l = r(this.getBoxPts(k, u.ymax, F, u.center.x), 2))[0]),
													(d = l[1]);
												var P = 0,
													x = Math.abs(S - g[0].y);
												g.forEach(function (e, t) {
													var n = Math.abs(S - e.y);
													n < x && ((x = n), (P = t));
												}),
													(w = g.slice(0, P).reverse()),
													(b = g.slice(P + 1, g.length)),
													(_ = s.default.point(u.center.x, g[P].y));
											} else {
												var D = Math.abs(p.get(this.sashType(e)) - p.get(this.host.type)),
													T = this.host.holeHeight,
													O = S - T / 2 - f / 2,
													M = S + T / 2 + f / 2,
													E = p.antiTheftMullion / 2,
													I = D >= E ? 0 : E - D;
												(w = (h = r(
													this.getBoxPts(u.ymin + D, O, this.gap, u.center.x, !1, I),
													2,
												))[0]),
													(d = h[1]),
													(b = (c = r(
														this.getBoxPts(M, u.ymax - D, this.gap, u.center.x, !0, I),
														2,
													))[0]),
													(d = c[1]);
											}
											(g = i(w, [_], b)),
												(d = _.clone()),
												g.forEach(function (e) {
													return (e.y += v.y);
												}),
												g.sort(function (e, t) {
													return e.y - t.y;
												});
										}
									} else if (this.hMulsCount) {
										var C =
												(u.ymax - u.ymin - p.antiTheftMullion * this.hMulsCount) /
												(this.hMulsCount + 1),
											k = u.ymin + C + p.antiTheftMullion / 2,
											F = C + p.antiTheftMullion;
										(g = (n = r(this.getBoxPts(k, u.ymax, F, u.center.x), 2))[0]), (d = n[1]);
									} else
										(g = (o = r(
											this.getBoxPts(u.ymin + this.gap, u.ymax, this.gap, u.center.x),
											2,
										))[0]),
											(d = o[1]);
									return g.push(d), g;
								}),
								(e.prototype.clear = function () {
									var e = this;
									this.bars.forEach(function (t) {
										return e.host.remove(t);
									});
								}),
								(e.prototype.hitTest = function (e) {
									return this.splitter.hitTest(e);
								}),
								(e.prototype.updatePoly = function () {
									var e = this;
									this.clear(),
										this.host.polygon.isEmpty ||
											(this.create(),
											this.splitter.updatePoly().forEach(function (t) {
												var n = new c.Bar(t, e.where);
												e.host.add(n);
											}));
								}),
								Object.defineProperty(e.prototype, 'bars', {
									get: function () {
										var e = this,
											t = [];
										return (
											this.host.children.forEach(function (n) {
												n instanceof c.Bar && n.where === e.where && t.push(n);
											}),
											t
										);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'selected', {
									get: function () {
										return this.bars.some(function (e) {
											return e.highlighted;
										});
									},
									enumerable: !1,
									configurable: !0,
								}),
								(e.prototype.draw = function (e) {
									this.bars.forEach(function (t) {
										return t.draw(e);
									});
								}),
								(e.prototype.translate = function (e) {
									this.bars.forEach(function (t) {
										return t.translate(e);
									}),
										this.splitter.translate(e);
								}),
								(e.prototype.hitBar = function (e, t) {
									var n = h.HitResult.None;
									return (
										this.bars.forEach(function (t) {
											var r = t.hitTest(e);
											t.highlight(r), r && (n = h.HitResult.Bar);
										}),
										n
									);
								}),
								e
							);
						})();
						t.ShutterManager = u;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShapeActor = void 0);
						var s = a(n(0)),
							l = n(5),
							h = n(6),
							c = n(7),
							u = n(82),
							p = n(9),
							f = n(13),
							d = n(11),
							g = n(2),
							y = n(1),
							m = (function () {
								function e(e) {
									(this.view = e),
										(this.subFrames = []),
										(this.shapem = []),
										(this.couples = []),
										(this.walls = []),
										(this.notes = []),
										(this.extraPersonImages = []),
										this.hookEvent();
								}
								return (
									Object.defineProperty(e.prototype, 'forms', {
										get: function () {
											return i(this.shapem, this.couples);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.addSubFrame = function (e) {
										var t = new y.SubFrame(e, this.view);
										this.subFrames.push(t),
											t.updatePoly(),
											t.draw(),
											t.updateRelatedTargets(),
											this.view.refresh(),
											this.view.mometoManager.checkPoint();
									}),
									(e.prototype.drag = function (e, t, n, r) {
										var i, a;
										void 0 === n && (n = s.default.point()), void 0 === r && (r = !1);
										try {
											for (var l = o(this.shapem), h = l.next(); !h.done; h = l.next()) {
												var c = h.value;
												if (c.drag(e, t, n)) {
													r || -1 === e.polyId.pos || c.setBarDimAlign(e), c.draw(this.view);
													break;
												}
											}
										} catch (e) {
											i = {
												error: e,
											};
										} finally {
											try {
												h && !h.done && (a = l.return) && a.call(l);
											} finally {
												if (i) throw i.error;
											}
										}
										r || this.optimizeHandleDim(),
											this.refreshTotalHeight(),
											this.refreshTotalWidth(),
											this.view.refresh();
									}),
									(e.prototype.dragInner = function (e, t, n, r) {
										var i, a, s;
										void 0 === r && (r = !1);
										try {
											try {
												for (var l = o(this.shapem), h = l.next(); !h.done; h = l.next()) {
													var c = h.value;
													if (((s = c), c.dragInner(e, t, n))) {
														c.draw(this.view);
														break;
													}
												}
											} catch (e) {
												i = {
													error: e,
												};
											} finally {
												try {
													h && !h.done && (a = l.return) && a.call(l);
												} finally {
													if (i) throw i.error;
												}
											}
										} catch (e) {
											s.draw(this.view), console.warn(('' + e).split(/\r?\n/)[0]);
										} finally {
											this.view.refresh();
										}
									}),
									(e.prototype.add = function (t) {
										var n;
										return (
											(n =
												t instanceof y.ThreeDimensionalArcPoly
													? new y.ThreedArcFrame(t, this.view)
													: new y.Frame(t, this.view)).draw(this.view),
											this.shapem.push(n),
											new d.FrameUtil(this.view).snapFrame(n),
											this.refreshDimStatus(),
											this.view.refresh(),
											e.emitStructureChanged(this.view),
											n
										);
									}),
									(e.prototype.addFrame = function (e) {
										var t = e.map(function (e) {
											var t = s.default.segment(
												s.default.point(e.start.x, e.start.y),
												s.default.point(e.end.x, e.end.y),
											);
											if (e.middle)
												return p.ArcUtils.CreateArcFrom3Points(
													t.start,
													t.end,
													s.default.point(e.middle.x, e.middle.y),
												);
											if (e.chordHeight) {
												var n = t.tangentInStart(),
													r = t.start.translate(
														n.multiply(t.length / 2).add(n.rotate90CW().multiply(e.chordHeight)),
													);
												return p.ArcUtils.CreateArcFrom3Points(t.start, t.end, r);
											}
											return t;
										});
										this.add(new y.WinPolygon(t));
									}),
									(e.prototype.addSimpleFrame = function (e) {
										var t,
											n,
											r,
											i,
											o,
											a = function (e, t) {
												return d.EdgeFinder.Instance.find(e, t.edges, t.orientation);
											};
										if (
											((t =
												'springline' === e.type
													? this.add(
															new y.SpringlinePoly(
																s.default.point(),
																e.width,
																e.height - e.arcHeight,
																e.arcHeight,
															),
													  )
													: this.addRectFrame(e.width, e.height)),
											e.widthL)
										) {
											var h = a(d.Direction.Left, t.polygon);
											(i = this.addCornerJoiner(h.middle())),
												(n = this.addRectFrame(e.widthL, e.height, s.default.vector(-99999, 0))),
												e.angleL &&
													i &&
													i.updateSkewAngle(e.angleL, this.view, y.SkewPartEnum.TopView);
										}
										if (e.widthR) {
											var c = a(d.Direction.Right, t.polygon);
											(o = this.addCornerJoiner(c.middle())),
												(r = this.addRectFrame(e.widthR, e.height, s.default.vector(99999, 0))),
												e.angleR &&
													o &&
													o.updateSkewAngle(e.angleR, this.view, y.SkewPartEnum.TopView);
										}
										if (e.wallL) {
											var u = n || t,
												p =
													((h = a(d.Direction.Left, u.polygon)),
													l.WallTool.makeWall(h, u.polygon.orientation, e.wallL));
											this.addWall(p);
										}
										if (e.wallR) {
											var f = r || t;
											(c = a(d.Direction.Right, f.polygon)),
												(p = l.WallTool.makeWall(c, f.polygon.orientation, e.wallR)),
												this.addWall(p);
										}
										if (e.wallU) {
											var g = a(d.Direction.Down, t.polygon);
											(p = l.WallTool.makeWall(g, t.polygon.orientation, e.wallU)), this.addWall(p);
										}
										if (e.wallD) {
											var m = a(d.Direction.Up, t.polygon);
											if (
												((p = l.WallTool.makeWall(m, t.polygon.orientation, e.wallD)),
												this.addWall(p),
												n)
											) {
												m = a(d.Direction.Up, n.polygon);
												var v = l.WallTool.makeWall(m, n.polygon.orientation, e.wallD);
												this.addWall(v);
											}
											if (r) {
												m = a(d.Direction.Up, r.polygon);
												var w = l.WallTool.makeWall(m, r.polygon.orientation, e.wallD);
												this.addWall(w);
											}
										}
									}),
									(e.prototype.addPlatformWall = function (e) {
										var t = this.shapem[0].polygon,
											n = d.EdgeFinder.Instance.find(d.Direction.Up, t.edges, t.orientation),
											r = l.WallTool.makeWall(n, t.orientation, e);
										this.addWall(r);
									}),
									(e.prototype.addRectFrame = function (e, t, n) {
										void 0 === n && (n = s.default.vector());
										var r = y.PolygonCreator.Ins.joinRelativePro([
											s.default.vector(e, 0),
											s.default.vector(0, t),
											s.default.vector(-e, 0),
										]).translate(n);
										return this.add(r);
									}),
									(e.prototype.addWall = function (t) {
										var n = new y.Wall(t, this.view);
										n.updatePoly(),
											n.draw(this.view),
											this.walls.push(n),
											this.refreshDimStatus(),
											e.emitStructureChanged(this.view),
											this.updateAllDimToGround();
									}),
									(e.prototype.addNote = function (e, t, n) {
										void 0 === n && (n = !1);
										var r = new y.Note(e, t, t.translate(500, 0));
										(r.multiline = n),
											n && (r.align = y.TextAlign.Left),
											r.updatePoly(),
											r.draw(this.view),
											this.notes.push(r),
											this.view.refresh();
									}),
									(e.prototype.addExtraPersonImage = function (e, t, n, r, i, o, a, s) {
										var l = new y.ExtraPersonImage(e, t, n, r, i, o, a, s);
										l.updatePoly(),
											l.draw(this.view),
											this.extraPersonImages.push(l),
											this.view.refresh();
									}),
									(e.prototype.addMullion = function (t) {
										var n, r;
										try {
											for (var i = o(this.shapem), a = i.next(); !a.done; a = i.next()) {
												var s = a.value;
												if (s.addMullion(t)) {
													s.draw(this.view), e.emitStructureChanged(this.view);
													break;
												}
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (r = i.return) && r.call(i);
											} finally {
												if (n) throw n.error;
											}
										}
										this.view.refresh();
									}),
									(e.prototype.addDecorationBar = function (e, t) {
										var n, r;
										try {
											for (var i = o(this.shapem), a = i.next(); !a.done; a = i.next()) {
												var s = a.value;
												if (s.addDecorationBar(e, t)) {
													s.draw(this.view);
													break;
												}
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (r = i.return) && r.call(i);
											} finally {
												if (n) throw n.error;
											}
										}
										this.view.refresh();
									}),
									(e.prototype.addSash = function (t, n) {
										var r, i;
										void 0 === n && (n = y.ShapeType.Sash);
										try {
											try {
												for (var a = o(this.shapem), s = a.next(); !s.done; s = a.next()) {
													var l = s.value;
													if (l.addSash(t, n)) {
														l.draw(this.view),
															e.emitStructureChanged(this.view),
															this.optimizeHandleDim();
														break;
													}
													if (void 0 !== l.mulManager.hitTest(t)) {
														this.view.toolManager.releaseTool();
														break;
													}
												}
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													s && !s.done && (i = a.return) && i.call(a);
												} finally {
													if (r) throw r.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addInnerSash = function (t, n) {
										var r, i;
										void 0 === n && (n = y.ShapeType.Sash);
										try {
											try {
												for (var a = o(this.shapem), s = a.next(); !s.done; s = a.next()) {
													var l = s.value;
													if (l.sashManager.addInnerSash(t)) {
														l.draw(this.view),
															e.emitStructureChanged(this.view),
															this.optimizeHandleDim();
														break;
													}
												}
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													s && !s.done && (i = a.return) && i.call(a);
												} finally {
													if (r) throw r.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.optimizeHandleDim = function () {
										this.optimizeDimToGround(), this.optimizeDimToSash(), this.optimizeDimToMid();
									}),
									(e.prototype.optimizeDimToGround = function () {
										var e = this,
											t = this.shapem
												.map(function (e) {
													return i(
														e.sashManager.sashes,
														e.sashManager.kfcSashes,
														e.sashManager.doubleSashes
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
														e.sashManager.doubleKfcSashes
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
													);
												})
												.flat();
										t.push.apply(
											t,
											i(
												t
													.map(function (e) {
														return e.sashManager.sashes;
													})
													.flat(),
											),
										);
										var n = t
												.filter(function (e) {
													return !e.hardwareManager.handle.dim.hidden;
												})
												.map(function (e) {
													return e.hardwareManager.handle;
												}),
											r = new Map();
										n.forEach(function (e) {
											e.dim.locate();
											var t = e.dim.value;
											r.has(t) ? r.get(t).push(e) : r.set(t, [e]);
										}),
											r.forEach(function (t) {
												var n = t.findIndex(function (e) {
													return !e.dim.hidden;
												});
												(n = -1 === n ? 0 : n),
													t.forEach(function (t, r) {
														(t.dim.hidden = n !== r),
															t.dim.vshapes.forEach(function (e) {
																return e.moveToTop();
															}),
															t.updatePoly(),
															t.draw(e.view);
													});
											});
									}),
									(e.prototype.optimizeDimToSash = function () {
										var e = this,
											t = this.shapem
												.map(function (e) {
													return i(
														e.sashManager.sashes,
														e.sashManager.kfcSashes,
														e.sashManager.doubleSashes
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
														e.sashManager.doubleKfcSashes
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
													);
												})
												.flat();
										t.push.apply(
											t,
											i(
												t
													.map(function (e) {
														return e.sashManager.sashes;
													})
													.flat(),
											),
										);
										var n = t
												.filter(function (e) {
													return !e.hardwareManager.handle.dimToSash.hidden;
												})
												.map(function (e) {
													return e.hardwareManager.handle;
												}),
											r = new Map();
										n.forEach(function (e) {
											e.dimToSash.locate();
											var t = e.dimToSash.value;
											r.has(t) ? r.get(t).push(e) : r.set(t, [e]);
										}),
											r.forEach(function (t) {
												var n = t.findIndex(function (e) {
													return !e.dimToSash.hidden;
												});
												(n = -1 === n ? 0 : n),
													t.forEach(function (t, r) {
														(t.dimToSash.hidden = n !== r),
															t.dimToSash.vshapes.forEach(function (e) {
																return e.moveToTop();
															}),
															t.updatePoly(),
															t.draw(e.view);
													});
											});
									}),
									(e.prototype.optimizeDimToMid = function () {
										var e = this,
											t = this.shapem
												.map(function (e) {
													return i(
														e.sashManager.sashes,
														e.sashManager.kfcSashes,
														e.sashManager.doubleSashes
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
														e.sashManager.doubleKfcSashes
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
													);
												})
												.flat();
										t.push.apply(
											t,
											i(
												t
													.map(function (e) {
														return e.sashManager.sashes;
													})
													.flat(),
											),
										);
										var n = t
												.filter(function (e) {
													return (
														e.hardwareManager.handle instanceof y.Handle &&
														!e.hardwareManager.handle.dimToMid.hidden &&
														0 !== e.hardwareManager.handle.dimToMid.value
													);
												})
												.map(function (e) {
													return e.hardwareManager.handle;
												}),
											r = new Map();
										n.forEach(function (e) {
											e.dimToMid.locate();
											var t = e.dimToMid.value;
											r.has(t) ? r.get(t).push(e) : r.set(t, [e]);
										}),
											r.forEach(function (t) {
												var n = t.findIndex(function (e) {
													return !e.dimToMid.hidden;
												});
												(n = -1 === n ? 0 : n),
													t.forEach(function (t, r) {
														(t.dimToMid.hidden = n !== r),
															t.dimToMid.vshapes.forEach(function (e) {
																return e.moveToTop();
															}),
															t.updatePoly(),
															t.draw(e.view);
													});
											});
									}),
									(e.prototype.updateAllDimToGround = function () {
										var e = this;
										this.shapem.forEach(function (t) {
											t.sashManager.allSashes
												.filter(function (e) {
													return (
														e instanceof y.PushSash ||
														e instanceof y.SlideSash ||
														e instanceof y.FoldSash
													);
												})
												.forEach(function (t) {
													var n = t.hardwareManager;
													(n instanceof f.SlideHardwareManager
														? i(n.locks, n.lock2s)
														: [n.handle]
													).forEach(function (t) {
														var n = t.dim;
														if (t.lockDimToGround) t.updatePoly(), t.draw(e.view);
														else {
															if (t.hidden) return;
															n.updatePoly(), n.draw(e.view);
														}
													});
												});
										});
									}),
									(e.prototype.refreshWalls = function () {
										var e = this;
										this.walls.forEach(function (t) {
											t.updatePoly(), t.draw(e.view);
										});
									}),
									(e.prototype.addKfcSash = function (t, n) {
										var r, i;
										void 0 === n && (n = y.ShapeType.Sash);
										try {
											try {
												for (var a = o(this.shapem), s = a.next(); !s.done; s = a.next()) {
													var l = s.value;
													if (l.addKfcSash(t, n)) {
														l.draw(this.view),
															e.emitStructureChanged(this.view),
															this.optimizeHandleDim();
														break;
													}
													if (void 0 !== l.mulManager.hitTest(t)) {
														this.view.toolManager.releaseTool();
														break;
													}
												}
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													s && !s.done && (i = a.return) && i.call(a);
												} finally {
													if (r) throw r.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addDoubleKfcSash = function (t) {
										var n, r;
										try {
											try {
												for (var i = o(this.shapem), a = i.next(); !a.done; a = i.next()) {
													var s = a.value;
													if (s.addDoubleKfcSash(t)) {
														s.draw(this.view),
															e.emitStructureChanged(this.view),
															this.optimizeHandleDim();
														break;
													}
													if (void 0 !== s.mulManager.hitTest(t)) {
														this.view.toolManager.releaseTool();
														break;
													}
												}
											} catch (e) {
												n = {
													error: e,
												};
											} finally {
												try {
													a && !a.done && (r = i.return) && r.call(i);
												} finally {
													if (n) throw n.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addShutter = function (t) {
										var n, r;
										try {
											try {
												for (var i = o(this.shapem), a = i.next(); !a.done; a = i.next()) {
													var s = a.value;
													if (s.addShutter(t)) {
														s.draw(this.view), e.emitStructureChanged(this.view);
														break;
													}
												}
											} catch (e) {
												n = {
													error: e,
												};
											} finally {
												try {
													a && !a.done && (r = i.return) && r.call(i);
												} finally {
													if (n) throw n.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addDoubleSash = function (t, n) {
										var r, i;
										void 0 === n && (n = y.ShapeType.DoubleSash);
										try {
											try {
												for (var a = o(this.shapem), s = a.next(); !s.done; s = a.next()) {
													var l = s.value;
													if (l.addDoubleSash(t, n)) {
														l.draw(this.view),
															e.emitStructureChanged(this.view),
															this.optimizeHandleDim();
														break;
													}
													if (void 0 !== l.mulManager.hitTest(t)) {
														this.view.toolManager.releaseTool();
														break;
													}
												}
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													s && !s.done && (i = a.return) && i.call(a);
												} finally {
													if (r) throw r.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addSlide = function (t, n) {
										var r, i;
										try {
											try {
												for (var a = o(this.shapem), s = a.next(); !s.done; s = a.next()) {
													var l = s.value;
													if (l.addSlide(t, n)) {
														l.draw(this.view), e.emitStructureChanged(this.view);
														break;
													}
												}
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													s && !s.done && (i = a.return) && i.call(a);
												} finally {
													if (r) throw r.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addFold = function (t, n) {
										var r, i;
										void 0 === n && (n = y.ShapeType.FoldSash);
										try {
											try {
												for (var a = o(this.shapem), s = a.next(); !s.done; s = a.next()) {
													var l = s.value;
													if (l.addFold(t, n)) {
														l.draw(this.view), e.emitStructureChanged(this.view);
														break;
													}
												}
											} catch (e) {
												r = {
													error: e,
												};
											} finally {
												try {
													s && !s.done && (i = a.return) && i.call(a);
												} finally {
													if (r) throw r.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addShadePushSash = function (t) {
										var n, r;
										try {
											try {
												for (var i = o(this.shapem), a = i.next(); !a.done; a = i.next()) {
													var s = a.value;
													if (s.addShadePushSash(t)) {
														s.draw(this.view), e.emitStructureChanged(this.view);
														break;
													}
												}
											} catch (e) {
												n = {
													error: e,
												};
											} finally {
												try {
													a && !a.done && (r = i.return) && r.call(i);
												} finally {
													if (n) throw n.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addDoubleShadePushSash = function (t) {
										var n, r;
										try {
											try {
												for (var i = o(this.shapem), a = i.next(); !a.done; a = i.next()) {
													var s = a.value;
													if (s.addDoubleShadePushSash(t)) {
														s.draw(this.view), e.emitStructureChanged(this.view);
														break;
													}
												}
											} catch (e) {
												n = {
													error: e,
												};
											} finally {
												try {
													a && !a.done && (r = i.return) && r.call(i);
												} finally {
													if (n) throw n.error;
												}
											}
											this.view.refresh();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addCornerJoiner = function (t, n) {
										void 0 === n && (n = y.ShapeType.CornerJoiner);
										try {
											var r = y.CornerJoiner.createFromNearest(t, this.view, n);
											if (void 0 !== r) {
												this.couples.push(r);
												var i = r.hostFrame;
												i &&
													i instanceof y.Frame &&
													(i.topView.updatePoly(), i.topView.draw(this.view)),
													this.view.shapeManager.refreshDimStatus(),
													r.draw(this.view),
													e.emitStructureChanged(this.view);
											}
											return this.view.refresh(), r;
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.addConnector = function (t) {
										try {
											var n = y.Connector.createFromNearest(t, this.view);
											return (
												void 0 !== n &&
													(this.couples.push(n),
													n.draw(this.view),
													this.view.shapeManager.refreshDimStatus(),
													e.emitStructureChanged(this.view)),
												this.view.refresh(),
												n
											);
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.equalizeMullion = function () {
										var t = this,
											n = !1;
										this.shapem.forEach(function (e) {
											var r = !1;
											e.mulManager.bars.forEach(function (t) {
												if (t.highlighted) {
													var i = t.polyId.idx;
													(e.mulManager.splitter.lines[i].equalSplit = g.EqualSplitType.Outter),
														(n = !0),
														(r = !0);
												}
											}),
												r && (e.updateFrame(e.mulManager.splitter.hasSplitBar), e.draw(t.view));
										}),
											n && (e.emitStructureChanged(this.view), this.view.refresh());
									}),
									(e.prototype.remove = function () {
										var t,
											n,
											r,
											o,
											a,
											s = this,
											l = [];
										this.shapem.forEach(function (e) {
											e.delete(s.view) || l.push(e);
										}),
											this.shapem.length !== l.length &&
												(this.shapem.splice(0, this.shapem.length),
												(t = this.shapem).push.apply(t, i(l)));
										var h = [];
										this.couples.forEach(function (e) {
											e.delete(s.view) || h.push(e);
										}),
											this.couples.length !== h.length &&
												(this.couples.splice(0, this.couples.length),
												(n = this.couples).push.apply(n, i(h)));
										var c = [];
										this.walls.forEach(function (e) {
											e.delete(s.view) || c.push(e);
										}),
											this.walls.length !== c.length &&
												(this.walls.splice(0, this.walls.length),
												(r = this.walls).push.apply(r, i(c))),
											this.updateAllDimToGround();
										var u = [];
										this.notes.forEach(function (e) {
											e.delete(s.view) || u.push(e);
										}),
											this.notes.length !== u.length &&
												(this.notes.splice(0, this.notes.length),
												(o = this.notes).push.apply(o, i(u)));
										var p = [];
										this.extraPersonImages.forEach(function (e) {
											e.delete(s.view) || p.push(e);
										}),
											this.extraPersonImages.length !== p.length &&
												(this.extraPersonImages.splice(0, this.extraPersonImages.length),
												(a = this.extraPersonImages).push.apply(a, i(p))),
											this.view.shapeManager.refreshDimStatus(),
											this.view.mometoManager.checkPoint(),
											e.emitStructureChanged(this.view),
											this.view.refresh();
									}),
									(e.prototype.clear = function (e) {
										void 0 === e && (e = !0),
											this.view.dragRob.hide(),
											this.subFrames.forEach(function (e) {
												return e.clear();
											}),
											this.subFrames.splice(0, this.subFrames.length),
											this.shapem.forEach(function (e) {
												return e.clearChildren();
											}),
											this.shapem.splice(0, this.shapem.length),
											this.walls.forEach(function (e) {
												return e.clearChildren();
											}),
											this.walls.splice(0, this.walls.length),
											this.couples.forEach(function (e) {
												return e.clearChildren();
											}),
											this.couples.splice(0, this.couples.length),
											this.notes.forEach(function (e) {
												return e.clearChildren();
											}),
											this.notes.splice(0, this.notes.length),
											this.extraPersonImages.forEach(function (e) {
												return e.clearChildren();
											}),
											this.extraPersonImages.splice(0, this.extraPersonImages.length),
											this.hideTotalWidth(),
											this.hideTotalHeight(),
											this.view.destoryAll(),
											this.view.mometoManager.checkPoint(),
											e && this.view.refresh();
									}),
									(e.prototype.hideAssist = function (e) {
										void 0 === e && (e = !0),
											e && this.view.dragRob.hide(),
											this.shapem.forEach(function (e) {
												return e.hideAssist();
											}),
											this.walls.forEach(function (e) {
												return e.hideAssist();
											}),
											this.couples.forEach(function (e) {
												return e.hideAssist();
											});
									}),
									(e.prototype.serialize = function (e) {
										if (
											(void 0 === e && (e = !1),
											0 === this.shapem.length &&
												0 === this.walls.length &&
												0 === this.notes.length)
										)
											return '';
										e && this.view.mometoManager.checkPoint(e);
										var t = {
											sm: [],
											wall: [],
											cp: [],
											note: [],
											sbf: [],
											scale: 0,
										};
										return (
											(t.sm = this.shapem.map(function (e) {
												return e.toJSON();
											})),
											(t.wall = this.walls.map(function (e) {
												return e.toJSON();
											})),
											(t.cp = this.couples.map(function (e) {
												return e.toJSON();
											})),
											(t.note = this.notes.map(function (e) {
												return e.toJSON();
											})),
											(t.sbf = this.subFrames.map(function (e) {
												return e.toJSON();
											})),
											(t.epi = this.extraPersonImages.map(function (e) {
												return e.toJSON();
											})),
											(t.twd = this.totalWidthDim ? this.totalWidthDim.toJSON() : void 0),
											(t.thd = this.totalHeightDim ? this.totalHeightDim.toJSON() : void 0),
											(t.wlc = g.ShapeColor.brick),
											(t.s = {
												cjs: this.view.params.cornerJoiner,
												cs: this.view.params.connector,
											}),
											JSON.stringify(t)
										);
									}),
									(e.prototype.preHandle = function (e) {
										try {
											var t = JSON.parse(e);
											return (
												Array.isArray(t) &&
													(t = {
														sm: t,
														wall: [],
														cp: [],
														note: [],
													}),
												t.wall || (t.wall = []),
												t.cp || (t.cp = []),
												t.note || (t.note = []),
												t
											);
										} catch (e) {
											return {
												sm: [],
												wall: [],
												cp: [],
												note: [],
											};
										}
									}),
									(e.prototype.deserialize = function (t) {
										this.hideAssist();
										var n = this.preHandle(t);
										this.deWallColor(n.wlc),
											this.deWall(n.wall),
											this.deFrame(n.sm),
											this.deCouple(n.cp),
											this.deNote(n.note),
											this.deSubFrame(n.sbf),
											this.deExtraPersonImage(n.epi),
											this.deExtraDim(),
											this.deTotalSizeDims(n.twd, n.thd),
											this.deSize(n);
										var r = i(this.shapem, this.couples).pop();
										r && !r.uid && this.resetAllUID(), e.emitStructureChanged(this.view);
									}),
									(e.prototype.deExtraDim = function () {
										var e = this;
										this.shapem.forEach(function (t) {
											return t.extraDimManager.extraDims.forEach(function (n) {
												n.updatePoly(t.polygon), n.draw(e.view);
											});
										});
									}),
									(e.prototype.deTotalSizeDims = function (e, t) {
										e
											? (this.showTotalWidth(), this.totalWidthDim.deserialize(e))
											: this.hideTotalWidth(),
											t
												? (this.showTotalHeight(), this.totalHeightDim.deserialize(t))
												: this.hideTotalHeight();
									}),
									(e.prototype.deSize = function (e) {
										e.s &&
											((this.view.params.cornerJoiner = e.s.cjs),
											(this.view.params.connector = e.s.cs));
									}),
									(e.prototype.deWallColor = function (e) {
										var t = this;
										e &&
											((g.ShapeColor.brick = e),
											g.FillPattern.Instance.Prepare(),
											setTimeout(function () {
												return t.view.refresh();
											}, 100));
									}),
									(e.prototype.append = function (t) {
										var n = this;
										this.hideAssist();
										var r = this.preHandle(t);
										r.wall.forEach(function (e) {
											return n.appendWall(e);
										}),
											r.sm.forEach(function (e) {
												return n.appendFrame(e, !0);
											}),
											r.cp.forEach(function (e) {
												return n.appendCouple(e);
											}),
											r.note.forEach(function (e) {
												return n.appendNote(e);
											}),
											void 0 !== r.epi &&
												r.epi.forEach(function (e) {
													n.appendExtraPersonImage(e);
												}),
											e.emitStructureChanged(this.view);
									}),
									(e.prototype.deFrame = function (e) {
										var t = this;
										if (e.length < this.shapem.length) {
											for (var n = e.length; n < this.shapem.length; n++) this.shapem[n].remove();
											this.shapem.splice(e.length, this.shapem.length - e.length);
										}
										e.forEach(function (e, n) {
											n < t.shapem.length ? t.shapem[n].deserialize(e, t.view) : t.appendFrame(e);
										});
									}),
									(e.prototype.appendFrame = function (e, t) {
										var n;
										void 0 === t && (t = !1),
											(n =
												y.PolyParser.parse(e.polygon) instanceof y.ThreeDimensionalArcPoly
													? new y.ThreedArcFrame(new y.WinPolygon(), this.view)
													: new y.Frame(new y.WinPolygon(), this.view)).deserialize(e, this.view),
											t && new d.FrameUtil(this.view).snapFrame(n, !0),
											this.shapem.push(n);
									}),
									(e.prototype.deWall = function (e) {
										var t = this;
										if (e.length < this.walls.length) {
											for (var n = e.length; n < this.walls.length; n++) this.walls[n].remove();
											this.walls.splice(e.length, this.walls.length - e.length);
										}
										e.forEach(function (e, n) {
											n < t.walls.length ? t.walls[n].deserialize(e, t.view) : t.appendWall(e);
										});
									}),
									(e.prototype.appendWall = function (e) {
										var t = new y.Wall(new y.WinPolygon(), this.view);
										this.walls.push(t), t.deserialize(e, this.view);
									}),
									(e.prototype.deNote = function (e) {
										var t = this;
										if (e.length < this.notes.length) {
											for (var n = e.length; n < this.notes.length; n++) this.notes[n].remove();
											this.notes.splice(e.length, this.notes.length - e.length);
										}
										e.forEach(function (e, n) {
											n < t.notes.length ? t.notes[n].deserialize(e, t.view) : t.appendNote(e);
										});
									}),
									(e.prototype.deSubFrame = function (e) {
										var t = this;
										if (Array.isArray(e)) {
											if (e.length < this.subFrames.length) {
												for (var n = e.length; n < this.subFrames.length; n++)
													this.subFrames[n].clear();
												this.subFrames.splice(e.length, this.subFrames.length - e.length);
											}
											e.forEach(function (e, n) {
												if (n < t.subFrames.length) t.subFrames[n].deserialize(e);
												else {
													var r = new y.SubFrame([], t.view);
													r.deserialize(e), t.subFrames.push(r);
												}
											});
										}
									}),
									(e.prototype.appendNote = function (e) {
										var t = new y.Note();
										this.notes.push(t), t.deserialize(e, this.view);
									}),
									(e.prototype.deCouple = function (e) {
										var t = this;
										if (e.length < this.couples.length) {
											for (var n = e.length; n < this.couples.length; n++) this.couples[n].remove();
											this.couples.splice(e.length, this.couples.length - e.length);
										}
										e.forEach(function (e, n) {
											n < t.couples.length
												? t.couples[n].deserialize(e, t.view)
												: t.appendCouple(e);
										}),
											this.couples.forEach(function (e) {
												e instanceof y.CornerJoiner
													? e.skewFrame(t.view)
													: e instanceof y.Connector && e.skewTCorner();
											});
									}),
									(e.prototype.appendCouple = function (e) {
										this.couples.push(y.Couple.deCouple(e, this.view));
									}),
									(e.prototype.deExtraPersonImage = function (e) {
										var t = this;
										if (void 0 !== e) {
											if (e.length < this.extraPersonImages.length) {
												for (var n = e.length; n < this.extraPersonImages.length; n++)
													this.extraPersonImages[n].remove();
												this.extraPersonImages.splice(
													e.length,
													this.extraPersonImages.length - e.length,
												);
											}
											e.forEach(function (e, n) {
												n < t.extraPersonImages.length
													? t.extraPersonImages[n].deserialize(e, t.view)
													: t.appendExtraPersonImage(e);
											});
										}
									}),
									(e.prototype.appendExtraPersonImage = function (e) {
										var t = new y.ExtraPersonImage();
										this.extraPersonImages.push(t), t.deserialize(e, this.view);
									}),
									Object.defineProperty(e.prototype, 'windowBox', {
										get: function () {
											var e = new s.default.Box();
											return (
												this.shapem.forEach(function (t) {
													var n = t.polygon.box;
													isNaN(n.xmax) || (e = e.merge(n));
												}),
												this.couples.forEach(function (t) {
													var n = t.windowBox();
													isNaN(n.xmax) || (e = e.merge(n));
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'windowWithDimBox', {
										get: function () {
											var e = new s.default.Box();
											return (
												this.shapem.forEach(function (t) {
													var n = t.boxWithoutTransform();
													isNaN(n.xmax) || (e = e.merge(n));
												}),
												this.couples.forEach(function (t) {
													var n = t.windowBox();
													isNaN(n.xmax) || (e = e.merge(n));
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.checkTotalDimDuplicate = function (e) {
										var t = e.from,
											n = e.to,
											r = [];
										this.shapem.forEach(function (e) {
											(r = i(
												r,
												e.dim.diMgr.visualDims.filter(function (e) {
													return e.type === u.DimType.Line;
												}),
											)),
												e instanceof y.ThreedArcFrame &&
													r.push.apply(r, i(e.extraDimManager.extraDims));
										});
										var o = t.distanceTo(n)[0];
										return g.Utils.isZero(t.y - n.y)
											? !!r.find(function (e) {
													return e instanceof u.DimInfo
														? void 0 !== e.dimSeg &&
																g.Utils.isSegHorizontal(e.dimSeg) &&
																g.Utils.isZero(e.value - o)
														: g.Utils.isZero(o - e.value);
											  })
											: !!r.find(function (e) {
													return (
														e instanceof u.DimInfo &&
														void 0 !== e.dimSeg &&
														g.Utils.isSegVertical(e.dimSeg) &&
														g.Utils.isZero(e.value - o)
													);
											  });
									}),
									(e.prototype.refreshDimStatus = function () {
										var e = this;
										0 !== this.shapem.length &&
											(this.shapem.forEach(function (t) {
												t.dim.updatePoly(), t.dim.draw(e.view);
											}),
											this.refreshTotalWidth(),
											this.refreshTotalHeight());
									}),
									(e.prototype.refreshTotalHeight = function () {
										this.showTotalHeight(), this.updateTotalHeight();
										var e = this.totalHeightDim;
										(this.checkTotalDimDuplicate(e) || c.DrawParams.Ins.withoutDims) &&
											this.hideTotalHeight();
									}),
									(e.prototype.showTotalHeight = function () {
										var t = this;
										this.totalHeightDim ||
											((this.totalHeightDim = new y.Dimension()),
											(this.totalHeightDim.onEdit = function (n, r) {
												var i = 1,
													o = new s.default.Box();
												t.shapem.forEach(function (e) {
													var t = e.box.clone();
													(o = o.merge(e.box)),
														(s.default.Utils.GT(o.ymax, t.ymax) ||
															s.default.Utils.GT(o.ymin, t.ymin)) &&
															i++;
												});
												var a = (n - r) / i;
												t.shapem.forEach(function (e) {
													var t = d.EdgeFinder.Instance.findIndex2(d.Direction.Left, e.polygon),
														n = e.dim.diMgr.findFrameDim(t);
													n && n.applyDiff(n.value + a);
												}),
													e.emitStructureChanged(t.view);
											}),
											this.updateTotalHeight());
									}),
									(e.prototype.updateTotalHeight = function () {
										if (this.totalHeightDim) {
											var e = this.windowBox,
												t = this.windowWithDimBox;
											if (void 0 !== e.xmin && void 0 !== t.xmin) {
												var n = t.xmin - c.DrawParams.Ins.dimFontH / 2;
												(this.totalHeightDim.from = s.default.point(n, e.low.y)),
													(this.totalHeightDim.to = s.default.point(n, e.high.y)),
													this.totalHeightDim.updatePoly(),
													this.totalHeightDim.draw(this.view),
													this.view.refresh();
											}
										}
									}),
									(e.prototype.hideTotalHeight = function () {
										this.totalHeightDim &&
											((this.totalHeightDim.hidden = !0),
											this.totalHeightDim.updatePoly(),
											this.totalHeightDim.draw(this.view),
											this.view.refresh(),
											(this.totalHeightDim = void 0));
									}),
									(e.prototype.refreshTotalWidth = function () {
										this.showTotalWidth(), this.updateTotalWidth();
										var e = this.totalWidthDim;
										((this.shapem.length > 0 &&
											this.shapem.every(function (e) {
												return e instanceof y.ThreedArcFrame;
											})) ||
											this.checkTotalDimDuplicate(e) ||
											this.couples.filter(function (e) {
												return e instanceof y.CornerJoiner;
											}).length > 0 ||
											c.DrawParams.Ins.withoutDims) &&
											this.hideTotalWidth();
									}),
									(e.prototype.showTotalWidth = function () {
										var e = this;
										this.totalWidthDim ||
											((this.totalWidthDim = new y.Dimension()),
											(this.totalWidthDim.onEdit = function (t, n) {
												var r = 1,
													i = new s.default.Box();
												e.shapem.forEach(function (e) {
													var t = e.box.clone();
													(i = i.merge(e.box)),
														(s.default.Utils.GT(t.xmax, i.xmax) ||
															s.default.Utils.GT(i.xmin, t.xmin)) &&
															r++;
												});
												var o = e.couples.filter(function (e) {
														return e instanceof y.Connector;
													}),
													a = 0;
												o.forEach(function (e) {
													return (a += e.profileSize);
												});
												var l = (t - n) / r;
												e.shapem.forEach(function (e) {
													var t = d.EdgeFinder.Instance.findIndex2(d.Direction.Down, e.polygon),
														n = e.dim.diMgr.findFrameDim(t);
													if (n) {
														var r = n.dir.x > 0 ? 1 : -1;
														n.applyDiff(n.value + r * l);
													}
												});
											}),
											this.updateTotalWidth());
									}),
									(e.prototype.updateTotalWidth = function () {
										if (
											this.totalWidthDim &&
											(1 !== this.shapem.length ||
												!(
													this.shapem[0].polygon instanceof y.SpringlinePoly ||
													this.shapem[0].polygon instanceof y.CirclePoly
												))
										) {
											var e = this.windowBox,
												t = this.windowWithDimBox;
											if (void 0 !== e.xmin && void 0 !== t.xmin) {
												var n = c.DrawParams.Ins.dimFontH,
													r = this.view.shapeManager.shapem.some(function (e) {
														return e.atTCorner;
													})
														? t.ymin - n / 2
														: t.ymax + n / 2;
												(this.totalWidthDim.from = s.default.point(e.low.x, r)),
													(this.totalWidthDim.to = s.default.point(e.high.x, r)),
													this.totalWidthDim.updatePoly(),
													this.totalWidthDim.draw(this.view),
													this.view.refresh();
											}
										}
									}),
									(e.prototype.hideTotalWidth = function () {
										this.totalWidthDim &&
											((this.totalWidthDim.hidden = !0),
											this.totalWidthDim.updatePoly(),
											this.totalWidthDim.draw(this.view),
											this.view.refresh(),
											(this.totalWidthDim = void 0));
									}),
									(e.prototype.generateUID = function () {
										var e = this.forms.map(function (e) {
											return e.uid;
										});
										return e.length > 0 ? Math.max.apply(Math, i(e)) + 1 : 1;
									}),
									(e.prototype.resetAllUID = function () {
										this.forms.forEach(function (e, t) {
											return (e.uid = t);
										});
									}),
									(e.prototype.hookEvent = function () {
										var e = this;
										this.view.eventBus.select(h.EventType.top_view_change).subscribe(function (t) {
											var n = t.payload.frame.topView;
											n.updatePoly(), n.draw(e.view);
										}),
											this.view.eventBus
												.select(h.EventType.structure_changed)
												.subscribe(function (t) {
													y.Area.calcSerial(e.shapem),
														e.subFrames.forEach(function (e) {
															e.updatePoly(), e.draw();
														}),
														e.refreshWalls(),
														e.refreshTotalWidth(),
														e.refreshTotalHeight(),
														y.TopView.checkStyle(e.shapem),
														y.TopView.optimize(e.shapem);
												});
									}),
									(e.emitStructureChanged = function (e) {
										e.eventBus.emit({
											type: h.EventType.structure_changed,
											payload: void 0,
										});
									}),
									e
								);
							})();
						t.ShapeActor = m;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							a =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							s =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(a(arguments[t]));
									return e;
								},
							l =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShapeManager = void 0);
						var h = l(n(0)),
							c = n(16),
							u = n(6),
							p = n(7),
							f = n(13),
							d = n(2),
							g = n(1),
							y = n(11),
							m = (function (e) {
								function t(t) {
									return e.call(this, t) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'cornerJoiners', {
										get: function () {
											return this.couples.filter(function (e) {
												return e instanceof g.CornerJoiner;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'connectors', {
										get: function () {
											return this.couples.filter(function (e) {
												return e instanceof g.Connector;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.setFrameSerials = function (e) {
										if (this.shapem.length !== e.length) throw new Error('Invalid frame serials.');
										this.shapem.forEach(function (t, n) {
											t.serialString = e[n];
										}),
											this.view.refresh();
									}),
									(t.prototype.hitBar = function (e, t) {
										var n,
											r,
											i,
											a = this,
											s = !1,
											l = !1;
										this.view.dragRob.hitBar(e) || this.view.dragRob.hide(),
											this.notes.forEach(function (t) {
												t.hitNote(e, a.view) && (s = !0);
											});
										var h = this.shapem.slice().sort(function (e, t) {
											return t.gshape.zIndex() - e.gshape.zIndex();
										});
										try {
											for (var c = o(h), p = c.next(); !p.done; p = c.next()) {
												var f = p.value,
													d = f.hitBar(e, this.view),
													g = f.polygon.boundary.contains(e);
												if (
													(g &&
														((i = f.uid),
														4 === f.polygon.edges.length &&
															f.polygon.isRectangle() &&
															this.view.eventBus.emit({
																type: u.EventType.selected_component,
																payload: new u.SelectedComponent(f, f.view),
															})),
													(l = l || g),
													d && !s && ((s = !0), this.view.dragRob.attachTo(f), f.atTCorner))
												)
													break;
											}
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												p && !p.done && (r = c.return) && r.call(c);
											} finally {
												if (n) throw n.error;
											}
										}
										this.view.eventBus.emit({
											type: u.EventType.frame_hit,
											payload: {
												frameUid: i,
											},
										}),
											i ||
												this.view.eventBus.emit({
													type: u.EventType.unselected_component,
													payload: {},
												}),
											l || t
												? s &&
												  this.walls.forEach(function (e) {
														return e.hideAssist();
												  })
												: this.walls.forEach(function (t) {
														t.hitWall(e, a.view) &&
															!s &&
															((s = !0), a.view.dragRob.attachTo(t), a.emitWallSetting(t));
												  });
										var y = !1;
										this.subFrames.forEach(function (t) {
											var n = t.hitBar(e);
											n && (y = n);
										});
										var m = !1;
										this.couples.forEach(function (t) {
											t.hideAssist(), t.hitBar(e, a.view) && (m = !0);
										});
										var v = !1;
										this.shapem.forEach(function (t) {
											t.extraDimManager.extraDims.forEach(function (t) {
												t.hitBar(e, a.view) && (v = !0);
											});
										});
										var w = !1;
										return (
											this.extraPersonImages.forEach(function (t) {
												t.hitBar(e, a.view) && (w = !0);
											}),
											this.view.refresh(),
											s || m || v || w || y
										);
									}),
									(t.prototype.emitWallSetting = function (e) {
										this.view.eventBus.emit({
											type: u.EventType.wall_settings,
											payload: new u.WallSettings(e, this.view),
										});
									}),
									(t.prototype.snapVertex = function (e, t) {
										var n, r, i, a;
										try {
											for (var s = o(this.shapem), l = s.next(); !l.done; l = s.next())
												if ((u = l.value.snapVertex(e, t))) return u;
										} catch (e) {
											n = {
												error: e,
											};
										} finally {
											try {
												l && !l.done && (r = s.return) && r.call(s);
											} finally {
												if (n) throw n.error;
											}
										}
										try {
											for (var h = o(this.walls), c = h.next(); !c.done; c = h.next()) {
												var u;
												if ((u = c.value.snapVertex(e, t))) return u;
											}
										} catch (e) {
											i = {
												error: e,
											};
										} finally {
											try {
												c && !c.done && (a = h.return) && a.call(h);
											} finally {
												if (i) throw i.error;
											}
										}
									}),
									(t.prototype.snapEdge = function (e, t, n) {
										var r, i, a, s, l, h;
										try {
											for (var c = o(this.shapem), u = c.next(); !u.done; u = c.next())
												if ((y = u.value.snapEdge(e, t, n))) return y;
										} catch (e) {
											r = {
												error: e,
											};
										} finally {
											try {
												u && !u.done && (i = c.return) && i.call(c);
											} finally {
												if (r) throw r.error;
											}
										}
										try {
											for (var p = o(this.walls), f = p.next(); !f.done; f = p.next())
												if ((y = f.value.snapEdge(e, t, n))) return y;
										} catch (e) {
											a = {
												error: e,
											};
										} finally {
											try {
												f && !f.done && (s = p.return) && s.call(p);
											} finally {
												if (a) throw a.error;
											}
										}
										try {
											for (var d = o(this.couples), g = d.next(); !g.done; g = d.next()) {
												var y;
												if ((y = g.value.snapEdge(e, t, n))) return y;
											}
										} catch (e) {
											l = {
												error: e,
											};
										} finally {
											try {
												g && !g.done && (h = d.return) && h.call(d);
											} finally {
												if (l) throw l.error;
											}
										}
									}),
									(t.prototype.openFile = function (e, t, n) {
										void 0 === t && (t = !1),
											void 0 === n && (n = !1),
											n || this.clear(!1),
											n ? this.append(e) : this.deserialize(e),
											this.moveShapeToCenter(this.view.canvas.container()),
											this.updatePoly(),
											this.view.mometoManager.checkPoint(t),
											this.view.refresh();
									}),
									(t.prototype.openKjlFile = function (e) {
										return new y.LoadKJL(this, this.view).load(JSON.parse(e));
									}),
									(t.prototype.moveShapeToCenter = function (e) {
										var t = this.view.canvas;
										e || (e = t.container());
										var n = e.clientWidth ? e.clientWidth : 400,
											r = e.clientHeight ? e.clientHeight : 400;
										t.width(n), t.height(r);
										var i = this.shapeBox;
										if (
											!(
												void 0 === i ||
												isNaN(i.xmin) ||
												isNaN(i.xmax) ||
												isNaN(i.ymin) ||
												isNaN(i.ymax)
											)
										) {
											var o = i.xmax - i.xmin,
												a = i.ymax - i.ymin,
												s = 1;
											s = o / a > n / r ? n / o : r / a;
											var l = i.center;
											t.x(-l.x * s + n / 2), t.y(-l.y * s + r / 2), t.scaleX(s), t.scaleY(s);
										}
									}),
									Object.defineProperty(t.prototype, 'europeanStandard', {
										get: function () {
											return p.DrawParams.Ins.europeanStandard;
										},
										set: function (e) {
											e !== p.DrawParams.Ins.europeanStandard &&
												((p.DrawParams.Ins.europeanStandard = e),
												this.updatePoly(),
												f.ShapeActor.emitStructureChanged(this.view));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'reverseOpenTowardIndicator', {
										get: function () {
											return p.DrawParams.Ins.reverseOpenTowardIndicator;
										},
										set: function (e) {
											e !== p.DrawParams.Ins.reverseOpenTowardIndicator &&
												((p.DrawParams.Ins.reverseOpenTowardIndicator = e), this.updatePoly());
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.optimizePrintSize = function () {
										var e = this.shapeBox;
										if (e) {
											var t = this.view.toScreen(e.low),
												n = this.view.toScreen(e.high),
												r = n.x - t.x,
												i = n.y - t.y;
											if (r > i) {
												var o = 2e3 / r;
												this.scaleCanvas(o);
											} else (o = 2e3 / i), this.scaleCanvas(o);
										}
									}),
									(t.prototype.scaleCanvas = function (e) {
										var t = this.view.canvas.scaleX(),
											n = this.view.canvas.getPointerPosition(),
											r = n ? n.x : 0,
											i = n ? n.y : 0,
											o = r / t - this.view.canvas.x() / t,
											a = i / t - this.view.canvas.y() / t,
											s = t * e;
										this.view.canvas.scale({
											x: s,
											y: s,
										});
										var l = {
											x: -(o - r / s) * s,
											y: -(a - i / s) * s,
										};
										this.view.canvas.position(l), this.view.canvas.batchDraw();
									}),
									(t.prototype.scaleCanvasByCenter = function (e) {
										void 0 === e && (e = !0);
										var t = this.view.canvas,
											n = this.view.canvas.scaleX(),
											r = 0.5 * t.width(),
											i = 0.5 * t.height(),
											o = r / n - this.view.canvas.x() / n,
											a = i / n - this.view.canvas.y() / n,
											s = e ? 1.08 * n : n / 1.08;
										this.view.canvas.scale({
											x: s,
											y: s,
										});
										var l = {
											x: -(o - r / s) * s,
											y: -(a - i / s) * s,
										};
										this.view.canvas.position(l), this.view.canvas.batchDraw();
									}),
									Object.defineProperty(t.prototype, 'labelFontSize', {
										get: function () {
											return p.DrawParams.Ins.labelFontSize;
										},
										set: function (e) {
											'string' == typeof e && (e = parseFloat(e)),
												(p.DrawParams.Ins.labelFontSize = e),
												this.updatePoly();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dimFontSize', {
										get: function () {
											return p.DrawParams.Ins.dimFontSize;
										},
										set: function (e) {
											'string' == typeof e && (e = parseFloat(e)),
												(p.DrawParams.Ins.dimFontSize = e),
												(p.DrawParams.Ins.dimFontH = 0.75 * e),
												(p.DrawParams.Ins.dimLineH = 0.25 * e),
												this.updatePoly();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dimPrintSizeFixed', {
										get: function () {
											return p.DrawParams.Ins.dimPrintSizeFixed;
										},
										set: function (e) {
											p.DrawParams.Ins.dimPrintSizeFixed = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dimPrintSize', {
										get: function () {
											return p.DrawParams.Ins.dimPrintSize;
										},
										set: function (e) {
											'string' == typeof e && (e = parseFloat(e)),
												(p.DrawParams.Ins.dimPrintSize = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.toDataWithDimName = function (e, t) {
										void 0 === e && (e = 1), (this.shapeMode = f.dimModeEnum.calculate);
										var n = this.view.dimManager.visualIDimInfos.map(function (e) {
												return {
													name: e.name,
													value: e.value,
												};
											}),
											r = this.toData(e, t);
										return (
											(this.shapeMode = f.dimModeEnum.normal),
											{
												data: r,
												dims: n,
											}
										);
									}),
									(t.prototype.toData = function (e, t) {
										var n = this;
										void 0 === e && (e = 1);
										var r = p.DrawParams.Ins.dimFontSize,
											i = p.DrawParams.Ins.dimFontH,
											o = p.DrawParams.Ins.dimLineH,
											a = p.DrawParams.Ins.dimPrintSize;
										if (
											(t &&
												(p.DrawParams.Ins.dimPrintSizeFixed
													? (p.DrawParams.Ins.dimPrintSize = t)
													: ((p.DrawParams.Ins.dimFontSize = t),
													  (p.DrawParams.Ins.dimFontH = 0.75 * t),
													  (p.DrawParams.Ins.dimLineH = 0.25 * t))),
											this.hideAssist(),
											this.clearSelect(),
											this.optimizePrintSize(),
											p.DrawParams.Ins.dimPrintSizeFixed)
										) {
											var s = this.view.canvas.scaleX();
											(p.DrawParams.Ins.dimFontSize = p.DrawParams.Ins.dimPrintSize / s),
												(p.DrawParams.Ins.dimFontH = (0.75 * p.DrawParams.Ins.dimPrintSize) / s),
												(p.DrawParams.Ins.dimLineH = (0.25 * p.DrawParams.Ins.dimPrintSize) / s);
										}
										this.updateDim(!0),
											(p.DrawParams.Ins.dimPrintSizeFixed || t) &&
												(this.refreshTotalWidth(),
												this.refreshTotalHeight(),
												g.TopView.optimize(this.shapem));
										var l = this.shapeBox,
											h = this.view.toScreen(l.low),
											c = this.view.toScreen(l.high),
											f = c.x - h.x,
											d = c.y - h.y;
										this.view.activeLayer.on(u.EventType.drawscene_webcc, function (e) {
											e.can &&
												(n.view.postDraw(e.can, void 0, !1),
												n.view.activeLayer.off(u.EventType.drawscene_webcc));
										});
										var y = this.view.canvas.toDataURL({
											x: h.x,
											y: h.y,
											width: f,
											height: d,
											pixelRatio: e,
										});
										return (
											(p.DrawParams.Ins.dimPrintSize = a),
											(p.DrawParams.Ins.dimFontSize = r),
											(p.DrawParams.Ins.dimFontH = i),
											(p.DrawParams.Ins.dimLineH = o),
											this.updateDim(!0),
											(p.DrawParams.Ins.dimPrintSizeFixed || t) &&
												(this.refreshTotalWidth(),
												this.refreshTotalHeight(),
												g.TopView.optimize(this.shapem)),
											this.moveShapeToCenter(),
											y
										);
									}),
									(t.prototype.toSimpleData = function (e, t) {
										void 0 === e && (e = 2), (this.asSimpleView = !0);
										var n = this.toData(e, t);
										return (this.asSimpleView = !1), n;
									}),
									(t.prototype.toNoDimData = function (e, t) {
										void 0 === e && (e = 1),
											(p.DrawParams.Ins.withoutDims = !0),
											this.updatePoly(),
											this.refreshDimStatus();
										var n = this.toData(e, t);
										return (
											(p.DrawParams.Ins.withoutDims = !1),
											this.updatePoly(),
											this.refreshDimStatus(),
											n
										);
									}),
									(t.prototype.toData2d = function () {
										(p.DrawParams.Ins.withoutDims = !0), this.updatePoly();
										var e = JSON.stringify(new y.Json2d(this).serialize());
										return (p.DrawParams.Ins.withoutDims = !1), this.updatePoly(), e;
									}),
									(t.prototype.toDataCC = function () {
										return JSON.stringify(new y.JsonCc(this.view).serialize());
									}),
									(t.prototype.toTopViewData = function (e) {
										var t = this;
										if ((void 0 === e && (e = 1), 0 === this.shapem.length)) return '';
										this.optimizePrintSize();
										var n = d.ShapeColor.dim;
										d.ShapeColor.dim = 'black';
										var r = new h.default.Box();
										this.shapem.forEach(function (e) {
											e.topView.updatePoly(),
												e.topView.draw(t.view),
												(r = r.merge(e.topView.box)),
												e.gshape &&
													e.gshape.children &&
													e.gshape.children.forEach(function (e) {
														var t = e.getAttr('data');
														(t.type && 'topView' === t.type) || e.hide();
													});
										}),
											this.couples.forEach(function (e) {
												return e.vshapesHide(!0);
											}),
											this.walls.forEach(function (e) {
												e.vshape && e.vshape.hide();
											}),
											(r = new h.default.Box(r.xmin - 30, r.ymin - 30, r.xmax + 30, r.ymax + 30));
										var i = new c.WinPolygon(r.toSegments());
										(i = i.parallelPoly(0, !0)), (r = i.box);
										var o = this.view.toScreen(r.low),
											a = this.view.toScreen(r.high),
											s = a.x - o.x,
											l = a.y - o.y,
											u = this.view.canvas.toDataURL({
												x: o.x,
												y: o.y,
												width: s,
												height: l,
												pixelRatio: e,
											});
										return (
											(d.ShapeColor.dim = n),
											this.shapem.forEach(function (e) {
												e.topView.updatePoly(),
													e.topView.draw(t.view),
													e.gshape &&
														e.gshape.children &&
														e.gshape.children.forEach(function (e) {
															return e.show();
														});
											}),
											this.couples.forEach(function (e) {
												return e.vshapesHide(!1);
											}),
											this.walls.forEach(function (e) {
												e.vshape && e.vshape.show();
											}),
											this.moveShapeToCenter(),
											u
										);
									}),
									(t.prototype.toNoTopViewData = function (e, t) {
										var n = this;
										void 0 === e && (e = 1);
										var r = [];
										this.shapem.forEach(function (e, t) {
											(r[t] = e.topView.hidden),
												(e.topView.hidden = !0),
												e.topView.updatePoly(),
												e.topView.draw(n.view);
										});
										var i = this.toData(e, t);
										return (
											this.shapem.forEach(function (e, t) {
												(e.topView.hidden = r[t]), e.topView.updatePoly(), e.topView.draw(n.view);
											}),
											i
										);
									}),
									(t.prototype.toTopViewSimpleData = function (e) {
										void 0 === e && (e = 1), (this.asSimpleView = !0);
										var t = this.toTopViewData(e);
										return (this.asSimpleView = !1), t;
									}),
									(t.prototype.toNoTopViewSimpleData = function (e) {
										void 0 === e && (e = 1), (this.asSimpleView = !0);
										var t = this.toNoTopViewData(e);
										return (this.asSimpleView = !1), t;
									}),
									(t.prototype.updateDim = function (e) {
										var t = this;
										void 0 === e && (e = !1),
											this.shapem.forEach(function (n) {
												n.dim.updatePoly(),
													n.extraDimManager.updatePoly(),
													n.dim.draw(t.view, e),
													n.extraDimManager.draw(t.view),
													n.updatePullingHeightLabels(),
													n.pullingHeightLabels.forEach(function (e) {
														return e.draw(t.view);
													}),
													n.topView.updatePoly(),
													n.topView.draw(t.view);
											}),
											this.couples.forEach(function (e) {
												e.dimForWidth.updatePoly(),
													e.dimForWidth.draw(t.view),
													e instanceof g.CornerJoiner &&
														(e.updateText(), (e.dimForWidth.hidden = !0)),
													e.draw(t.view);
											}),
											this.walls.forEach(function (e) {
												e.dims.forEach(function (e) {
													e.updatePoly(), e.draw(t.view);
												});
											}),
											this.notes.forEach(function (e) {
												e.updatePoly(), e.draw(t.view);
											}),
											this.view.refresh();
									}),
									(t.prototype.updatePoly = function () {
										var e = this;
										s(this.shapem, this.couples, this.walls, this.notes, this.subFrames).forEach(
											function (t) {
												t.updatePoly(), t.draw(e.view);
											},
										),
											this.view.refresh();
									}),
									(t.prototype.draw = function () {
										var e = this;
										s(this.shapem, this.couples, this.walls, this.notes, this.subFrames).forEach(
											function (t) {
												t.draw(e.view);
											},
										),
											this.view.refresh();
									}),
									Object.defineProperty(t.prototype, 'shapeBox', {
										get: function () {
											var e = new h.default.Box();
											if (
												(this.shapem.forEach(function (t) {
													isNaN(t.box.xmax) || (e = e.merge(t.box));
												}),
												this.walls.forEach(function (t) {
													isNaN(t.box.xmax) || (e = e.merge(t.box));
												}),
												this.couples.forEach(function (t) {
													var n = t.box();
													isNaN(n.xmax) || (e = e.merge(n));
												}),
												this.notes.forEach(function (t) {
													isNaN(t.box.xmax) || (e = e.merge(t.box));
												}),
												this.extraPersonImages.forEach(function (t) {
													isNaN(t.box.xmax) || (e = e.merge(t.box));
												}),
												this.totalWidthDim)
											) {
												var t = this.totalWidthDim.box;
												isNaN(t.xmax) || (e = e.merge(t));
											}
											if (this.totalHeightDim) {
												var n = this.totalHeightDim.box;
												isNaN(n.xmax) || (e = e.merge(n));
											}
											return new h.default.Box(
												e.xmin - 120,
												e.ymin - 120,
												e.xmax + 120,
												e.ymax + 120,
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'shapeMode', {
										get: function () {
											return this.view.dimManager.mode;
										},
										set: function (e) {
											this.view.dimManager.mode = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.changePolygon = function (e) {
										var t = this;
										if (0 !== this.shapem.length) {
											var n = [];
											this.shapem.forEach(function (e) {
												e.selected && n.push(e);
											}),
												0 === n.length
													? this.shapem.forEach(function (n) {
															n.hideAssist(), n.changePolygon(e++ % 4, t.view);
													  })
													: n.forEach(function (n) {
															n.hideAssist(), n.changePolygon(e++ % 4, t.view);
													  }),
												this.view.refresh();
										}
									}),
									Object.defineProperty(t.prototype, 'isDirty', {
										get: function () {
											return this.view.mometoManager.isDirty;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'area', {
										get: function () {
											var e = 0;
											return (
												this.shapem.forEach(function (t) {
													t instanceof g.ThreedArcFrame ? (e += t.area) : (e += t.polygon.area);
												}),
												p.UnitConvertion.Ins.area(e)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'boxArea', {
										get: function () {
											var e = 0;
											return (
												this.shapem.forEach(function (t) {
													t instanceof g.ThreedArcFrame ? (e += t.area) : (e += t.polygon.boxArea);
												}),
												p.UnitConvertion.Ins.area(e)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'computedArea', {
										get: function () {
											return p.DrawParams.Ins.useBoxArea ? this.boxArea : this.area;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'connectorsArea', {
										get: function () {
											var e = 0;
											return (
												this.connectors.forEach(function (t) {
													return (e += t.polygon.area);
												}),
												p.UnitConvertion.Ins.area(e)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'cornerJoinersArea', {
										get: function () {
											var e = 0;
											return (
												this.cornerJoiners
													.filter(function (e) {
														return e.type === g.ShapeType.CornerJoiner;
													})
													.forEach(function (t) {
														return (e += t.polygon.area);
													}),
												p.UnitConvertion.Ins.area(e)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'cornerJoinersAreaX2', {
										get: function () {
											return p.DrawParams.Ins.cornerJoinersAreaX2;
										},
										set: function (e) {
											p.DrawParams.Ins.cornerJoinersAreaX2 = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'useBoxArea', {
										get: function () {
											return p.DrawParams.Ins.useBoxArea;
										},
										set: function (e) {
											p.DrawParams.Ins.useBoxArea = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fixedBeadShown', {
										get: function () {
											return p.DrawParams.Ins.fixedBeadShown;
										},
										set: function (e) {
											void 0 !== e &&
												((p.DrawParams.Ins.fixedBeadShown = e),
												this.updatePoly(),
												this.draw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'withTurningFrame', {
										get: function () {
											return p.DrawParams.Ins.withTurningFrame;
										},
										set: function (e) {
											var t = this;
											void 0 !== e &&
												((p.DrawParams.Ins.withTurningFrame = e),
												this.shapem
													.map(function (e) {
														return e.mulManager.glasses;
													})
													.flat()
													.forEach(function (n) {
														(n.withTurningFrame = e), n.updatePoly(), n.draw(t.view);
													}),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'withTurningFrameForSash', {
										get: function () {
											return p.DrawParams.Ins.withTurningFrameForSash;
										},
										set: function (e) {
											var t = this;
											void 0 !== e &&
												((p.DrawParams.Ins.withTurningFrameForSash = e),
												s(
													this.shapem
														.map(function (e) {
															return e.sashManager.sashes;
														})
														.flat(),
													this.shapem
														.map(function (e) {
															return e.sashManager.doubleSashes;
														})
														.flat(),
												).forEach(function (n) {
													(n.withTurningFrame = e), n.updatePoly(), n.draw(t.view);
												}),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashMullionFixedToSashBottom', {
										get: function () {
											return p.DrawParams.Ins.sashMullionFixedToSashBottom;
										},
										set: function (e) {
											void 0 !== e && (p.DrawParams.Ins.sashMullionFixedToSashBottom = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'displayTurningLabel', {
										get: function () {
											return p.DrawParams.Ins.displayTurningFrame;
										},
										set: function (e) {
											var t = this;
											void 0 !== e &&
												((p.DrawParams.Ins.displayTurningFrame = e),
												this.shapem
													.map(function (e) {
														return e.mulManager.glasses;
													})
													.flat()
													.forEach(function (e) {
														e.updatePoly(), e.draw(t.view);
													}));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'displayTurningLabelForSash', {
										get: function () {
											return p.DrawParams.Ins.displayTurningFrameForSash;
										},
										set: function (e) {
											var t = this;
											void 0 !== e &&
												((p.DrawParams.Ins.displayTurningFrameForSash = e),
												s(
													this.shapem
														.map(function (e) {
															return e.sashManager.sashes;
														})
														.flat(),
													this.shapem
														.map(function (e) {
															return e.sashManager.doubleSashes;
														})
														.flat(),
												).forEach(function (e) {
													e.updatePoly(), e.draw(t.view);
												}));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'InnerEmptyTrackDetect', {
										get: function () {
											return p.DrawParams.Ins.InnerEmptyTrackDetect;
										},
										set: function (e) {
											void 0 !== e && (p.DrawParams.Ins.InnerEmptyTrackDetect = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'slideLockType', {
										get: function () {
											return p.DrawParams.Ins.slideLockType;
										},
										set: function (e) {
											void 0 !== e && (p.DrawParams.Ins.slideLockType = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'slideLockCode', {
										get: function () {
											return p.DrawParams.Ins.slideLockCode;
										},
										set: function (e) {
											void 0 !== e && (p.DrawParams.Ins.slideLockCode = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'slideLockName', {
										get: function () {
											return p.DrawParams.Ins.slideLockName;
										},
										set: function (e) {
											void 0 !== e && (p.DrawParams.Ins.slideLockName = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashBeadShown', {
										get: function () {
											return p.DrawParams.Ins.sashBeadShown;
										},
										set: function (e) {
											void 0 !== e &&
												((p.DrawParams.Ins.sashBeadShown = e),
												this.updatePoly(),
												this.draw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'frameEdgeJointWay', {
										get: function () {
											return p.DrawParams.Ins.frameEdgeJointWay;
										},
										set: function (e) {
											var t = this;
											void 0 !== e &&
												((p.DrawParams.Ins.frameEdgeJointWay = e),
												this.shapem.forEach(function (e) {
													e.frameManager.setDefaultEdgeJointWay(),
														e.updateFrame(!0),
														e.draw(t.view);
												}),
												this.view.mometoManager.checkPoint(),
												this.view.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'slideFrameEdgeJointWay', {
										get: function () {
											return p.DrawParams.Ins.slideFrameEdgeJointWay;
										},
										set: function (e) {
											var t = this;
											void 0 !== e &&
												((p.DrawParams.Ins.slideFrameEdgeJointWay = e),
												this.shapem.forEach(function (e) {
													e.frameManager.setDefaultEdgeJointWay(),
														e.updateFrame(!0),
														e.draw(t.view);
												}),
												this.view.mometoManager.checkPoint(),
												this.view.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fixedBeadJointWay', {
										get: function () {
											return p.DrawParams.Ins.fixedBeadJointWay;
										},
										set: function (e) {
											var t = this;
											void 0 !== e &&
												((p.DrawParams.Ins.fixedBeadJointWay = e),
												this.shapem
													.map(function (e) {
														return e.mulManager.glasses;
													})
													.flat()
													.forEach(function (e) {
														e.bead &&
															(e.bead.frameManager.setDefaultEdgeJointWay(),
															e.bead.updateFrame(!0),
															e.bead.draw(t.view));
													}),
												this.view.mometoManager.checkPoint(),
												this.view.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashEdgeJointWay', {
										get: function () {
											return p.DrawParams.Ins.sashEdgeJointWay;
										},
										set: function (e) {
											var t = this;
											void 0 !== e &&
												((p.DrawParams.Ins.sashEdgeJointWay = e),
												this.shapem
													.map(function (e) {
														return e.sashManager.allSashes;
													})
													.flat()
													.forEach(function (e) {
														e.frameManager.setDefaultEdgeJointWay(), e.updatePoly(), e.draw(t.view);
													}),
												this.view.mometoManager.checkPoint(),
												this.view.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'topViewHidden', {
										get: function () {
											return p.DrawParams.Ins.topViewHidden;
										},
										set: function (e) {
											(p.DrawParams.Ins.topViewHidden = e),
												this.shapem.forEach(function (t) {
													(t.topView.hidden = e), t.topView.updatePoly();
												}),
												this.view.mometoManager.checkPoint(),
												this.view.refresh();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'topViewStyle', {
										get: function () {
											return p.DrawParams.Ins.topViewStyle;
										},
										set: function (e) {
											p.DrawParams.Ins.topViewStyle = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'shadeDescHidden', {
										get: function () {
											return p.DrawParams.Ins.shadeDescHidden;
										},
										set: function (e) {
											p.DrawParams.Ins.shadeDescHidden = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'proUpDownOpenTopView', {
										get: function () {
											return p.DrawParams.Ins.proUpDownOpenTopView;
										},
										set: function (e) {
											var t = this;
											e !== p.DrawParams.Ins.proUpDownOpenTopView &&
												((p.DrawParams.Ins.proUpDownOpenTopView = e),
												this.shapem
													.map(function (e) {
														return e.topView;
													})
													.forEach(function (e) {
														e.updatePoly(), e.draw(t.view);
													}),
												this.view.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'reverseInnerOuter', {
										get: function () {
											return p.DrawParams.Ins.reverseInnerOuter;
										},
										set: function (e) {
											var t = this;
											e !== p.DrawParams.Ins.reverseInnerOuter &&
												((p.DrawParams.Ins.reverseInnerOuter = e),
												this.shapem
													.map(function (e) {
														return e.topView;
													})
													.forEach(function (e) {
														e.updatePoly(), e.draw(t.view);
													}),
												this.view.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'height', {
										get: function () {
											var e;
											return (
												this.shapem.forEach(function (t) {
													e = void 0 === e ? t.polygon.box : e.merge(t.polygon.box);
												}),
												p.UnitConvertion.Ins.lengthForOutput(e ? e.ymax - e.ymin : 0)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'width', {
										get: function () {
											var e;
											this.shapem.forEach(function (t) {
												e = void 0 === e ? t.polygon.box : e.merge(t.polygon.box);
											}),
												this.couples.forEach(function (t) {
													e = void 0 === e ? t.polygon.box : e.merge(t.polygon.box);
												});
											var t = e ? e.xmax - e.xmin : 0;
											return p.UnitConvertion.Ins.lengthForOutput(t);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.setFrameSize = function (e, t, n) {
										if ((void 0 === n && (n = !1), 1 === this.shapem.length)) {
											var r = this.shapem[0];
											r.resize(
												p.UnitConvertion.Ins.unitlessLength(e),
												p.UnitConvertion.Ins.unitlessLength(t),
												n,
											),
												r.updatePoly(),
												r.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										}
									}),
									Object.defineProperty(t.prototype, 'darkMode', {
										set: function (e) {
											var t = this;
											d.ShapeColor.darkMode !== e &&
												((d.ShapeColor.darkMode = e),
												(d.ShapeColor.dim = e ? 'yellow' : 'blue'),
												this.shapem.forEach(function (e) {
													e.dim.draw(t.view),
														e.extraDimManager.draw(t.view),
														e.topView.draw(t.view),
														e.sashManager.allSashes.forEach(function (e) {
															return e.draw(t.view);
														});
												}),
												this.walls.forEach(function (e) {
													return e.dims.forEach(function (e) {
														return e.draw(t.view);
													});
												}),
												this.notes.forEach(function (e) {
													return e.draw(t.view);
												}),
												this.extraPersonImages.forEach(function (e) {
													return e.draw(t.view);
												}),
												g.Area.calcSerial(this.shapem),
												this.view.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'preventScale', {
										get: function () {
											return p.DrawParams.Ins.preventScale;
										},
										set: function (e) {
											p.DrawParams.Ins.preventScale = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'customDimEditor', {
										get: function () {
											return p.DrawParams.Ins.customDimEditor;
										},
										set: function (e) {
											p.DrawParams.Ins.customDimEditor = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'customNoteEditor', {
										get: function () {
											return p.DrawParams.Ins.customNoteEditor;
										},
										set: function (e) {
											p.DrawParams.Ins.customNoteEditor = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'readonly', {
										get: function () {
											return p.DrawParams.Ins.readonly;
										},
										set: function (e) {
											var t = this;
											(p.DrawParams.Ins.readonly = e),
												this.view.toolManager.releaseTool(),
												s(this.shapem, this.couples, this.walls, this.notes).forEach(function (e) {
													return e.draw(t.view);
												}),
												this.view.refresh();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'withoutGlassSerial', {
										get: function () {
											return p.DrawParams.Ins.withoutGlassSerial;
										},
										set: function (e) {
											(p.DrawParams.Ins.withoutGlassSerial = e),
												g.Area.calcSerial(this.shapem),
												this.view.refresh();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashOutwardOpen', {
										get: function () {
											return p.DrawParams.Ins.sashOutwardOpen;
										},
										set: function (e) {
											p.DrawParams.Ins.sashOutwardOpen = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashDoubleWayOpen', {
										get: function () {
											return p.DrawParams.Ins.sashDoubleWayOpen;
										},
										set: function (e) {
											p.DrawParams.Ins.sashDoubleWayOpen = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'narrowScreenStyle', {
										get: function () {
											return p.DrawParams.Ins.narrowScreenStyle;
										},
										set: function (e) {
											var t = this;
											(p.DrawParams.Ins.narrowScreenStyle = e),
												this.shapem.forEach(function (e) {
													e.sashManager.allSashes
														.filter(function (e) {
															return e.type === g.ShapeType.Screen;
														})
														.forEach(function (e) {
															e.draw(t.view);
														});
												}),
												this.view.refresh();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dimToGroundShown', {
										get: function () {
											return p.DrawParams.Ins.dimToGroundShown;
										},
										set: function (e) {
											p.DrawParams.Ins.dimToGroundShown = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dimToSashShown', {
										get: function () {
											return p.DrawParams.Ins.dimToSashShown;
										},
										set: function (e) {
											p.DrawParams.Ins.dimToSashShown = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handleRelativeSet', {
										get: function () {
											return p.DrawParams.Ins.handleRelativeSet;
										},
										set: function (e) {
											p.DrawParams.Ins.handleRelativeSet = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'areaSerials', {
										get: function () {
											return p.DrawParams.Ins.serials;
										},
										set: function (e) {
											e.fixedGlass && (p.DrawParams.Ins.serials.fixedGlass = e.fixedGlass),
												e.sashGlass && (p.DrawParams.Ins.serials.sashGlass = e.sashGlass),
												e.screenNet && (p.DrawParams.Ins.serials.screenNet = e.screenNet),
												g.Area.calcSerial(this.shapem);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'asSimpleView', {
										set: function (e) {
											var t = this;
											p.DrawParams.Ins.asSimpleView !== e &&
												((p.DrawParams.Ins.asSimpleView = e),
												this.shapem.forEach(function (e) {
													e.children.forEach(function (e) {
														e instanceof g.Dim ? e.draw(t.view, !0) : e.draw(t.view);
													});
												}),
												this.couples.forEach(function (e) {
													return e.draw(t.view);
												}),
												this.walls.forEach(function (e) {
													return e.draw(t.view);
												}),
												this.notes.forEach(function (e) {
													return e.draw(t.view);
												}),
												this.view.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'strictWheel', {
										set: function (e) {
											p.DrawParams.Ins.strictWheel = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'selectedFrame', {
										get: function () {
											return this.shapem.find(function (e) {
												return e.selected;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'profileSize', {
										get: function () {
											var e = this.selectedFrame,
												t = e
													? e.profileSizeManager.output()
													: this.view.params.outputProfileSizes();
											return this.unitProfileSize(t), t;
										},
										set: function (e) {
											var t = this;
											this.validateProfileSize(e),
												this.unitlessProfileSize(e),
												e.cornerJoiner && (this.view.params.cornerJoiner = e.cornerJoiner),
												e.connector && (this.view.params.connector = e.connector),
												e.subFrame && (this.view.params.subFrame = e.subFrame);
											var n = this.selectedFrame;
											n || Object.assign(this.view.params, e);
											var r = n ? [n] : this.shapem;
											r.forEach(function (n) {
												Object.assign(n.profileSizeManager, e), n.updatePoly(), n.draw(t.view);
											}),
												g.Area.calcSerial(r),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.validateProfileSize = function (e) {
										var t = function (e) {
											return 'number' != typeof e || e <= 0;
										};
										if (
											(Object.hasOwnProperty('frame') && t(e.frame)) ||
											(Object.hasOwnProperty('frameMullion') && t(e.frameMullion)) ||
											(Object.hasOwnProperty('subFrame') && t(e.subFrame)) ||
											(Object.hasOwnProperty('sash') && t(e.sash)) ||
											(Object.hasOwnProperty('upSash') && t(e.upSash)) ||
											(Object.hasOwnProperty('downSash') && t(e.downSash)) ||
											(Object.hasOwnProperty('interlock') && t(e.interlock)) ||
											(Object.hasOwnProperty('screen') && t(e.screen)) ||
											(Object.hasOwnProperty('sashMullion') && t(e.sashMullion)) ||
											(Object.hasOwnProperty('kfcWaist') && t(e.kfcWaist)) ||
											(Object.hasOwnProperty('bead') && t(e.bead)) ||
											(Object.hasOwnProperty('antiTheft') && t(e.antiTheft)) ||
											(Object.hasOwnProperty('antiTheftMullion') && t(e.antiTheftMullion)) ||
											(Object.hasOwnProperty('decorationBar') && t(e.decorationBar)) ||
											(Object.hasOwnProperty('cornerJoiner') && t(e.cornerJoiner)) ||
											(Object.hasOwnProperty('connector') && t(e.connector)) ||
											(Object.hasOwnProperty('shadeSash') && t(e.shadeSash)) ||
											(Object.hasOwnProperty('shadeMullion') && t(e.shadeMullion))
										)
											throw new Error('Profile size must be valid numeric.');
									}),
									(t.prototype.unitlessProfileSize = function (e) {
										var t,
											n,
											r = Object.keys(e);
										try {
											for (var i = o(r), a = i.next(); !a.done; a = i.next()) {
												var s = a.value,
													l = e[s];
												l && (e[s] = p.UnitConvertion.Ins.unitlessLength(l));
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (n = i.return) && n.call(i);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									(t.prototype.unitProfileSize = function (e) {
										var t,
											n,
											r = Object.keys(e);
										try {
											for (var i = o(r), a = i.next(); !a.done; a = i.next()) {
												var s = a.value,
													l = e[s];
												l && (e[s] = p.UnitConvertion.Ins.length(l));
											}
										} catch (e) {
											t = {
												error: e,
											};
										} finally {
											try {
												a && !a.done && (n = i.return) && n.call(i);
											} finally {
												if (t) throw t.error;
											}
										}
									}),
									Object.defineProperty(t.prototype, 'defaultProfileSize', {
										set: function (e) {
											this.validateProfileSize(e), this.unitlessProfileSize(e);
											var t = this.selectedFrame;
											t || Object.assign(this.view.params, e),
												(t ? [t] : this.shapem).forEach(function (t) {
													e.frame && (t.profileSizeManager._frame = e.frame),
														e.frameMullion && (t.profileSizeManager._frameMullion = e.frameMullion),
														e.sash && (t.profileSizeManager._sash = e.sash),
														e.upSash && (t.profileSizeManager._upSash = e.upSash),
														e.downSash && (t.profileSizeManager._downSash = e.downSash),
														e.screen && (t.profileSizeManager._screen = e.screen),
														e.sashMullion && (t.profileSizeManager._sashMullion = e.sashMullion),
														e.kfcWaist && (t.profileSizeManager._kfcWaist = e.kfcWaist),
														e.bead && (t.profileSizeManager._bead = e.bead),
														e.antiTheft && (t.profileSizeManager._antiTheft = e.antiTheft),
														e.antiTheftMullion &&
															(t.profileSizeManager._antiTheftMullion = e.antiTheftMullion),
														e.shadeSash && (t.profileSizeManager._shadeSash = e.shadeSash),
														e.shadeMullion && (t.profileSizeManager._shadeMullion = e.shadeMullion);
												}),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'barNormal', {
										get: function () {
											return d.ShapeColor.barNormal;
										},
										set: function (e) {
											var t = this;
											d.ShapeColor.barNormal = e;
											var n = this.shapem.some(function (e) {
												return e.selected;
											});
											(n =
												n ||
												this.couples.some(function (e) {
													return e.highlighted;
												})),
												this.shapem.forEach(function (r) {
													n
														? r.selected && ((r.colorManager.barNormal = e), r.draw(t.view))
														: ((r.colorManager.barNormal = e), r.draw(t.view));
												}),
												this.couples.forEach(function (r) {
													n
														? r.highlighted && ((r.colorManager.barNormal = e), r.draw(t.view))
														: ((r.colorManager.barNormal = e), r.draw(t.view));
												}),
												n ||
													this.subFrames.forEach(function (t) {
														(t.colorManager.barNormal = e), t.draw();
													}),
												this.view.refresh(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'beadNormal', {
										get: function () {
											return d.ShapeColor.beadNormal;
										},
										set: function (e) {
											var t = this;
											d.ShapeColor.beadNormal = e;
											var n = this.shapem.some(function (e) {
												return e.selected;
											});
											this.shapem.forEach(function (r) {
												n
													? r.selected && ((r.colorManager.beadNormal = e), r.draw(t.view))
													: ((r.colorManager.beadNormal = e), r.draw(t.view));
											}),
												this.view.refresh(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'highlightColor', {
										get: function () {
											return d.ShapeColor.barHighlight;
										},
										set: function (e) {
											d.ShapeColor.barHighlight = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'brickColor', {
										get: function () {
											return d.ShapeColor.brick;
										},
										set: function (e) {
											var t = this;
											(d.ShapeColor.brick = e),
												d.FillPattern.Instance.Prepare(),
												this.walls.forEach(function (e) {
													return e.draw(t.view);
												}),
												this.view.mometoManager.checkPoint(),
												setTimeout(function () {
													return t.view.refresh();
												}, 100);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'glassColor', {
										get: function () {
											return d.ShapeColor.glass;
										},
										set: function (e) {
											var t = this;
											d.ShapeColor.glass = e;
											var n = this.shapem.some(function (e) {
												return e.selected;
											});
											this.shapem.forEach(function (r) {
												n
													? r.selected && ((r.colorManager.glass = e), r.draw(t.view))
													: ((r.colorManager.glass = e), r.draw(t.view));
											}),
												this.view.refresh(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handleHeights', {
										get: function () {
											var e,
												t,
												n,
												r,
												i,
												a,
												s = [];
											try {
												for (var l = o(this.shapem), h = l.next(); !h.done; h = l.next()) {
													var c = h.value.sashManager.allSashes;
													try {
														for (
															var u = ((n = void 0), o(c)), p = u.next();
															!p.done;
															p = u.next()
														) {
															var f = p.value,
																d = f.mulManager.glasses.filter(function (e) {
																	return e instanceof g.Glass || e instanceof g.ScreenFiller;
																}),
																y = d.length > 0 ? d[0].serial.text : '',
																m = f.hardwareManager.hardwares;
															try {
																for (
																	var v = ((i = void 0), o(m)), w = v.next();
																	!w.done;
																	w = v.next()
																) {
																	var b = w.value;
																	if (b instanceof g.Handle && !b.hidden) {
																		var S = b.dimToSash.hidden,
																			_ = b.dim.hidden;
																		(b.dimToSash.hidden = !1),
																			b.dimToSash.updatePoly(),
																			(b.dim.hidden = !1),
																			b.dim.updatePoly(),
																			s.push({
																				title: y,
																				toSash: b.dimToSash.value,
																				toGround: b.dim.value,
																			}),
																			(b.dimToSash.hidden = S),
																			b.dimToSash.updatePoly(),
																			b.dimToSash.draw(this.view),
																			(b.dim.hidden = _),
																			b.dim.updatePoly(),
																			b.dim.draw(this.view);
																	}
																}
															} catch (e) {
																i = {
																	error: e,
																};
															} finally {
																try {
																	w && !w.done && (a = v.return) && a.call(v);
																} finally {
																	if (i) throw i.error;
																}
															}
														}
													} catch (e) {
														n = {
															error: e,
														};
													} finally {
														try {
															p && !p.done && (r = u.return) && r.call(u);
														} finally {
															if (n) throw n.error;
														}
													}
												}
											} catch (t) {
												e = {
													error: t,
												};
											} finally {
												try {
													h && !h.done && (t = l.return) && t.call(l);
												} finally {
													if (e) throw e.error;
												}
											}
											return this.view.refresh(), s;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'handleColor', {
										get: function () {
											return d.ShapeColor.handle;
										},
										set: function (e) {
											var t = this;
											d.ShapeColor.handle = e;
											var n = this.shapem.some(function (e) {
												return e.selected;
											});
											this.shapem.forEach(function (r) {
												n
													? r.selected && ((r.colorManager.hardware = e), r.draw(t.view))
													: ((r.colorManager.hardware = e), r.draw(t.view));
											}),
												this.view.refresh(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'slideOptions', {
										get: function () {
											return y.SlideOptions.Ins.options.map(function (e, t) {
												return {
													index: t,
													serial: e.serial,
												};
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'totalWidthShown', {
										get: function () {
											return !!this.totalWidthDim;
										},
										set: function (e) {
											e ? this.showTotalWidth() : this.hideTotalWidth();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'totalHeightShown', {
										get: function () {
											return !!this.totalHeightDim;
										},
										set: function (e) {
											e ? this.showTotalHeight() : this.hideTotalHeight();
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.exportDxf = function (e) {
										void 0 === e && (e = !1);
										var t = new y.DxfExporter(this.view).export();
										if (!e) return t;
										t && this.triggerDownloadBlob(new Blob([t]), 'data.dxf');
									}),
									(t.prototype.exportJson = function () {
										this.triggerDownload(this.serialize(), 'data.json');
									}),
									(t.prototype.recognize = function (e) {
										new y.HandDrawnRecognition(this).recognize(e);
									}),
									(t.prototype.export = function (e) {
										void 0 === e && (e = 'windoor.png'), this.triggerDownload(this.toData(), e, !1);
									}),
									(t.prototype.export3dJson = function (e, t) {
										void 0 === t && (t = !1);
										var n = JSON.stringify(new y.Json3d(this.view, e).output());
										return t ? this.triggerDownload(n, 'data3d.json') : n;
									}),
									(t.prototype.translate = function (e) {
										this.shapem.forEach(function (t) {
											return t.translate(e);
										}),
											this.couples.forEach(function (t) {
												return t.translate(e);
											}),
											this.walls.forEach(function (t) {
												return t.translate(e);
											}),
											this.notes.forEach(function (t) {
												return t.translate(e);
											});
									}),
									Object.defineProperty(t.prototype, 'isEmpty', {
										get: function () {
											return (
												0 === this.shapem.length &&
												0 === this.couples.length &&
												0 === this.walls.length
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.triggerDownload = function (e, t, n) {
										void 0 === n && (n = !0),
											n && (e = 'data:text/json;charset=utf-8,' + encodeURIComponent(e));
										var r = document.createElement('a');
										r.setAttribute('href', e),
											r.setAttribute('download', t),
											document.body.appendChild(r),
											r.click(),
											document.body.removeChild(r);
									}),
									(t.prototype.triggerDownloadBlob = function (e, t) {
										void 0 === t && (t = 'file.txt');
										var n = URL.createObjectURL(e),
											r = document.createElement('a');
										(r.href = n),
											(r.download = t),
											document.body.appendChild(r),
											r.dispatchEvent(
												new MouseEvent('click', {
													bubbles: !0,
													cancelable: !0,
													view: window,
												}),
											),
											document.body.removeChild(r);
									}),
									Object.defineProperty(t.prototype, 'windowLayout', {
										get: function () {
											var e = this.couples.map(function (e) {
													return e.polygon;
												}),
												t = this.shapem
													.map(function (e) {
														return e.polygon.boundary;
													})
													.filter(function (e) {
														return !(e instanceof g.ThreedArcFrame);
													}),
												n = s(t, e)
													.sort(function (e, t) {
														return e.box.center.x - t.box.center.x;
													})
													.map(function (e) {
														return e.orientation === h.default.ORIENTATION.CCW
															? e.polygon.clone().reverse()
															: e.polygon.clone();
													}),
												r = new h.default.Polygon();
											n.forEach(function (e) {
												return (r = h.default.BooleanOperations.unify(r, e));
											});
											var i = r.splitToIslands(),
												o = [];
											return (
												i.forEach(function (e) {
													var t = Array.from(e.edges),
														n = [];
													t.forEach(function (e) {
														if (e.shape instanceof h.default.Arc) {
															var t = [],
																r = d.Utils.splitArcToPoints(e.shape, 50);
															r.slice(0, r.length - 1).forEach(function (e) {
																return t.push(e.toJSON());
															}),
																n.push({
																	name: 'arc',
																	arcSplitPoint: t,
																});
														} else e.shape instanceof h.default.Segment && n.push(e.shape.toJSON());
													}),
														o.push(n);
												}),
												o
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'ccBar', {
										get: function () {
											if (!this.view.keys.mini) return new y.CcBar(this);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fillerUtils', {
										get: function () {
											return new y.FillerUtils(this, this.view);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'barWidthUtils', {
										get: function () {
											return new y.BarWidthUtils(this, this.view);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'shadeUtil', {
										get: function () {
											return new y.ShadeUtil(this, this.view);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'drawingSummary', {
										get: function () {
											return new y.DrawingSummary(this);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'frameIdentity', {
										get: function () {
											return new y.FrameIdentity(this);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'showInnerSpaceDim', {
										get: function () {
											return p.DrawParams.Ins.showInnerSpaceDim;
										},
										set: function (e) {
											var t = this;
											p.DrawParams.Ins.showInnerSpaceDim !== e &&
												((p.DrawParams.Ins.showInnerSpaceDim = e),
												this.shapem.forEach(function (e) {
													e.updatePoly(), e.draw(t.view);
												}),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'drawPolyType', {
										get: function () {
											return p.DrawParams.Ins.drawPolyType;
										},
										set: function (e) {
											var t = this;
											if (p.DrawParams.Ins.drawPolyType !== e) {
												p.DrawParams.Ins.drawPolyType = e;
												var n = !1;
												e === c.DrawPolyType.steelPlastic && (n = !0),
													this.shapem.forEach(function (e) {
														e.mulManager.splitter.lines.forEach(function (e) {
															(e.start.steel = n), (e.end.steel = n);
														}),
															e.updatePoly(),
															e.draw(t.view);
													}),
													this.view.refresh(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'frameSerialShown', {
										get: function () {
											return p.DrawParams.Ins.frameSerialShown;
										},
										set: function (e) {
											var t = this;
											(p.DrawParams.Ins.frameSerialShown = e),
												this.shapem.forEach(function (e) {
													(e.serial.hidden = !p.DrawParams.Ins.frameSerialShown),
														e.serial.updatePoly(),
														e.serial.draw(t.view);
												}),
												this.view.refresh(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashAsDoor', {
										get: function () {
											return p.DrawParams.Ins.sashAsDoor;
										},
										set: function (e) {
											p.DrawParams.Ins.sashAsDoor = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'sashOpen', {
										get: function () {
											return p.DrawParams.Ins.sashOpen;
										},
										set: function (e) {
											p.DrawParams.Ins.sashOpen = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'areas', {
										get: function () {
											return s(
												this.shapem
													.map(function (e) {
														return e.mulManager.glasses;
													})
													.flat(),
												this.shapem
													.map(function (e) {
														return e.sashManager.allSashes;
													})
													.flat()
													.map(function (e) {
														return e.mulManager.glasses;
													})
													.flat(),
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'glassSpec', {
										get: function () {
											return 0 === this.areas.length
												? new d.GlassSpec()
												: p.DrawParams.Ins.glassSpec.clone();
										},
										set: function (e) {
											var t = this,
												n = Object.assign(p.DrawParams.Ins.glassSpec.clone(), e);
											(p.DrawParams.Ins.glassSpec = n.clone()),
												this.areas.forEach(function (e) {
													e instanceof g.Glass &&
														((e.glassSpec = n.clone()), e.updatePoly(), e.draw(t.view));
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.setGlassSpec = function (e, t) {
										var n = this;
										this.areas.forEach(function (r) {
											if (r instanceof g.Glass) {
												if (!1 === t && r.host instanceof g.Sash) return;
												if (!0 === t && r.host instanceof g.Frame) return;
												Object.assign(r.glassSpec, e), r.updatePoly(), r.draw(n.view);
											}
										}),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									}),
									Object.defineProperty(t.prototype, 'glassWithShade', {
										set: function (e) {
											var t = this;
											this.areas.forEach(function (n) {
												n instanceof g.Glass && ((n.withShade = e), n.updatePoly(), n.draw(t.view));
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'scriptGlassSpecBased', {
										get: function () {
											return p.DrawParams.Ins.scriptGlassSpecBased;
										},
										set: function (e) {
											var t = this;
											e !== p.DrawParams.Ins.scriptGlassSpecBased &&
												((p.DrawParams.Ins.scriptGlassSpecBased = e),
												this.shapem.forEach(function (e) {
													var n = e.mulManager.glasses,
														r = e.sashManager.allSashes
															.map(function (e) {
																return e.mulManager.glasses;
															})
															.flat();
													s(n, r)
														.filter(function (e) {
															return !(e instanceof g.Shade);
														})
														.forEach(function (e) {
															e.updatePoly(), e.draw(t.view);
														});
												}),
												this.view.refresh());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'slideLockSummay', {
										get: function () {
											return (
												this.shapem
													.map(function (e) {
														return e.sashManager.slides;
													})
													.flat()
													.map(function (e) {
														var t = e.sashes.find(function (e) {
															return e.attrs.lockName;
														});
														if (t) return t.attrs.lockName;
													})
													.filter(function (e) {
														return e;
													})
													.pop() || ''
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'multiLockPointSummay', {
										get: function () {
											return !this.shapem
												.map(function (e) {
													return s(
														e.sashManager.sashes,
														e.sashManager.doubleSashes
															.map(function (e) {
																return e.sashes;
															})
															.flat(),
													);
												})
												.flat()
												.some(function (e) {
													return !e.hardwareManager.multiLockPoints;
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fixedSashToFixedGlass', {
										get: function () {
											return p.DrawParams.Ins.fixedSashToFixedGlass;
										},
										set: function (e) {
											var t = this;
											(p.DrawParams.Ins.fixedSashToFixedGlass = e),
												this.shapem
													.filter(function (e) {
														return e.sashManager && e.sashManager.slides.length > 0;
													})
													.forEach(function (e) {
														e.sashManager.slides
															.filter(function (e) {
																return e.sashes.some(function (e) {
																	return e.isFixed;
																});
															})
															.forEach(function (e) {
																e.sashes
																	.filter(function (e) {
																		return e.isFixed;
																	})
																	.forEach(function (e) {
																		e.updateFixedSashToFixedGlass(), e.updatePoly(), e.draw(t.view);
																	});
															});
													}),
												this.view.mometoManager.checkPoint(),
												this.view.refresh();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'equalSplitGlass', {
										get: function () {
											return !1;
										},
										set: function (e) {},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dragModifyOnFrame', {
										get: function () {
											return p.DrawParams.Ins.dragModifyOnFrame;
										},
										set: function (e) {
											p.DrawParams.Ins.dragModifyOnFrame = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dragModifyOnHardware', {
										get: function () {
											return p.DrawParams.Ins.dragModifyOnHardware;
										},
										set: function (e) {
											p.DrawParams.Ins.dragModifyOnHardware = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.setGlassForDoTask = function (e) {
										this.areas.forEach(function (t) {
											t instanceof g.Glass && e(t);
										}),
											this.view.refresh(),
											this.view.mometoManager.checkPoint();
									}),
									(t.prototype.setCouplesForDoTask = function (e) {
										this.couples.forEach(function (t) {
											e(t);
										}),
											this.view.refresh(),
											this.view.mometoManager.checkPoint();
									}),
									Object.defineProperty(t.prototype, 'nonGapFrame', {
										get: function () {
											return p.DrawParams.Ins.nonGapFrame;
										},
										set: function (e) {
											(p.DrawParams.Ins.nonGapFrame = e), this.updatePoly();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'nonGapFixedBead', {
										get: function () {
											return p.DrawParams.Ins.nonGapFixedBead;
										},
										set: function (e) {
											(p.DrawParams.Ins.nonGapFixedBead = e), this.updatePoly();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'nonGapSash', {
										get: function () {
											return p.DrawParams.Ins.nonGapSash;
										},
										set: function (e) {
											(p.DrawParams.Ins.nonGapSash = e), this.updatePoly();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'nonGapSashBead', {
										get: function () {
											return p.DrawParams.Ins.nonGapSashBead;
										},
										set: function (e) {
											(p.DrawParams.Ins.nonGapSashBead = e), this.updatePoly();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'nonGapRound', {
										get: function () {
											return p.DrawParams.Ins.nonGapRound;
										},
										set: function (e) {
											(p.DrawParams.Ins.nonGapRound = e), this.updatePoly();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dimColor', {
										get: function () {
											return d.ShapeColor.dim;
										},
										set: function (e) {
											var t = this;
											(d.ShapeColor.dim = e),
												this.shapem.forEach(function (e) {
													e.topView.updatePoly(), e.topView.draw(t.view);
												}),
												this.view.refresh();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fontFamilyForText', {
										get: function () {
											return p.DrawParams.Ins.fontFamilyForText;
										},
										set: function (e) {
											p.DrawParams.Ins.fontFamilyForText = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'fontFamilyForNum', {
										get: function () {
											return p.DrawParams.Ins.fontFamilyForNum;
										},
										set: function (e) {
											p.DrawParams.Ins.fontFamilyForNum = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'dimFontBold', {
										get: function () {
											return p.DrawParams.Ins.dimFontBold;
										},
										set: function (e) {
											p.DrawParams.Ins.dimFontBold = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'windowStrokeColor', {
										get: function () {
											return d.ShapeColor.windowStrokeColor;
										},
										set: function (e) {
											d.ShapeColor.windowStrokeColor = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'windowStrokeWidth', {
										get: function () {
											return p.DrawParams.Ins.windowStrokeWidth;
										},
										set: function (e) {
											p.DrawParams.Ins.windowStrokeWidth = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'disableDrag', {
										get: function () {
											return p.DrawParams.Ins.disableDrag;
										},
										set: function (e) {
											p.DrawParams.Ins.disableDrag = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pullingHeightMigrate', {
										get: function () {
											return p.DrawParams.Ins.pullingHeightMigrate;
										},
										set: function (e) {
											p.DrawParams.Ins.pullingHeightMigrate = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'roundUpShadeCounts', {
										get: function () {
											return p.DrawParams.Ins.roundUpShadeCounts;
										},
										set: function (e) {
											p.DrawParams.Ins.roundUpShadeCounts = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'withoutDims', {
										get: function () {
											return p.DrawParams.Ins.withoutDims;
										},
										set: function (e) {
											(p.DrawParams.Ins.withoutDims = e), this.updatePoly();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'slideDefaultOption', {
										get: function () {
											return p.DrawParams.Ins.slideDefaultOption;
										},
										set: function (e) {
											p.DrawParams.Ins.slideDefaultOption = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'kfcWaistDimShown', {
										get: function () {
											return p.DrawParams.Ins.kfcWaistDimShown;
										},
										set: function (e) {
											p.DrawParams.Ins.kfcWaistDimShown = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'kfcHingesHidden', {
										get: function () {
											return p.DrawParams.Ins.kfcHingesHidden;
										},
										set: function (e) {
											this.kfcHingesHidden !== e &&
												((p.DrawParams.Ins.kfcHingesHidden = e), this.hideKfcHinge(e));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'kfcHandleType', {
										get: function () {
											return p.DrawParams.Ins.kfcHandleType;
										},
										set: function (e) {
											this.kfcHandleType !== e &&
												((p.DrawParams.Ins.kfcHandleType = e), this.setKfcHandleType(e));
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.setPresetToolQueue = function (e) {
										Array.isArray(e) &&
											((this.view.toolManager.presetQueue = e), this.view.toolManager.initTool());
									}),
									Object.defineProperty(t.prototype, 'sashNumber', {
										get: function () {
											var e = 0;
											return (
												this.shapem.forEach(function (t) {
													e += t.sashManager.allSashes.filter(function (e) {
														return e.type === g.ShapeType.Sash;
													}).length;
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(t.prototype.hideKfcHinge = function (e) {
										var t = this;
										this.shapem.forEach(function (n) {
											s(
												n.sashManager.kfcSashes,
												n.sashManager.doubleKfcSashes
													.map(function (e) {
														return e.sashes;
													})
													.flat(),
											).forEach(function (n) {
												(n.hardwareManager.hingeCount = e ? 0 : 2),
													n.hardwareManager.updatePoly(),
													n.hardwareManager.draw(t.view);
											});
										}),
											this.view.refresh(),
											this.view.mometoManager.checkPoint();
									}),
									(t.prototype.setKfcHandleType = function (e) {
										var t = this;
										this.shapem.forEach(function (n) {
											s(
												n.sashManager.kfcSashes,
												n.sashManager.doubleKfcSashes
													.map(function (e) {
														return e.sashes;
													})
													.flat(),
											).forEach(function (n) {
												n.hardwareManager.toggleKfcMullionByType(e),
													(n.hardwareManager.handleType = e),
													n.updatePoly(),
													n.draw(t.view);
											});
										}),
											this.view.refresh(),
											this.view.mometoManager.checkPoint();
									}),
									(t.prototype.clearSelect = function () {
										this.shapem.forEach(function (e) {
											return e.highlight(!1);
										}),
											this.couples.forEach(function (e) {
												return e.highlight(!1);
											});
									}),
									Object.defineProperty(t.prototype, 'showThreedArcFrameRadiusText', {
										get: function () {
											return p.DrawParams.Ins.showThreedArcFrameRadiusText;
										},
										set: function (e) {
											p.DrawParams.Ins.showThreedArcFrameRadiusText = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'screenLineStyle', {
										get: function () {
											return p.DrawParams.Ins.screenLineStyle;
										},
										set: function (e) {
											var t = this;
											if (void 0 !== e) {
												if (e === d.ScreenLineStyle.Fine) p.DrawParams.Ins.screenLineWidth = 1;
												else if (e === d.ScreenLineStyle.Medium)
													p.DrawParams.Ins.screenLineWidth = 1.6;
												else {
													if (e !== d.ScreenLineStyle.Coarse) return;
													p.DrawParams.Ins.screenLineWidth = 2.4;
												}
												(p.DrawParams.Ins.screenLineStyle = e),
													d.FillPattern.Instance.Prepare(),
													this.shapem.forEach(function (e) {
														return e.draw(t.view);
													}),
													setTimeout(function () {
														return t.view.refresh();
													}, 100);
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(f.ShapeActor);
						t.ShapeManager = m;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ColorManager = void 0);
						var r = n(2),
							i = (function () {
								function e() {
									(this.barNormal = r.ShapeColor.barNormal),
										(this.beadNormal = r.ShapeColor.beadNormal),
										(this.glass = r.ShapeColor.glass),
										(this.hardware = r.ShapeColor.handle);
								}
								return (
									Object.defineProperty(e.prototype, 'barShadow', {
										get: function () {
											return this.barNormal instanceof HTMLImageElement
												? '#DDD'
												: this.lightenDarkenColor(this.barNormal, -50);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.toJSON = function () {
										return {
											bn: this.textureToStr(this.barNormal),
											ben: this.textureToStr(this.beadNormal),
											g: this.glass,
											hd: this.hardware,
										};
									}),
									(e.prototype.deserialize = function (e, t, n) {
										void 0 !== e &&
											((this.barNormal = this.strToTexture(e.bn, function () {
												n && n(t);
											})),
											e.ben
												? (this.beadNormal = this.strToTexture(e.ben, function () {
														n && n(t);
												  }))
												: (this.beadNormal = r.ShapeColor.beadNormal),
											(this.glass = e.g ? e.g : r.ShapeColor.glass),
											(this.hardware = e.hd));
									}),
									(e.prototype.strToTexture = function (e, t) {
										if (e.startsWith('http')) {
											var n = e.replace(/\?time=.+/, '?time=' + new Date().valueOf());
											-1 === n.indexOf('?time=') && (n += '?time=' + new Date().valueOf());
											var r = new Image();
											return (
												(r.crossOrigin = 'Anonymous'),
												(r.onload = function () {
													return t();
												}),
												(r.src = n),
												r
											);
										}
										return e;
									}),
									(e.prototype.textureToStr = function (e) {
										return e instanceof HTMLImageElement ? e.src.replace(/\?time=.+/, '') : e;
									}),
									(e.prototype.lightenDarkenColor = function (e, t) {
										var n = !1;
										'#' === e[0] && ((e = e.slice(1)), (n = !0));
										var r = parseInt(e, 16),
											i = (r >> 16) + t;
										i > 255 ? (i = 255) : i < 0 && (i = 0);
										var o = ((r >> 8) & 255) + t;
										o > 255 ? (o = 255) : o < 0 && (o = 0);
										var a = (255 & r) + t;
										return (
											a > 255 ? (a = 255) : a < 0 && (a = 0),
											(n ? '#' : '') + (a | (o << 8) | (i << 16)).toString(16)
										);
									}),
									e
								);
							})();
						t.ColorManager = i;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ExtraDimManager = void 0);
						var o = i(n(0)),
							a = n(1),
							s = (function () {
								function e(e) {
									(this.host = e), (this.extraDims = new Set());
								}
								return (
									(e.prototype.addExtraDim = function (e) {
										this.extraDims.add(e), this.host.add(e);
									}),
									(e.prototype.toJSON = function () {
										var e,
											t,
											n = [];
										try {
											for (
												var i = r(this.extraDims.values()), o = i.next();
												!o.done;
												o = i.next()
											) {
												var a = o.value;
												n.push(a.toJSON());
											}
										} catch (t) {
											e = {
												error: t,
											};
										} finally {
											try {
												o && !o.done && (t = i.return) && t.call(i);
											} finally {
												if (e) throw e.error;
											}
										}
										return n;
									}),
									(e.prototype.updatePoly = function (e) {
										var t = this;
										this.extraDims.forEach(function (n) {
											t.addExtraDim(n), n.updatePoly(e);
										});
									}),
									(e.prototype.translate = function (e) {
										this.extraDims.forEach(function (t) {
											t.translate(e), t.updatePoly();
										});
									}),
									(e.prototype.clear = function () {
										this.extraDims.clear();
									}),
									(e.prototype.draw = function (e) {
										this.extraDims.forEach(function (t) {
											return t.draw(e);
										});
									}),
									(e.prototype.deserialize = function (e) {
										var t = this;
										e &&
											(this.clear(),
											e.forEach(function (e) {
												var n,
													r = e.dt;
												if (
													(r === a.ExtraDimTypeEnum.Arbitrary
														? (n = new a.ExtraDimArbitrary(
																o.default.point(e.st.x, e.st.y),
																o.default.point(e.et.x, e.et.y),
																t.host,
																o.default.vector(e.ov.x, e.ov.y),
														  ))
														: r === a.ExtraDimTypeEnum.Horizontal
														? (n = new a.ExtraDimHorizontal(
																o.default.point(e.st.x, e.st.y),
																o.default.point(e.et.x, e.et.y),
																t.host,
																o.default.vector(e.ov.x, e.ov.y),
														  ))
														: r === a.ExtraDimTypeEnum.Vertical
														? (n = new a.ExtraDimVertical(
																o.default.point(e.st.x, e.st.y),
																o.default.point(e.et.x, e.et.y),
																t.host,
																o.default.vector(e.ov.x, e.ov.y),
														  ))
														: r === a.ExtraDimTypeEnum.Radius
														? (n = new a.ExtraDimRadius(
																e.txt,
																o.default.point(e.st.x, e.st.y),
																t.host,
																o.default.vector(e.ov.x, e.ov.y),
														  ))
														: r === a.ExtraDimTypeEnum.Angle &&
														  (n = new a.ExtraDimAngle(o.default.point(e.st.x, e.st.y), t.host)),
													n)
												) {
													var i = [];
													t.host.addExtraDim(n),
														e.name && (n.name = e.name),
														e.fr.forEach(function (e) {
															return i.push(new a.FrameRelationData(0, 0).deserialize(e));
														}),
														n.createFrameRelation(i);
												}
											}));
									}),
									e
								);
							})();
						t.ExtraDimManager = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ProfileSizeManager = void 0);
						var i = r(n(0)),
							o = n(9),
							a = n(1),
							s = (function () {
								function e(e, t) {
									var n = this;
									(this.host = e),
										(this.view = t),
										(this._frame = this.params.frame),
										(this._frameMullion = this.params.frameMullion),
										(this._frameMullionLg = this.params.frameMullionLg),
										(this._reinforcedFrameMullion = this.params.reinforcedFrameMullion),
										(this._sash = this.params.sash),
										(this._guardSash = this.params.guardSash),
										(this._upSash = this.params.upSash),
										(this._downSash = this.params.downSash),
										(this._interlock = this.params.interlock),
										(this._screen = this.params.screen),
										(this._sashMullion = this.params.sashMullion),
										(this._kfcWaist = this.params.kfcWaist),
										(this._bead = this.params.bead),
										(this._antiTheft = this.params.antiTheft),
										(this._antiTheftMullion = this.params.antiTheftMullion),
										(this._antiTheftHoleHeight = this.params.antiTheftHoleHeight),
										(this._antiTheftGap = this.params.antiTheftGap),
										(this._antiTheftHandleW = this.params.antiTheftHandleW),
										(this._shadeSash = this.params.shadeSash),
										(this._shadeSashMullion = this.params.shadeSashMullion),
										(this._shadeMullion = this.params.shadeMullion),
										(this._millingFrame = this.params.millingFrame),
										(this._millingSash = this.params.millingSash),
										(this._glassGap = this.params.glassGap),
										(this._innerFrame = this.params.innerFrame),
										(this.sizeMap = new Map([
											[
												a.ShapeType.Frame,
												function () {
													return n.frame;
												},
											],
											[
												a.ShapeType.FrameMullion,
												function () {
													return n.frameMullion;
												},
											],
											[
												a.ShapeType.Sash,
												function () {
													return n.sash;
												},
											],
											[
												a.ShapeType.GuardSash,
												function () {
													return n.guardSash;
												},
											],
											[
												a.ShapeType.CircleSash,
												function () {
													return n.sash;
												},
											],
											[
												a.ShapeType.KfcSash,
												function () {
													return n.sash;
												},
											],
											[
												a.ShapeType.Screen,
												function () {
													return n.screen;
												},
											],
											[
												a.ShapeType.SashMullion,
												function () {
													return n.sashMullion;
												},
											],
											[
												a.ShapeType.ScreenMullion,
												function () {
													return n.sashMullion;
												},
											],
											[
												a.ShapeType.KfcWaist,
												function () {
													return n.kfcWaist;
												},
											],
											[
												a.ShapeType.Bead,
												function () {
													return n.bead;
												},
											],
											[
												a.ShapeType.AntiTheft,
												function () {
													return n.antiTheft;
												},
											],
											[
												a.ShapeType.AntiTheftMullion,
												function () {
													return n.antiTheftMullion;
												},
											],
											[
												a.ShapeType.AntiTheftHoleHeight,
												function () {
													return n.antiTheftHoleHeight;
												},
											],
											[
												a.ShapeType.AntiTheftGap,
												function () {
													return n.antiTheftGap;
												},
											],
											[
												a.ShapeType.AntiTheftHandleW,
												function () {
													return n.antiTheftHandleW;
												},
											],
											[
												a.ShapeType.ShadePushSash,
												function () {
													return n.shadeSash;
												},
											],
											[
												a.ShapeType.ShadePushSashMullion,
												function () {
													return n.shadeSashMullion;
												},
											],
											[
												a.ShapeType.Shade,
												function () {
													return n.shadeMullion;
												},
											],
											[
												a.ShapeType.MillingFrame,
												function () {
													return n._millingFrame;
												},
											],
											[
												a.ShapeType.MillingSash,
												function () {
													return n._millingSash;
												},
											],
											[
												a.ShapeType.GlassGap,
												function () {
													return n._glassGap;
												},
											],
											[
												a.ShapeType.InnerFrame,
												function () {
													return n._innerFrame;
												},
											],
										]));
								}
								return (
									Object.defineProperty(e.prototype, 'frame', {
										get: function () {
											return this._frame;
										},
										set: function (e) {
											var t = this,
												n = this.host.polygon.edges,
												r = this.host.polygon.asMulEdgeIndexes;
											n.forEach(function (n, i) {
												r.some(function (e) {
													return e === i;
												}) || (t.host.frameManager._edgeWidth[i] = e);
											}),
												(this._frame = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'frameMullion', {
										get: function () {
											return this._frameMullion;
										},
										set: function (e) {
											var t = this,
												n = this.host.mulManager.splitter;
											n.alignForNewProfileSizes(e),
												n.lineProfileSizes.forEach(function (t, r) {
													n.lines[r].line instanceof o.FrametifyLike || (n.lineProfileSizes[r] = e);
												}),
												this.host.polygon.asMulEdgeIndexes.forEach(function (n) {
													return (t.host.frameManager._edgeWidth[n] = e);
												}),
												(this._frameMullion = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'frameMullionLg', {
										get: function () {
											return this._frameMullionLg || this._frameMullion;
										},
										set: function (e) {
											this._frameMullionLg = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'reinforcedFrameMullion', {
										get: function () {
											return this._reinforcedFrameMullion;
										},
										set: function (e) {
											(this.host.mulManager.reinforcedFrameMullionSize = e),
												(this._reinforcedFrameMullion = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'guardSash', {
										get: function () {
											return this._guardSash;
										},
										set: function (e) {
											this.host.sashManager.allSashes
												.filter(function (e) {
													return e.type === a.ShapeType.GuardSash;
												})
												.forEach(function (t) {
													return (t.frameManager.allProfileSize = e);
												}),
												(this._guardSash = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sash', {
										get: function () {
											return this._sash;
										},
										set: function (e) {
											this.host.sashManager.allSashes
												.filter(function (e) {
													return e.type === a.ShapeType.Sash || e.type === a.ShapeType.KfcSash;
												})
												.forEach(function (t) {
													return (t.frameManager.allProfileSize = e);
												}),
												(this._sash = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'upSash', {
										get: function () {
											return this._upSash;
										},
										set: function (e) {
											this.host.sashManager.allSashes
												.filter(function (e) {
													return e.type === a.ShapeType.Sash || e.type === a.ShapeType.KfcSash;
												})
												.forEach(function (t) {
													var n = t.polygon.edges,
														r = t.polygon.box.center,
														o = n.findIndex(function (e) {
															return (
																i.default.segment(r, r.translate(0, -9999)).intersect(e).length > 0
															);
														});
													t.frameManager.edgeWidth[o] = e;
												}),
												(this._upSash = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'downSash', {
										get: function () {
											return this._downSash;
										},
										set: function (e) {
											this.host.sashManager.allSashes
												.filter(function (e) {
													return e.type === a.ShapeType.Sash || e.type === a.ShapeType.KfcSash;
												})
												.forEach(function (t) {
													var n = t.polygon.edges,
														r = t.polygon.box.center,
														o = n.findIndex(function (e) {
															return (
																i.default.segment(r, r.translate(0, 9999)).intersect(e).length > 0
															);
														});
													t.frameManager.edgeWidth[o] = e;
												}),
												(this._downSash = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'interlock', {
										get: function () {
											return this._interlock;
										},
										set: function (e) {
											this.host.sashManager.slides.forEach(function (t) {
												t.sashes.forEach(function (t) {
													var n = t.polygon.edges,
														r = t.polygon.box.center,
														o = n.findIndex(function (e) {
															return (
																i.default.segment(r, r.translate(9999, 0)).intersect(e).length > 0
															);
														});
													t.interlockOnRight && (t.frameManager.edgeWidth[o] = e);
													var a = n.findIndex(function (e) {
														return (
															i.default.segment(r, r.translate(-9999, 0)).intersect(e).length > 0
														);
													});
													t.interlockOnLeft && (t.frameManager.edgeWidth[a] = e);
												});
											}),
												(this._interlock = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'screen', {
										get: function () {
											return this._screen;
										},
										set: function (e) {
											this.host.sashManager.allSashes
												.filter(function (e) {
													return e.type === a.ShapeType.Screen;
												})
												.forEach(function (t) {
													return (t.frameManager.allProfileSize = e);
												}),
												(this._screen = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sashMullion', {
										get: function () {
											return this._sashMullion;
										},
										set: function (e) {
											(this._sashMullion = e),
												this.host.sashManager.allSashes.forEach(function (t) {
													var n = t.mulManager.splitter;
													n.lineProfileSizes.forEach(function (t, r) {
														n.lines[r].kfcWaist || (n.lineProfileSizes[r] = e);
													});
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'kfcWaist', {
										get: function () {
											return this._kfcWaist;
										},
										set: function (e) {
											(this._kfcWaist = e),
												this.host.sashManager.allSashes.forEach(function (t) {
													var n = t.mulManager.splitter;
													n.lineProfileSizes.forEach(function (t, r) {
														n.lines[r].kfcWaist && (n.lineProfileSizes[r] = e);
													});
												});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'bead', {
										get: function () {
											return this._bead;
										},
										set: function (e) {
											this.host.mulManager.glasses.forEach(function (t) {
												t.bead && (t.bead.frameManager.allProfileSize = e);
											}),
												this.host.mulManager.toJSON(),
												this.host.sashManager.allSashes.forEach(function (t) {
													t.mulManager.glasses.forEach(function (t) {
														t.bead && (t.bead.frameManager.allProfileSize = e);
													}),
														t.mulManager.toJSON();
												}),
												(this._bead = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'antiTheft', {
										get: function () {
											return this._antiTheft;
										},
										set: function (e) {
											this.host.sashManager.thefts.forEach(function (t) {
												return (t.frameManager.allProfileSize = e);
											}),
												(this._antiTheft = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'antiTheftMullion', {
										get: function () {
											return this._antiTheftMullion;
										},
										set: function (e) {
											this.host.sashManager.thefts.forEach(function (t) {
												return (t.shutManager.allProfileSize = e);
											}),
												(this._antiTheftMullion = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'antiTheftHoleHeight', {
										get: function () {
											return this._antiTheftHoleHeight;
										},
										set: function (e) {
											this._antiTheftHoleHeight = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'antiTheftGap', {
										get: function () {
											return this._antiTheftGap;
										},
										set: function (e) {
											this._antiTheftGap = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'antiTheftHandleW', {
										get: function () {
											return this._antiTheftHandleW;
										},
										set: function (e) {
											this._antiTheftHandleW = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shadeSash', {
										get: function () {
											return this._shadeSash;
										},
										set: function (e) {
											this.host.sashManager.allSashes
												.filter(function (e) {
													return e.type === a.ShapeType.ShadePushSash;
												})
												.forEach(function (t) {
													return (t.frameManager.allProfileSize = e);
												}),
												(this._shadeSash = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shadeSashMullion', {
										get: function () {
											return this._shadeSashMullion;
										},
										set: function (e) {
											this.host.sashManager.allSashes
												.filter(function (e) {
													return e.type === a.ShapeType.ShadePushSash;
												})
												.forEach(function (t) {
													return (t.mulManager.allProfileSize = e);
												}),
												(this._shadeSashMullion = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shadeMullion', {
										get: function () {
											return this._shadeMullion;
										},
										set: function (e) {
											this._shadeMullion = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'params', {
										get: function () {
											return this.view.params;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.get = function (e) {
										return this.sizeMap.get(e)();
									}),
									Object.defineProperty(e.prototype, 'millingSash', {
										get: function () {
											return this._millingSash;
										},
										set: function (e) {
											this._millingSash = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'millingFrame', {
										get: function () {
											return this._millingFrame;
										},
										set: function (e) {
											this._millingFrame = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'glassGap', {
										get: function () {
											return this._glassGap;
										},
										set: function (e) {
											this._glassGap = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'innerFrame', {
										get: function () {
											return this._innerFrame;
										},
										set: function (e) {
											var t = this.host.mulManager.splitter;
											t.lineProfileSizes.forEach(function (n, r) {
												t.lines[r].line instanceof o.FrametifyLike && (t.lineProfileSizes[r] = e);
											}),
												(this._innerFrame = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.output = function () {
										return {
											frame: this.frame,
											frameMullion: this.frameMullion,
											frameMullionLg: this.frameMullionLg,
											reinforcedFrameMullion: this.reinforcedFrameMullion,
											sash: this.sash,
											upSash: this.upSash,
											downSash: this.downSash,
											interlock: this.interlock,
											screen: this.screen,
											sashMullion: this.sashMullion,
											kfcWaist: this.kfcWaist,
											bead: this.bead,
											antiTheft: this.antiTheft,
											antiTheftMullion: this.antiTheftMullion,
											millingFrame: this.millingFrame,
											millingSash: this.millingSash,
											glassGap: this.glassGap,
											shadeSash: this.shadeSash,
											shadeMullion: this.shadeMullion,
											innerFrame: this.innerFrame,
										};
									}),
									(e.prototype.toJSON = function () {
										return {
											f: this.frame,
											fm: this.frameMullion,
											sa: this.sash,
											usa: this.upSash,
											dsa: this.downSash,
											il: this.interlock,
											sc: this.screen,
											sm: this.sashMullion,
											kw: this.kfcWaist,
											b: this.bead,
											a: this.antiTheft,
											am: this.antiTheftMullion,
											ahh: this.antiTheftHoleHeight,
											ag: this.antiTheftGap,
											ahw: this.antiTheftHandleW,
											mf: this.millingFrame,
											ms: this.millingSash,
											gg: this.glassGap,
											inf: this.innerFrame,
										};
									}),
									(e.prototype.deserialize = function (e) {
										e ||
											(e = {
												f: this.params.frame,
												fm: this.params.frameMullion,
												sa: this.params.sash,
												sc: this.params.screen,
												sm: this.params.sashMullion,
												kw: this.params.kfcWaist,
												b: this.params.bead,
												a: this.params.antiTheft,
												am: this.params.antiTheftMullion,
												ahh: this.params.antiTheftHoleHeight,
												ag: this.params.antiTheftGap,
												ahw: this.params.antiTheftHandleW,
												ms: this.params.millingSash,
												mf: this.params.millingFrame,
												gg: this.params.glassGap,
												inf: this.params.innerFrame,
											}),
											(this._frame = e.f),
											(this._frameMullion = e.fm),
											(this._sash = e.sa),
											(this._upSash = e.usa ? e.usa : this._sash),
											(this._downSash = e.dsa ? e.dsa : this._sash),
											(this._interlock = e.il ? e.il : this._sash),
											(this._screen = e.sc),
											(this._sashMullion = e.sm ? e.sm : this._sashMullion),
											(this._kfcWaist = e.kw ? e.kw : this._kfcWaist),
											(this._bead = e.b),
											(this._antiTheft = e.a),
											(this._antiTheftMullion = e.am),
											(this._antiTheftHoleHeight =
												void 0 === e.ahh ? this._antiTheftHoleHeight : e.ahh),
											(this._antiTheftGap = void 0 === e.ag ? this._antiTheftGap : e.ag),
											(this._antiTheftHandleW = void 0 === e.ahw ? this._antiTheftHandleW : e.ahw),
											(this._millingFrame = e.mf ? e.mf : this._millingFrame),
											(this._millingSash = e.ms ? e.ms : this._millingSash),
											(this._glassGap = e.gg ? e.gg : this._glassGap),
											(this._innerFrame = e.inf ? e.inf : this._innerFrame);
									}),
									e
								);
							})();
						t.ProfileSizeManager = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ShadeManager = void 0);
						var a = o(n(0)),
							s = n(7),
							l = n(9),
							h = n(2),
							c = n(1),
							u = (function () {
								function e(e) {
									(this.host = e),
										(this.gap = 0),
										(this.padding = 0),
										(this.computedGap = 0),
										(this.where = c.ShapeType.Shade),
										(this.splitter = new l.FillerSplitterAgent(this.host, this.where)),
										(this.profileSize = this.host.topFrame.profileSizeManager.get(this.where));
								}
								return (
									Object.defineProperty(e.prototype, 'width', {
										get: function () {
											return this.profileSize;
										},
										set: function (e) {
											this.profileSize = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'bars', {
										get: function () {
											var e = this,
												t = [];
											return (
												this.host.children.forEach(function (n) {
													n instanceof c.Bar && n.where === e.where && t.push(n);
												}),
												t
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.clear = function () {
										this.bars.forEach(function (e) {
											return e.remove();
										}),
											this.splitter.clear();
									}),
									(e.prototype.translate = function (e) {
										this.splitter.translate(e),
											this.bars.forEach(function (t) {
												return t.translate(e);
											});
									}),
									(e.prototype.updatePoly = function () {
										var e = this;
										this.host.polygon.isEmpty ||
											(this.clear(),
											this.makeSplittersForPolygon(this.host.polygon),
											this.splitter.updatePoly().forEach(function (t) {
												e.host.add(new c.Bar(t, e.where));
											}));
									}),
									(e.prototype.toJSON = function () {
										return {
											wd: this.width,
											gp: this.gap,
											pd: this.padding,
										};
									}),
									(e.prototype.deserialize = function (e) {
										var t = this;
										this.clear(),
											e &&
												(e.wd && (this.width = e.wd),
												e.gp && (this.gap = e.gp),
												e.pd && (this.padding = e.pd)),
											this.makeSplittersForPolygon(this.host.polygon),
											this.splitter.updatePoly().forEach(function (e) {
												t.host.add(new c.Bar(e, t.where));
											});
									}),
									(e.prototype.makeSplittersForPolygon = function (e) {
										var t,
											n = e.polyId,
											r = this.computeSplitPoints(e).map(function (e, t) {
												var r = new h.SplitterObj();
												return (
													(r.polyId = 0 === t ? n.clone() : new h.PolyId(t - 1, 0)),
													(r.line = a.default.line(e, a.default.vector(0, 1))),
													r
												);
											});
										return (
											(t = this.splitter.lines).push.apply(t, i(r)),
											(this.splitter.profileSize =
												this.gap < 0 ? this.profileSize + this.gap : this.profileSize),
											r
										);
									}),
									(e.prototype.computeSplitPoints = function (e) {
										var t,
											n = [],
											r = this.profileSize,
											i = this.gap,
											o = this.beadSize(),
											l = e.box,
											h = l.ymax - l.ymin - 2 * o - 2 * this.padding;
										(t = s.DrawParams.Ins.roundUpShadeCounts
											? Math.ceil((h - r) / (r + i)) + 1
											: Math.floor((h - r) / (r + i)) + 1),
											(this.computedGap = (h - t * r) / (t - 1));
										for (
											var c = l.ymin + o + this.padding + r / 2,
												u = this.computedGap + r,
												p = a.default.point(l.center.x, c),
												f = 0;
											f < t;
											f++
										) {
											var d = f > 0 ? p.translate(a.default.vector(0, 1).multiply(u * f)) : p;
											n.push(d);
										}
										return n;
									}),
									(e.prototype.beadSize = function () {
										return this.host.withBead
											? this.host.topFrame.profileSizeManager.get(c.ShapeType.Bead)
											: 0;
									}),
									e
								);
							})();
						t.ShadeManager = u;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__values) ||
								function (e) {
									var t = 'function' == typeof Symbol && Symbol.iterator,
										n = t && e[t],
										r = 0;
									if (n) return n.call(e);
									if (e && 'number' == typeof e.length)
										return {
											next: function () {
												return (
													e && r >= e.length && (e = void 0),
													{
														value: e && e[r++],
														done: !e,
													}
												);
											},
										};
									throw new TypeError(
										t ? 'Object is not iterable.' : 'Symbol.iterator is not defined.',
									);
								},
							i =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							o =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
									return e;
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarManager = void 0);
						var a = n(2),
							s = n(31),
							l = n(1),
							h = (function () {
								function e(e) {
									(this.host = e), (this.decorationBars = new Map());
								}
								return (
									(e.prototype.addDecorationBar = function (e, t) {
										t.decorationBar.split().forEach(function (e) {
											var n = new l.Bar(e, l.ShapeType.DecorationBar);
											t.add(n);
										}),
											this.host.add(t),
											this.decorationBars.set(JSON.stringify(e.polyId.toJSON()), t);
									}),
									(e.prototype.getDecorationBar = function (e) {
										return this.decorationBars.get(JSON.stringify(e.toJSON()));
									}),
									(e.prototype.updatePoly = function () {
										var e = this;
										this.clearBar();
										var t = [];
										this.decorationBars.forEach(function (n, i) {
											var o,
												s,
												h = !1,
												c =
													e.host instanceof l.Frame || e.host instanceof l.Sash
														? e.host.mulManager.glasses
														: [],
												u = function (t) {
													var r = t.polygon;
													return e.host.usedPoly.some(function (e) {
														return e.equalTo(r.polyId);
													})
														? 'continue'
														: r.polyId.equalTo(new a.PolyId().deserialize(JSON.parse(i)))
														? ((h = !0),
														  t.bead && (r = t.bead.innerPoly[0]),
														  (r = r.clone()).polyId.deserialize(t.polygon.polyId),
														  (n.polygon = r),
														  (n.decorationBar.hostPoly = r),
														  n.decorationBar.split().forEach(function (e) {
																var t = new l.Bar(e, l.ShapeType.DecorationBar);
																n.add(t);
														  }),
														  e.host.add(n),
														  'break')
														: void 0;
												};
											try {
												for (var p = r(c), f = p.next(); !f.done; f = p.next())
													if ('break' === u(f.value)) break;
											} catch (e) {
												o = {
													error: e,
												};
											} finally {
												try {
													f && !f.done && (s = p.return) && s.call(p);
												} finally {
													if (o) throw o.error;
												}
											}
											h || t.push(i);
										}),
											t.forEach(function (t) {
												e.removeBar(new a.PolyId().deserialize(JSON.parse(t)), !0);
											});
									}),
									(e.prototype.clearBar = function () {
										this.decorationBars.forEach(function (e) {
											return e.clearBar();
										});
									}),
									(e.prototype.removeBar = function (e, t) {
										void 0 === t && (t = !1);
										var n = this.decorationBars.get(JSON.stringify(e));
										n && n.clearBar(), t && this.decorationBars.delete(JSON.stringify(e.toJSON()));
									}),
									(e.prototype.translate = function (e) {
										this.decorationBars.forEach(function (t) {
											t.translate(e);
										});
									}),
									(e.prototype.toJSON = function () {
										var e = [];
										return (
											this.decorationBars.forEach(function (t, n) {
												e.push([n, t.toJSON()]);
											}),
											{
												bars: e,
											}
										);
									}),
									(e.prototype.deserialize = function (e) {
										var t = this,
											n = e.bars;
										this.clearBar(),
											this.decorationBars.clear(),
											n.forEach(function (e) {
												var n = e[0],
													r = new s.DecorationShape(
														new s.DecorationBarChinese([]),
														new l.WinPolygon(),
													);
												r.deserialize(e[1]), t.host.add(r), t.decorationBars.set(n, r);
											});
									}),
									Object.defineProperty(e.prototype, 'bars', {
										get: function () {
											var e = [];
											return (
												this.decorationBars.forEach(function (t) {
													e.push.apply(e, o(t.bars));
												}),
												e
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.DecorationBarManager = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.BarEndpoint = void 0);
						var i = r(n(0)),
							o = n(1),
							a = n(2),
							s = n(9),
							l = (function () {
								function e(e, t, n, r) {
									(this.frame = e),
										(this.idxOfSplitBarPolyId = t),
										(this.idxOfMulBarPolyId = n),
										(this.start = r);
								}
								return (
									Object.defineProperty(e.prototype, 'view', {
										get: function () {
											return this.frame.view;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'bars', {
										get: function () {
											var e = this,
												t = this.mul;
											return this.frame.children.filter(function (n) {
												if (
													n instanceof o.Bar &&
													n.where === o.ShapeType.Frame &&
													n.polyId.idx === e.idxOfSplitBarPolyId &&
													n !== t
												)
													return a.Utils.polyCoincide(n.polygon, t.polygon, !0, 5, !1);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'cpt', {
										get: function () {
											var e = this.mul;
											return this.start ? e.polygon.mulShape.start : e.polygon.mulShape.end;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'mulManager', {
										get: function () {
											return this.frame.mulManager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'splitterObj', {
										get: function () {
											return this.mulManager.splitter.lines[this.idxOfMulBarPolyId];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'mul', {
										get: function () {
											var e = this;
											return this.mulManager.bars.find(function (t) {
												return t.polyId.idx === e.idxOfMulBarPolyId;
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'split', {
										get: function () {
											return this.splitAtEndpoint;
										},
										set: function (e) {
											if (
												('boolean' == typeof e &&
													(e = !0 === e ? a.EndpointSplitWay.Through : a.EndpointSplitWay.None),
												this.isSteelPlastic && (this.isSteelPlastic = !1),
												e !== this.splitAtEndpoint)
											) {
												var t = new s.VirtualBarFix(this.frame);
												if ((t.record(), e !== a.EndpointSplitWay.None)) {
													var n = e === a.EndpointSplitWay.LeftOrTopJoin,
														r = e === a.EndpointSplitWay.RightOrBottomJoin,
														o = this.mul.polygon.mulShape,
														l = this.bars[0].polygon.mulShape,
														h =
															o instanceof i.default.Segment &&
															a.Utils.isHorizOrVer(o) &&
															l instanceof i.default.Segment &&
															a.Utils.isHorizOrVer(l);
													if ((n || r) && !h) return;
													if ((this.undoSplit(), this.splitThrough(), n || r)) {
														var c = new s.JoinBarAfterSplit(),
															u = this.bars.map(function (e) {
																return e.polygon;
															}),
															p = this.mul.polygon,
															f = this.frame.frameManager.getEdgeWidth(u[0].polyId.idx),
															d =
																this.frame.mulManager.splitter.lineProfileSizes[
																	this.idxOfMulBarPolyId
																];
														c.join(u, p, r, f, d);
													}
													this.mul.draw(this.view),
														this.mulManager.setSplitOperator(this.idxOfMulBarPolyId, this.start, e);
												} else this.undoSplit();
												this.mulManager.refreshMullionRobot(this.view, this.mul),
													this.mulManager.updatePoly(),
													t.recovery(),
													this.mulManager.refresh(this.view),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'splitAtEndpoint', {
										get: function () {
											return this.start ? this.splitterObj.start.split : this.splitterObj.end.split;
										},
										set: function (e) {
											this.start
												? (this.splitterObj.start.split = e)
												: (this.splitterObj.end.split = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.undoSplit = function () {
										(this.splitAtEndpoint = a.EndpointSplitWay.None),
											this.mulManager.host.updateFrame(!1),
											this.mulManager.host.draw(this.view),
											this.view.refresh();
									}),
									(e.prototype.splitThrough = function () {
										var e = this.bars[0],
											t = new s.SplitBar(e.polygon, this.mul.polygon, this.cpt);
										try {
											var n = t.run(),
												r = this.mul.polygon.cloneWith(n.nedges);
											r.updateMulShape(n.npt, this.cpt), this.mul.updatePoly(r);
											var i = e.parent;
											if (n.nbPoly.length > 0) {
												if ((e.updatePoly(n.nbPoly[0]), 2 === n.nbPoly.length)) {
													var l = new o.Bar(n.nbPoly[1], e.where);
													i.add(l);
												}
												this.calcPolyId(i, n.nbPoly[0].polyId.idx);
											}
											this.start
												? this.mul.epDock.setDock(!0, a.Dock.None())
												: this.mul.epDock.setDock(!1, a.Dock.None()),
												i.draw(this.view),
												this.view.activeLayer.batchDraw();
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype.calcPolyId = function (e, t) {
										var n = e.children.filter(function (n) {
												var r = n.polygon.polyId;
												return n instanceof o.Bar && n.where === e.type && r.idx === t && r.pos < 0;
											}),
											r = -1;
										n.forEach(function (e) {
											return (e.polygon.polyId.pos = r--);
										});
									}),
									Object.defineProperty(e.prototype, 'hasFixedProperty', {
										get: function () {
											return (
												this.mul.polygon.mulShape instanceof i.default.Segment ||
												this.mul.polygon.mulShape instanceof i.default.Arc
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'fixed', {
										get: function () {
											if (!this.hasFixedProperty) return !1;
											var e = this.mulManager.splitter.lines[this.idxOfMulBarPolyId];
											return this.start ? e.start.fixed : e.end.fixed;
										},
										set: function (e) {
											if (this.hasFixedProperty) {
												var t = this.mulManager.splitter.lines[this.idxOfMulBarPolyId];
												this.start ? (t.start.fixed = e) : (t.end.fixed = e),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isSteelPlastic', {
										get: function () {
											var e = this.mulManager.splitter.lines[this.idxOfMulBarPolyId];
											return this.start ? e.start.steel : e.end.steel;
										},
										set: function (e) {
											if (!this.split) {
												var t = this.mulManager.splitter.lines[this.idxOfMulBarPolyId];
												this.start ? (t.start.steel = e) : (t.end.steel = e);
												var n = this.mulManager.host,
													r = this.view;
												n.draw(r), this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isConnectFrame', {
										get: function () {
											return this.bars[0].where === this.mul.parent.type;
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.BarEndpoint = l;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrameJointWay = void 0);
						var r = n(1),
							i = (function () {
								function e(e, t, n) {
									(this.fm = e), (this.idx = t), (this.view = n);
								}
								return (
									Object.defineProperty(e.prototype, 'jointWay', {
										get: function () {
											return this.fm.getJointWay(this.idx);
										},
										set: function (e) {
											if (
												this.jointWay !== e &&
												(this.fm.setJointWay(this.idx, e, this.view),
												this.fm.host instanceof r.Sash)
											) {
												var t = this.fm.host;
												t.hardwareManager.updatePoly(),
													t.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.FrameJointWay = i;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SashSettings = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(11),
							h = n(1),
							c = n(13),
							u = (function () {
								function e(e, t) {
									(this.manager = e), (this.view = t);
								}
								return (
									Object.defineProperty(e.prototype, 'target', {
										get: function () {
											return this.manager.sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isPush', {
										get: function () {
											return this.manager instanceof c.PushSashHardwareManager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isKfc', {
										get: function () {
											return this.manager.sash instanceof h.KfcSash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isDouble', {
										get: function () {
											return this.isPush && this.target.parent instanceof h.DoubleSash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isSlide', {
										get: function () {
											return this.manager instanceof c.SlideHardwareManager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isVerticalSlide', {
										get: function () {
											return !!this.isSlide && this.target.parent.appliedOption.isVerticalSlide;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isFold', {
										get: function () {
											return this.manager instanceof c.FoldHardwareManager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isShade', {
										get: function () {
											return this.sash.mulManager.shades.length > 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'opened', {
										get: function () {
											return !!this.isPush && this.sash.opened;
										},
										set: function (e) {
											var t = this.sash;
											t.opened !== e &&
												((t.opened = e),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'jointWay', {
										get: function () {
											return this.sash.jointWay;
										},
										set: function (e) {
											(this.sash.jointWay = e),
												this.sash.updatePoly(),
												this.sash.draw(this.view),
												h.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handlePosition', {
										get: function () {
											return this.isPush
												? this.sashHardware.handle.handlePosition
												: a.default.point();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'offvecEnabled', {
										get: function () {
											return this.sash.offvecEnabled;
										},
										set: function (e) {
											(this.sash.offvecEnabled = e), e || (this.hasOffset = !1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasOffset', {
										get: function () {
											return !this.manager.sash.offvec.equalTo(a.default.vector());
										},
										set: function (e) {
											var t = this;
											e ||
												(this.sash.translate(this.sash.offvec.invert()),
												(this.sash.offvec = a.default.vector()),
												this.sash.updatePoly(),
												this.sash.draw(this.view),
												this.sash.hideAssist(),
												this.sash.topFrame.sashManager.sashes
													.filter(function (e) {
														return e !== t.sash && e.type === h.ShapeType.Screen;
													})
													.filter(function (e) {
														return e.polyId.equalTo(t.sash.polyId);
													})
													.forEach(function (e) {
														return e.draw(t.view);
													}),
												h.Glass.calcSerial(this.view.shapeManager.shapem),
												this.broadcastTopViewChange(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openDirection', {
										get: function () {
											return this.manager.openDirection;
										},
										set: function (e) {
											if (this.manager.openDirection !== e) {
												var t = !1;
												if (this.sash instanceof h.PushSash)
													if (
														((([c.OpenDirection.Up, c.OpenDirection.Down].indexOf(e) >= 0 &&
															-1 ===
																[c.OpenDirection.Up, c.OpenDirection.Down].indexOf(
																	this.openDirection,
																)) ||
															(-1 === [c.OpenDirection.Up, c.OpenDirection.Down].indexOf(e) &&
																[c.OpenDirection.Up, c.OpenDirection.Down].indexOf(
																	this.openDirection,
																) >= 0)) &&
															(this.sashHardware.hinges.forEach(function (e) {
																return (e.autoOffset = !0);
															}),
															(this.sashHardware.handle.autoOffset = !0),
															(t = !0)),
														e === c.OpenDirection.Float)
													) {
														(this.sashHardware.handle.hidden = !1),
															(this.sashHardware.subHandle.hidden = !1),
															(this.sashHardware.handle.autoOffset = !0),
															(this.sashHardware.subHandle.autoOffset = !0),
															(this.sashHardware.handleType = h.HardwareShape.Handle);
														var n = l.EdgeFinder.Instance.findIndex2(
																l.Direction.Left,
																this.sash.polygon,
															),
															r = l.EdgeFinder.Instance.findIndex2(
																l.Direction.Right,
																this.sash.polygon,
															);
														(this.sashHardware.subHandle.edgeIndex = n),
															(this.sashHardware.handle.edgeIndex = r);
													} else this.sashHardware.subHandle.hidden = !0;
												var i = this.readableHandleOffset;
												(this.manager.openDirection = e),
													this.sash.updatePoly(),
													!t &&
														this.sashHardware.handle instanceof h.HardwareOnEdge &&
														((this.sashHardware.handle.readableOffset = i),
														this.sashHardware.handle.updatePoly()),
													this.sash.draw(this.view),
													this.broadcastHandleChange(),
													this.broadcastTopViewChange(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'pivotAtSide', {
										get: function () {
											return !!this.isPush && this.sashHardware.pivotAtSide;
										},
										set: function (e) {
											this.isPush &&
												((this.sashHardware.pivotAtSide = e),
												this.sash.updatePoly(),
												this.sash.draw(this.view),
												this.broadcastTopViewChange(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowPivotAtSideSet', {
										get: function () {
											return (
												!!this.isPush &&
												(this.sashHardware.openDirection === c.OpenDirection.Left_Rotate ||
													this.sashHardware.openDirection === c.OpenDirection.Right_Rotate)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openToward', {
										get: function () {
											return this.isPush ? this.sashHardware.openToward : c.OpenToward.Outward;
										},
										set: function (e) {
											this.sashHardware.openToward !== e &&
												((this.sashHardware.openToward = e),
												this.sashHardware.indicator.updatePoly(),
												this.sash instanceof h.PushSash &&
													this.sash.isStandalone &&
													this.view.eventBus.emit({
														type: s.EventType.turning_detect,
														payload: {
															frame: this.sash.topFrame,
														},
													}),
												this.sash.draw(this.view),
												this.broadcastTopViewChange(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openMode', {
										get: function () {
											return this.manager.openDirection;
										},
										set: function (e) {
											var t = this.openToward;
											(this.openDirection = e), (this.openToward = t);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'multiLockPoints', {
										get: function () {
											return !!this.isPush && this.sashHardware.multiLockPoints;
										},
										set: function (e) {
											(this.sashHardware.multiLockPoints = e),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openDegree', {
										get: function () {
											return this.isPush ? this.sash.openDegree : -1;
										},
										set: function (e) {
											(this.sash.openDegree = e), this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingeType', {
										get: function () {
											return this.isPush ? this.sashHardware.hingeType : h.HardwareShape.Hinge;
										},
										set: function (e) {
											var t = this;
											(this.sashHardware.hingeType = e),
												this.sashHardware.hinges.forEach(function (e) {
													e.updatePoly(), e.draw(t.view);
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingeCount', {
										get: function () {
											return this.isPush ? this.sashHardware.hingeCount : -1;
										},
										set: function (e) {
											this.sashHardware.hingeCount !== e &&
												((this.sashHardware.hingeCount = e),
												this.sashHardware.hinges.forEach(function (e) {
													return (e.autoOffset = !0);
												}),
												this.sashHardware.updatePoly(),
												this.sash.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'autoHingeOffsets', {
										get: function () {
											return (
												!!this.isPush &&
												!this.sashHardware.hinges.some(function (e) {
													return !e.autoOffset;
												})
											);
										},
										set: function (e) {
											this.autoHingeOffsets !== e &&
												(this.sashHardware.hinges.forEach(function (t) {
													return (t.autoOffset = e);
												}),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingeOffsets', {
										get: function () {
											if (!this.isPush) return [];
											var e = this.sashHardware.hingeEdge;
											return this.sashHardware.hinges.map(function (t) {
												return t.offset - e.length / 2;
											});
										},
										set: function (e) {
											if (
												!this.isSameArray(e, this.hingeOffsets) &&
												e.length === this.sashHardware.hingeCount
											) {
												var t = this.sashHardware.hingeEdge;
												this.sashHardware.hinges.forEach(function (n, r) {
													(n.offset = e[r] + t.length / 2), n.updatePoly();
												}),
													this.sash.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleTypeList', {
										get: function () {
											return this.isPush
												? i(
														h.HardwareShapeCreator.Ins.windowHandles,
														h.HardwareShapeCreator.Ins.doorHandles,
												  )
												: [];
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleType', {
										get: function () {
											return this.isPush ? this.sashHardware.handleType : h.HardwareShape.Handle;
										},
										set: function (e) {
											(this.sashHardware.handleType = e),
												this.sash.updatePoly(),
												this.sash.draw(this.view),
												h.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'autoHandleOffset', {
										get: function () {
											return !!this.isPush && this.sashHardware.handle.autoOffset;
										},
										set: function (e) {
											this.sashHardware.handle.autoOffset !== e &&
												((this.sashHardware.handle.autoOffset = e),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleRelativeSet', {
										get: function () {
											var e = this.sashHardware.handle;
											return e instanceof h.Handle && e.relativeOffsetSet;
										},
										set: function (e) {
											var t = this.sashHardware.handle;
											t instanceof h.Handle &&
												((t.relativeOffsetSet = e),
												(t.dimToMid.hidden = !e),
												e ? ((t.autoOffset = !0), (t.dim.hidden = !0)) : (t.relativeOffset = 0),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleOffset', {
										get: function () {
											return this.isPush ? this.round(this.sashHardware.handle.offset) : -1;
										},
										set: function (e) {
											this.isSame(this.sashHardware.handle.offset, e) ||
												((this.sashHardware.handle.offset = e),
												this.sashHardware.handle.updatePoly(),
												this.sash.draw(this.view),
												this.broadcastHandleChange(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'withTurningFrame', {
										get: function () {
											return !!this.isPush && this.sash.withTurningFrame;
										},
										set: function (e) {
											if (this.isPush) {
												var t = this.sash;
												(t.withTurningFrame = e), t.updatePoly(), t.draw(this.view);
												var n = t.siblingSash;
												n && ((n.withTurningFrame = e), n.updatePoly(), n.draw(this.view)),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'truncateFrame', {
										get: function () {
											return !!this.isPush && this.sash.truncateFrame;
										},
										set: function (e) {
											if (this.isPush) {
												var t = this.sash;
												(t.truncateFrame = e), t.updatePoly(), t.draw(this.view);
												var n = t.siblingSash;
												n && ((n.truncateFrame = e), n.updatePoly(), n.draw(this.view)),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'readableHandleOffset', {
										get: function () {
											return this.isPush && this.sashHardware.handle instanceof h.HardwareOnEdge
												? this.round(this.sashHardware.handle.readableOffset)
												: -1;
										},
										set: function (e) {
											this.sashHardware.handle instanceof h.HardwareOnEdge &&
												(this.isSame(this.sashHardware.handle.readableOffset, e) ||
													((this.sashHardware.handle.readableOffset = e),
													this.sashHardware.handle.updatePoly(),
													this.sash.draw(this.view),
													this.broadcastHandleChange(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint()));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleHidden', {
										get: function () {
											return !!this.isPush && this.sashHardware.handle.hidden;
										},
										set: function (e) {
											e !== this.sashHardware.handle.hidden &&
												((this.sashHardware.handle.hidden = e),
												this.sashHardware.handle.updatePoly(),
												this.sashHardware.openDirection === c.OpenDirection.Float &&
													((this.sashHardware.subHandle.hidden = e),
													this.sashHardware.subHandle.updatePoly()),
												this.sash.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'dimToGroundHidden', {
										get: function () {
											return (
												!(this.isPush || this.isFold || this.isSlide) ||
												(this.isSlide
													? !this.slideHardware.hardwares.find(function (e) {
															return !e.hidden && !e.dim.hidden;
													  })
													: (this.isFold ? this.foldHardware.handle : this.sashHardware.handle).dim
															.hidden)
											);
										},
										set: function (e) {
											var t = this;
											if (this.isPush || this.isFold || this.isSlide) {
												if (this.isSlide) {
													this.slideHardware.hardwares.forEach(function (e) {
														return (e.dim.hidden = !0);
													});
													var n = this.slideHardware.hardwares
														.filter(function (e) {
															return !e.hidden;
														})
														.pop();
													return (
														n && !e && (n.dim.hidden = !1),
														this.slideHardware.hardwares.forEach(function (e) {
															e.dim.updatePoly(), e.dim.draw(t.view);
														}),
														this.view.activeLayer.batchDraw(),
														void this.view.mometoManager.checkPoint()
													);
												}
												(this.isFold
													? [this.foldHardware.handle]
													: [this.sashHardware.handle]
												).forEach(function (n) {
													e !== n.dim.hidden &&
														((n.dim.hidden = e), n.dim.updatePoly(), n.dim.draw(t.view));
												}),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'dimToSashHidden', {
										get: function () {
											return (
												!(this.isPush || this.isSlide || this.isFold) ||
												(this.isSlide
													? !this.slideHardware.hardwares.find(function (e) {
															return !e.hidden && !e.dimToSash.hidden;
													  })
													: (this.isPush ? this.sashHardware.handle : this.foldHardware.handle)
															.dimToSash.hidden)
											);
										},
										set: function (e) {
											var t = this;
											if (this.isPush || this.isSlide || this.isFold) {
												var n;
												if (this.isSlide)
													return (
														this.slideHardware.hardwares.forEach(function (e) {
															return (e.dimToSash.hidden = !0);
														}),
														(n = this.slideHardware.hardwares
															.filter(function (e) {
																return !e.hidden;
															})
															.pop()) &&
															!e &&
															(n.dimToSash.hidden = !1),
														this.slideHardware.hardwares.forEach(function (e) {
															e.dimToSash.updatePoly(), e.dimToSash.draw(t.view);
														}),
														this.view.activeLayer.batchDraw(),
														void this.view.mometoManager.checkPoint()
													);
												e !==
													(n = this.isPush ? this.sashHardware.handle : this.foldHardware.handle)
														.dimToSash.hidden &&
													((n.dimToSash.hidden = e),
													n.dimToSash.updatePoly(),
													n.dimToSash.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint());
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'slide', {
										get: function () {
											return this.isPush ? this.sash.slide : c.OpenDirection.None;
										},
										set: function (e) {
											if (this.isPush) {
												var t = this.sash;
												(t.slide = e),
													t.hardwareManager.indicatorForSlide.updatePoly(),
													t.hardwareManager.indicatorForSlide.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isFixed', {
										get: function () {
											return !!this.isSlide && this.sash.isFixed;
										},
										set: function (e) {
											var t = this.sash;
											if (e !== t.isFixed) {
												(t.isFixed = e), t.updateFixedSashToFixedGlass();
												var n = this.sash.parent;
												n.updatePoly(),
													n.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'remainingWidth', {
										get: function () {
											return this.isSlide && this.sash.parent
												? this.sash.parent.remainingWidth
												: -1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'width', {
										get: function () {
											return this.isSlide ? this.sash.fixedWidth : -1;
										},
										set: function (e) {
											var t = this.sash;
											if (t.fixedWidth !== e) {
												t.fixedWidth = e;
												var n = t.parent;
												n.updatePoly(),
													n.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'asFixedWidthSash', {
										get: function () {
											return (
												!!(this.isSlide || this.isDouble || this.isFold) &&
												-1 !== this.sash.fixedWidth
											);
										},
										set: function (e) {
											this.isSlide
												? (this.asFixedWidthSashInSlide = e)
												: this.isDouble
												? (this.asFixedWidthSashInDouble = e)
												: this.isFold && (this.asFixedWidthSashInFold = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'asFixedWidthSashInSlide', {
										set: function (e) {
											if (this.isSlide) {
												var t = this.sash,
													n = t.polygon.box,
													r = t.parent,
													i = r.expandHorizontally ? n.xmax - n.xmin : n.ymax - n.ymin;
												r.setFixedWidthForColumn(e ? i : -1, t.columnIndex),
													r.updatePoly(),
													r.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'asFixedWidthSashInDouble', {
										set: function (e) {
											if (this.isDouble) {
												var t = this.sash,
													n = t.parent,
													r = t.polygon.box;
												(t.fixedWidth = e ? r.xmax - r.xmin : -1),
													e &&
														(n.sashes.find(function (e) {
															return e !== t;
														}).fixedWidth = -1),
													n.updatePoly(),
													n.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'asFixedWidthSashInFold', {
										set: function (e) {
											if (this.isFold) {
												var t = this.sash,
													n = t.parent,
													r = t.polygon.box;
												(t.fixedWidth = e
													? n.expandHorizontally
														? r.xmax - r.xmin
														: r.ymax - r.ymin
													: -1),
													n.updatePoly(),
													n.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'foldLockHidden', {
										get: function () {
											return !!this.isFold && this.manager.lock.hidden;
										},
										set: function (e) {
											var t = this.manager;
											e !== t.lock.hidden &&
												((t.lock.hidden = e),
												t.lock.updatePoly(),
												t.lock.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'slideLockShape', {
										get: function () {
											return this.isSlide ? this.slideHardware.lockShape : h.HardwareShape.Lock;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'slideLockHidden', {
										get: function () {
											return this.isSlide
												? this.slideHardware.locks.filter(function (e) {
														return !e.hidden;
												  }).length
												: 0;
										},
										set: function (e) {
											if (e !== this.slideLockHidden) {
												e > 2 && (e = 2);
												var t,
													n = this.sash,
													r = n.host;
												this.slideHardware.locks.forEach(function (e) {
													return n.remove(e);
												}),
													(n.hardwareManager.locks = []),
													r.appliedOption.items.forEach(function (e, r) {
														e.forEach(function (e, i) {
															e && n.columnIndex === i && n.trackIndex === r && (t = e);
														});
													});
												var i = n.parent.expandHorizontally
													? [l.Direction.Left, l.Direction.Right]
													: [l.Direction.Up, l.Direction.Down];
												1 === e && t && 1 === t.defaultLocks.length && (i = t.defaultLocks);
												for (var o = 0; o < e; o++) {
													var a = h.Handle.lock(this.slideHardware, this.slideLockShape);
													(a.edgeIndex = l.EdgeFinder.Instance.findIndex(i[o], n.polygon)),
														a.updatePoly(),
														a.draw(this.view),
														this.slideHardware.locks.push(a);
												}
												this.view.activeLayer.batchDraw(), this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'crescentLockShown', {
										get: function () {
											return this.isSlide
												? this.slideHardware.lock2s.filter(function (e) {
														return !e.hidden;
												  }).length
												: 0;
										},
										set: function (e) {
											if (e !== this.crescentLockShown) {
												e > 2 && (e = 2);
												var t,
													n = this.sash,
													r = n.host;
												this.slideHardware.lock2s.forEach(function (e) {
													return n.remove(e);
												}),
													(n.hardwareManager.lock2s = []),
													r.appliedOption.items.forEach(function (e, r) {
														e.forEach(function (e, i) {
															e && n.columnIndex === i && n.trackIndex === r && (t = e);
														});
													});
												var i = n.parent.expandHorizontally
													? [l.Direction.Left, l.Direction.Right]
													: [l.Direction.Up, l.Direction.Down];
												1 === e && t && 1 === t.crescentLocks.length && (i = t.crescentLocks);
												for (var o = 0; o < e; o++) {
													var a = h.Handle.lock2(this.slideHardware);
													(a.edgeIndex = l.EdgeFinder.Instance.findIndex(i[o], n.polygon)),
														a.updatePoly(),
														a.draw(this.view),
														this.slideHardware.lock2s.push(a);
												}
												this.view.activeLayer.batchDraw(), this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'locksCount', {
										get: function () {
											if (!this.isSlide) return 0;
											var e = this.slideLockHidden,
												t = this.crescentLockShown;
											return e || t;
										},
										set: function (e) {
											this.isSlide &&
												(this.sash.host.hardwares
													.filter(function (e) {
														return e.hardwareShape === h.HardwareShape.Lock2;
													})
													.some(function (e) {
														return !e.hidden;
													})
													? (this.crescentLockShown = e)
													: (this.slideLockHidden = e));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'slideHandleType', {
										get: function () {
											return this.isSlide
												? this.slideHardware.handleType
												: h.HardwareShape.HandleForSlide;
										},
										set: function (e) {
											if (e !== this.slideHardware.handleForSlide.hardwareShape) {
												this.slideHardware.handleType = e;
												var t = this.sash.host;
												t.updatePoly(),
													t.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'slideHandleHidden', {
										get: function () {
											return !!this.isSlide && this.slideHardware.handleForSlide.hidden;
										},
										set: function (e) {
											e !== this.slideHardware.handleForSlide.hidden &&
												((this.slideHardware.handleForSlide.hidden = e),
												this.slideHardware.handleForSlide.updatePoly(),
												this.sash.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowSlidePullup', {
										get: function () {
											if (this.isSlide && !this.slideHardware.isVertical) return !0;
											if (this.isPush && this.target.isStandalone) {
												var e = this.target.slide;
												if (e === c.OpenDirection.Left || e === c.OpenDirection.Right) return !0;
											}
											return !1;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'slidePullupEnabled', {
										get: function () {
											return !(!this.isSlide || !this.isPush) && this.slideHardware.pullupEnabled;
										},
										set: function (e) {
											(this.manager instanceof c.SlideHardwareManager ||
												this.manager instanceof c.PushSashHardwareManager) &&
												e !== this.manager.pullupEnabled &&
												((this.manager.pullupEnabled = e),
												this.manager.updatePoly(),
												this.manager.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lockCode', {
										get: function () {
											return (this.isSlide && this.sash.attrs.lockCode) || '';
										},
										set: function (e) {
											this.isSlide && (this.sash.attrs.lockCode = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lockName', {
										get: function () {
											return (this.isSlide && this.sash.attrs.lockName) || '';
										},
										set: function (e) {
											this.isSlide && (this.sash.attrs.lockName = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'decorationLock', {
										get: function () {
											return (this.isSlide && this.sash.attrs.decorationLock) || !1;
										},
										set: function (e) {
											this.isSlide && (this.sash.attrs.decorationLock = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleForFoldHidden', {
										get: function () {
											return !!this.isFold && this.foldHardware.handleForFold.hidden;
										},
										set: function (e) {
											this.isFold &&
												((this.foldHardware.handleForFold.hidden = e),
												this.foldHardware.handleForFold.updatePoly(),
												this.sash.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleForFoldOffset', {
										get: function () {
											return this.isFold ? this.round(this.foldHardware.handleForFold.offset) : -1;
										},
										set: function (e) {
											this.isSame(this.foldHardware.handleForFold.offset, e) ||
												((this.foldHardware.handleForFold.offset = e),
												this.foldHardware.handleForFold.updatePoly(),
												this.sash.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shadeHandleType', {
										get: function () {
											var e = this.sash.mulManager.shades.slice().pop();
											return e ? e.handleType : h.ShadeHandleType.None;
										},
										set: function (e) {
											var t = this;
											this.sash.mulManager.shades.forEach(function (n) {
												n.handleType !== e && ((n.handleType = e), n.updatePoly(), n.draw(t.view));
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isDoor', {
										get: function () {
											return !!this.isPush && (this.isFold, this.sash.isDoor);
										},
										set: function (e) {
											if (this.isDoor !== e && this.isPush)
												if (this.isFold) this.sash.isDoor = e;
												else {
													var t = this.sash;
													(t.isDoor = e),
														(t.hardwareManager.handleType = e
															? h.HardwareShape.Handle2
															: h.HardwareShape.Handle),
														(t.hardwareManager.hingeCount = e ? 3 : 0),
														t.updatePoly(),
														t.draw(this.view),
														this.view.refresh(),
														this.view.mometoManager.checkPoint();
												}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'pullingHeight', {
										get: function () {
											if (this.isDouble || this.isFold || this.isSlide) return 0;
											var e = this.sash.topFrame.mulManager.splitter.getPullingHeight(
												this.sash.polyId,
											);
											return e ? e.height : 0;
										},
										set: function (e) {
											if (!(this.isDouble || this.isFold || this.isSlide)) {
												0 === this.pullingHeight && 0 !== e && h.SashUtil.sashToBottom(this.sash);
												var t = this.sash.topFrame;
												t.mulManager.splitter.setPullingHeight(this.sash.polyId, e),
													t.updateFrame(),
													t.draw(this.view),
													this.view.refresh();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowPullingHeightSet', {
										get: function () {
											if (this.isDouble || this.isFold || this.isSlide) return !1;
											var e = this.target.top;
											return (
												e instanceof h.Frame &&
												e.mulManager.splitter.allowPullingHeight(this.sash.polygon)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'withGuard', {
										get: function () {
											if (!this.isSlide) return !1;
											var e = this.sash;
											return e.parent.guardColumns.some(function (t) {
												return t === e.columnIndex;
											});
										},
										set: function (e) {
											if (this.isSlide) {
												var t = this.sash,
													n = t.parent,
													r = n.guardColumns.findIndex(function (e) {
														return e === t.columnIndex;
													});
												e && -1 === r
													? n.guardColumns.push(t.columnIndex)
													: e || -1 === r || n.guardColumns.splice(r, 1),
													n.updatePoly(),
													n.draw(this.view),
													this.view.refresh(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'withTheft', {
										get: function () {
											if (!this.isSlide) return !1;
											var e = this.sash;
											return e.parent.theftColumns.some(function (t) {
												return t === e.columnIndex;
											});
										},
										set: function (e) {
											if (this.isSlide) {
												var t = this.sash,
													n = t.parent,
													r = n.theftColumns.findIndex(function (e) {
														return e === t.columnIndex;
													});
												e && -1 === r
													? n.theftColumns.push(t.columnIndex)
													: e || -1 === r || n.theftColumns.splice(r, 1),
													n.updatePoly(),
													n.draw(this.view),
													this.view.refresh(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sash', {
										get: function () {
											return this.manager.sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sashHardware', {
										get: function () {
											return this.manager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'slideHardware', {
										get: function () {
											return this.manager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'foldHardware', {
										get: function () {
											return this.manager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.round = function (e) {
										return Math.round(e);
									}),
									(e.prototype.isSame = function (e, t) {
										return a.default.Utils.LT(Math.abs(e - t), 0.5);
									}),
									(e.prototype.isSameArray = function (e, t) {
										if (e.length !== t.length) return !1;
										for (var n = !0, r = 0; r < e.length; r++)
											if (!this.isSame(e[r], t[r])) {
												n = !1;
												break;
											}
										return n;
									}),
									(e.prototype.broadcastHandleChange = function () {
										this.view.eventBus.emit({
											type: s.EventType.handle_position_change,
											payload: {
												pid: this.manager.sash.polyId,
												view: this.view,
											},
										});
									}),
									(e.prototype.broadcastTopViewChange = function () {
										this.view.eventBus.emit({
											type: s.EventType.top_view_change,
											payload: {
												view: this.view,
												frame: this.target.topFrame,
											},
										});
									}),
									e
								);
							})();
						t.SashSettings = u;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.KfcSashSettings = void 0);
						var a = o(n(0)),
							s = n(111),
							l = n(1),
							h = (function () {
								function e(e, t) {
									(this.hardware = e), (this.view = t);
								}
								return (
									Object.defineProperty(e.prototype, 'target', {
										get: function () {
											return this.hardware.sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isDouble', {
										get: function () {
											return this.target.parent instanceof l.DoubleKfcSash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'jointWay', {
										get: function () {
											return this.target.jointWay;
										},
										set: function (e) {
											(this.target.jointWay = e),
												this.target.updatePoly(),
												this.target.draw(this.view),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openDirection', {
										get: function () {
											return this.hardware.openDirection;
										},
										set: function (e) {
											this.hardware.openDirection !== e &&
												((this.hardware.openDirection = e),
												(this.hardware.handle.autoOffset = !0),
												this.hardware.updatePoly(),
												this.hardware.draw(this.view),
												this.broadcastTopViewChange(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openToward', {
										get: function () {
											return this.hardware.openToward;
										},
										set: function (e) {
											this.hardware.openToward !== e &&
												((this.hardware.openToward = e),
												this.hardware.indicator.updatePoly(),
												this.target.draw(this.view),
												this.broadcastTopViewChange(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'offvecEnabled', {
										get: function () {
											return this.target.offvecEnabled;
										},
										set: function (e) {
											(this.target.offvecEnabled = e), e || (this.hasOffset = !1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasOffset', {
										get: function () {
											return !this.target.offvec.equalTo(a.default.vector());
										},
										set: function (e) {
											e ||
												(this.target.translate(this.target.offvec.invert()),
												this.target.hideAssist(),
												(this.target.offvec = a.default.vector()),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'opened', {
										get: function () {
											return this.target.opened;
										},
										set: function (e) {
											this.target.opened !== e &&
												((this.target.opened = e),
												this.target.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleTypeList', {
										get: function () {
											return i(l.HardwareShapeCreator.Ins.doorHandles);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleType', {
										get: function () {
											return this.hardware.handleType;
										},
										set: function (e) {
											this.hardware.toggleKfcMullionByType(e),
												(this.hardware.handleType = e),
												this.hardware.sash.updatePoly(),
												this.target.draw(this.view),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleHidden', {
										get: function () {
											return this.hardware.handle.hidden;
										},
										set: function (e) {
											e !== this.hardware.handle.hidden &&
												((this.hardware.handle.hidden = e),
												this.hardware.toggleKfcMullionByHandleHidden(e),
												this.hardware.handle.updatePoly(),
												this.target.draw(this.view),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingeType', {
										get: function () {
											return this.hardware.hingeType;
										},
										set: function (e) {
											(this.hardware.hingeType = e),
												this.hardware.updatePoly(),
												this.target.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingesCount', {
										get: function () {
											return this.hardware.hingeCount;
										},
										set: function (e) {
											(this.hardware.hingeCount = e),
												this.hardware.updatePoly(),
												this.target.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingesHidden', {
										get: function () {
											return 0 === this.hardware.hingeCount;
										},
										set: function (e) {
											(this.hardware.hingeCount = e ? 0 : 2),
												this.hardware.updatePoly(),
												this.target.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'dimToGroundHidden', {
										get: function () {
											return this.hardware.dimToGroundHidden;
										},
										set: function (e) {
											e !== this.hardware.dimToGroundHidden &&
												((this.hardware.dimToGroundHidden = e),
												this.hardware.updatePoly(),
												this.target.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'largeUpDownSize', {
										get: function () {
											return this.target.largeUpDownSize;
										},
										set: function (e) {
											(this.target.largeUpDownSize = e),
												this.target.updatePoly(),
												this.target.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'asFixedWidthSash', {
										get: function () {
											return -1 !== this.target.fixedWidth;
										},
										set: function (e) {
											if (this.isDouble) {
												var t = this.target,
													n = t.parent,
													r = t.polygon.box;
												(t.fixedWidth = e ? r.xmax - r.xmin : -1),
													e &&
														(n.sashes.find(function (e) {
															return e !== t;
														}).fixedWidth = -1),
													n.updatePoly(),
													n.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'pullingHeight', {
										get: function () {
											if (this.isDouble) return 0;
											var e = this.target.topFrame.mulManager.splitter.getPullingHeight(
												this.target.polyId,
											);
											return e ? e.height : 0;
										},
										set: function (e) {
											if (!this.isDouble) {
												0 === this.pullingHeight && 0 !== e && l.SashUtil.sashToBottom(this.target);
												var t = this.target.topFrame;
												t.mulManager.splitter.setPullingHeight(this.target.polyId, e),
													t.updateFrame(),
													t.draw(this.view),
													this.view.refresh();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowPullingHeightSet', {
										get: function () {
											if (this.isDouble) return !1;
											var e = this.target.top;
											return (
												e instanceof l.Frame &&
												e.mulManager.splitter.allowPullingHeight(this.target.polygon)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.broadcastTopViewChange = function () {
										this.view.eventBus.emit({
											type: s.EventType.top_view_change,
											payload: {
												view: this.view,
												frame: this.target.topFrame,
											},
										});
									}),
									e
								);
							})();
						t.KfcSashSettings = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoubleKfcSashSettings = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(1),
							h = (function () {
								function e(e, t) {
									(this.doubleSash = e), (this.view = t);
								}
								return (
									Object.defineProperty(e.prototype, 'target', {
										get: function () {
											return this.doubleSash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'jointWay', {
										get: function () {
											return this.doubleSash.jointWay;
										},
										set: function (e) {
											(this.doubleSash.jointWay = e),
												this.doubleSash.updatePoly(),
												this.doubleSash.draw(this.view),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openToward', {
										get: function () {
											return this.doubleSash.openToward;
										},
										set: function (e) {
											this.doubleSash.openToward !== e &&
												((this.doubleSash.openToward = e),
												this.doubleSash.updatePoly(),
												this.doubleSash.draw(this.view),
												this.broadcastTopViewChange(),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'opened', {
										get: function () {
											return this.target.opened;
										},
										set: function (e) {
											this.target.opened !== e &&
												((this.target.opened = e),
												this.target.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'offvecEnabled', {
										get: function () {
											return this.target.offvecEnabled;
										},
										set: function (e) {
											(this.target.offvecEnabled = e), e || (this.hasOffset = !1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasOffset', {
										get: function () {
											return !this.doubleSash.offvec.equalTo(a.default.vector());
										},
										set: function (e) {
											e ||
												(this.doubleSash.translate(this.doubleSash.offvec.invert()),
												this.doubleSash.hideAssist(),
												(this.doubleSash.offvec = a.default.vector()),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleTypeList', {
										get: function () {
											return i(l.HardwareShapeCreator.Ins.doorHandles);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleType', {
										get: function () {
											return this.target.sashes[0].hardwareManager.handleType;
										},
										set: function (e) {
											var t = this;
											this.target.sashes.forEach(function (n) {
												n.hardwareManager.toggleKfcMullionByType(e),
													(n.hardwareManager.handleType = e),
													n.updatePoly(),
													n.draw(t.view);
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingeType', {
										get: function () {
											return this.target.sashes[0].hardwareManager.hingeType;
										},
										set: function (e) {
											var t = this;
											this.target.sashes.forEach(function (n) {
												(n.hardwareManager.hingeType = e),
													n.hardwareManager.updatePoly(),
													n.draw(t.view);
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingesCount', {
										get: function () {
											return this.target.sashes[0].hardwareManager.hingeCount;
										},
										set: function (e) {
											var t = this;
											this.target.sashes.forEach(function (n) {
												(n.hardwareManager.hingeCount = e),
													n.hardwareManager.updatePoly(),
													n.draw(t.view);
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingesHidden', {
										get: function () {
											return 0 === this.target.sashes[0].hardwareManager.hingeCount;
										},
										set: function (e) {
											var t = this;
											this.target.sashes.forEach(function (n) {
												(n.hardwareManager.hingeCount = e ? 0 : 2),
													n.hardwareManager.updatePoly(),
													n.draw(t.view);
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'largeUpDownSize', {
										get: function () {
											return this.target.sashes[0].largeUpDownSize;
										},
										set: function (e) {
											var t = this;
											this.target.sashes.forEach(function (n) {
												(n.largeUpDownSize = e), n.updatePoly(), n.draw(t.view);
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'pullingHeight', {
										get: function () {
											var e = this.target.topFrame.mulManager.splitter.getPullingHeight(
												this.target.polyId,
											);
											return e ? e.height : 0;
										},
										set: function (e) {
											0 === this.pullingHeight && 0 !== e && l.SashUtil.sashToBottom(this.target);
											var t = this.target.topFrame;
											t.mulManager.splitter.setPullingHeight(this.target.polyId, e),
												t.updateFrame(),
												t.draw(this.view),
												this.view.refresh();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowPullingHeightSet', {
										get: function () {
											var e = this.target.top;
											return (
												e instanceof l.Frame &&
												e.mulManager.splitter.allowPullingHeight(this.target.polygon)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.broadcastTopViewChange = function () {
										this.view.eventBus.emit({
											type: s.EventType.top_view_change,
											payload: {
												view: this.view,
												frame: this.doubleSash.topFrame,
											},
										});
									}),
									e
								);
							})();
						t.DoubleKfcSashSettings = h;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__read) ||
								function (e, t) {
									var n = 'function' == typeof Symbol && e[Symbol.iterator];
									if (!n) return e;
									var r,
										i,
										o = n.call(e),
										a = [];
									try {
										for (; (void 0 === t || t-- > 0) && !(r = o.next()).done; ) a.push(r.value);
									} catch (e) {
										i = {
											error: e,
										};
									} finally {
										try {
											r && !r.done && (n = o.return) && n.call(o);
										} finally {
											if (i) throw i.error;
										}
									}
									return a;
								},
							i =
								(this && this.__spread) ||
								function () {
									for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(r(arguments[t]));
									return e;
								},
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoubleSashSettings = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(1),
							h = (function () {
								function e(e, t) {
									(this.doubleSash = e), (this.view = t);
								}
								return (
									Object.defineProperty(e.prototype, 'target', {
										get: function () {
											return this.doubleSash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'jointWay', {
										get: function () {
											return this.doubleSash.jointWay;
										},
										set: function (e) {
											(this.doubleSash.jointWay = e),
												this.doubleSash.updatePoly(),
												this.doubleSash.draw(this.view),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'opened', {
										get: function () {
											return this.target.opened;
										},
										set: function (e) {
											this.target.opened !== e &&
												((this.target.opened = e),
												this.target.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openToward', {
										get: function () {
											return this.doubleSash.openToward;
										},
										set: function (e) {
											this.doubleSash.openToward !== e &&
												((this.doubleSash.openToward = e),
												this.view.eventBus.emit({
													type: s.EventType.turning_detect,
													payload: {
														frame: this.doubleSash.topFrame,
													},
												}),
												this.doubleSash.updatePoly(),
												this.doubleSash.draw(this.view),
												this.view.eventBus.emit({
													type: s.EventType.top_view_change,
													payload: {
														view: this.view,
														frame: this.doubleSash.topFrame,
													},
												}),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'rotate', {
										get: function () {
											return this.doubleSash.rotate;
										},
										set: function (e) {
											var t = this;
											(this.doubleSash.rotate = e),
												this.doubleSash.sashes.forEach(function (e, n) {
													e.hardwareManager.openDirection = t.doubleSash.calOpenDirection(n);
												}),
												this.doubleSash.updatePoly(),
												this.doubleSash.draw(this.view),
												this.view.eventBus.emit({
													type: s.EventType.top_view_change,
													payload: {
														view: this.view,
														frame: this.doubleSash.topFrame,
													},
												}),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'pivotAtSide', {
										get: function () {
											return this.doubleSash.sashes[0].hardwareManager.pivotAtSide;
										},
										set: function (e) {
											this.doubleSash.sashes.forEach(function (t) {
												t.hardwareManager.pivotAtSide = e;
											}),
												this.doubleSash.updatePoly(),
												this.doubleSash.draw(this.view),
												this.view.eventBus.emit({
													type: s.EventType.top_view_change,
													payload: {
														view: this.view,
														frame: this.doubleSash.topFrame,
													},
												}),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowPivotAtSideSet', {
										get: function () {
											return this.rotate;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingeCount', {
										get: function () {
											return this.doubleSash.sashes[0].hardwareManager.hingeCount;
										},
										set: function (e) {
											var t = this;
											this.hingeCount !== e &&
												(this.doubleSash.sashes.forEach(function (n) {
													var r = n.hardwareManager;
													(r.hingeCount = e),
														r.hinges.forEach(function (e) {
															(e.autoOffset = !0), e.updatePoly();
														}),
														n.draw(t.view);
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleTypeList', {
										get: function () {
											return i(
												l.HardwareShapeCreator.Ins.windowHandles,
												l.HardwareShapeCreator.Ins.doorHandles,
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleType', {
										get: function () {
											return this.target.sashes[0].hardwareManager.handleType;
										},
										set: function (e) {
											var t = this;
											this.target.sashes.forEach(function (n) {
												(n.hardwareManager.handleType = e), n.updatePoly(), n.draw(t.view);
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hingeType', {
										get: function () {
											return this.doubleSash.sashes[0].hardwareManager.hingeType;
										},
										set: function (e) {
											var t = this;
											this.hingeType !== e &&
												(this.doubleSash.sashes.forEach(function (n) {
													var r = n.hardwareManager;
													(r.hingeType = e),
														r.hinges.forEach(function (e) {
															e.updatePoly(), e.draw(t.view);
														});
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'offvecEnabled', {
										get: function () {
											return this.doubleSash.offvecEnabled;
										},
										set: function (e) {
											(this.doubleSash.offvecEnabled = e), e || (this.hasOffset = !1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasOffset', {
										get: function () {
											return !this.doubleSash.offvec.equalTo(a.default.vector());
										},
										set: function (e) {
											e ||
												(this.doubleSash.translate(this.doubleSash.offvec.invert()),
												this.doubleSash.hideAssist(),
												(this.doubleSash.offvec = a.default.vector()),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isDoor', {
										get: function () {
											return this.doubleSash.isDoor;
										},
										set: function (e) {
											var t = this;
											(this.doubleSash.isDoor = e),
												this.doubleSash.sashes.forEach(function (n, r) {
													(n.isDoor = e),
														(n.hardwareManager.handleType = e
															? l.HardwareShape.Handle2
															: l.HardwareShape.Handle),
														(n.hardwareManager.handle.hidden = !!e && 0 === r),
														(n.hardwareManager.hingeCount = e ? 3 : 0),
														n.updatePoly(),
														n.draw(t.view);
												}),
												this.view.refresh(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'withTurningFrame', {
										get: function () {
											return this.doubleSash.withTurningFrame;
										},
										set: function (e) {
											(this.doubleSash.withTurningFrame = e),
												this.doubleSash.updatePoly(),
												this.doubleSash.draw(this.view);
											var t = this.doubleSash.siblingSash;
											t && ((t.withTurningFrame = e), t.updatePoly(), t.draw(this.view)),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'truncateFrame', {
										get: function () {
											return this.doubleSash.truncateFrame;
										},
										set: function (e) {
											var t = this.doubleSash;
											(t.truncateFrame = e), t.updatePoly(), t.draw(this.view);
											var n = t.siblingSash;
											n && ((n.truncateFrame = e), n.updatePoly(), n.draw(this.view)),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'pullingHeight', {
										get: function () {
											var e = this.doubleSash.topFrame.mulManager.splitter.getPullingHeight(
												this.doubleSash.polyId,
											);
											return e ? e.height : 0;
										},
										set: function (e) {
											0 === this.pullingHeight &&
												0 !== e &&
												l.SashUtil.sashToBottom(this.doubleSash);
											var t = this.doubleSash.topFrame;
											t.mulManager.splitter.setPullingHeight(this.doubleSash.polyId, e),
												t.updateFrame(),
												t.draw(this.view),
												this.view.refresh();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowPullingHeightSet', {
										get: function () {
											var e = this.target.top;
											return (
												e instanceof l.Frame &&
												e.mulManager.splitter.allowPullingHeight(this.doubleSash.polygon)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.DoubleSashSettings = h;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.WallSettings = void 0);
						var r = (function () {
							function e(e, t) {
								(this.wall = e), (this.view = t);
							}
							return (
								Object.defineProperty(e.prototype, 'target', {
									get: function () {
										return this.wall;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'dimHidden', {
									get: function () {
										return this.target.dimForHeight.hidden;
									},
									set: function (e) {
										this.target.dimForHeight.hidden !== e &&
											((this.target.dimForHeight.hidden = e),
											this.target.dimForHeight.updatePoly(),
											this.target.dimForHeight.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'dimPosition', {
									get: function () {
										return this.target.dimForHeight.position;
									},
									set: function (e) {
										this.target.dimForHeight.position !== e &&
											((this.target.dimForHeight.position = e),
											this.target.dimForHeight.updatePoly(),
											this.target.dimForHeight.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'dimForWidthHidden', {
									get: function () {
										return this.target.dimForWidth.hidden;
									},
									set: function (e) {
										this.target.dimForWidth.hidden !== e &&
											((this.target.dimForWidth.hidden = e),
											this.target.dimForWidth.updatePoly(),
											this.target.dimForWidth.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.WallSettings = r;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FoldSashSettings = void 0);
						var i = r(n(0)),
							o = n(1),
							a = n(6),
							s = (function () {
								function e(e, t) {
									(this.fold = e), (this.view = t);
								}
								return (
									Object.defineProperty(e.prototype, 'target', {
										get: function () {
											return this.fold;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'jointWay', {
										get: function () {
											return this.fold.jointWay;
										},
										set: function (e) {
											(this.fold.jointWay = e),
												this.fold.updatePoly(),
												this.fold.draw(this.view),
												o.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'horizontally', {
										get: function () {
											return this.fold.expandHorizontally;
										},
										set: function (e) {
											this.fold.expandHorizontally !== e &&
												((this.fold.expandHorizontally = e),
												this.fold.updatePoly(),
												this.fold.draw(this.view),
												o.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openToward', {
										get: function () {
											return this.fold.openToward;
										},
										set: function (e) {
											this.fold.openToward !== e &&
												((this.fold.openToward = e),
												this.fold.updatePoly(),
												this.fold.draw(this.view),
												this.broadcastTopViewChange(),
												o.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'foldWay', {
										get: function () {
											return this.fold.leftCount + '+' + this.fold.rightCount;
										},
										set: function (e) {
											var t = this,
												n = e.split('+');
											if (2 === n.length) {
												var r = Number(n[0]),
													i = Number(n[1]);
												if (!(r < 0 || i < 0)) {
													var a = !1;
													this.fold.leftCount !== r &&
														((this.fold.leftCount = r),
														this.fold.sashes.forEach(function (e, n) {
															n < t.fold.leftCount && (e.fixedWidth = -1);
														}),
														(a = !0)),
														this.fold.rightCount !== i &&
															((this.fold.rightCount = i),
															this.fold.sashes.forEach(function (e, n) {
																n >= t.fold.leftCount && (e.fixedWidth = -1);
															}),
															(a = !0)),
														a &&
															(this.fold.updatePoly(),
															this.fold.draw(this.view),
															this.broadcastTopViewChange(),
															o.Glass.calcSerial(this.view.shapeManager.shapem),
															this.view.activeLayer.batchDraw(),
															this.view.mometoManager.checkPoint());
												}
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'offvecEnabled', {
										get: function () {
											return this.fold.offvecEnabled;
										},
										set: function (e) {
											(this.fold.offvecEnabled = e), e || (this.hasOffset = !1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasOffset', {
										get: function () {
											return !this.fold.offvec.equalTo(i.default.vector());
										},
										set: function (e) {
											e ||
												(this.fold.translate(this.fold.offvec.invert()),
												this.fold.hideAssist(),
												(this.fold.offvec = i.default.vector()),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isDoor', {
										get: function () {
											return this.fold.isDoor;
										},
										set: function (e) {
											e !== this.fold.isDoor &&
												((this.fold.isDoor = e),
												(this.fold.foldWayChanged = !0),
												this.fold.updatePoly(),
												this.fold.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sideSlide', {
										get: function () {
											return this.fold.sideSlide;
										},
										set: function (e) {
											this.fold.sideSlide = e;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.broadcastTopViewChange = function () {
										this.view.eventBus.emit({
											type: a.EventType.top_view_change,
											payload: {
												view: this.view,
												frame: this.target.topFrame,
											},
										});
									}),
									e
								);
							})();
						t.FoldSashSettings = s;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SashBarSettings = void 0);
						var i = r(n(0)),
							o = n(6),
							a = n(1),
							s = n(13),
							l = (function () {
								function e(e, t, n) {
									(this.manager = e), (this.frameBarIndex = t), (this.view = n);
								}
								return (
									Object.defineProperty(e.prototype, 'isKfcSash', {
										get: function () {
											return this.manager.sash instanceof a.KfcSash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isSlide', {
										get: function () {
											return this.manager instanceof s.SlideHardwareManager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isArc', {
										get: function () {
											return (
												this.manager.sash.polygon.edge(this.frameBarIndex) instanceof i.default.Arc
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isHingeEdge', {
										get: function () {
											return (
												!this.isSlide &&
												!this.isKfcSash &&
												this.sashHardware.hingeEdgeIndex === this.frameBarIndex
											);
										},
										set: function (e) {
											var t = this;
											this.sashHardware.hingeEdgeIndex !== this.frameBarIndex &&
												e &&
												(this.sashHardware.hinges.forEach(function (e) {
													(e.edgeIndex = t.frameBarIndex), e.updatePoly();
												}),
												this.sashHardware.handle.updatePoly(),
												this.sashHardware.indicator.updatePoly(),
												this.sash.draw(this.view),
												this.broadcastTopViewChange(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isHandleEdge', {
										get: function () {
											return (
												!this.isSlide &&
												!this.isKfcSash &&
												this.sashHardware.handle instanceof a.HardwareOnEdge &&
												this.sashHardware.handle.edgeIndex === this.frameBarIndex
											);
										},
										set: function (e) {
											this.sashHardware.handle instanceof a.HardwareOnEdge &&
												this.sashHardware.handle.edgeIndex !== this.frameBarIndex &&
												e &&
												((this.sashHardware.handle.edgeIndex = this.frameBarIndex),
												this.sashHardware.handle.updatePoly(),
												this.sashHardware.indicator.updatePoly(),
												this.sash.draw(this.view),
												this.broadcastTopViewChange(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sash', {
										get: function () {
											return this.manager.sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'sashHardware', {
										get: function () {
											return this.manager;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.broadcastTopViewChange = function () {
										this.view.eventBus.emit({
											type: o.EventType.top_view_change,
											payload: {
												view: this.view,
												frame: this.manager.sash.topFrame,
											},
										});
									}),
									Object.defineProperty(e.prototype, 'edgeWidth', {
										get: function () {
											return this.sash.frameManager._edgeWidth[this.frameBarIndex];
										},
										set: function (e) {
											var t = this.sash;
											this.edgeWidth !== e &&
												t.frameManager.setEdgeWidth(this.frameBarIndex, e, this.view, !0);
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.SashBarSettings = l;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.AntiTheftSettings = void 0);
						var i = r(n(0)),
							o = (function () {
								function e(e, t) {
									(this.antitheft = e), (this.view = t);
								}
								return (
									Object.defineProperty(e.prototype, 'target', {
										get: function () {
											return this.antitheft;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'gap', {
										get: function () {
											return this.antitheft.shutManager.gap;
										},
										set: function (e) {
											i.default.Utils.LT(Math.abs(this.gap - e), 0.5) ||
												e < this.antitheft.mullionProfileSize ||
												((this.antitheft.shutManager.gap = e),
												this.antitheft.shutManager.updatePoly(),
												this.antitheft.shutManager.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleW', {
										get: function () {
											return this.antitheft.shutManager.handleW;
										},
										set: function (e) {
											i.default.Utils.LT(Math.abs(this.handleW - e), 0.5) ||
												e < this.antitheft.mullionProfileSize ||
												((this.antitheft.shutManager.handleW = e),
												this.antitheft.shutManager.updatePoly(),
												this.antitheft.shutManager.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'offvecEnabled', {
										get: function () {
											return this.antitheft.offvecEnabled;
										},
										set: function (e) {
											(this.antitheft.offvecEnabled = e), e || (this.hasOffset = !1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasOffset', {
										get: function () {
											return !this.antitheft.offvec.equalTo(i.default.vector());
										},
										set: function (e) {
											e ||
												(this.antitheft.translate(this.antitheft.offvec.invert()),
												(this.antitheft.offvec = i.default.vector()),
												this.antitheft.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'orientation', {
										get: function () {
											return this.antitheft.shutManager.orientation;
										},
										set: function (e) {
											(this.antitheft.shutManager.orientation = e),
												this.antitheft.shutManager.updatePoly(),
												this.antitheft.shutManager.draw(this.view),
												this.antitheft.indicator.updatePoly(),
												this.antitheft.indicator.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hMulsCount', {
										get: function () {
											return this.antitheft.shutManager.hMulsCount;
										},
										set: function (e) {
											(this.antitheft.shutManager.hMulsCount = e),
												this.antitheft.shutManager.updatePoly(),
												this.antitheft.shutManager.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'showHandleBars', {
										get: function () {
											return this.antitheft.showHandleBars;
										},
										set: function (e) {
											this.showHandleBars !== e &&
												((this.antitheft.showHandleBars = e),
												this.antitheft.shutManager.updatePoly(),
												this.antitheft.shutManager.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'holeHeight', {
										get: function () {
											return this.antitheft.holeHeight;
										},
										set: function (e) {
											this.holeHeight !== e &&
												((this.antitheft.holeHeight = e),
												this.antitheft.shutManager.updatePoly(),
												this.antitheft.shutManager.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'openable', {
										get: function () {
											return this.antitheft.openable;
										},
										set: function (e) {
											this.openable !== e &&
												((this.antitheft.openable = e),
												this.antitheft.updatePoly(),
												this.antitheft.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.AntiTheftSettings = o;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SashGroupSettings = void 0);
						var r = (function () {
							function e(e, t, n) {
								(this._settings = e), (this._activeIndex = t), (this.view = n);
							}
							return (
								Object.defineProperty(e.prototype, 'settings', {
									get: function () {
										return this._settings;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'activeIndex', {
									get: function () {
										return this._activeIndex;
									},
									set: function (e) {
										(this._activeIndex = e),
											this._settings.forEach(function (e) {
												return e.target.highlight(!1);
											}),
											this._settings[e].target.highlight(!0),
											this.view.activeLayer.batchDraw();
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.SashGroupSettings = r;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.LockType = t.SlideSettings = void 0);
						var i,
							o = r(n(0)),
							a = n(6),
							s = n(13),
							l = n(1),
							h = (function () {
								function e(e, t) {
									(this.slide = e), (this.view = t);
								}
								return (
									Object.defineProperty(e.prototype, 'target', {
										get: function () {
											return this.slide;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'jointWay', {
										get: function () {
											return this.slide.jointWay;
										},
										set: function (e) {
											(this.slide.jointWay = e),
												this.slide.updatePoly(),
												this.slide.draw(this.view),
												l.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'appliedOptionIndex', {
										get: function () {
											return this.slide.appliedOptionIndex;
										},
										set: function (e) {
											e !== this.slide.appliedOptionIndex &&
												((this.slide.appliedOptionIndex = e),
												(this.slide.asPtDoor = !1),
												(this.slide.emptyAreaSize = -1),
												this.slide.updatePoly(),
												this.slide.draw(this.view),
												this.view.eventBus.emit({
													type: a.EventType.structure_changed,
													payload: void 0,
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'emptyTrackAppended', {
										get: function () {
											return this.slide.emptyTrackAppended;
										},
										set: function (e) {
											(this.slide.emptyTrackAppended = e), this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lockHidden', {
										get: function () {
											return !this.slide.hardwares
												.filter(function (e) {
													return (
														e.hardwareShape === l.HardwareShape.Lock ||
														e.hardwareShape === l.HardwareShape.Lock3
													);
												})
												.some(function (e) {
													return !e.hidden;
												});
										},
										set: function (e) {
											var t = this;
											this.slide.hardwares
												.filter(function (e) {
													return (
														e.hardwareShape === l.HardwareShape.Lock ||
														e.hardwareShape === l.HardwareShape.Lock3
													);
												})
												.forEach(function (n) {
													(n.hidden = e), n.updatePoly(), n.draw(t.view);
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'crescentLockHidden', {
										get: function () {
											return !this.slide.hardwares
												.filter(function (e) {
													return e.hardwareShape === l.HardwareShape.Lock2;
												})
												.some(function (e) {
													return !e.hidden;
												});
										},
										set: function (e) {
											var t = this;
											this.slide.hardwares
												.filter(function (e) {
													return e.hardwareShape === l.HardwareShape.Lock2;
												})
												.forEach(function (n) {
													(n.hidden = e), n.updatePoly(), n.draw(t.view);
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleType', {
										get: function () {
											return this.slide.sashes[0].hardwareManager.handleType;
										},
										set: function (e) {
											this.slide.sashes.forEach(function (t) {
												t.hardwareManager.handleType = e;
											}),
												this.slide.updatePoly(),
												this.slide.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'handleHidden', {
										get: function () {
											return this.slide.sashes[0].hardwareManager.handleForSlide.hidden;
										},
										set: function (e) {
											this.slide.sashes.forEach(function (t) {
												t.hardwareManager.handleForSlide.hidden = e;
											}),
												this.slide.updatePoly(),
												this.slide.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'pullupEnabled', {
										get: function () {
											return this.slide.sashes[0].hardwareManager.pullupEnabled;
										},
										set: function (e) {
											var t = this;
											e !== this.slide.pullupEnabled &&
												((this.slide.pullupEnabled = e),
												this.slide.sashes.forEach(function (e) {
													if (!e.hardwareManager.isVertical) {
														var n = e.hardwareManager.indicatorForSlide;
														n.updatePoly(), n.draw(t.view);
													}
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'offvecEnabled', {
										get: function () {
											return this.slide.offvecEnabled;
										},
										set: function (e) {
											(this.slide.offvecEnabled = e), e || (this.hasOffset = !1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasOffset', {
										get: function () {
											return !this.slide.offvec.equalTo(o.default.vector());
										},
										set: function (e) {
											e ||
												(this.slide.translate(this.slide.offvec.invert()),
												this.slide.hideAssist(),
												(this.slide.offvec = o.default.vector()),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isDoor', {
										get: function () {
											return this.slide.isDoor;
										},
										set: function (e) {
											(this.slide.isDoor = e), this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'asPtDoor', {
										get: function () {
											return this.target.asPtDoor;
										},
										set: function (e) {
											var t = this;
											(this.target.asPtDoor = e),
												this.target.sashes.forEach(function (e) {
													(e.hardwareManager.openDirection =
														e.columnIndex < 2 ? s.OpenDirection.Left : s.OpenDirection.Right),
														e.hardwareManager.locks.forEach(function (e) {
															return (e.edgeIndex = -1);
														}),
														e.updatePoly(),
														e.draw(t.view);
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'emptyAreaSize', {
										get: function () {
											return this.target.emptyAreaSize;
										},
										set: function (e) {
											(this.target.emptyAreaSize = e),
												this.target.updatePoly(),
												this.target.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasEmptyArea', {
										get: function () {
											return this.target.emptyAreas.length > 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'defaultLockType', {
										get: function () {
											return !this.lockHidden && (this.crescentLockHidden, !0);
										},
										set: function (e) {
											this.defaultLockType !== e &&
												(e
													? ((this.lockHidden = !1), (this.crescentLockHidden = !0))
													: ((this.lockHidden = !0), (this.crescentLockHidden = !1)));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lockType', {
										get: function () {
											return this.lockHidden
												? this.crescentLockHidden
													? void 0
													: i.Crescent
												: i.Default;
										},
										set: function (e) {
											(this.lockHidden = !0),
												(this.crescentLockHidden = !0),
												e === i.Default
													? (this.lockHidden = !1)
													: e === i.Crescent && (this.crescentLockHidden = !1);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lockShape', {
										get: function () {
											if (this.lockHidden) return l.HardwareShape.Lock;
											var e = this.slide.hardwares.filter(function (e) {
												return (
													e.hardwareShape === l.HardwareShape.Lock ||
													e.hardwareShape === l.HardwareShape.Lock3
												);
											});
											return 0 === e.length ? l.HardwareShape.Lock : e[0].hardwareShape;
										},
										set: function (e) {
											var t = this;
											this.slide.hardwares
												.filter(function (e) {
													return (
														e.hardwareShape === l.HardwareShape.Lock ||
														e.hardwareShape === l.HardwareShape.Lock3
													);
												})
												.forEach(function (n) {
													(n.hardwareShape = e), n.updatePoly(), n.draw(t.view);
												}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lockCode', {
										get: function () {
											return this.target.sashes[0].attrs.lockCode || '';
										},
										set: function (e) {
											this.target.sashes.forEach(function (t) {
												t.attrs.lockCode = e;
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'lockName', {
										get: function () {
											return this.target.sashes[0].attrs.lockName || '';
										},
										set: function (e) {
											this.target.sashes.forEach(function (t) {
												t.attrs.lockName = e;
											}),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'truncateFrame', {
										get: function () {
											return this.slide.truncateFrame;
										},
										set: function (e) {
											var t = this.slide;
											(t.truncateFrame = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'locksSameHeight', {
										get: function () {
											return this.slide.locksSameHeight;
										},
										set: function (e) {
											this.locksSameHeight !== e && (this.slide.locksSameHeight = e);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'pullingHeight', {
										get: function () {
											var e = this.slide.topFrame.mulManager.splitter.getPullingHeight(
												this.slide.polyId,
											);
											return e ? e.height : 0;
										},
										set: function (e) {
											0 === this.pullingHeight && 0 !== e && l.SashUtil.sashToBottom(this.slide);
											var t = this.slide.topFrame;
											t.mulManager.splitter.setPullingHeight(this.slide.polyId, e),
												t.updateFrame(),
												t.draw(this.view),
												this.view.refresh();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowPullingHeightSet', {
										get: function () {
											var e = this.slide.top;
											return (
												e instanceof l.Frame &&
												e.mulManager.splitter.allowPullingHeight(this.slide.polygon)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						(t.SlideSettings = h),
							(function (e) {
								(e.Default = 'Default'), (e.Crescent = 'Crescent');
							})((i = t.LockType || (t.LockType = {})));
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.RegularFrameSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								(t.prototype.poly = function () {
									return this.frame.polygon;
								}),
								Object.defineProperty(t.prototype, 'edgesCount', {
									get: function () {
										return this.poly().edgeCount;
									},
									set: function (e) {
										if (!((e = Math.round(e)) < 3) && this.poly().edgeCount !== e) {
											var t = this.poly().changeEdgesCount(e);
											this.frame.frameManager.recreated(t, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).FrameSettings);
						t.RegularFrameSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FrameBarDim = void 0);
						var i = r(n(0)),
							o = n(2),
							a = n(1),
							s = (function () {
								function e(e, t) {
									(this.bar = e), (this.view = t);
								}
								return (
									Object.defineProperty(e.prototype, 'target', {
										get: function () {
											return this.bar;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isArc', {
										get: function () {
											var e = this.bar.polygon.polyId.idx,
												t = this.bar.parent;
											return !!t && t.polygon.edge(e) instanceof i.default.Arc;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'isThreedArcFrame', {
										get: function () {
											return !!this.bar.parent && this.bar.topFrame instanceof a.ThreedArcFrame;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'dimShow', {
										get: function () {
											var e = this.dimInfo();
											return !!e && e.dimShow;
										},
										set: function (e) {
											var t = this.dimInfo();
											if (t) {
												t.dimShow = e;
												var n = this.bar.parent.dim;
												n.updatePoly(),
													n.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'chordDimShow', {
										get: function () {
											var e = this.dimInfo(!0);
											return !!e && e.dimShow;
										},
										set: function (e) {
											var t = this.dimInfo(!0),
												n = this.bar.parent;
											if (!t) {
												if (!n) return;
												var r = n.dim.diMgr;
												(t = new a.ChordDimInfo(this.bar.polygon.polyId.idx)), r.add(t);
											}
											t.dimShow = e;
											var i = n.dim;
											i.updatePoly(),
												i.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.makeChordBar = function () {
										if (this.bar.polygon.mulShape instanceof i.default.Arc) {
											var e = this.bar.topFrame,
												t = this.bar.polygon.edges
													.filter(function (e) {
														return e instanceof i.default.Arc;
													})
													.sort(function (e, t) {
														return e.r.valueOf() - t.r.valueOf();
													})[0],
												n = i.default.segment(t.start, t.end),
												r = i.default.vector(t.middle(), n.middle()).normalize(),
												o = n.translate(r.multiply(e.profileSizeManager.frameMullion / 2));
											e.mulManager.addMullion(i.default.line(o.start, o.end)),
												e.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint();
										}
									}),
									(e.prototype.dimInfo = function (e) {
										void 0 === e && (e = !1);
										var t = this.bar.polygon.polyId.idx,
											n = this.bar.parent;
										if (n) {
											var r = n.dim.diMgr;
											return e ? r.findChordDim(t) : r.findFrameDim(t);
										}
									}),
									Object.defineProperty(e.prototype, 'virtual', {
										get: function () {
											return this.bar.virtual;
										},
										set: function (e) {
											var t = this;
											if (this.virtual !== e)
												if (e) {
													var n = this.bar.topFrame;
													(this.tmpFrame = n),
														(this.bar.virtual = e),
														n.frameManager.setVirtual(this.bar.polyId, !0),
														(this.tmpFrameBarPolyId = this.bar.polyId);
													var r = n.mulManager.splitter.pullingHeightSubs.find(function (e) {
														return o.Utils.polyCoincide(t.bar.polygon, e);
													});
													r && n.mulManager.splitter.setPullingHeight(r.polyId, 0),
														this.setSideBarToVJoint(n),
														n.updateFrame(),
														n.draw(this.view),
														this.view.activeLayer.batchDraw(),
														this.view.mometoManager.checkPoint();
												} else
													this.tmpFrame &&
														this.tmpFrameBarPolyId &&
														(this.tmpFrame.frameManager.setVirtual(this.tmpFrameBarPolyId, !1),
														this.tmpFrame.updateFrame(),
														this.tmpFrame.draw(this.view),
														this.view.activeLayer.batchDraw(),
														this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowVirtualSet', {
										get: function () {
											var e = this;
											if (!this.bar.parent) return !1;
											var t = this.bar.topFrame,
												n = t.polygon;
											return (
												!(
													n instanceof a.KfcPolygon ||
													n instanceof a.Kfc2Polygon ||
													n instanceof a.Kfc3Polygon ||
													n instanceof a.Kfc4Polygon ||
													n instanceof a.HalfKfcPolygon ||
													n instanceof a.HalfKfc2Polygon
												) &&
												t.polygon.bottomEdgeIndexes.some(function (t) {
													return t === e.bar.polyId.idx;
												})
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'edgeWidth', {
										get: function () {
											if (void 0 === this.bar || void 0 === this.bar.parent) return 0;
											var e = this.bar.parent,
												t = this.bar.polygon.polyId.idx;
											return e.frameManager._edgeWidth[t];
										},
										set: function (e) {
											var t = this.bar.parent;
											if (void 0 !== t) {
												var n = this.bar.polygon.polyId.idx;
												if (this.edgeWidth !== e) {
													if ((t.frameManager.setEdgeWidth(n, e, this.view), t instanceof a.Sash)) {
														var r = t;
														r.hardwareManager.updatePoly(),
															r.draw(this.view),
															this.view.activeLayer.batchDraw();
													}
													this.bar = t.frameManager.allBars[n];
												}
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'hasEqualSplit', {
										get: function () {
											var e = this.bar.parent;
											return (
												e instanceof a.Frame &&
												e.mulManager.splitter.lines.some(function (e) {
													return e.equalSplit !== o.EqualSplitType.None;
												})
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'ignoreEqualSplit', {
										get: function () {
											var e = this,
												t = this.bar.parent;
											return (
												t instanceof a.Frame &&
												t.ignoreEqualSplit.some(function (t) {
													return t.equalTo(e.bar.polyId);
												})
											);
										},
										set: function (e) {
											var t = this,
												n = this.bar.parent,
												r = n.ignoreEqualSplit.findIndex(function (e) {
													return e.equalTo(t.bar.polyId);
												});
											e
												? -1 === r && n.ignoreEqualSplit.push(this.bar.polyId)
												: -1 !== r && n.ignoreEqualSplit.splice(r, 1),
												n.mulManager.refresh(this.view),
												a.Glass.calcSerial(this.view.shapeManager.shapem),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'asSideTrack', {
										get: function () {
											var e = this.bar.parent;
											if (!e) return !1;
											var t = e.frameManager.asSideTracks[this.bar.polyId.idx];
											return void 0 !== t && t;
										},
										set: function (e) {
											(this.bar.parent.frameManager.asSideTracks[this.bar.polyId.idx] = e),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'enableAsSideTrack', {
										get: function () {
											var e = this.bar.parent;
											if (!e) return !1;
											var t = 0 === e.sashManager.slides.length,
												n = this.bar.polygon.mulShape;
											return (
												t &&
												e.polygon.isRectangle() &&
												n instanceof i.default.Segment &&
												o.Utils.isSegVertical(n)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.setSideBarToVJoint = function (e) {
										var t = this;
										e.frameManager.bars
											.filter(function (e) {
												var n = e.polygon.mulShape;
												return (
													e !== t.bar && n instanceof i.default.Segment && o.Utils.isSegVertical(n)
												);
											})
											.forEach(function (n) {
												var r = t.diagonalJointPosition(n.polygon, t.bar.polygon),
													i = e.frameManager.ejw,
													a = e.polygon.edges.length;
												r.start && (i[n.polyId.idx] = o.EdgeJointWay.Vertical),
													r.end && (i[(n.polyId.idx + 1 + a) % a] = o.EdgeJointWay.Vertical);
											}),
											e.mulManager.bars
												.filter(function (e) {
													var t = e.polygon.mulShape;
													return t instanceof i.default.Segment && o.Utils.isSegVertical(t);
												})
												.forEach(function (n) {
													var r = t.diagonalJointPosition(n.polygon, t.bar.polygon),
														i = e.mulManager.splitter.lines[n.polyId.idx];
													r.start && (i.start.split = o.EndpointSplitWay.Through),
														r.end && (i.end.split = o.EndpointSplitWay.Through);
												});
									}),
									(e.prototype.diagonalJointPosition = function (e, t) {
										var n = [t.stIdx, t.etIdx].map(function (e) {
												return t.edge(e);
											}),
											r = e.edge(e.stIdx),
											a = n.some(function (e) {
												return (
													e instanceof i.default.Segment &&
													r instanceof i.default.Segment &&
													o.Utils.segCoincide(e, r)
												);
											}),
											s = e.edge(e.etIdx);
										return {
											start: a,
											end: n.some(function (e) {
												return (
													e instanceof i.default.Segment &&
													s instanceof i.default.Segment &&
													o.Utils.segCoincide(e, s)
												);
											}),
										};
									}),
									e
								);
							})();
						t.FrameBarDim = s;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.BeadSettings = void 0);
						var r = (function () {
							function e(e, t) {
								(this.bead = e), (this.view = t);
							}
							return (
								Object.defineProperty(e.prototype, 'jointWay', {
									get: function () {
										return this.bead.frameManager.getJointWay(0);
									},
									set: function (e) {
										var t = this;
										this.bead.polygon.edges.forEach(function (n, r) {
											t.bead.frameManager.ejw[r] = e;
										}),
											this.bead.frameManager.recreated(this.bead.polygon, this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.BeadSettings = r;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CoupleSettings = void 0);
						var r = (function () {
							function e(e, t) {
								(this.couple = e), (this.view = t);
							}
							return (
								Object.defineProperty(e.prototype, 'sizeDimHidden', {
									get: function () {
										return this.couple.dimForWidth.hidden;
									},
									set: function (e) {
										this.couple.dimForWidth.hidden !== e &&
											((this.couple.dimForWidth.hidden = e),
											this.couple.dimForWidth.updatePoly(),
											this.couple.dimForWidth.draw(this.view),
											this.view.refresh(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'size', {
									get: function () {
										return this.couple.profileSize;
									},
									set: function (e) {
										!e ||
											isNaN(e) ||
											e < 1 ||
											(this.size !== e &&
												(this.couple.resize(e), this.view.mometoManager.checkPoint()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'draggable', {
									get: function () {
										return this.couple.draggable;
									},
									set: function (e) {
										this.draggable !== e &&
											((this.couple.draggable = e),
											this.couple.draw(this.view),
											this.view.refresh());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'screwTimes', {
									get: function () {
										return this.couple.screwTimes;
									},
									set: function (e) {
										this.screwTimes !== e &&
											((this.couple.screwTimes = e), this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'attrs', {
									get: function () {
										return this.couple.attrs;
									},
									set: function (e) {
										this.attrs !== e &&
											((this.couple.attrs = e), this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.CoupleSettings = r;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.CornerJoinerSettings = void 0);
						var o = n(6),
							a = n(1),
							s = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.cornerJoiner = t), r;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'sizeDimHidden', {
										get: function () {
											return this.cornerJoiner.profileSizeTextHidden;
										},
										set: function (e) {
											this.cornerJoiner.profileSizeTextHidden !== e &&
												((this.cornerJoiner.profileSizeTextHidden = e),
												this.cornerJoiner.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'angle', {
										get: function () {
											return this.cornerJoiner.skewAngle;
										},
										set: function (e) {
											e < 0 ||
												e > 270 ||
												(this.angle !== e &&
													(this.cornerJoiner.updateSkewAngle(e, this.view, a.SkewPartEnum.TopView),
													a.TopView.checkStyle(this.view.shapeManager.shapem),
													this.view.refresh(),
													this.view.mometoManager.checkPoint()));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'size', {
										get: function () {
											return this.couple.profileSize;
										},
										set: function (e) {
											!e ||
												isNaN(e) ||
												e < 1 ||
												(this.size !== e &&
													((this.couple.profileSize = e),
													this.couple.resize(this.couple.size),
													a.TopView.optimize(this.view.shapeManager.shapem),
													this.view.mometoManager.checkPoint()));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'drawMode', {
										get: function () {
											return this.cornerJoiner.drawMode;
										},
										set: function (e) {
											(this.cornerJoiner.drawMode = e),
												this.couple.resize(this.couple.size),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'squareCorner', {
										get: function () {
											return this.cornerJoiner.squareCorner;
										},
										set: function (e) {
											(this.cornerJoiner.squareCorner = e), this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'panoramicCorner', {
										get: function () {
											return this.cornerJoiner.panoramicCorner;
										},
										set: function (e) {
											this.cornerJoiner.panoramicCorner = e;
											var t = this.cornerJoiner.params.cornerJoiner;
											e ? ((t = 1e-5), (this.sizeDimHidden = !0)) : (this.sizeDimHidden = !1),
												(this.couple.profileSize = t),
												this.couple.resize(this.couple.size),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(o.CoupleSettings);
						t.CornerJoinerSettings = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.EarFrameSettings = void 0);
						var o = n(6),
							a = n(11),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.frame.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'xFlip', {
										get: function () {
											return this.poly.xFlip;
										},
										set: function (e) {
											if (this.poly.xFlip !== e) {
												var t = this.poly.flipX();
												this.frame.frameManager.recreated(t, this.view),
													this.frame.hideAssist(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'yFlip', {
										get: function () {
											return this.poly.yFlip;
										},
										set: function (e) {
											if (this.poly.yFlip !== e) {
												var t = this.poly.flipY();
												this.frame.frameManager.recreated(t, this.view),
													this.frame.hideAssist(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hasBase', {
										get: function () {
											return this.poly.hasBase;
										},
										set: function (e) {
											this.yFlip ||
												((this.poly.hasBase = e),
												(this.poly.pullingHeight[1] = 0),
												this.frame.frameManager.recreated(this.poly, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pullingHeight', {
										get: function () {
											return this.poly.pullingHeight[1];
										},
										set: function (e) {
											if (!this.hasBase && !this.poly.yFlip) {
												var t = this.poly.pullingHeight[1];
												e < 0 ||
													e === t ||
													((this.poly.pullingHeight[1] = e),
													this.frame.frameManager.recreated(this.poly, this.view),
													this.frame.hideAssist(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint());
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'earPosition', {
										get: function () {
											return this.poly.isVertical
												? this.poly.yFlip
													? a.Direction.Down
													: a.Direction.Up
												: this.poly.xFlip
												? a.Direction.Left
												: a.Direction.Right;
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(o.FrameSettings);
						t.EarFrameSettings = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SingleTrackFrameSettings = void 0);
						var o = n(11),
							a = n(2),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.frame.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'ejwIds', {
										get: function () {
											return this.poly.validEjwIds;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hidden', {
										get: function () {
											return this.poly.hidden;
										},
										set: function (e) {
											this.poly.hidden !== e &&
												((this.poly.hidden = e),
												(this.poly.pullingHeight = new Map()),
												(this.frame.frameManager.ejw = []),
												this.frame.frameManager.recreated(this.poly, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pullingHeight', {
										get: function () {
											if (1 !== this.poly.hidden.length) return 0;
											var e = this.poly.pullingHeight.get(this.poly.hidden[0]);
											return e || 0;
										},
										set: function (e) {
											this.poly.pullingHeight.set(o.Direction.Down, e),
												(this.frame.frameManager.ejw = []),
												this.frame.frameManager.recreated(this.poly, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'jointWay', {
										get: function () {
											if (0 === this.ejwIds.length) return a.EdgeJointWay.Default;
											var e = this.frame.frameManager.getJointWay(this.ejwIds[0]);
											return e || a.EdgeJointWay.Default;
										},
										set: function (e) {
											var t = this;
											this.ejwIds.forEach(function (n) {
												return (t.frame.frameManager.ejw[n] = e);
											}),
												this.frame.frameManager.recreated(this.frame.polygon, this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(n(6).FrameSettings);
						t.SingleTrackFrameSettings = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DoubleEarsFrameSettings = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(109),
							h = n(2),
							c = n(1),
							u = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.frame.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'earPosition', {
										get: function () {
											return this.poly.earPosition;
										},
										set: function (e) {
											this.poly.earPosition !== e &&
												(this.poly instanceof c.Kfc2Polygon ||
													((this.poly.hasBase = !0),
													(this.poly.pullingHeight[4] = 0),
													(this.poly.earPosition = e),
													this.poly.initLayout(),
													this.poly.translate(
														a.default.vector(this.poly.box.center, this.poly.position),
													),
													this.frame.frameManager.recreated(this.poly, this.view),
													this.frame.hideAssist(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint()));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'jointWay', {
										set: function (e) {
											var t = this;
											this.frame.polygon.edges.forEach(function (n, r) {
												t.frame.frameManager.ejw[r] = e;
											}),
												(this.frame.frameManager.ejw[3] = h.EdgeJointWay.Default),
												(this.frame.frameManager.ejw[4] = h.EdgeJointWay.Vertical),
												(this.frame.frameManager.ejw[5] = h.EdgeJointWay.Vertical),
												(this.frame.frameManager.ejw[6] = h.EdgeJointWay.Default),
												this.frame.frameManager.recreated(this.frame.polygon, this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hasBase', {
										get: function () {
											return !(this.poly instanceof c.Kfc2Polygon) && this.poly.hasBase;
										},
										set: function (e) {
											this.hasBase !== e &&
												this.poly.earPosition === s.Direction.Up &&
												((this.poly.hasBase = e),
												(this.poly.pullingHeight[4] = 0),
												this.frame.frameManager.recreated(this.poly, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pullingHeight', {
										get: function () {
											return this.poly.pullingHeight[4];
										},
										set: function (e) {
											this.poly.earPosition === s.Direction.Up &&
												(e < 0 ||
													e === this.pullingHeight ||
													((this.poly.pullingHeight[4] = e),
													this.frame.frameManager.recreated(this.poly, this.view),
													this.frame.hideAssist(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint()));
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'polyType', {
										get: function () {
											return this.poly instanceof c.Kfc2Polygon
												? c.PolyType.kfc2
												: c.PolyType.doubleEars;
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(l.FrameSettings);
						t.DoubleEarsFrameSettings = u;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DimSetting = void 0);
						var r = (function () {
							function e(e, t) {
								(this.dimInfo = e), (this.view = t);
							}
							return (
								Object.defineProperty(e.prototype, 'dimShow', {
									get: function () {
										var e = this.dimInfo;
										return !!e && e.dimShow;
									},
									set: function (e) {
										var t = this.dimInfo;
										if (t && this.dimShow !== e) {
											t.dimShow = e;
											var n = this.dimInfo.targetBar;
											if (n) {
												var r = n.topFrame.dim;
												r.updatePoly(),
													r.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.DimSetting = r;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.TrapezoidFrameSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'poly', {
									get: function () {
										return this.frame.polygon;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'direction', {
									get: function () {
										return this.poly.direction;
									},
									set: function (e) {
										this.poly.direction !== e &&
											(this.poly.turnTo(e),
											this.frame.frameManager.recreated(this.poly, this.view),
											this.frame.hideAssist(),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).FrameSettings);
						t.TrapezoidFrameSettings = o;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.FillerSettings = void 0);
						var r = n(2),
							i = n(1),
							o = (function () {
								function e(e, t, n) {
									(this.pid = e), (this.mulManager = t), (this.view = n);
								}
								return (
									Object.defineProperty(e.prototype, 'filler', {
										get: function () {
											var e = this;
											return this.mulManager.fillerManager.fillers.find(function (t) {
												return t.polygon.polyId.equalTo(e.pid);
											});
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'serial', {
										get: function () {
											var e = this.filler;
											return e && e instanceof i.Area ? e.serial.text : '';
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'inSash', {
										get: function () {
											return !!this.filler && this.filler.parent instanceof i.Sash;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'fillerType', {
										get: function () {
											return this.filler ? this.filler.type : i.ShapeType.Glass;
										},
										set: function (e) {
											if (
												this.filler &&
												[i.ShapeType.Glass, i.ShapeType.Panel, i.ShapeType.Shade].find(function (
													t,
												) {
													return t === e;
												})
											) {
												var t = this.filler;
												if (t.type !== e) {
													var n = this.mulManager.fillerManager.changeFillerType(t.polygon, e);
													n &&
														(n.draw(this.view),
														this.view.refresh(),
														this.view.mometoManager.checkPoint());
												}
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'withShade', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Glass && e.withShade;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Glass &&
												e !== t.withShade &&
												((t.withShade = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shadeWidth', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Shade ? e.mulManager.width : 0;
										},
										set: function (e) {
											if (!(e < 5)) {
												var t = this.filler;
												t instanceof i.Shade &&
													((t.mulManager.width = e),
													t.updatePoly(),
													t.draw(this.view),
													this.view.refresh(),
													this.view.mometoManager.checkPoint());
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shadeGap', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Shade ? e.mulManager.gap : 0;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Shade &&
												((t.mulManager.gap = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shadePadding', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Shade ? e.mulManager.padding : 0;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Shade &&
												((t.mulManager.padding = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'shadeWithBead', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Shade && e.withBead;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Shade &&
												((t.withBead = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'glassShade', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Shade && e.glassShade;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Shade &&
												((t.glassShade = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'spec', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Area ? e.glassSpec.spec : '';
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Area &&
												((t.glassSpec.spec = e.trim()),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'technics', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Area ? e.glassSpec.technics : [];
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Area &&
												((t.glassSpec.technics = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'name', {
										get: function () {
											var e = this.filler;
											return (e instanceof i.Area && e.glassSpec.name) || '';
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Area &&
												((t.glassSpec.name = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'additionWidthMargin', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Area ? e.glassSpec.techMargin.width : 0;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Area &&
												((t.glassSpec.techMargin.width = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'additionHeightMargin', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Area ? e.glassSpec.techMargin.height : 0;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Area &&
												((t.glassSpec.techMargin.height = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'thickness', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Area ? e.glassSpec.thickness : 0;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Area &&
												((t.glassSpec.thickness = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'glassSpec', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Area ? e.glassSpec : new r.GlassSpec();
										},
										set: function (e) {
											var t = this.filler;
											if (t instanceof i.Area) {
												var n = Object.assign(t.glassSpec.clone(), e);
												(t.glassSpec = n.clone()),
													t.updatePoly(),
													t.draw(this.view),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'withTurningFrame', {
										get: function () {
											var e = this.filler;
											return e instanceof i.Area && e.withTurningFrame;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Area &&
												((t.withTurningFrame = e),
												t.updatePoly(),
												t.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'attrs', {
										get: function () {
											var e = this.filler;
											if (e instanceof i.Shade) return e.attrs;
										},
										set: function (e) {
											var t = this.filler;
											t instanceof i.Shade &&
												t.attrs !== e &&
												((t.attrs = e), this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'cutStyle', {
										get: function () {
											return this.filler instanceof i.Panel
												? this.filler.cutStyle
												: i.cutStyle.None;
										},
										set: function (e) {
											this.filler instanceof i.Panel &&
												this.filler.cutStyle !== e &&
												((this.name = ''),
												(this.spec = ''),
												(this.thickness = 0),
												(this.filler.cutStyle = e),
												this.filler.updatePoly(),
												this.filler.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'pullingHeight', {
										get: function () {
											if (!this.filler) return 0;
											var e = this.filler.topFrame.mulManager.splitter.getPullingHeight(this.pid);
											return e ? e.height : 0;
										},
										set: function (e) {
											this.filler &&
												(this.filler.topFrame.mulManager.splitter.setPullingHeight(this.pid, e),
												this.filler.topFrame.updateFrame(),
												this.filler.topFrame.draw(this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'allowPullingHeightSet', {
										get: function () {
											if (!this.filler) return !1;
											var e = this.filler.top;
											return (
												e instanceof i.Frame &&
												e.mulManager.splitter.allowPullingHeight(this.filler.polygon)
											);
										},
										enumerable: !1,
										configurable: !0,
									}),
									e
								);
							})();
						t.FillerSettings = o;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.NoteSettings = void 0);
						var r = (function () {
							function e(e, t) {
								(this.note = e), (this.view = t);
							}
							return (
								Object.defineProperty(e.prototype, 'fontSize', {
									get: function () {
										return this.note.fontSize;
									},
									set: function (e) {
										e !== this.note.fontSize &&
											((this.note.fontSize = e),
											this.note.updatePoly(),
											this.note.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'color', {
									get: function () {
										return this.note.color;
									},
									set: function (e) {
										(this.note.color = e),
											this.note.updatePoly(),
											this.note.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'align', {
									get: function () {
										return this.note.align;
									},
									set: function (e) {
										(this.note.align = e),
											this.note.updatePoly(),
											this.note.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.NoteSettings = r;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PeakPentagonFrameSettings = void 0);
						var o = n(6),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.frame.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'height', {
										get: function () {
											return this.poly.height;
										},
										set: function (e) {
											(this.poly.height = e),
												this.frame.frameManager.recreated(
													new a.PeakPentagonPoly(
														this.poly.cpt,
														this.poly.width,
														e,
														this.poly.triangleHeight,
													),
													this.view,
												),
												this.frame.hideAssist(),
												this.view.shapeManager.refreshTotalHeight(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'triangleHeight', {
										get: function () {
											return this.poly.triangleHeight;
										},
										set: function (e) {
											(this.poly.triangleHeight = e),
												this.frame.frameManager.recreated(
													new a.PeakPentagonPoly(
														this.poly.cpt,
														this.poly.width,
														this.poly.height,
														e,
													),
													this.view,
												),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(o.FrameSettings);
						t.PeakPentagonFrameSettings = s;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarSettings = void 0);
						var r = (function () {
							function e(e, t, n) {
								(this.pid = e), (this.mulManager = t), (this.view = n);
							}
							return (
								Object.defineProperty(e.prototype, 'decorationBar', {
									get: function () {
										return this.mulManager.decorationBarManager.getDecorationBar(this.pid)
											? this.mulManager.decorationBarManager.getDecorationBar(this.pid)
													.decorationBar
											: void 0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'decorationShape', {
									get: function () {
										return this.mulManager.decorationBarManager.getDecorationBar(this.pid)
											? this.mulManager.decorationBarManager.getDecorationBar(this.pid)
											: void 0;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'semiBarWidth', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.semiBarWidth;
									},
									set: function (e) {
										if (void 0 !== this.decorationBar) {
											var t = this.decorationBar;
											t.semiBarWidth !== e &&
												((t.semiBarWidth = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.DecorationBarSettings = r;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarChineseSettings = void 0);
						var o = (function (e) {
							function t(t, n, r) {
								var i = e.call(this, t, n, r) || this;
								return (i.pid = t), (i.mulManager = n), (i.view = r), i;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'verMiddleCount', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.verticalBarCount;
									},
									set: function (e) {
										void 0 !== this.decorationBar &&
											this.decorationBar.verticalBarCount !== e &&
											((this.decorationBar.verticalBarCount = e),
											this.decorationBar.recreateComponents(),
											this.decorationShape.updatePoly(),
											this.decorationShape.draw(this.view),
											this.view.refresh(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'horMiddleCount', {
									get: function () {
										return void 0 === this.decorationBar
											? 0
											: this.decorationBar.horizontalBarCount;
									},
									set: function (e) {
										void 0 !== this.decorationBar &&
											this.decorationBar.horizontalBarCount !== e &&
											((this.decorationBar.horizontalBarCount = e),
											this.decorationBar.recreateComponents(),
											this.decorationShape.updatePoly(),
											this.decorationShape.draw(this.view),
											this.view.refresh(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'edgeSep', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.gap;
									},
									set: function (e) {
										e <= 0 ||
											(void 0 !== this.decorationBar &&
												this.decorationBar.gap !== e &&
												((this.decorationBar.gap = e),
												this.decorationBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'horMiddleSep', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.hSep;
									},
									set: function (e) {
										e <= 0 ||
											(void 0 !== this.decorationBar &&
												this.decorationBar.hSep !== e &&
												((this.decorationBar.hSep = e),
												this.decorationBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'verMiddleSep', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.vSep;
									},
									set: function (e) {
										e <= 0 ||
											(void 0 !== this.decorationBar &&
												this.decorationBar.vSep !== e &&
												((this.decorationBar.vSep = e),
												this.decorationBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).DecorationBarSettings);
						t.DecorationBarChineseSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarChinese4Settings = void 0);
						var o = (function (e) {
							function t(t, n, r) {
								var i = e.call(this, t, n, r) || this;
								return (i.pid = t), (i.mulManager = n), (i.view = r), i;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'decBar', {
									get: function () {
										return this.decorationBar;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'verMiddleCount', {
									get: function () {
										return this.decBar.verticalBarCount;
									},
									set: function (e) {
										e < 0 ||
											(this.decBar.verticalBarCount !== e &&
												((this.decBar.verticalBarCount = e),
												this.decBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'horMiddleCount', {
									get: function () {
										return this.decBar.horizontalBarCount;
									},
									set: function (e) {
										e < 0 ||
											(this.decBar.horizontalBarCount !== e &&
												((this.decBar.horizontalBarCount = e),
												this.decBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'edgeSep', {
									get: function () {
										return this.decBar.gap;
									},
									set: function (e) {
										e <= 0 ||
											(this.decBar.gap !== e &&
												((this.decBar.gap = e),
												this.decBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'horMiddleSep', {
									get: function () {
										return this.decBar.hSep;
									},
									set: function (e) {
										e <= 0 ||
											(this.decBar.hSep !== e &&
												((this.decBar.hSep = e),
												this.decBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'verMiddleSep', {
									get: function () {
										return this.decBar.vSep;
									},
									set: function (e) {
										e <= 0 ||
											(this.decBar.vSep !== e &&
												((this.decBar.vSep = e),
												this.decBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).DecorationBarSettings);
						t.DecorationBarChinese4Settings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarPrairieSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'horEdgeSep', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.horEdgeSep;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.horEdgeSep !== e &&
												((t.horEdgeSep = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'verEdgeSep', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.verEdgeSep;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.verEdgeSep !== e &&
												((t.verEdgeSep = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'horEdgeCount', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.horEdgeCount;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.horEdgeCount !== e &&
												((t.horEdgeCount = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'verEdgeCount', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.verEdgeCount;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.verEdgeCount !== e &&
												((t.verEdgeCount = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'horMiddleCount', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.middleCount;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.middleCount !== e &&
												((t.middleCount = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'horMiddleSep', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.middleSep;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.middleSep !== e &&
												((t.middleSep = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'verMiddleCount', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.vMiddleCount;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.vMiddleCount !== e &&
												((t.vMiddleCount = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'verMiddleSep', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.vMiddleSep;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.vMiddleSep !== e &&
												((t.vMiddleSep = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'middleOffsetRatio', {
									get: function () {
										var e = this.decorationBar,
											t = e.middleOffset,
											n = e.hostPoly.box;
										return t / (Math.abs(n.ymax - n.ymin) / 2);
									},
									set: function (e) {
										var t = this.decorationBar,
											n = t.hostPoly.box,
											r = Math.abs(n.ymax - n.ymin) / 2;
										(t.middleOffset = r * e),
											t.recreateComponents(),
											this.decorationShape.updatePoly(),
											this.decorationShape.draw(this.view),
											this.view.refresh();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'vMiddleOffsetRatio', {
									get: function () {
										var e = this.decorationBar,
											t = e.vMiddleOffset,
											n = e.hostPoly.box;
										return t / (Math.abs(n.xmax - n.xmin) / 2);
									},
									set: function (e) {
										var t = this.decorationBar,
											n = t.hostPoly.box,
											r = Math.abs(n.xmax - n.xmin) / 2;
										(t.vMiddleOffset = r * e),
											t.recreateComponents(),
											this.decorationShape.updatePoly(),
											this.decorationShape.draw(this.view),
											this.view.refresh();
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).DecorationBarSettings);
						t.DecorationBarPrairieSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarColonialSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'horEdgeCount', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.horEdgeCount;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.horEdgeCount !== e &&
												((t.horEdgeCount = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'verEdgeCount', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.verEdgeCount;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.verEdgeCount !== e &&
												((t.verEdgeCount = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).DecorationBarSettings);
						t.DecorationBarColonialSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarDiamondSettings = void 0);
						var o = (function (e) {
							function t(t, n, r) {
								var i = e.call(this, t, n, r) || this;
								return (i.pid = t), (i.mulManager = n), (i.view = r), i;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'verPointCount', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.vPtCount;
									},
									set: function (e) {
										e <= 0 ||
											(void 0 !== this.decorationBar &&
												this.decorationBar.vPtCount !== e &&
												((this.decorationBar.vPtCount = e),
												this.decorationBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'horPointCount', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.hPtCount;
									},
									set: function (e) {
										e <= 0 ||
											(void 0 !== this.decorationBar &&
												this.decorationBar.hPtCount !== e &&
												((this.decorationBar.hPtCount = e),
												this.decorationBar.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint()));
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).DecorationBarSettings);
						t.DecorationBarDiamondSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarSemiArcSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'count', {
									get: function () {
										return void 0 === this.decorationBar ? 0 : this.decorationBar.count;
									},
									set: function (e) {
										if (!(e < 0)) {
											var t = this.decorationBar;
											void 0 !== t &&
												t.count !== e &&
												((t.count = e),
												t.recreateComponents(),
												this.decorationShape.updatePoly(),
												this.decorationShape.draw(this.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).DecorationBarSettings);
						t.DecorationBarSemiArcSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.DecorationBarSemiArcProSettings = void 0);
						var o = (function (e) {
							function t() {
								var t = (null !== e && e.apply(this, arguments)) || this;
								return (
									(t.styles = [
										function () {
											(t.decBar.eqSplitTopCell = !0),
												(t.decBar.topAsBar = !0),
												(t.decBar.outerArcStyle = 'half'),
												(t.decBar.innerStyle = 'wheel'),
												(t.decBar.wheelCrosstiesCount = 1);
										},
										function () {
											(t.decBar.eqSplitTopCell = !0),
												(t.decBar.topAsBar = !1),
												(t.decBar.outerArcStyle = 'fill'),
												(t.decBar.innerStyle = 'wheel'),
												(t.decBar.wheelCrosstiesCount = 1);
										},
									]),
									t
								);
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'decBar', {
									get: function () {
										return this.decorationBar;
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.toStyle = function (e) {
									var t = this.styles[e];
									t && (t(), (this.styleId = e));
								}),
								Object.defineProperty(t.prototype, 'stylesCount', {
									get: function () {
										return this.styles.length;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'style', {
									get: function () {
										return this.styleId;
									},
									set: function (e) {
										void 0 !== e &&
											void 0 !== this.decBar &&
											(this.toStyle(e),
											this.decorationShape.updatePoly(),
											this.decorationShape.draw(this.view),
											this.view.refresh(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).DecorationBarSettings);
						t.DecorationBarSemiArcProSettings = o;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.GlassHoleSettings = void 0);
						var r = (function () {
							function e(e, t) {
								(this.glassHole = e), (this.view = t);
							}
							return (
								Object.defineProperty(e.prototype, 'style', {
									get: function () {
										return this.glassHole.style;
									},
									set: function (e) {
										e !== this.glassHole.style &&
											((this.glassHole.style = e),
											this.glassHole.updatePoly(),
											this.glassHole.glass.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'dimToProfile', {
									get: function () {
										return this.glassHole.dimToProfile;
									},
									set: function (e) {
										e !== this.glassHole.dimToProfile &&
											((this.glassHole.dimToProfile = e),
											this.glassHole.updatePoly(),
											this.glassHole.glass.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'hMarginDimHidden', {
									get: function () {
										return this.glassHole.hMarginDim.hidden;
									},
									set: function (e) {
										(this.glassHole.hMarginDim.hidden = e),
											this.glassHole.hMarginDim.updatePoly(),
											this.glassHole.hMarginDim.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'vMarginDimHidden', {
									get: function () {
										return this.glassHole.vMarginDim.hidden;
									},
									set: function (e) {
										(this.glassHole.vMarginDim.hidden = e),
											this.glassHole.vMarginDim.updatePoly(),
											this.glassHole.vMarginDim.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'diameterHidden', {
									get: function () {
										return this.glassHole.diameterHidden;
									},
									set: function (e) {
										(this.glassHole.diameterHidden = e),
											this.glassHole.updatePoly(),
											this.glassHole.draw(this.view),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.GlassHoleSettings = r;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HalfCircleFrameSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'poly', {
									get: function () {
										return this.frame.polygon;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'bottomHidden', {
									get: function () {
										return this.poly.bottomHidden;
									},
									set: function (e) {
										(this.poly.bottomHidden = e),
											this.frame.frameManager.recreated(this.poly, this.view),
											this.frame.hideAssist(),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).FrameSettings);
						t.HalfCircleFrameSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.ThreedArcFrameSettings = t.FixedThreedArcShape = void 0);
						var o,
							a = n(6);
						!(function (e) {
							(e.quarter = 'quarter'), (e.half = 'half');
						})((o = t.FixedThreedArcShape || (t.FixedThreedArcShape = {})));
						var s = (function (e) {
							function t(t, n) {
								var r = e.call(this, t, n) || this;
								return (r.frame = t), (r.view = n), r;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'arcFaceInner', {
									get: function () {
										return this.frame.arcFaceInner;
									},
									set: function (e) {
										(this.frame.arcFaceInner = e),
											this.frame.updatePoly(),
											this.frame.draw(this.view);
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'fixedShape', {
									set: function (e) {
										var t = this.frame,
											n = 0;
										switch (e) {
											case o.quarter:
												(n = t.threedChordLength / Math.sqrt(2)),
													t.updateChordHeight((1 - Math.sqrt(2) / 2) * n);
												break;
											case o.half:
												(n = t.threedChordLength / 2), t.updateChordHeight(n);
										}
										this.frame.draw(this.view), t.view.mometoManager.checkPoint(), t.view.refresh();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'shortArcDim', {
									get: function () {
										return this.frame.shortArcDim;
									},
									set: function (e) {
										(this.frame.shortArcDim = e), this.frame.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'frameDepth', {
									get: function () {
										return this.frame.depthStruct.frame;
									},
									set: function (e) {
										var t = Number(e);
										Number.isNaN(t) ||
											((this.frame.depthStruct.frame = t),
											this.frame.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'fixedBeadDepth', {
									get: function () {
										return this.frame.depthStruct.fixedBead;
									},
									set: function (e) {
										var t = Number(e);
										Number.isNaN(t) ||
											((this.frame.depthStruct.fixedBead = t),
											this.frame.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'sashDepth', {
									get: function () {
										return this.frame.depthStruct.sash.join(',');
									},
									set: function (e) {
										if ('string' == typeof e)
											(this.frame.depthStruct.sash = e.split(',').map(function (e) {
												var t = Number(e);
												return Number.isNaN(t) ? 0 : t;
											})),
												this.frame.view.mometoManager.checkPoint();
										else {
											var t = Number(e);
											if (Number.isNaN(t)) return;
											this.frame.depthStruct.sash = [t];
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'fixedDepth', {
									get: function () {
										return this.frame.depthStruct.fixed;
									},
									set: function (e) {
										var t = Number(e);
										Number.isNaN(t) ||
											((this.frame.depthStruct.fixed = t),
											this.frame.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'sashGlassDepth', {
									get: function () {
										return this.frame.depthStruct.sashGlass;
									},
									set: function (e) {
										var t = Number(e);
										Number.isNaN(t) ||
											((this.frame.depthStruct.sashGlass = t),
											this.frame.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(a.FrameSettings);
						t.ThreedArcFrameSettings = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.IsoscelesTriangleFrameSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'poly', {
									get: function () {
										return this.frame.polygon;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'height', {
									get: function () {
										return Math.round(this.poly.height);
									},
									set: function (e) {
										this.poly.height !== e &&
											(this.frame.frameManager.recreated(this.poly.heightTo(e), this.view),
											this.frame.hideAssist(),
											this.view.shapeManager.refreshTotalHeight(),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).FrameSettings);
						t.IsoscelesTriangleFrameSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.IsoscelesTrapezoidFrameSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'poly', {
									get: function () {
										return this.frame.polygon;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'height', {
									get: function () {
										return Math.round(this.poly.height);
									},
									set: function (e) {
										this.poly.height !== e &&
											(this.frame.frameManager.recreated(this.poly.heightTo(e), this.view),
											this.frame.hideAssist(),
											this.view.shapeManager.refreshTotalHeight(),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).FrameSettings);
						t.IsoscelesTrapezoidFrameSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.KfcFrameSettings = void 0);
						var o = n(1),
							a = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.frame.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hiddenSides', {
										get: function () {
											return this.poly.hiddenSides;
										},
										set: function (e) {
											this.poly.hiddenSides !== e &&
												((this.poly.hiddenSides = e),
												this.poly.initLayout(),
												this.frame.frameManager.recreated(this.poly, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'bottomInnerDim', {
										get: function () {
											return (
												this.frame.polygon instanceof o.Kfc3Polygon &&
												this.frame.polygon.bottomInnerDim
											);
										},
										set: function (e) {
											this.frame.polygon instanceof o.Kfc3Polygon &&
												this.frame.polygon.bottomInnerDim !== e &&
												((this.frame.polygon.bottomInnerDim = e),
												this.frame.updatePoly(),
												this.frame.draw(this.frame.view),
												this.view.refresh(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(n(6).FrameSettings);
						t.KfcFrameSettings = a;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.Ear2FrameSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'poly', {
									get: function () {
										return this.frame.polygon;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'xFlip', {
									get: function () {
										return this.poly.xFlip;
									},
									set: function (e) {
										if (this.poly.xFlip !== e) {
											var t = this.poly.flipX();
											this.frame.frameManager.recreated(t, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'yFlip', {
									get: function () {
										return this.poly.yFlip;
									},
									set: function (e) {
										if (this.poly.yFlip !== e) {
											var t = this.poly.flipY();
											this.frame.frameManager.recreated(t, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'hasBase', {
									get: function () {
										return this.poly.hasBase;
									},
									set: function (e) {
										this.poly.isVertical &&
											((this.poly.hasBase = e),
											(this.poly.pullingHeight[1] = 0),
											this.frame.frameManager.recreated(this.poly, this.view),
											this.frame.hideAssist(),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'pullingHeight', {
									get: function () {
										return this.poly.pullingHeight[1];
									},
									set: function (e) {
										this.hasBase ||
											(this.poly.isVertical &&
												(e < 0 ||
													e === this.pullingHeight ||
													((this.poly.pullingHeight[1] = e),
													this.frame.frameManager.recreated(this.poly, this.view),
													this.frame.hideAssist(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint())));
									},
									enumerable: !1,
									configurable: !0,
								}),
								t
							);
						})(n(6).FrameSettings);
						t.Ear2FrameSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HalfKfcFrameSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'poly', {
									get: function () {
										return this.frame.polygon;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'xFlip', {
									get: function () {
										return this.poly.xFlip;
									},
									set: function (e) {
										if (this.poly.xFlip !== e) {
											var t = this.poly.flipX();
											this.frame.frameManager.recreated(t, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.fixInnerDim = function () {
									var e = this.poly.setProfileSize(this.frame.frameManager.getEdgeWidth(0));
									this.frame.frameManager.recreated(e, this.view),
										this.frame.hideAssist(),
										this.view.activeLayer.batchDraw(),
										this.view.mometoManager.checkPoint();
								}),
								t
							);
						})(n(6).FrameSettings);
						t.HalfKfcFrameSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.AngledFrameSettings = void 0);
						var o = n(6),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.frame.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'height', {
										get: function () {
											return this.poly.height;
										},
										set: function (e) {
											if (!(this.poly.height - this.poly.remainingHeight >= e)) {
												var t = this.poly.height - e,
													n = new a.AngledHexagonPoly(
														this.poly.cpt,
														this.poly.width,
														e,
														this.poly.remainingWidth,
														this.poly.remainingHeight - t,
													);
												this.frame.frameManager.recreated(n, this.view),
													this.frame.hideAssist(),
													this.view.shapeManager.refreshTotalHeight(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(o.FrameSettings);
						t.AngledFrameSettings = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.AngledFrame2Settings = void 0);
						var o = n(6),
							a = n(1),
							s = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.frame.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'height', {
										get: function () {
											return this.poly.height;
										},
										set: function (e) {
											if (!(this.poly.height - this.poly.remainingHeight >= e)) {
												var t = this.poly.height - e;
												if (
													((this.poly.remainingHeight = this.poly.remainingHeight - t),
													this.poly.isTangency)
												) {
													var n = this.poly.remainingHeight;
													if (2 * n >= this.poly.width) return;
													(this.poly.remainingWidth = n),
														(this.poly.leftArcHeight = this.poly.rightArcHeight =
															n - (n / 2) * Math.SQRT2);
												}
												var r = new a.AngledHexagon2Poly(
													this.poly.cpt,
													this.poly.width,
													e,
													this.poly.remainingHeight,
													this.poly.remainingWidth,
													this.poly.leftArcHeight,
													this.poly.rightArcHeight,
													this.poly.isTangency,
												);
												this.frame.frameManager.recreated(r, this.view),
													this.frame.hideAssist(),
													this.view.shapeManager.refreshTotalHeight(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isTangency', {
										get: function () {
											return this.poly.isTangency;
										},
										set: function (e) {
											if (this.poly.isTangency !== e) {
												var t = this.frame.dim.diMgr.findFrameDim(3),
													n = this.frame.dim.diMgr.findFrameDim(5);
												if (((this.poly.isTangency = e), e)) {
													var r = this.poly.remainingHeight;
													(this.poly.remainingWidth = r),
														(this.poly.leftArcHeight = this.poly.rightArcHeight =
															r - (r / 2) * Math.SQRT2);
													var i = new a.AngledHexagon2Poly(
														this.poly.cpt,
														this.poly.width,
														this.height,
														this.poly.remainingHeight,
														this.poly.remainingWidth,
														this.poly.leftArcHeight,
														this.poly.rightArcHeight,
														this.poly.isTangency,
													);
													this.frame.frameManager.recreated(i, this.view),
														(t.dimShow = !1),
														(n.dimShow = !1);
												} else (t.dimShow = !0), (n.dimShow = !0);
												this.frame.dim.updatePoly(),
													this.frame.dim.draw(this.view),
													this.frame.hideAssist(),
													this.view.shapeManager.refreshTotalHeight(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'leftArcHeight', {
										get: function () {
											return this.poly.leftArcHeight;
										},
										set: function (e) {
											if (this.poly.leftArcHeight !== e && !this.isTangency) {
												this.poly.leftArcHeight = e;
												var t = new a.AngledHexagon2Poly(
													this.poly.cpt,
													this.poly.width,
													this.height,
													this.poly.remainingHeight,
													this.poly.remainingWidth,
													this.poly.leftArcHeight,
													this.poly.rightArcHeight,
													this.poly.isTangency,
												);
												this.frame.frameManager.recreated(t, this.view),
													this.frame.hideAssist(),
													this.view.shapeManager.refreshTotalHeight(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'rightArcHeight', {
										get: function () {
											return this.poly.rightArcHeight;
										},
										set: function (e) {
											if (this.poly.rightArcHeight !== e && !this.isTangency) {
												this.poly.rightArcHeight = e;
												var t = new a.AngledHexagon2Poly(
													this.poly.cpt,
													this.poly.width,
													this.height,
													this.poly.remainingHeight,
													this.poly.remainingWidth,
													this.poly.leftArcHeight,
													this.poly.rightArcHeight,
													this.poly.isTangency,
												);
												this.frame.frameManager.recreated(t, this.view),
													this.frame.hideAssist(),
													this.view.shapeManager.refreshTotalHeight(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(o.FrameSettings);
						t.AngledFrame2Settings = s;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								});
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.HalfKfc2FrameSettings = void 0);
						var o = (function (e) {
							function t() {
								return (null !== e && e.apply(this, arguments)) || this;
							}
							return (
								i(t, e),
								Object.defineProperty(t.prototype, 'poly', {
									get: function () {
										return this.frame.polygon;
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(t.prototype, 'xFlip', {
									get: function () {
										return this.poly.xFlip;
									},
									set: function (e) {
										if (this.poly.xFlip !== e) {
											var t = this.poly.flipX();
											this.frame.frameManager.recreated(t, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										}
									},
									enumerable: !1,
									configurable: !0,
								}),
								(t.prototype.fixInnerDim = function () {
									var e = this.poly.setProfileSize(this.frame.frameManager.getEdgeWidth(0));
									this.frame.frameManager.recreated(e, this.view),
										this.frame.hideAssist(),
										this.view.activeLayer.batchDraw(),
										this.view.mometoManager.checkPoint();
								}),
								t
							);
						})(n(6).FrameSettings);
						t.HalfKfc2FrameSettings = o;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.PointedEarsFrameSettings = void 0);
						var a = o(n(0)),
							s = n(11),
							l = n(109),
							h = n(2),
							c = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.frame.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'earPosition', {
										get: function () {
											return this.poly.earPosition;
										},
										set: function (e) {
											this.poly.earPosition !== e &&
												((this.poly.hasBase = !0),
												(this.poly.pullingHeight[1] = 0),
												(this.poly.earPosition = e),
												this.poly.initLayout(),
												this.poly.translate(
													a.default.vector(this.poly.box.center, this.poly.position),
												),
												this.frame.frameManager.recreated(this.poly, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'jointWay', {
										set: function (e) {
											var t = this;
											this.frame.polygon.edges.forEach(function (n, r) {
												t.frame.frameManager.ejw[r] = e;
											}),
												(this.frame.frameManager.ejw[0] = h.EdgeJointWay.Default),
												this.frame.frameManager.recreated(this.frame.polygon, this.view),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'hasBase', {
										get: function () {
											return this.poly.hasBase;
										},
										set: function (e) {
											this.hasBase !== e &&
												this.poly.earPosition !== s.Direction.Up &&
												this.poly.earPosition !== s.Direction.Down &&
												((this.poly.hasBase = e),
												(this.poly.pullingHeight[1] = 0),
												this.frame.frameManager.recreated(this.poly, this.view),
												this.frame.hideAssist(),
												this.view.activeLayer.batchDraw(),
												this.view.mometoManager.checkPoint());
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'pullingHeight', {
										get: function () {
											return this.poly.pullingHeight[1];
										},
										set: function (e) {
											this.hasBase &&
												this.poly.earPosition !== s.Direction.Up &&
												this.poly.earPosition !== s.Direction.Down &&
												(e < 0 ||
													e === this.pullingHeight ||
													((this.poly.pullingHeight[1] = e),
													this.frame.frameManager.recreated(this.poly, this.view),
													this.frame.hideAssist(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint()));
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(l.FrameSettings);
						t.PointedEarsFrameSettings = c;
					},
					function (e, t, n) {
						'use strict';
						var r,
							i =
								(this && this.__extends) ||
								((r = function (e, t) {
									return (r =
										Object.setPrototypeOf ||
										({
											__proto__: [],
										} instanceof Array &&
											function (e, t) {
												e.__proto__ = t;
											}) ||
										function (e, t) {
											for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
										})(e, t);
								}),
								function (e, t) {
									function n() {
										this.constructor = e;
									}
									r(e, t),
										(e.prototype =
											null === t ? Object.create(t) : ((n.prototype = t.prototype), new n()));
								}),
							o =
								(this && this.__importDefault) ||
								function (e) {
									return e && e.__esModule
										? e
										: {
												default: e,
										  };
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.RoundedRectangFrameSettings = void 0);
						var a = o(n(0)),
							s = n(6),
							l = n(1),
							h = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									i(t, e),
									Object.defineProperty(t.prototype, 'poly', {
										get: function () {
											return this.frame.polygon;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'height', {
										get: function () {
											return Math.round(100 * this.poly.height) / 100;
										},
										set: function (e) {
											if (!(2 * this.poly.borderRadius >= e)) {
												var t = this.poly.height - e,
													n = this.poly.dragEdge(6, a.default.vector(0, t));
												this.frame.frameManager.recreated(n, this.view),
													this.frame.hideAssist(),
													this.view.shapeManager.refreshTotalHeight(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'width', {
										get: function () {
											return Math.round(100 * this.poly.width) / 100;
										},
										set: function (e) {
											if (!(2 * this.poly.borderRadius >= e)) {
												var t = this.poly.width - e,
													n = this.poly.dragEdge(4, a.default.vector(t, 0));
												this.frame.frameManager.recreated(n, this.view),
													this.frame.hideAssist(),
													this.view.shapeManager.refreshTotalHeight(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'borderRadius', {
										get: function () {
											return this.poly.borderRadius;
										},
										set: function (e) {
											if (
												!(
													e < this.frame.profileSizeManager.frame * Math.SQRT2 ||
													2 * e > this.height ||
													2 * e > this.width
												)
											) {
												var t = new l.RoundedRectanglePolygon(
													this.poly.cpt,
													this.poly.width,
													this.height,
													e,
													!0,
												);
												this.frame.frameManager.recreated(t, this.view),
													this.frame.hideAssist(),
													this.view.shapeManager.refreshTotalHeight(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(t.prototype, 'isTangency', {
										get: function () {
											return this.poly.isTangency;
										},
										set: function (e) {
											if (this.poly.isTangency !== e) {
												var t = this.frame.dim.diMgr.findFrameDim(1),
													n = this.frame.dim.diMgr.findFrameDim(3),
													r = this.frame.dim.diMgr.findFrameDim(5),
													i = this.frame.dim.diMgr.findFrameDim(7);
												if (((this.poly.isTangency = e), e)) {
													var o = new l.RoundedRectanglePolygon(
														this.poly.cpt,
														this.poly.width,
														this.height,
														this.borderRadius,
														!0,
													);
													this.frame.frameManager.recreated(o, this.view),
														(t.dimShow = !1),
														(n.dimShow = !1),
														(r.dimShow = !1),
														(i.dimShow = !1);
												} else
													(t.dimShow = !0), (n.dimShow = !0), (r.dimShow = !0), (i.dimShow = !0);
												this.frame.dim.updatePoly(),
													this.frame.dim.draw(this.view),
													this.frame.hideAssist(),
													this.view.shapeManager.refreshTotalHeight(),
													this.view.activeLayer.batchDraw(),
													this.view.mometoManager.checkPoint();
											}
										},
										enumerable: !1,
										configurable: !0,
									}),
									t
								);
							})(s.FrameSettings);
						t.RoundedRectangFrameSettings = h;
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SubFrameSettings = void 0);
						var r = (function () {
							function e(e, t) {
								(this.subFrame = e), (this.view = t);
							}
							return (
								Object.defineProperty(e.prototype, 'jointWay', {
									get: function () {
										return this.subFrame.edgeJointWay;
									},
									set: function (e) {
										(this.subFrame.edgeJointWay = e),
											this.subFrame.updatePoly(),
											this.subFrame.draw(),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'profileSize', {
									get: function () {
										return this.subFrame.profileSize;
									},
									set: function (e) {
										(this.subFrame.profileSize = e),
											this.subFrame.updatePoly(),
											this.subFrame.draw(),
											this.subFrame.updateRelatedTargets(),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'hidden', {
									get: function () {
										return this.subFrame.hiddenSides;
									},
									set: function (e) {
										(this.subFrame.hiddenSides = e),
											this.subFrame.updatePoly(),
											this.subFrame.draw(),
											this.subFrame.updateRelatedTargets(),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint();
									},
									enumerable: !1,
									configurable: !0,
								}),
								Object.defineProperty(e.prototype, 'dimHidden', {
									get: function () {
										return this.subFrame.dimHidden;
									},
									set: function (e) {
										this.dimHidden !== e &&
											((this.subFrame.dimHidden = e),
											this.subFrame.updatePoly(),
											this.subFrame.draw(),
											this.view.activeLayer.batchDraw(),
											this.view.mometoManager.checkPoint());
									},
									enumerable: !1,
									configurable: !0,
								}),
								e
							);
						})();
						t.SubFrameSettings = r;
					},
					function (e, t, n) {
						'use strict';
						var r =
							(this && this.__importDefault) ||
							function (e) {
								return e && e.__esModule
									? e
									: {
											default: e,
									  };
							};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.SelectedComponent = void 0);
						var i = r(n(0)),
							o = n(1),
							a = (function () {
								function e(e, t) {
									(this.selected = e), (this.view = t);
								}
								return (
									Object.defineProperty(e.prototype, 'componentType', {
										get: function () {
											return o.ShapeType.Frame;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'point', {
										get: function () {
											return this.selected instanceof o.Frame
												? this.selected.view.toScreen(this.selected.polygon.vertices[3])
												: i.default.point();
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'width', {
										get: function () {
											return this.selected instanceof o.Frame ? this.selected.polygon.boxWidth : 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									Object.defineProperty(e.prototype, 'height', {
										get: function () {
											return this.selected instanceof o.Frame ? this.selected.polygon.boxHeight : 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.replaceFrameByJson = function (e) {
										this.selected instanceof o.Frame && this.selected.replaceFrameByJson(e);
									}),
									e
								);
							})();
						t.SelectedComponent = a;
					},
					function (e, t, n) {
						'use strict';
						var r =
								(this && this.__createBinding) ||
								(Object.create
									? function (e, t, n, r) {
											void 0 === r && (r = n),
												Object.defineProperty(e, r, {
													enumerable: !0,
													get: function () {
														return t[n];
													},
												});
									  }
									: function (e, t, n, r) {
											void 0 === r && (r = n), (e[r] = t[n]);
									  }),
							i =
								(this && this.__exportStar) ||
								function (e, t) {
									for (var n in e) 'default' === n || t.hasOwnProperty(n) || r(t, e, n);
								};
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							i(n(110), t),
							i(n(525), t);
					},
					function (e, t, n) {
						'use strict';
						Object.defineProperty(t, '__esModule', {
							value: !0,
						}),
							(t.MometoManager = void 0);
						var r = n(528),
							i = (function () {
								function e(e) {
									(this.view = e),
										(this.historyPointer = -1),
										(this.lastPoint = ''),
										(this.diffs = []),
										(this.oriPoint = ''),
										(this.dmp = new r.DiffMatchPatch());
								}
								return (
									Object.defineProperty(e.prototype, 'isDirty', {
										get: function () {
											return '' !== this.oriPoint
												? this.oriPoint !== this.view.serialize()
												: this.diffs.length > 0;
										},
										enumerable: !1,
										configurable: !0,
									}),
									(e.prototype.undo = function (e) {
										if ((void 0 === e && (e = !1), !(this.historyPointer < 0))) {
											var t = this.diffs[this.historyPointer];
											e && this.diffs.pop(),
												(this.lastPoint = this.applyDiff(this.lastPoint, t)),
												this.view.deserialize(this.lastPoint),
												this.view.refresh(),
												this.historyPointer--;
										}
									}),
									(e.prototype.recoverLast = function () {
										this.view.deserialize(this.lastPoint), this.view.refresh();
									}),
									(e.prototype.redo = function () {
										if (
											this.historyPointer !== this.diffs.length - 1 &&
											this.historyPointer !== this.diffs.length - 1 &&
											0 !== this.diffs.length
										) {
											this.historyPointer++;
											var e = this.diffs[this.historyPointer];
											(this.lastPoint = this.applyDiffInv(this.lastPoint, e)),
												this.view.deserialize(this.lastPoint),
												this.view.refresh();
										}
									}),
									(e.prototype.checkPoint = function (e) {
										void 0 === e && (e = !1);
										try {
											this._checkPoint(), e && (this.oriPoint = this.lastPoint);
										} catch (e) {
											console.warn(('' + e).split(/\r?\n/)[0]);
										}
									}),
									(e.prototype._checkPoint = function () {
										var e = this.view.serialize();
										if (e !== this.lastPoint) {
											var t = this.getDiff(e, this.lastPoint);
											this.historyPointer !== this.diffs.length - 1 &&
												this.diffs.splice(
													this.historyPointer + 1,
													this.diffs.length - this.historyPointer + 1,
												),
												this.diffs.push(t),
												(this.historyPointer = this.diffs.length - 1),
												(this.lastPoint = e);
										}
									}),
									(e.prototype.clean = function () {
										(this.historyPointer = -1),
											(this.lastPoint = ''),
											(this.diffs = []),
											(this.oriPoint = '');
									}),
									(e.prototype.getDiff = function (e, t) {
										var n = this.dmp,
											r = n.diff_main(e, t, !0);
										return r.length > 2 && n.diff_cleanupSemantic(r), n.patch_make(e, t, r);
									}),
									(e.prototype.applyDiff = function (e, t) {
										return this.dmp.patch_apply(t, e)[0];
									}),
									(e.prototype.applyDiffInv = function (e, t) {
										this.reversePatch(t);
										var n = this.applyDiff(e, t.slice().reverse());
										return this.reversePatch(t), n;
									}),
									(e.prototype.reversePatch = function (e) {
										e.forEach(function (e) {
											e.diffs.forEach(function (e) {
												return (e[0] *= -1);
											});
										});
									}),
									e
								);
							})();
						t.MometoManager = i;
					},
					function (e, t, n) {
						'use strict';
						n.r(t),
							n.d(t, 'audit', function () {
								return l;
							}),
							n.d(t, 'auditTime', function () {
								return f;
							}),
							n.d(t, 'buffer', function () {
								return d;
							}),
							n.d(t, 'bufferCount', function () {
								return v;
							}),
							n.d(t, 'bufferTime', function () {
								return P;
							}),
							n.d(t, 'bufferToggle', function () {
								return C;
							}),
							n.d(t, 'bufferWhen', function () {
								return j;
							}),
							n.d(t, 'catchError', function () {
								return R;
							}),
							n.d(t, 'combineAll', function () {
								return N;
							}),
							n.d(t, 'combineLatest', function () {
								return V;
							}),
							n.d(t, 'concat', function () {
								return q;
							}),
							n.d(t, 'concatAll', function () {
								return K.a;
							}),
							n.d(t, 'concatMap', function () {
								return Q;
							}),
							n.d(t, 'concatMapTo', function () {
								return X;
							}),
							n.d(t, 'count', function () {
								return Z;
							}),
							n.d(t, 'debounce', function () {
								return te;
							}),
							n.d(t, 'debounceTime', function () {
								return ie;
							}),
							n.d(t, 'defaultIfEmpty', function () {
								return le;
							}),
							n.d(t, 'delay', function () {
								return fe;
							}),
							n.d(t, 'delayWhen', function () {
								return ve;
							}),
							n.d(t, 'dematerialize', function () {
								return Pe;
							}),
							n.d(t, 'distinct', function () {
								return Te;
							}),
							n.d(t, 'distinctUntilChanged', function () {
								return Ee;
							}),
							n.d(t, 'distinctUntilKeyChanged', function () {
								return ke;
							}),
							n.d(t, 'elementAt', function () {
								return Ye;
							}),
							n.d(t, 'endWith', function () {
								return Ze;
							}),
							n.d(t, 'every', function () {
								return $e;
							}),
							n.d(t, 'exhaust', function () {
								return nt;
							}),
							n.d(t, 'exhaustMap', function () {
								return at;
							}),
							n.d(t, 'expand', function () {
								return ht;
							}),
							n.d(t, 'filter', function () {
								return je;
							}),
							n.d(t, 'finalize', function () {
								return pt;
							}),
							n.d(t, 'find', function () {
								return gt;
							}),
							n.d(t, 'findIndex', function () {
								return vt;
							}),
							n.d(t, 'first', function () {
								return bt;
							}),
							n.d(t, 'groupBy', function () {
								return St.b;
							}),
							n.d(t, 'ignoreElements', function () {
								return _t;
							}),
							n.d(t, 'isEmpty', function () {
								return Dt;
							}),
							n.d(t, 'last', function () {
								return Ct;
							}),
							n.d(t, 'map', function () {
								return ot.a;
							}),
							n.d(t, 'mapTo', function () {
								return kt;
							}),
							n.d(t, 'materialize', function () {
								return At;
							}),
							n.d(t, 'max', function () {
								return Ut;
							}),
							n.d(t, 'merge', function () {
								return Vt;
							}),
							n.d(t, 'mergeAll', function () {
								return Gt.a;
							}),
							n.d(t, 'mergeMap', function () {
								return Y.a;
							}),
							n.d(t, 'flatMap', function () {
								return Y.a;
							}),
							n.d(t, 'mergeMapTo', function () {
								return qt;
							}),
							n.d(t, 'mergeScan', function () {
								return Kt;
							}),
							n.d(t, 'min', function () {
								return Xt;
							}),
							n.d(t, 'multicast', function () {
								return $t;
							}),
							n.d(t, 'observeOn', function () {
								return tn.b;
							}),
							n.d(t, 'onErrorResumeNext', function () {
								return nn;
							}),
							n.d(t, 'pairwise', function () {
								return an;
							}),
							n.d(t, 'partition', function () {
								return cn;
							}),
							n.d(t, 'pluck', function () {
								return un;
							}),
							n.d(t, 'publish', function () {
								return dn;
							}),
							n.d(t, 'publishBehavior', function () {
								return yn;
							}),
							n.d(t, 'publishLast', function () {
								return vn;
							}),
							n.d(t, 'publishReplay', function () {
								return bn;
							}),
							n.d(t, 'race', function () {
								return _n;
							}),
							n.d(t, 'reduce', function () {
								return Nt;
							}),
							n.d(t, 'repeat', function () {
								return Pn;
							}),
							n.d(t, 'repeatWhen', function () {
								return Tn;
							}),
							n.d(t, 'retry', function () {
								return En;
							}),
							n.d(t, 'retryWhen', function () {
								return kn;
							}),
							n.d(t, 'refCount', function () {
								return An.a;
							}),
							n.d(t, 'sample', function () {
								return Ln;
							}),
							n.d(t, 'sampleTime', function () {
								return Bn;
							}),
							n.d(t, 'scan', function () {
								return Rt;
							}),
							n.d(t, 'sequenceEqual', function () {
								return Un;
							}),
							n.d(t, 'share', function () {
								return Kn;
							}),
							n.d(t, 'shareReplay', function () {
								return Yn;
							}),
							n.d(t, 'single', function () {
								return Qn;
							}),
							n.d(t, 'skip', function () {
								return $n;
							}),
							n.d(t, 'skipLast', function () {
								return nr;
							}),
							n.d(t, 'skipUntil', function () {
								return or;
							}),
							n.d(t, 'skipWhile', function () {
								return lr;
							}),
							n.d(t, 'startWith', function () {
								return ur;
							}),
							n.d(t, 'subscribeOn', function () {
								return gr;
							}),
							n.d(t, 'switchAll', function () {
								return br;
							}),
							n.d(t, 'switchMap', function () {
								return mr;
							}),
							n.d(t, 'switchMapTo', function () {
								return Sr;
							}),
							n.d(t, 'take', function () {
								return Ge;
							}),
							n.d(t, 'takeLast', function () {
								return Mt;
							}),
							n.d(t, 'takeUntil', function () {
								return _r;
							}),
							n.d(t, 'takeWhile', function () {
								return Dr;
							}),
							n.d(t, 'tap', function () {
								return Be;
							}),
							n.d(t, 'throttle', function () {
								return Er;
							}),
							n.d(t, 'throttleTime', function () {
								return kr;
							}),
							n.d(t, 'throwIfEmpty', function () {
								return Ue;
							}),
							n.d(t, 'timeInterval', function () {
								return Hr;
							}),
							n.d(t, 'timeout', function () {
								return Jr;
							}),
							n.d(t, 'timeoutWith', function () {
								return Wr;
							}),
							n.d(t, 'timestamp', function () {
								return Vr;
							}),
							n.d(t, 'toArray', function () {
								return Kr;
							}),
							n.d(t, 'window', function () {
								return Yr;
							}),
							n.d(t, 'windowCount', function () {
								return Zr;
							}),
							n.d(t, 'windowTime', function () {
								return ti;
							}),
							n.d(t, 'windowToggle', function () {
								return li;
							}),
							n.d(t, 'windowWhen', function () {
								return ui;
							}),
							n.d(t, 'withLatestFrom', function () {
								return di;
							}),
							n.d(t, 'zip', function () {
								return vi;
							}),
							n.d(t, 'zipAll', function () {
								return wi;
							});
						var r = n(3),
							i = n(27),
							o = n(20),
							a = n(17),
							s = n(15);
						function l(e) {
							return function (t) {
								return t.lift(new h(e));
							};
						}
						var h = (function () {
								function e(e) {
									this.durationSelector = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new c(e, this.durationSelector));
									}),
									e
								);
							})(),
							c = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.durationSelector = n), (r.hasValue = !1), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										if (((this.value = e), (this.hasValue = !0), !this.throttled)) {
											var t = Object(i.a)(this.durationSelector)(e);
											if (t === o.a) this.destination.error(o.a.e);
											else {
												var n = Object(s.a)(this, t);
												!n || n.closed ? this.clearThrottle() : this.add((this.throttled = n));
											}
										}
									}),
									(t.prototype.clearThrottle = function () {
										var e = this.value,
											t = this.hasValue,
											n = this.throttled;
										n && (this.remove(n), (this.throttled = null), n.unsubscribe()),
											t && ((this.value = null), (this.hasValue = !1), this.destination.next(e));
									}),
									(t.prototype.notifyNext = function (e, t, n, r) {
										this.clearThrottle();
									}),
									(t.prototype.notifyComplete = function () {
										this.clearThrottle();
									}),
									t
								);
							})(a.a),
							u = n(23),
							p = n(95);
						function f(e, t) {
							return (
								void 0 === t && (t = u.a),
								l(function () {
									return Object(p.a)(e, t);
								})
							);
						}
						function d(e) {
							return function (t) {
								return t.lift(new g(e));
							};
						}
						var g = (function () {
								function e(e) {
									this.closingNotifier = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new y(e, this.closingNotifier));
									}),
									e
								);
							})(),
							y = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.buffer = []), r.add(Object(s.a)(r, n)), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.buffer.push(e);
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										var o = this.buffer;
										(this.buffer = []), this.destination.next(o);
									}),
									t
								);
							})(a.a),
							m = n(8);
						function v(e, t) {
							return (
								void 0 === t && (t = null),
								function (n) {
									return n.lift(new w(e, t));
								}
							);
						}
						var w = (function () {
								function e(e, t) {
									(this.bufferSize = e),
										(this.startBufferEvery = t),
										(this.subscriberClass = t && e !== t ? S : b);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(
											new this.subscriberClass(e, this.bufferSize, this.startBufferEvery),
										);
									}),
									e
								);
							})(),
							b = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.bufferSize = n), (r.buffer = []), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t = this.buffer;
										t.push(e),
											t.length == this.bufferSize && (this.destination.next(t), (this.buffer = []));
									}),
									(t.prototype._complete = function () {
										var t = this.buffer;
										t.length > 0 && this.destination.next(t), e.prototype._complete.call(this);
									}),
									t
								);
							})(m.a),
							S = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.bufferSize = n), (i.startBufferEvery = r), (i.buffers = []), (i.count = 0), i
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t = this.bufferSize,
											n = this.startBufferEvery,
											r = this.buffers,
											i = this.count;
										this.count++, i % n == 0 && r.push([]);
										for (var o = r.length; o--; ) {
											var a = r[o];
											a.push(e), a.length === t && (r.splice(o, 1), this.destination.next(a));
										}
									}),
									(t.prototype._complete = function () {
										for (var t = this.buffers, n = this.destination; t.length > 0; ) {
											var r = t.shift();
											r.length > 0 && n.next(r);
										}
										e.prototype._complete.call(this);
									}),
									t
								);
							})(m.a),
							_ = n(25);
						function P(e) {
							var t = arguments.length,
								n = u.a;
							Object(_.a)(arguments[arguments.length - 1]) &&
								((n = arguments[arguments.length - 1]), t--);
							var r = null;
							t >= 2 && (r = arguments[1]);
							var i = Number.POSITIVE_INFINITY;
							return (
								t >= 3 && (i = arguments[2]),
								function (t) {
									return t.lift(new x(e, r, i, n));
								}
							);
						}
						var x = (function () {
								function e(e, t, n, r) {
									(this.bufferTimeSpan = e),
										(this.bufferCreationInterval = t),
										(this.maxBufferSize = n),
										(this.scheduler = r);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(
											new T(
												e,
												this.bufferTimeSpan,
												this.bufferCreationInterval,
												this.maxBufferSize,
												this.scheduler,
											),
										);
									}),
									e
								);
							})(),
							D = (function () {
								return function () {
									this.buffer = [];
								};
							})(),
							T = (function (e) {
								function t(t, n, r, i, o) {
									var a = e.call(this, t) || this;
									(a.bufferTimeSpan = n),
										(a.bufferCreationInterval = r),
										(a.maxBufferSize = i),
										(a.scheduler = o),
										(a.contexts = []);
									var s = a.openContext();
									if (((a.timespanOnly = null == r || r < 0), a.timespanOnly)) {
										var l = {
											subscriber: a,
											context: s,
											bufferTimeSpan: n,
										};
										a.add((s.closeAction = o.schedule(O, n, l)));
									} else {
										var h = {
												subscriber: a,
												context: s,
											},
											c = {
												bufferTimeSpan: n,
												bufferCreationInterval: r,
												subscriber: a,
												scheduler: o,
											};
										a.add((s.closeAction = o.schedule(E, n, h))), a.add(o.schedule(M, r, c));
									}
									return a;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										for (var t, n = this.contexts, r = n.length, i = 0; i < r; i++) {
											var o = n[i],
												a = o.buffer;
											a.push(e), a.length == this.maxBufferSize && (t = o);
										}
										t && this.onBufferFull(t);
									}),
									(t.prototype._error = function (t) {
										(this.contexts.length = 0), e.prototype._error.call(this, t);
									}),
									(t.prototype._complete = function () {
										for (var t = this.contexts, n = this.destination; t.length > 0; ) {
											var r = t.shift();
											n.next(r.buffer);
										}
										e.prototype._complete.call(this);
									}),
									(t.prototype._unsubscribe = function () {
										this.contexts = null;
									}),
									(t.prototype.onBufferFull = function (e) {
										this.closeContext(e);
										var t = e.closeAction;
										if ((t.unsubscribe(), this.remove(t), !this.closed && this.timespanOnly)) {
											e = this.openContext();
											var n = this.bufferTimeSpan,
												r = {
													subscriber: this,
													context: e,
													bufferTimeSpan: n,
												};
											this.add((e.closeAction = this.scheduler.schedule(O, n, r)));
										}
									}),
									(t.prototype.openContext = function () {
										var e = new D();
										return this.contexts.push(e), e;
									}),
									(t.prototype.closeContext = function (e) {
										this.destination.next(e.buffer);
										var t = this.contexts;
										(t ? t.indexOf(e) : -1) >= 0 && t.splice(t.indexOf(e), 1);
									}),
									t
								);
							})(m.a);
						function O(e) {
							var t = e.subscriber,
								n = e.context;
							n && t.closeContext(n),
								t.closed ||
									((e.context = t.openContext()),
									(e.context.closeAction = this.schedule(e, e.bufferTimeSpan)));
						}
						function M(e) {
							var t = e.bufferCreationInterval,
								n = e.bufferTimeSpan,
								r = e.subscriber,
								i = e.scheduler,
								o = r.openContext();
							r.closed ||
								(r.add(
									(o.closeAction = i.schedule(E, n, {
										subscriber: r,
										context: o,
									})),
								),
								this.schedule(e, t));
						}
						function E(e) {
							var t = e.subscriber,
								n = e.context;
							t.closeContext(n);
						}
						var I = n(19);
						function C(e, t) {
							return function (n) {
								return n.lift(new k(e, t));
							};
						}
						var k = (function () {
								function e(e, t) {
									(this.openings = e), (this.closingSelector = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new F(e, this.openings, this.closingSelector));
									}),
									e
								);
							})(),
							F = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.openings = n),
										(i.closingSelector = r),
										(i.contexts = []),
										i.add(Object(s.a)(i, n)),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										for (var t = this.contexts, n = t.length, r = 0; r < n; r++)
											t[r].buffer.push(e);
									}),
									(t.prototype._error = function (t) {
										for (var n = this.contexts; n.length > 0; ) {
											var r = n.shift();
											r.subscription.unsubscribe(), (r.buffer = null), (r.subscription = null);
										}
										(this.contexts = null), e.prototype._error.call(this, t);
									}),
									(t.prototype._complete = function () {
										for (var t = this.contexts; t.length > 0; ) {
											var n = t.shift();
											this.destination.next(n.buffer),
												n.subscription.unsubscribe(),
												(n.buffer = null),
												(n.subscription = null);
										}
										(this.contexts = null), e.prototype._complete.call(this);
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										e ? this.closeBuffer(e) : this.openBuffer(t);
									}),
									(t.prototype.notifyComplete = function (e) {
										this.closeBuffer(e.context);
									}),
									(t.prototype.openBuffer = function (e) {
										try {
											var t = this.closingSelector.call(this, e);
											t && this.trySubscribe(t);
										} catch (e) {
											this._error(e);
										}
									}),
									(t.prototype.closeBuffer = function (e) {
										var t = this.contexts;
										if (t && e) {
											var n = e.buffer,
												r = e.subscription;
											this.destination.next(n),
												t.splice(t.indexOf(e), 1),
												this.remove(r),
												r.unsubscribe();
										}
									}),
									(t.prototype.trySubscribe = function (e) {
										var t = this.contexts,
											n = new I.a(),
											r = {
												buffer: [],
												subscription: n,
											};
										t.push(r);
										var i = Object(s.a)(this, e, r);
										!i || i.closed ? this.closeBuffer(r) : ((i.context = r), this.add(i), n.add(i));
									}),
									t
								);
							})(a.a);
						function j(e) {
							return function (t) {
								return t.lift(new A(e));
							};
						}
						var A = (function () {
								function e(e) {
									this.closingSelector = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new L(e, this.closingSelector));
									}),
									e
								);
							})(),
							L = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.closingSelector = n), (r.subscribing = !1), r.openBuffer(), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.buffer.push(e);
									}),
									(t.prototype._complete = function () {
										var t = this.buffer;
										t && this.destination.next(t), e.prototype._complete.call(this);
									}),
									(t.prototype._unsubscribe = function () {
										(this.buffer = null), (this.subscribing = !1);
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.openBuffer();
									}),
									(t.prototype.notifyComplete = function () {
										this.subscribing ? this.complete() : this.openBuffer();
									}),
									(t.prototype.openBuffer = function () {
										var e = this.closingSubscription;
										e && (this.remove(e), e.unsubscribe());
										var t = this.buffer;
										this.buffer && this.destination.next(t), (this.buffer = []);
										var n = Object(i.a)(this.closingSelector)();
										n === o.a
											? this.error(o.a.e)
											: ((e = new I.a()),
											  (this.closingSubscription = e),
											  this.add(e),
											  (this.subscribing = !0),
											  e.add(Object(s.a)(this, n)),
											  (this.subscribing = !1));
									}),
									t
								);
							})(a.a),
							H = n(33);
						function R(e) {
							return function (t) {
								var n = new B(e),
									r = t.lift(n);
								return (n.caught = r);
							};
						}
						var B = (function () {
								function e(e) {
									this.selector = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new W(e, this.selector, this.caught));
									}),
									e
								);
							})(),
							W = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (i.selector = n), (i.caught = r), i;
								}
								return (
									r.a(t, e),
									(t.prototype.error = function (t) {
										if (!this.isStopped) {
											var n = void 0;
											try {
												n = this.selector(t, this.caught);
											} catch (t) {
												return void e.prototype.error.call(this, t);
											}
											this._unsubscribeAndRecycle();
											var r = new H.a(this, void 0, void 0);
											this.add(r), Object(s.a)(this, n, void 0, void 0, r);
										}
									}),
									t
								);
							})(a.a),
							z = n(71);
						function N(e) {
							return function (t) {
								return t.lift(new z.a(e));
							};
						}
						var U = n(24),
							J = n(30);
						function V() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							var n = null;
							return (
								'function' == typeof e[e.length - 1] && (n = e.pop()),
								1 === e.length && Object(U.a)(e[0]) && (e = e[0].slice()),
								function (t) {
									return t.lift.call(Object(J.a)([t].concat(e)), new z.a(n));
								}
							);
						}
						var G = n(44);
						function q() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return function (t) {
								return t.lift.call(G.a.apply(void 0, [t].concat(e)));
							};
						}
						var K = n(92),
							Y = n(45);
						function Q(e, t) {
							return Object(Y.a)(e, t, 1);
						}
						function X(e, t) {
							return Q(function () {
								return e;
							}, t);
						}
						function Z(e) {
							return function (t) {
								return t.lift(new $(e, t));
							};
						}
						var $ = (function () {
								function e(e, t) {
									(this.predicate = e), (this.source = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new ee(e, this.predicate, this.source));
									}),
									e
								);
							})(),
							ee = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (i.predicate = n), (i.source = r), (i.count = 0), (i.index = 0), i;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.predicate ? this._tryPredicate(e) : this.count++;
									}),
									(t.prototype._tryPredicate = function (e) {
										var t;
										try {
											t = this.predicate(e, this.index++, this.source);
										} catch (e) {
											return void this.destination.error(e);
										}
										t && this.count++;
									}),
									(t.prototype._complete = function () {
										this.destination.next(this.count), this.destination.complete();
									}),
									t
								);
							})(m.a);
						function te(e) {
							return function (t) {
								return t.lift(new ne(e));
							};
						}
						var ne = (function () {
								function e(e) {
									this.durationSelector = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new re(e, this.durationSelector));
									}),
									e
								);
							})(),
							re = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (
										(r.durationSelector = n), (r.hasValue = !1), (r.durationSubscription = null), r
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										try {
											var t = this.durationSelector.call(this, e);
											t && this._tryNext(e, t);
										} catch (e) {
											this.destination.error(e);
										}
									}),
									(t.prototype._complete = function () {
										this.emitValue(), this.destination.complete();
									}),
									(t.prototype._tryNext = function (e, t) {
										var n = this.durationSubscription;
										(this.value = e),
											(this.hasValue = !0),
											n && (n.unsubscribe(), this.remove(n)),
											(n = Object(s.a)(this, t)) &&
												!n.closed &&
												this.add((this.durationSubscription = n));
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.emitValue();
									}),
									(t.prototype.notifyComplete = function () {
										this.emitValue();
									}),
									(t.prototype.emitValue = function () {
										if (this.hasValue) {
											var t = this.value,
												n = this.durationSubscription;
											n && ((this.durationSubscription = null), n.unsubscribe(), this.remove(n)),
												(this.value = null),
												(this.hasValue = !1),
												e.prototype._next.call(this, t);
										}
									}),
									t
								);
							})(a.a);
						function ie(e, t) {
							return (
								void 0 === t && (t = u.a),
								function (n) {
									return n.lift(new oe(e, t));
								}
							);
						}
						var oe = (function () {
								function e(e, t) {
									(this.dueTime = e), (this.scheduler = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new ae(e, this.dueTime, this.scheduler));
									}),
									e
								);
							})(),
							ae = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.dueTime = n),
										(i.scheduler = r),
										(i.debouncedSubscription = null),
										(i.lastValue = null),
										(i.hasValue = !1),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.clearDebounce(),
											(this.lastValue = e),
											(this.hasValue = !0),
											this.add(
												(this.debouncedSubscription = this.scheduler.schedule(
													se,
													this.dueTime,
													this,
												)),
											);
									}),
									(t.prototype._complete = function () {
										this.debouncedNext(), this.destination.complete();
									}),
									(t.prototype.debouncedNext = function () {
										if ((this.clearDebounce(), this.hasValue)) {
											var e = this.lastValue;
											(this.lastValue = null), (this.hasValue = !1), this.destination.next(e);
										}
									}),
									(t.prototype.clearDebounce = function () {
										var e = this.debouncedSubscription;
										null !== e &&
											(this.remove(e), e.unsubscribe(), (this.debouncedSubscription = null));
									}),
									t
								);
							})(m.a);
						function se(e) {
							e.debouncedNext();
						}
						function le(e) {
							return (
								void 0 === e && (e = null),
								function (t) {
									return t.lift(new he(e));
								}
							);
						}
						var he = (function () {
								function e(e) {
									this.defaultValue = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new ce(e, this.defaultValue));
									}),
									e
								);
							})(),
							ce = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.defaultValue = n), (r.isEmpty = !0), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										(this.isEmpty = !1), this.destination.next(e);
									}),
									(t.prototype._complete = function () {
										this.isEmpty && this.destination.next(this.defaultValue),
											this.destination.complete();
									}),
									t
								);
							})(m.a);
						function ue(e) {
							return e instanceof Date && !isNaN(+e);
						}
						var pe = n(40);
						function fe(e, t) {
							void 0 === t && (t = u.a);
							var n = ue(e) ? +e - t.now() : Math.abs(e);
							return function (e) {
								return e.lift(new de(n, t));
							};
						}
						var de = (function () {
								function e(e, t) {
									(this.delay = e), (this.scheduler = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new ge(e, this.delay, this.scheduler));
									}),
									e
								);
							})(),
							ge = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.delay = n),
										(i.scheduler = r),
										(i.queue = []),
										(i.active = !1),
										(i.errored = !1),
										i
									);
								}
								return (
									r.a(t, e),
									(t.dispatch = function (e) {
										for (
											var t = e.source, n = t.queue, r = e.scheduler, i = e.destination;
											n.length > 0 && n[0].time - r.now() <= 0;

										)
											n.shift().notification.observe(i);
										if (n.length > 0) {
											var o = Math.max(0, n[0].time - r.now());
											this.schedule(e, o);
										} else this.unsubscribe(), (t.active = !1);
									}),
									(t.prototype._schedule = function (e) {
										(this.active = !0),
											this.destination.add(
												e.schedule(t.dispatch, this.delay, {
													source: this,
													destination: this.destination,
													scheduler: e,
												}),
											);
									}),
									(t.prototype.scheduleNotification = function (e) {
										if (!0 !== this.errored) {
											var t = this.scheduler,
												n = new ye(t.now() + this.delay, e);
											this.queue.push(n), !1 === this.active && this._schedule(t);
										}
									}),
									(t.prototype._next = function (e) {
										this.scheduleNotification(pe.a.createNext(e));
									}),
									(t.prototype._error = function (e) {
										(this.errored = !0),
											(this.queue = []),
											this.destination.error(e),
											this.unsubscribe();
									}),
									(t.prototype._complete = function () {
										this.scheduleNotification(pe.a.createComplete()), this.unsubscribe();
									}),
									t
								);
							})(m.a),
							ye = (function () {
								return function (e, t) {
									(this.time = e), (this.notification = t);
								};
							})(),
							me = n(12);
						function ve(e, t) {
							return t
								? function (n) {
										return new Se(n, t).lift(new we(e));
								  }
								: function (t) {
										return t.lift(new we(e));
								  };
						}
						var we = (function () {
								function e(e) {
									this.delayDurationSelector = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new be(e, this.delayDurationSelector));
									}),
									e
								);
							})(),
							be = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (
										(r.delayDurationSelector = n),
										(r.completed = !1),
										(r.delayNotifierSubscriptions = []),
										(r.index = 0),
										r
									);
								}
								return (
									r.a(t, e),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.destination.next(e), this.removeSubscription(i), this.tryComplete();
									}),
									(t.prototype.notifyError = function (e, t) {
										this._error(e);
									}),
									(t.prototype.notifyComplete = function (e) {
										var t = this.removeSubscription(e);
										t && this.destination.next(t), this.tryComplete();
									}),
									(t.prototype._next = function (e) {
										var t = this.index++;
										try {
											var n = this.delayDurationSelector(e, t);
											n && this.tryDelay(n, e);
										} catch (e) {
											this.destination.error(e);
										}
									}),
									(t.prototype._complete = function () {
										(this.completed = !0), this.tryComplete(), this.unsubscribe();
									}),
									(t.prototype.removeSubscription = function (e) {
										e.unsubscribe();
										var t = this.delayNotifierSubscriptions.indexOf(e);
										return -1 !== t && this.delayNotifierSubscriptions.splice(t, 1), e.outerValue;
									}),
									(t.prototype.tryDelay = function (e, t) {
										var n = Object(s.a)(this, e, t);
										n &&
											!n.closed &&
											(this.destination.add(n), this.delayNotifierSubscriptions.push(n));
									}),
									(t.prototype.tryComplete = function () {
										this.completed &&
											0 === this.delayNotifierSubscriptions.length &&
											this.destination.complete();
									}),
									t
								);
							})(a.a),
							Se = (function (e) {
								function t(t, n) {
									var r = e.call(this) || this;
									return (r.source = t), (r.subscriptionDelay = n), r;
								}
								return (
									r.a(t, e),
									(t.prototype._subscribe = function (e) {
										this.subscriptionDelay.subscribe(new _e(e, this.source));
									}),
									t
								);
							})(me.a),
							_e = (function (e) {
								function t(t, n) {
									var r = e.call(this) || this;
									return (r.parent = t), (r.source = n), (r.sourceSubscribed = !1), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.subscribeToSource();
									}),
									(t.prototype._error = function (e) {
										this.unsubscribe(), this.parent.error(e);
									}),
									(t.prototype._complete = function () {
										this.unsubscribe(), this.subscribeToSource();
									}),
									(t.prototype.subscribeToSource = function () {
										this.sourceSubscribed ||
											((this.sourceSubscribed = !0),
											this.unsubscribe(),
											this.source.subscribe(this.parent));
									}),
									t
								);
							})(m.a);
						function Pe() {
							return function (e) {
								return e.lift(new xe());
							};
						}
						var xe = (function () {
								function e() {}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new De(e));
									}),
									e
								);
							})(),
							De = (function (e) {
								function t(t) {
									return e.call(this, t) || this;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										e.observe(this.destination);
									}),
									t
								);
							})(m.a);
						function Te(e, t) {
							return function (n) {
								return n.lift(new Oe(e, t));
							};
						}
						var Oe = (function () {
								function e(e, t) {
									(this.keySelector = e), (this.flushes = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Me(e, this.keySelector, this.flushes));
									}),
									e
								);
							})(),
							Me = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.keySelector = n), (i.values = new Set()), r && i.add(Object(s.a)(i, r)), i
									);
								}
								return (
									r.a(t, e),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.values.clear();
									}),
									(t.prototype.notifyError = function (e, t) {
										this._error(e);
									}),
									(t.prototype._next = function (e) {
										this.keySelector ? this._useKeySelector(e) : this._finalizeNext(e, e);
									}),
									(t.prototype._useKeySelector = function (e) {
										var t,
											n = this.destination;
										try {
											t = this.keySelector(e);
										} catch (e) {
											return void n.error(e);
										}
										this._finalizeNext(t, e);
									}),
									(t.prototype._finalizeNext = function (e, t) {
										var n = this.values;
										n.has(e) || (n.add(e), this.destination.next(t));
									}),
									t
								);
							})(a.a);
						function Ee(e, t) {
							return function (n) {
								return n.lift(new Ie(e, t));
							};
						}
						var Ie = (function () {
								function e(e, t) {
									(this.compare = e), (this.keySelector = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Ce(e, this.compare, this.keySelector));
									}),
									e
								);
							})(),
							Ce = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.keySelector = r),
										(i.hasKey = !1),
										'function' == typeof n && (i.compare = n),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype.compare = function (e, t) {
										return e === t;
									}),
									(t.prototype._next = function (e) {
										var t = e;
										if (this.keySelector && (t = Object(i.a)(this.keySelector)(e)) === o.a)
											return this.destination.error(o.a.e);
										var n = !1;
										if (this.hasKey) {
											if ((n = Object(i.a)(this.compare)(this.key, t)) === o.a)
												return this.destination.error(o.a.e);
										} else this.hasKey = !0;
										!1 === Boolean(n) && ((this.key = t), this.destination.next(e));
									}),
									t
								);
							})(m.a);
						function ke(e, t) {
							return Ee(function (n, r) {
								return t ? t(n[e], r[e]) : n[e] === r[e];
							});
						}
						var Fe = n(46);
						function je(e, t) {
							return function (n) {
								return n.lift(new Ae(e, t));
							};
						}
						var Ae = (function () {
								function e(e, t) {
									(this.predicate = e), (this.thisArg = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Le(e, this.predicate, this.thisArg));
									}),
									e
								);
							})(),
							Le = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (i.predicate = n), (i.thisArg = r), (i.count = 0), i;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t;
										try {
											t = this.predicate.call(this.thisArg, e, this.count++);
										} catch (e) {
											return void this.destination.error(e);
										}
										t && this.destination.next(e);
									}),
									t
								);
							})(m.a),
							He = n(36),
							Re = n(47);
						function Be(e, t, n) {
							return function (r) {
								return r.lift(new We(e, t, n));
							};
						}
						var We = (function () {
								function e(e, t, n) {
									(this.nextOrObserver = e), (this.error = t), (this.complete = n);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new ze(e, this.nextOrObserver, this.error, this.complete));
									}),
									e
								);
							})(),
							ze = (function (e) {
								function t(t, n, r, i) {
									var o = e.call(this, t) || this;
									return (
										(o._tapNext = He.a),
										(o._tapError = He.a),
										(o._tapComplete = He.a),
										(o._tapError = r || He.a),
										(o._tapComplete = i || He.a),
										Object(Re.a)(n)
											? ((o._context = o), (o._tapNext = n))
											: n &&
											  ((o._context = n),
											  (o._tapNext = n.next || He.a),
											  (o._tapError = n.error || He.a),
											  (o._tapComplete = n.complete || He.a)),
										o
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										try {
											this._tapNext.call(this._context, e);
										} catch (e) {
											return void this.destination.error(e);
										}
										this.destination.next(e);
									}),
									(t.prototype._error = function (e) {
										try {
											this._tapError.call(this._context, e);
										} catch (e) {
											return void this.destination.error(e);
										}
										this.destination.error(e);
									}),
									(t.prototype._complete = function () {
										try {
											this._tapComplete.call(this._context);
										} catch (e) {
											return void this.destination.error(e);
										}
										return this.destination.complete();
									}),
									t
								);
							})(m.a),
							Ne = n(51),
							Ue = function (e) {
								return (
									void 0 === e && (e = Je),
									Be({
										hasValue: !1,
										next: function () {
											this.hasValue = !0;
										},
										complete: function () {
											if (!this.hasValue) throw e();
										},
									})
								);
							};
						function Je() {
							return new Ne.a();
						}
						var Ve = n(22);
						function Ge(e) {
							return function (t) {
								return 0 === e ? Object(Ve.b)() : t.lift(new qe(e));
							};
						}
						var qe = (function () {
								function e(e) {
									if (((this.total = e), this.total < 0)) throw new Fe.a();
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Ke(e, this.total));
									}),
									e
								);
							})(),
							Ke = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.total = n), (r.count = 0), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t = this.total,
											n = ++this.count;
										n <= t &&
											(this.destination.next(e),
											n === t && (this.destination.complete(), this.unsubscribe()));
									}),
									t
								);
							})(m.a);
						function Ye(e, t) {
							if (e < 0) throw new Fe.a();
							var n = arguments.length >= 2;
							return function (r) {
								return r.pipe(
									je(function (t, n) {
										return n === e;
									}),
									Ge(1),
									n
										? le(t)
										: Ue(function () {
												return new Fe.a();
										  }),
								);
							};
						}
						var Qe = n(32),
							Xe = n(76);
						function Ze() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return function (t) {
								var n = e[e.length - 1];
								Object(_.a)(n) ? e.pop() : (n = null);
								var r = e.length;
								return 1 !== r || n
									? r > 0
										? Object(G.a)(t, Object(Qe.a)(e, n))
										: Object(G.a)(t, Object(Ve.b)(n))
									: Object(G.a)(t, Object(Xe.a)(e[0]));
							};
						}
						function $e(e, t) {
							return function (n) {
								return n.lift(new et(e, t, n));
							};
						}
						var et = (function () {
								function e(e, t, n) {
									(this.predicate = e), (this.thisArg = t), (this.source = n);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new tt(e, this.predicate, this.thisArg, this.source));
									}),
									e
								);
							})(),
							tt = (function (e) {
								function t(t, n, r, i) {
									var o = e.call(this, t) || this;
									return (
										(o.predicate = n),
										(o.thisArg = r),
										(o.source = i),
										(o.index = 0),
										(o.thisArg = r || o),
										o
									);
								}
								return (
									r.a(t, e),
									(t.prototype.notifyComplete = function (e) {
										this.destination.next(e), this.destination.complete();
									}),
									(t.prototype._next = function (e) {
										var t = !1;
										try {
											t = this.predicate.call(this.thisArg, e, this.index++, this.source);
										} catch (e) {
											return void this.destination.error(e);
										}
										t || this.notifyComplete(!1);
									}),
									(t.prototype._complete = function () {
										this.notifyComplete(!0);
									}),
									t
								);
							})(m.a);
						function nt() {
							return function (e) {
								return e.lift(new rt());
							};
						}
						var rt = (function () {
								function e() {}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new it(e));
									}),
									e
								);
							})(),
							it = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.hasCompleted = !1), (n.hasSubscription = !1), n;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.hasSubscription ||
											((this.hasSubscription = !0), this.add(Object(s.a)(this, e)));
									}),
									(t.prototype._complete = function () {
										(this.hasCompleted = !0), this.hasSubscription || this.destination.complete();
									}),
									(t.prototype.notifyComplete = function (e) {
										this.remove(e),
											(this.hasSubscription = !1),
											this.hasCompleted && this.destination.complete();
									}),
									t
								);
							})(a.a),
							ot = n(26);
						function at(e, t) {
							return t
								? function (n) {
										return n.pipe(
											at(function (n, r) {
												return Object(J.a)(e(n, r)).pipe(
													Object(ot.a)(function (e, i) {
														return t(n, e, r, i);
													}),
												);
											}),
										);
								  }
								: function (t) {
										return t.lift(new st(e));
								  };
						}
						var st = (function () {
								function e(e) {
									this.project = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new lt(e, this.project));
									}),
									e
								);
							})(),
							lt = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (
										(r.project = n),
										(r.hasSubscription = !1),
										(r.hasCompleted = !1),
										(r.index = 0),
										r
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.hasSubscription || this.tryNext(e);
									}),
									(t.prototype.tryNext = function (e) {
										var t,
											n = this.index++;
										try {
											t = this.project(e, n);
										} catch (e) {
											return void this.destination.error(e);
										}
										(this.hasSubscription = !0), this._innerSub(t, e, n);
									}),
									(t.prototype._innerSub = function (e, t, n) {
										var r = new H.a(this, void 0, void 0);
										this.destination.add(r), Object(s.a)(this, e, t, n, r);
									}),
									(t.prototype._complete = function () {
										(this.hasCompleted = !0),
											this.hasSubscription || this.destination.complete(),
											this.unsubscribe();
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.destination.next(t);
									}),
									(t.prototype.notifyError = function (e) {
										this.destination.error(e);
									}),
									(t.prototype.notifyComplete = function (e) {
										this.destination.remove(e),
											(this.hasSubscription = !1),
											this.hasCompleted && this.destination.complete();
									}),
									t
								);
							})(a.a);
						function ht(e, t, n) {
							return (
								void 0 === t && (t = Number.POSITIVE_INFINITY),
								void 0 === n && (n = void 0),
								(t = (t || 0) < 1 ? Number.POSITIVE_INFINITY : t),
								function (r) {
									return r.lift(new ct(e, t, n));
								}
							);
						}
						var ct = (function () {
								function e(e, t, n) {
									(this.project = e), (this.concurrent = t), (this.scheduler = n);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new ut(e, this.project, this.concurrent, this.scheduler));
									}),
									e
								);
							})(),
							ut = (function (e) {
								function t(t, n, r, i) {
									var o = e.call(this, t) || this;
									return (
										(o.project = n),
										(o.concurrent = r),
										(o.scheduler = i),
										(o.index = 0),
										(o.active = 0),
										(o.hasCompleted = !1),
										r < Number.POSITIVE_INFINITY && (o.buffer = []),
										o
									);
								}
								return (
									r.a(t, e),
									(t.dispatch = function (e) {
										var t = e.subscriber,
											n = e.result,
											r = e.value,
											i = e.index;
										t.subscribeToProjection(n, r, i);
									}),
									(t.prototype._next = function (e) {
										var n = this.destination;
										if (n.closed) this._complete();
										else {
											var r = this.index++;
											if (this.active < this.concurrent) {
												n.next(e);
												var a = Object(i.a)(this.project)(e, r);
												if (a === o.a) n.error(o.a.e);
												else if (this.scheduler) {
													var s = {
														subscriber: this,
														result: a,
														value: e,
														index: r,
													};
													this.destination.add(this.scheduler.schedule(t.dispatch, 0, s));
												} else this.subscribeToProjection(a, e, r);
											} else this.buffer.push(e);
										}
									}),
									(t.prototype.subscribeToProjection = function (e, t, n) {
										this.active++, this.destination.add(Object(s.a)(this, e, t, n));
									}),
									(t.prototype._complete = function () {
										(this.hasCompleted = !0),
											this.hasCompleted && 0 === this.active && this.destination.complete(),
											this.unsubscribe();
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this._next(t);
									}),
									(t.prototype.notifyComplete = function (e) {
										var t = this.buffer;
										this.destination.remove(e),
											this.active--,
											t && t.length > 0 && this._next(t.shift()),
											this.hasCompleted && 0 === this.active && this.destination.complete();
									}),
									t
								);
							})(a.a);
						function pt(e) {
							return function (t) {
								return t.lift(new ft(e));
							};
						}
						var ft = (function () {
								function e(e) {
									this.callback = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new dt(e, this.callback));
									}),
									e
								);
							})(),
							dt = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return r.add(new I.a(n)), r;
								}
								return r.a(t, e), t;
							})(m.a);
						function gt(e, t) {
							if ('function' != typeof e) throw new TypeError('predicate is not a function');
							return function (n) {
								return n.lift(new yt(e, n, !1, t));
							};
						}
						var yt = (function () {
								function e(e, t, n, r) {
									(this.predicate = e),
										(this.source = t),
										(this.yieldIndex = n),
										(this.thisArg = r);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(
											new mt(e, this.predicate, this.source, this.yieldIndex, this.thisArg),
										);
									}),
									e
								);
							})(),
							mt = (function (e) {
								function t(t, n, r, i, o) {
									var a = e.call(this, t) || this;
									return (
										(a.predicate = n),
										(a.source = r),
										(a.yieldIndex = i),
										(a.thisArg = o),
										(a.index = 0),
										a
									);
								}
								return (
									r.a(t, e),
									(t.prototype.notifyComplete = function (e) {
										var t = this.destination;
										t.next(e), t.complete(), this.unsubscribe();
									}),
									(t.prototype._next = function (e) {
										var t = this.predicate,
											n = this.thisArg,
											r = this.index++;
										try {
											t.call(n || this, e, r, this.source) &&
												this.notifyComplete(this.yieldIndex ? r : e);
										} catch (e) {
											this.destination.error(e);
										}
									}),
									(t.prototype._complete = function () {
										this.notifyComplete(this.yieldIndex ? -1 : void 0);
									}),
									t
								);
							})(m.a);
						function vt(e, t) {
							return function (n) {
								return n.lift(new yt(e, n, !0, t));
							};
						}
						var wt = n(39);
						function bt(e, t) {
							var n = arguments.length >= 2;
							return function (r) {
								return r.pipe(
									e
										? je(function (t, n) {
												return e(t, n, r);
										  })
										: wt.a,
									Ge(1),
									n
										? le(t)
										: Ue(function () {
												return new Ne.a();
										  }),
								);
							};
						}
						var St = n(85);
						function _t() {
							return function (e) {
								return e.lift(new Pt());
							};
						}
						var Pt = (function () {
								function e() {}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new xt(e));
									}),
									e
								);
							})(),
							xt = (function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return r.a(t, e), (t.prototype._next = function (e) {}), t;
							})(m.a);
						function Dt() {
							return function (e) {
								return e.lift(new Tt());
							};
						}
						var Tt = (function () {
								function e() {}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Ot(e));
									}),
									e
								);
							})(),
							Ot = (function (e) {
								function t(t) {
									return e.call(this, t) || this;
								}
								return (
									r.a(t, e),
									(t.prototype.notifyComplete = function (e) {
										var t = this.destination;
										t.next(e), t.complete();
									}),
									(t.prototype._next = function (e) {
										this.notifyComplete(!1);
									}),
									(t.prototype._complete = function () {
										this.notifyComplete(!0);
									}),
									t
								);
							})(m.a);
						function Mt(e) {
							return function (t) {
								return 0 === e ? Object(Ve.b)() : t.lift(new Et(e));
							};
						}
						var Et = (function () {
								function e(e) {
									if (((this.total = e), this.total < 0)) throw new Fe.a();
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new It(e, this.total));
									}),
									e
								);
							})(),
							It = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.total = n), (r.ring = new Array()), (r.count = 0), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t = this.ring,
											n = this.total,
											r = this.count++;
										t.length < n ? t.push(e) : (t[r % n] = e);
									}),
									(t.prototype._complete = function () {
										var e = this.destination,
											t = this.count;
										if (t > 0)
											for (
												var n = this.count >= this.total ? this.total : this.count,
													r = this.ring,
													i = 0;
												i < n;
												i++
											) {
												var o = t++ % n;
												e.next(r[o]);
											}
										e.complete();
									}),
									t
								);
							})(m.a);
						function Ct(e, t) {
							var n = arguments.length >= 2;
							return function (r) {
								return r.pipe(
									e
										? je(function (t, n) {
												return e(t, n, r);
										  })
										: wt.a,
									Mt(1),
									n
										? le(t)
										: Ue(function () {
												return new Ne.a();
										  }),
								);
							};
						}
						function kt(e) {
							return function (t) {
								return t.lift(new Ft(e));
							};
						}
						var Ft = (function () {
								function e(e) {
									this.value = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new jt(e, this.value));
									}),
									e
								);
							})(),
							jt = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.value = n), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.destination.next(this.value);
									}),
									t
								);
							})(m.a);
						function At() {
							return function (e) {
								return e.lift(new Lt());
							};
						}
						var Lt = (function () {
								function e() {}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Ht(e));
									}),
									e
								);
							})(),
							Ht = (function (e) {
								function t(t) {
									return e.call(this, t) || this;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.destination.next(pe.a.createNext(e));
									}),
									(t.prototype._error = function (e) {
										var t = this.destination;
										t.next(pe.a.createError(e)), t.complete();
									}),
									(t.prototype._complete = function () {
										var e = this.destination;
										e.next(pe.a.createComplete()), e.complete();
									}),
									t
								);
							})(m.a);
						function Rt(e, t) {
							var n = !1;
							return (
								arguments.length >= 2 && (n = !0),
								function (r) {
									return r.lift(new Bt(e, t, n));
								}
							);
						}
						var Bt = (function () {
								function e(e, t, n) {
									void 0 === n && (n = !1),
										(this.accumulator = e),
										(this.seed = t),
										(this.hasSeed = n);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Wt(e, this.accumulator, this.seed, this.hasSeed));
									}),
									e
								);
							})(),
							Wt = (function (e) {
								function t(t, n, r, i) {
									var o = e.call(this, t) || this;
									return (o.accumulator = n), (o._seed = r), (o.hasSeed = i), (o.index = 0), o;
								}
								return (
									r.a(t, e),
									Object.defineProperty(t.prototype, 'seed', {
										get: function () {
											return this._seed;
										},
										set: function (e) {
											(this.hasSeed = !0), (this._seed = e);
										},
										enumerable: !0,
										configurable: !0,
									}),
									(t.prototype._next = function (e) {
										if (this.hasSeed) return this._tryNext(e);
										(this.seed = e), this.destination.next(e);
									}),
									(t.prototype._tryNext = function (e) {
										var t,
											n = this.index++;
										try {
											t = this.accumulator(this.seed, e, n);
										} catch (e) {
											this.destination.error(e);
										}
										(this.seed = t), this.destination.next(t);
									}),
									t
								);
							})(m.a),
							zt = n(60);
						function Nt(e, t) {
							return arguments.length >= 2
								? function (n) {
										return Object(zt.a)(Rt(e, t), Mt(1), le(t))(n);
								  }
								: function (t) {
										return Object(zt.a)(
											Rt(function (t, n, r) {
												return e(t, n, r + 1);
											}),
											Mt(1),
										)(t);
								  };
						}
						function Ut(e) {
							return Nt(
								'function' == typeof e
									? function (t, n) {
											return e(t, n) > 0 ? t : n;
									  }
									: function (e, t) {
											return e > t ? e : t;
									  },
							);
						}
						var Jt = n(93);
						function Vt() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return function (t) {
								return t.lift.call(Jt.a.apply(void 0, [t].concat(e)));
							};
						}
						var Gt = n(72);
						function qt(e, t, n) {
							return (
								void 0 === n && (n = Number.POSITIVE_INFINITY),
								'function' == typeof t
									? Object(Y.a)(
											function () {
												return e;
											},
											t,
											n,
									  )
									: ('number' == typeof t && (n = t),
									  Object(Y.a)(function () {
											return e;
									  }, n))
							);
						}
						function Kt(e, t, n) {
							return (
								void 0 === n && (n = Number.POSITIVE_INFINITY),
								function (r) {
									return r.lift(new Yt(e, t, n));
								}
							);
						}
						var Yt = (function () {
								function e(e, t, n) {
									(this.accumulator = e), (this.seed = t), (this.concurrent = n);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Qt(e, this.accumulator, this.seed, this.concurrent));
									}),
									e
								);
							})(),
							Qt = (function (e) {
								function t(t, n, r, i) {
									var o = e.call(this, t) || this;
									return (
										(o.accumulator = n),
										(o.acc = r),
										(o.concurrent = i),
										(o.hasValue = !1),
										(o.hasCompleted = !1),
										(o.buffer = []),
										(o.active = 0),
										(o.index = 0),
										o
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										if (this.active < this.concurrent) {
											var t = this.index++,
												n = Object(i.a)(this.accumulator)(this.acc, e),
												r = this.destination;
											n === o.a ? r.error(o.a.e) : (this.active++, this._innerSub(n, e, t));
										} else this.buffer.push(e);
									}),
									(t.prototype._innerSub = function (e, t, n) {
										var r = new H.a(this, void 0, void 0);
										this.destination.add(r), Object(s.a)(this, e, t, n, r);
									}),
									(t.prototype._complete = function () {
										(this.hasCompleted = !0),
											0 === this.active &&
												0 === this.buffer.length &&
												(!1 === this.hasValue && this.destination.next(this.acc),
												this.destination.complete()),
											this.unsubscribe();
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										var o = this.destination;
										(this.acc = t), (this.hasValue = !0), o.next(t);
									}),
									(t.prototype.notifyComplete = function (e) {
										var t = this.buffer;
										this.destination.remove(e),
											this.active--,
											t.length > 0
												? this._next(t.shift())
												: 0 === this.active &&
												  this.hasCompleted &&
												  (!1 === this.hasValue && this.destination.next(this.acc),
												  this.destination.complete());
									}),
									t
								);
							})(a.a);
						function Xt(e) {
							return Nt(
								'function' == typeof e
									? function (t, n) {
											return e(t, n) < 0 ? t : n;
									  }
									: function (e, t) {
											return e < t ? e : t;
									  },
							);
						}
						var Zt = n(88);
						function $t(e, t) {
							return function (n) {
								var r;
								if (
									((r =
										'function' == typeof e
											? e
											: function () {
													return e;
											  }),
									'function' == typeof t)
								)
									return n.lift(new en(r, t));
								var i = Object.create(n, Zt.b);
								return (i.source = n), (i.subjectFactory = r), i;
							};
						}
						var en = (function () {
								function e(e, t) {
									(this.subjectFactory = e), (this.selector = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										var n = this.selector,
											r = this.subjectFactory(),
											i = n(r).subscribe(e);
										return i.add(t.subscribe(r)), i;
									}),
									e
								);
							})(),
							tn = n(90);
						function nn() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return (
								1 === e.length && Object(U.a)(e[0]) && (e = e[0]),
								function (t) {
									return t.lift(new rn(e));
								}
							);
						}
						var rn = (function () {
								function e(e) {
									this.nextSources = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new on(e, this.nextSources));
									}),
									e
								);
							})(),
							on = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.destination = t), (r.nextSources = n), r;
								}
								return (
									r.a(t, e),
									(t.prototype.notifyError = function (e, t) {
										this.subscribeToNextSource();
									}),
									(t.prototype.notifyComplete = function (e) {
										this.subscribeToNextSource();
									}),
									(t.prototype._error = function (e) {
										this.subscribeToNextSource(), this.unsubscribe();
									}),
									(t.prototype._complete = function () {
										this.subscribeToNextSource(), this.unsubscribe();
									}),
									(t.prototype.subscribeToNextSource = function () {
										var e = this.nextSources.shift();
										if (e) {
											var t = new H.a(this, void 0, void 0);
											this.destination.add(t), Object(s.a)(this, e, void 0, void 0, t);
										} else this.destination.complete();
									}),
									t
								);
							})(a.a);
						function an() {
							return function (e) {
								return e.lift(new sn());
							};
						}
						var sn = (function () {
								function e() {}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new ln(e));
									}),
									e
								);
							})(),
							ln = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.hasPrev = !1), n;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.hasPrev ? this.destination.next([this.prev, e]) : (this.hasPrev = !0),
											(this.prev = e);
									}),
									t
								);
							})(m.a);
						function hn(e, t) {
							function n() {
								return !n.pred.apply(n.thisArg, arguments);
							}
							return (n.pred = e), (n.thisArg = t), n;
						}
						function cn(e, t) {
							return function (n) {
								return [je(e, t)(n), je(hn(e, t))(n)];
							};
						}
						function un() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							var n = e.length;
							if (0 === n) throw new Error('list of properties cannot be empty.');
							return function (t) {
								return Object(ot.a)(pn(e, n))(t);
							};
						}
						function pn(e, t) {
							return function (n) {
								for (var r = n, i = 0; i < t; i++) {
									var o = r[e[i]];
									if (void 0 === o) return;
									r = o;
								}
								return r;
							};
						}
						var fn = n(21);
						function dn(e) {
							return e
								? $t(function () {
										return new fn.a();
								  }, e)
								: $t(new fn.a());
						}
						var gn = n(89);
						function yn(e) {
							return function (t) {
								return $t(new gn.a(e))(t);
							};
						}
						var mn = n(53);
						function vn() {
							return function (e) {
								return $t(new mn.a())(e);
							};
						}
						var wn = n(68);
						function bn(e, t, n, r) {
							n && 'function' != typeof n && (r = n);
							var i = 'function' == typeof n ? n : void 0,
								o = new wn.a(e, t, r);
							return function (e) {
								return $t(function () {
									return o;
								}, i)(e);
							};
						}
						var Sn = n(94);
						function _n() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return function (t) {
								return (
									1 === e.length && Object(U.a)(e[0]) && (e = e[0]),
									t.lift.call(Sn.a.apply(void 0, [t].concat(e)))
								);
							};
						}
						function Pn(e) {
							return (
								void 0 === e && (e = -1),
								function (t) {
									return 0 === e
										? Object(Ve.b)()
										: e < 0
										? t.lift(new xn(-1, t))
										: t.lift(new xn(e - 1, t));
								}
							);
						}
						var xn = (function () {
								function e(e, t) {
									(this.count = e), (this.source = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Dn(e, this.count, this.source));
									}),
									e
								);
							})(),
							Dn = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (i.count = n), (i.source = r), i;
								}
								return (
									r.a(t, e),
									(t.prototype.complete = function () {
										if (!this.isStopped) {
											var t = this.source,
												n = this.count;
											if (0 === n) return e.prototype.complete.call(this);
											n > -1 && (this.count = n - 1), t.subscribe(this._unsubscribeAndRecycle());
										}
									}),
									t
								);
							})(m.a);
						function Tn(e) {
							return function (t) {
								return t.lift(new On(e));
							};
						}
						var On = (function () {
								function e(e) {
									this.notifier = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Mn(e, this.notifier, t));
									}),
									e
								);
							})(),
							Mn = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (i.notifier = n), (i.source = r), (i.sourceIsBeingSubscribedTo = !0), i;
								}
								return (
									r.a(t, e),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										(this.sourceIsBeingSubscribedTo = !0), this.source.subscribe(this);
									}),
									(t.prototype.notifyComplete = function (t) {
										if (!1 === this.sourceIsBeingSubscribedTo)
											return e.prototype.complete.call(this);
									}),
									(t.prototype.complete = function () {
										if (((this.sourceIsBeingSubscribedTo = !1), !this.isStopped)) {
											if (
												(this.retries || this.subscribeToRetries(),
												!this.retriesSubscription || this.retriesSubscription.closed)
											)
												return e.prototype.complete.call(this);
											this._unsubscribeAndRecycle(), this.notifications.next();
										}
									}),
									(t.prototype._unsubscribe = function () {
										var e = this.notifications,
											t = this.retriesSubscription;
										e && (e.unsubscribe(), (this.notifications = null)),
											t && (t.unsubscribe(), (this.retriesSubscription = null)),
											(this.retries = null);
									}),
									(t.prototype._unsubscribeAndRecycle = function () {
										var t = this._unsubscribe;
										return (
											(this._unsubscribe = null),
											e.prototype._unsubscribeAndRecycle.call(this),
											(this._unsubscribe = t),
											this
										);
									}),
									(t.prototype.subscribeToRetries = function () {
										this.notifications = new fn.a();
										var t = Object(i.a)(this.notifier)(this.notifications);
										if (t === o.a) return e.prototype.complete.call(this);
										(this.retries = t), (this.retriesSubscription = Object(s.a)(this, t));
									}),
									t
								);
							})(a.a);
						function En(e) {
							return (
								void 0 === e && (e = -1),
								function (t) {
									return t.lift(new In(e, t));
								}
							);
						}
						var In = (function () {
								function e(e, t) {
									(this.count = e), (this.source = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Cn(e, this.count, this.source));
									}),
									e
								);
							})(),
							Cn = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (i.count = n), (i.source = r), i;
								}
								return (
									r.a(t, e),
									(t.prototype.error = function (t) {
										if (!this.isStopped) {
											var n = this.source,
												r = this.count;
											if (0 === r) return e.prototype.error.call(this, t);
											r > -1 && (this.count = r - 1), n.subscribe(this._unsubscribeAndRecycle());
										}
									}),
									t
								);
							})(m.a);
						function kn(e) {
							return function (t) {
								return t.lift(new Fn(e, t));
							};
						}
						var Fn = (function () {
								function e(e, t) {
									(this.notifier = e), (this.source = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new jn(e, this.notifier, this.source));
									}),
									e
								);
							})(),
							jn = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (i.notifier = n), (i.source = r), i;
								}
								return (
									r.a(t, e),
									(t.prototype.error = function (t) {
										if (!this.isStopped) {
											var n = this.errors,
												r = this.retries,
												a = this.retriesSubscription;
											if (r) (this.errors = null), (this.retriesSubscription = null);
											else {
												if (((n = new fn.a()), (r = Object(i.a)(this.notifier)(n)) === o.a))
													return e.prototype.error.call(this, o.a.e);
												a = Object(s.a)(this, r);
											}
											this._unsubscribeAndRecycle(),
												(this.errors = n),
												(this.retries = r),
												(this.retriesSubscription = a),
												n.next(t);
										}
									}),
									(t.prototype._unsubscribe = function () {
										var e = this.errors,
											t = this.retriesSubscription;
										e && (e.unsubscribe(), (this.errors = null)),
											t && (t.unsubscribe(), (this.retriesSubscription = null)),
											(this.retries = null);
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										var o = this._unsubscribe;
										(this._unsubscribe = null),
											this._unsubscribeAndRecycle(),
											(this._unsubscribe = o),
											this.source.subscribe(this);
									}),
									t
								);
							})(a.a),
							An = n(67);
						function Ln(e) {
							return function (t) {
								return t.lift(new Hn(e));
							};
						}
						var Hn = (function () {
								function e(e) {
									this.notifier = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										var n = new Rn(e),
											r = t.subscribe(n);
										return r.add(Object(s.a)(n, this.notifier)), r;
									}),
									e
								);
							})(),
							Rn = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (t.hasValue = !1), t;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										(this.value = e), (this.hasValue = !0);
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.emitValue();
									}),
									(t.prototype.notifyComplete = function () {
										this.emitValue();
									}),
									(t.prototype.emitValue = function () {
										this.hasValue && ((this.hasValue = !1), this.destination.next(this.value));
									}),
									t
								);
							})(a.a);
						function Bn(e, t) {
							return (
								void 0 === t && (t = u.a),
								function (n) {
									return n.lift(new Wn(e, t));
								}
							);
						}
						var Wn = (function () {
								function e(e, t) {
									(this.period = e), (this.scheduler = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new zn(e, this.period, this.scheduler));
									}),
									e
								);
							})(),
							zn = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.period = n),
										(i.scheduler = r),
										(i.hasValue = !1),
										i.add(
											r.schedule(Nn, n, {
												subscriber: i,
												period: n,
											}),
										),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										(this.lastValue = e), (this.hasValue = !0);
									}),
									(t.prototype.notifyNext = function () {
										this.hasValue && ((this.hasValue = !1), this.destination.next(this.lastValue));
									}),
									t
								);
							})(m.a);
						function Nn(e) {
							var t = e.subscriber,
								n = e.period;
							t.notifyNext(), this.schedule(e, n);
						}
						function Un(e, t) {
							return function (n) {
								return n.lift(new Jn(e, t));
							};
						}
						var Jn = (function () {
								function e(e, t) {
									(this.compareTo = e), (this.comparor = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Vn(e, this.compareTo, this.comparor));
									}),
									e
								);
							})(),
							Vn = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.compareTo = n),
										(i.comparor = r),
										(i._a = []),
										(i._b = []),
										(i._oneComplete = !1),
										i.destination.add(n.subscribe(new Gn(t, i))),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this._oneComplete && 0 === this._b.length
											? this.emit(!1)
											: (this._a.push(e), this.checkValues());
									}),
									(t.prototype._complete = function () {
										this._oneComplete
											? this.emit(0 === this._a.length && 0 === this._b.length)
											: (this._oneComplete = !0),
											this.unsubscribe();
									}),
									(t.prototype.checkValues = function () {
										for (
											var e = this._a, t = this._b, n = this.comparor;
											e.length > 0 && t.length > 0;

										) {
											var r = e.shift(),
												a = t.shift(),
												s = !1;
											n
												? (s = Object(i.a)(n)(r, a)) === o.a && this.destination.error(o.a.e)
												: (s = r === a),
												s || this.emit(!1);
										}
									}),
									(t.prototype.emit = function (e) {
										var t = this.destination;
										t.next(e), t.complete();
									}),
									(t.prototype.nextB = function (e) {
										this._oneComplete && 0 === this._a.length
											? this.emit(!1)
											: (this._b.push(e), this.checkValues());
									}),
									(t.prototype.completeB = function () {
										this._oneComplete
											? this.emit(0 === this._a.length && 0 === this._b.length)
											: (this._oneComplete = !0);
									}),
									t
								);
							})(m.a),
							Gn = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.parent = n), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.parent.nextB(e);
									}),
									(t.prototype._error = function (e) {
										this.parent.error(e), this.unsubscribe();
									}),
									(t.prototype._complete = function () {
										this.parent.completeB(), this.unsubscribe();
									}),
									t
								);
							})(m.a);
						function qn() {
							return new fn.a();
						}
						function Kn() {
							return function (e) {
								return Object(An.a)()($t(qn)(e));
							};
						}
						function Yn(e, t, n) {
							return (
								void 0 === e && (e = Number.POSITIVE_INFINITY),
								void 0 === t && (t = Number.POSITIVE_INFINITY),
								function (r) {
									return r.lift(
										(function (e, t, n) {
											var r,
												i,
												o = 0,
												a = !1,
												s = !1;
											return function (l) {
												o++,
													(r && !a) ||
														((a = !1),
														(r = new wn.a(e, t, n)),
														(i = l.subscribe({
															next: function (e) {
																r.next(e);
															},
															error: function (e) {
																(a = !0), r.error(e);
															},
															complete: function () {
																(s = !0), r.complete();
															},
														})));
												var h = r.subscribe(this);
												return function () {
													o--, h.unsubscribe(), i && 0 === o && s && i.unsubscribe();
												};
											};
										})(e, t, n),
									);
								}
							);
						}
						function Qn(e) {
							return function (t) {
								return t.lift(new Xn(e, t));
							};
						}
						var Xn = (function () {
								function e(e, t) {
									(this.predicate = e), (this.source = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Zn(e, this.predicate, this.source));
									}),
									e
								);
							})(),
							Zn = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (i.predicate = n), (i.source = r), (i.seenValue = !1), (i.index = 0), i;
								}
								return (
									r.a(t, e),
									(t.prototype.applySingleValue = function (e) {
										this.seenValue
											? this.destination.error('Sequence contains more than one element')
											: ((this.seenValue = !0), (this.singleValue = e));
									}),
									(t.prototype._next = function (e) {
										var t = this.index++;
										this.predicate ? this.tryNext(e, t) : this.applySingleValue(e);
									}),
									(t.prototype.tryNext = function (e, t) {
										try {
											this.predicate(e, t, this.source) && this.applySingleValue(e);
										} catch (e) {
											this.destination.error(e);
										}
									}),
									(t.prototype._complete = function () {
										var e = this.destination;
										this.index > 0
											? (e.next(this.seenValue ? this.singleValue : void 0), e.complete())
											: e.error(new Ne.a());
									}),
									t
								);
							})(m.a);
						function $n(e) {
							return function (t) {
								return t.lift(new er(e));
							};
						}
						var er = (function () {
								function e(e) {
									this.total = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new tr(e, this.total));
									}),
									e
								);
							})(),
							tr = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.total = n), (r.count = 0), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										++this.count > this.total && this.destination.next(e);
									}),
									t
								);
							})(m.a);
						function nr(e) {
							return function (t) {
								return t.lift(new rr(e));
							};
						}
						var rr = (function () {
								function e(e) {
									if (((this._skipCount = e), this._skipCount < 0)) throw new Fe.a();
								}
								return (
									(e.prototype.call = function (e, t) {
										return 0 === this._skipCount
											? t.subscribe(new m.a(e))
											: t.subscribe(new ir(e, this._skipCount));
									}),
									e
								);
							})(),
							ir = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r._skipCount = n), (r._count = 0), (r._ring = new Array(n)), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t = this._skipCount,
											n = this._count++;
										if (n < t) this._ring[n] = e;
										else {
											var r = n % t,
												i = this._ring,
												o = i[r];
											(i[r] = e), this.destination.next(o);
										}
									}),
									t
								);
							})(m.a);
						function or(e) {
							return function (t) {
								return t.lift(new ar(e));
							};
						}
						var ar = (function () {
								function e(e) {
									this.notifier = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new sr(e, this.notifier));
									}),
									e
								);
							})(),
							sr = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									r.hasValue = !1;
									var i = new H.a(r, void 0, void 0);
									return (
										r.add(i), (r.innerSubscription = i), Object(s.a)(r, n, void 0, void 0, i), r
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (t) {
										this.hasValue && e.prototype._next.call(this, t);
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										(this.hasValue = !0),
											this.innerSubscription && this.innerSubscription.unsubscribe();
									}),
									(t.prototype.notifyComplete = function () {}),
									t
								);
							})(a.a);
						function lr(e) {
							return function (t) {
								return t.lift(new hr(e));
							};
						}
						var hr = (function () {
								function e(e) {
									this.predicate = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new cr(e, this.predicate));
									}),
									e
								);
							})(),
							cr = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.predicate = n), (r.skipping = !0), (r.index = 0), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t = this.destination;
										this.skipping && this.tryCallPredicate(e), this.skipping || t.next(e);
									}),
									(t.prototype.tryCallPredicate = function (e) {
										try {
											var t = this.predicate(e, this.index++);
											this.skipping = Boolean(t);
										} catch (e) {
											this.destination.error(e);
										}
									}),
									t
								);
							})(m.a);
						function ur() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return function (t) {
								var n = e[e.length - 1];
								Object(_.a)(n) ? e.pop() : (n = null);
								var r = e.length;
								return 1 !== r || n
									? r > 0
										? Object(G.a)(Object(Qe.a)(e, n), t)
										: Object(G.a)(Object(Ve.b)(n), t)
									: Object(G.a)(Object(Xe.a)(e[0]), t);
							};
						}
						var pr = n(78),
							fr = n(55),
							dr = (function (e) {
								function t(t, n, r) {
									void 0 === n && (n = 0), void 0 === r && (r = pr.a);
									var i = e.call(this) || this;
									return (
										(i.source = t),
										(i.delayTime = n),
										(i.scheduler = r),
										(!Object(fr.a)(n) || n < 0) && (i.delayTime = 0),
										(r && 'function' == typeof r.schedule) || (i.scheduler = pr.a),
										i
									);
								}
								return (
									r.a(t, e),
									(t.create = function (e, n, r) {
										return void 0 === n && (n = 0), void 0 === r && (r = pr.a), new t(e, n, r);
									}),
									(t.dispatch = function (e) {
										var t = e.source,
											n = e.subscriber;
										return this.add(t.subscribe(n));
									}),
									(t.prototype._subscribe = function (e) {
										var n = this.delayTime,
											r = this.source;
										return this.scheduler.schedule(t.dispatch, n, {
											source: r,
											subscriber: e,
										});
									}),
									t
								);
							})(me.a);
						function gr(e, t) {
							return (
								void 0 === t && (t = 0),
								function (n) {
									return n.lift(new yr(e, t));
								}
							);
						}
						var yr = (function () {
							function e(e, t) {
								(this.scheduler = e), (this.delay = t);
							}
							return (
								(e.prototype.call = function (e, t) {
									return new dr(t, this.delay, this.scheduler).subscribe(e);
								}),
								e
							);
						})();
						function mr(e, t) {
							return 'function' == typeof t
								? function (n) {
										return n.pipe(
											mr(function (n, r) {
												return Object(J.a)(e(n, r)).pipe(
													Object(ot.a)(function (e, i) {
														return t(n, e, r, i);
													}),
												);
											}),
										);
								  }
								: function (t) {
										return t.lift(new vr(e));
								  };
						}
						var vr = (function () {
								function e(e) {
									this.project = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new wr(e, this.project));
									}),
									e
								);
							})(),
							wr = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.project = n), (r.index = 0), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t,
											n = this.index++;
										try {
											t = this.project(e, n);
										} catch (e) {
											return void this.destination.error(e);
										}
										this._innerSub(t, e, n);
									}),
									(t.prototype._innerSub = function (e, t, n) {
										var r = this.innerSubscription;
										r && r.unsubscribe();
										var i = new H.a(this, void 0, void 0);
										this.destination.add(i),
											(this.innerSubscription = Object(s.a)(this, e, t, n, i));
									}),
									(t.prototype._complete = function () {
										var t = this.innerSubscription;
										(t && !t.closed) || e.prototype._complete.call(this), this.unsubscribe();
									}),
									(t.prototype._unsubscribe = function () {
										this.innerSubscription = null;
									}),
									(t.prototype.notifyComplete = function (t) {
										this.destination.remove(t),
											(this.innerSubscription = null),
											this.isStopped && e.prototype._complete.call(this);
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.destination.next(t);
									}),
									t
								);
							})(a.a);
						function br() {
							return mr(wt.a);
						}
						function Sr(e, t) {
							return t
								? mr(function () {
										return e;
								  }, t)
								: mr(function () {
										return e;
								  });
						}
						function _r(e) {
							return function (t) {
								return t.lift(new Pr(e));
							};
						}
						var Pr = (function () {
								function e(e) {
									this.notifier = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										var n = new xr(e),
											r = Object(s.a)(n, this.notifier);
										return r && !n.seenValue ? (n.add(r), t.subscribe(n)) : n;
									}),
									e
								);
							})(),
							xr = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.seenValue = !1), n;
								}
								return (
									r.a(t, e),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										(this.seenValue = !0), this.complete();
									}),
									(t.prototype.notifyComplete = function () {}),
									t
								);
							})(a.a);
						function Dr(e) {
							return function (t) {
								return t.lift(new Tr(e));
							};
						}
						var Tr = (function () {
								function e(e) {
									this.predicate = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new Or(e, this.predicate));
									}),
									e
								);
							})(),
							Or = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.predicate = n), (r.index = 0), r;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t,
											n = this.destination;
										try {
											t = this.predicate(e, this.index++);
										} catch (e) {
											return void n.error(e);
										}
										this.nextOrComplete(e, t);
									}),
									(t.prototype.nextOrComplete = function (e, t) {
										var n = this.destination;
										Boolean(t) ? n.next(e) : n.complete();
									}),
									t
								);
							})(m.a),
							Mr = {
								leading: !0,
								trailing: !1,
							};
						function Er(e, t) {
							return (
								void 0 === t && (t = Mr),
								function (n) {
									return n.lift(new Ir(e, t.leading, t.trailing));
								}
							);
						}
						var Ir = (function () {
								function e(e, t, n) {
									(this.durationSelector = e), (this.leading = t), (this.trailing = n);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(
											new Cr(e, this.durationSelector, this.leading, this.trailing),
										);
									}),
									e
								);
							})(),
							Cr = (function (e) {
								function t(t, n, r, i) {
									var o = e.call(this, t) || this;
									return (
										(o.destination = t),
										(o.durationSelector = n),
										(o._leading = r),
										(o._trailing = i),
										(o._hasValue = !1),
										o
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										(this._hasValue = !0),
											(this._sendValue = e),
											this._throttled || (this._leading ? this.send() : this.throttle(e));
									}),
									(t.prototype.send = function () {
										var e = this._hasValue,
											t = this._sendValue;
										e && (this.destination.next(t), this.throttle(t)),
											(this._hasValue = !1),
											(this._sendValue = null);
									}),
									(t.prototype.throttle = function (e) {
										var t = this.tryDurationSelector(e);
										t && this.add((this._throttled = Object(s.a)(this, t)));
									}),
									(t.prototype.tryDurationSelector = function (e) {
										try {
											return this.durationSelector(e);
										} catch (e) {
											return this.destination.error(e), null;
										}
									}),
									(t.prototype.throttlingDone = function () {
										var e = this._throttled,
											t = this._trailing;
										e && e.unsubscribe(), (this._throttled = null), t && this.send();
									}),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.throttlingDone();
									}),
									(t.prototype.notifyComplete = function () {
										this.throttlingDone();
									}),
									t
								);
							})(a.a);
						function kr(e, t, n) {
							return (
								void 0 === t && (t = u.a),
								void 0 === n && (n = Mr),
								function (r) {
									return r.lift(new Fr(e, t, n.leading, n.trailing));
								}
							);
						}
						var Fr = (function () {
								function e(e, t, n, r) {
									(this.duration = e),
										(this.scheduler = t),
										(this.leading = n),
										(this.trailing = r);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(
											new jr(e, this.duration, this.scheduler, this.leading, this.trailing),
										);
									}),
									e
								);
							})(),
							jr = (function (e) {
								function t(t, n, r, i, o) {
									var a = e.call(this, t) || this;
									return (
										(a.duration = n),
										(a.scheduler = r),
										(a.leading = i),
										(a.trailing = o),
										(a._hasTrailingValue = !1),
										(a._trailingValue = null),
										a
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										this.throttled
											? this.trailing && ((this._trailingValue = e), (this._hasTrailingValue = !0))
											: (this.add(
													(this.throttled = this.scheduler.schedule(Ar, this.duration, {
														subscriber: this,
													})),
											  ),
											  this.leading && this.destination.next(e));
									}),
									(t.prototype._complete = function () {
										this._hasTrailingValue
											? (this.destination.next(this._trailingValue), this.destination.complete())
											: this.destination.complete();
									}),
									(t.prototype.clearThrottle = function () {
										var e = this.throttled;
										e &&
											(this.trailing &&
												this._hasTrailingValue &&
												(this.destination.next(this._trailingValue),
												(this._trailingValue = null),
												(this._hasTrailingValue = !1)),
											e.unsubscribe(),
											this.remove(e),
											(this.throttled = null));
									}),
									t
								);
							})(m.a);
						function Ar(e) {
							e.subscriber.clearThrottle();
						}
						var Lr = n(73);
						function Hr(e) {
							return (
								void 0 === e && (e = u.a),
								function (t) {
									return Object(Lr.a)(function () {
										return t.pipe(
											Rt(
												function (t, n) {
													var r = t.current;
													return {
														value: n,
														current: e.now(),
														last: r,
													};
												},
												{
													current: e.now(),
													value: void 0,
													last: void 0,
												},
											),
											Object(ot.a)(function (e) {
												var t = e.current,
													n = e.last,
													r = e.value;
												return new Rr(r, t - n);
											}),
										);
									});
								}
							);
						}
						var Rr = (function () {
								return function (e, t) {
									(this.value = e), (this.interval = t);
								};
							})(),
							Br = n(91);
						function Wr(e, t, n) {
							return (
								void 0 === n && (n = u.a),
								function (r) {
									var i = ue(e),
										o = i ? +e - n.now() : Math.abs(e);
									return r.lift(new zr(o, i, t, n));
								}
							);
						}
						var zr = (function () {
								function e(e, t, n, r) {
									(this.waitFor = e),
										(this.absoluteTimeout = t),
										(this.withObservable = n),
										(this.scheduler = r);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(
											new Nr(
												e,
												this.absoluteTimeout,
												this.waitFor,
												this.withObservable,
												this.scheduler,
											),
										);
									}),
									e
								);
							})(),
							Nr = (function (e) {
								function t(t, n, r, i, o) {
									var a = e.call(this, t) || this;
									return (
										(a.absoluteTimeout = n),
										(a.waitFor = r),
										(a.withObservable = i),
										(a.scheduler = o),
										(a.action = null),
										a.scheduleTimeout(),
										a
									);
								}
								return (
									r.a(t, e),
									(t.dispatchTimeout = function (e) {
										var t = e.withObservable;
										e._unsubscribeAndRecycle(), e.add(Object(s.a)(e, t));
									}),
									(t.prototype.scheduleTimeout = function () {
										var e = this.action;
										e
											? (this.action = e.schedule(this, this.waitFor))
											: this.add(
													(this.action = this.scheduler.schedule(
														t.dispatchTimeout,
														this.waitFor,
														this,
													)),
											  );
									}),
									(t.prototype._next = function (t) {
										this.absoluteTimeout || this.scheduleTimeout(), e.prototype._next.call(this, t);
									}),
									(t.prototype._unsubscribe = function () {
										(this.action = null), (this.scheduler = null), (this.withObservable = null);
									}),
									t
								);
							})(a.a),
							Ur = n(70);
						function Jr(e, t) {
							return void 0 === t && (t = u.a), Wr(e, Object(Ur.a)(new Br.a()), t);
						}
						function Vr(e) {
							return (
								void 0 === e && (e = u.a),
								Object(ot.a)(function (t) {
									return new Gr(t, e.now());
								})
							);
						}
						var Gr = (function () {
							return function (e, t) {
								(this.value = e), (this.timestamp = t);
							};
						})();
						function qr(e, t, n) {
							return 0 === n ? [t] : (e.push(t), e);
						}
						function Kr() {
							return Nt(qr, []);
						}
						function Yr(e) {
							return function (t) {
								return t.lift(new Qr(e));
							};
						}
						var Qr = (function () {
								function e(e) {
									this.windowBoundaries = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										var n = new Xr(e),
											r = t.subscribe(n);
										return r.closed || n.add(Object(s.a)(n, this.windowBoundaries)), r;
									}),
									e
								);
							})(),
							Xr = (function (e) {
								function t(t) {
									var n = e.call(this, t) || this;
									return (n.window = new fn.a()), t.next(n.window), n;
								}
								return (
									r.a(t, e),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.openWindow();
									}),
									(t.prototype.notifyError = function (e, t) {
										this._error(e);
									}),
									(t.prototype.notifyComplete = function (e) {
										this._complete();
									}),
									(t.prototype._next = function (e) {
										this.window.next(e);
									}),
									(t.prototype._error = function (e) {
										this.window.error(e), this.destination.error(e);
									}),
									(t.prototype._complete = function () {
										this.window.complete(), this.destination.complete();
									}),
									(t.prototype._unsubscribe = function () {
										this.window = null;
									}),
									(t.prototype.openWindow = function () {
										var e = this.window;
										e && e.complete();
										var t = this.destination,
											n = (this.window = new fn.a());
										t.next(n);
									}),
									t
								);
							})(a.a);
						function Zr(e, t) {
							return (
								void 0 === t && (t = 0),
								function (n) {
									return n.lift(new $r(e, t));
								}
							);
						}
						var $r = (function () {
								function e(e, t) {
									(this.windowSize = e), (this.startWindowEvery = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new ei(e, this.windowSize, this.startWindowEvery));
									}),
									e
								);
							})(),
							ei = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.destination = t),
										(i.windowSize = n),
										(i.startWindowEvery = r),
										(i.windows = [new fn.a()]),
										(i.count = 0),
										t.next(i.windows[0]),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										for (
											var t = this.startWindowEvery > 0 ? this.startWindowEvery : this.windowSize,
												n = this.destination,
												r = this.windowSize,
												i = this.windows,
												o = i.length,
												a = 0;
											a < o && !this.closed;
											a++
										)
											i[a].next(e);
										var s = this.count - r + 1;
										if (
											(s >= 0 && s % t == 0 && !this.closed && i.shift().complete(),
											++this.count % t == 0 && !this.closed)
										) {
											var l = new fn.a();
											i.push(l), n.next(l);
										}
									}),
									(t.prototype._error = function (e) {
										var t = this.windows;
										if (t) for (; t.length > 0 && !this.closed; ) t.shift().error(e);
										this.destination.error(e);
									}),
									(t.prototype._complete = function () {
										var e = this.windows;
										if (e) for (; e.length > 0 && !this.closed; ) e.shift().complete();
										this.destination.complete();
									}),
									(t.prototype._unsubscribe = function () {
										(this.count = 0), (this.windows = null);
									}),
									t
								);
							})(m.a);
						function ti(e) {
							var t = u.a,
								n = null,
								r = Number.POSITIVE_INFINITY;
							return (
								Object(_.a)(arguments[3]) && (t = arguments[3]),
								Object(_.a)(arguments[2])
									? (t = arguments[2])
									: Object(fr.a)(arguments[2]) && (r = arguments[2]),
								Object(_.a)(arguments[1])
									? (t = arguments[1])
									: Object(fr.a)(arguments[1]) && (n = arguments[1]),
								function (i) {
									return i.lift(new ni(e, n, r, t));
								}
							);
						}
						var ni = (function () {
								function e(e, t, n, r) {
									(this.windowTimeSpan = e),
										(this.windowCreationInterval = t),
										(this.maxWindowSize = n),
										(this.scheduler = r);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(
											new ii(
												e,
												this.windowTimeSpan,
												this.windowCreationInterval,
												this.maxWindowSize,
												this.scheduler,
											),
										);
									}),
									e
								);
							})(),
							ri = (function (e) {
								function t() {
									var t = (null !== e && e.apply(this, arguments)) || this;
									return (t._numberOfNextedValues = 0), t;
								}
								return (
									r.a(t, e),
									(t.prototype.next = function (t) {
										this._numberOfNextedValues++, e.prototype.next.call(this, t);
									}),
									Object.defineProperty(t.prototype, 'numberOfNextedValues', {
										get: function () {
											return this._numberOfNextedValues;
										},
										enumerable: !0,
										configurable: !0,
									}),
									t
								);
							})(fn.a),
							ii = (function (e) {
								function t(t, n, r, i, o) {
									var a = e.call(this, t) || this;
									(a.destination = t),
										(a.windowTimeSpan = n),
										(a.windowCreationInterval = r),
										(a.maxWindowSize = i),
										(a.scheduler = o),
										(a.windows = []);
									var s = a.openWindow();
									if (null !== r && r >= 0) {
										var l = {
												subscriber: a,
												window: s,
												context: null,
											},
											h = {
												windowTimeSpan: n,
												windowCreationInterval: r,
												subscriber: a,
												scheduler: o,
											};
										a.add(o.schedule(si, n, l)), a.add(o.schedule(ai, r, h));
									} else {
										var c = {
											subscriber: a,
											window: s,
											windowTimeSpan: n,
										};
										a.add(o.schedule(oi, n, c));
									}
									return a;
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										for (var t = this.windows, n = t.length, r = 0; r < n; r++) {
											var i = t[r];
											i.closed ||
												(i.next(e),
												i.numberOfNextedValues >= this.maxWindowSize && this.closeWindow(i));
										}
									}),
									(t.prototype._error = function (e) {
										for (var t = this.windows; t.length > 0; ) t.shift().error(e);
										this.destination.error(e);
									}),
									(t.prototype._complete = function () {
										for (var e = this.windows; e.length > 0; ) {
											var t = e.shift();
											t.closed || t.complete();
										}
										this.destination.complete();
									}),
									(t.prototype.openWindow = function () {
										var e = new ri();
										return this.windows.push(e), this.destination.next(e), e;
									}),
									(t.prototype.closeWindow = function (e) {
										e.complete();
										var t = this.windows;
										t.splice(t.indexOf(e), 1);
									}),
									t
								);
							})(m.a);
						function oi(e) {
							var t = e.subscriber,
								n = e.windowTimeSpan,
								r = e.window;
							r && t.closeWindow(r), (e.window = t.openWindow()), this.schedule(e, n);
						}
						function ai(e) {
							var t = e.windowTimeSpan,
								n = e.subscriber,
								r = e.scheduler,
								i = e.windowCreationInterval,
								o = n.openWindow(),
								a = {
									action: this,
									subscription: null,
								},
								s = {
									subscriber: n,
									window: o,
									context: a,
								};
							(a.subscription = r.schedule(si, t, s)),
								this.add(a.subscription),
								this.schedule(e, i);
						}
						function si(e) {
							var t = e.subscriber,
								n = e.window,
								r = e.context;
							r && r.action && r.subscription && r.action.remove(r.subscription), t.closeWindow(n);
						}
						function li(e, t) {
							return function (n) {
								return n.lift(new hi(e, t));
							};
						}
						var hi = (function () {
								function e(e, t) {
									(this.openings = e), (this.closingSelector = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new ci(e, this.openings, this.closingSelector));
									}),
									e
								);
							})(),
							ci = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									return (
										(i.openings = n),
										(i.closingSelector = r),
										(i.contexts = []),
										i.add((i.openSubscription = Object(s.a)(i, n, n))),
										i
									);
								}
								return (
									r.a(t, e),
									(t.prototype._next = function (e) {
										var t = this.contexts;
										if (t) for (var n = t.length, r = 0; r < n; r++) t[r].window.next(e);
									}),
									(t.prototype._error = function (t) {
										var n = this.contexts;
										if (((this.contexts = null), n))
											for (var r = n.length, i = -1; ++i < r; ) {
												var o = n[i];
												o.window.error(t), o.subscription.unsubscribe();
											}
										e.prototype._error.call(this, t);
									}),
									(t.prototype._complete = function () {
										var t = this.contexts;
										if (((this.contexts = null), t))
											for (var n = t.length, r = -1; ++r < n; ) {
												var i = t[r];
												i.window.complete(), i.subscription.unsubscribe();
											}
										e.prototype._complete.call(this);
									}),
									(t.prototype._unsubscribe = function () {
										var e = this.contexts;
										if (((this.contexts = null), e))
											for (var t = e.length, n = -1; ++n < t; ) {
												var r = e[n];
												r.window.unsubscribe(), r.subscription.unsubscribe();
											}
									}),
									(t.prototype.notifyNext = function (e, t, n, r, a) {
										if (e === this.openings) {
											var l = this.closingSelector,
												h = Object(i.a)(l)(t);
											if (h === o.a) return this.error(o.a.e);
											var c = new fn.a(),
												u = new I.a(),
												p = {
													window: c,
													subscription: u,
												};
											this.contexts.push(p);
											var f = Object(s.a)(this, h, p);
											f.closed
												? this.closeWindow(this.contexts.length - 1)
												: ((f.context = p), u.add(f)),
												this.destination.next(c);
										} else this.closeWindow(this.contexts.indexOf(e));
									}),
									(t.prototype.notifyError = function (e) {
										this.error(e);
									}),
									(t.prototype.notifyComplete = function (e) {
										e !== this.openSubscription &&
											this.closeWindow(this.contexts.indexOf(e.context));
									}),
									(t.prototype.closeWindow = function (e) {
										if (-1 !== e) {
											var t = this.contexts,
												n = t[e],
												r = n.window,
												i = n.subscription;
											t.splice(e, 1), r.complete(), i.unsubscribe();
										}
									}),
									t
								);
							})(a.a);
						function ui(e) {
							return function (t) {
								return t.lift(new pi(e));
							};
						}
						var pi = (function () {
								function e(e) {
									this.closingSelector = e;
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new fi(e, this.closingSelector));
									}),
									e
								);
							})(),
							fi = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									return (r.destination = t), (r.closingSelector = n), r.openWindow(), r;
								}
								return (
									r.a(t, e),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.openWindow(i);
									}),
									(t.prototype.notifyError = function (e, t) {
										this._error(e);
									}),
									(t.prototype.notifyComplete = function (e) {
										this.openWindow(e);
									}),
									(t.prototype._next = function (e) {
										this.window.next(e);
									}),
									(t.prototype._error = function (e) {
										this.window.error(e),
											this.destination.error(e),
											this.unsubscribeClosingNotification();
									}),
									(t.prototype._complete = function () {
										this.window.complete(),
											this.destination.complete(),
											this.unsubscribeClosingNotification();
									}),
									(t.prototype.unsubscribeClosingNotification = function () {
										this.closingNotification && this.closingNotification.unsubscribe();
									}),
									(t.prototype.openWindow = function (e) {
										void 0 === e && (e = null), e && (this.remove(e), e.unsubscribe());
										var t = this.window;
										t && t.complete();
										var n = (this.window = new fn.a());
										this.destination.next(n);
										var r = Object(i.a)(this.closingSelector)();
										if (r === o.a) {
											var a = o.a.e;
											this.destination.error(a), this.window.error(a);
										} else this.add((this.closingNotification = Object(s.a)(this, r)));
									}),
									t
								);
							})(a.a);
						function di() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return function (t) {
								var n;
								'function' == typeof e[e.length - 1] && (n = e.pop());
								var r = e;
								return t.lift(new gi(r, n));
							};
						}
						var gi = (function () {
								function e(e, t) {
									(this.observables = e), (this.project = t);
								}
								return (
									(e.prototype.call = function (e, t) {
										return t.subscribe(new yi(e, this.observables, this.project));
									}),
									e
								);
							})(),
							yi = (function (e) {
								function t(t, n, r) {
									var i = e.call(this, t) || this;
									(i.observables = n), (i.project = r), (i.toRespond = []);
									var o = n.length;
									i.values = new Array(o);
									for (var a = 0; a < o; a++) i.toRespond.push(a);
									for (a = 0; a < o; a++) {
										var l = n[a];
										i.add(Object(s.a)(i, l, l, a));
									}
									return i;
								}
								return (
									r.a(t, e),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										this.values[n] = t;
										var o = this.toRespond;
										if (o.length > 0) {
											var a = o.indexOf(n);
											-1 !== a && o.splice(a, 1);
										}
									}),
									(t.prototype.notifyComplete = function () {}),
									(t.prototype._next = function (e) {
										if (0 === this.toRespond.length) {
											var t = [e].concat(this.values);
											this.project ? this._tryProject(t) : this.destination.next(t);
										}
									}),
									(t.prototype._tryProject = function (e) {
										var t;
										try {
											t = this.project.apply(this, e);
										} catch (e) {
											return void this.destination.error(e);
										}
										this.destination.next(t);
									}),
									t
								);
							})(a.a),
							mi = n(74);
						function vi() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							return function (t) {
								return t.lift.call(mi.b.apply(void 0, [t].concat(e)));
							};
						}
						function wi(e) {
							return function (t) {
								return t.lift(new mi.a(e));
							};
						}
					},
					function (e, t, n) {
						'use strict';
						n.r(t),
							n.d(t, 'Observable', function () {
								return r.a;
							}),
							n.d(t, 'ConnectableObservable', function () {
								return i.a;
							}),
							n.d(t, 'GroupedObservable', function () {
								return o.a;
							}),
							n.d(t, 'observable', function () {
								return a.a;
							}),
							n.d(t, 'Subject', function () {
								return s.a;
							}),
							n.d(t, 'BehaviorSubject', function () {
								return l.a;
							}),
							n.d(t, 'ReplaySubject', function () {
								return h.a;
							}),
							n.d(t, 'AsyncSubject', function () {
								return c.a;
							}),
							n.d(t, 'asapScheduler', function () {
								return u.a;
							}),
							n.d(t, 'asyncScheduler', function () {
								return p.a;
							}),
							n.d(t, 'queueScheduler', function () {
								return f.a;
							}),
							n.d(t, 'animationFrameScheduler', function () {
								return v;
							}),
							n.d(t, 'VirtualTimeScheduler', function () {
								return w;
							}),
							n.d(t, 'VirtualAction', function () {
								return b;
							}),
							n.d(t, 'Scheduler', function () {
								return S.a;
							}),
							n.d(t, 'Subscription', function () {
								return _.a;
							}),
							n.d(t, 'Subscriber', function () {
								return P.a;
							}),
							n.d(t, 'Notification', function () {
								return x.a;
							}),
							n.d(t, 'pipe', function () {
								return D.a;
							}),
							n.d(t, 'noop', function () {
								return T.a;
							}),
							n.d(t, 'identity', function () {
								return O.a;
							}),
							n.d(t, 'isObservable', function () {
								return M;
							}),
							n.d(t, 'ArgumentOutOfRangeError', function () {
								return E.a;
							}),
							n.d(t, 'EmptyError', function () {
								return I.a;
							}),
							n.d(t, 'ObjectUnsubscribedError', function () {
								return C.a;
							}),
							n.d(t, 'UnsubscriptionError', function () {
								return k.a;
							}),
							n.d(t, 'TimeoutError', function () {
								return F.a;
							}),
							n.d(t, 'bindCallback', function () {
								return R;
							}),
							n.d(t, 'bindNodeCallback', function () {
								return z;
							}),
							n.d(t, 'combineLatest', function () {
								return V.b;
							}),
							n.d(t, 'concat', function () {
								return G.a;
							}),
							n.d(t, 'defer', function () {
								return q.a;
							}),
							n.d(t, 'empty', function () {
								return K.b;
							}),
							n.d(t, 'forkJoin', function () {
								return Q;
							}),
							n.d(t, 'from', function () {
								return Z.a;
							}),
							n.d(t, 'fromEvent', function () {
								return ee;
							}),
							n.d(t, 'fromEventPattern', function () {
								return te;
							}),
							n.d(t, 'generate', function () {
								return ne;
							}),
							n.d(t, 'iif', function () {
								return ie;
							}),
							n.d(t, 'interval', function () {
								return ae;
							}),
							n.d(t, 'merge', function () {
								return le.a;
							}),
							n.d(t, 'never', function () {
								return ce;
							}),
							n.d(t, 'of', function () {
								return ue.a;
							}),
							n.d(t, 'onErrorResumeNext', function () {
								return pe;
							}),
							n.d(t, 'pairs', function () {
								return fe;
							}),
							n.d(t, 'race', function () {
								return ge.a;
							}),
							n.d(t, 'range', function () {
								return ye;
							}),
							n.d(t, 'throwError', function () {
								return ve.a;
							}),
							n.d(t, 'timer', function () {
								return we.a;
							}),
							n.d(t, 'using', function () {
								return be;
							}),
							n.d(t, 'zip', function () {
								return Se.b;
							}),
							n.d(t, 'EMPTY', function () {
								return K.a;
							}),
							n.d(t, 'NEVER', function () {
								return he;
							}),
							n.d(t, 'config', function () {
								return _e.a;
							});
						var r = n(12),
							i = n(88),
							o = n(85),
							a = n(42),
							s = n(21),
							l = n(89),
							h = n(68),
							c = n(53),
							u = n(78),
							p = n(23),
							f = n(96),
							d = n(3),
							g = n(54),
							y = (function (e) {
								function t(t, n) {
									var r = e.call(this, t, n) || this;
									return (r.scheduler = t), (r.work = n), r;
								}
								return (
									d.a(t, e),
									(t.prototype.requestAsyncId = function (t, n, r) {
										return (
											void 0 === r && (r = 0),
											null !== r && r > 0
												? e.prototype.requestAsyncId.call(this, t, n, r)
												: (t.actions.push(this),
												  t.scheduled ||
														(t.scheduled = requestAnimationFrame(function () {
															return t.flush(null);
														})))
										);
									}),
									(t.prototype.recycleAsyncId = function (t, n, r) {
										if (
											(void 0 === r && (r = 0),
											(null !== r && r > 0) || (null === r && this.delay > 0))
										)
											return e.prototype.recycleAsyncId.call(this, t, n, r);
										0 === t.actions.length && (cancelAnimationFrame(n), (t.scheduled = void 0));
									}),
									t
								);
							})(g.a),
							m = n(52),
							v = new ((function (e) {
								function t() {
									return (null !== e && e.apply(this, arguments)) || this;
								}
								return (
									d.a(t, e),
									(t.prototype.flush = function (e) {
										(this.active = !0), (this.scheduled = void 0);
										var t,
											n = this.actions,
											r = -1,
											i = n.length;
										e = e || n.shift();
										do {
											if ((t = e.execute(e.state, e.delay))) break;
										} while (++r < i && (e = n.shift()));
										if (((this.active = !1), t)) {
											for (; ++r < i && (e = n.shift()); ) e.unsubscribe();
											throw t;
										}
									}),
									t
								);
							})(m.a))(y),
							w = (function (e) {
								function t(t, n) {
									void 0 === t && (t = b), void 0 === n && (n = Number.POSITIVE_INFINITY);
									var r =
										e.call(this, t, function () {
											return r.frame;
										}) || this;
									return (r.maxFrames = n), (r.frame = 0), (r.index = -1), r;
								}
								return (
									d.a(t, e),
									(t.prototype.flush = function () {
										for (
											var e, t, n = this.actions, r = this.maxFrames;
											(t = n.shift()) &&
											(this.frame = t.delay) <= r &&
											!(e = t.execute(t.state, t.delay));

										);
										if (e) {
											for (; (t = n.shift()); ) t.unsubscribe();
											throw e;
										}
									}),
									(t.frameTimeFactor = 10),
									t
								);
							})(m.a),
							b = (function (e) {
								function t(t, n, r) {
									void 0 === r && (r = t.index += 1);
									var i = e.call(this, t, n) || this;
									return (
										(i.scheduler = t),
										(i.work = n),
										(i.index = r),
										(i.active = !0),
										(i.index = t.index = r),
										i
									);
								}
								return (
									d.a(t, e),
									(t.prototype.schedule = function (n, r) {
										if ((void 0 === r && (r = 0), !this.id))
											return e.prototype.schedule.call(this, n, r);
										this.active = !1;
										var i = new t(this.scheduler, this.work);
										return this.add(i), i.schedule(n, r);
									}),
									(t.prototype.requestAsyncId = function (e, n, r) {
										void 0 === r && (r = 0), (this.delay = e.frame + r);
										var i = e.actions;
										return i.push(this), i.sort(t.sortActions), !0;
									}),
									(t.prototype.recycleAsyncId = function (e, t, n) {
										void 0 === n && (n = 0);
									}),
									(t.prototype._execute = function (t, n) {
										if (!0 === this.active) return e.prototype._execute.call(this, t, n);
									}),
									(t.sortActions = function (e, t) {
										return e.delay === t.delay
											? e.index === t.index
												? 0
												: e.index > t.index
												? 1
												: -1
											: e.delay > t.delay
											? 1
											: -1;
									}),
									t
								);
							})(g.a),
							S = n(84),
							_ = n(19),
							P = n(8),
							x = n(40),
							D = n(60),
							T = n(36),
							O = n(39);
						function M(e) {
							return (
								!!e &&
								(e instanceof r.a ||
									('function' == typeof e.lift && 'function' == typeof e.subscribe))
							);
						}
						var E = n(46),
							I = n(51),
							C = n(43),
							k = n(63),
							F = n(91),
							j = n(26),
							A = n(75),
							L = n(24),
							H = n(25);
						function R(e, t, n) {
							if (t) {
								if (!Object(H.a)(t))
									return function () {
										for (var r = [], i = 0; i < arguments.length; i++) r[i] = arguments[i];
										return R(e, n)
											.apply(void 0, r)
											.pipe(
												Object(j.a)(function (e) {
													return Object(L.a)(e) ? t.apply(void 0, e) : t(e);
												}),
											);
									};
								n = t;
							}
							return function () {
								for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
								var o,
									a = this,
									s = {
										context: a,
										subject: o,
										callbackFunc: e,
										scheduler: n,
									};
								return new r.a(function (r) {
									if (n) {
										var i = {
											args: t,
											subscriber: r,
											params: s,
										};
										return n.schedule(B, 0, i);
									}
									if (!o) {
										o = new c.a();
										try {
											e.apply(
												a,
												t.concat([
													function () {
														for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
														o.next(e.length <= 1 ? e[0] : e), o.complete();
													},
												]),
											);
										} catch (e) {
											Object(A.a)(o) ? o.error(e) : console.warn(e);
										}
									}
									return o.subscribe(r);
								});
							};
						}
						function B(e) {
							var t = this,
								n = e.args,
								r = e.subscriber,
								i = e.params,
								o = i.callbackFunc,
								a = i.context,
								s = i.scheduler,
								l = i.subject;
							if (!l) {
								l = i.subject = new c.a();
								try {
									o.apply(
										a,
										n.concat([
											function () {
												for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
												var r = e.length <= 1 ? e[0] : e;
												t.add(
													s.schedule(W, 0, {
														value: r,
														subject: l,
													}),
												);
											},
										]),
									);
								} catch (e) {
									l.error(e);
								}
							}
							this.add(l.subscribe(r));
						}
						function W(e) {
							var t = e.value,
								n = e.subject;
							n.next(t), n.complete();
						}
						function z(e, t, n) {
							if (t) {
								if (!Object(H.a)(t))
									return function () {
										for (var r = [], i = 0; i < arguments.length; i++) r[i] = arguments[i];
										return z(e, n)
											.apply(void 0, r)
											.pipe(
												Object(j.a)(function (e) {
													return Object(L.a)(e) ? t.apply(void 0, e) : t(e);
												}),
											);
									};
								n = t;
							}
							return function () {
								for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
								var o = {
									subject: void 0,
									args: t,
									callbackFunc: e,
									scheduler: n,
									context: this,
								};
								return new r.a(function (r) {
									var i = o.context,
										a = o.subject;
									if (n)
										return n.schedule(N, 0, {
											params: o,
											subscriber: r,
											context: i,
										});
									if (!a) {
										a = o.subject = new c.a();
										try {
											e.apply(
												i,
												t.concat([
													function () {
														for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
														var n = e.shift();
														n ? a.error(n) : (a.next(e.length <= 1 ? e[0] : e), a.complete());
													},
												]),
											);
										} catch (e) {
											Object(A.a)(a) ? a.error(e) : console.warn(e);
										}
									}
									return a.subscribe(r);
								});
							};
						}
						function N(e) {
							var t = this,
								n = e.params,
								r = e.subscriber,
								i = e.context,
								o = n.callbackFunc,
								a = n.args,
								s = n.scheduler,
								l = n.subject;
							if (!l) {
								l = n.subject = new c.a();
								try {
									o.apply(
										i,
										a.concat([
											function () {
												for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
												var r = e.shift();
												if (r)
													t.add(
														s.schedule(J, 0, {
															err: r,
															subject: l,
														}),
													);
												else {
													var i = e.length <= 1 ? e[0] : e;
													t.add(
														s.schedule(U, 0, {
															value: i,
															subject: l,
														}),
													);
												}
											},
										]),
									);
								} catch (e) {
									this.add(
										s.schedule(J, 0, {
											err: e,
											subject: l,
										}),
									);
								}
							}
							this.add(l.subscribe(r));
						}
						function U(e) {
							var t = e.value,
								n = e.subject;
							n.next(t), n.complete();
						}
						function J(e) {
							var t = e.err;
							e.subject.error(t);
						}
						var V = n(71),
							G = n(44),
							q = n(73),
							K = n(22),
							Y = n(15);
						function Q() {
							for (var e, t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
							return (
								'function' == typeof t[t.length - 1] && (e = t.pop()),
								1 === t.length && Object(L.a)(t[0]) && (t = t[0]),
								0 === t.length
									? K.a
									: e
									? Q(t).pipe(
											Object(j.a)(function (t) {
												return e.apply(void 0, t);
											}),
									  )
									: new r.a(function (e) {
											return new X(e, t);
									  })
							);
						}
						var X = (function (e) {
								function t(t, n) {
									var r = e.call(this, t) || this;
									(r.sources = n), (r.completed = 0), (r.haveValues = 0);
									var i = n.length;
									r.values = new Array(i);
									for (var o = 0; o < i; o++) {
										var a = n[o],
											s = Object(Y.a)(r, a, null, o);
										s && r.add(s);
									}
									return r;
								}
								return (
									d.a(t, e),
									(t.prototype.notifyNext = function (e, t, n, r, i) {
										(this.values[n] = t), i._hasValue || ((i._hasValue = !0), this.haveValues++);
									}),
									(t.prototype.notifyComplete = function (e) {
										var t = this.destination,
											n = this.haveValues,
											r = this.values,
											i = r.length;
										e._hasValue
											? (this.completed++,
											  this.completed === i && (n === i && t.next(r), t.complete()))
											: t.complete();
									}),
									t
								);
							})(n(17).a),
							Z = n(30),
							$ = n(47);
						function ee(e, t, n, i) {
							return (
								Object($.a)(n) && ((i = n), (n = void 0)),
								i
									? ee(e, t, n).pipe(
											Object(j.a)(function (e) {
												return Object(L.a)(e) ? i.apply(void 0, e) : i(e);
											}),
									  )
									: new r.a(function (r) {
											!(function e(t, n, r, i, o) {
												var a;
												if (
													(function (e) {
														return (
															e &&
															'function' == typeof e.addEventListener &&
															'function' == typeof e.removeEventListener
														);
													})(t)
												) {
													var s = t;
													t.addEventListener(n, r, o),
														(a = function () {
															return s.removeEventListener(n, r, o);
														});
												} else if (
													(function (e) {
														return e && 'function' == typeof e.on && 'function' == typeof e.off;
													})(t)
												) {
													var l = t;
													t.on(n, r),
														(a = function () {
															return l.off(n, r);
														});
												} else if (
													(function (e) {
														return (
															e &&
															'function' == typeof e.addListener &&
															'function' == typeof e.removeListener
														);
													})(t)
												) {
													var h = t;
													t.addListener(n, r),
														(a = function () {
															return h.removeListener(n, r);
														});
												} else {
													if (!t || !t.length) throw new TypeError('Invalid event target');
													for (var c = 0, u = t.length; c < u; c++) e(t[c], n, r, i, o);
												}
												i.add(a);
											})(
												e,
												t,
												function (e) {
													arguments.length > 1
														? r.next(Array.prototype.slice.call(arguments))
														: r.next(e);
												},
												r,
												n,
											);
									  })
							);
						}
						function te(e, t, n) {
							return n
								? te(e, t).pipe(
										Object(j.a)(function (e) {
											return Object(L.a)(e) ? n.apply(void 0, e) : n(e);
										}),
								  )
								: new r.a(function (n) {
										var r,
											i = function () {
												for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
												return n.next(1 === e.length ? e[0] : e);
											};
										try {
											r = e(i);
										} catch (e) {
											return void n.error(e);
										}
										if (Object($.a)(t))
											return function () {
												return t(i, r);
											};
								  });
						}
						function ne(e, t, n, i, o) {
							var a, s;
							if (1 == arguments.length) {
								var l = e;
								(s = l.initialState),
									(t = l.condition),
									(n = l.iterate),
									(a = l.resultSelector || O.a),
									(o = l.scheduler);
							} else
								void 0 === i || Object(H.a)(i) ? ((s = e), (a = O.a), (o = i)) : ((s = e), (a = i));
							return new r.a(function (e) {
								var r = s;
								if (o)
									return o.schedule(re, 0, {
										subscriber: e,
										iterate: n,
										condition: t,
										resultSelector: a,
										state: r,
									});
								for (;;) {
									if (t) {
										var i = void 0;
										try {
											i = t(r);
										} catch (t) {
											return void e.error(t);
										}
										if (!i) {
											e.complete();
											break;
										}
									}
									var l = void 0;
									try {
										l = a(r);
									} catch (t) {
										return void e.error(t);
									}
									if ((e.next(l), e.closed)) break;
									try {
										r = n(r);
									} catch (t) {
										return void e.error(t);
									}
								}
							});
						}
						function re(e) {
							var t = e.subscriber,
								n = e.condition;
							if (!t.closed) {
								if (e.needIterate)
									try {
										e.state = e.iterate(e.state);
									} catch (e) {
										return void t.error(e);
									}
								else e.needIterate = !0;
								if (n) {
									var r = void 0;
									try {
										r = n(e.state);
									} catch (e) {
										return void t.error(e);
									}
									if (!r) return void t.complete();
									if (t.closed) return;
								}
								var i;
								try {
									i = e.resultSelector(e.state);
								} catch (e) {
									return void t.error(e);
								}
								if (!t.closed && (t.next(i), !t.closed)) return this.schedule(e);
							}
						}
						function ie(e, t, n) {
							return (
								void 0 === t && (t = K.a),
								void 0 === n && (n = K.a),
								Object(q.a)(function () {
									return e() ? t : n;
								})
							);
						}
						Object.prototype.toString;
						var oe = n(55);
						function ae(e, t) {
							return (
								void 0 === e && (e = 0),
								void 0 === t && (t = p.a),
								(!Object(oe.a)(e) || e < 0) && (e = 0),
								(t && 'function' == typeof t.schedule) || (t = p.a),
								new r.a(function (n) {
									return (
										n.add(
											t.schedule(se, e, {
												subscriber: n,
												counter: 0,
												period: e,
											}),
										),
										n
									);
								})
							);
						}
						function se(e) {
							var t = e.subscriber,
								n = e.counter,
								r = e.period;
							t.next(n),
								this.schedule(
									{
										subscriber: t,
										counter: n + 1,
										period: r,
									},
									r,
								);
						}
						var le = n(93),
							he = new r.a(T.a);
						function ce() {
							return he;
						}
						var ue = n(69);
						function pe() {
							for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
							if (0 === e.length) return K.a;
							var n = e[0],
								i = e.slice(1);
							return 1 === e.length && Object(L.a)(n)
								? pe.apply(void 0, n)
								: new r.a(function (e) {
										var t = function () {
											return e.add(pe.apply(void 0, i).subscribe(e));
										};
										return Object(Z.a)(n).subscribe({
											next: function (t) {
												e.next(t);
											},
											error: t,
											complete: t,
										});
								  });
						}
						function fe(e, t) {
							return t
								? new r.a(function (n) {
										var r = Object.keys(e),
											i = new _.a();
										return (
											i.add(
												t.schedule(de, 0, {
													keys: r,
													index: 0,
													subscriber: n,
													subscription: i,
													obj: e,
												}),
											),
											i
										);
								  })
								: new r.a(function (t) {
										for (var n = Object.keys(e), r = 0; r < n.length && !t.closed; r++) {
											var i = n[r];
											e.hasOwnProperty(i) && t.next([i, e[i]]);
										}
										t.complete();
								  });
						}
						function de(e) {
							var t = e.keys,
								n = e.index,
								r = e.subscriber,
								i = e.subscription,
								o = e.obj;
							if (!r.closed)
								if (n < t.length) {
									var a = t[n];
									r.next([a, o[a]]),
										i.add(
											this.schedule({
												keys: t,
												index: n + 1,
												subscriber: r,
												subscription: i,
												obj: o,
											}),
										);
								} else r.complete();
						}
						var ge = n(94);
						function ye(e, t, n) {
							return (
								void 0 === e && (e = 0),
								void 0 === t && (t = 0),
								new r.a(function (r) {
									var i = 0,
										o = e;
									if (n)
										return n.schedule(me, 0, {
											index: i,
											count: t,
											start: e,
											subscriber: r,
										});
									for (;;) {
										if (i++ >= t) {
											r.complete();
											break;
										}
										if ((r.next(o++), r.closed)) break;
									}
								})
							);
						}
						function me(e) {
							var t = e.start,
								n = e.index,
								r = e.count,
								i = e.subscriber;
							n >= r
								? i.complete()
								: (i.next(t), i.closed || ((e.index = n + 1), (e.start = t + 1), this.schedule(e)));
						}
						var ve = n(70),
							we = n(95);
						function be(e, t) {
							return new r.a(function (n) {
								var r, i;
								try {
									r = e();
								} catch (e) {
									return void n.error(e);
								}
								try {
									i = t(r);
								} catch (e) {
									return void n.error(e);
								}
								var o = (i ? Object(Z.a)(i) : K.a).subscribe(n);
								return function () {
									o.unsubscribe(), r && r.unsubscribe();
								};
							});
						}
						var Se = n(74),
							_e = n(34);
					},
					function (e, t, n) {
						'use strict';
						n.r(t),
							n.d(t, 'DiffMatchPatch', function () {
								return d;
							}),
							n.d(t, 'PatchObject', function () {
								return f;
							}),
							n.d(t, 'DiffOperation', function () {
								return i;
							});
						var r = {};
						n.r(r),
							n.d(r, 'min', function () {
								return c;
							}),
							n.d(r, 'max', function () {
								return u;
							});
						var i,
							o = /[^a-zA-Z0-9]/,
							a = /\s/,
							s = /[\r\n]/,
							l = /\n\r?\n$/,
							h = /^\r?\n\r?\n/;
						function c(e, t) {
							return e < t ? e : t;
						}
						function u(e, t) {
							return e > t ? e : t;
						}
						!(function (e) {
							(e[(e.DIFF_DELETE = -1)] = 'DIFF_DELETE'),
								(e[(e.DIFF_INSERT = 1)] = 'DIFF_INSERT'),
								(e[(e.DIFF_EQUAL = 0)] = 'DIFF_EQUAL');
						})(i || (i = {}));
						var p = r,
							f = (function () {
								function e() {
									(this.diffs = []),
										(this.start1 = 0),
										(this.start2 = 0),
										(this.length1 = 0),
										(this.length2 = 0);
								}
								return (
									(e.prototype.toString = function () {
										for (
											var e,
												t = [
													'@@ -' +
														(0 === this.length1
															? this.start1 + ',0'
															: 1 === this.length1
															? this.start1 + 1
															: this.start1 + 1 + ',' + this.length1) +
														' +' +
														(0 === this.length2
															? this.start2 + ',0'
															: 1 === this.length2
															? this.start2 + 1
															: this.start2 + 1 + ',' + this.length2) +
														' @@\n',
												],
												n = 0;
											n < this.diffs.length;
											n++
										) {
											switch (this.diffs[n][0]) {
												case i.DIFF_INSERT:
													e = '+';
													break;
												case i.DIFF_DELETE:
													e = '-';
													break;
												case i.DIFF_EQUAL:
													e = ' ';
											}
											t[n + 1] = e + encodeURI(this.diffs[n][1]) + '\n';
										}
										return t.join('').replace(/%20/g, ' ');
									}),
									e
								);
							})(),
							d = (function () {
								function e() {
									(this.diffTimeout = 1),
										(this.diffEditCost = 4),
										(this.matchThreshold = 0.5),
										(this.matchDistance = 1e3),
										(this.patchDeleteThreshold = 0.5),
										(this.patchMargin = 4),
										(this.matchMaxBits = 32);
								}
								return (
									(e.prototype.diff_main = function (e, t, n, r) {
										void 0 === r &&
											(r =
												this.diffTimeout <= 0
													? Number.MAX_VALUE
													: Date.now() + 1e3 * this.diffTimeout);
										var o = r;
										if (null == e || null == t) throw new Error('Null input. (diff_main)');
										if (e === t) return e ? [[i.DIFF_EQUAL, e]] : [];
										void 0 === n && (n = !0);
										var a = n,
											s = this.diff_commonPrefix(e, t),
											l = e.substring(0, s);
										(e = e.substring(s)), (t = t.substring(s)), (s = this.diff_commonSuffix(e, t));
										var h = e.substring(e.length - s);
										(e = e.substring(0, e.length - s)), (t = t.substring(0, t.length - s));
										var c = this.diff_compute_(e, t, a, o);
										return (
											l && c.unshift([i.DIFF_EQUAL, l]),
											h && c.push([i.DIFF_EQUAL, h]),
											this.diff_cleanupMerge(c),
											c
										);
									}),
									(e.prototype.diff_commonPrefix = function (e, t) {
										if (!e || !t || e.charAt(0) !== t.charAt(0)) return 0;
										for (var n = 0, r = p.min(e.length, t.length), i = r, o = 0; n < i; )
											e.substring(o, i) === t.substring(o, i) ? (o = n = i) : (r = i),
												(i = Math.floor((r - n) / 2 + n));
										return i;
									}),
									(e.prototype.diff_commonSuffix = function (e, t) {
										if (!e || !t || e.charAt(e.length - 1) !== t.charAt(t.length - 1)) return 0;
										for (var n = 0, r = p.min(e.length, t.length), i = r, o = 0; n < i; )
											e.substring(e.length - i, e.length - o) ===
											t.substring(t.length - i, t.length - o)
												? (o = n = i)
												: (r = i),
												(i = Math.floor((r - n) / 2 + n));
										return i;
									}),
									(e.prototype.diff_cleanupSemantic = function (e) {
										for (
											var t = !1, n = [], r = 0, o = null, a = 0, s = 0, l = 0, h = 0, c = 0;
											a < e.length;

										)
											e[a][0] === i.DIFF_EQUAL
												? ((n[r++] = a), (s = h), (l = c), (h = 0), (c = 0), (o = e[a][1]))
												: (e[a][0] === i.DIFF_INSERT
														? (h += e[a][1].length)
														: (c += e[a][1].length),
												  o &&
														o.length <= p.max(s, l) &&
														o.length <= p.max(h, c) &&
														(e.splice(n[r - 1], 0, [i.DIFF_DELETE, o]),
														(e[n[r - 1] + 1][0] = i.DIFF_INSERT),
														r--,
														(a = --r > 0 ? n[r - 1] : -1),
														(s = 0),
														(l = 0),
														(h = 0),
														(c = 0),
														(o = null),
														(t = !0))),
												a++;
										for (
											t && this.diff_cleanupMerge(e), this.diff_cleanupSemanticLossless(e), a = 1;
											a < e.length;

										) {
											if (e[a - 1][0] === i.DIFF_DELETE && e[a][0] === i.DIFF_INSERT) {
												var u = e[a - 1][1],
													f = e[a][1],
													d = this.diff_commonOverlap_(u, f),
													g = this.diff_commonOverlap_(f, u);
												d >= g
													? (d >= u.length / 2 || d >= f.length / 2) &&
													  (e.splice(a, 0, [i.DIFF_EQUAL, f.substring(0, d)]),
													  (e[a - 1][1] = u.substring(0, u.length - d)),
													  (e[a + 1][1] = f.substring(d)),
													  a++)
													: (g >= u.length / 2 || g >= f.length / 2) &&
													  (e.splice(a, 0, [i.DIFF_EQUAL, u.substring(0, g)]),
													  (e[a - 1][0] = i.DIFF_INSERT),
													  (e[a - 1][1] = f.substring(0, f.length - g)),
													  (e[a + 1][0] = i.DIFF_DELETE),
													  (e[a + 1][1] = u.substring(g)),
													  a++),
													a++;
											}
											a++;
										}
									}),
									(e.prototype.diff_cleanupSemanticLossless = function (e) {
										for (var t = 1; t < e.length - 1; ) {
											if (e[t - 1][0] === i.DIFF_EQUAL && e[t + 1][0] === i.DIFF_EQUAL) {
												var n = e[t - 1][1],
													r = e[t][1],
													o = e[t + 1][1],
													a = this.diff_commonSuffix(n, r);
												if (a) {
													var s = r.substring(r.length - a);
													(n = n.substring(0, n.length - a)),
														(r = s + r.substring(0, r.length - a)),
														(o = s + o);
												}
												for (
													var l = n,
														h = r,
														c = o,
														u =
															this.diff_cleanupSemanticScore_(n, r) +
															this.diff_cleanupSemanticScore_(r, o);
													r.charAt(0) === o.charAt(0);

												) {
													(n += r.charAt(0)),
														(r = r.substring(1) + o.charAt(0)),
														(o = o.substring(1));
													var p =
														this.diff_cleanupSemanticScore_(n, r) +
														this.diff_cleanupSemanticScore_(r, o);
													p >= u && ((u = p), (l = n), (h = r), (c = o));
												}
												e[t - 1][1] !== l &&
													(l ? (e[t - 1][1] = l) : (e.splice(t - 1, 1), t--),
													(e[t][1] = h),
													c ? (e[t + 1][1] = c) : (e.splice(t + 1, 1), t--));
											}
											t++;
										}
									}),
									(e.prototype.diff_cleanupEfficiency = function (e) {
										for (
											var t = !1, n = [], r = 0, o = null, a = 0, s = !1, l = !1, h = !1, c = !1;
											a < e.length;

										)
											e[a][0] === i.DIFF_EQUAL
												? (e[a][1].length < this.diffEditCost && (h || c)
														? ((n[r++] = a), (s = h), (l = c), (o = e[a][1]))
														: ((r = 0), (o = null)),
												  (h = c = !1))
												: (e[a][0] === i.DIFF_DELETE ? (c = !0) : (h = !0),
												  o &&
														((s && l && h && c) ||
															(o.length < this.diffEditCost / 2 &&
																Number(s) + Number(l) + Number(h) + Number(c) === 3)) &&
														(e.splice(n[r - 1], 0, [i.DIFF_DELETE, o]),
														(e[n[r - 1] + 1][0] = i.DIFF_INSERT),
														r--,
														(o = null),
														s && l
															? ((h = c = !0), (r = 0))
															: ((a = --r > 0 ? n[r - 1] : -1), (h = c = !1)),
														(t = !0))),
												a++;
										t && this.diff_cleanupMerge(e);
									}),
									(e.prototype.diff_cleanupMerge = function (e) {
										e.push([i.DIFF_EQUAL, '']);
										for (var t, n = 0, r = 0, o = 0, a = '', s = ''; n < e.length; )
											switch (e[n][0]) {
												case i.DIFF_INSERT:
													o++, (s += e[n][1]), n++;
													break;
												case i.DIFF_DELETE:
													r++, (a += e[n][1]), n++;
													break;
												case i.DIFF_EQUAL:
													r + o > 1
														? (0 !== r &&
																0 !== o &&
																(0 !== (t = this.diff_commonPrefix(s, a)) &&
																	(n - r - o > 0 && e[n - r - o - 1][0] === i.DIFF_EQUAL
																		? (e[n - r - o - 1][1] += s.substring(0, t))
																		: (e.splice(0, 0, [i.DIFF_EQUAL, s.substring(0, t)]), n++),
																	(s = s.substring(t)),
																	(a = a.substring(t))),
																0 !== (t = this.diff_commonSuffix(s, a)) &&
																	((e[n][1] = s.substring(s.length - t) + e[n][1]),
																	(s = s.substring(0, s.length - t)),
																	(a = a.substring(0, a.length - t)))),
														  (n -= r + o),
														  e.splice(n, r + o),
														  a.length && (e.splice(n, 0, [i.DIFF_DELETE, a]), n++),
														  s.length && (e.splice(n, 0, [i.DIFF_INSERT, s]), n++),
														  n++)
														: 0 !== n && e[n - 1][0] === i.DIFF_EQUAL
														? ((e[n - 1][1] += e[n][1]), e.splice(n, 1))
														: n++,
														(o = 0),
														(r = 0),
														(a = ''),
														(s = '');
											}
										'' === e[e.length - 1][1] && e.pop();
										var l = !1;
										for (n = 1; n < e.length - 1; )
											e[n - 1][0] === i.DIFF_EQUAL &&
												e[n + 1][0] === i.DIFF_EQUAL &&
												(e[n][1].substring(e[n][1].length - e[n - 1][1].length) === e[n - 1][1]
													? ((e[n][1] =
															e[n - 1][1] +
															e[n][1].substring(0, e[n][1].length - e[n - 1][1].length)),
													  (e[n + 1][1] = e[n - 1][1] + e[n + 1][1]),
													  e.splice(n - 1, 1),
													  (l = !0))
													: e[n][1].substring(0, e[n + 1][1].length) === e[n + 1][1] &&
													  ((e[n - 1][1] += e[n + 1][1]),
													  (e[n][1] = e[n][1].substring(e[n + 1][1].length) + e[n + 1][1]),
													  e.splice(n + 1, 1),
													  (l = !0))),
												n++;
										l && this.diff_cleanupMerge(e);
									}),
									(e.prototype.diff_xIndex = function (e, t) {
										var n,
											r = 0,
											o = 0,
											a = 0,
											s = 0;
										for (
											n = 0;
											n < e.length &&
											(e[n][0] !== i.DIFF_INSERT && (r += e[n][1].length),
											e[n][0] !== i.DIFF_DELETE && (o += e[n][1].length),
											!(r > t));
											n++
										)
											(a = r), (s = o);
										return e.length !== n && e[n][0] === i.DIFF_DELETE ? s : s + (t - a);
									}),
									(e.prototype.diff_prettyHtml = function (e) {
										for (
											var t = [], n = /&/g, r = /</g, o = />/g, a = /\n/g, s = 0;
											s < e.length;
											s++
										) {
											var l = e[s][0],
												h = e[s][1]
													.replace(n, '&amp;')
													.replace(r, '&lt;')
													.replace(o, '&gt;')
													.replace(a, '&para;<br>');
											switch (l) {
												case i.DIFF_INSERT:
													t[s] = '<ins style="background:#e6ffe6;">' + h + '</ins>';
													break;
												case i.DIFF_DELETE:
													t[s] = '<del style="background:#ffe6e6;">' + h + '</del>';
													break;
												case i.DIFF_EQUAL:
													t[s] = '<span>' + h + '</span>';
											}
										}
										return t.join('');
									}),
									(e.prototype.diff_text1 = function (e) {
										for (var t = [], n = 0; n < e.length; n++)
											e[n][0] !== i.DIFF_INSERT && (t[n] = e[n][1]);
										return t.join('');
									}),
									(e.prototype.diff_text2 = function (e) {
										for (var t = [], n = 0; n < e.length; n++)
											e[n][0] !== i.DIFF_DELETE && (t[n] = e[n][1]);
										return t.join('');
									}),
									(e.prototype.diff_levenshtein = function (e) {
										for (var t = 0, n = 0, r = 0, o = 0; o < e.length; o++) {
											var a = e[o][0],
												s = e[o][1];
											switch (a) {
												case i.DIFF_INSERT:
													n += s.length;
													break;
												case i.DIFF_DELETE:
													r += s.length;
													break;
												case i.DIFF_EQUAL:
													(t += p.max(n, r)), (n = 0), (r = 0);
											}
										}
										return t + p.max(n, r);
									}),
									(e.prototype.diff_toDelta = function (e) {
										for (var t = [], n = 0; n < e.length; n++)
											switch (e[n][0]) {
												case i.DIFF_INSERT:
													t[n] = '+' + encodeURI(e[n][1]);
													break;
												case i.DIFF_DELETE:
													t[n] = '-' + e[n][1].length;
													break;
												case i.DIFF_EQUAL:
													t[n] = '=' + e[n][1].length;
											}
										return t.join('\t').replace(/%20/g, ' ');
									}),
									(e.prototype.diff_fromDelta = function (e, t) {
										for (var n = [], r = 0, o = 0, a = t.split(/\t/g), s = 0; s < a.length; s++) {
											var l = a[s].substring(1);
											switch (a[s].charAt(0)) {
												case '+':
													try {
														n[r++] = [i.DIFF_INSERT, decodeURI(l)];
													} catch (e) {
														throw new Error('Illegal escape in diff_fromDelta: ' + l);
													}
													break;
												case '-':
												case '=':
													var h = parseInt(l, 10);
													if (isNaN(h) || h < 0)
														throw new Error('Invalid number in diff_fromDelta: ' + l);
													var c = e.substring(o, (o += h));
													'=' === a[s].charAt(0)
														? (n[r++] = [i.DIFF_EQUAL, c])
														: (n[r++] = [i.DIFF_DELETE, c]);
													break;
												default:
													if (a[s])
														throw new Error('Invalid diff operation in diff_fromDelta: ' + a[s]);
											}
										}
										if (o !== e.length)
											throw new Error(
												'Delta length (' +
													o +
													') does not equal source text length (' +
													e.length +
													')',
											);
										return n;
									}),
									(e.prototype.diff_linesToChars = function (e, t) {
										var n = [],
											r = {};
										return (
											(n[0] = ''),
											{
												chars1: this.diff_linesToCharsMunge_(e, n, r, 4e4),
												chars2: this.diff_linesToCharsMunge_(t, n, r, 65535),
												lineArray: n,
											}
										);
									}),
									(e.prototype.diff_charsToLines = function (e, t) {
										for (var n = 0; n < e.length; n++) {
											for (var r = e[n][1], i = [], o = 0; o < r.length; o++)
												i[o] = t[r.charCodeAt(o)];
											e[n][1] = i.join('');
										}
									}),
									(e.prototype.match_main = function (e, t, n) {
										if (null == e || null == t || null == n)
											throw new Error('Null input. (match_main)');
										return (
											(n = p.max(0, p.min(n, e.length))),
											e === t
												? 0
												: e.length
												? e.substring(n, n + t.length) === t
													? n
													: this.match_bitap_(e, t, n)
												: -1
										);
									}),
									(e.prototype.patch_make = function (e, t, n) {
										var r, o;
										if ('string' == typeof e && 'string' == typeof t && void 0 === n)
											(r = e),
												(o = this.diff_main(r, t, !0)).length > 2 &&
													(this.diff_cleanupSemantic(o), this.diff_cleanupEfficiency(o));
										else if (e && 'object' == typeof e && void 0 === t && void 0 === n)
											(o = e), (r = this.diff_text1(o));
										else if ('string' == typeof e && t && 'object' == typeof t && void 0 === n)
											(r = e), (o = t);
										else {
											if (
												'string' != typeof e ||
												'string' != typeof t ||
												!n ||
												'object' != typeof n
											)
												throw new Error('Unknown call format to patch_make');
											(r = e), (o = n);
										}
										if (0 === o.length) return [];
										for (
											var a = [], s = new f(), l = 0, h = 0, c = 0, u = r, p = r, d = 0;
											d < o.length;
											d++
										) {
											var g = o[d][0],
												y = o[d][1];
											switch ((l || g === i.DIFF_EQUAL || ((s.start1 = h), (s.start2 = c)), g)) {
												case i.DIFF_INSERT:
													(s.diffs[l++] = o[d]),
														(s.length2 += y.length),
														(p = p.substring(0, c) + y + p.substring(c));
													break;
												case i.DIFF_DELETE:
													(s.length1 += y.length),
														(s.diffs[l++] = o[d]),
														(p = p.substring(0, c) + p.substring(c + y.length));
													break;
												case i.DIFF_EQUAL:
													y.length <= 2 * this.patchMargin && l && o.length !== d + 1
														? ((s.diffs[l++] = o[d]),
														  (s.length1 += y.length),
														  (s.length2 += y.length))
														: y.length >= 2 * this.patchMargin &&
														  l &&
														  (this.patch_addContext_(s, u),
														  a.push(s),
														  (s = new f()),
														  (l = 0),
														  (u = p),
														  (h = c));
											}
											g !== i.DIFF_INSERT && (h += y.length),
												g !== i.DIFF_DELETE && (c += y.length);
										}
										return l && (this.patch_addContext_(s, u), a.push(s)), a;
									}),
									(e.prototype.patch_deepCopy = function (e) {
										for (var t = [], n = 0; n < e.length; n++) {
											for (var r = e[n], i = new f(), o = 0; o < r.diffs.length; o++)
												i.diffs[o] = [r.diffs[o][0], r.diffs[o][1]];
											(i.start1 = r.start1),
												(i.start2 = r.start2),
												(i.length1 = r.length1),
												(i.length2 = r.length2),
												(t[n] = i);
										}
										return t;
									}),
									(e.prototype.patch_apply = function (e, t) {
										if (0 === e.length) return [t, []];
										e = this.patch_deepCopy(e);
										var n = this.patch_addPadding(e);
										(t = n + t + n), this.patch_splitMax(e);
										for (var r = 0, o = [], a = 0; a < e.length; a++) {
											var s = e[a].start2 + r,
												l = this.diff_text1(e[a].diffs),
												h = void 0,
												c = -1;
											if (
												(l.length > this.matchMaxBits
													? -1 !== (h = this.match_main(t, l.substring(0, this.matchMaxBits), s)) &&
													  (-1 ===
															(c = this.match_main(
																t,
																l.substring(l.length - this.matchMaxBits),
																s + l.length - this.matchMaxBits,
															)) ||
															h >= c) &&
													  (h = -1)
													: (h = this.match_main(t, l, s)),
												-1 === h)
											)
												(o[a] = !1), (r -= e[a].length2 - e[a].length1);
											else {
												(o[a] = !0), (r = h - s);
												var u = void 0;
												if (
													l ===
													(u =
														-1 === c
															? t.substring(h, h + l.length)
															: t.substring(h, c + this.matchMaxBits))
												)
													t =
														t.substring(0, h) +
														this.diff_text2(e[a].diffs) +
														t.substring(h + l.length);
												else {
													var p = this.diff_main(l, u, !1);
													if (
														l.length > this.matchMaxBits &&
														this.diff_levenshtein(p) / l.length > this.patchDeleteThreshold
													)
														o[a] = !1;
													else {
														this.diff_cleanupSemanticLossless(p);
														for (var f = 0, d = 0, g = 0; g < e[a].diffs.length; g++) {
															var y = e[a].diffs[g];
															y[0] !== i.DIFF_EQUAL && (d = this.diff_xIndex(p, f)),
																y[0] === i.DIFF_INSERT
																	? (t = t.substring(0, h + d) + y[1] + t.substring(h + d))
																	: y[0] === i.DIFF_DELETE &&
																	  (t =
																			t.substring(0, h + d) +
																			t.substring(h + this.diff_xIndex(p, f + y[1].length))),
																y[0] !== i.DIFF_DELETE && (f += y[1].length);
														}
													}
												}
											}
										}
										return [(t = t.substring(n.length, t.length - n.length)), o];
									}),
									(e.prototype.patch_addPadding = function (e) {
										for (var t = this.patchMargin, n = '', r = 1; r <= t; r++)
											n += String.fromCharCode(r);
										for (r = 0; r < e.length; r++) (e[r].start1 += t), (e[r].start2 += t);
										var o = e[0],
											a = o.diffs;
										if (0 === a.length || a[0][0] !== i.DIFF_EQUAL)
											a.unshift([i.DIFF_EQUAL, n]),
												(o.start1 -= t),
												(o.start2 -= t),
												(o.length1 += t),
												(o.length2 += t);
										else if (t > a[0][1].length) {
											var s = t - a[0][1].length;
											(a[0][1] = n.substring(a[0][1].length) + a[0][1]),
												(o.start1 -= s),
												(o.start2 -= s),
												(o.length1 += s),
												(o.length2 += s);
										}
										return (
											0 === (a = (o = e[e.length - 1]).diffs).length ||
											a[a.length - 1][0] !== i.DIFF_EQUAL
												? (a.push([i.DIFF_EQUAL, n]), (o.length1 += t), (o.length2 += t))
												: t > a[a.length - 1][1].length &&
												  ((s = t - a[a.length - 1][1].length),
												  (a[a.length - 1][1] += n.substring(0, s)),
												  (o.length1 += s),
												  (o.length2 += s)),
											n
										);
									}),
									(e.prototype.patch_splitMax = function (e) {
										for (var t = this.matchMaxBits, n = 0; n < e.length; n++)
											if (!(e[n].length1 <= t)) {
												var r = e[n];
												e.splice(n--, 1);
												for (var o = r.start1, a = r.start2, s = ''; 0 !== r.diffs.length; ) {
													var l = new f(),
														h = !0;
													for (
														l.start1 = o - s.length,
															l.start2 = a - s.length,
															'' !== s &&
																((l.length1 = l.length2 = s.length),
																l.diffs.push([i.DIFF_EQUAL, s]));
														0 !== r.diffs.length && l.length1 < t - this.patchMargin;

													) {
														var c = r.diffs[0][0],
															u = r.diffs[0][1];
														c === i.DIFF_INSERT
															? ((l.length2 += u.length),
															  (a += u.length),
															  l.diffs.push(r.diffs.shift()),
															  (h = !1))
															: c === i.DIFF_DELETE &&
															  1 === l.diffs.length &&
															  l.diffs[0][0] === i.DIFF_EQUAL &&
															  u.length > 2 * t
															? ((l.length1 += u.length),
															  (o += u.length),
															  (h = !1),
															  l.diffs.push([c, u]),
															  r.diffs.shift())
															: ((u = u.substring(0, t - l.length1 - this.patchMargin)),
															  (l.length1 += u.length),
															  (o += u.length),
															  c === i.DIFF_EQUAL
																	? ((l.length2 += u.length), (a += u.length))
																	: (h = !1),
															  l.diffs.push([c, u]),
															  u === r.diffs[0][1]
																	? r.diffs.shift()
																	: (r.diffs[0][1] = r.diffs[0][1].substring(u.length)));
													}
													s = (s = this.diff_text2(l.diffs)).substring(s.length - this.patchMargin);
													var p = this.diff_text1(r.diffs).substring(0, this.patchMargin);
													'' !== p &&
														((l.length1 += p.length),
														(l.length2 += p.length),
														0 !== l.diffs.length && l.diffs[l.diffs.length - 1][0] === i.DIFF_EQUAL
															? (l.diffs[l.diffs.length - 1][1] += p)
															: l.diffs.push([i.DIFF_EQUAL, p])),
														h || e.splice(++n, 0, l);
												}
											}
									}),
									(e.prototype.patch_toText = function (e) {
										for (var t = [], n = 0; n < e.length; n++) t[n] = e[n];
										return t.join('');
									}),
									(e.prototype.patch_fromText = function (e) {
										var t = [];
										if (!e) return t;
										for (
											var n = e.split('\n'), r = 0, o = /^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;
											r < n.length;

										) {
											var a = n[r].match(o);
											if (!a) throw new Error('Invalid patch string: ' + n[r]);
											var s = new f();
											t.push(s),
												(s.start1 = parseInt(a[1], 10)),
												'' === a[2]
													? (s.start1--, (s.length1 = 1))
													: '0' === a[2]
													? (s.length1 = 0)
													: (s.start1--, (s.length1 = parseInt(a[2], 10))),
												(s.start2 = parseInt(a[3], 10)),
												'' === a[4]
													? (s.start2--, (s.length2 = 1))
													: '0' === a[4]
													? (s.length2 = 0)
													: (s.start2--, (s.length2 = parseInt(a[4], 10))),
												r++;
											for (var l = void 0, h = void 0, c = void 0; r < n.length; ) {
												(l = n[r].charAt(0)), (c = n[r].substring(1));
												try {
													h = decodeURI(c);
												} catch (e) {
													throw new Error('Illegal escape in patch_fromText: ' + c);
												}
												if ('-' === l) s.diffs.push([i.DIFF_DELETE, h]);
												else if ('+' === l) s.diffs.push([i.DIFF_INSERT, h]);
												else if (' ' === l) s.diffs.push([i.DIFF_EQUAL, h]);
												else {
													if ('@' === l) break;
													if ('' !== l) throw new Error('Invalid patch mode "' + l + '" in: ' + h);
												}
												r++;
											}
										}
										return t;
									}),
									(e.prototype.diff_compute_ = function (e, t, n, r) {
										var o;
										if (!e) return [[i.DIFF_INSERT, t]];
										if (!t) return [[i.DIFF_DELETE, e]];
										var a = e.length > t.length ? e : t,
											s = e.length > t.length ? t : e,
											l = a.indexOf(s);
										if (-1 !== l)
											return (
												(o = [
													[i.DIFF_INSERT, a.substring(0, l)],
													[i.DIFF_EQUAL, s],
													[i.DIFF_INSERT, a.substring(l + s.length)],
												]),
												e.length > t.length &&
													((o[0][0] = i.DIFF_DELETE), (o[2][0] = i.DIFF_DELETE)),
												o
											);
										if (1 === s.length)
											return [
												[i.DIFF_DELETE, e],
												[i.DIFF_INSERT, t],
											];
										var h = this.diff_halfMatch_(e, t);
										if (h) {
											var c = h[0],
												u = h[1],
												p = h[2],
												f = h[3],
												d = h[4],
												g = this.diff_main(c, p, n, r),
												y = this.diff_main(u, f, n, r);
											return g.concat([[i.DIFF_EQUAL, d]], y);
										}
										return n && e.length > 100 && t.length > 100
											? this.diff_lineMode_(e, t, r)
											: this.diff_bisect_(e, t, r);
									}),
									(e.prototype.diff_lineMode_ = function (e, t, n) {
										var r = this.diff_linesToChars(e, t);
										(e = r.chars1), (t = r.chars2);
										var o = r.lineArray,
											a = this.diff_main(e, t, !1, n);
										this.diff_charsToLines(a, o),
											this.diff_cleanupSemantic(a),
											a.push([i.DIFF_EQUAL, '']);
										for (var s = 0, l = 0, h = 0, c = '', u = ''; s < a.length; ) {
											switch (a[s][0]) {
												case i.DIFF_INSERT:
													h++, (u += a[s][1]);
													break;
												case i.DIFF_DELETE:
													l++, (c += a[s][1]);
													break;
												case i.DIFF_EQUAL:
													if (l >= 1 && h >= 1) {
														a.splice(s - l - h, l + h), (s = s - l - h);
														for (var p = this.diff_main(c, u, !1, n), f = p.length - 1; f >= 0; f--)
															a.splice(s, 0, p[f]);
														s += p.length;
													}
													(h = 0), (l = 0), (c = ''), (u = '');
											}
											s++;
										}
										return a.pop(), a;
									}),
									(e.prototype.diff_bisect_ = function (e, t, n) {
										for (
											var r = e.length,
												o = t.length,
												a = Math.ceil((r + o) / 2),
												s = a,
												l = 2 * a,
												h = new Array(l),
												c = new Array(l),
												u = 0;
											u < l;
											u++
										)
											(h[u] = -1), (c[u] = -1);
										(h[s + 1] = 0), (c[s + 1] = 0);
										for (
											var p = r - o, f = p % 2 != 0, d = 0, g = 0, y = 0, m = 0, v = 0;
											v < a && !(Date.now() > n);
											v++
										) {
											for (var w = -v + d; w <= v - g; w += 2) {
												for (
													var b = s + w,
														S = void 0,
														_ =
															(S =
																w === -v || (w !== v && h[b - 1] < h[b + 1])
																	? h[b + 1]
																	: h[b - 1] + 1) - w;
													S < r && _ < o && e.charAt(S) === t.charAt(_);

												)
													S++, _++;
												if (((h[b] = S), S > r)) g += 2;
												else if (_ > o) d += 2;
												else if (
													f &&
													(x = s + p - w) >= 0 &&
													x < l &&
													-1 !== c[x] &&
													S >= (D = r - c[x])
												)
													return this.diff_bisectSplit_(e, t, S, _, n);
											}
											for (var P = -v + y; P <= v - m; P += 2) {
												for (
													var x = s + P,
														D = void 0,
														T =
															(D =
																P === -v || (P !== v && c[x - 1] < c[x + 1])
																	? c[x + 1]
																	: c[x - 1] + 1) - P;
													D < r && T < o && e.charAt(r - D - 1) === t.charAt(o - T - 1);

												)
													D++, T++;
												if (((c[x] = D), D > r)) m += 2;
												else if (T > o) y += 2;
												else if (
													!f &&
													(b = s + p - P) >= 0 &&
													b < l &&
													-1 !== h[b] &&
													((_ = s + (S = h[b]) - b), S >= (D = r - D))
												)
													return this.diff_bisectSplit_(e, t, S, _, n);
											}
										}
										return [
											[i.DIFF_DELETE, e],
											[i.DIFF_INSERT, t],
										];
									}),
									(e.prototype.diff_bisectSplit_ = function (e, t, n, r, i) {
										var o = e.substring(0, n),
											a = t.substring(0, r),
											s = e.substring(n),
											l = t.substring(r),
											h = this.diff_main(o, a, !1, i),
											c = this.diff_main(s, l, !1, i);
										return h.concat(c);
									}),
									(e.prototype.diff_linesToCharsMunge_ = function (e, t, n, r) {
										for (var i = '', o = 0, a = -1, s = t.length; a < e.length - 1; ) {
											-1 === (a = e.indexOf('\n', o)) && (a = e.length - 1);
											var l = e.substring(o, a + 1);
											(n.hasOwnProperty ? n.hasOwnProperty(l) : void 0 !== n[l])
												? (i += String.fromCharCode(n[l]))
												: (s === r && ((l = e.substring(o)), (a = e.length)),
												  (i += String.fromCharCode(s)),
												  (n[l] = s),
												  (t[s++] = l)),
												(o = a + 1);
										}
										return i;
									}),
									(e.prototype.diff_commonOverlap_ = function (e, t) {
										var n = e.length,
											r = t.length;
										if (0 === n || 0 === r) return 0;
										n > r ? (e = e.substring(n - r)) : n < r && (t = t.substring(0, n));
										var i = p.min(n, r);
										if (e === t) return i;
										for (var o = 0, a = 1; ; ) {
											var s = e.substring(i - a),
												l = t.indexOf(s);
											if (-1 === l) return o;
											(a += l),
												(0 !== l && e.substring(i - a) !== t.substring(0, a)) || ((o = a), a++);
										}
									}),
									(e.prototype.diff_halfMatch_ = function (e, t) {
										if (this.diffTimeout <= 0) return null;
										var n = e.length > t.length ? e : t,
											r = e.length > t.length ? t : e;
										if (n.length < 4 || 2 * r.length < n.length) return null;
										var i,
											o,
											a,
											s,
											l,
											h = this.diff_halfMatchI_(n, r, Math.ceil(n.length / 4)),
											c = this.diff_halfMatchI_(n, r, Math.ceil(n.length / 2));
										if (!h && !c) return null;
										var u = (i = c ? (h && h[4].length > c[4].length ? h : c) : h)[4];
										return (
											e.length > t.length
												? ((o = i[0]), (a = i[1]), (s = i[2]), (l = i[3]))
												: ((s = i[0]), (l = i[1]), (o = i[2]), (a = i[3])),
											[o, a, s, l, u]
										);
									}),
									(e.prototype.diff_halfMatchI_ = function (e, t, n) {
										for (
											var r,
												i,
												o,
												a,
												s = e.substring(n, n + Math.floor(e.length / 4)),
												l = '',
												h = t.indexOf(s, 0);
											-1 !== h;

										) {
											var c = this.diff_commonPrefix(e.substring(n), t.substring(h)),
												u = this.diff_commonSuffix(e.substring(0, n), t.substring(0, h));
											l.length < u + c &&
												((l = t.substring(h - u, h) + t.substring(h, h + c)),
												(r = e.substring(0, n - u)),
												(i = e.substring(n + c)),
												(o = t.substring(0, h - u)),
												(a = t.substring(h + c))),
												(h = t.indexOf(s, h + 1));
										}
										return 2 * l.length >= e.length ? [r, i, o, a, l] : null;
									}),
									(e.prototype.diff_cleanupSemanticScore_ = function (e, t) {
										if (!e || !t) return 6;
										var n = e.charAt(e.length - 1),
											r = t.charAt(0),
											i = n.match(o),
											c = r.match(o),
											u = i && n.match(a),
											p = c && r.match(a),
											f = u && n.match(s),
											d = p && r.match(s),
											g = f && e.match(l),
											y = d && t.match(h);
										return g || y ? 5 : f || d ? 4 : i && !u && p ? 3 : u || p ? 2 : i || c ? 1 : 0;
									}),
									(e.prototype.match_bitap_ = function (e, t, n) {
										if (t.length > this.matchMaxBits)
											throw new Error('Pattern too long for this browser');
										var r = this.match_alphabet_(t),
											i = this.matchThreshold,
											o = e.indexOf(t, n);
										-1 !== o &&
											((i = p.min(this.match_bitapScore_(0, o, t, n), i)),
											-1 !== (o = e.lastIndexOf(t, n + t.length)) &&
												(i = p.min(this.match_bitapScore_(0, o, t, n), i)));
										var a,
											s,
											l = 1 << (t.length - 1);
										o = -1;
										for (var h, c = t.length + e.length, u = 0; u < t.length; u++) {
											for (a = 0, s = c; a < s; )
												this.match_bitapScore_(u, n + s, t, n) <= i ? (a = s) : (c = s),
													(s = Math.floor((c - a) / 2 + a));
											c = s;
											var f = p.max(1, n - s + 1),
												d = p.min(n + s, e.length) + t.length,
												g = Array(d + 2);
											g[d + 1] = (1 << u) - 1;
											for (var y = d; y >= f; y--) {
												var m = r[e.charAt(y - 1)];
												if (
													((g[y] =
														0 === u
															? ((g[y + 1] << 1) | 1) & m
															: (((g[y + 1] << 1) | 1) & m) |
															  ((h[y + 1] | h[y]) << 1) |
															  1 |
															  h[y + 1]),
													g[y] & l)
												) {
													var v = this.match_bitapScore_(u, y - 1, t, n);
													if (v <= i) {
														if (((i = v), !((o = y - 1) > n))) break;
														f = p.max(1, 2 * n - o);
													}
												}
											}
											if (this.match_bitapScore_(u + 1, n, t, n) > i) break;
											h = g;
										}
										return o;
									}),
									(e.prototype.match_bitapScore_ = function (e, t, n, r) {
										var i = e / n.length,
											o = Math.abs(r - t);
										return this.matchDistance ? i + o / this.matchDistance : o ? 1 : i;
									}),
									(e.prototype.match_alphabet_ = function (e) {
										for (var t = {}, n = 0; n < e.length; n++) t[e.charAt(n)] = 0;
										for (n = 0; n < e.length; n++) t[e.charAt(n)] |= 1 << (e.length - n - 1);
										return t;
									}),
									(e.prototype.patch_addContext_ = function (e, t) {
										if (0 !== t.length) {
											if (null == e.start2) throw Error('patch not initialized');
											for (
												var n = t.substring(e.start2, e.start2 + e.length1), r = 0;
												t.indexOf(n) !== t.lastIndexOf(n) &&
												n.length < this.matchMaxBits - this.patchMargin - this.patchMargin;

											)
												(r += this.patchMargin),
													(n = t.substring(e.start2 - r, e.start2 + e.length1 + r));
											r += this.patchMargin;
											var o = t.substring(e.start2 - r, e.start2);
											o && e.diffs.unshift([i.DIFF_EQUAL, o]);
											var a = t.substring(e.start2 + e.length1, e.start2 + e.length1 + r);
											a && e.diffs.push([i.DIFF_EQUAL, a]),
												(e.start1 -= o.length),
												(e.start2 -= o.length),
												(e.length1 += o.length + a.length),
												(e.length2 += o.length + a.length);
										}
									}),
									e
								);
							})();
					},
				]),
			);
		},
		'75c9': function (e, t, n) {
			'use strict';
			function r(e, t) {
				if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
			}
			function i(e, t) {
				for (var n = 0; n < t.length; n++) {
					var r = t[n];
					(r.enumerable = r.enumerable || !1),
						(r.configurable = !0),
						'value' in r && (r.writable = !0),
						Object.defineProperty(e, r.key, r);
				}
			}
			function o(e, t, n) {
				return t && i(e.prototype, t), n && i(e, n), e;
			}
			n.d(t, 'a', function () {
				return s;
			});
			var a = n('57be'),
				s = (function () {
					function e() {
						r(this, e);
					}
					return (
						o(e, null, [
							{
								key: 'create',
								value: function (e) {
									var t = new a['Runtime'](
											'eyJuYW1lIjoiemhpaHV4aW5nIiwic3RtIjoxNjYwNjA4MDAwMDAwLCJleHAiOjIwMDc4NDk2MDAwMDAsImxpdGUiOmZhbHNlfQ==.0779918c4f3e45717d2c2eb310c80f12',
											e,
										),
										n = window.sessionStorage.getItem('language') || 'zh-CN';
									return (t.shapeManager.view.enLangMode = 'zh-CN' != n), t;
								},
							},
						]),
						e
					);
				})();
		},
	},
]);
